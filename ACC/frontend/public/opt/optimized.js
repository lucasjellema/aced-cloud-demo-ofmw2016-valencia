!function(){function t(t,e,n,i,r,o){return e[t]||(t=t.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),!!e[t]&&(n.push(t),!0!==e[t]&&1!==e[t]||i.push(r+t+"/"+o),!0)}function e(t){var e=t.toLowerCase().split(/-|_/);t=[e[0]];var n,i=1;for(n=1;n<e.length;n++){var r=e[n],o=r.length;if(1==o)break;switch(i){case 1:if(i=2,4==o){t.push(r.charAt(0).toUpperCase()+r.slice(1));break}case 2:i=3,t.push(r.toUpperCase());break;default:t.push(r)}}return"zh"!=t[0]||1<t.length&&4==t[1].length||(e="Hans",i=1<t.length?t[1]:null,"TW"!==i&&"MO"!==i&&"HK"!==i||(e="Hant"),t.splice(1,0,e)),t}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(null==t[i]?t[i]=e[i]:"object"==typeof e[i]&&"object"==typeof t[i]&&n(t[i],e[i]))}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(r){var o=r.config?r.config():{};return{version:"2.0.1+",load:function(r,a,s,l){l=l||{},l.locale&&(o.locale=l.locale);var u,h,c,d,p,g,f,_,m,v=i.exec(r),y=v[1],S=v[5],C=[],b={},E="";for(v[5]?(y=v[1],r=y+S,u=v[4]):(S=v[4],u=o.locale,"undefined"!=typeof document?(u||(u=l.isBuild?"root":document.documentElement.lang)||(u=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),o.locale=u):u="root"),h=e(u),d=o.noOverlay,p=o.defaultNoOverlayLocale,(v=o.merge)&&(g=v[y+S])&&(v=i.exec(g),f=v[1],_=v[4]),m=[],c=0;c<h.length;c++)v=h[c],E+=(E?"-":"")+v,m.push(E);l.isBuild?(C.push(r),g&&C.push(g),a(C,function(){s()})):("query"==o.includeLocale&&(r=a.toUrl(r+".js"),r+=(-1===r.indexOf("?")?"?":"&")+"loc="+u),l=[r],g&&l.push(g),a(l,function(e,i){var r,o=[],l=!1,u=d||!0===e.__noOverlay,g=p||e.__defaultNoOverlayLocale;for(c=m.length-1;0<=c&&(!l||!u);c--)l=t(m[c],e,o,C,y,S);if(u&&!l&&g&&t(g,e,o,C,y,S),t("root",e,o,C,y,S),r=o.length,i){for(l=!1,u=!0===i.__noOverlay,g=i.__defaultNoOverlayLocale,c=m.length-1;0<=c&&(!l||!u);c--)l=t(m[c],i,o,C,f,_);u&&!l&&g&&t(g,i,o,C,f,_),t("root",i,o,C,f,_)}a(C,function(){var t,l,u;for(t=r;t<o.length&&o[t];t++)u=o[t],l=i[u],!0!==l&&1!==l||(l=a(f+u+"/"+_)),n(b,l);for(t=0;t<r&&o[t];t++)u=o[t],l=e[u],!0!==l&&1!==l||(l=a(y+u+"/"+S)),n(b,l);b._ojLocale_=h.join("-"),s(b)})}))}}})}(),define("ojtranslations/nls/ojtranslations",{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Enter a value in the same format as this example: '{exampleValue}'","detail-plural":"Enter a value in the same format as these examples: '{exampleValue}'"},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"'{value}' is not in the expected number format."},decimalFormatUnsupportedParse:{summary:"decimalFormat: 'short' and 'long' are not supported for converter parsing.",detail:"Change component to readOnly. readOnly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"'{value}' is not in the expected currency format."},percentFormatMismatch:{summary:"'{value}' is not in the expected percent format."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'."},dateFormatMismatch:{summary:"'{value}' is not in the expected date format."},invalidTimeZoneID:{summary:"Invalid timezone id {timeZoneID} provided."},nonExistingTime:{summary:"The input time does not exist because it falls during the transition to daylight saving time."},missingTimeZoneData:{summary:"TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data."},timeFormatMismatch:{summary:"'{value}' is not in the expected time format."},datetimeFormatMismatch:{summary:"'{value}' is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters",inRange:"Enter {min} or more characters, up to a maximum of {max}.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters, not fewer.",tooLong:"Enter {max} or fewer characters, not more."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}."},messageDetail:{rangeUnderflow:"The number must be greater than or equal to {min}.",rangeOverflow:"The number must be less than or equal to {max}."},messageSummary:{rangeUnderflow:"The number is too low.",rangeOverflow:"The number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Date and time must be on or later than {min}.",rangeOverflow:"Date and time must be on or sooner than {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date.",rangeOverflow:"Date and time is later than the maximum date."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"Date {value} should not be of a disabled entry."}},regExp:{summary:"Format is incorrect.",detail:"Value '{value}' must match this pattern: '{pattern}'"},required:{summary:"Value is required.",detail:"You must enter a value."}},"oj-editableValue":{required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputDate":{prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date",tooltipCalendarDisabled:"Select Date Disabled",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputTime":{cancelText:"Cancel",okText:"OK",currentTimeText:"Now",hourWheelLabel:"Hour",minuteWheelLabel:"Minute",ampmWheelLabel:"AMPM",tooltipTime:"Select Time",tooltipTimeDisabled:"Select Time Disabled",inputHelp:"Press Key down or Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{regexp:{messageSummary:"",messageDetail:""}},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'"}},"oj-ojFilmStrip":{labelAccArrowNextPage:"Next Page",labelAccArrowPreviousPage:"Previous Page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleActionableMode:"Enter actionable mode",accessibleNavigationMode:"Enter navigation mode, press F2 to enter edit or actionable mode",accessibleEditableMode:"Enter editable mode, press escape to navigate outside the data grid",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowEndHeaderContext:"Row End Header {index}",accessibleColumnEndHeaderContext:"Column End Header {index}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on",accessibleRangeSelectModeOff:"Add selected range of cells mode off",accessibleFirstRow:"You have reached the first row",accessibleLastRow:"You have reached the last row",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column",accessibleSelectionAffordanceTop:"Top selection handle",accessibleSelectionAffordanceBottom:"Bottom selection handle",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelCut:"Cut",labelPaste:"Paste",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",accessibleReorderInsideItem:"Into {item}",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{numberRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelSelectRow:"Select Row",labelEditRow:"Edit Row",labelSelectAndEditRow:"Select And Edit Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display."},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojSelect":{searchField:"Search field",noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found"},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{noMatchesFound:"No matches found"},"oj-ojInputSearch":{noMatchesFound:"No matches found"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteAfter:"Paste After",labelPasteBefore:"Paste Before",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelQ1:"Q1",labelQ2:"Q2",labelQ3:"Q3",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{promotedLink:"{0} link",promotedLinks:"{0} links",promotedLinkAriaDesc:"Indirect",componentName:"Diagram"},"oj-ojGantt":{componentName:"Gantt",accessibleDurationDays:"{0} days",accessibleDurationHours:"{0} hours",accessibleTaskInfo:"Start time is {0}, end time is {1}, duration is {2}",accessibleMilestoneInfo:"Time is {0}",accessibleRowInfo:"Row {0}",accessiblePredecessorInfo:"{0} predecessors",accessibleSuccessorInfo:"{0} successors",accessibleDependencyInfo:"Dependency type {0}, connects {1} to {2}",startStartDependencyAriaDesc:"start to start",startFinishDependencyAriaDesc:"start to finish",finishStartDependencyAriaDesc:"finish to start",finishFinishDependencyAriaDesc:"finish to finish",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelRow:"Row",labelStart:"Start",labelEnd:"End",labelLabel:"Label"},"oj-ojLegend":{componentName:"Legend"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"NBox"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud"},"oj-ojThematicMap":{componentName:"Thematic Map"},"oj-ojTimeAxis":{componentName:"Time Axis"},"oj-ojTimeline":{componentName:"Timeline",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"No items to display."},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than min",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened.  Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-pullToRefresh":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojIndexer":{indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."},"oj-ojMenu":{labelCancel:"Cancel"}},ro:1,"zh-Hant":1,sv:1,ko:1,th:1,"zh-Hans":1,sk:1,pl:1,nl:1,fi:1,he:1,de:1,es:1,el:1,hu:1,ru:1,it:1,da:1,tr:1,ja:1,"pt-PT":1,cs:1,fr:1,no:1,pt:1,"fr-CA":1,ar:1}),function(){function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function i(t){j=t}function r(t){K=t}function o(){return function(){process.nextTick(h)}}function a(){return function(){H(h)}}function s(){var t=0,e=new X(h),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function l(){var t=new MessageChannel;return t.port1.onmessage=h,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(h,1)}}function h(){for(var t=0;t<Y;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}Y=0}function c(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,a()}catch(n){return u()}}function d(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){try{return t.then}catch(e){return et.error=e,et}}function _(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function m(t,e,n){K(function(t){var i=!1,r=_(n,e,function(n){i||(i=!0,e!==n?S(t,n):b(t,n))},function(e){i||(i=!0,E(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,E(t,r))},t)}function v(t,e){e._state===Q?b(t,e._result):e._state===tt?E(t,e._result):T(e,void 0,function(e){S(t,e)},function(e){E(t,e)})}function y(t,n){if(n.constructor===t.constructor)v(t,n);else{var i=f(n);i===et?E(t,et.error):void 0===i?b(t,n):e(i)?m(t,n,i):b(t,n)}}function S(e,n){e===n?E(e,p()):t(n)?y(e,n):b(e,n)}function C(t){t._onerror&&t._onerror(t._result),A(t)}function b(t,e){t._state===J&&(t._result=e,t._state=Q,0!==t._subscribers.length&&K(A,t))}function E(t,e){t._state===J&&(t._state=tt,t._result=e,K(C,t))}function T(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+Q]=n,r[o+tt]=i,0===o&&t._state&&K(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,a=0;a<e.length;a+=3)i=e[a],r=e[a+n],i?O(n,i,r,o):r(o);t._subscribers.length=0}}function x(){this.error=null}function I(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function O(t,n,i,r){var o,a,s,l,u=e(i);if(u){if(o=I(i,r),o===nt?(l=!0,a=o.error,o=null):s=!0,n===o)return void E(n,g())}else o=r,s=!0;n._state!==J||(u&&s?S(n,o):l?E(n,a):t===Q?b(n,o):t===tt&&E(n,o))}function M(t,e){try{e(function(e){S(t,e)},function(e){E(t,e)})}catch(n){E(t,n)}}function D(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(d),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?b(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&b(n.promise,n._result))):E(n.promise,n._validationError())}function P(t){return new it(this,t).promise}function w(t){function e(t){S(r,t)}function n(t){E(r,t)}var i=this,r=new i(d);if(!V(t))return E(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,a=0;r._state===J&&a<o;a++)T(i.resolve(t[a]),void 0,e,n);return r}function R(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(d);return S(n,t),n}function L(t){var e=this,n=new e(d);return E(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function k(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this._id=lt++,this._state=void 0,this._result=void 0,this._subscribers=[],d!==t&&(e(t)||N(),this instanceof U||k(),M(this,t))}function B(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=ut)}var F;F=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var H,j,G,V=F,Y=0,K=({}.toString,function(t,e){$[Y]=t,$[Y+1]=e,Y+=2,2===Y&&(j?j(h):G())}),W="undefined"!=typeof window?window:void 0,z=W||{},X=z.MutationObserver||z.WebKitMutationObserver,q="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3);G=q?o():X?s():Z?l():void 0===W&&"function"==typeof require?c():u();var J=void 0,Q=1,tt=2,et=new x,nt=new x;D.prototype._validateInput=function(t){return V(t)},D.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},D.prototype._init=function(){this._result=new Array(this.length)};var it=D;D.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,i=t._input,r=0;n._state===J&&r<e;r++)t._eachEntry(i[r],r)},D.prototype._eachEntry=function(t,e){var i=this,r=i._instanceConstructor;n(t)?t.constructor===r&&t._state!==J?(t._onerror=null,i._settledAt(t._state,e,t._result)):i._willSettleAt(r.resolve(t),e):(i._remaining--,i._result[e]=t)},D.prototype._settledAt=function(t,e,n){var i=this,r=i.promise;r._state===J&&(i._remaining--,t===tt?E(r,n):i._result[e]=n),0===i._remaining&&b(r,i._result)},D.prototype._willSettleAt=function(t,e){var n=this;T(t,void 0,function(t){n._settledAt(Q,e,t)},function(t){n._settledAt(tt,e,t)})};var rt=P,ot=w,at=R,st=L,lt=0,ut=U;U.all=rt,U.race=ot,U.resolve=at,U.reject=st,U._setScheduler=i,U._setAsap=r,U._asap=K,U.prototype={constructor:U,then:function(t,e){var n=this,i=n._state;if(i===Q&&!t||i===tt&&!e)return this;var r=new this.constructor(d),o=n._result;if(i){var a=arguments[i-1];K(function(){O(i,r,a,o)})}else T(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var ht=B,ct={Promise:ut,polyfill:ht};"function"==typeof define&&define.amd?define("promise",[],function(){return ct}):"undefined"!=typeof module&&module.exports?module.exports=ct:"undefined"!=typeof this&&(this.ES6Promise=ct),ht()}.call(this),define("ojs/ojcore",["require","ojL10n!ojtranslations/nls/ojtranslations","promise"],function(t,e){var n={};"undefined"!=typeof window?n=window:"undefined"!=typeof self&&(n=self);var i=n.oj,r=n.oj={version:"2.3.0",build:"3",revision:"30989",noConflict:function(){n.oj=i}};r.Logger={},r.Logger.LEVEL_NONE=0,r.Logger.LEVEL_ERROR=1,r.Logger.LEVEL_WARN=2,r.Logger.LEVEL_INFO=3,r.Logger.LEVEL_LOG=4,r.Logger._METHOD_ERROR="error",r.Logger._METHOD_WARN="warn",r.Logger._METHOD_INFO="info",r.Logger._METHOD_LOG="log",r.Logger._defaultOptions={level:r.Logger.LEVEL_ERROR,writer:null},r.Logger._options=r.Logger._defaultOptions,r.Logger.error=function(t){r.Logger._write(r.Logger.LEVEL_ERROR,r.Logger._METHOD_ERROR,arguments)},r.Logger.info=function(t){r.Logger._write(r.Logger.LEVEL_INFO,r.Logger._METHOD_INFO,arguments)},r.Logger.warn=function(t){r.Logger._write(r.Logger.LEVEL_WARN,r.Logger._METHOD_WARN,arguments)},r.Logger.log=function(t){r.Logger._write(r.Logger.LEVEL_LOG,r.Logger._METHOD_LOG,arguments)},r.Logger.option=function(t,e){var n,i={};if(0==arguments.length){for(n in r.Logger._options)r.Logger._options.hasOwnProperty(n)&&(i[n]=r.Logger._options[n]);return i}if("string"==typeof t&&void 0===e)return void 0===r.Logger._options[t]?null:r.Logger._options[t];if("string"==typeof t)r.Logger._options[t]=e;else{var o=t;for(n in o)o.hasOwnProperty(n)&&r.Logger.option(n,o[n])}},r.Logger._write=function(t,e,n){if(!(r.Logger.option("level")<t)){var i=r.Logger._getWriter();if(null!=i){if(1==n.length&&n[0]instanceof Function){var o=n[0]();n=[o]}i[e]&&i[e].apply?i[e].apply(i,n):i[e]&&(i[e]=Function.prototype.bind.call(i[e],i),r.Logger._write(t,e,n))}}},r.Logger._getWriter=function(){var t=null;return r.Logger.option("writer")?t=r.Logger.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(t=window.console),t},r.Logger._validateOption=function(t){return void 0!==r.Logger._defaultOptions[t]};var o=n.__ojCheckpointManager;r.CHECKPOINT_MANAGER={},r.CHECKPOINT_MANAGER.startCheckpoint=function(t,e){o&&o.startCheckpoint(t,e)},r.CHECKPOINT_MANAGER.endCheckpoint=function(t){o&&o.endCheckpoint(t)},r.CHECKPOINT_MANAGER.getRecord=function(t){return o?o.getRecord(t):void 0},r.CHECKPOINT_MANAGER.matchRecords=function(t){return o?o.matchRecords(t):[]},r.CHECKPOINT_MANAGER.dump=function(t){r.Logger.info(function(){for(var e="Checkpoint Records:",n=r.CHECKPOINT_MANAGER.matchRecords(t),i=0;i<n.length;i++){var o=n[i];e=e+"\n"+o.name;var a=o.description;null!=a&&(e=e+" ("+a+")"),e+=":\n",e=e+"start: "+o.start+"\tduration: "+o.duration}return e})},r.Object=function(){this.Init()},r.Object.superclass=null,r.Object._typeName="oj.Object",r.Object._GET_FUNCTION_NAME_REGEXP=/function\s+([\w\$][\w\$\d]*)\s*\(/,r.Object.prototype={},r.Object.prototype.constructor=r.Object,r.Object.exportPrototypeSymbol=function(t,e){var n,i=null,o=null;for(n in e)if(e.hasOwnProperty(n)){i=n,o=e[n];break}var a=t.split("."),s=r[a[0]],l=a[2];if(i!=l&&null!=i){var u=s._r2o;u||(u={},s._r2o=u),u[i]=l,goog.exportProperty(s.prototype,l,o)}},r.Object.createSubclass=function(t,e,n){r.Assert.assertFunction(t),r.Assert.assertFunctionOrNull(e),r.Assert.assertStringOrNull(n),void 0===e&&(e=r.Object),r.Assert.assert(t!==e,"Class can't extend itself");var i=r.Object._tempSubclassConstructor;i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=t.superclass=e.prototype,n&&(t._typeName=n)},r.Object.copyPropertiesForClass=function(t,e){var n;r.Assert.assertFunction(t),r.Assert.assert(null!=e,"source object cannot be null");for(n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])},r.Object._tempSubclassConstructor=function(){},r.Object.prototype.getClass=function(t){if(void 0===t)t=this;else if(null===t)return null;return t.constructor},r.Object.prototype.clone=function(){var t=new this.constructor;return r.CollectionUtils.copyInto(t,this),t},r.Object.prototype.toString=function(){return this.toDebugString()},r.Object.prototype.toDebugString=function(){return this.getTypeName()+" Object"},r.Object.getTypeName=function(t){r.Assert.assertFunction(t);var e,n,i=t._typeName;return null==i&&(e=t.toString(),n=r.Object._GET_FUNCTION_NAME_REGEXP.exec(e),i=n?n[1]:"anonymous",t._typeName=i),i},r.Object.prototype.getTypeName=function(){return r.Object.getTypeName(this.constructor)},r.Object.prototype.Init=function(){r.Assert.isDebug()&&r.Assert.assert(this.getTypeName,"Not an oj.Object");var t=this.constructor;t._initialized||r.Object._initClasses(t)},r.Object.ensureClassInitialization=function(t){r.Assert.assertFunction(t),t._initialized||r.Object._initClasses(t)},r.Object.prototype.equals=function(t){return this===t},r.Object.createCallback=function(t,e){return r.Assert.assertFunction(e),e.bind(t)},r.Object._initClasses=function(t){r.Assert.isDebug()&&(r.Assert.assertFunction(t),r.Assert.assert(!t._initialized)),t._initialized=!0;var e,n,i=t.superclass;i&&(e=i.constructor,e&&!e._initialized&&r.Object._initClasses(e),r.Object._applyRenamesToSubclass(t)),n=t.InitClass||null,n||(n=t.InitClass),n&&n.call(t)},r.Object.compareValues=function(t,e){if(t===e)return!0;var n=typeof t,i=typeof e;if(n!==i)return!1;if(null===t||null===e)return!1;if(t.constructor===e.constructor){if(Array.isArray(t))return r.Object._compareArrayValues(t,e);if(t.constructor===Object)return r.Object.__innerEquals(t,e);if(t.valueOf&&"function"==typeof t.valueOf)return t.valueOf()===e.valueOf()}return!1},r.Object._compareArrayValues=function(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(!r.Object.compareValues(t[n],e[n]))return!1;return!0},r.Object._compareSet=function(t,e){if(!t)return!e||0==e.length;if(!e)return!t||0==t.length;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n]&&(t.indexOf(e[n])==-1||e.indexOf(t[n])==-1))return!1;return!0},r.Object.__innerEquals=function(t,e){var n,i=!1;if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;for(n in t)if(i||(i=!0),t.hasOwnProperty(n)){if(!e.hasOwnProperty(n))return!1;if(t[n]!==e[n]){if("object"!=typeof t[n])return!1;if(!r.Object.__innerEquals(t[n],e[n]))return!1}}for(n in e)if(i||(i=!0),e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!!i||JSON.stringify(t)===JSON.stringify(e)},r.Object.isEmpty=function(t){var e;if(void 0===t||null===t)return!0;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},r.Object._applyRenamesToSubclass=function(t){if(r.Object._r2o){var e=t.superclass;r.Object._applyRenamesFromChain(t,e)}},r.Object._applyRenamesFromChain=function(t,e){if(e){var n=e.constructor;r.Object._applyRenamesFromChain(t,n.superclass);var i,o=n._r2o;if(o)for(i in o)if(o.hasOwnProperty(i)){var a=o[i];if(i!=a){var s=t.prototype;!s.hasOwnProperty(i)&&s.hasOwnProperty(a)?s[i]=s[a]:!s.hasOwnProperty(a)&&s.hasOwnProperty(i)&&(s[a]=s[i])}}}},r.__isAmdLoaderPresent=function(){return"function"==typeof define&&define.amd},r.Assert={};var a="DEBUG";r.Assert.forceDebug=function(){r.Assert[a]=!0},r.Assert.clearDebug=function(){r.Assert[a]=!1},r.Assert.isDebug=function(){return 1==r.Assert[a]},r.Assert.assert=function(t,e){if(r.Assert[a]&&!t){var n,i=e||"";if(arguments.length>2){for(i+="(",n=2;n<arguments.length;n+=1)i+=arguments[n];i+=")"}r.Assert.assertionFailed(i,1)}},r.Assert.failedInAbstractFunction=function(){r.Assert[a]&&r.Assert.assertionFailed("Abstract function called",1)},r.Assert.assertPrototype=function(t,e,n){var i;r.Assert[a]&&(null!=t?(r.Assert.assertType(e,"function",null,1,!1),i=e.prototype,i.isPrototypeOf(t)||r.Assert.assertionFailed("object '"+t+"' doesn't match prototype "+i,1,n)):r.Assert.assertionFailed("null object doesn't match prototype "+i,1,n))},r.Assert.assertPrototypeOrNull=function(t,e,n){var i;r.Assert[a]&&null!=t&&(null!=t?(r.Assert.assertType(e,"function",null,1,!1),i=e.prototype,i.isPrototypeOf(t)||r.Assert.assertionFailed("object '"+t+"' doesn't match prototype "+i,1,n)):r.Assert.assertionFailed("null object doesn't match prototype "+i,1,n))},r.Assert.assertPrototypes=function(t,e,n,i){
if(r.Assert[a]){var o=e.prototype,s=n.prototype;o.isPrototypeOf(t)||s.isPrototypeOf(t)||r.Assert.assertionFailed("object '"+t+"' doesn't match prototype "+o+" or "+s,1,i)}},r.Assert.assertDomNodeOrNull=function(t,e){r.Assert[a]&&t&&void 0===t.nodeType&&r.Assert.assertionFailed(t+" is not a DOM Node",e+1)},r.Assert.assertDomNode=function(t,e){r.Assert[a]&&(t&&void 0!==t.nodeType||r.Assert.assertionFailed(t+" is not a DOM Node",e+1))},r.Assert.assertDomElement=function(t,e){r.Assert[a]&&(r.Assert.assertDomNode(t,1),1!==t.nodeType?r.Assert.assertionFailed(t+" is not a DOM Element",1):e&&t.nodeName!==e&&r.Assert.assertionFailed(t+" is not a "+e+" Element",1))},r.Assert.assertDomElementOrNull=function(t,e){r.Assert[a]&&null!=t&&(r.Assert.assertDomNode(t,1),1!==t.nodeType?r.Assert.assertionFailed(t+" is not a DOM Element",1):e&&t.nodeName!==e&&r.Assert.assertionFailed(t+" is not a "+e+" Element",1))},r.Assert.assertType=function(t,e,n,i,o){if(r.Assert[a]){var s,l=typeof t;null==t&&o||l===e||(s=t+" is not of type "+e,n&&(s=n+s),i||(i=0),r.Assert.assertionFailed(s,i+1))}},r.Assert.assertObject=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"object",e,1,!1)},r.Assert.assertObjectOrNull=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"object",e,1,!0)},r.Assert.assertNonEmptyString=function(t,e){r.Assert[a]&&(r.Assert.assertType(t,"string",e,1,!1),r.Assert.assert(t.length>0,"empty string"))},r.Assert.assertString=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"string",e,1,!1)},r.Assert.assertStringOrNull=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"string",e,1,!0)},r.Assert.assertFunction=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"function",e,1,!1)},r.Assert.assertFunctionOrNull=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"function",e,1,!0)},r.Assert.assertBoolean=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"boolean",e,1,!1)},r.Assert.assertNumber=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"number",e,1,!1)},r.Assert.assertNumberOrNull=function(t,e){r.Assert[a]&&r.Assert.assertType(t,"number",e,1,!0)},r.Assert.assertArray=function(t,e){r.Assert[a]&&(Array.isArray(t)||(void 0===e&&(e=t+" is not an array"),r.Assert.assertionFailed(e,1)))},r.Assert.assertArrayOrNull=function(t,e){r.Assert[a]&&null!=t&&(Array.isArray(t)||(void 0===e&&(e=t+" is not an array"),r.Assert.assertionFailed(e,1)))},r.Assert.assertNonNumeric=function(t,e){r.Assert[a]&&(isNaN(t)||(void 0===e&&(e=t+" is convertible to a number"),r.Assert.assertionFailed(e,1)))},r.Assert.assertNumeric=function(t,e){r.Assert[a]&&isNaN(t)&&(void 0===e&&(e=t+" is not convertible to a number"),r.Assert.assertionFailed(e,1))},r.Assert.assertInSet=function(t,e,n){var i,o;if(null==t||void 0===e[t.toString()]){if(void 0===n){i=" is not in set: {";for(o in e)e.hasOwnProperty(o)&&(i+=o,i+=",");i+="}",n=t+i}r.Assert.assertionFailed(n,1)}},r.Assert.assertionFailed=function(t,e,n){e||(e=0);var i,r="Assertion";throw n&&(r+=" ("+n+")"),r+=" failed: ",void 0!==t&&(r+=t),i=new Error(r)};var s=n.__oj_Assert_DEBUG;return void 0!==s&&(r.Assert[a]=s),r.EventSource=function(){this.Init()},r.Object.createSubclass(r.EventSource,r.Object,"oj.EventSource"),r.EventSource.prototype.Init=function(){this._eventHandlers=[],r.EventSource.superclass.Init.call(this)},r.EventSource.prototype.on=function(t,e){var n,i=!1;for(n=0;n<this._eventHandlers.length;n++)if(this._eventHandlers[n].eventType==t&&this._eventHandlers[n].eventHandlerFunc==e){i=!0;break}i||this._eventHandlers.push({eventType:t,eventHandlerFunc:e})},r.EventSource.prototype.off=function(t,e){var n;for(n=this._eventHandlers.length-1;n>=0;n--)if(this._eventHandlers[n].eventType==t&&this._eventHandlers[n].eventHandlerFunc==e){this._eventHandlers.splice(n,1);break}},r.EventSource.prototype.handleEvent=function(t,e){var n,i;for(n=0;n<this._eventHandlers.length;n++){var r=this._eventHandlers[n];if(r.eventType==t&&(i=r.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)),i===!1))return!1}return!0},r.Config={},r.Config.getLocale=function(){var t,n;return r.__isAmdLoaderPresent()?(r.Assert.assert(void 0!==e,"ojtranslations module must be defined"),t=e._ojLocale_,"root"==t?"en":t):(n=r.Config._locale,null==n&&(n=document.documentElement.lang,n||(n=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),r.Config._locale=n=n.toLowerCase()),n)},r.Config.setLocale=function(n,i){if(r.__isAmdLoaderPresent()){var o="ojL10n!ojtranslations/nls/",a=[o+n+"/ojtranslations"],s=0;if(r.LocaleData&&(a.push(o+n+"/localeElements"),r.TimezoneData)){var l=r.TimezoneData.__getBundleNames();s=l.length,l.forEach(function(t){a.push(o+n+t)})}t(a,function(t,n){e=t,n&&r.LocaleData.__updateBundle(n);for(var o=0;o<s;o++){var a=arguments[o+2];r.TimezoneData.__mergeIntoLocaleElements(a)}i&&i()})}else r.Config._locale=n,i&&i()},r.Config.getResourceUrl=function(e){var n,i,o=/^\/|:/;return null==e||o.test(e)?e:(n=r.Config._resourceBaseUrl,n?n+("/"==n.charAt(n.length-1)?"":"/")+e:r.__isAmdLoaderPresent()?(i=t.toUrl("ojs/_foo_"),i.replace(/[^\/]*$/,"../"+e)):e)},r.Config.setResourceBaseUrl=function(t){r.Config._resourceBaseUrl=t},r.Config.setAutomationMode=function(t){r.Config._automationMode=t},r.Config.getAutomationMode=function(){return r.Config._automationMode},r.Config.getVersionInfo=function(){var t="Oracle JET Version: "+r.version+"\n";t+="Oracle JET Revision: "+r.revision+"\n";var e="undefined"!=typeof window;return e&&window.navigator&&(t+="Browser: "+window.navigator.userAgent+"\n",t+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(t+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(t+="jQuery UI Version: "+$.ui.version+"\n")),r.ComponentBinding&&(t+="Knockout Version: "+r.ComponentBinding.__getKnockoutVersion()+"\n"),e&&window.require&&(t+="Require Version: "+window.require.version+"\n"),t},r.Config.logVersionInfo=function(){console.log(r.Config.getVersionInfo())},r.AgentUtils=function(){},r.AgentUtils.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",UNKNOWN:"unknown"},r.AgentUtils.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},r.AgentUtils.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",LINUX:"Linux"},r.AgentUtils.getAgentInfo=function(t){r.StringUtils.isEmptyOrUndefined(t)&&(t=navigator.userAgent),t=t.toLowerCase();var e=r.StringUtils.hashCode(t),n=r.AgentUtils._currAgentInfo;if(n&&n.hashCode===e)return{os:n.os,browser:n.browser,browserVersion:n.browserVersion,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode};var i=r.AgentUtils.OS.UNKNOWN,o=r.AgentUtils.BROWSER.UNKNOWN,a=0,s=r.AgentUtils.ENGINE.UNKNOWN,l=0;return t.indexOf("iphone")>-1||t.indexOf("ipad")>-1?i=r.AgentUtils.OS.IOS:t.indexOf("mac")>-1?i=r.AgentUtils.OS.MAC:t.indexOf("sunos")>-1?i=r.AgentUtils.OS.SOLARIS:t.indexOf("android")>-1?i=r.AgentUtils.OS.ANDROID:t.indexOf("linux")>-1?i=r.AgentUtils.OS.LINUX:t.indexOf("win")>-1&&(i=r.AgentUtils.OS.WINDOWS),t.indexOf("msie")>-1?(o=r.AgentUtils.BROWSER.IE,a=r.AgentUtils._parseFloatVersion(t,/msie (\d+[.]\d+)/),t.indexOf("trident")&&(s=r.AgentUtils.ENGINE.TRIDENT,l=r.AgentUtils._parseFloatVersion(t,/trident\/(\d+[.]\d+)/))):t.indexOf("trident")>-1?(o=r.AgentUtils.BROWSER.IE,a=r.AgentUtils._parseFloatVersion(t,/rv:(\d+[.]\d+)/),t.indexOf("trident")&&(s=r.AgentUtils.ENGINE.TRIDENT,l=r.AgentUtils._parseFloatVersion(t,/trident\/(\d+[.]\d+)/))):t.indexOf("edge")>-1?(o=r.AgentUtils.BROWSER.EDGE,a=l=r.AgentUtils._parseFloatVersion(t,/edge\/(\d+[.]\d+)/),s=r.AgentUtils.ENGINE.EDGE_HTML):t.indexOf("chrome")>-1?(o=r.AgentUtils.BROWSER.CHROME,a=r.AgentUtils._parseFloatVersion(t,/chrome\/(\d+[.]\d+)/),a>=28?(s=r.AgentUtils.ENGINE.BLINK,l=a):(s=r.AgentUtils.ENGINE.WEBKIT,l=r.AgentUtils._parseFloatVersion(t,/applewebkit\/(\d+[.]\d+)/))):t.indexOf("safari")>-1?(o=r.AgentUtils.BROWSER.SAFARI,a=r.AgentUtils._parseFloatVersion(t,/version\/(\d+[.]\d+)/),s=r.AgentUtils.ENGINE.WEBKIT,l=r.AgentUtils._parseFloatVersion(t,/applewebkit\/(\d+[.]\d+)/)):t.indexOf("firefox")>-1&&(o=r.AgentUtils.BROWSER.FIREFOX,a=r.AgentUtils._parseFloatVersion(t,/rv:(\d+[.]\d+)/),s=r.AgentUtils.ENGINE.GECKO,l=r.AgentUtils._parseFloatVersion(t,/gecko\/(\d+)/)),n=r.AgentUtils._currAgentInfo={hashCode:e,os:i,browser:o,browserVersion:a,engine:s,engineVersion:l},{os:n.os,browser:n.browser,browserVersion:n.browserVersion,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode}},r.AgentUtils._parseFloatVersion=function(t,e){var n=t.match(e);if(n){var i=n[1];if(i)return parseFloat(i)}return 0},r.ThemeUtils=function(){},r.ThemeUtils.getThemeName=function(){var t=r.ThemeUtils.parseJSONFromFontFamily("oj-theme-json")||{};return t.name},r.ThemeUtils.getThemeTargetPlatform=function(){var t=r.ThemeUtils.parseJSONFromFontFamily("oj-theme-json")||{};return t.targetPlatform},r.ThemeUtils.clearCache=function(){this._cache=null},r.ThemeUtils.parseJSONFromFontFamily=function(t){null==this._cache&&(this._cache={},this._null_cache_value={},this._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var e=this._cache[t];if(e===this._null_cache_value)return null;if(null!=e)return e;var n=document.createElement("meta");n.className=t,document.head.appendChild(n);var i=window.getComputedStyle(n).getPropertyValue("font-family");if(null!=i)if(i==this._headfontstring)r.Logger.warn("parseJSONFromFontFamily: When the selector ",t," is applied the font-family read off the dom element is ",i,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",t,". Null will be returned.");else{var o=i.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(o)try{e=JSON.parse(o)}catch(a){throw r.Logger.error("Error parsing json for selector "+t+".\nString being parsed is "+o+". Error is:\n",a),document.head.removeChild(n),a}}return document.head.removeChild(n),null==e?this._cache[t]=this._null_cache_value:this._cache[t]=e,e},r.ResponsiveUtils=function(){},r.ResponsiveUtils.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},r.ResponsiveUtils.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},r.ResponsiveUtils._RANGE={},r.ResponsiveUtils._RANGE[r.ResponsiveUtils.SCREEN_RANGE.SM]=0,r.ResponsiveUtils._RANGE[r.ResponsiveUtils.SCREEN_RANGE.MD]=1,r.ResponsiveUtils._RANGE[r.ResponsiveUtils.SCREEN_RANGE.LG]=2,r.ResponsiveUtils._RANGE[r.ResponsiveUtils.SCREEN_RANGE.XL]=3,r.ResponsiveUtils._RANGE[r.ResponsiveUtils.SCREEN_RANGE.XXL]=4,r.ResponsiveUtils._getMediaQueryFromClass=function(t){var e=document.getElementsByClassName(t).item(0);null===e&&(e=document.createElement("meta"),e.className=t,document.head.appendChild(e));var n=window.getComputedStyle(e).getPropertyValue("font-family");return n.replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},r.ResponsiveUtils.getFrameworkQuery=function(t){var e="oj-mq-"+t,n=r.ResponsiveUtils._getMediaQueryFromClass(e);return"null"==n?null:n},r.ResponsiveUtils.compare=function(t,e){var n=r.ResponsiveUtils._RANGE[t],i=r.ResponsiveUtils._RANGE[e];if(void 0==n)throw"size1 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";if(void 0==i)throw"size2 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";return n-i},r.StringUtils={},r.StringUtils._TRIM_ALL_RE=/^\s*|\s*$/g,r.StringUtils.isEmpty=function(t){if(null===t)return!0;var e=r.StringUtils.trim(t);return 0===e.length},r.StringUtils.isEmptyOrUndefined=function(t){return!(void 0!==t&&!r.StringUtils.isEmpty(t))},r.StringUtils.isString=function(t){return null!==t&&("string"==typeof t||t instanceof String)},r.StringUtils.trim=function(t){return r.StringUtils.isString(t)?t.replace(r.StringUtils._TRIM_ALL_RE,""):t},r.StringUtils.hashCode=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);e=(e<<5)-e+i,e&=e}return e},r.CollectionUtils={},r.CollectionUtils.copyInto=function(t,e,n,i,o){return r.CollectionUtils._copyIntoImpl(t,e,n,i,o,0)},r.CollectionUtils.isPlainObject=function(t){if("object"==typeof t)try{if(t.constructor&&t.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!0}catch(e){}return!1},r.CollectionUtils._copyIntoImpl=function(t,e,n,i,o,a){var s,l,u;if(void 0!==o&&null!==o||(o=Number.MAX_VALUE),t&&e&&t!==e){u=Object.keys(e);for(var h=0;h<u.length;h++){s=u[h],l=n?n(s):s;var c=e[s],d=!1;if(i&&a<o){var p=t[l];r.CollectionUtils.isPlainObject(c)&&(null==p||r.CollectionUtils.isPlainObject(p))&&(d=!0,t[l]=p||{},r.CollectionUtils._copyIntoImpl(t[l],c,n,!0,o,a+1))}d||(t[l]=c)}}return t},r.Translations={},r.Translations.setBundle=function(t){r.Translations._bundle=t},r.Translations.getResource=function(t){return r.Translations._getResourceString(t)},r.Translations.applyParameters=function(t,e){return null==t?null:r.Translations._format(t,e)},r.Translations.getTranslatedString=function(t,e){var n=r.Translations._getResourceString(t);if(null==n)return t;var i={};return arguments.length>2?i=Array.prototype.slice.call(arguments,1):2==arguments.length&&(i=arguments[1],"object"==typeof i||i instanceof Array||(i=[i])),r.Translations.applyParameters(n,i)},r.Translations.getComponentTranslations=function(t){var e,n,i=r.Translations._getBundle()[t];if(null==i)return{};e={};for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e},r.Translations._getResourceString=function(t){var e=t?t.split("."):[],n=r.Translations._getBundle(),i=e.length,o=0,a=e[o];for(r.Assert.assertObject(n);--i>0&&n;)n=n[a],o++,a=e[o];return n?n[a]||null:null},r.Translations._format=function(t,e){var n,i,r=t.length,o=[],a=null,s=!1,l=!1,u=!1,h=!1;for(i=0;i<r;i++){var c=t.charAt(i),d=!1;if(s)d=!0,s=!1;else switch(c){case"$":s=!0;break;case"{":h||(l||(n=!1,a=[]),l=!0);break;case"}":if(l&&a.length>0){var p=e[a.join("")];o.push(void 0===p?"null":p)}l=!1;break;case"[":l||(u?h=!0:u=!0);break;case"]":h?h=!1:u=!1;break;default:d=!0}d&&(l?","==c||" "==c?n=!0:n||a.push(c):h||o.push(c))}return o.join("")},r.Translations._getBundle=function(){var t=r.Translations._bundle;return t?t:r.__isAmdLoaderPresent()?(r.Assert.assert(void 0!==e,"ojtranslations module must be defined"),e):{}},r.BusyState=function(t){this._description=t,this._addedWaitTs=r.BusyState._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)},Object.defineProperties(r.BusyState.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){return $.isFunction(this._description)?this._description():this._description?this._description.toString():void 0},enumerable:!0}}),r.BusyState.prototype.toString=function(){var t="oj.BusyState";t+=" [id="+this.id,this.description&&(t+=", description="+this.description);var e=r.BusyState._getTs()-this._addedWaitTs;return t+=", elapsed="+e+"]"},r.BusyState.prototype.equals=function(t){return this.id===t.id&&this.description===t.description},r.BusyState._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()},r.BusyContext=function(){this.Init()},r.Object.createSubclass(r.BusyContext,r.Object,"oj.BusyContext"),r.BusyContext.prototype.Init=function(){r.BusyContext.superclass.Init.call(this),this._statesMap=new Map,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._clearAllSlaveTimeouts(),this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(t,e){var n,i=new Promise(function(i,o){n=window.setTimeout(function(){r.BusyContext._log(t),r.Logger.info("BusyContext.whenReady: rejected");var n=r.BusyContext._values(t),i=new Error("whenReady timeout of "+e+"ms expired with the following busy states: "+n.join(", "));i.busyStates=n,o(i)},e)});return this._slaveTimeoutPromiseTimers.push(n),Promise.race([this.getMasterWhenReadyPromise(),i])},_clearAllSlaveTimeouts:function(){var t=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var e=0;e<t.length;e++)window.clearTimeout(t[e])},_captureWhenReadyPromiseResolver:function(t,e){this._masterWhenReadyPromiseResolver=t},_slaveTimeoutPromiseTimers:[]}},r.BusyContext._log=function(t){if(r.Logger.option("level")===r.Logger.LEVEL_INFO){r.Logger.info(">> Busy states: %d",t.size);var e=r.BusyContext._values(t);e.length>0&&r.Logger.info(e.join("\n"))}},r.BusyContext._values=function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},r.BusyContext.prototype.addBusyState=function(t){r.Logger.info("BusyContext.addBusyState: start");var e=this._statesMap,n=new r.BusyState(t.description);return r.Logger.info(">> "+n),e.set(n.id,n),r.Logger.info("BusyContext.addBusyState: end"),this._removeBusyState.bind(this,n)},r.BusyContext.prototype.whenReady=function(t){r.Logger.info("BusyContext.whenReady: start, timeout:%d",t);var e=this._statesMap;if(0===e.size)return r.Logger.info("BusyContext.whenReady: resolved"),Promise.resolve(!0);var n,i=this._mediator;return n=isNaN(t)?i.getMasterWhenReadyPromise():i.getSlaveTimeoutPromise(e,t),r.Logger.info("BusyContext.whenReady: end"),n},r.BusyContext.prototype.isReady=function(){r.Logger.info("BusyContext.isReady: start");var t=this._statesMap,e=0===t.size;return r.BusyContext._log(t),r.Logger.info("BusyContext.isReady: end"),e},r.BusyContext.prototype._removeBusyState=function(t){var e=this._statesMap;if(!e["delete"](t.id))throw new Error("Busy state has already been resolved:\n"+t);if(0===e.size){var n=this._mediator;r.Logger.info("BusyContext._removeBusyState: resolving whenReady promises"),n.resolveMasterWhenReadyPromise()}r.Logger.info("BusyContext._removeBusyState: end")},r.BusyContext.prototype.applicationBoostrapComplete=function(){if(!("oj_whenReady"in window&&window.oj_whenReady))return void r.Logger.info("BusyContext.applicationBoostrapComplete: strategy not enabled.");var t=this._bootstrapWhenReadyResolver;this._bootstrapWhenReadyResolver=null,t?t():r.Logger.warning("BusyContext.applicationBoostrapComplete already invoked.")},r.BusyContext.prototype.__bootstrapAddBusyState=function(){if("oj_whenReady"in window&&window.oj_whenReady){var t={description:'Application loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBoostrapComplete();".'};this._bootstrapWhenReadyResolver=this.addBusyState(t)}},r.Context=function(){this.Init()},r.Object.createSubclass(r.Context,r.Object,"oj.Context"),r.Context.prototype.Init=function(){r.Context.superclass.Init.call(this)},r.Context.getContext=function(t){return r.Context.getPageContext()},r.Context.getPageContext=function(){return r.Context._pageContext||(r.Context._pageContext=new r.Context),r.Context._pageContext},r.Context.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new r.BusyContext),this._busyContext},"undefined"!=typeof window&&r.Context.getPageContext().getBusyContext().__bootstrapAddBusyState(),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}(),function(){r.__AttributeUtils={},r.__AttributeUtils.getExpressionInfo=function(n){var i={};if(n){var r=t.exec(n);r=r?r[1]:null,r||(i.downstreamOnly=!0,r=e.exec(n),r=r?r[1]:null),i.expr=r}return i},r.__AttributeUtils.attributeToPropertyName=function(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})},r.__AttributeUtils.propertyNameToAttribute=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},r.__AttributeUtils.coerceValue=function(t,e,n){var i,o=n.toLowerCase();switch(o){case"boolean":null==e||"true"===e||""===e||e.toLowerCase()===r.__AttributeUtils.propertyNameToAttribute(t)?i=!0:"false"===e&&(i=!1);break;case"number":isNaN(e)||(i=Number(e));break;case"string":i=e;break;default:try{i=JSON.parse(e)}catch(a){}}return null==i&&r.Logger.error("Unable to parse value %s for property %s with type %s.",e,t,n),i};var t=/(?:\{\{\s*)([^\s]+)(?:\s*\}\})/,e=/(?:\[\[\s*)([^\s]+)(?:\s*\]\])/}(),r}),function(){!function(t){var e=this||(0,eval)("this"),n=e.document,i=e.navigator,r=e.jQuery,o=e.JSON;!function(t){"function"==typeof define&&define.amd?define("knockout",["exports","require"],t):t("object"==typeof exports&&"object"==typeof module?module.exports||exports:e.ko={})}(function(a,s){function l(t,e){return(null===t||typeof t in _)&&t===e}function u(e,n){var i;return function(){i||(i=f.a.setTimeout(function(){i=t,e()},n))}}function h(t,e){var n;return function(){clearTimeout(n),n=f.a.setTimeout(t,e)}}function c(t,e){e&&e!==m?"beforeChange"===e?this.Kb(t):this.Ha(t,e):this.Lb(t)}function d(t,e){null!==e&&e.k&&e.k()}function p(t,e){var n=this.Hc,i=n[b];i.R||(this.lb&&this.Ma[e]?(n.Pb(e,t,this.Ma[e]),this.Ma[e]=null,--this.lb):i.r[e]||n.Pb(e,t,i.s?{ia:t}:n.uc(t)))}function g(t,e,n,i){f.d[t]={init:function(t,r,o,a,s){var l,u;return f.m(function(){var o=f.a.c(r()),a=!n!=!o,h=!u;(h||e||a!==l)&&(h&&f.va.Aa()&&(u=f.a.ua(f.f.childNodes(t),!0)),a?(h||f.f.da(t,f.a.ua(u)),f.eb(i?i(s,o):s,t)):f.f.xa(t),l=a)},null,{i:t}),{controlsDescendantBindings:!0}}},f.h.ta[t]=!1,f.f.Z[t]=!0}var f="undefined"!=typeof a?a:{};f.b=function(t,e){for(var n=t.split("."),i=f,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},f.G=function(t,e,n){t[e]=n},f.version="3.4.0",f.b("version",f.version),f.options={deferUpdates:!1,useOnlyNativeEvents:!1},f.a=function(){function a(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function s(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l(t,e){return t.__proto__=e,t}function u(t,e,n,i){var r=t[e].match(m)||[];f.a.q(n.match(m),function(t){f.a.pa(r,t,i)}),t[e]=r.join(" ")}var h={__proto__:[]}instanceof Array,c="function"==typeof Symbol,d={},p={};d[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],d.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(d,function(t,e){if(e.length)for(var n=0,i=e.length;n<i;n++)p[e[n]]=t});var g={propertychange:!0},_=n&&function(){for(var e=3,i=n.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",r[0];);return 4<e?e:t}(),m=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)},o:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Sb:function(t,e,n){for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i))return t[i];return null},La:function(t,e){var n=f.a.o(t,e);0<n?t.splice(n,1):0===n&&t.shift()},Tb:function(t){t=t||[];for(var e=[],n=0,i=t.length;n<i;n++)0>f.a.o(e,t[n])&&e.push(t[n]);return e},fb:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;i<r;i++)n.push(e(t[i],i));return n},Ka:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;i<r;i++)e(t[i],i)&&n.push(t[i]);return n},ra:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t},pa:function(t,e,n){var i=f.a.o(f.a.zb(t),e);0>i?n&&t.push(e):n||t.splice(i,1)},ka:h,extend:s,Xa:l,Ya:h?l:s,D:a,Ca:function(t,e){if(!t)return t;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=e(t[n],n,t));return i},ob:function(t){for(;t.firstChild;)f.removeNode(t.firstChild)},jc:function(t){t=f.a.V(t);for(var e=(t[0]&&t[0].ownerDocument||n).createElement("div"),i=0,r=t.length;i<r;i++)e.appendChild(f.$(t[i]));return e},ua:function(t,e){for(var n=0,i=t.length,r=[];n<i;n++){var o=t[n].cloneNode(!0);r.push(e?f.$(o):o)}return r},da:function(t,e){if(f.a.ob(t),e)for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n])},qc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,a=e.length;o<a;o++)r.insertBefore(e[o],i);for(o=0,a=n.length;o<a;o++)f.removeNode(n[o])}},za:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)t.push(n),n=n.nextSibling;t.push(i)}}return t},sc:function(t,e){7>_?t.setAttribute("selected",e):t.selected=e},$a:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},Mc:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(3===t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},nb:function(t){return f.a.Mc(t,t.ownerDocument.documentElement)},Qb:function(t){return!!f.a.Sb(t,f.a.nb)},A:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},Wb:function(t){return f.onError?function(){try{return t.apply(this,arguments)}catch(e){throw f.onError&&f.onError(e),e}}:t},setTimeout:function(t,e){return setTimeout(f.a.Wb(t),e)},$b:function(t){setTimeout(function(){throw f.onError&&f.onError(t),t},0)},p:function(t,e,n){var i=f.a.Wb(n);if(n=_&&g[e],f.options.useOnlyNativeEvents||n||!r)if(n||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var o=function(e){i.call(t,e)},a="on"+e;t.attachEvent(a,o),f.a.F.oa(t,function(){t.detachEvent(a,o)})}else t.addEventListener(e,i,!1);else r(t).bind(e,i)},Da:function(t,i){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var o;if("input"===f.a.A(t)&&t.type&&"click"==i.toLowerCase()?(o=t.type,o="checkbox"==o||"radio"==o):o=!1,f.options.useOnlyNativeEvents||!r||o)if("function"==typeof n.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");o=n.createEvent(p[i]||"HTMLEvents"),o.initEvent(i,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(o)}else if(o&&t.click)t.click();else{if("undefined"==typeof t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+i)}else r(t).trigger(i)},c:function(t){return f.H(t)?t():t},zb:function(t){return f.H(t)?t.t():t},bb:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],f.a.q(e.match(m),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?u(t.className,"baseVal",e,n):u(t,"className",e,n))},Za:function(e,n){var i=f.a.c(n);null!==i&&i!==t||(i="");var r=f.f.firstChild(e);!r||3!=r.nodeType||f.f.nextSibling(r)?f.f.da(e,[e.ownerDocument.createTextNode(i)]):r.data=i,f.a.Rc(e)},rc:function(t,e){if(t.name=e,7>=_)try{t.mergeAttributes(n.createElement("<input name='"+t.name+"'/>"),!1)}catch(i){}},Rc:function(t){9<=_&&(t=1==t.nodeType?t:t.parentNode,t.style&&(t.style.zoom=t.style.zoom))},Nc:function(t){if(_){var e=t.style.width;t.style.width=0,t.style.width=e}},hd:function(t,e){t=f.a.c(t),e=f.a.c(e);for(var n=[],i=t;i<=e;i++)n.push(i);return n},V:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Yb:function(t){return c?Symbol(t):t},rd:6===_,sd:7===_,C:_,ec:function(t,e){for(var n=f.a.V(t.getElementsByTagName("input")).concat(f.a.V(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],o=n.length-1;0<=o;o--)i(n[o])&&r.push(n[o]);return r},ed:function(t){return"string"==typeof t&&(t=f.a.$a(t))?o&&o.parse?o.parse(t):new Function("return "+t)():null},Eb:function(t,e,n){if(!o||!o.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return o.stringify(f.a.c(t),e,n)},fd:function(t,e,i){i=i||{};var r=i.params||{},o=i.includeFields||this.cc,s=t;if("object"==typeof t&&"form"===f.a.A(t))for(var s=t.action,l=o.length-1;0<=l;l--)for(var u=f.a.ec(t,o[l]),h=u.length-1;0<=h;h--)r[u[h].name]=u[h].value;e=f.a.c(e);var c=n.createElement("form");c.style.display="none",c.action=s,c.method="post";for(var d in e)t=n.createElement("input"),t.type="hidden",t.name=d,t.value=f.a.Eb(f.a.c(e[d])),c.appendChild(t);a(r,function(t,e){var i=n.createElement("input");i.type="hidden",i.name=t,i.value=e,c.appendChild(i)}),n.body.appendChild(c),i.submitter?i.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),f.b("utils",f.a),f.b("utils.arrayForEach",f.a.q),f.b("utils.arrayFirst",f.a.Sb),f.b("utils.arrayFilter",f.a.Ka),f.b("utils.arrayGetDistinctValues",f.a.Tb),f.b("utils.arrayIndexOf",f.a.o),f.b("utils.arrayMap",f.a.fb),f.b("utils.arrayPushAll",f.a.ra),f.b("utils.arrayRemoveItem",f.a.La),f.b("utils.extend",f.a.extend),f.b("utils.fieldsIncludedWithJsonPost",f.a.cc),f.b("utils.getFormFields",f.a.ec),f.b("utils.peekObservable",f.a.zb),f.b("utils.postJson",f.a.fd),f.b("utils.parseJson",f.a.ed),f.b("utils.registerEventHandler",f.a.p),f.b("utils.stringifyJson",f.a.Eb),f.b("utils.range",f.a.hd),f.b("utils.toggleDomNodeCssClass",f.a.bb),f.b("utils.triggerEvent",f.a.Da),f.b("utils.unwrapObservable",f.a.c),f.b("utils.objectForEach",f.a.D),f.b("utils.addOrRemoveItem",f.a.pa),f.b("utils.setTextContent",f.a.Za),f.b("unwrap",f.a.c),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),f.a.e=new function(){function e(e,o){var a=e[i];if(!a||"null"===a||!r[a]){if(!o)return t;a=e[i]="ko"+n++,r[a]={}}return r[a]}var n=0,i="__ko__"+(new Date).getTime(),r={};return{get:function(n,i){var r=e(n,!1);return r===t?t:r[i]},set:function(n,i,r){r===t&&e(n,!1)===t||(e(n,!0)[i]=r)},clear:function(t){var e=t[i];return!!e&&(delete r[e],t[i]=null,!0)},I:function(){return n++ +i}}},f.b("utils.domData",f.a.e),f.b("utils.domData.clear",f.a.e.clear),f.a.F=new function(){function e(e,n){var r=f.a.e.get(e,i);return r===t&&n&&(r=[],f.a.e.set(e,i,r)),r}function n(t){var i=e(t,!1);if(i)for(var i=i.slice(0),r=0;r<i.length;r++)i[r](t);if(f.a.e.clear(t),f.a.F.cleanExternalData(t),a[t.nodeType])for(i=t.firstChild;t=i;)i=t.nextSibling,8===t.nodeType&&n(t)}var i=f.a.e.I(),o={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{oa:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},pc:function(n,r){var o=e(n,!1);o&&(f.a.La(o,r),0==o.length&&f.a.e.set(n,i,t))},$:function(t){if(o[t.nodeType]&&(n(t),a[t.nodeType])){var e=[];f.a.ra(e,t.getElementsByTagName("*"));for(var i=0,r=e.length;i<r;i++)n(e[i])}return t},removeNode:function(t){f.$(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){r&&"function"==typeof r.cleanData&&r.cleanData([t])}}},f.$=f.a.F.$,f.removeNode=f.a.F.removeNode,f.b("cleanNode",f.$),f.b("removeNode",f.removeNode),f.b("utils.domNodeDisposal",f.a.F),f.b("utils.domNodeDisposal.addDisposeCallback",f.a.F.oa),f.b("utils.domNodeDisposal.removeDisposeCallback",f.a.F.pc),function(){var i=[0,"",""],o=[1,"<table>","</table>"],a=[3,"<table><tbody><tr>","</tr></tbody></table>"],s=[1,"<select multiple='multiple'>","</select>"],l={thead:o,tbody:o,tfoot:o,tr:[2,"<table><tbody>","</tbody></table>"],
td:a,th:a,option:s,optgroup:s},u=8>=f.a.C;f.a.ma=function(t,o){var a;if(r){if(r.parseHTML)a=r.parseHTML(t,o)||[];else if((a=r.clean([t],o))&&a[0]){for(var s=a[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(a=o)||(a=n);var h,s=a.parentWindow||a.defaultView||e,c=f.a.$a(t).toLowerCase(),d=a.createElement("div");for(h=(c=c.match(/^<([a-z]+)[ >]/))&&l[c[1]]||i,c=h[0],h="ignored<div>"+h[1]+t+h[2]+"</div>","function"==typeof s.innerShiv?d.appendChild(s.innerShiv(h)):(u&&a.appendChild(d),d.innerHTML=h,u&&d.parentNode.removeChild(d));c--;)d=d.lastChild;a=f.a.V(d.lastChild.childNodes)}return a},f.a.Cb=function(e,n){if(f.a.ob(e),n=f.a.c(n),null!==n&&n!==t)if("string"!=typeof n&&(n=n.toString()),r)r(e).html(n);else for(var i=f.a.ma(n,e.ownerDocument),o=0;o<i.length;o++)e.appendChild(i[o])}}(),f.b("utils.parseHtmlFragment",f.a.ma),f.b("utils.setHtml",f.a.Cb),f.M=function(){function e(t,n){if(t)if(8==t.nodeType){var i=f.M.lc(t.nodeValue);null!=i&&n.push({Lc:t,cd:i})}else if(1==t.nodeType)for(var i=0,r=t.childNodes,o=r.length;i<o;i++)e(r[i],n)}var n={};return{wb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var e=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[e]=t,"<!--[ko_memo:"+e+"]-->"},xc:function(e,i){var r=n[e];if(r===t)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete n[e]}},yc:function(t,n){var i=[];e(t,i);for(var r=0,o=i.length;r<o;r++){var a=i[r].Lc,s=[a];n&&f.a.ra(s,n),f.M.xc(i[r].cd,s),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},lc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),f.b("memoization",f.M),f.b("memoization.memoize",f.M.wb),f.b("memoization.unmemoize",f.M.xc),f.b("memoization.parseMemoText",f.M.lc),f.b("memoization.unmemoizeDomNodeAndDescendants",f.M.yc),f.Y=function(){function t(){if(o)for(var t,e=o,n=0;s<o;)if(t=r[s++]){if(s>e){if(5e3<=++n){s=o,f.a.$b(Error("'Too much recursion' after processing "+n+" task groups."));break}e=o}try{t()}catch(i){f.a.$b(i)}}}function i(){t(),s=o=r.length=0}var r=[],o=0,a=1,s=0;return{scheduler:e.MutationObserver?function(t){var e=n.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(t){var e=n.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,n.documentElement.removeChild(e),e=null,t()},n.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},Wa:function(t){return o||f.Y.scheduler(i),r[o++]=t,a++},cancel:function(t){t-=a-o,t>=s&&t<o&&(r[t]=null)},resetForTesting:function(){var t=o-s;return s=o=r.length=0,t},md:t}}(),f.b("tasks",f.Y),f.b("tasks.schedule",f.Y.Wa),f.b("tasks.runEarly",f.Y.md),f.ya={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return f.B({read:t,write:function(i){clearTimeout(n),n=f.a.setTimeout(function(){t(i)},e)}})},rateLimit:function(t,e){var n,i,r;"number"==typeof e?n=e:(n=e.timeout,i=e.method),t.cb=!1,r="notifyWhenChangesStop"==i?h:u,t.Ta(function(t){return r(t,n)})},deferred:function(e,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.cb||(e.cb=!0,e.Ta(function(n){var i;return function(){f.Y.cancel(i),i=f.Y.Wa(n),e.notifySubscribers(t,"dirty")}}))},notify:function(t,e){t.equalityComparer="always"==e?null:l}};var _={undefined:1,"boolean":1,number:1,string:1};f.b("extenders",f.ya),f.vc=function(t,e,n){this.ia=t,this.gb=e,this.Kc=n,this.R=!1,f.G(this,"dispose",this.k)},f.vc.prototype.k=function(){this.R=!0,this.Kc()},f.J=function(){f.a.Ya(this,v),v.rb(this)};var m="change",v={rb:function(t){t.K={},t.Nb=1},X:function(t,e,n){var i=this;n=n||m;var r=new f.vc(i,e?t.bind(e):t,function(){f.a.La(i.K[n],r),i.Ia&&i.Ia(n)});return i.sa&&i.sa(n),i.K[n]||(i.K[n]=[]),i.K[n].push(r),r},notifySubscribers:function(t,e){if(e=e||m,e===m&&this.zc(),this.Pa(e))try{f.l.Ub();for(var n,i=this.K[e].slice(0),r=0;n=i[r];++r)n.R||n.gb(t)}finally{f.l.end()}},Na:function(){return this.Nb},Uc:function(t){return this.Na()!==t},zc:function(){++this.Nb},Ta:function(t){var e,n,i,r=this,o=f.H(r);r.Ha||(r.Ha=r.notifySubscribers,r.notifySubscribers=c);var a=t(function(){r.Mb=!1,o&&i===r&&(i=r()),e=!1,r.tb(n,i)&&r.Ha(n=i)});r.Lb=function(t){r.Mb=e=!0,i=t,a()},r.Kb=function(t){e||(n=t,r.Ha(t,"beforeChange"))}},Pa:function(t){return this.K[t]&&this.K[t].length},Sc:function(t){if(t)return this.K[t]&&this.K[t].length||0;var e=0;return f.a.D(this.K,function(t,n){"dirty"!==t&&(e+=n.length)}),e},tb:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},extend:function(t){var e=this;return t&&f.a.D(t,function(t,n){var i=f.ya[t];"function"==typeof i&&(e=i(e,n)||e)}),e}};f.G(v,"subscribe",v.X),f.G(v,"extend",v.extend),f.G(v,"getSubscriptionsCount",v.Sc),f.a.ka&&f.a.Xa(v,Function.prototype),f.J.fn=v,f.hc=function(t){return null!=t&&"function"==typeof t.X&&"function"==typeof t.notifySubscribers},f.b("subscribable",f.J),f.b("isSubscribable",f.hc),f.va=f.l=function(){function t(t){i.push(n),n=t}function e(){n=i.pop()}var n,i=[],r=0;return{Ub:t,end:e,oc:function(t){if(n){if(!f.hc(t))throw Error("Only subscribable things can act as dependencies");n.gb.call(n.Gc,t,t.Cc||(t.Cc=++r))}},w:function(n,i,r){try{return t(),n.apply(i,r||[])}finally{e()}},Aa:function(){if(n)return n.m.Aa()},Sa:function(){if(n)return n.Sa}}}(),f.b("computedContext",f.va),f.b("computedContext.getDependenciesCount",f.va.Aa),f.b("computedContext.isInitial",f.va.Sa),f.b("ignoreDependencies",f.qd=f.l.w);var y=f.a.Yb("_latestValue");f.N=function(t){function e(){return 0<arguments.length?(e.tb(e[y],arguments[0])&&(e.ga(),e[y]=arguments[0],e.fa()),this):(f.l.oc(e),e[y])}return e[y]=t,f.a.ka||f.a.extend(e,f.J.fn),f.J.fn.rb(e),f.a.Ya(e,S),f.options.deferUpdates&&f.ya.deferred(e,!0),e};var S={equalityComparer:l,t:function(){return this[y]},fa:function(){this.notifySubscribers(this[y])},ga:function(){this.notifySubscribers(this[y],"beforeChange")}};f.a.ka&&f.a.Xa(S,f.J.fn);var C=f.N.gd="__ko_proto__";S[C]=f.N,f.Oa=function(e,n){return null!==e&&e!==t&&e[C]!==t&&(e[C]===n||f.Oa(e[C],n))},f.H=function(t){return f.Oa(t,f.N)},f.Ba=function(t){return!!("function"==typeof t&&t[C]===f.N||"function"==typeof t&&t[C]===f.B&&t.Vc)},f.b("observable",f.N),f.b("isObservable",f.H),f.b("isWriteableObservable",f.Ba),f.b("isWritableObservable",f.Ba),f.b("observable.fn",S),f.G(S,"peek",S.t),f.G(S,"valueHasMutated",S.fa),f.G(S,"valueWillMutate",S.ga),f.la=function(t){if(t=t||[],"object"!=typeof t||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=f.N(t),f.a.Ya(t,f.la.fn),t.extend({trackArrayChanges:!0})},f.la.fn={remove:function(t){for(var e=this.t(),n=[],i="function"!=typeof t||f.H(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var o=e[r];i(o)&&(0===n.length&&this.ga(),n.push(o),e.splice(r,1),r--)}return n.length&&this.fa(),n},removeAll:function(e){if(e===t){var n=this.t(),i=n.slice(0);return this.ga(),n.splice(0,n.length),this.fa(),i}return e?this.remove(function(t){return 0<=f.a.o(e,t)}):[]},destroy:function(t){var e=this.t(),n="function"!=typeof t||f.H(t)?function(e){return e===t}:t;this.ga();for(var i=e.length-1;0<=i;i--)n(e[i])&&(e[i]._destroy=!0);this.fa()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=f.a.o(e,t)}):[]},indexOf:function(t){var e=this();return f.a.o(e,t)},replace:function(t,e){var n=this.indexOf(t);0<=n&&(this.ga(),this.t()[n]=e,this.fa())}},f.a.ka&&f.a.Xa(f.la.fn,f.N.fn),f.a.q("pop push reverse shift sort splice unshift".split(" "),function(t){f.la.fn[t]=function(){var e=this.t();this.ga(),this.Vb(e,t,arguments);var n=e[t].apply(e,arguments);return this.fa(),n===e?this:n}}),f.a.q(["slice"],function(t){f.la.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),f.b("observableArray",f.la),f.ya.trackArrayChanges=function(t,e){function n(){if(!r){r=!0;var e=t.notifySubscribers;t.notifySubscribers=function(t,n){return n&&n!==m||++a,e.apply(this,arguments)};var n=[].concat(t.t()||[]);o=null,i=t.X(function(e){if(e=[].concat(e||[]),t.Pa("arrayChange")){var i;(!o||1<a)&&(o=f.a.ib(n,e,t.hb)),i=o}n=e,o=null,a=0,i&&i.length&&t.notifySubscribers(i,"arrayChange")})}}if(t.hb={},e&&"object"==typeof e&&f.a.extend(t.hb,e),t.hb.sparse=!0,!t.Vb){var i,r=!1,o=null,a=0,s=t.sa,l=t.Ia;t.sa=function(e){s&&s.call(t,e),"arrayChange"===e&&n()},t.Ia=function(e){l&&l.call(t,e),"arrayChange"!==e||t.Pa("arrayChange")||(i.k(),r=!1)},t.Vb=function(t,e,n){function i(t,e,n){return s[s.length]={status:t,value:e,index:n}}if(r&&!a){var s=[],l=t.length,u=n.length,h=0;switch(e){case"push":h=l;case"unshift":for(e=0;e<u;e++)i("added",n[e],h+e);break;case"pop":h=l-1;case"shift":l&&i("deleted",t[h],h);break;case"splice":e=Math.min(Math.max(0,0>n[0]?l+n[0]:n[0]),l);for(var l=1===u?l:Math.min(e+(n[1]||0),l),u=e+u-2,h=Math.max(l,u),c=[],d=[],p=2;e<h;++e,++p)e<l&&d.push(i("deleted",t[e],e)),e<u&&c.push(i("added",n[p],e));f.a.dc(d,c);break;default:return}o=s}}}};var b=f.a.Yb("_state");f.m=f.B=function(e,n,i){function r(){if(0<arguments.length){if("function"!=typeof o)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(a.pb,arguments),this}return f.l.oc(r),(a.S||a.s&&r.Qa())&&r.aa(),a.T}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var o=i.write,a={T:t,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:i.read,pb:n||i.owner,i:i.disposeWhenNodeIsRemoved||i.i||null,wa:i.disposeWhen||i.wa,mb:null,r:{},L:0,bc:null};return r[b]=a,r.Vc="function"==typeof o,f.a.ka||f.a.extend(r,f.J.fn),f.J.fn.rb(r),f.a.Ya(r,E),i.pure?(a.Va=!0,a.s=!0,f.a.extend(r,T)):i.deferEvaluation&&f.a.extend(r,A),f.options.deferUpdates&&f.ya.deferred(r,!0),a.i&&(a.Fb=!0,a.i.nodeType||(a.i=null)),a.s||i.deferEvaluation||r.aa(),a.i&&r.ba()&&f.a.F.oa(a.i,a.mb=function(){r.k()}),r};var E={equalityComparer:l,Aa:function(){return this[b].L},Pb:function(t,e,n){if(this[b].Va&&e===this)throw Error("A 'pure' computed must not be called recursively");this[b].r[t]=n,n.Ga=this[b].L++,n.na=e.Na()},Qa:function(){var t,e,n=this[b].r;for(t in n)if(n.hasOwnProperty(t)&&(e=n[t],e.ia.Uc(e.na)))return!0},bd:function(){this.Fa&&!this[b].Ra&&this.Fa()},ba:function(){return this[b].S||0<this[b].L},ld:function(){this.Mb||this.ac()},uc:function(t){if(t.cb&&!this[b].i){var e=t.X(this.bd,this,"dirty"),n=t.X(this.ld,this);return{ia:t,k:function(){e.k(),n.k()}}}return t.X(this.ac,this)},ac:function(){var t=this,e=t.throttleEvaluation;e&&0<=e?(clearTimeout(this[b].bc),this[b].bc=f.a.setTimeout(function(){t.aa(!0)},e)):t.Fa?t.Fa():t.aa(!0)},aa:function(t){var e=this[b],n=e.wa;if(!e.Ra&&!e.R){if(e.i&&!f.a.nb(e.i)||n&&n()){if(!e.Fb)return void this.k()}else e.Fb=!1;e.Ra=!0;try{this.Qc(t)}finally{e.Ra=!1}e.L||this.k()}},Qc:function(e){var n=this[b],i=n.Va?t:!n.L,r={Hc:this,Ma:n.r,lb:n.L};f.l.Ub({Gc:r,gb:p,m:this,Sa:i}),n.r={},n.L=0,r=this.Pc(n,r),this.tb(n.T,r)&&(n.s||this.notifySubscribers(n.T,"beforeChange"),n.T=r,n.s?this.zc():e&&this.notifySubscribers(n.T)),i&&this.notifySubscribers(n.T,"awake")},Pc:function(t,e){try{var n=t.jd;return t.pb?n.call(t.pb):n()}finally{f.l.end(),e.lb&&!t.s&&f.a.D(e.Ma,d),t.S=!1}},t:function(){var t=this[b];return(t.S&&!t.L||t.s&&this.Qa())&&this.aa(),t.T},Ta:function(t){f.J.fn.Ta.call(this,t),this.Fa=function(){this.Kb(this[b].T),this[b].S=!0,this.Lb(this)}},k:function(){var t=this[b];!t.s&&t.r&&f.a.D(t.r,function(t,e){e.k&&e.k()}),t.i&&t.mb&&f.a.F.pc(t.i,t.mb),t.r=null,t.L=0,t.R=!0,t.S=!1,t.s=!1,t.i=null}},T={sa:function(t){var e=this,n=e[b];if(!n.R&&n.s&&"change"==t){if(n.s=!1,n.S||e.Qa())n.r=null,n.L=0,n.S=!0,e.aa();else{var i=[];f.a.D(n.r,function(t,e){i[e.Ga]=t}),f.a.q(i,function(t,i){var r=n.r[t],o=e.uc(r.ia);o.Ga=i,o.na=r.na,n.r[t]=o})}n.R||e.notifySubscribers(n.T,"awake")}},Ia:function(e){var n=this[b];n.R||"change"!=e||this.Pa("change")||(f.a.D(n.r,function(t,e){e.k&&(n.r[t]={ia:e.ia,Ga:e.Ga,na:e.na},e.k())}),n.s=!0,this.notifySubscribers(t,"asleep"))},Na:function(){var t=this[b];return t.s&&(t.S||this.Qa())&&this.aa(),f.J.fn.Na.call(this)}},A={sa:function(t){"change"!=t&&"beforeChange"!=t||this.t()}};f.a.ka&&f.a.Xa(E,f.J.fn);var x=f.N.gd;f.m[x]=f.N,E[x]=f.m,f.Xc=function(t){return f.Oa(t,f.m)},f.Yc=function(t){return f.Oa(t,f.m)&&t[b]&&t[b].Va},f.b("computed",f.m),f.b("dependentObservable",f.m),f.b("isComputed",f.Xc),f.b("isPureComputed",f.Yc),f.b("computed.fn",E),f.G(E,"peek",E.t),f.G(E,"dispose",E.k),f.G(E,"isActive",E.ba),f.G(E,"getDependenciesCount",E.Aa),f.nc=function(t,e){return"function"==typeof t?f.m(t,e,{pure:!0}):(t=f.a.extend({},t),t.pure=!0,f.m(t,e))},f.b("pureComputed",f.nc),function(){function e(r,o,a){if(a=a||new i,r=o(r),"object"!=typeof r||null===r||r===t||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var s=r instanceof Array?[]:{};return a.save(r,s),n(r,function(n){var i=o(r[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":s[n]=i;break;case"object":case"undefined":var l=a.get(i);s[n]=l!==t?l:e(i,o,a)}}),s}function n(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}function i(){this.keys=[],this.Ib=[]}f.wc=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(t){for(var e=0;f.H(t)&&10>e;e++)t=t();return t})},f.toJSON=function(t,e,n){return t=f.wc(t),f.a.Eb(t,e,n)},i.prototype={save:function(t,e){var n=f.a.o(this.keys,t);0<=n?this.Ib[n]=e:(this.keys.push(t),this.Ib.push(e))},get:function(e){return e=f.a.o(this.keys,e),0<=e?this.Ib[e]:t}}}(),f.b("toJS",f.wc),f.b("toJSON",f.toJSON),function(){f.j={u:function(e){switch(f.a.A(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?f.a.e.get(e,f.d.options.xb):7>=f.a.C?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?f.j.u(e.options[e.selectedIndex]):t;default:return e.value}},ha:function(e,n,i){switch(f.a.A(e)){case"option":switch(typeof n){case"string":f.a.e.set(e,f.d.options.xb,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n;break;default:f.a.e.set(e,f.d.options.xb,n),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof n?n:""}break;case"select":""!==n&&null!==n||(n=t);for(var r,o=-1,a=0,s=e.options.length;a<s;++a)if(r=f.j.u(e.options[a]),r==n||""==r&&n===t){o=a;break}(i||0<=o||n===t&&1<e.size)&&(e.selectedIndex=o);break;default:null!==n&&n!==t||(n=""),e.value=n}}}}(),f.b("selectExtensions",f.j),f.b("selectExtensions.readValue",f.j.u),f.b("selectExtensions.writeValue",f.j.ha),f.h=function(){function t(t){t=f.a.$a(t),123===t.charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],a=t.match(i),s=[],l=0;if(a){a.push(",");for(var u,h=0;u=a[h];++h){var c=u.charCodeAt(0);if(44===c){if(0>=l){n.push(e&&s.length?{key:e,value:s.join("")}:{unknown:e||s.join("")}),e=l=0,s=[];continue}}else if(58===c){if(!l&&!e&&1===s.length){e=s.pop();continue}}else 47===c&&h&&1<u.length?(c=a[h-1].match(r))&&!o[c[0]]&&(t=t.substr(t.indexOf(u)+1),a=t.match(i),a.push(","),h=-1,u="/"):40===c||123===c||91===c?++l:41===c||125===c||93===c?--l:e||s.length||34!==c&&39!==c||(u=u.slice(1,-1));s.push(u)}}return n}var e=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,o={"in":1,"return":1,"typeof":1},a={};return{ta:[],ea:a,yb:t,Ua:function(i,r){function o(t,i){var r;if(!h){var c=f.getBindingHandler(t);if(c&&c.preprocess&&!(i=c.preprocess(i,t,o)))return;(c=a[t])&&(r=i,0<=f.a.o(e,r)?r=!1:(c=r.match(n),r=null!==c&&(c[1]?"Object("+c[1]+")"+c[2]:r)),c=r),c&&l.push("'"+t+"':function(_z){"+r+"=_z}")}u&&(i="function(){return "+i+" }"),s.push("'"+t+"':"+i)}r=r||{};var s=[],l=[],u=r.valueAccessors,h=r.bindingParams,c="string"==typeof i?t(i):i;return f.a.q(c,function(t){o(t.key||t.unknown,t.value)}),l.length&&o("_ko_property_writers","{"+l.join(",")+" }"),s.join(",")},ad:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},Ea:function(t,e,n,i,r){t&&f.H(t)?!f.Ba(t)||r&&t.t()===i||t(i):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](i)}}}(),f.b("expressionRewriting",f.h),f.b("expressionRewriting.bindingRewriteValidators",f.h.ta),f.b("expressionRewriting.parseObjectLiteral",f.h.yb),f.b("expressionRewriting.preProcessBindings",f.h.Ua),f.b("expressionRewriting._twoWayBindings",f.h.ea),f.b("jsonExpressionRewriting",f.h),f.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.h.Ua),function(){function t(t){return 8==t.nodeType&&a.test(o?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&s.test(o?t.text:t.nodeValue)}function i(n,i){for(var r=n,o=1,a=[];r=r.nextSibling;){if(e(r)&&(o--,0===o))return a;a.push(r),t(r)&&o++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(t,e){var n=i(t,e);return n?0<n.length?n[n.length-1].nextSibling:t.nextSibling:null}var o=n&&"<!--test-->"===n.createComment("test").text,a=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.f={Z:{},childNodes:function(e){return t(e)?i(e):e.childNodes},xa:function(e){if(t(e)){e=f.f.childNodes(e);for(var n=0,i=e.length;n<i;n++)f.removeNode(e[n])}else f.a.ob(e)},da:function(e,n){if(t(e)){f.f.xa(e);for(var i=e.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else f.a.da(e,n)},mc:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},gc:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):f.f.mc(e,n)},firstChild:function(n){return t(n)?!n.nextSibling||e(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return t(n)&&(n=r(n)),n.nextSibling&&e(n.nextSibling)?null:n.nextSibling},Tc:t,pd:function(t){return(t=(o?t.text:t.nodeValue).match(a))?t[1]:null},kc:function(n){if(l[f.a.A(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var o;o=i.firstChild;var a=null;if(o)do if(a)a.push(o);else if(t(o)){var s=r(o,!0);s?o=s:a=[o]}else e(o)&&(a=[o]);while(o=o.nextSibling);if(o=a)for(a=i.nextSibling,s=0;s<o.length;s++)a?n.insertBefore(o[s],a):n.appendChild(o[s])}while(i=i.nextSibling)}}}}(),f.b("virtualElements",f.f),f.b("virtualElements.allowedBindings",f.f.Z),f.b("virtualElements.emptyNode",f.f.xa),f.b("virtualElements.insertAfter",f.f.gc),f.b("virtualElements.prepend",f.f.mc),f.b("virtualElements.setDomNodeChildren",f.f.da),function(){f.Q=function(){this.Fc={}},f.a.extend(f.Q.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||f.g.getComponentNameForNode(t);case 8:return f.f.Tc(t);default:return!1}},getBindings:function(t,e){var n=this.getBindingsString(t,e),n=n?this.parseBindingsString(n,e,t):null;return f.g.Ob(n,t,e,!1)},getBindingAccessors:function(t,e){var n=this.getBindingsString(t,e),n=n?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return f.g.Ob(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return f.f.pd(t);default:return null}},parseBindingsString:function(t,e,n,i){try{var r,o=this.Fc,a=t+(i&&i.valueAccessors||"");if(!(r=o[a])){var s,l="with($context){with($data||{}){return{"+f.h.Ua(t,i)+"}}}";s=new Function("$context","$element",l),r=o[a]=s}return r(e,n)}catch(u){throw u.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+u.message,u}}}),f.Q.instance=new f.Q}(),f.b("bindingProvider",f.Q),function(){function n(t){return function(){return t}}function i(t){return t()}function o(t){return f.a.Ca(f.l.w(t),function(e,n){return function(){return t()[n]}})}function a(t,e,i){return"function"==typeof t?o(t.bind(null,e,i)):f.a.Ca(t,n)}function s(t,e){return o(this.getBindings.bind(this,t,e))}function l(t,e,n){var i,r=f.f.firstChild(e),o=f.Q.instance,a=o.preprocessNode;if(a){for(;i=r;)r=f.f.nextSibling(i),a.call(o,i);r=f.f.firstChild(e)}for(;i=r;)r=f.f.nextSibling(i),u(t,i,n)}function u(t,e,n){var i=!0,r=1===e.nodeType;r&&f.f.kc(e),(r&&n||f.Q.instance.nodeHasBindings(e))&&(i=c(e,null,t,n).shouldBindDescendants),i&&!p[f.a.A(e)]&&l(t,e,!r)}function h(t){var e=[],n={},i=[];return f.a.D(t,function r(o){if(!n[o]){var a=f.getBindingHandler(o);a&&(a.after&&(i.push(o),f.a.q(a.after,function(e){if(t[e]){if(-1!==f.a.o(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(e)}}),i.length--),e.push({key:o,fc:a})),n[o]=!0}}),e}function c(e,n,r,o){var a=f.a.e.get(e,g);if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");f.a.e.set(e,g,!0)}!a&&o&&f.tc(e,r);var l;if(n&&"function"!=typeof n)l=n;else{var u=f.Q.instance,c=u.getBindingAccessors||s,d=f.B(function(){return(l=n?n(r,e):c.call(u,e,r))&&r.P&&r.P(),l},null,{i:e});l&&d.ba()||(d=null)}var p;if(l){var _=d?function(t){return function(){return i(d()[t])}}:function(t){return l[t]},m=function(){return f.a.Ca(d?d():l,i)};m.get=function(t){return l[t]&&i(_(t))},m.has=function(t){return t in l},o=h(l),f.a.q(o,function(n){var i=n.fc.init,o=n.fc.update,a=n.key;if(8===e.nodeType&&!f.f.Z[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof i&&f.l.w(function(){var n=i(e,_(a),m,r.$data,r);if(n&&n.controlsDescendantBindings){if(p!==t)throw Error("Multiple bindings ("+p+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=a}}),"function"==typeof o&&f.B(function(){o(e,_(a),m,r.$data,r)},null,{i:e})}catch(s){throw s.message='Unable to process binding "'+a+": "+l[a]+'"\nMessage: '+s.message,s}})}return{shouldBindDescendants:p===t}}function d(t){return t&&t instanceof f.U?t:new f.U(t)}f.d={};var p={script:!0,textarea:!0,template:!0};f.getBindingHandler=function(t){return f.d[t]},f.U=function(e,n,i,r){var o,a=this,s="function"==typeof e&&!f.H(e),l=f.B(function(){var t=s?e():e,o=f.a.c(t);return n?(n.P&&n.P(),f.a.extend(a,n),l&&(a.P=l)):(a.$parents=[],a.$root=o,a.ko=f),a.$rawData=t,a.$data=o,i&&(a[i]=o),r&&r(a,n,o),a.$data},null,{wa:function(){return o&&!f.a.Qb(o)},i:!0});l.ba()&&(a.P=l,l.equalityComparer=null,o=[],l.Ac=function(e){o.push(e),f.a.F.oa(e,function(e){f.a.La(o,e),o.length||(l.k(),a.P=l=t)})})},f.U.prototype.createChildContext=function(t,e,n){return new f.U(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)})},f.U.prototype.extend=function(t){return new f.U(this.P||this.$data,this,null,function(e,n){e.$rawData=n.$rawData,f.a.extend(e,"function"==typeof t?t():t)})};var g=f.a.e.I(),_=f.a.e.I();f.tc=function(t,e){return 2!=arguments.length?f.a.e.get(t,_):(f.a.e.set(t,_,e),void(e.P&&e.P.Ac(t)))},f.Ja=function(t,e,n){return 1===t.nodeType&&f.f.kc(t),c(t,e,d(n),!0)},f.Dc=function(t,e,n){return n=d(n),f.Ja(t,a(e,n,t),n)},f.eb=function(t,e){1!==e.nodeType&&8!==e.nodeType||l(d(t),e,!0)},f.Rb=function(t,n){if(!r&&e.jQuery&&(r=e.jQuery),n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||e.document.body,u(d(t),n,!0)},f.kb=function(e){switch(e.nodeType){case 1:case 8:var n=f.tc(e);if(n)return n;if(e.parentNode)return f.kb(e.parentNode)}return t},f.Jc=function(e){return(e=f.kb(e))?e.$data:t},f.b("bindingHandlers",f.d),f.b("applyBindings",f.Rb),f.b("applyBindingsToDescendants",f.eb),f.b("applyBindingAccessorsToNode",f.Ja),f.b("applyBindingsToNode",f.Dc),f.b("contextFor",f.kb),f.b("dataFor",f.Jc)}(),function(t){function e(e,i){var a,s=r.hasOwnProperty(e)?r[e]:t;s?s.X(i):(s=r[e]=new f.J,s.X(i),n(e,function(t,n){var i=!(!n||!n.synchronous);o[e]={definition:t,Zc:i},delete r[e],a||i?s.notifySubscribers(t):f.Y.Wa(function(){s.notifySubscribers(t)})}),a=!0)}function n(t,e){i("getConfig",[t],function(n){n?i("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function i(e,n,r,o){o||(o=f.g.loaders.slice(0));var a=o.shift();if(a){var s=a[e];if(s){var l=!1;if(s.apply(a,n.concat(function(t){l?r(null):null!==t?r(t):i(e,n,r,o)}))!==t&&(l=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,r,o)}else r(null)}var r={},o={};f.g={get:function(n,i){var r=o.hasOwnProperty(n)?o[n]:t;r?r.Zc?f.l.w(function(){i(r.definition)}):f.Y.Wa(function(){i(r.definition)}):e(n,i)},Xb:function(t){delete o[t]},Jb:i},f.g.loaders=[],f.b("components",f.g),f.b("components.get",f.g.get),f.b("components.clearCachedDefinition",f.g.Xb)}(),function(){function t(t,e,n,i){function r(){0===--s&&i(o)}var o={},s=2,l=n.template;n=n.viewModel,l?a(e,l,function(e){f.g.Jb("loadTemplate",[t,e],function(t){o.template=t,r()})}):r(),n?a(e,n,function(e){f.g.Jb("loadViewModel",[t,e],function(t){o[h]=t,r()})}):r()}function i(t,e,n){if("function"==typeof e)n(function(t){return new e(t)});else if("function"==typeof e[h])n(e[h]);else if("instance"in e){var r=e.instance;n(function(){return r})}else"viewModel"in e?i(t,e.viewModel,n):t("Unknown viewModel value: "+e)}function r(t){switch(f.a.A(t)){case"script":return f.a.ma(t.text);case"textarea":return f.a.ma(t.value);case"template":if(o(t.content))return f.a.ua(t.content.childNodes)}return f.a.ua(t.childNodes)}function o(t){return e.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function a(t,n,i){"string"==typeof n.require?s||e.require?(s||e.require)([n.require],i):t("Uses require, but no AMD loader is present"):i(n)}function l(t){return function(e){throw Error("Component '"+t+"': "+e)}}var u={};f.g.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(f.g.ub(t))throw Error("Component "+t+" is already registered");u[t]=e},f.g.ub=function(t){return u.hasOwnProperty(t)},f.g.od=function(t){delete u[t],f.g.Xb(t)},f.g.Zb={getConfig:function(t,e){e(u.hasOwnProperty(t)?u[t]:null)},loadComponent:function(e,n,i){var r=l(e);a(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(t,i,a){if(t=l(t),"string"==typeof i)a(f.a.ma(i));else if(i instanceof Array)a(i);else if(o(i))a(f.a.V(i.childNodes));else if(i.element)if(i=i.element,e.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)a(r(i));else if("string"==typeof i){var s=n.getElementById(i);s?a(r(s)):t("Cannot find element with ID "+i)}else t("Unknown element type: "+i);else t("Unknown template value: "+i)},loadViewModel:function(t,e,n){i(l(t),e,n)}};var h="createViewModel";f.b("components.register",f.g.register),f.b("components.isRegistered",f.g.ub),f.b("components.unregister",f.g.od),f.b("components.defaultLoader",f.g.Zb),f.g.loaders.push(f.g.Zb),f.g.Bc=u}(),function(){function t(t,n){var i=t.getAttribute("params");if(i){var i=e.parseBindingsString(i,n,t,{valueAccessors:!0,bindingParams:!0}),i=f.a.Ca(i,function(e){return f.m(e,null,{i:t})}),r=f.a.Ca(i,function(e){var n=e.t();return e.ba()?f.m({read:function(){return f.a.c(e())},write:f.Ba(n)&&function(t){e()(t)},i:t}):n});return r.hasOwnProperty("$raw")||(r.$raw=i),r}return{$raw:{}}}f.g.getComponentNameForNode=function(t){var e=f.a.A(t);if(f.g.ub(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||8>=f.a.C&&t.tagName===e))return e},f.g.Ob=function(e,n,i,r){if(1===n.nodeType){var o=f.g.getComponentNameForNode(n);if(o){if(e=e||{},e.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:o,params:t(n,i)};e.component=r?function(){return a}:a}}return e};var e=new f.Q;9>f.a.C&&(f.g.register=function(t){return function(e){return n.createElement(e),t.apply(this,arguments)}}(f.g.register),n.createDocumentFragment=function(t){return function(){var e,n=t(),i=f.g.Bc;for(e in i)i.hasOwnProperty(e)&&n.createElement(e);return n}}(n.createDocumentFragment))}(),function(t){function e(t,e,n){if(e=e.template,!e)throw Error("Component '"+t+"' has no template");t=f.a.ua(e),f.f.da(n,t)}function n(t,e,n,i){var r=t.createViewModel;return r?r.call(t,i,{element:e,templateNodes:n}):i}var i=0;f.d.component={init:function(r,o,a,s,l){function u(){var t=h&&h.dispose;"function"==typeof t&&t.call(h),c=h=null}var h,c,d=f.a.V(f.f.childNodes(r));return f.a.F.oa(r,u),f.m(function(){var a,s,p=f.a.c(o());if("string"==typeof p?a=p:(a=f.a.c(p.name),s=f.a.c(p.params)),!a)throw Error("No component name specified");var g=c=++i;f.g.get(a,function(i){if(c===g){if(u(),!i)throw Error("Unknown component '"+a+"'");e(a,i,r);var o=n(i,r,d,s);i=l.createChildContext(o,t,function(t){t.$component=o,t.$componentTemplateNodes=d}),h=o,f.eb(i,r)}})},null,{i:r}),{controlsDescendantBindings:!0}}},f.f.Z.component=!0}();var I={"class":"className","for":"htmlFor"};f.d.attr={update:function(e,n){var i=f.a.c(n())||{};f.a.D(i,function(n,i){i=f.a.c(i);var r=!1===i||null===i||i===t;r&&e.removeAttribute(n),8>=f.a.C&&n in I?(n=I[n],r?e.removeAttribute(n):e[n]=i):r||e.setAttribute(n,i.toString()),"name"===n&&f.a.rc(e,r?"":i.toString())})}},function(){f.d.checked={after:["value","attr"],init:function(e,n,i){function r(){var t=e.checked,r=p?a():t;if(!f.va.Sa()&&(!l||t)){var o=f.l.w(n);if(h){var s=c?o.t():o;d!==r?(t&&(f.a.pa(s,r,!0),f.a.pa(s,d,!1)),d=r):f.a.pa(s,r,t),c&&f.Ba(o)&&o(s)}else f.h.Ea(o,i,"checked",r,!0)}}function o(){var t=f.a.c(n());e.checked=h?0<=f.a.o(t,a()):s?t:a()===t}var a=f.nc(function(){return i.has("checkedValue")?f.a.c(i.get("checkedValue")):i.has("value")?f.a.c(i.get("value")):e.value}),s="checkbox"==e.type,l="radio"==e.type;if(s||l){var u=n(),h=s&&f.a.c(u)instanceof Array,c=!(h&&u.push&&u.splice),d=h?a():t,p=l||h;l&&!e.name&&f.d.uniqueName.init(e,function(){return!0}),f.m(r,null,{i:e}),f.a.p(e,"click",r),f.m(o,null,{i:e}),u=t}}},f.h.ea.checked=!0,f.d.checkedValue={update:function(t,e){t.value=f.a.c(e())}}}(),f.d.css={update:function(t,e){var n=f.a.c(e());null!==n&&"object"==typeof n?f.a.D(n,function(e,n){n=f.a.c(n),f.a.bb(t,e,n)}):(n=f.a.$a(String(n||"")),f.a.bb(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,f.a.bb(t,n,!0))}},f.d.enable={update:function(t,e){var n=f.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},f.d.disable={update:function(t,e){f.d.enable.update(t,function(){return!f.a.c(e())})}},f.d.event={init:function(t,e,n,i,r){var o=e()||{};f.a.D(o,function(o){"string"==typeof o&&f.a.p(t,o,function(t){var a,s=e()[o];if(s){try{var l=f.a.V(arguments);i=r.$data,l.unshift(i),a=s.apply(i,l)}finally{!0!==a&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===n.get(o+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},f.d.foreach={ic:function(t){return function(){var e=t(),n=f.a.zb(e);return n&&"number"!=typeof n.length?(f.a.c(e),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:f.W.sb}):{foreach:e,templateEngine:f.W.sb}}},init:function(t,e){return f.d.template.init(t,f.d.foreach.ic(e))},update:function(t,e,n,i,r){return f.d.template.update(t,f.d.foreach.ic(e),n,i,r)}},f.h.ta.foreach=!1,f.f.Z.foreach=!0,f.d.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var r=t.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement;
}catch(a){o=r.body}i=o===t}r=e(),f.h.Ea(r,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),o=i.bind(null,!1);f.a.p(t,"focus",r),f.a.p(t,"focusin",r),f.a.p(t,"blur",o),f.a.p(t,"focusout",o)},update:function(t,e){var n=!!f.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),f.l.w(f.a.Da,null,[t,n?"focusin":"focusout"]))}},f.h.ea.hasfocus=!0,f.d.hasFocus=f.d.hasfocus,f.h.ea.hasFocus=!0,f.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){f.a.Cb(t,e())}},g("if"),g("ifnot",!1,!0),g("with",!0,!1,function(t,e){return t.createChildContext(e)});var O={};f.d.options={init:function(t){if("select"!==f.a.A(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function r(){return f.a.Ka(e.options,function(t){return t.selected})}function o(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function a(t,n){if(g&&h)f.j.ha(e,f.a.c(i.get("value")),!0);else if(p.length){var r=0<=f.a.o(p,f.j.u(n[0]));f.a.sc(n[0],r),g&&!r&&f.l.w(f.a.Da,null,[e,"change"])}}var s=e.multiple,l=0!=e.length&&s?e.scrollTop:null,u=f.a.c(n()),h=i.get("valueAllowUnset")&&i.has("value"),c=i.get("optionsIncludeDestroyed");n={};var d,p=[];h||(s?p=f.a.fb(r(),f.j.u):0<=e.selectedIndex&&p.push(f.j.u(e.options[e.selectedIndex]))),u&&("undefined"==typeof u.length&&(u=[u]),d=f.a.Ka(u,function(e){return c||e===t||null===e||!f.a.c(e._destroy)}),i.has("optionsCaption")&&(u=f.a.c(i.get("optionsCaption")),null!==u&&u!==t&&d.unshift(O)));var g=!1;n.beforeRemove=function(t){e.removeChild(t)},u=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(u=function(e,n){a(0,n),f.l.w(i.get("optionsAfterRender"),null,[n[0],e!==O?e:t])}),f.a.Bb(e,d,function(n,r,a){return a.length&&(p=!h&&a[0].selected?[f.j.u(a[0])]:[],g=!0),r=e.ownerDocument.createElement("option"),n===O?(f.a.Za(r,i.get("optionsCaption")),f.j.ha(r,t)):(a=o(n,i.get("optionsValue"),n),f.j.ha(r,f.a.c(a)),n=o(n,i.get("optionsText"),a),f.a.Za(r,n)),[r]},n,u),f.l.w(function(){h?f.j.ha(e,f.a.c(i.get("value")),!0):(s?p.length&&r().length<p.length:p.length&&0<=e.selectedIndex?f.j.u(e.options[e.selectedIndex])!==p[0]:p.length||0<=e.selectedIndex)&&f.a.Da(e,"change")}),f.a.Nc(e),l&&20<Math.abs(l-e.scrollTop)&&(e.scrollTop=l)}},f.d.options.xb=f.a.e.I(),f.d.selectedOptions={after:["options","foreach"],init:function(t,e,n){f.a.p(t,"change",function(){var i=e(),r=[];f.a.q(t.getElementsByTagName("option"),function(t){t.selected&&r.push(f.j.u(t))}),f.h.Ea(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=f.a.A(t))throw Error("values binding applies only to SELECT elements");var n=f.a.c(e()),i=t.scrollTop;n&&"number"==typeof n.length&&f.a.q(t.getElementsByTagName("option"),function(t){var e=0<=f.a.o(n,f.j.u(t));t.selected!=e&&f.a.sc(t,e)}),t.scrollTop=i}},f.h.ea.selectedOptions=!0,f.d.style={update:function(e,n){var i=f.a.c(n()||{});f.a.D(i,function(n,i){i=f.a.c(i),null!==i&&i!==t&&!1!==i||(i=""),e.style[n]=i})}},f.d.submit={init:function(t,e,n,i,r){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");f.a.p(t,"submit",function(n){var i,o=e();try{i=o.call(r.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},f.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){f.a.Za(t,e())}},f.f.Z.text=!0,function(){if(e&&e.navigator)var n=function(t){if(t)return parseFloat(t[1])},i=e.opera&&e.opera.version&&parseInt(e.opera.version()),r=e.navigator.userAgent,o=n(r.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),a=n(r.match(/Firefox\/([^ ]*)/));if(10>f.a.C)var s=f.a.e.I(),l=f.a.e.I(),u=function(t){var e=this.activeElement;(e=e&&f.a.e.get(e,l))&&e(t)},h=function(t,e){var n=t.ownerDocument;f.a.e.get(n,s)||(f.a.e.set(n,s,!0),f.a.p(n,"selectionchange",u)),f.a.e.set(t,l,e)};f.d.textInput={init:function(e,n,r){function s(t,n){f.a.p(e,t,n)}function l(){var i=f.a.c(n());null!==i&&i!==t||(i=""),p!==t&&i===p?f.a.setTimeout(l,4):e.value!==i&&(g=i,e.value=i)}function u(){d||(p=e.value,d=f.a.setTimeout(c,4))}function c(){clearTimeout(d),p=d=t;var i=e.value;g!==i&&(g=i,f.h.Ea(n(),r,"textInput",i))}var d,p,g=e.value,_=9==f.a.C?u:c;10>f.a.C?(s("propertychange",function(t){"value"===t.propertyName&&_(t)}),8==f.a.C&&(s("keyup",c),s("keydown",c)),8<=f.a.C&&(h(e,_),s("dragend",u))):(s("input",c),5>o&&"textarea"===f.a.A(e)?(s("keydown",u),s("paste",u),s("cut",u)):11>i?s("keydown",u):4>a&&(s("DOMAutoComplete",c),s("dragdrop",c),s("drop",c))),s("change",c),f.m(l,null,{i:e})}},f.h.ea.textInput=!0,f.d.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),f.d.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++f.d.uniqueName.Ic;f.a.rc(t,n)}}},f.d.uniqueName.Ic=0,f.d.value={after:["options","foreach"],init:function(t,e,n){if("input"!=t.tagName.toLowerCase()||"checkbox"!=t.type&&"radio"!=t.type){var i=["change"],r=n.get("valueUpdate"),o=!1,a=null;r&&("string"==typeof r&&(r=[r]),f.a.ra(i,r),i=f.a.Tb(i));var s=function(){a=null,o=!1;var i=e(),r=f.j.u(t);f.h.Ea(i,n,"value",r)};!f.a.C||"input"!=t.tagName.toLowerCase()||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=f.a.o(i,"propertychange")||(f.a.p(t,"propertychange",function(){o=!0}),f.a.p(t,"focus",function(){o=!1}),f.a.p(t,"blur",function(){o&&s()})),f.a.q(i,function(e){var n=s;f.a.nd(e,"after")&&(n=function(){a=f.j.u(t),f.a.setTimeout(s,0)},e=e.substring(5)),f.a.p(t,e,n)});var l=function(){var i=f.a.c(e()),r=f.j.u(t);if(null!==a&&i===a)f.a.setTimeout(l,0);else if(i!==r)if("select"===f.a.A(t)){var o=n.get("valueAllowUnset"),r=function(){f.j.ha(t,i,o)};r(),o||i===f.j.u(t)?f.a.setTimeout(r,0):f.l.w(f.a.Da,null,[t,"change"])}else f.j.ha(t,i)};f.m(l,null,{i:t})}else f.Ja(t,{checkedValue:e})},update:function(){}},f.h.ea.value=!0,f.d.visible={update:function(t,e){var n=f.a.c(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},function(t){f.d[t]={init:function(e,n,i,r,o){return f.d.event.init.call(this,e,function(){var e={};return e[t]=n(),e},i,r,o)}}}("click"),f.O=function(){},f.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},f.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},f.O.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){e=e||n;var i=e.getElementById(t);if(!i)throw Error("Cannot find template with ID "+t);return new f.v.n(i)}if(1==t.nodeType||8==t.nodeType)return new f.v.qa(t);throw Error("Unknown template type: "+t)},f.O.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n,i)},f.O.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},f.O.prototype.rewriteTemplate=function(t,e,n){t=this.makeTemplateSource(t,n),e=e(t.text()),t.text(e),t.data("isRewritten",!0)},f.b("templateEngine",f.O),f.Gb=function(){function t(t,e,n,i){t=f.h.yb(t);for(var r=f.h.ta,o=0;o<t.length;o++){var a=t[o].key;if(r.hasOwnProperty(a)){var s=r[a];if("function"==typeof s){if(a=s(t[o].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f.h.Ua(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return f.Gb.dd(t,e)},n)},dd:function(i,r){return i.replace(e,function(e,n,i,o,a){return t(a,n,i,r)}).replace(n,function(e,n){return t(n,"<!-- ko -->","#comment",r)})},Ec:function(t,e){return f.M.wb(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&f.Ja(r,t,i)})}}}(),f.b("__tr_ambtns",f.Gb.Ec),function(){f.v={},f.v.n=function(t){if(this.n=t){var e=f.a.A(t);this.ab="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},f.v.n.prototype.text=function(){var t=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[t];var e=arguments[0];"innerHTML"===t?f.a.Cb(this.n,e):this.n[t]=e};var e=f.a.e.I()+"_";f.v.n.prototype.data=function(t){return 1===arguments.length?f.a.e.get(this.n,e+t):void f.a.e.set(this.n,e+t,arguments[1])};var n=f.a.e.I();f.v.n.prototype.nodes=function(){var e=this.n;return 0==arguments.length?(f.a.e.get(e,n)||{}).jb||(3===this.ab?e.content:4===this.ab?e:t):void f.a.e.set(e,n,{jb:arguments[0]})},f.v.qa=function(t){this.n=t},f.v.qa.prototype=new f.v.n,f.v.qa.prototype.text=function(){if(0==arguments.length){var e=f.a.e.get(this.n,n)||{};return e.Hb===t&&e.jb&&(e.Hb=e.jb.innerHTML),e.Hb}f.a.e.set(this.n,n,{Hb:arguments[0]})},f.b("templateSources",f.v),f.b("templateSources.domElement",f.v.n),f.b("templateSources.anonymousTemplate",f.v.qa)}(),function(){function e(t,e,n){var i;for(e=f.f.nextSibling(e);t&&(i=t)!==e;)t=f.f.nextSibling(i),n(i,t)}function n(t,n){if(t.length){var i=t[0],r=t[t.length-1],o=i.parentNode,a=f.Q.instance,s=a.preprocessNode;if(s){if(e(i,r,function(t,e){var n=t.previousSibling,o=s.call(a,t);o&&(t===i&&(i=o[0]||e),t===r&&(r=o[o.length-1]||n))}),t.length=0,!i)return;i===r?t.push(i):(t.push(i,r),f.a.za(t,o))}e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||f.Rb(n,t)}),e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||f.M.yc(t,[n])}),f.a.za(t,o)}}function i(t){return t.nodeType?t:0<t.length?t[0]:null}function r(t,e,r,o,s){s=s||{};var l=(t&&i(t)||r||{}).ownerDocument,u=s.templateEngine||a;if(f.Gb.Oc(r,u,l),r=u.renderTemplate(r,o,s,l),"number"!=typeof r.length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,e){case"replaceChildren":f.f.da(t,r),l=!0;break;case"replaceNode":f.a.qc(t,r),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return l&&(n(r,o),s.afterRender&&f.l.w(s.afterRender,null,[r,o.$data])),r}function o(t,e,n){return f.H(t)?t():"function"==typeof t?t(e,n):t}var a;f.Db=function(e){if(e!=t&&!(e instanceof f.O))throw Error("templateEngine must inherit from ko.templateEngine");a=e},f.Ab=function(e,n,s,l,u){if(s=s||{},(s.templateEngine||a)==t)throw Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",l){var h=i(l);return f.B(function(){var t=n&&n instanceof f.U?n:new f.U(f.a.c(n)),a=o(e,t.$data,t),t=r(l,u,a,t,s);"replaceNode"==u&&(l=t,h=i(l))},null,{wa:function(){return!h||!f.a.nb(h)},i:h&&"replaceNode"==u?h.parentNode:h})}return f.M.wb(function(t){f.Ab(e,n,s,t,"replaceNode")})},f.kd=function(e,i,a,s,l){function u(t,e){n(e,c),a.afterRender&&a.afterRender(e,t),c=null}function h(t,n){c=l.createChildContext(t,a.as,function(t){t.$index=n});var i=o(e,t,c);return r(null,"ignoreTargetNode",i,c,a)}var c;return f.B(function(){var e=f.a.c(i)||[];"undefined"==typeof e.length&&(e=[e]),e=f.a.Ka(e,function(e){return a.includeDestroyed||e===t||null===e||!f.a.c(e._destroy)}),f.l.w(f.a.Bb,null,[s,e,h,a,u])},null,{i:s})};var s=f.a.e.I();f.d.template={init:function(t,e){var n=f.a.c(e());if("string"==typeof n||n.name)f.f.xa(t);else{if("nodes"in n){if(n=n.nodes||[],f.H(n))throw Error('The "nodes" option must be a plain, non-observable array.')}else n=f.f.childNodes(t);n=f.a.jc(n),new f.v.qa(t).nodes(n)}return{controlsDescendantBindings:!0}},update:function(e,n,i,r,o){var a,l=n();n=f.a.c(l),i=!0,r=null,"string"==typeof n?n={}:(l=n.name,"if"in n&&(i=f.a.c(n["if"])),i&&"ifnot"in n&&(i=!f.a.c(n.ifnot)),a=f.a.c(n.data)),"foreach"in n?r=f.kd(l||e,i&&n.foreach||[],n,e,o):i?(o="data"in n?o.createChildContext(a,n.as):o,r=f.Ab(l||e,o,n,e)):f.f.xa(e),o=r,(a=f.a.e.get(e,s))&&"function"==typeof a.k&&a.k(),f.a.e.set(e,s,o&&o.ba()?o:t)}},f.h.ta.template=function(t){return t=f.h.yb(t),1==t.length&&t[0].unknown||f.h.ad(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},f.f.Z.template=!0}(),f.b("setTemplateEngine",f.Db),f.b("renderTemplate",f.Ab),f.a.dc=function(t,e,n){if(t.length&&e.length){var i,r,o,a,s;for(i=r=0;(!n||i<n)&&(a=t[r]);++r){for(o=0;s=e[o];++o)if(a.value===s.value){a.moved=s.index,s.moved=a.index,e.splice(o,1),i=o=0;break}i+=o}}},f.a.ib=function(){function t(t,e,n,i,r){var o,a,s,l,u,h=Math.min,c=Math.max,d=[],p=t.length,g=e.length,_=g-p||1,m=p+g+1;for(o=0;o<=p;o++)for(l=s,d.push(s=[]),u=h(g,o+_),a=c(0,o-1);a<=u;a++)s[a]=a?o?t[o-1]===e[a-1]?l[a-1]:h(l[a]||m,s[a-1]||m)+1:a+1:o+1;for(h=[],c=[],_=[],o=p,a=g;o||a;)g=d[o][a]-1,a&&g===d[o][a-1]?c.push(h[h.length]={status:n,value:e[--a],index:a}):o&&g===d[o-1][a]?_.push(h[h.length]={status:i,value:t[--o],index:o}):(--a,--o,r.sparse||h.push({status:"retained",value:e[a]}));return f.a.dc(_,c,!r.dontLimitMoves&&10*p),h.reverse()}return function(e,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},e=e||[],n=n||[],e.length<n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),f.b("utils.compareArrays",f.a.ib),function(){function e(e,n,i,r,o){var a=[],s=f.B(function(){var t=n(i,o,f.a.za(a,e))||[];0<a.length&&(f.a.qc(a,t),r&&f.l.w(r,null,[i,t,o])),a.length=0,f.a.ra(a,t)},null,{i:e,wa:function(){return!f.a.Qb(a)}});return{ca:a,B:s.ba()?s:t}}var n=f.a.e.I(),i=f.a.e.I();f.a.Bb=function(r,o,a,s,l){function u(t,e){C=d[e],v!==e&&(T[t]=C),C.qb(v++),f.a.za(C.ca,r),_.push(C),S.push(C)}function h(t,e){if(t)for(var n=0,i=e.length;n<i;n++)e[n]&&f.a.q(e[n].ca,function(i){t(i,n,e[n].ja)})}o=o||[],s=s||{};var c=f.a.e.get(r,n)===t,d=f.a.e.get(r,n)||[],p=f.a.fb(d,function(t){return t.ja}),g=f.a.ib(p,o,s.dontLimitMoves),_=[],m=0,v=0,y=[],S=[];o=[];for(var C,b,E,T=[],p=[],A=0;b=g[A];A++)switch(E=b.moved,b.status){case"deleted":E===t&&(C=d[m],C.B&&(C.B.k(),C.B=t),f.a.za(C.ca,r).length&&(s.beforeRemove&&(_.push(C),S.push(C),C.ja===i?C=null:o[A]=C),C&&y.push.apply(y,C.ca))),m++;break;case"retained":u(A,m++);break;case"added":E!==t?u(A,E):(C={ja:b.value,qb:f.N(v++)},_.push(C),S.push(C),c||(p[A]=C))}f.a.e.set(r,n,_),h(s.beforeMove,T),f.a.q(y,s.beforeRemove?f.$:f.removeNode);for(var x,A=0,c=f.f.firstChild(r);C=S[A];A++){for(C.ca||f.a.extend(C,e(r,a,C.ja,l,C.qb)),m=0;g=C.ca[m];c=g.nextSibling,x=g,m++)g!==c&&f.f.gc(r,g,x);!C.Wc&&l&&(l(C.ja,C.ca,C.qb),C.Wc=!0)}for(h(s.beforeRemove,o),A=0;A<o.length;++A)o[A]&&(o[A].ja=i);h(s.afterMove,T),h(s.afterAdd,p)}}(),f.b("utils.setDomNodeChildrenFromArrayMapping",f.a.Bb),f.W=function(){this.allowTemplateRewriting=!1},f.W.prototype=new f.O,f.W.prototype.renderTemplateSource=function(t,e,n,i){return(e=(9>f.a.C?0:t.nodes)?t.nodes():null)?f.a.V(e.cloneNode(!0).childNodes):(t=t.text(),f.a.ma(t,i))},f.W.sb=new f.W,f.Db(f.W.sb),f.b("nativeTemplateEngine",f.W),function(){f.vb=function(){var t=this.$c=function(){if(!r||!r.tmpl)return 0;try{if(0<=r.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,i,o,a){if(a=a||n,o=o||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=e.data("precompiled");return s||(s=e.text()||"",s=r.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),e.data("precompiled",s)),e=[i.$data],i=r.extend({koBindingContext:i},o.templateOptions),i=r.tmpl(s,e,i),i.appendTo(a.createElement("div")),r.fragments={},i},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){n.write("<script type='text/html' id='"+t+"'>"+e+"</script>")},0<t&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},f.vb.prototype=new f.O;var t=new f.vb;0<t.$c&&f.Db(t),f.b("jqueryTmplTemplateEngine",f.vb)}()})}()}(),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e){e=e||Q;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function i(t){var e=!!t&&"length"in t&&t.length,n=dt.type(t);return"function"!==n&&!dt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(dt.isFunction(e))return dt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return dt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(bt.test(e))return dt.filter(e,t,n);e=dt.filter(e,t)}return dt.grep(t,function(t){return rt.call(e,t)>-1!==n&&1===t.nodeType})}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return dt.each(t.match(Ot)||[],function(t,n){e[n]=!0}),e}function s(t){return t}function l(t){throw t}function u(t,e,n){var i;try{t&&dt.isFunction(i=t.promise)?i.call(t).done(e).fail(n):t&&dt.isFunction(i=t.then)?i.call(t,e,n):e.call(void 0,t)}catch(t){n.call(void 0,t)}}function h(){Q.removeEventListener("DOMContentLoaded",h),t.removeEventListener("load",h),dt.ready()}function c(){this.expando=dt.expando+c.uid++}function d(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(kt,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Nt.test(n)?JSON.parse(n):n)}catch(r){}Lt.set(t,e,n)}else n=void 0;return n}function p(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return dt.css(t,e,"")},l=s(),u=n&&n[3]||(dt.cssNumber[e]?"":"px"),h=(dt.cssNumber[e]||"px"!==u&&+l)&&Bt.exec(dt.css(t,e));if(h&&h[3]!==u){u=u||h[3],n=n||[],h=+l||1;do o=o||".5",h/=o,dt.style(t,e,h+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=h,i.end=r)),r}function g(t){var e,n=t.ownerDocument,i=t.nodeName,r=Gt[i];return r?r:(e=n.body.appendChild(n.createElement(i)),r=dt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Gt[i]=r,r)}function f(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)i=t[o],i.style&&(n=i.style.display,e?("none"===n&&(r[o]=Rt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Ht(i)&&(r[o]=g(i))):"none"!==n&&(r[o]="none",Rt.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function _(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&dt.nodeName(t,e)?dt.merge([t],n):n}function m(t,e){for(var n=0,i=t.length;n<i;n++)Rt.set(t[n],"globalEval",!e||Rt.get(e[n],"globalEval"))}function v(t,e,n,i,r){for(var o,a,s,l,u,h,c=e.createDocumentFragment(),d=[],p=0,g=t.length;p<g;p++)if(o=t[p],o||0===o)if("object"===dt.type(o))dt.merge(d,o.nodeType?[o]:o);else if(zt.test(o)){for(a=a||c.appendChild(e.createElement("div")),s=(Yt.exec(o)||["",""])[1].toLowerCase(),l=Wt[s]||Wt._default,a.innerHTML=l[1]+dt.htmlPrefilter(o)+l[2],h=l[0];h--;)a=a.lastChild;dt.merge(d,a.childNodes),a=c.firstChild,a.textContent=""}else d.push(e.createTextNode(o));for(c.textContent="",p=0;o=d[p++];)if(i&&dt.inArray(o,i)>-1)r&&r.push(o);else if(u=dt.contains(o.ownerDocument,o),a=_(c.appendChild(o),"script"),u&&m(a),n)for(h=0;o=a[h++];)Kt.test(o.type||"")&&n.push(o);return c}function y(){return!0}function S(){return!1}function C(){try{return Q.activeElement}catch(t){}}function b(t,e,n,i,r,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(s in e)b(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=S;else if(!r)return t;return 1===o&&(a=r,r=function(t){return dt().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=dt.guid++)),t.each(function(){dt.event.add(this,e,r,i,n)})}function E(t,e){return dt.nodeName(t,"table")&&dt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t:t}function T(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function A(t){var e=ee.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){var n,i,r,o,a,s,l,u;if(1===e.nodeType){if(Rt.hasData(t)&&(o=Rt.access(t),a=Rt.set(e,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)dt.event.add(e,r,u[r][n])}Lt.hasData(t)&&(s=Lt.access(t),l=dt.extend({},s),Lt.set(e,l))}}function I(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Vt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function O(t,e,i,r){e=nt.apply([],e);var o,a,s,l,u,h,c=0,d=t.length,p=d-1,g=e[0],f=dt.isFunction(g);if(f||d>1&&"string"==typeof g&&!ht.checkClone&&te.test(g))return t.each(function(n){var o=t.eq(n);f&&(e[0]=g.call(this,n,o.html())),O(o,e,i,r)});if(d&&(o=v(e,t[0].ownerDocument,!1,t,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(s=dt.map(_(o,"script"),T),l=s.length;c<d;c++)u=o,c!==p&&(u=dt.clone(u,!0,!0),l&&dt.merge(s,_(u,"script"))),i.call(t[c],u,c);if(l)for(h=s[s.length-1].ownerDocument,dt.map(s,A),c=0;c<l;c++)u=s[c],Kt.test(u.type||"")&&!Rt.access(u,"globalEval")&&dt.contains(h,u)&&(u.src?dt._evalUrl&&dt._evalUrl(u.src):n(u.textContent.replace(ne,""),h))}return t}function M(t,e,n){for(var i,r=e?dt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||dt.cleanData(_(i)),i.parentNode&&(n&&dt.contains(i.ownerDocument,i)&&m(_(i,"script")),i.parentNode.removeChild(i));return t}function D(t,e,n){var i,r,o,a,s=t.style;return n=n||oe(t),n&&(a=n.getPropertyValue(e)||n[e],""!==a||dt.contains(t.ownerDocument,t)||(a=dt.style(t,e)),!ht.pixelMarginRight()&&re.test(a)&&ie.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function w(t){if(t in he)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ue.length;n--;)if(t=ue[n]+e,t in he)return t}function R(t,e,n){var i=Bt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function L(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=dt.css(t,n+Ft[o],!0,r)),i?("content"===n&&(a-=dt.css(t,"padding"+Ft[o],!0,r)),"margin"!==n&&(a-=dt.css(t,"border"+Ft[o]+"Width",!0,r))):(a+=dt.css(t,"padding"+Ft[o],!0,r),"padding"!==n&&(a+=dt.css(t,"border"+Ft[o]+"Width",!0,r)));return a}function N(t,e,n){var i,r=!0,o=oe(t),a="border-box"===dt.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(i=t.getBoundingClientRect()[e]),i<=0||null==i){if(i=D(t,e,o),(i<0||null==i)&&(i=t.style[e]),re.test(i))return i;r=a&&(ht.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+L(t,e,n||(a?"border":"content"),r,o)+"px"}function k(t,e,n,i,r){return new k.prototype.init(t,e,n,i,r)}function U(){de&&(t.requestAnimationFrame(U),dt.fx.tick())}function B(){return t.setTimeout(function(){ce=void 0}),ce=dt.now()}function F(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)n=Ft[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function H(t,e,n){for(var i,r=(V.tweeners[e]||[]).concat(V.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function j(t,e,n){var i,r,o,a,s,l,u,h,c="width"in e||"height"in e,d=this,p={},g=t.style,_=t.nodeType&&Ht(t),m=Rt.get(t,"fxshow");n.queue||(a=dt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,dt.queue(t,"fx").length||a.empty.fire()})}));for(i in e)if(r=e[i],pe.test(r)){if(delete e[i],o=o||"toggle"===r,r===(_?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;_=!0}p[i]=m&&m[i]||dt.style(t,i)}if(l=!dt.isEmptyObject(e),l||!dt.isEmptyObject(p)){c&&1===t.nodeType&&(n.overflow=[g.overflow,g.overflowX,g.overflowY],u=m&&m.display,null==u&&(u=Rt.get(t,"display")),h=dt.css(t,"display"),"none"===h&&(u?h=u:(f([t],!0),u=t.style.display||u,h=dt.css(t,"display"),f([t]))),("inline"===h||"inline-block"===h&&null!=u)&&"none"===dt.css(t,"float")&&(l||(d.done(function(){g.display=u}),null==u&&(h=g.display,u="none"===h?"":h)),g.display="inline-block")),n.overflow&&(g.overflow="hidden",d.always(function(){g.overflow=n.overflow[0],g.overflowX=n.overflow[1],g.overflowY=n.overflow[2]})),l=!1;for(i in p)l||(m?"hidden"in m&&(_=m.hidden):m=Rt.access(t,"fxshow",{display:u}),o&&(m.hidden=!_),_&&f([t],!0),d.done(function(){_||f([t]),Rt.remove(t,"fxshow");for(i in p)dt.style(t,i,p[i])})),l=H(_?m[i]:0,i,d),i in m||(m[i]=l.start,_&&(l.end=l.start,l.start=0))}}function G(t,e){var n,i,r,o,a;for(n in t)if(i=dt.camelCase(n),r=e[i],o=t[n],dt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=dt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function V(t,e,n){var i,r,o=0,a=V.prefilters.length,s=dt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ce||B(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),o<1&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:dt.extend({},e),opts:dt.extend(!0,{specialEasing:{},easing:dt.easing._default},n),originalProperties:e,originalOptions:n,startTime:ce||B(),duration:n.duration,tweens:[],createTween:function(e,n){var i=dt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),h=u.props;for(G(h,u.opts.specialEasing);o<a;o++)if(i=V.prefilters[o].call(u,t,h,u.opts))return dt.isFunction(i.stop)&&(dt._queueHooks(u.elem,u.opts.queue).stop=dt.proxy(i.stop,i)),i;return dt.map(h,H,u),dt.isFunction(u.opts.start)&&u.opts.start.call(t,u),dt.fx.timer(dt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function K(t,e,n,i){var r;if(dt.isArray(e))dt.each(e,function(e,r){n||xe.test(t)?i(t,r):K(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==dt.type(e))i(t,e);else for(r in e)K(t+"["+r+"]",e[r],n,i)}function W(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(Ot)||[];if(dt.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function z(t,e,n,i){function r(s){var l;return o[s]=!0,dt.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===Be;return r(e.dataTypes[0])||!o["*"]&&r("*")}function X(t,e){var n,i,r=dt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&dt.extend(!0,t,i),t}function q(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function Z(t,e,n,i){var r,o,a,s,l,u={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=h.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],h.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function $(t){return dt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var J=[],Q=t.document,tt=Object.getPrototypeOf,et=J.slice,nt=J.concat,it=J.push,rt=J.indexOf,ot={},at=ot.toString,st=ot.hasOwnProperty,lt=st.toString,ut=lt.call(Object),ht={},ct="3.1.0",dt=function(t,e){return new dt.fn.init(t,e)},pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,gt=/^-ms-/,ft=/-([a-z])/g,_t=function(t,e){return e.toUpperCase()};dt.fn=dt.prototype={jquery:ct,constructor:dt,length:0,toArray:function(){return et.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:et.call(this)},pushStack:function(t){var e=dt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return dt.each(this,t)},map:function(t){return this.pushStack(dt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:J.sort,splice:J.splice},dt.extend=dt.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||dt.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],i=t[e],a!==i&&(u&&i&&(dt.isPlainObject(i)||(r=dt.isArray(i)))?(r?(r=!1,o=n&&dt.isArray(n)?n:[]):o=n&&dt.isPlainObject(n)?n:{},a[e]=dt.extend(u,o,i)):void 0!==i&&(a[e]=i));return a},dt.extend({expando:"jQuery"+(ct+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===dt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=dt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==at.call(t))&&(!(e=tt(t))||(n=st.call(e,"constructor")&&e.constructor,"function"==typeof n&&lt.call(n)===ut))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ot[at.call(t)]||"object":typeof t},globalEval:function(t){n(t)},camelCase:function(t){return t.replace(gt,"ms-").replace(ft,_t)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(pt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?dt.merge(n,"string"==typeof t?[t]:t):it.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:rt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;o<a;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,n){var r,o,a=0,s=[];if(i(t))for(r=t.length;a<r;a++)o=e(t[a],a,n),null!=o&&s.push(o);else for(a in t)o=e(t[a],a,n),null!=o&&s.push(o);return nt.apply([],s)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),dt.isFunction(t))return i=et.call(arguments,2),r=function(){return t.apply(e||this,i.concat(et.call(arguments)))},r.guid=t.guid=t.guid||dt.guid++,r},now:Date.now,support:ht}),"function"==typeof Symbol&&(dt.fn[Symbol.iterator]=J[Symbol.iterator]),dt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ot["[object "+e+"]"]=e.toLowerCase()});var mt=function(t){function e(t,e,n,i){
var r,o,a,s,l,u,h,d=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!i&&((e?e.ownerDocument||e:j)!==R&&w(e),e=e||R,N)){if(11!==g&&(l=mt.exec(t)))if(r=l[1]){if(9===g){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&F(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return J.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&b.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(r)),n}if(b.qsa&&!W[t+" "]&&(!k||!k.test(t))){if(1!==g)d=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(Ct,bt):e.setAttribute("id",s=H),u=x(t),o=u.length;o--;)u[o]="#"+s+" "+p(u[o]);h=u.join(","),d=vt.test(t)&&c(e.parentNode)||e}if(h)try{return J.apply(n,d.querySelectorAll(h)),n}catch(f){}finally{s===H&&e.removeAttribute("id")}}}return O(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>E.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[H]=!0,t}function r(t){var e=R.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)E.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return function(e){return"label"in e&&e.disabled===t||"form"in e&&e.disabled===t||"form"in e&&e.disabled===!1&&(e.isDisabled===t||e.isDisabled!==!t&&("label"in e||!Tt(e))!==t)}}function h(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function d(){}function p(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function g(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=V++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r)}:function(e,n,l){var u,h,c,d=[G,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(c=e[H]||(e[H]={}),h=c[e.uniqueID]||(c[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=h[o])&&u[0]===G&&u[1]===s)return d[2]=u[2];if(h[o]=d,d[2]=t(e,n,l))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function _(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function m(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function v(t,e,n,r,o,a){return r&&!r[H]&&(r=v(r)),o&&!o[H]&&(o=v(o,a)),i(function(i,a,s,l){var u,h,c,d=[],p=[],g=a.length,f=i||_(e||"*",s.nodeType?[s]:s,[]),v=!t||!i&&e?f:m(f,d,t,s,l),y=n?o||(i?t:g||r)?[]:a:v;if(n&&n(v,y,s,l),r)for(u=m(y,p),r(u,[],s,l),h=u.length;h--;)(c=u[h])&&(y[p[h]]=!(v[p[h]]=c));if(i){if(o||t){if(o){for(u=[],h=y.length;h--;)(c=y[h])&&u.push(v[h]=c);o(null,y=[],u,l)}for(h=y.length;h--;)(c=y[h])&&(u=o?tt(i,c):d[h])>-1&&(i[u]=!(a[u]=c))}}else y=m(y===a?y.splice(g,y.length):y),o?o(null,a,y,l):J.apply(a,y)})}function y(t){for(var e,n,i,r=t.length,o=E.relative[t[0].type],a=o||E.relative[" "],s=o?1:0,l=g(function(t){return t===e},a,!0),u=g(function(t){return tt(e,t)>-1},a,!0),h=[function(t,n,i){var r=!o&&(i||n!==M)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];s<r;s++)if(n=E.relative[t[s].type])h=[g(f(h),n)];else{if(n=E.filter[t[s].type].apply(null,t[s].matches),n[H]){for(i=++s;i<r&&!E.relative[t[i].type];i++);return v(s>1&&f(h),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&y(t.slice(s,i)),i<r&&y(t=t.slice(i)),i<r&&p(t))}h.push(n)}return f(h)}function S(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var h,c,d,p=0,g="0",f=i&&[],_=[],v=M,y=i||o&&E.find.TAG("*",u),S=G+=null==v?1:Math.random()||.1,C=y.length;for(u&&(M=a===R||a||u);g!==C&&null!=(h=y[g]);g++){if(o&&h){for(c=0,a||h.ownerDocument===R||(w(h),s=!N);d=t[c++];)if(d(h,a||R,s)){l.push(h);break}u&&(G=S)}r&&((h=!d&&h)&&p--,i&&f.push(h))}if(p+=g,r&&g!==p){for(c=0;d=n[c++];)d(f,_,a,s);if(i){if(p>0)for(;g--;)f[g]||_[g]||(_[g]=Z.call(l));_=m(_)}J.apply(l,_),u&&!i&&_.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(G=S,M=v),f};return r?i(a):a}var C,b,E,T,A,x,I,O,M,D,P,w,R,L,N,k,U,B,F,H="sizzle"+1*new Date,j=t.document,G=0,V=0,Y=n(),K=n(),W=n(),z=function(t,e){return t===e&&(P=!0),0},X={}.hasOwnProperty,q=[],Z=q.pop,$=q.push,J=q.push,Q=q.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ct=new RegExp(ot),dt=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,_t=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,yt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),St=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ct=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,bt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Et=function(){w()},Tt=g(function(t){return t.disabled===!0},{dir:"parentNode",next:"legend"});try{J.apply(q=Q.call(j.childNodes),j.childNodes),q[j.childNodes.length].nodeType}catch(At){J={apply:q.length?function(t,e){$.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}b=e.support={},A=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},w=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:j;return i!==R&&9===i.nodeType&&i.documentElement?(R=i,L=R.documentElement,N=!A(R),j!==R&&(n=R.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Et,!1):n.attachEvent&&n.attachEvent("onunload",Et)),b.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=r(function(t){return t.appendChild(R.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=_t.test(R.getElementsByClassName),b.getById=r(function(t){return L.appendChild(t).id=H,!R.getElementsByName||!R.getElementsByName(H).length}),b.getById?(E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}},E.filter.ID=function(t){var e=t.replace(yt,St);return function(t){return t.getAttribute("id")===e}}):(delete E.find.ID,E.filter.ID=function(t){var e=t.replace(yt,St);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),E.find.TAG=b.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},E.find.CLASS=b.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},U=[],k=[],(b.qsa=_t.test(R.querySelectorAll))&&(r(function(t){L.appendChild(t).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||k.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+H+"-]").length||k.push("~="),t.querySelectorAll(":checked").length||k.push(":checked"),t.querySelectorAll("a#"+H+"+*").length||k.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=R.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&k.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&k.push(":enabled",":disabled"),L.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&k.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),k.push(",.*:")})),(b.matchesSelector=_t.test(B=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(t){b.disconnectedMatch=B.call(t,"*"),B.call(t,"[s!='']:x"),U.push("!=",ot)}),k=k.length&&new RegExp(k.join("|")),U=U.length&&new RegExp(U.join("|")),e=_t.test(L.compareDocumentPosition),F=e||_t.test(L.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},z=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!b.sortDetached&&e.compareDocumentPosition(t)===n?t===R||t.ownerDocument===j&&F(j,t)?-1:e===R||e.ownerDocument===j&&F(j,e)?1:D?tt(D,t)-tt(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!r||!o)return t===R?-1:e===R?1:r?-1:o?1:D?tt(D,t)-tt(D,e):0;if(r===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===j?-1:l[i]===j?1:0},R):R},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==R&&w(t),n=n.replace(ht,"='$1']"),b.matchesSelector&&N&&!W[n+" "]&&(!U||!U.test(n))&&(!k||!k.test(n)))try{var i=B.call(t,n);if(i||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,R,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==R&&w(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==R&&w(t);var n=E.attrHandle[e.toLowerCase()],i=n&&X.call(E.attrHandle,e.toLowerCase())?n(t,e,!N):void 0;return void 0!==i?i:b.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(Ct,bt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(P=!b.detectDuplicates,D=!b.sortStable&&t.slice(0),t.sort(z),P){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return D=null,t},T=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=T(e);return n},E=e.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,St),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,St),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=x(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,St).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Y[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&Y(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(at," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,h,c,d,p,g,f=o!==a?"nextSibling":"previousSibling",_=e.parentNode,m=s&&e.nodeName.toLowerCase(),v=!l&&!s,y=!1;if(_){if(o){for(;f;){for(d=e;d=d[f];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;g=f="only"===t&&!g&&"nextSibling"}return!0}if(g=[a?_.firstChild:_.lastChild],a&&v){for(d=_,c=d[H]||(d[H]={}),h=c[d.uniqueID]||(c[d.uniqueID]={}),u=h[t]||[],p=u[0]===G&&u[1],y=p&&u[2],d=p&&_.childNodes[p];d=++p&&d&&d[f]||(y=p=0)||g.pop();)if(1===d.nodeType&&++y&&d===e){h[t]=[G,p,y];break}}else if(v&&(d=e,c=d[H]||(d[H]={}),h=c[d.uniqueID]||(c[d.uniqueID]={}),u=h[t]||[],p=u[0]===G&&u[1],y=p),y===!1)for(;(d=++p&&d&&d[f]||(y=p=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++y||(v&&(c=d[H]||(d[H]={}),h=c[d.uniqueID]||(c[d.uniqueID]={}),h[t]=[G,y]),d!==e)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(t,n){var r,o=E.pseudos[t]||E.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[H]?o(n):o.length>1?(r=[t,t,"",n],E.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=I(t.replace(st,"$1"));return r[H]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(yt,St),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,St).toLowerCase(),function(e){var n;do if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[n<0?n+e:n]}),even:h(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},E.pseudos.nth=E.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[C]=s(C);for(C in{submit:!0,reset:!0})E.pseudos[C]=l(C);return d.prototype=E.filters=E.pseudos,E.setFilters=new d,x=e.tokenize=function(t,n){var i,r,o,a,s,l,u,h=K[t+" "];if(h)return n?0:h.slice(0);for(s=t,l=[],u=E.preFilter;s;){i&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length));for(a in E.filter)!(r=pt[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):K(t,l).slice(0)},I=e.compile=function(t,e){var n,i=[],r=[],o=W[t+" "];if(!o){for(e||(e=x(t)),n=e.length;n--;)o=y(e[n]),o[H]?i.push(o):r.push(o);o=W(t,S(r,i)),o.selector=t}return o},O=e.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,h=!i&&x(t=u.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&b.getById&&9===e.nodeType&&N&&E.relative[o[1].type]){if(e=(E.find.ID(a.matches[0].replace(yt,St),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!E.relative[s=a.type]);)if((l=E.find[s])&&(i=l(a.matches[0].replace(yt,St),vt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return J.apply(n,i),n;break}}return(u||I(t,h))(i,e,!N,n,!e||vt.test(t)&&c(e.parentNode)||e),n},b.sortStable=H.split("").sort(z).join("")===H,b.detectDuplicates=!!P,w(),b.sortDetached=r(function(t){return 1&t.compareDocumentPosition(R.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;if(!n)return t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);dt.find=mt,dt.expr=mt.selectors,dt.expr[":"]=dt.expr.pseudos,dt.uniqueSort=dt.unique=mt.uniqueSort,dt.text=mt.getText,dt.isXMLDoc=mt.isXML,dt.contains=mt.contains,dt.escapeSelector=mt.escape;var vt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&dt(t).is(n))break;i.push(t)}return i},yt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},St=dt.expr.match.needsContext,Ct=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,bt=/^.[^:#\[\.,]*$/;dt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?dt.find.matchesSelector(i,t)?[i]:[]:dt.find.matches(t,dt.grep(e,function(t){return 1===t.nodeType}))},dt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(dt(t).filter(function(){for(e=0;e<i;e++)if(dt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)dt.find(t,r[e],n);return i>1?dt.uniqueSort(n):n},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&St.test(t)?dt(t):t||[],!1).length}});var Et,Tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,At=dt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Et,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Tt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof dt?e[0]:e,dt.merge(this,dt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),Ct.test(i[1])&&dt.isPlainObject(e))for(i in e)dt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=Q.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):dt.isFunction(t)?void 0!==n.ready?n.ready(t):t(dt):dt.makeArray(t,this)};At.prototype=dt.fn,Et=dt(Q);var xt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({has:function(t){var e=dt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(dt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&dt(t);if(!St.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&dt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?dt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?rt.call(dt(t),this[0]):rt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(dt.uniqueSort(dt.merge(this.get(),dt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return vt(t,"parentNode")},parentsUntil:function(t,e,n){return vt(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return vt(t,"nextSibling")},prevAll:function(t){return vt(t,"previousSibling")},nextUntil:function(t,e,n){return vt(t,"nextSibling",n)},prevUntil:function(t,e,n){return vt(t,"previousSibling",n)},siblings:function(t){return yt((t.parentNode||{}).firstChild,t)},children:function(t){return yt(t.firstChild)},contents:function(t){return t.contentDocument||dt.merge([],t.childNodes)}},function(t,e){dt.fn[t]=function(n,i){var r=dt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=dt.filter(i,r)),this.length>1&&(It[t]||dt.uniqueSort(r),xt.test(t)&&r.reverse()),this.pushStack(r)}});var Ot=/\S+/g;dt.Callbacks=function(t){t="string"==typeof t?a(t):dt.extend({},t);var e,n,i,r,o=[],s=[],l=-1,u=function(){for(r=t.once,i=e=!0;s.length;l=-1)for(n=s.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},h={add:function(){return o&&(n&&!e&&(l=o.length-1,s.push(n)),function i(e){dt.each(e,function(e,n){dt.isFunction(n)?t.unique&&h.has(n)||o.push(n):n&&n.length&&"string"!==dt.type(n)&&i(n)})}(arguments),n&&!e&&u()),this},remove:function(){return dt.each(arguments,function(t,e){for(var n;(n=dt.inArray(e,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(t){return t?dt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},dt.extend({Deferred:function(e){var n=[["notify","progress",dt.Callbacks("memory"),dt.Callbacks("memory"),2],["resolve","done",dt.Callbacks("once memory"),dt.Callbacks("once memory"),0,"resolved"],["reject","fail",dt.Callbacks("once memory"),dt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(t){return r.then(null,t)},pipe:function(){var t=arguments;return dt.Deferred(function(e){dt.each(n,function(n,i){var r=dt.isFunction(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&dt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){function o(e,n,i,r){return function(){var u=this,h=arguments,c=function(){var t,c;if(!(e<a)){if(t=i.apply(u,h),t===n.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,dt.isFunction(c)?r?c.call(t,o(a,n,s,r),o(a,n,l,r)):(a++,c.call(t,o(a,n,s,r),o(a,n,l,r),o(a,n,s,n.notifyWith))):(i!==s&&(u=void 0,h=[t]),(r||n.resolveWith)(u,h))}},d=r?c:function(){try{c()}catch(t){dt.Deferred.exceptionHook&&dt.Deferred.exceptionHook(t,d.stackTrace),e+1>=a&&(i!==l&&(u=void 0,h=[t]),n.rejectWith(u,h))}};e?d():(dt.Deferred.getStackHook&&(d.stackTrace=dt.Deferred.getStackHook()),t.setTimeout(d))}}var a=0;return dt.Deferred(function(t){n[0][3].add(o(0,t,dt.isFunction(r)?r:s,t.notifyWith)),n[1][3].add(o(0,t,dt.isFunction(e)?e:s)),n[2][3].add(o(0,t,dt.isFunction(i)?i:l))}).promise()},promise:function(t){return null!=t?dt.extend(t,r):r}},o={};return dt.each(n,function(t,e){var a=e[2],s=e[5];r[e[1]]=a.add,s&&a.add(function(){i=s},n[3-t][2].disable,n[0][2].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=et.call(arguments),o=dt.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?et.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(u(t,o.done(a(n)).resolve,o.reject),"pending"===o.state()||dt.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)u(r[n],a(n),o.reject);return o.promise()}});var Mt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;dt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Mt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},dt.readyException=function(e){t.setTimeout(function(){throw e})};var Dt=dt.Deferred();dt.fn.ready=function(t){return Dt.then(t)["catch"](function(t){dt.readyException(t)}),this},dt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?dt.readyWait++:dt.ready(!0)},ready:function(t){(t===!0?--dt.readyWait:dt.isReady)||(dt.isReady=!0,t!==!0&&--dt.readyWait>0||Dt.resolveWith(Q,[dt]))}}),dt.ready.then=Dt.then,"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?t.setTimeout(dt.ready):(Q.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h));var Pt=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===dt.type(n)){r=!0;for(s in n)Pt(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,dt.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(dt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},wt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};c.uid=1,c.prototype={cache:function(t){var e=t[this.expando];return e||(e={},wt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[dt.camelCase(e)]=n;else for(i in e)r[dt.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][dt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){dt.isArray(e)?e=e.map(dt.camelCase):(e=dt.camelCase(e),e=e in i?[e]:e.match(Ot)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||dt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!dt.isEmptyObject(e)}};var Rt=new c,Lt=new c,Nt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kt=/[A-Z]/g;dt.extend({hasData:function(t){return Lt.hasData(t)||Rt.hasData(t)},data:function(t,e,n){return Lt.access(t,e,n)},removeData:function(t,e){Lt.remove(t,e)},_data:function(t,e,n){return Rt.access(t,e,n)},_removeData:function(t,e){Rt.remove(t,e)}}),dt.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Lt.get(o),1===o.nodeType&&!Rt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=dt.camelCase(i.slice(5)),d(o,i,r[i])));Rt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Lt.set(this,t)}):Pt(this,function(e){var n;if(o&&void 0===e){if(n=Lt.get(o,t),void 0!==n)return n;if(n=d(o,t),void 0!==n)return n}else this.each(function(){Lt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Lt.remove(this,t)})}}),dt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Rt.get(t,e),n&&(!i||dt.isArray(n)?i=Rt.access(t,e,dt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=dt.queue(t,e),i=n.length,r=n.shift(),o=dt._queueHooks(t,e),a=function(){dt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Rt.get(t,n)||Rt.access(t,n,{empty:dt.Callbacks("once memory").add(function(){Rt.remove(t,[e+"queue",n])})})}}),dt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?dt.queue(this[0],t):void 0===e?this:this.each(function(){var n=dt.queue(this,t,e);dt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&dt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){dt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=dt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=Rt.get(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bt=new RegExp("^(?:([+-])=|)("+Ut+")([a-z%]*)$","i"),Ft=["Top","Right","Bottom","Left"],Ht=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&dt.contains(t.ownerDocument,t)&&"none"===dt.css(t,"display")},jt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r},Gt={};dt.fn.extend({show:function(){return f(this,!0)},hide:function(){return f(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ht(this)?dt(this).show():dt(this).hide()})}});var Vt=/^(?:checkbox|radio)$/i,Yt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kt=/^$|\/(?:java|ecma)script/i,Wt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wt.optgroup=Wt.option,Wt.tbody=Wt.tfoot=Wt.colgroup=Wt.caption=Wt.thead,Wt.th=Wt.td;var zt=/<|&#?\w+;/;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ht.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ht.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue;
}();var Xt=Q.documentElement,qt=/^key/,Zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$t=/^([^.]*)(?:\.(.+)|)/;dt.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,h,c,d,p,g,f,_=Rt.get(t);if(_)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&dt.find.matchesSelector(Xt,r),n.guid||(n.guid=dt.guid++),(l=_.events)||(l=_.events={}),(a=_.handle)||(a=_.handle=function(e){return"undefined"!=typeof dt&&dt.event.triggered!==e.type?dt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ot)||[""],u=e.length;u--;)s=$t.exec(e[u])||[],p=f=s[1],g=(s[2]||"").split(".").sort(),p&&(c=dt.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=dt.event.special[p]||{},h=dt.extend({type:p,origType:f,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&dt.expr.match.needsContext.test(r),namespace:g.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,c.setup&&c.setup.call(t,i,g,a)!==!1||t.addEventListener&&t.addEventListener(p,a)),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),dt.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,h,c,d,p,g,f,_=Rt.hasData(t)&&Rt.get(t);if(_&&(l=_.events)){for(e=(e||"").match(Ot)||[""],u=e.length;u--;)if(s=$t.exec(e[u])||[],p=f=s[1],g=(s[2]||"").split(".").sort(),p){for(c=dt.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)h=d[o],!r&&f!==h.origType||n&&n.guid!==h.guid||s&&!s.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,c.remove&&c.remove.call(t,h));a&&!d.length&&(c.teardown&&c.teardown.call(t,g,_.handle)!==!1||dt.removeEvent(t,p,_.handle),delete l[p])}else for(p in l)dt.event.remove(t,p+e[u],n,i,!0);dt.isEmptyObject(l)&&Rt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=dt.event.fix(t),l=new Array(arguments.length),u=(Rt.get(this,"events")||{})[s.type]||[],h=dt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,s)!==!1){for(a=dt.event.handlers.call(this,s,u),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,i=((dt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),void 0!==i&&(s.result=i)===!1&&(s.preventDefault(),s.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(i=[],n=0;n<s;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?dt(r,this).index(l)>-1:dt.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},addProp:function(t,e){Object.defineProperty(dt.Event.prototype,t,{enumerable:!0,configurable:!0,get:dt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[dt.expando]?t:new dt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&dt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return dt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},dt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},dt.Event=function(t,e){return this instanceof dt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?y:S,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&dt.extend(this,e),this.timeStamp=t&&t.timeStamp||dt.now(),void(this[dt.expando]=!0)):new dt.Event(t,e)},dt.Event.prototype={constructor:dt.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=y,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=y,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=y,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},dt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&qt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Zt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},dt.event.addProp),dt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){dt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||dt.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),dt.fn.extend({on:function(t,e,n,i){return b(this,t,e,n,i)},one:function(t,e,n,i){return b(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,dt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=S),this.each(function(){dt.event.remove(this,t,n,e)})}});var Jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Qt=/<script|<style|<link/i,te=/checked\s*(?:[^=]|=\s*.checked.)/i,ee=/^true\/(.*)/,ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;dt.extend({htmlPrefilter:function(t){return t.replace(Jt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=dt.contains(t.ownerDocument,t);if(!(ht.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||dt.isXMLDoc(t)))for(a=_(s),o=_(t),i=0,r=o.length;i<r;i++)I(o[i],a[i]);if(e)if(n)for(o=o||_(t),a=a||_(s),i=0,r=o.length;i<r;i++)x(o[i],a[i]);else x(t,s);return a=_(s,"script"),a.length>0&&m(a,!l&&_(t,"script")),s},cleanData:function(t){for(var e,n,i,r=dt.event.special,o=0;void 0!==(n=t[o]);o++)if(wt(n)){if(e=n[Rt.expando]){if(e.events)for(i in e.events)r[i]?dt.event.remove(n,i):dt.removeEvent(n,i,e.handle);n[Rt.expando]=void 0}n[Lt.expando]&&(n[Lt.expando]=void 0)}}}),dt.fn.extend({detach:function(t){return M(this,t,!0)},remove:function(t){return M(this,t)},text:function(t){return Pt(this,function(t){return void 0===t?dt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return O(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=E(this,t);e.appendChild(t)}})},prepend:function(){return O(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=E(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(dt.cleanData(_(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return dt.clone(this,t,e)})},html:function(t){return Pt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Qt.test(t)&&!Wt[(Yt.exec(t)||["",""])[1].toLowerCase()]){t=dt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(dt.cleanData(_(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return O(this,arguments,function(e){var n=this.parentNode;dt.inArray(this,t)<0&&(dt.cleanData(_(this)),n&&n.replaceChild(e,this))},t)}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){dt.fn[t]=function(t){for(var n,i=[],r=dt(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),dt(r[a])[e](n),it.apply(i,n.get());return this.pushStack(i)}});var ie=/^margin/,re=new RegExp("^("+Ut+")(?!px)[a-z%]+$","i"),oe=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)};!function(){function e(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Xt.appendChild(a);var e=t.getComputedStyle(s);n="1%"!==e.top,o="2px"===e.marginLeft,i="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Xt.removeChild(a),s=null}}var n,i,r,o,a=Q.createElement("div"),s=Q.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ht.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),dt.extend(ht,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),o}}))}();var ae=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},le={letterSpacing:"0",fontWeight:"400"},ue=["Webkit","Moz","ms"],he=Q.createElement("div").style;dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=D(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=dt.camelCase(e),l=t.style;return e=dt.cssProps[s]||(dt.cssProps[s]=w(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e]:(o=typeof n,"string"===o&&(r=Bt.exec(n))&&r[1]&&(n=p(t,e,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(dt.cssNumber[s]?"":"px")),ht.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n)),void 0)}},css:function(t,e,n,i){var r,o,a,s=dt.camelCase(e);return e=dt.cssProps[s]||(dt.cssProps[s]=w(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=D(t,e,i)),"normal"===r&&e in le&&(r=le[e]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),dt.each(["height","width"],function(t,e){dt.cssHooks[e]={get:function(t,n,i){if(n)return!ae.test(dt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?N(t,e,i):jt(t,se,function(){return N(t,e,i)})},set:function(t,n,i){var r,o=i&&oe(t),a=i&&L(t,e,i,"border-box"===dt.css(t,"boxSizing",!1,o),o);return a&&(r=Bt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=dt.css(t,e)),R(t,n,a)}}}),dt.cssHooks.marginLeft=P(ht.reliableMarginLeft,function(t,e){if(e)return(parseFloat(D(t,"marginLeft"))||t.getBoundingClientRect().left-jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),dt.each({margin:"",padding:"",border:"Width"},function(t,e){dt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Ft[i]+e]=o[i]||o[i-2]||o[0];return r}},ie.test(t)||(dt.cssHooks[t+e].set=R)}),dt.fn.extend({css:function(t,e){return Pt(this,function(t,e,n){var i,r,o={},a=0;if(dt.isArray(e)){for(i=oe(t),r=e.length;a<r;a++)o[e[a]]=dt.css(t,e[a],!1,i);return o}return void 0!==n?dt.style(t,e,n):dt.css(t,e)},t,e,arguments.length>1)}}),dt.Tween=k,k.prototype={constructor:k,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||dt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(dt.cssNumber[n]?"":"px")},cur:function(){var t=k.propHooks[this.prop];return t&&t.get?t.get(this):k.propHooks._default.get(this)},run:function(t){var e,n=k.propHooks[this.prop];return this.options.duration?this.pos=e=dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=dt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){dt.fx.step[t.prop]?dt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[dt.cssProps[t.prop]]&&!dt.cssHooks[t.prop]?t.elem[t.prop]=t.now:dt.style(t.elem,t.prop,t.now+t.unit)}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},dt.fx=k.prototype.init,dt.fx.step={};var ce,de,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;dt.Animation=dt.extend(V,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return p(n.elem,t,Bt.exec(e),n),n}]},tweener:function(t,e){dt.isFunction(t)?(e=t,t=["*"]):t=t.match(Ot);for(var n,i=0,r=t.length;i<r;i++)n=t[i],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(e)},prefilters:[j],prefilter:function(t,e){e?V.prefilters.unshift(t):V.prefilters.push(t)}}),dt.speed=function(t,e,n){var i=t&&"object"==typeof t?dt.extend({},t):{complete:n||!n&&e||dt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!dt.isFunction(e)&&e};return dt.fx.off||Q.hidden?i.duration=0:i.duration="number"==typeof i.duration?i.duration:i.duration in dt.fx.speeds?dt.fx.speeds[i.duration]:dt.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){dt.isFunction(i.old)&&i.old.call(this),i.queue&&dt.dequeue(this,i.queue)},i},dt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ht).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=dt.isEmptyObject(t),o=dt.speed(e,n,i),a=function(){var e=V(this,dt.extend({},t),o);(r||Rt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=dt.timers,a=Rt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ge.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||dt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Rt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=dt.timers,a=i?i.length:0;for(n.finish=!0,dt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),dt.each(["toggle","show","hide"],function(t,e){var n=dt.fn[e];dt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(F(e,!0),t,i,r)}}),dt.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){dt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),dt.timers=[],dt.fx.tick=function(){var t,e=0,n=dt.timers;for(ce=dt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||dt.fx.stop(),ce=void 0},dt.fx.timer=function(t){dt.timers.push(t),t()?dt.fx.start():dt.timers.pop()},dt.fx.interval=13,dt.fx.start=function(){de||(de=t.requestAnimationFrame?t.requestAnimationFrame(U):t.setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){t.cancelAnimationFrame?t.cancelAnimationFrame(de):t.clearInterval(de),de=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fn.delay=function(e,n){return e=dt.fx?dt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),n=e.appendChild(Q.createElement("option"));t.type="checkbox",ht.checkOn=""!==t.value,ht.optSelected=n.selected,t=Q.createElement("input"),t.value="t",t.type="radio",ht.radioValue="t"===t.value}();var fe,_e=dt.expr.attrHandle;dt.fn.extend({attr:function(t,e){return Pt(this,dt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){dt.removeAttr(this,t)})}}),dt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?dt.prop(t,e,n):(1===o&&dt.isXMLDoc(t)||(r=dt.attrHooks[e.toLowerCase()]||(dt.expr.match.bool.test(e)?fe:void 0)),void 0!==n?null===n?void dt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=dt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!ht.radioValue&&"radio"===e&&dt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Ot);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),fe={set:function(t,e,n){return e===!1?dt.removeAttr(t,n):t.setAttribute(n,n),n}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_e[e]||dt.find.attr;_e[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=_e[a],_e[a]=r,r=null!=n(t,e,i)?a:null,_e[a]=o),r}});var me=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;dt.fn.extend({prop:function(t,e){return Pt(this,dt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[dt.propFix[t]||t]})}}),dt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&dt.isXMLDoc(t)||(e=dt.propFix[e]||e,r=dt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=dt.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ht.optSelected||(dt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this});var ye=/[\t\r\n\f]/g;dt.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).addClass(t.call(this,e,Y(this)))});if("string"==typeof t&&t)for(e=t.match(Ot)||[];n=this[l++];)if(r=Y(n),i=1===n.nodeType&&(" "+r+" ").replace(ye," ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=dt.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ot)||[];n=this[l++];)if(r=Y(n),i=1===n.nodeType&&(" "+r+" ").replace(ye," ")){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=dt.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):dt.isFunction(t)?this.each(function(n){dt(this).toggleClass(t.call(this,n,Y(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=dt(this),o=t.match(Ot)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=Y(this),e&&Rt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Rt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Y(n)+" ").replace(ye," ").indexOf(e)>-1)return!0;return!1}});var Se=/\r/g,Ce=/[\x20\t\r\n\f]+/g;dt.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=dt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,dt(this).val()):t,null==r?r="":"number"==typeof r?r+="":dt.isArray(r)&&(r=dt.map(r,function(t){return null==t?"":t+""})),e=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=dt.valHooks[r.type]||dt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Se,""):null==n?"":n)}}}),dt.extend({valHooks:{option:{get:function(t){var e=dt.find.attr(t,"value");return null!=e?e:dt.trim(dt.text(t)).replace(Ce," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],s=o?r+1:i.length,l=r<0?s:o?r:0;l<s;l++)if(n=i[l],(n.selected||l===r)&&!n.disabled&&(!n.parentNode.disabled||!dt.nodeName(n.parentNode,"optgroup"))){if(e=dt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=dt.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=dt.inArray(dt.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(t,e){if(dt.isArray(e))return t.checked=dt.inArray(dt(t).val(),e)>-1}},ht.checkOn||(dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var be=/^(?:focusinfocus|focusoutblur)$/;dt.extend(dt.event,{trigger:function(e,n,i,r){var o,a,s,l,u,h,c,d=[i||Q],p=st.call(e,"type")?e.type:e,g=st.call(e,"namespace")?e.namespace.split("."):[];if(a=s=i=i||Q,3!==i.nodeType&&8!==i.nodeType&&!be.test(p+dt.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),u=p.indexOf(":")<0&&"on"+p,e=e[dt.expando]?e:new dt.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:dt.makeArray(n,[e]),c=dt.event.special[p]||{},r||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!r&&!c.noBubble&&!dt.isWindow(i)){for(l=c.delegateType||p,be.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||Q)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:c.bindType||p,h=(Rt.get(a,"events")||{})[e.type]&&Rt.get(a,"handle"),h&&h.apply(a,n),h=u&&a[u],h&&h.apply&&wt(a)&&(e.result=h.apply(a,n),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||c._default&&c._default.apply(d.pop(),n)!==!1||!wt(i)||u&&dt.isFunction(i[p])&&!dt.isWindow(i)&&(s=i[u],s&&(i[u]=null),dt.event.triggered=p,i[p](),dt.event.triggered=void 0,s&&(i[u]=s)),e.result}},simulate:function(t,e,n){var i=dt.extend(new dt.Event,n,{type:t,isSimulated:!0});dt.event.trigger(i,null,e)}}),dt.fn.extend({trigger:function(t,e){return this.each(function(){dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return dt.event.trigger(t,e,n,!0)}}),dt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){dt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ht.focusin="onfocusin"in t,ht.focusin||dt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){dt.event.simulate(e,t.target,dt.event.fix(t))};dt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Rt.access(i,e);r||i.addEventListener(t,n,!0),Rt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Rt.access(i,e)-1;r?Rt.access(i,e,r):(i.removeEventListener(t,n,!0),Rt.remove(i,e))}}});var Ee=t.location,Te=dt.now(),Ae=/\?/;dt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+e),n};var xe=/\[\]$/,Ie=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;dt.param=function(t,e){var n,i=[],r=function(t,e){var n=dt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(dt.isArray(t)||t.jquery&&!dt.isPlainObject(t))dt.each(t,function(){r(this.name,this.value)});else for(n in t)K(n,t[n],e,r);return i.join("&")},dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=dt.prop(this,"elements");return t?dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!dt(this).is(":disabled")&&Me.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!Vt.test(t))}).map(function(t,e){var n=dt(this).val();return null==n?null:dt.isArray(n)?dt.map(n,function(t){return{name:e.name,value:t.replace(Ie,"\r\n")}}):{name:e.name,value:n.replace(Ie,"\r\n")}}).get()}});var De=/%20/g,Pe=/#.*$/,we=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ne=/^(?:GET|HEAD)$/,ke=/^\/\//,Ue={},Be={},Fe="*/".concat("*"),He=Q.createElement("a");He.href=Ee.href,dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:Le.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?X(X(t,dt.ajaxSettings),e):X(dt.ajaxSettings,t)},ajaxPrefilter:W(Ue),ajaxTransport:W(Be),ajax:function(e,n){function i(e,n,i,s){var u,d,p,S,C,b=n;h||(h=!0,l&&t.clearTimeout(l),r=void 0,a=s||"",E.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(S=q(g,E,i)),S=Z(g,S,E,u),u?(g.ifModified&&(C=E.getResponseHeader("Last-Modified"),C&&(dt.lastModified[o]=C),C=E.getResponseHeader("etag"),C&&(dt.etag[o]=C)),204===e||"HEAD"===g.type?b="nocontent":304===e?b="notmodified":(b=S.state,d=S.data,p=S.error,u=!p)):(p=b,!e&&b||(b="error",e<0&&(e=0))),E.status=e,E.statusText=(n||b)+"",u?m.resolveWith(f,[d,b,E]):m.rejectWith(f,[E,b,p]),E.statusCode(y),y=void 0,c&&_.trigger(u?"ajaxSuccess":"ajaxError",[E,g,u?d:p]),v.fireWith(f,[E,b]),c&&(_.trigger("ajaxComplete",[E,g]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,a,s,l,u,h,c,d,p,g=dt.ajaxSetup({},n),f=g.context||g,_=g.context&&(f.nodeType||f.jquery)?dt(f):dt.event,m=dt.Deferred(),v=dt.Callbacks("once memory"),y=g.statusCode||{},S={},C={},b="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(h){if(!s)for(s={};e=Re.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return h?a:null},setRequestHeader:function(t,e){return null==h&&(t=C[t.toLowerCase()]=C[t.toLowerCase()]||t,S[t]=e),this},overrideMimeType:function(t){return null==h&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||b;return r&&r.abort(e),i(0,e),this}};if(m.promise(E),g.url=((e||g.url||Ee.href)+"").replace(ke,Ee.protocol+"//"),g.type=n.method||n.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Ot)||[""],null==g.crossDomain){u=Q.createElement("a");try{u.href=g.url,u.href=u.href,g.crossDomain=He.protocol+"//"+He.host!=u.protocol+"//"+u.host}catch(T){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=dt.param(g.data,g.traditional)),z(Ue,g,n,E),h)return E;c=dt.event&&g.global,c&&0===dt.active++&&dt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ne.test(g.type),o=g.url.replace(Pe,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(De,"+")):(p=g.url.slice(o.length),g.data&&(o+=(Ae.test(o)?"&":"?")+g.data,delete g.data),g.cache===!1&&(o=o.replace(we,""),p=(Ae.test(o)?"&":"?")+"_="+Te++ +p),g.url=o+p),g.ifModified&&(dt.lastModified[o]&&E.setRequestHeader("If-Modified-Since",dt.lastModified[o]),dt.etag[o]&&E.setRequestHeader("If-None-Match",dt.etag[o])),(g.data&&g.hasContent&&g.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Fe+"; q=0.01":""):g.accepts["*"]);for(d in g.headers)E.setRequestHeader(d,g.headers[d]);if(g.beforeSend&&(g.beforeSend.call(f,E,g)===!1||h))return E.abort();if(b="abort",v.add(g.complete),E.done(g.success),E.fail(g.error),r=z(Be,g,n,E)){if(E.readyState=1,c&&_.trigger("ajaxSend",[E,g]),h)return E;g.async&&g.timeout>0&&(l=t.setTimeout(function(){E.abort("timeout")},g.timeout));try{h=!1,r.send(S,i)}catch(T){if(h)throw T;i(-1,T)}}else i(-1,"No Transport");return E},getJSON:function(t,e,n){return dt.get(t,e,n,"json")},getScript:function(t,e){return dt.get(t,void 0,e,"script")}}),dt.each(["get","post"],function(t,e){dt[e]=function(t,n,i,r){return dt.isFunction(n)&&(r=r||i,i=n,n=void 0),dt.ajax(dt.extend({url:t,type:e,dataType:r,data:n,success:i},dt.isPlainObject(t)&&t))}}),dt._evalUrl=function(t){return dt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},dt.fn.extend({wrapAll:function(t){var e;return this[0]&&(dt.isFunction(t)&&(t=t.call(this[0])),e=dt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return dt.isFunction(t)?this.each(function(e){dt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=dt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=dt.isFunction(t);return this.each(function(n){dt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){dt(this).replaceWith(this.childNodes)}),this}}),dt.expr.pseudos.hidden=function(t){return!dt.expr.pseudos.visible(t)},dt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},dt.ajaxSettings.xhr=function(){
try{return new t.XMLHttpRequest}catch(e){}};var je={0:200,1223:204},Ge=dt.ajaxSettings.xhr();ht.cors=!!Ge&&"withCredentials"in Ge,ht.ajax=Ge=!!Ge,dt.ajaxTransport(function(e){var n,i;if(ht.cors||Ge&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(je[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),dt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return dt.globalEval(t),t}}}),dt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),dt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=dt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ve=[],Ye=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ve.pop()||dt.expando+"_"+Te++;return this[t]=!0,t}}),dt.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(Ye.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=dt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ye,"$1"+r):e.jsonp!==!1&&(e.url+=(Ae.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||dt.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===o?dt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ve.push(r)),a&&dt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),ht.createHTMLDocument=function(){var t=Q.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),dt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,o;return e||(ht.createHTMLDocument?(e=Q.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=Q.location.href,e.head.appendChild(i)):e=Q),r=Ct.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=v([t],e,o),o&&o.length&&dt(o).remove(),dt.merge([],r.childNodes))},dt.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=dt.trim(t.slice(s)),t=t.slice(0,s)),dt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&dt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?dt("<div>").append(dt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){dt.fn[e]=function(t){return this.on(e,t)}}),dt.expr.pseudos.animated=function(t){return dt.grep(dt.timers,function(e){return t===e.elem}).length},dt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,h=dt.css(t,"position"),c=dt(t),d={};"static"===h&&(t.style.position="relative"),s=c.offset(),o=dt.css(t,"top"),l=dt.css(t,"left"),u=("absolute"===h||"fixed"===h)&&(o+l).indexOf("auto")>-1,u?(i=c.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),dt.isFunction(e)&&(e=e.call(t,n,dt.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):c.css(d)}},dt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){dt.offset.setOffset(this,t,e)});var e,n,i,r,o=this[0];if(o)return o.getClientRects().length?(i=o.getBoundingClientRect(),i.width||i.height?(r=o.ownerDocument,n=$(r),e=r.documentElement,{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):{top:0,left:0}},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===dt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),dt.nodeName(t[0],"html")||(i=t.offset()),i={top:i.top+dt.css(t[0],"borderTopWidth",!0),left:i.left+dt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-dt.css(n,"marginTop",!0),left:e.left-i.left-dt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===dt.css(t,"position");)t=t.offsetParent;return t||Xt})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;dt.fn[t]=function(i){return Pt(this,function(t,i,r){var o=$(t);return void 0===r?o?o[e]:t[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r)},t,i,arguments.length)}}),dt.each(["top","left"],function(t,e){dt.cssHooks[e]=P(ht.pixelPosition,function(t,n){if(n)return n=D(t,e),re.test(n)?dt(t).position()[e]+"px":n})}),dt.each({Height:"height",Width:"width"},function(t,e){dt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){dt.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||o===!0?"margin":"border");return Pt(this,function(e,n,r){var o;return dt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?dt.css(e,n,s):dt.style(e,n,r,s)},e,a?r:void 0,a)}})}),dt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),dt.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return dt});var Ke=t.jQuery,We=t.$;return dt.noConflict=function(e){return t.$===dt&&(t.$=We),e&&t.jQuery===dt&&(t.jQuery=Ke),dt},e||(t.jQuery=t.$=dt),dt}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/version",["jquery"],t):t(jQuery)}(function(t){return t.ui=t.ui||{},t.ui.version="1.12.0"}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/widget",["jquery","./version"],t):t(jQuery)}(function(t){var e=0,n=Array.prototype.slice;return t.cleanData=function(e){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=t._data(r,"events"),i&&i.remove&&t(r).triggerHandler("remove")}catch(a){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var r,o,a,s={},l=e.split(".")[0];e=e.split(".")[1];var u=l+"-"+e;return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},r=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(s[e]=i)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},s,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,r,o=n.call(arguments,1),a=0,s=o.length;a<s;a++)for(i in o[a])r=o[a][i],o[a].hasOwnProperty(i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=n.call(arguments,1),l=this;return a?this.each(function(){var n,i=t.data(this,r);return"instance"===o?(l=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,r);e?(e.option(o||{}),e._init&&e._init()):t.data(this,r,new i(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function n(n,o){var a,s;for(s=0;s<n.length;s++)a=r.classesElementLookup[n[s]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),r.classesElementLookup[n[s]]=a,i.push(n[s]),o&&e.classes[n[s]]&&i.push(e.classes[n[s]])}var i=[],r=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,o={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){if(e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?r.on(u,h,s):n.on(u,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}}),t.widget}),define("ojs/ojknockout",["ojs/ojcore","jquery","knockout","jqueryui-amd/widget"],function(t,e,n){function i(){this.Init()}function r(t,e){var n="value",i={};return i[n]=e[n],i}function o(t,e,n){var i={},r=n.optionMetadata;if(r){var o="shouldWrite"===r.writeback;if(o){var a=n.option;i[a]=n.value,r.readOnly&&(t.readOnlyProperties[a]=!0)}}return i}function a(t,e,n){return"pieCenter"===t&&e.template&&(e.renderer=I(n,e.template)),{pieCenter:e}}function s(t,e){return function(i){var r,o;return r=i.parentElement,o=t.createChildContext(i.data,null,function(t){t.$optionContext=i}),n.renderTemplate(e,o,null,r),null}}function l(t,e,n){if("optionTemplate"===t&&null!==e){var i=String(e),r=s(n,i);return{optionRenderer:r}}return null}function u(t,e){this.Init(t,e)}function h(){function e(t,e,n){var r=t[n];e[n]=function(){var e=r?r.apply(t,arguments):null,o=i[n];if(null!=o){var a=arguments;o.forEach(function(n){var i=Array.prototype.slice.call(a);i.push(e,t),e=n.apply(null,i)})}return e}}this.install=function(){var i=n.bindingProvider,r="instance",o=i[r],a="getBindingAccessors";if(!o[a])return t.Logger.error("JET's Knockout bindings are not compatible with the current binding provider since it does not implement getBindingAccessors()"),this;var s=i[r]={},l=[];return l.push(a,"nodeHasBindings","getBindings","preprocessNode"),l.forEach(function(t){e(o,s,t)}),this},this.addPostprocessor=function(t){var e=Object.keys(t);e.forEach(function(e){i[e]=i[e]||[],i[e].push(t[e])})};var i={}}function c(t,e,n,i){if(null==n)return null;var r=d(n);return null!=r&&(n=p(t,r,i,e,n)),n}function d(e){for(var n=Object.keys(e),i=-0;i<n.length;i++){var r=n[i];if(t.ComponentBinding._isNameRegistered(r))return r}return null}function p(e,n,i,r,o){var a=_(e,n,i,r),s=a.attrList;if(null==s)return o;var l={};return m(s,function(t,e){l[t]=e}),o=t.CollectionUtils.copyInto({},o),o[n]=g(r,l,a.bindingExpr),o}function g(e,n,i){var r=function(){var i={};return Object.keys(n).forEach(function(r){var o=n[r],a=t.ComponentBinding.__CreateEvaluator(o).bind(null,e);Object.defineProperty(i,r,{get:a,enumerable:!0})}),Object.defineProperty(i,t.ComponentBinding._OPTION_MAP,{value:n}),i};return r.toString=function(){return i},r}function f(t,e,n){var i=e.getBindingsString;if(i)return i.call(e,t,n);switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:var r=t.nodeValue.match(/^\s*ko(?:\s+([\s\S]+))?\s*$/);return r?r[1]:null}return null}function _(t,e,i,r){var o=null,a=f(t,i,r),s=n.jsonExpressionRewriting.parseObjectLiteral(a),l=null;return m(s,function(t,n){return t===e&&(l=n,!0)}),null!=l&&0===l.indexOf("{")&&(o=n.jsonExpressionRewriting.parseObjectLiteral(l)),{attrList:o,bindingExpr:l}}function m(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.key,o=i.value;if(null!=r&&null!=o&&e(r.trim(),o.trim()))break}}function v(t,i){return function(r){var o,a,s;return o=r.parentElement,a=t.createChildContext(r.data,null,function(t){t.$key=r.key,t.$metadata=r.metadata,t.$headerContext=r}),s=S(i,r),n.renderTemplate(s,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},o),null}}function y(t,i){return function(r){var o,a,s;return o=r.parentElement,a=t.createChildContext(r.data,null,function(t){t.$keys=r.keys,t.$metadata=r.metadata,t.$cellContext=r,t.$cell=r.cell}),s=S(i,r),n.renderTemplate(s,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},o),null}}function S(t,e){return"function"==typeof t?t(e):t}function C(t,i){return function(r){var o=t.createChildContext(r.data);return n.renderTemplate(i,o,{afterRender:function(t){e(t)._ojDetectCleanData()}},r.parentElement),null}}function b(t,e,n){return"template"===t?{_templateFunction:C(n,e)}:null}function E(t,i){return function(r){var o=t.createChildContext(r.data);return n.renderTemplate(i,o,{afterRender:function(t){e(t)._ojDetectCleanData()}},r.parentElement),null}}function T(t,e,n){if("areaLayers"===t){for(var i=0;i<e.length;i++){var r=e[i].areaDataLayer;if(r){var o=r.template;null!=o&&(r._templateRenderer=E(n,o))}}return{areaLayers:e}}if("pointDataLayers"===t){for(var i=0;i<e.length;i++){var o=e[i].template;null!=o&&(e[i]._templateRenderer=E(n,o))}return{pointDataLayers:e}}return null}function A(t,i){return function(r){var o=document.createElement("div");o.style.display="none";var a=t.createChildContext(r);n.renderTemplate(i,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},o);var s=o.children[0];return s?(o.removeChild(s),e(o).remove(),s):null}}function x(t,e,n){return"tooltip"===t&&e.template&&(e.renderer=A(n,e.template)),{tooltip:e}}function I(t,i){return function(r){var o=document.createElement("div");o.style.display="none";var a=t.createChildContext(r);n.renderTemplate(i,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},o);var s=o.children[0];return s?(o.removeChild(s),e(o).remove(),s):null}}function O(t,e,n){return"center"===t&&e.template&&(e.renderer=I(n,e.template)),{center:e}}function M(t,i,r){var o={};return function(i,r){o=function(o){var a=null,s=null;if("header"==r)a=t.createChildContext(null,null,function(t){t.$columnIndex=o.columnIndex,t.$headerContext=o.headerContext,t.$data=o.data}),s=o.headerContext.parentElement;else if("cell"==r){var l=o.row;a=t.createChildContext(l,null,function(t){t.$columnIndex=o.columnIndex,t.$cellContext=o.cellContext}),s=o.cellContext.parentElement}"footer"==r&&(a=t.createChildContext(null,null,function(t){t.$columnIndex=o.columnIndex,t.$footerContext=o.footerContext}),s=o.footerContext.parentElement),n.renderTemplate(i,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},s,"replaceNode")}}(r,i),o}function D(t,i){return function(r){var o=r.row,a=t.createChildContext(o,null,function(t){t.$rowContext=r.rowContext});n.renderTemplate(i,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},r.rowContext.parentElement,"replaceNode")}}function P(t,i){return function(r){var o,a;return o=r.parentElement,a=t.createChildContext(r.data,null,function(t){t.$itemContext=r}),n.renderTemplate(i,a,{afterRender:function(t){e(t)._ojDetectCleanData()}},o,"replaceNode"),null}}function w(t,e,n){if("item"==t){var i=e.template;return null!=i&&(e.renderer=P(n,i)),{item:e}}return null}t.Object.createSubclass(i,t.Object,"ComponentBinding.GlobalChangeQueue"),i.prototype.Init=function(){i.superclass.Init.call(this),this._trackers=[],this._queue=[]},i.prototype.registerComponentChanges=function(e){this._trackers.indexOf(e)===-1&&(this._trackers.push(e),this._delayTimer||(this._delayTimer=setTimeout(t.Object.createCallback(this,this._deliverChangesImpl),1)))},i.prototype.deliverChanges=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._deliverChangesImpl()},i.prototype._deliverChangesImpl=function(){var t;this._delayTimer=null;var e=this._trackers;for(this._trackers=[],t=0;t<e.length;t++){var n=e[t];this._queue.push({tracker:n,changes:n.flushChanges()})}for(;this._queue.length>0;){var i=this._queue.shift();i.tracker.applyChanges(i.changes)}},t.ComponentBinding=function(t,e){this.Init(t,e)},t.Object.createSubclass(t.ComponentBinding,t.Object,"oj.ComponentBinding"),t.ComponentBinding.create=function(e,i){if(null==e)throw"Binding name is required!";var r,o=new t.ComponentBinding(e,i),a=(o._getBindingOptions().componentName,n.bindingHandlers),s=Array.isArray(e)?e:[e];for(r=0;r<s.length;r++){var l=s[r];t.ComponentBinding._REGISTERED_NAMES.push(l),a[l]=o}return o},t.ComponentBinding.getDefaultInstance=function(){return t.ComponentBinding._INSTANCE},t.ComponentBinding.prototype.setupManagedAttributes=function(t){var e=t["for"];e=null==e?"@global":e;var n=this._managedAttrOptions[e]||[];n.push(t),this._managedAttrOptions[e]=n},t.ComponentBinding.deliverChanges=function(){t.ComponentBinding._changeQueue.deliverChanges()},t.ComponentBinding.prototype.Init=function(e,n){t.ComponentBinding.superclass.Init.call(this),"string"==typeof n&&(n={componentName:n}),this._bindingOptions=n||{},this._bindingNames=Array.isArray(e)?e:[e],this.init=this._init.bind(this),this.update=this._update.bind(this),this._managedAttrOptions={}},t.ComponentBinding.prototype._getBindingOptions=function(){return this._bindingOptions},t.ComponentBinding.prototype._init=function(t,e,i,r,o){return n.applyBindingsToDescendants(o,t),{controlsDescendantBindings:!0}},t.ComponentBinding.prototype._update=function(i,r,o,a,s){function l(e){p.forEach(function(t){t.dispose()}),p=[],e&&c&&(c("destroy"),c=null),d&&(d.dispose(),d=null),f.off(t.ComponentBinding._HANDLER_NAMESPACE)}function h(e,n,r){if(null!=e){var a=f[e];if("function"!=typeof a)return void t.Logger.error("Component %s is not found",e);a=a.bind(f),d=new u(a,t.ComponentBinding._changeQueue);var l=function(){return r},h=Object.keys(r).filter(function(t){return!(null==t||t===n)}),g={component:a,changeTracker:d,componentName:e,specifiedOptions:h,computeds:p,valueAccessor:l,allBindingsAccessor:o,bindingContext:s,destroyCallback:function(){c=null},readOnlyProperties:{}};c=this._initComponent(i,g)}}var c,d,p=[],g=0,f=e(i);n.ignoreDependencies(function(){n.computed(function(){var e=n.utils.unwrapObservable(r());"object"!=typeof e&&t.Logger.error("ojComponent binding should evaluate to an object");var i,o=this._bindingOptions.componentName,a=!1;if(null==o&null!=e){for(var s=[t.ComponentBinding._COMPONENT_OPTION,"role"],u=0;!a&&u<s.length;u++)i=s[u],i in e&&(a=!0,o=e[i]);a||t.Logger.error("component attribute is required for the ojComponent binding"),o=n.utils.unwrapObservable(o)}0==g?g=1:n.ignoreDependencies(l,this,[!0]),n.ignoreDependencies(h,this,[o,i,e])},this,{disposeWhenNodeIsRemoved:i})},this),n.utils.domNodeDisposal.addDisposeCallback(i,l.bind(this,!1))},t.ComponentBinding.prototype._initComponent=function(i,r){var o=!1,a=0,s={},l=e(i),u=r.component,h=r.componentName,c=this,d="_ojDestroy",p=function(e){if(e.target&&e.target==i){r.destroyCallback();var n=c._bindingOptions.beforeDestroy;n&&n(i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext),t.ComponentBinding._deliverCreateDestroyEventToManagedProps(!1,s,i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext),o=!0,r.changeTracker.dispose(),i.removeEventListener(d,p)}};i.addEventListener(d,p);var g=t.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,r.specifiedOptions,h),f=t.ComponentBinding.getDefaultInstance();if(this!==f){var _=f._getManagedAttributes(r.specifiedOptions,h);t.CollectionUtils.copyInto(_,g),g=_}for(var m={},v=function(){var e=this._property,n=t.ComponentBinding._toJS(r.valueAccessor()[e]);if(0===a){var l=g[e];if(null!=l){s[e]=l;var h=l.init;if(null!=h){var c=h(e,n,i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext)||{};t.CollectionUtils.copyInto(m,c)}}else m[e]=n}else if(!o)if(null!=g[e]){var d=g[e].update;if(null!=d)for(var p=d(e,n,i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext)||{},f=Object.keys(p),_=0;_<f.length;_++){var v=f[_];r.changeTracker.addChange(v,p[v])}}else r.readOnlyProperties[e]||r.changeTracker.addChange(e,n)},y=0;y<r.specifiedOptions.length;y++)r.computeds.push(n.computed(v,{_property:r.specifiedOptions[y]}));a=1,t.ComponentBinding._registerWritebacks(l,r);var S=t.ComponentBinding.__removeDotNotationOptions(m);u(m),Object.keys(S).forEach(function(t){u("option",t,S[t])});var C=this._bindingOptions.afterCreate;return C&&C(i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext),t.ComponentBinding._deliverCreateDestroyEventToManagedProps(!0,s,i,u,r.valueAccessor,r.allBindingsAccessor,r.bindingContext),m=null,u},t.ComponentBinding.__CreateEvaluator=function(t){return new Function("$context","with($context){with($data||{}){return "+t+";}}")},t.ComponentBinding.prototype._getManagedAttributes=function(e,n){return t.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,e,n)},t.ComponentBinding._resolveManagedAttributes=function(t,n,i){var r={},o=[],a="attributes",s=function(e,n){var i=t[e];if(null!=i)for(var r=i.length-1;r>=0;r--){var l=i[r];if(null!=l[a]&&o.push(l),n){var u=l.use;if(null!=u){u=Array.isArray(u)?u:[u];for(var h=0;h<u.length;h++)s(u[h],!0)}}}};s(i,!0);var l="oj",u=e[l][i];if(null!=u)for(var h=Object.getPrototypeOf(u.prototype);null!=h&&l===h.namespace;)s(h.widgetName,!0),h=Object.getPrototypeOf(h);if(s("@global",!1),o.length>0)for(var c=0;c<n.length;c++)for(var d=n[c],p=0;p<o.length;p++){var g=o[p],f=g[a];if(f.indexOf(d)>=0){r[d]={init:g.init,update:g.update,afterCreate:g.afterCreate,beforeDestroy:g.beforeDestroy};break}}return r},t.ComponentBinding._HANDLER_NAMESPACE=".oj_ko",t.ComponentBinding._registerWritebacks=function(e,n){for(var i={"^slider$":[{event:"slidechange",getter:r}],"^oj*":[{event:"ojoptionchange",getter:o.bind(void 0,n)}]},a={},s=Object.keys(i),l=0;l<s.length;l++){var u=s[l];if(n.componentName.match(u)){for(var h=i[u],c=0;c<h.length;c++){var d=h[c];e.on(d.event+t.ComponentBinding._HANDLER_NAMESPACE,{getter:d.getter},function(i,r){if(i.target===e[0]){var o=i.data.getter(i,r),s=n.valueAccessor();for(var l in o){n.changeTracker.suspend(l);try{if(n.specifiedOptions.indexOf(l)>=0){var u=s[t.ComponentBinding._OPTION_MAP],h=null==u?null:u[l],c=s[l];t.ComponentBinding._writeValueToProperty(l,c,o[l],h,n.bindingContext,a)}}finally{n.changeTracker.resume(l)}}}})}break}}},t.ComponentBinding._writeValueToProperty=function(e,i,r,o,a,s){if(null!=i&&n.isObservable(i))n.isWriteableObservable(i)&&i(r);else{if(!(e in s)){var l=null,u=t.__ExpressionUtils.getPropertyWriterExpression(o);null!=u&&(l=t.ComponentBinding.__CreateEvaluator(u)),s[e]=l}var h=s[e];if(h){var c=h(a);c(r)}}},t.ComponentBinding._toJS=function(e){return e=n.utils.unwrapObservable(e),(Array.isArray(e)||t.CollectionUtils.isPlainObject(e))&&e.ojConvertToJS&&(e=n.toJS(e)),e},t.ComponentBinding.__removeDotNotationOptions=function(t){for(var e={},n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];r.indexOf(".")>=0&&(e[r]=t[r],delete t[r])}return e},t.ComponentBinding._deliverCreateDestroyEventToManagedProps=function(t,e,n,i,r,o,a){for(var s=Object.keys(e),l=0;l<s.length;l++){var u=s[l],h=e[u],c=t?h.afterCreate:h.beforeDestroy;c&&c(u,n,i,r,o,a)}},t.ComponentBinding._changeQueue=new i,t.ComponentBinding.__getKnockoutVersion=function(){return t.__isAmdLoaderPresent()&&n?n.version:""},t.ComponentBinding._isNameRegistered=function(e){return t.ComponentBinding._REGISTERED_NAMES.indexOf(e)>=0},t.ComponentBinding._REGISTERED_NAMES=[],t.ComponentBinding._COMPONENT_OPTION="component",t.ComponentBinding._OPTION_MAP="_ojOptions",function(){var e="removeNode",i=n[e];n[e]=function(e){var n=t.Components;n&&t.DomUtils.setInKoRemoveNode(e);try{i(e)}finally{n&&t.DomUtils.setInKoRemoveNode(null)}}}(),t.ComponentBinding._INSTANCE=t.ComponentBinding.create(["ojComponent","jqueryUI"]),e.widget("oj._ojDetectCleanData",{_destroy:function(){var t,e,i;t=n.utils.domNodeDisposal,e="cleanExternalData",i=t[e],t[e]=function(){};try{n.cleanNode(this.element[0])}finally{t[e]=i}}}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["pieCenter"],init:function(t,e,n,i,r,o,s){return a(t,e,s)},update:function(t,e,n,i,r,o,s){return a(t,e,s)},"for":"ojChart"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["optionTemplate"],init:function(t,e,n,i,r,o,a){var s=l(t,e,a);if(null!==s)return s},update:function(t,e,n,i,r,o,a){return l(t,e,a)},"for":"ComboboxOptionRenderer"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":"ojCombobox",use:"ComboboxOptionRenderer"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":"ojSelect",use:"ComboboxOptionRenderer"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":"ojInputSearch",use:"ComboboxOptionRenderer"}),t.Object.createSubclass(u,t.Object,"ComponentBinding.ComponentChangeTracker"),u.prototype.Init=function(t,e){u.superclass.Init.call(this),this._component=t,this._queue=e,this._changes={},this._suspendCountMap={}},u.prototype.addChange=function(t,e){this._isSuspended(t)||this._disposed||(this._changes[t]=e,this._queue.registerComponentChanges(this))},u.prototype.dispose=function(){this._disposed=!0},u.prototype.resume=function(e){var n=this._suspendCountMap[e]||0;return n--,n<0?void t.Logger.error("ComponentChangeTracker suspendCount underflow"):void(0==n?delete this._suspendCountMap[e]:this._suspendCountMap[e]=n)},u.prototype.suspend=function(t){var e=this._suspendCountMap[t]||0;this._suspendCountMap[t]=e+1},u.prototype.applyChanges=function(e){if(!this._disposed){var n=t.ComponentBinding.__removeDotNotationOptions(e),i={changed:!0};this._component("option",e,i);for(var r in n)this._component("option",r,n[r],i)}},u.prototype.flushChanges=function(){var t=this._changes;return this._changes={},t},u.prototype._isSuspended=function(t){var e=this._suspendCountMap[t]||0;return e>=1},n.bindingHandlers.ojContextMenu={update:function(i,r,o,a,s){var l,u,h=".ojContextMenu",c=e(i),d=750,p=!1,g=!1,f=300,_=null,m=function(t){if(p)return t.preventDefault(),t.stopPropagation(),p=!1,!1},v=function(t){121==t.which&&t.shiftKey&&S().is(":visible")&&t.preventDefault()},y=function(){var e=t.Components.getWidgetConstructor(S()[0],"ojMenu"),n=e&&e("instance");if(!n)throw new Error('ojContextMenu binding bound to "'+(x?x:A)+'", which does not reference a valid JET Menu.');
return T||(n.widget().on("ojclose"+h,function(t,e){document.removeEventListener("keyup",v)}),T=!0),n},S=function(){return C(A,x)},C=function(t,n){return n?e(document.getElementById(n)):e(t).first()},b=function(t,e,n){p=n;var i=y();if(p&&c.one("touchend"+h,function(t){var e=50;i.__contextMenuPressHoldJustEnded(!0),setTimeout(function(){i.__contextMenuPressHoldJustEnded(!1)},e)}),"touchstart"===_&&"contextmenu"===t.type||"contextmenu"===_&&"touchstart"===t.type)return _=null,void clearTimeout(u);if(!t.isDefaultPrevented()){var r={mouse:{my:"start top",at:"start bottom",of:t},touch:{my:"start>40 center",at:"start bottom",of:t,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher"}},o={launcher:c,initialFocus:"menu",position:r[e]};i.__openingContextMenu=!0,i.open(t,o),i.__openingContextMenu=!1,i.widget().is(":visible")&&(t.preventDefault(),document.addEventListener("keyup",v),"touchstart"!==t.type&&"contextmenu"!==t.type||(_=t.type,u=setTimeout(function(){_=null},f)))}};c.off(h).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",m,!0),clearTimeout(l);var E=c.data("_ojLastContextMenu");E&&C(E.selector,E.id).off(h);var T=!1,A=n.utils.unwrapObservable(r()),x=e.isPlainObject(A)?i.getAttribute("contextmenu"):null;c.data("_ojLastContextMenu",{selector:A,id:x}),i.addEventListener("click",m,!0),c.on("touchstart"+h+" mousedown"+h+" keydown"+h+" ",function(t){if("mousedown"!==t.type||!y().__contextMenuPressHoldJustEnded())return p=!1,"touchstart"===t.type&&(g=!0,l=setTimeout(b.bind(void 0,t,"touch",!0),d)),!0}).on("touchend"+h+" touchcancel"+h,function(t){return g=!1,clearTimeout(l),!0}).on("keydown"+h+" contextmenu"+h,function(t){if("contextmenu"===t.type||121==t.which&&t.shiftKey){var e=g?"touch":"keydown"===t.type?"keyboard":"mouse";b(t,e,!1)}return!0}).addClass(t.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":"")}},t.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE=(new h).install(),t.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({getBindingAccessors:c}),t.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.addPostprocessor({nodeHasBindings:function(e,n){return n||1===e.nodeType&&t.Components&&t.Components.isRegistered(e.nodeName)},getBindingAccessors:function(e,n,i){if(1===e.nodeType){var r=e.nodeName;if(t.Components&&t.Components.isRegistered(r)){i=i||{};var o="_ojCustomElement";i[o]=function(){}}}return i}}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["header","cell"],init:function(t,e,n,i,r,o,a){var s,l,u,h,c,d,p,g,f;return"header"===t?(s=e.row,null!=s&&(l=s.template,null!=l&&(s.renderer=v(a,l))),u=e.column,null!=u&&(h=u.template,null!=h&&(u.renderer=v(a,h))),d=e.rowEnd,null!=d&&(p=d.template,null!=p&&(d.renderer=v(a,p))),g=e.columnEnd,null!=g&&(f=g.template,null!=f&&(g.renderer=v(a,f))),{header:e}):"cell"===t?(c=e.template,null!=c&&(e.renderer=y(a,c)),{cell:e}):void 0},update:function(t,e,n,i,r,o,a){var s,l,u,h,c,d,p,g,f;return"header"===t?(s=e.row,null!=s&&(l=s.template,null!=l&&(s.renderer=v(a,l))),u=e.column,null!=u&&(h=u.template,null!=h&&(u.renderer=v(a,h))),d=e.rowEnd,null!=d&&(p=d.template,null!=p&&(d.renderer=v(a,p))),g=e.columnEnd,null!=g&&(f=g.template,null!=f&&(g.renderer=v(a,f))),{header:e}):"cell"===t?(c=e.template,null!=c&&(e.renderer=y(a,c)),{cell:e}):null},"for":"ojDataGrid"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["template"],init:function(t,e,n,i,r,o,a){return b(t,e,a)},update:function(t,e,n,i,r,o,a){return b(t,e,a)},"for":"ojDiagram"}),function(){t.__ExpressionUtils={},t.__ExpressionUtils.getExpressionInfo=function(t){var i={};if(t){var r=e.exec(t);r=r?r[1]:null,r||(i.downstreamOnly=!0,r=n.exec(t),r=r?r[1]:null),i.expr=r}return i},t.__ExpressionUtils.getPropertyWriterExpression=function(t){var e=["true","false","null","undefined"];if(null==t||e.indexOf(t)>=0)return null;var n=t.match(i);if(null===n)return null;var r=n[1]?"Object("+n[1]+")"+n[2]:t;return"function(v){"+r+"=v;}"};var e=/(?:\{\{\s*)([^\s]+)(?:\s*\}\})/,n=/(?:\[\[\s*)([^\s]+)(?:\s*\]\])/,i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i}(),t.__ExpressionPropertyUpdater=function(e,i){function r(r,o,a,s){var u=function(e){var u=!1;l(r)||(s&&n.ignoreDependencies(function(){var r=e.detail.value,s=a(i);if(n.isWriteableObservable(s))u=!0,s(r);else{var l=t.__ExpressionUtils.getPropertyWriterExpression(o);if(null!=l){var h=t.ComponentBinding.__CreateEvaluator(l);h(i)(r),u=!0}}}),u||(c[r]=!0))};return e.addEventListener(r+p,u),u}function o(t,n){a(t);try{e[t]=n}finally{s(t)}}function a(t){var e=d[t]||0;e++,d[t]=e}function s(e){var n=d[e];return n?(n--,void(0===n?d[e]=null:d[e]=n)):void t.Logger.error("Property count undefrlow")}function l(t){return d[t]}this.setupExpression=function(a,s,l){var d=t.__AttributeUtils.getExpressionInfo(a);c[s]&&(c[s]=null);var g=u[s];g&&(g.dispose(),u[s]=null);var f=h[s];f&&(e.removeEventListener(s+p,f),h[s]=null);var _=l.readOnly,m=d.expr;if(m){var v=t.ComponentBinding.__CreateEvaluator(m);return _||n.ignoreDependencies(function(){u[s]=n.computed(function(){if(!c[s]){var t=v(i);o(s,n.utils.unwrapObservable(t))}})}),h[s]=r(s,m,v,l.writeback&&!d.downstreamOnly),!0}return!1},this.teardown=function(){for(var t=Object.keys(u),n=0;n<t.length;n++)u[t[n]].dispose();for(u={},t=Object.keys(h),n=0;n<t.length;n++){var i=t[n];e.removeEventListener(i+p,h[i])}h={}};var u={},h={},c={},d={},p="-changed"},t.ResponsiveKnockoutUtils={},t.ResponsiveKnockoutUtils.createMediaQueryObservable=function(t){if(null==t)throw new Error("oj.ResponsiveKnockoutUtils.createMediaQueryObservable: aborting, queryString is null");var i=window.matchMedia(t),r=n.observable(i.matches);return i.addListener(function(t){r(t.matches)}),navigator.userAgent.indexOf("WebKit")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&e(window).resize(function(){var t="oj-webkit-bug-123293";0===e("body").has("."+t).length&&e("body").append('<div aria-hidden="true" class="oj-helper-hidden-accessible '+t+'">'),e("."+t).text((new Date).getMilliseconds().toString())}),r},t.ResponsiveKnockoutUtils.createScreenRangeObservable=function(){var e=t.ResponsiveUtils.getFrameworkQuery(t.ResponsiveUtils.FRAMEWORK_QUERY_KEY.XXL_UP),i=t.ResponsiveUtils.getFrameworkQuery(t.ResponsiveUtils.FRAMEWORK_QUERY_KEY.XL_UP),r=t.ResponsiveUtils.getFrameworkQuery(t.ResponsiveUtils.FRAMEWORK_QUERY_KEY.LG_UP),o=t.ResponsiveUtils.getFrameworkQuery(t.ResponsiveUtils.FRAMEWORK_QUERY_KEY.MD_UP),a=t.ResponsiveUtils.getFrameworkQuery(t.ResponsiveUtils.FRAMEWORK_QUERY_KEY.SM_UP),s=null==e?null:t.ResponsiveKnockoutUtils.createMediaQueryObservable(e),l=null==i?null:t.ResponsiveKnockoutUtils.createMediaQueryObservable(i),u=null==r?null:t.ResponsiveKnockoutUtils.createMediaQueryObservable(r),h=null==o?null:t.ResponsiveKnockoutUtils.createMediaQueryObservable(o),c=null==a?null:t.ResponsiveKnockoutUtils.createMediaQueryObservable(a);return n.computed(function(){if(s&&s())return t.ResponsiveUtils.SCREEN_RANGE.XXL;if(l&&l())return t.ResponsiveUtils.SCREEN_RANGE.XL;if(u&&u())return t.ResponsiveUtils.SCREEN_RANGE.LG;if(h&&h())return t.ResponsiveUtils.SCREEN_RANGE.MD;if(c&&c())return t.ResponsiveUtils.SCREEN_RANGE.SM;throw new Error(" NO MATCH in oj.ResponsiveKnockoutUtils.createScreenRangeObservable")})},t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["areaLayers","pointDataLayers"],init:function(t,e,n,i,r,o,a){return T(t,e,a)},update:function(t,e,n,i,r,o,a){return T(t,e,a)},"for":"ojThematicMap"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["tooltip"],init:function(t,e,n,i,r,o,a){return x(t,e,a)},update:function(t,e,n,i,r,o,a){return x(t,e,a)},"for":"tooltipOptionRenderer"}),function(){for(var e=["ojChart","ojDiagram","ojNBox","ojPictoChart","ojSunburst","ojTagCloud","ojThematicMap","ojTreemap","ojDialGauge","ojLedGauge","ojRatingGauge","ojSparkChart","ojStatusMeterGauge","ojGantt"],n=0;n<e.length;n++)t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":e[n],use:"tooltipOptionRenderer"})}(),t.koStringTemplateEngine={},t.koStringTemplateEngine.install=function(){if(!n.templates){var t={},e={},i=new n.nativeTemplateEngine,r=function(n){this._templateName=n,this.text=function(e){return e?void(t[this._templateName]=e):t[this._templateName]},this.data=function(t,n){return e[this._templateName]||(e[this._templateName]={}),1===arguments.length?e[this._templateName][t]:void(e[this._templateName][t]=n)}};i.makeTemplateSource=function(t,e){if("string"==typeof t){e=e||document;var i=e.getElementById(t);return i?new n.templateSources.domElement(i):new r(t)}if(t&&1==t.nodeType||8==t.nodeType)return new n.templateSources.anonymousTemplate(t)},n.templates=t,n.setTemplateEngine(i)}},function(){n.bindingHandlers._ojCustomElement={update:function(i,r,o,a,s){function l(){h&&(h.teardown(),h=null),c&&(i.removeEventListener(e,c),c=null)}function u(){var n=t.Components.getMetadata(i.tagName);if(n){var r=n.properties;if(r){var o=Object.keys(r);0!==o.length&&(h=new t.__ExpressionPropertyUpdater(i,s),o.forEach(function(e){var n=t.__AttributeUtils.propertyNameToAttribute(e);if(i.hasAttribute(e)){var o=i.getAttribute(n);h.setupExpression(o,e,r[e])}}),c=function(e){var n=e.detail,i=n.attribute,o=t.__AttributeUtils.attributeToPropertyName(i),a=r[o];h.setupExpression(n.value,o,a)},i.addEventListener(e,c),i.classList.add("oj-complete"))}}}var h,c,d=0,p=t.Components.getCreatePromise(i);n.ignoreDependencies(function(){n.computed(function(){function e(t,e){var n=function(t,n){t===d&&e(n)}.bind(void 0,t);return n}r(),n.computedContext.isInitial()||l(),d++,p.then(e(d,function(){u()}),e(d,function(e){t.Logger.error("Component create Promise rejected. Reason: %o",e)}))},null,{disposeWhenNodeIsRemoved:i})}),n.utils.domNodeDisposal.addDisposeCallback(i,l)}};var e="attribute-changed"}(),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["center"],init:function(t,e,n,i,r,o,a){return O(t,e,a)},update:function(t,e,n,i,r,o,a){return O(t,e,a)},"for":"ojStatusMeterGauge"});var R="columns",L="columnsDefault",N="rowTemplate";t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:[R,L,N],init:function(t,e,n,i,r,o,a){if(t==R||t==L){var s,l,u,h;for(s=0;s<e.length;s++){var c=e[s];l=c.template,u=c.footerTemplate,h=c.headerTemplate,null!=l&&(c.renderer=M(a,"cell",l)),null!=u&&(c.footerRenderer=M(a,"footer",u)),null!=h&&(c.headerRenderer=M(a,"header",h))}return t==R?{columns:e}:{columnsDefault:e}}if(t==N)return{rowRenderer:D(a,e)}},update:function(t,e,n,i,r,o,a){if(t==R||t==L){var s,l,u,h;for(s=0;s<e.length;s++){var c=e[s];l=c.template,u=c.footerTemplate,h=c.headerTemplate,null!=l&&(c.renderer=M(a,"cell",l)),null!=u&&(c.footerRenderer=M(a,"footer",u)),null!=h&&(c.headerRenderer=M(a,"header",h))}i(t==R?{columns:e}:{columnsDefault:e})}else if(t==N)return{rowRenderer:D(a,e)};return null},"for":"ojTable"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["item"],init:function(t,e,n,i,r,o,a){var s=w(t,e,a);if(null!=s)return s},update:function(t,e,n,i,r,o,a){return w(t,e,a)},"for":"ojListViewRenderer"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":"ojListView",use:"ojListViewRenderer"}),t.ComponentBinding.getDefaultInstance().setupManagedAttributes({"for":"ojNavigationList",use:"ojListViewRenderer"})}),define("ojs/ojmodule",["ojs/ojcore","knockout","promise"],function(t,e){t.ModuleBinding={},t.ModuleBinding.defaults={viewPath:"text!views/",viewSuffix:".html",modelPath:"viewModels/",initializeMethod:"initialize",disposeMethod:"dispose",activatedHandler:"handleActivated",attachedHandler:"handleAttached",detachedHandler:"handleDetached",bindingsAppliedHandler:"handleBindingsApplied",deactivatedHandler:"handleDeactivated",transitionCompletedHandler:"handleTransitionCompleted"},function(){function n(n,i,o,a,s,l,u){var h=i.canAnimate,d=null==h||h.call(i,n);if(d){var g,f,_=i.prepareAnimation.call(i,n);_&&(g=_.newViewParent,f=_.oldViewParent);var m=g||o;f&&f!==o?r(a,f):m===o&&l(null),m!==o&&e.virtualElements.setDomNodeChildren(m,[]),s(m);var v=Array.prototype.slice.call(m.childNodes),y=!1,S=function(){y||(y=!0,o!==m&&(c(o,v),t.Components&&(p(v,t.Components.subtreeDetached),p(v,t.Components.subtreeAttached))))},C=l.bind(null,f);n.newViewParent=g,n.oldViewParent=f,n.oldViewNodes=a,n.removeOldView=C,n.insertNewView=S;var b=function(){C(),S(),u()},E=i.animate.call(i,n).then(b,function(e){b(),t.Logger.error("ojModule animation promise was rejected")});return E}}function i(t,n,i){n=n||t;var r=[];i&&t===n&&(i.parentNode.removeChild(i),r.push(i)),e.virtualElements.setDomNodeChildren(n,r)}function r(t,e){t.forEach(function(t){e.appendChild(t)})}function o(t){return window.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function a(t,n,i){if(t&&t[n]){var r={element:i[0],valueAccessor:i[1]};i.length>2&&(r.viewModel=i[2],i.length>3&&(r["boolean"==typeof i[3]?"fromCache":"cachedNodes"]=i[3]));var o=e.ignoreDependencies(t[n],t,[r]);return o}}function s(n,i,r){if(null!=n){var o=t.ModuleBinding.defaults[i];if(null!=o&&n){var a=n[o];if("function"==typeof a){var s=void 0;r&&(s={element:r[0],valueAccessor:r[1]},r.length>2&&(s["boolean"==typeof r[2]?"fromCache":"cachedNodes"]=r[2]));var l=e.ignoreDependencies(a,n,[s]);return l}}}}function l(t,n,i){for(var r=[],o=e.virtualElements.firstChild(t),a=o;null!=a&&a!=i;a=a.nextSibling)a!=n&&r.push(a);return r}function u(t,n){var i=[],r=e.virtualElements.firstChild(t);return h(r,n,function(t){i.push(t)}),i}function h(t,n,i){for(var r=t;null!=r;){var o=e.virtualElements.nextSibling(r),a=r.nodeType;r===n||1!==a&&8!==a||i(r),r=o}}function c(t,n){for(var i=n.length,r=i-1;r>=0;r--)e.virtualElements.prepend(t,n[r])}function d(t,e,n,i,r){return{node:t,valueAccessor:e,isInitial:n,oldViewModel:i,newViewModel:r}}function p(t,e){if(e)for(var n=0;n<t.length;n++)e(t[n])}function g(t){if("string"==typeof t)t=e.utils.parseHtmlFragment(t);else if(o(t))t=e.utils.arrayPushAll([],t.childNodes);else{if(!Array.isArray(t))throw"The View ("+t+") has an unsupported type";t=e.utils.arrayPushAll([],t)}return t}function f(e){return new Promise(function(n,i){require([e],function(t){n(t)},function(n){t.Logger.error("ojModule failed to load "+e),i(n)})})}function _(t){if(!t)return t;var e=new Promise(function(e,n){t.then(e,e)});return e}e.bindingHandlers.ojModule={init:function(o,m,v,y,S){var C,b,E,T,A,x={},I=-1,O=function(t){s(t,"disposeMethod",[o,m])},M=function(){O(C)},D=function(){M();for(var t=Object.keys(x),e=0;e<t.length;e++){var n=x[t[e]].model;O(n)}};e.utils.domNodeDisposal.addDisposeCallback(o,D);var P=new Error("Promise cancelled because ojModule is fetching new View and ViewModel"),w=function(t){if(t!=I)throw P},R=function(){T||(T=document.createElement("div"),T.className="oj-helper-module-cache",e.virtualElements.prepend(o,T))};return 8===o.nodeType&&(e.virtualElements.setDomNodeChildren(o,[]),A=o.nextSibling),e.computed(function(){I++;var v,y,O,D,L,N,k,U,B=0===I,F=e.utils.unwrapObservable,H=F(m());"string"==typeof H?v=H:(v=F(H.name),y=F(H.viewName),O=F(H.params),D=F(H.viewModelFactory),L=F(H.createViewFunction),N=F(H.cacheKey),k=F(H.lifecycleListener),U=F(H.animation));var j,G,V=a(k,"activated",[o,m]),Y=null==N?null:x[N];if(null!=Y)delete x[N],j=Promise.resolve(Y.view),G=Promise.resolve(Y.model);else if(null!=D&&(G=e.ignoreDependencies(D.createViewModel,D,[O,m])),null==G&&null!=v&&(G=f(t.ModuleBinding.defaults.modelPath+v)),null!=G&&(G=G.then(function(t,e){return w(t),e="function"==typeof e?new e(O):s(e,"initializeMethod",[o,m])||e}.bind(null,I)),null!=L&&(j=G.then(function(t,e){if(w(t),null==e)throw"createViewFunction option cannot be used when the ViewModel is null";var n=e[L];if(null==n)throw"function specified by the createViewFunction option was not found on the ViewModel";return n.call(e)}.bind(null,I)))),null==j){if(y=null==y?v:y,null==y)throw new Error("View name must be specified");j=f(t.ModuleBinding.defaults.viewPath+y+t.ModuleBinding.defaults.viewSuffix)}if(null==j)throw new Error("ojModule is missing a View");var K;null!=G&&(K=G.then(function(t,e){return w(t),s(e,"activatedHandler",[o,m])}.bind(null,I)));var W=Promise.all([j,G,V,K,b]);W.then(function(f,v){if(f==I){var y=v[0];if(null==y)throw"The module's View was resolved to null";var D,P=g(y),w=v[1],L=!1,F=l(o,T,A),H=u(o,T);null!=E&&(L=!0,D=F,R());var j=!1,G=function(n){j||(j=!0,L?r(F,T):H.forEach(function(t){e.cleanNode(t)}),i(o,n||o,T),B||(a(k,"detached",[o,m,C,D]),s(C,"detachedHandler",[o,m,D]),a(k,"deactivated",[o,m,C]),s(C,"deactivatedHandler",[o,m])),L?(p(D,t.Components?t.Components.subtreeHidden:null),x[E]={model:C,view:D}):M(),C=w,E=N)},V=function(n){n=n||o,c(n,P);var i=null!=Y;if(i&&p(P,t.Components?t.Components.subtreeShown:null),a(k,"attached",[n,m,w,i]),s(w,"attachedHandler",[n,m,i]),!i){var r=S.createChildContext(w,void 0,function(t){t.$module=w,t.$params=O});h(P[0],T,function(t){e.applyBindings(r,t)}),a(k,"bindingsApplied",[n,m,w]),s(w,"bindingsAppliedHandler",[n,m])}},K=function(){a(k,"transitionCompleted",[o,m,w]),s(w,"transitionCompletedHandler",[o,m])};if(null!=U){var W=d(o,m,B,C,w),z=n(W,U,o,F,V,G,K);b=_(z)}else b=void 0;b||(G(null),V(null),K())}}.bind(null,I),function(e,n){n!==P&&null!=n&&t.Logger.error(n)}.bind(null,I))},null,{disposeWhenNodeIsRemoved:o}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.ojModule=!0}()}),requirejs.config({paths:{knockout:"../bower_components/knockout/dist/knockout",jquery:"../bower_components/jquery/dist/jquery","jqueryui-amd":"../bower_components/jquery-ui/ui",ojs:"../bower_components/oraclejet/dist/js/libs/oj/debug",ojdnd:"../bower_components/oraclejet/dist/js/libs/dnd-polyfill/dnd-polyfill-1.0.0",ojL10n:"../bower_components/oraclejet/dist/js/libs/oj/ojL10n",ojtranslations:"../bower_components/oraclejet/dist/js/libs/oj/resources",text:"../bower_components/text/text",signals:"../bower_components/js-signals/dist/signals",customElements:"../bower_components/webcomponentsjs/CustomElements",promise:"../bower_components/es6-promise/promise",proj4:"../bower_components/proj4/dist/proj4-src",hammerjs:"../bower_components/hammerjs/hammer",css:"../bower_components/require-css/css"},shim:{jquery:{exports:["jQuery","$"]}},config:{ojL10n:{merge:{}}}}),require(["ojs/ojcore","knockout","jquery","ojs/ojknockout","ojs/ojmodule"],function(t,e,n){t.ModuleBinding.defaults.modelPath="views/",e.applyBindings(),n("body").addClass("started")}),define("main",function(){}),define("ojs/ojanimation",["ojs/ojcore","jquery","promise"],function(t,e){t.AnimationUtils={},t.AnimationUtils._animate=function(n,i,r,o,a,s){var l=e(n),u=[].concat(a),h=new Promise(function(e,n){var h=function(t){var e=u.indexOf(t.originalEvent.propertyName);e>-1&&(u.length>1?u.splice(e,1):d())},c=!1,d=function(){c||(l.off("transitionend webkitTransitionEnd",h),e(!0),c=!0)};null==r.css&&(r.css={}),r.css.transition=t.AnimationUtils._createTransitionValue(a,o);var p=t.AnimationUtils._saveStyle(l,i,r,o,s||a);t.AnimationUtils._applyState(l,i,p>1),l.on("transitionend webkitTransitionEnd",h),window.setTimeout(function(){t.AnimationUtils._applyState(l,r,p>1),setTimeout(d,t.AnimationUtils._calcEffectTime(l)+100)},20)});return h.then(function(){i&&i.addClass&&l.removeClass(i.addClass),r&&r.addClass&&l.removeClass(r.addClass),t.AnimationUtils._restoreStyle(l)})},t.AnimationUtils._saveCssValues=function(e,n,i,r){for(var o in n){var a=t.AnimationUtils._getCamelCasePropName(o);if(!(i.hasOwnProperty(a)||r&&r.indexOf(a)!=-1)){var s=e[0].style;void 0===s[a]?i[a]=s[t.AnimationUtils._getWebkitPropName(a)]:i[a]=s[a]}}},t.AnimationUtils._saveStyle=function(e,n,i,r,o){var a=e.data("_ojSavedStyle")||{},s=n&&n.css?n.css:{},l=i&&i.css?i.css:{};r&&"all"===r.persist||(o=null),t.AnimationUtils._saveCssValues(e,s,a,o),t.AnimationUtils._saveCssValues(e,l,a,o),e.data("_ojSavedStyle",a);var u=e.data("_ojEffectCount")||0;return e.data("_ojEffectCount",++u),u},t.AnimationUtils._restoreStyle=function(t){var e=t.data("_ojEffectCount");if(e>1)t.data("_ojEffectCount",e-1);else{var n=t.data("_ojSavedStyle");n&&(t.css(n),t.removeData("_ojSavedStyle"),t.removeData("_ojEffectCount"))}},t.AnimationUtils._getCamelCasePropName=function(t){if(t.indexOf("-")>=0){for(var e="",n=t.split("-"),i=0;i<n.length;i++){var r=n[i];r&&(e?e+=r.charAt(0).toUpperCase()+r.slice(1):e=r)}return e}return t},t.AnimationUtils._getHyphenatedPropName=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.AnimationUtils._getWebkitPropName=function(t){return"webkit"+t.charAt(0).toUpperCase()+t.slice(1)},t.AnimationUtils._concatMultiValue=function(e,n,i,r,o){if(n.css[i]){i=t.AnimationUtils._getCamelCasePropName(i);var a=e[0].style[i]||e[0].style[t.AnimationUtils._getWebkitPropName(i)];a&&0!=a.indexOf(r)&&(n.css[i]=a+o+n.css[i])}},t.AnimationUtils._applyState=function(e,n,i){n&&(n.css&&(i&&(t.AnimationUtils._concatMultiValue(e,n,"transform","none"," "),t.AnimationUtils._concatMultiValue(e,n,"transition","all",", ")),e.css(n.css)),n.addClass&&e.addClass(n.addClass),n.removeClass&&e.removeClass(n.removeClass))},t.AnimationUtils._calcCssTime=function(t,e,n){for(var i=t.css(e),r=t.css(n+"Delay"),o=t.css(n+"Duration"),a=i.split(","),s=r.split(","),l=o.split(","),u=a.length,h=s.length,c=l.length,d=0,p=0;p<u;p++){var g=l[p%c],f=g.indexOf("ms")>-1?parseFloat(g):1e3*parseFloat(g);if(f>0){var _=s[p%h],m=_.indexOf("ms")>-1?parseFloat(_):1e3*parseFloat(_);d=Math.max(d,m+f)}}return d},t.AnimationUtils._calcEffectTime=function(e){var n=t.AnimationUtils._calcCssTime(e,"animationName","animation"),i=t.AnimationUtils._calcCssTime(e,"transitionProperty","transition");return Math.max(n,i)},t.AnimationUtils._fillEmptyOptions=function(t,e){t.delay=t.delay||e.delay,t.duration=t.duration||e.duration,t.timingFunction=t.timingFunction||e.timingFunction,t.persist=t.persist||e.persist},t.AnimationUtils.startAnimation=function(n,i,r){var o=new Promise(function(o,a){var s=e(n),l="oj-animate-"+i,u=l+"-active",h=!1,c=!1,d=function(){h&&c&&(s.removeClass(l),s.removeClass(u),o(!0),s.trigger("ojanimateend",{action:i}))},p=function(){h=!0,d()},g=function(){c=!0,d()},f=e.Event("ojanimatestart");if(s.trigger(f,{action:i,endCallback:p}),!f.isDefaultPrevented()){for(var _=[].concat(r),m=[],v={},y=0;y<_.length;y++){var S,C=_[y],b="";null!=C&&"none"!=C&&("string"==typeof C?(b=C,S={}):"object"==typeof C&&(b=C.effect,S=e.extend({},C)),t.AnimationUtils._fillEmptyOptions(S,v),v=e.extend({},S)),b&&t.AnimationUtils[b]&&m.push(t.AnimationUtils[b](n,S))}m.length?Promise.all(m).then(p):p()}s.addClass(l),window.setTimeout(function(){s.addClass(u),setTimeout(g,t.AnimationUtils._calcEffectTime(s)+100)},20)});return o},t.AnimationUtils._mergeOptions=function(n,i){return null==t.AnimationUtils._defaultOptions&&(t.AnimationUtils._defaultOptions=t.ThemeUtils.parseJSONFromFontFamily("oj-animation-effect-default-options")),e.extend({duration:"400ms"},t.AnimationUtils._defaultOptions?t.AnimationUtils._defaultOptions[n]:null,i)},t.AnimationUtils._createTransitionValue=function(e,n){var i="";if(e)for(var r=0;r<e.length;r++){var o=t.AnimationUtils._getHyphenatedPropName(e[r]);i+=(r>0?", ":"")+o+" "+n.duration,n.timingFunction&&(i+=" "+n.timingFunction),n.delay&&(i+=" "+n.delay)}return i},t.AnimationUtils._fade=function(e,n,i,r,o){n=t.AnimationUtils._mergeOptions(i,n);var a={css:{opacity:r}},s={css:{opacity:o}};return n&&(n.startOpacity&&(a.css.opacity=n.startOpacity),n.endOpacity&&(s.css.opacity=n.endOpacity)),t.AnimationUtils._animate(e,a,s,n,["opacity"])},t.AnimationUtils.fadeIn=function(e,n){return t.AnimationUtils._fade(e,n,"fadeIn",0,1)},t.AnimationUtils.fadeOut=function(e,n){return t.AnimationUtils._fade(e,n,"fadeOut",1,0)},t.AnimationUtils.expand=function(e,n){return t.AnimationUtils._expandCollapse(e,n,!0)},t.AnimationUtils.collapse=function(e,n){return t.AnimationUtils._expandCollapse(e,n,!1)},t.AnimationUtils._expandCollapse=function(n,i,r){i=t.AnimationUtils._mergeOptions(r?"expand":"collapse",i);var o={},a={},s=i.direction||"height",l=e(n),u=l.width(),h=l.height(),c=l.css("maxWidth"),d=l.css("maxHeight"),p=o.css={},g=a.css={};"none"!==c&&(u=c),"none"!==d&&(h=d);var f=[];return"both"!==s&&"height"!==s||(p.maxHeight=r?0:h,g.maxHeight=r?h:0,f.push("maxHeight")),"both"!==s&&"width"!==s||(p.maxWidth=r?0:u,g.maxWidth=r?u:0,f.push("maxWidth")),t.AnimationUtils._animate(l[0],o,a,i,f)},t.AnimationUtils.zoomIn=function(e,n){return t.AnimationUtils._zoom(e,n,!0)},t.AnimationUtils.zoomOut=function(e,n){return t.AnimationUtils._zoom(e,n,!1)},t.AnimationUtils._zoom=function(n,i,r){i=t.AnimationUtils._mergeOptions(r?"zoomIn":"zoomOut",i);var o={},a={},s=i.axis||"both",l=e(n),u="both"===s?"scale":"x"===s?"scaleX":"scaleY",h=o.css={},c=a.css={};return h.transform=u+"("+(r?0:1)+") translateZ(0)",c.transform=u+"("+(r?1:0)+") translateZ(0)",h.transformOrigin=i.transformOrigin||"center",t.AnimationUtils._animate(l[0],o,a,i,["transform"])},t.AnimationUtils.slideIn=function(e,n){return t.AnimationUtils._slide(e,n,!0)},t.AnimationUtils.slideOut=function(e,n){return t.AnimationUtils._slide(e,n,!1)},t.AnimationUtils._slide=function(n,i,r){i=t.AnimationUtils._mergeOptions(r?"slideIn":"slideOut",i);var o={},a={},s=i.direction||"start",l=e(n),u="0",h="0",c=o.css={},d=a.css={};if(i.offsetX||i.offsetY)i.offsetX&&(u=i.offsetX),i.offsetY&&(h=i.offsetY);else{var p=l.outerWidth(),g=l.outerHeight(),f="rtl"===t.DomUtils.getReadingDirection();switch(s){case"left":u=(r?p:-p)+"px";break;case"right":u=(r?-p:p)+"px";break;case"top":h=(r?g:-g)+"px";break;case"bottom":h=(r?-g:g)+"px";break;case"end":u=(r?-p:p)*(f?-1:1)+"px";break;default:u=(r?p:-p)*(f?-1:1)+"px"}}return r?(c.transform="translate("+u+","+h+") translateZ(0)",d.transform="translate(0,0) translateZ(0)"):(c.transform="translate(0,0) translateZ(0)",d.transform="translate("+u+","+h+") translateZ(0)"),t.AnimationUtils._animate(l[0],o,a,i,["transform"])},t.AnimationUtils.ripple=function(n,i){i=t.AnimationUtils._mergeOptions("ripple",i);var r={},o={},a=e(n),s=a.outerWidth(),l=a.outerHeight(),u=e("<div style='position:absolute; overflow:hidden'>"),h=e("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),c="static"==a.css("position")?a.position():{left:0,top:0};a.prepend(u),u.css({left:c.left+"px",top:c.top+"px",width:s+"px",height:l+"px"}),u.prepend(h);var d=r.css={},p=o.css={};return t.AnimationUtils._setRippleOptions(d,h,u,i),d.transform="scale(0) translateZ(0)",d.opacity=i.startOpacity||h.css("opacity"),p.transform="scale(1) translateZ(0)",p.opacity=i.endOpacity||0,i.persist="all",t.AnimationUtils._animate(h[0],r,o,i,["transform","opacity"]).then(function(){u.remove()})},t.AnimationUtils._setRippleOptions=function(e,n,i,r){var o=n.width(),a=i.width(),s=i.height();if(r.diameter){var l=r.diameter,u=parseInt(l,10);isNaN(u)||(o="%"==l.charAt(l.length-1)?Math.floor(Math.min(a,s)*(u/100)):u,e.width=o+"px",e.height=o+"px")}var h,c="static"==i.css("position")?i.position():{left:0,top:0};h=t.AnimationUtils._calcRippleOffset(r.offsetX,o,a,c.left),null!=h&&(e.left=h+"px"),h=t.AnimationUtils._calcRippleOffset(r.offsetY,o,s,c.top),null!=h&&(e.top=h+"px"),r.color&&(e.backgroundColor=r.color)},t.AnimationUtils._calcRippleOffset=function(t,e,n,i){var r;t=t||"50%";var o=parseInt(t,10);return isNaN(o)||(r="%"==t.charAt(t.length-1)?n*(o/100)-e/2:o-e/2,r=Math.floor(r+i)),r},t.AnimationUtils._removeRipple=function(n,i){i=i||{};var r={fadeOut:1,collapse:1,zoomOut:1,slideOut:1},o=i.removeEffect||"fadeOut",a=e(".oj-animation-rippler",n);return 0===a.length?void console.warn("No rippler so returning"):o in r?t.AnimationUtils[o](a,i).then(function(){a.remove()}):a.remove()},t.AnimationUtils._flip=function(e,n,i,r,o){n=t.AnimationUtils._mergeOptions(i,n);var a,s={},l={},u={css:s},h={css:l},c="rotateY(",d="2000px",p="hidden",g="center";return n&&("x"===n.axis&&(c="rotateX("),n.startAngle&&(r=n.startAngle),n.endAngle&&(o=n.endAngle),n.perspective&&(d=n.perspective),n.backfaceVisibility&&(p=n.backfaceVisibility),n.transformOrigin&&(g=n.transformOrigin)),a="perspective("+d+") "+c,s.transform=a+r+")",s.backfaceVisibility=p,s.transformOrigin=g,l.transform=a+o+")",t.AnimationUtils._animate(e,u,h,n,["transform"],["transform","backfaceVisibility","transformOrigin"])},t.AnimationUtils.flipIn=function(e,n){return t.AnimationUtils._flip(e,n,"flipIn","-180deg","0deg")},t.AnimationUtils.flipOut=function(e,n){return t.AnimationUtils._flip(e,n,"flipOut","0deg","180deg")}}),define("ojs/ojmoduleanimations",["ojs/ojcore","knockout","promise","ojs/ojanimation"],function(t,e){t.ModuleAnimations={},t.ModuleAnimations._DESCRIPTORS={coverStart:{oldViewClass:"oj-animation-coverstart",newViewClass:"oj-animation-coverstart",newViewOnTop:!0},coverUp:{newViewClass:"oj-animation-coverup",newViewOnTop:!0},fade:{oldViewClass:"oj-animation-fade",newViewClass:"oj-animation-fade",newViewOnTop:!1},pushStart:{oldViewClass:"oj-animation-revealstart",newViewClass:"oj-animation-coverstart",newViewOnTop:!1},pushEnd:{oldViewClass:"oj-animation-revealend",newViewClass:"oj-animation-coverend",newViewOnTop:!1},revealDown:{oldViewClass:"oj-animation-revealdown",newViewOnTop:!1},revealEnd:{oldViewClass:"oj-animation-revealend",newViewClass:"oj-animation-revealend",newViewOnTop:!1},zoomIn:{newViewClass:"oj-animation-zoomin",newViewOnTop:!0},zoomOut:{oldViewClass:"oj-animation-zoomout",newViewOnTop:!1}},t.ModuleAnimations._animateElement=function(t,e,n){var i=$(t),r=new Promise(function(t,r){var o="oj-"+n,a=o+"-active";i.addClass(e),i.addClass(o),window.requestAnimationFrame(function(){i.addClass(a)});var s=function(){t(!0)},l=i.css("animationDuration")||i.css("webkitAnimationDuration");l&&"0s"!=l?i.on("animationend webkitAnimationEnd",s):(l=i.css("transitionDuration")||i.css("webkitTransitionDuration"),l&&"0s"!=l?i.on("transitionend webkitTransitionEnd",s):t(!0))});return r},t.ModuleAnimations._animateView=function(e,n,i){var r=[],o=t.ModuleAnimations._DESCRIPTORS[i];return e&&o&&o.oldViewClass&&r.push(t.ModuleAnimations._animateElement(e,o.oldViewClass,"leave")),n&&o&&o.newViewClass&&r.push(t.ModuleAnimations._animateElement(n,o.newViewClass,"enter")),Promise.all(r)},t.ModuleAnimations._addContainedElements=function(t,n){for(var i=e.virtualElements.firstChild(t);i;)1==i.nodeType?n.push(i):8==i.nodeType&&this._addContainedElements(i,n),i=e.virtualElements.nextSibling(i)},t.ModuleAnimations._cacheVirtualViewRoot=function(t,e){t._ojOldRoot=e},t.ModuleAnimations._getVirtualViewRoot=function(t){return t._ojOldRoot},t.ModuleAnimations._defaultCanAnimate=function(e){if(e.isInitial)return!1;if(1==e.node.nodeType)return!0;if(8==e.node.nodeType){var n=[];if(t.ModuleAnimations._addContainedElements(e.node,n),n&&1==n.length)return t.ModuleAnimations._cacheVirtualViewRoot(e,n[0]),!0}return!1},t.ModuleAnimations._getOldView=function(e){var n;return 1==e.node.nodeType?n=e.node:8==e.node.nodeType&&(n=t.ModuleAnimations._getVirtualViewRoot(e)),n},t.ModuleAnimations._createViewParent=function(t){var e=$(document.createElement("div")),n={position:"absolute",height:t.offsetHeight+"px",width:t.offsetWidth+"px",left:t.offsetLeft+"px",top:t.offsetTop+"px"};e.appendTo(t.offsetParent),e.css(n),e.addClass("oj-animation-host-viewport");var i=document.createElement("div");return i.className="oj-animation-host",e.append(i),i},t.ModuleAnimations._defaultPrepareAnimation=function(e,n){var i={},r=t.ModuleAnimations._DESCRIPTORS[n],o=t.ModuleAnimations._getOldView(e);return r&&(r.newViewClass&&!r.newViewOnTop&&(i.newViewParent=t.ModuleAnimations._createViewParent(o)),r.oldViewClass&&(i.oldViewParent=t.ModuleAnimations._createViewParent(o)),r.newViewClass&&r.newViewOnTop&&(i.newViewParent=t.ModuleAnimations._createViewParent(o))),i},t.ModuleAnimations._defaultAnimate=function(e,n){var i=e.oldViewParent,r=e.newViewParent,o=t.ModuleAnimations._animateView(i,r,n);return o.then(function(n){t.ModuleAnimations._postAnimationProcess(e)})},t.ModuleAnimations._removeViewParent=function(t,e){var n=t[e];if(n){var i=n.parentNode;i&&i.parentNode&&i.parentNode.removeChild(i);
}},t.ModuleAnimations._postAnimationProcess=function(e){e.removeOldView(),e.insertNewView(),t.ModuleAnimations._removeViewParent(e,"newViewParent"),t.ModuleAnimations._removeViewParent(e,"oldViewParent")},t.ModuleAnimations._getImplementation=function(e){return{canAnimate:t.ModuleAnimations._defaultCanAnimate,prepareAnimation:function(n){return t.ModuleAnimations._defaultPrepareAnimation(n,e)},animate:function(n){return t.ModuleAnimations._defaultAnimate(n,e)}}},t.ModuleAnimations._getNavigateMethod=function(e,n){return null==t.ModuleAnimations._navigateMethods&&(t.ModuleAnimations._navigateMethods=t.ThemeUtils.parseJSONFromFontFamily("oj-animation-navigate-methods")),t.ModuleAnimations._navigateMethods?t.ModuleAnimations._navigateMethods[n]:null},t.ModuleAnimations._navigateCanAnimate=function(e,n){return t.ModuleAnimations._getNavigateMethod(e,n)&&t.ModuleAnimations._defaultCanAnimate(e)},t.ModuleAnimations._navigatePrepareAnimation=function(e,n){var i=t.ModuleAnimations._getNavigateMethod(e,n);return t.ModuleAnimations._defaultPrepareAnimation(e,i)},t.ModuleAnimations._navigateAnimate=function(e,n){var i=t.ModuleAnimations._getNavigateMethod(e,n);return t.ModuleAnimations._defaultAnimate(e,i)},t.ModuleAnimations._getNavigateImplementation=function(e){return{canAnimate:function(n){return t.ModuleAnimations._navigateCanAnimate(n,e)},prepareAnimation:function(n){return t.ModuleAnimations._navigatePrepareAnimation(n,e)},animate:function(n){return t.ModuleAnimations._navigateAnimate(n,e)}}},t.ModuleAnimations.coverStart=t.ModuleAnimations._getImplementation("coverStart"),t.ModuleAnimations.revealEnd=t.ModuleAnimations._getImplementation("revealEnd"),t.ModuleAnimations.coverUp=t.ModuleAnimations._getImplementation("coverUp"),t.ModuleAnimations.revealDown=t.ModuleAnimations._getImplementation("revealDown"),t.ModuleAnimations.zoomIn=t.ModuleAnimations._getImplementation("zoomIn"),t.ModuleAnimations.zoomOut=t.ModuleAnimations._getImplementation("zoomOut"),t.ModuleAnimations.fade=t.ModuleAnimations._getImplementation("fade"),t.ModuleAnimations.pushStart=t.ModuleAnimations._getImplementation("pushStart"),t.ModuleAnimations.pushEnd=t.ModuleAnimations._getImplementation("pushEnd"),t.ModuleAnimations.navChild=t.ModuleAnimations._getNavigateImplementation("navChild"),t.ModuleAnimations.navParent=t.ModuleAnimations._getNavigateImplementation("navParent"),t.ModuleAnimations.drillIn=t.ModuleAnimations.navChild,t.ModuleAnimations.drillOut=t.ModuleAnimations.navParent,t.ModuleAnimations.navSiblingEarlier=t.ModuleAnimations._getNavigateImplementation("navSiblingEarlier"),t.ModuleAnimations.navSiblingLater=t.ModuleAnimations._getNavigateImplementation("navSiblingLater"),t.ModuleAnimations.switcher=function(e){var n=function(){function n(t){var e=function(e){return i[t].call(i,e)};return e}var i,r=this,o="canAnimate";this[o]=function(a){var s=e(a);if(i=null==s?null:t.ModuleAnimations[s],!i)return!1;for(var l=["prepareAnimation","animate"],u=0;u<l.length;u++){var h=l[u];r[h]=n(h)}return n(o)(a)}};return new n},t.ModuleAnimations.createAnimation=function(e,n,i){return{canAnimate:t.ModuleAnimations._defaultCanAnimate,prepareAnimation:function(r){var o={},a=t.ModuleAnimations._getOldView(r);return n&&!i&&(o.newViewParent=t.ModuleAnimations._createViewParent(a)),e&&(o.oldViewParent=t.ModuleAnimations._createViewParent(a)),n&&i&&(o.newViewParent=t.ModuleAnimations._createViewParent(a)),o},animate:function(i){var r=i.oldViewParent,o=i.newViewParent,a=[];r&&e&&a.push(t.AnimationUtils.startAnimation(r,"close",e)),o&&n&&a.push(t.AnimationUtils.startAnimation(o,"open",n));var s=Promise.all(a);return s.then(function(e){t.ModuleAnimations._postAnimationProcess(i)})}}}}),define("views/drill",["knockout","ojs/ojcore","ojs/ojmoduleanimations"],function(t,e){function n(){this.currentModule=t.observable("acts"),this.drillId=t.observable(),this.switcherCallback=i.bind(this)}function i(t){return"acts"===this.currentModule()?"drillOut":"drillIn"}return n}),define("settings",[""],function(){return{baseUrl:""}}),define("ojs/ojmodel",["ojs/ojcore","jquery","promise"],function(t,e){t.Events=t.Events={on:function(t,e,n){return this.OnInternal(t,e,n,!1,!1)},off:function(t,e,n){return this._offInternal(t,e,n,!1)},trigger:function(e){var n=Array.prototype.slice.call(arguments);return n.unshift(!1),t.Events.TriggerInternal.apply(this,n)},once:function(t,e,n){return this._onceInternal(t,e,n,!1,null)},listenTo:function(e,n,i){var r,o,a,s,l,u,h,c,d={};n.constructor===String?d[n]=i:d=n;for(c in d)if(d.hasOwnProperty(c))for(r=t.Events._getEvents(c),o=0;o<r.length;o+=1)a=r[o].event,s=r[o].attribute,u={event:a,attribute:s,object:e,callback:d[c]},h=this._checkForHandler(this._listeningTo,u,t.Events._listenersIdentical),l=s?a+":"+s:a,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e.OnInternal(l,d[c],null,!0,!1);return this},listenToOnce:function(e,n,i){var r,o,a,s,l,u,h,c,d={};n.constructor===String?d[n]=i:d=n;for(c in d)if(d.hasOwnProperty(c))for(r=t.Events._getEvents(c),o=0;o<r.length;o+=1)a=r[o].event,s=r[o].attribute,u={event:a,attribute:s,object:e,callback:d[c]},h=this._checkForHandler(this._listeningTo,u,t.Events._listenersIdentical),l=s?a+":"+s:a,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),e._onceInternal(l,d[c],null,!0,this);return this},stopListening:function(e,n,i){var r,o,a,s,l,u,h,c,d,p,g,f,_,m,v={};if(null==arguments||arguments.length<=1){for(_=this._listeningTo?this._listeningTo.length:0,g=0;g<_;g++)u=this._listeningTo[g],h=!e||e===u.object,h&&(m=u.object._offInternal,m.apply(u.object,[u.event,u.callback,u.context,!0]));return this._listeningTo=[],this}o=n,e&&e.constructor===String&&(o=e),o.constructor===String?v[o]=i:v=o;for(f in v)if(v.hasOwnProperty(f))for(r=t.Events._getEvents(f),a=0;a<r.length;a+=1)for(s=r[a].event,l=r[a].attribute,_=this._listeningTo?this._listeningTo.length:0,g=_-1;g>=0;g-=1)u=this._listeningTo[g],h=!e||e===u.object,c=!s||s===u.event,d=!i||v[f]===u.callback,p=!l||l===u.attribute,h&&c&&d&&p&&(m=this._listeningTo[g].object._offInternal,m.apply(this._listeningTo[g].object,[this._listeningTo[g].event,this._listeningTo[g].callback,this._listeningTo[g].context,!0]),this._listeningTo.splice(g,1));return this}},t.Events.bind=t.Events.on,t.Events.unbind=t.Events.off,t.Events.EventType={ADD:"add",ALLADDED:"alladded",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",DESTROY:"destroy",ALLREMOVED:"allremoved",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",READY:"ready",ALL:"all"},t.Events.Mixin=function(t,e){var n,i=e||this;for(n in i)"function"==typeof i[n]&&(t[n]=i[n]);t.eventHandlers={},t._listeningTo=[]},t.Events._onceInternal=function(t,e,n,i,r){var o,a,s,l,u,h;u=this._getEventMap(t,e,n);for(h in u)if(u.hasOwnProperty(h))for(o=this._getEvents(h),a=0;a<o.length;a+=1)s=o[a].event,l=o[a].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[s]&&(this.eventHandlers[s]=[]),this.eventHandlers[s].push({callback:u[h],context:n,attribute:l,once:!0,fired:!1,listen:i,otherObj:r});return this},t.Events._shouldFire=function(t){return!t.once||!t.fired&&(t.fired=!0,!0)},t.Events._getContext=function(t,e){return e.context||e.otherObj||t},t.Events.TriggerInternal=function(e,n){var i,r,o,a,s,l,u,h,c,d=this._getEvents(n);for(a=[],i=0;i<d.length;i+=1)r=d[i].event,o=d[i].attribute,a.push({event:r,attribute:o});for(i=0;i<a.length;i+=1){for(h=this._getHandlers(this.eventHandlers,t.Events.EventType.ALL),s=t.Events._getHandlers(this.eventHandlers,a[i].event,!1),l=0;l<(s?s.length:0);l+=1)s[l].attribute===a[i].attribute&&s[l].callback&&(u=Array.prototype.slice.call(arguments),s&&s[l]&&s[l].once&&(this._removeHandler(t.Events._getHandlers(this.eventHandlers,a[i].event,!0),s[l]),s[l].otherObj&&s[l].otherObj.stopListening(this,n,s[l].callback)),s&&s[l]&&this._shouldFire(s[l])&&(c=s[l].callback,e&&!s[l].ignoreSilent||c.apply(t.Events._getContext(this,s[l]),u.slice(2))));for(l=0;l<(h?h.length:0);l+=1)u=Array.prototype.slice.call(arguments),u.length>0&&(a[i].attribute?u[1]=a[i].event+":"+a[i].attribute:u[1]=a[i].event),h&&h[l]&&h[l].callback&&this._shouldFire(h[l])&&(c=h[l].callback,e&&!h[l].ignoreSilent||c.apply(t.Events._getContext(this,h[l]),u.slice(1))),h&&h[l]&&h[l].once&&(this._removeHandler(this._getHandlers(this.eventHandlers,t.Events.EventType.ALL,!0),h[l]),h[l].otherObj&&h[l].otherObj.stopListening(this,t.Events.EventType.ALL,h[l].callback))}return this},t.Events.OnInternal=function(e,n,i,r,o){var a,s,l,u,h,c,d;a=this._getEventMap(e,n,i);for(s in a)if(a.hasOwnProperty(s))for(l=this._getEvents(s),u=0;u<l.length;u+=1)h=l[u].event,c=l[u].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[h]&&(this.eventHandlers[h]=[]),d={callback:a[s],context:i,attribute:c,listen:r,ignoreSilent:o},this._checkForHandler(this.eventHandlers[h],d,t.Events._handlersIdentical)===-1&&this.eventHandlers[h].push(d);return this},t.Events._offInternal=function(t,e,n,i){var r,o;if(null==arguments||0==arguments.length)return this.eventHandlers={},this;if(null==t)return this._removeEvent(t,e,n,i),this;r=this._getEventMap(t,e,n);for(o in r)r.hasOwnProperty(o)&&this._removeEvent(o,r[o],n,i);return this},t.Events._getEventMap=function(t,e,n){var i={};return t.constructor===String?i[t]=e:(i=t,n=e),i},t.Events._removeEvent=function(e,n,i,r){var o,a,s,l,u,h,c,d,p,g=[];if(e)g=t.Events._getEvents(e);else if(void 0!==this.eventHandlers)for(s in this.eventHandlers)this.eventHandlers.hasOwnProperty(s)&&g.push({event:s});for(o=0;o<g.length;o+=1)if(s=g[o].event,l=g[o].attribute,void 0!==this.eventHandlers&&this.eventHandlers[s]instanceof Array){for(u=this.eventHandlers[s],a=u.length-1;a>=0;a-=1)h=void 0===n||null===n||u[a].callback==n,c=void 0===i||null===i||u[a].context==i,d=void 0===l||null===l||u[a].attribute==l,p=void 0===r||null===r||u[a].listen==r,h&&c&&d&&p&&u.splice(a,1);0===u.length&&delete this.eventHandlers[s]}},t.Events._removeHandler=function(t,e){var n,i,r,o,a,s;if(t)for(n=t.length-1;n>=0;n-=1)i=void 0===e.callback||null===e.callback||t[n].callback==e.callback,r=void 0===e.context||null===e.context||t[n].context==e.context,o=void 0===e.attribute||null===e.attribute||t[n].attribute==e.attribute,a=void 0===e.listen||null===e.listen||t[n].listen==e.listen,s=void 0===e.once||null===e.once||t[n].once==e.once,i&&r&&o&&a&&s&&t.splice(n,1)},t.Events._getEvents=function(t){var e,n,i,r,o=t?t.split(" "):[],a=[];for(e=0;e<o.length;e+=1)n=o[e].split(":"),i=n[0],r=n.length>1?n[1]:null,a.push({event:i,attribute:r});return a},t.Events._handlersIdentical=function(t,e){return t.callback===e.callback&&t.attribute===e.attribute&&t.context===e.context&&t.listen===e.listen&&t.once===e.once},t.Events._listenersIdentical=function(t,e){return t.event===e.event&&t.attribute===e.attribute&&t.context===e.context&&t.object===e.object},t.Events._checkForHandler=function(t,e,n){var i;if(void 0===t)return-1;for(i=0;i<t.length;i+=1)if(n(t[i],e))return i;return-1},t.Events._getHandlers=function(t,e,n){if(t&&t[e]instanceof Array){if(n)return t[e];var i,r=[];for(i=0;i<t[e].length;i++)r.push(t[e][i]);return r}return null},t.Model=function(e,n){t.Model._init(this,e,n,null)},t.Object.createSubclass(t.Model,t.Object,"oj.Model"),t.Model.prototype.Init=function(){t.Model.superclass.Init.call(this)},t.Model.prototype.attributes={},t.Model.prototype.defaults={},t.Model.prototype.id=null,t.Model.prototype.idAttribute="id",t.Model.prototype.urlRoot=null,t.Model.prototype.customURL=null,t.Model.prototype.validate=null,t.Model.prototype.validationError=null,t.Model._idCount=0,t.Model._init=function(n,i,r,o){var a,s,l=null;if(!t.Model._justExtending){n.Init(),t.Events.Mixin(n),n._clearChanged(),n.previousAttrs={},n.nestedSet=!1,n.index=-1,r=r||{},n.attributes={},n.defaults&&!r.ignoreDefaults&&(n.attributes=t.Model._cloneAttributes(e.isFunction(n.defaults)?n.defaults():n.defaults,null));for(l in o)o.hasOwnProperty(l)&&(n[l]=o[l]);if(i)if(a=r.parse,e.isFunction(a)&&(n.parse=a),s=t.Model._cloneAttributes(i,n.attributes),s=a?n.parse(s):s,null==s||void 0===s)n.attributes={};else for(l in s)s.hasOwnProperty(l)&&n._setProp(l,s[l],!1,!1,r);n.SetCid(),n.SetCollection(r.collection),r.customURL&&(n.customURL=r.customURL),r.url&&(n.url=r.url),r.urlRoot&&(n.urlRoot=r.urlRoot),n.initialize&&n.initialize(i,r),n.SetupId()}},t.Model.extend=function(n,i){t.Model._justExtending=!0;var r,o;r=new t.Model,t.Model._justExtending=!1,e.extend(r,this.prototype),n=n||{};for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);var a;if(a=n&&n.constructor&&n.hasOwnProperty("constructor")?n.constructor:function(e,i){t.Model._init(this,e,i,n)},e.extend(a,this),a.prototype=r,a.extend=t.Model.extend,a.prototype.constructor=a,t.Events.Mixin(a,this),i)for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return a},t.Model.prototype.TriggerInternal=function(t,e,n,i,r){},t.Model.prototype.SetCid=function(){this.GetCid()||(this.cid="id"+t.Model._idCount,t.Model._idCount=t.Model._idCount+1)},t.Model.prototype.GetCid=function(){return this.cid},t.Model.prototype.SetIndex=function(t){this.index=t},t.Model.prototype.GetIndex=function(){return this.index},t.Model.prototype.SetNext=function(t){var e=this.nextModel;return this.nextModel=t,e},t.Model.prototype.GetNext=function(){return this.nextModel},t.Model.prototype.SetPrevious=function(t){var e=this.previousModel;return this.previousModel=t,e},t.Model.prototype.GetPrevious=function(){return this.previousModel},t.Model.prototype.Merge=function(e,n,i){var r,o,a=!1,s=t.StringUtils.isString(n),l=!1;for(r in e.attributes)e.attributes.hasOwnProperty(r)&&(o=this.attributes[r]!=e.attributes[r],s?r===n&&o&&(a=!0):o&&(a=!0),o&&(l=!0,this.attributes[r]=e.attributes[r],this._addChange(r,e.attributes[r]),this._fireAttrChange(r,this.attributes[r],null,i)));return this.SetupId(),l&&this._fireChange(null,i),a},t.Model._hasProperties=function(t){var e;if(t&&t instanceof Object)for(e in t)if(t.hasOwnProperty(e))return!0;return!1},t.Model.prototype.SetCollection=function(t){return null==t?void delete this.collection:(this.collection=t,void this.SetupId())},t.Model.prototype.GetCollection=function(){return this.collection},t.Model.prototype._fireAttrChange=function(e,n,i,r){null!=e&&this.TriggerInternal(r,t.Events.EventType.CHANGE+":"+e,this,n,i)},t.Model.prototype._fireChange=function(e,n){this.TriggerInternal(n,t.Events.EventType.CHANGE,this,e,null)},t.Model.prototype.SetupId=function(){var t=null;if(this.collection&&this.collection.modelId){var n=this.collection.modelId;t=e.isFunction(n)?n.call(this.collection,this.attributes):n}if(!t){var i=this._getIdAttr();t=null!=this.attributes?this.attributes[i]:null}this.id=t},t.Model.prototype._setPropInternal=function(e,n,i){var r=t.Object.__innerEquals(this.attributes[e],n);return!(!i&&r)&&(this.attributes[e]=n,this.SetupId(),!r)},t.Model.prototype._clearChanged=function(){this.changed={}},t.Model.prototype._addChange=function(t,e){this.changed[t]=e},t.Model.prototype._setProp=function(e,n,i,r,o){if(null==e)return!0;var a,s,l={},u=this.nestedSet;if(r)for(a in e)e.hasOwnProperty(a)&&(l[a]=e[a]);else l[e]=n;if(s=o||{},!this._checkValid(l,{validate:s.validate},!1))return!1;u||(this._clearChanged(),this.changes=[]),this.nestedSet||(this.previousAttrs=t.Model._cloneAttributes(this.attributes,null)),this.nestedSet=!0;for(a in l)l.hasOwnProperty(a)&&(this._setPropInternal(a,l[a],i)?(this._addChange(a,l[a]),this.changes.push(a)):delete l[a]);var h=s.silent;for(a in l)l.hasOwnProperty(a)&&(!h&&(this.changes.length>0||u&&this.changes.indexOf(a)===-1)&&(this.pendingChanges=!0,this.pendingOpts=s),this._fireAttrChange(a,l[a],s,h));if(u)return!0;if(!h&&!u)for(;this.pendingChanges;)this.pendingChanges=!1,this._fireChange(this.pendingOpts,h);return this.nestedSet=!1,!0},t.Model.prototype.clear=function(e){var n,i,r={silent:!0};e=e||{},i=e.silent,r.validate=e.validate,this._clearChanged();for(n in this.attributes)if(this.attributes.hasOwnProperty(n)){if(!this._unsetInternal(n,r,!0))return!1;this.TriggerInternal(i,t.Events.EventType.CHANGE+":"+n,this,void 0,null)}return this.attributes={},this.SetupId(),this._fireAttrChange(null,null,null,i),this._fireChange(null,i),this},t.Model._cloneAttributes=function(e,n){n=n||{};var i;for(i in e)n.hasOwnProperty(i)&&e.hasOwnProperty(i)&&void 0===e[i]&&delete e[i];return t.CollectionUtils.copyInto(n,e,void 0,!0,1e4),n},t.Model.prototype.clone=function(){var e,n=new this.constructor;for(e in this)this.hasOwnProperty(e)&&this[e]!==this.attributes&&(n[e]=this[e]);return n.attributes=t.Model._cloneAttributes(this.attributes,null),delete n.cid,n.SetCid(),n.SetupId(),n},t.Model.prototype.Match=function(t,e){var n,i=this.GetId();return void 0!==i&&i==t||(n=this.cid,void 0!==n&&n==e)},t.Model.prototype.set=function(e,n,i){var r,o=i||{},a=!0;if(arguments&&arguments.length>0)if(t.StringUtils.isString(e))o.unset?this._unsetInternal(e,null,!1):this._setProp(e,n,!1,!1,o)||(a=!1);else if(o=n||{},o.unset)for(r in e)e.hasOwnProperty(r)&&this._unsetInternal(r,null,!1);else this._setProp(e,null,!0,!0,o)||(a=!1);return!!a&&this},t.Model.prototype.unset=function(t,e){return this._unsetInternal(t,e,!1)},t.Model.prototype._unsetInternal=function(t,e,n){e=e||{};var i=e.silent,r={};if(this.has(t)){if(!this._checkValid(r,e,!1))return!1;n||this._clearChanged(),delete this.attributes[t],this._addChange(t,void 0),this._fireAttrChange(t,null,null,i),this._fireChange(null,i)}return this.SetupId(),!0},t.Model.prototype.get=function(t){return this.attributes[t]},t.Model.prototype.has=function(e){return t.Collection._defined(this.attributes[e])},t.Model.prototype.fetch=function(n){n=n||{};var i,r=n.success,o=n.error,a=this;return i=t.Model._copyOptions(n),i.error=function(e,i,r){t.Model._triggerError(a,!1,n,i,r,e),o&&o.apply(a,arguments)},i.success=function(o){i.xhr&&(n.xhr=i.xhr),t.Model._fireSyncEvent(a,o,i,!1),e.isFunction(a.parse)&&a.set(a.parse(o),i),r&&r.call(t.Model.GetContext(i,a),a,o,n)},t.Model._internalSync("read",this,i)},t.Model.prototype.parse=function(t){return t},t.Model.prototype.url=function(){var e,n,i,r=this._getUrlRoot(),o=this.GetId();if(r)return o?r+"/"+encodeURIComponent(o):r;if(e=this.collection)return n=t.Model.GetPropValue(e,"url"),o&&n?(i="/"==t.Model._getLastChar(n)?"":"/",n+i+encodeURIComponent(this.GetId())):n;throw new t.URLError},t.Model.prototype.keys=function(){var t,e=[];for(t in this.attributes)this.attributes.hasOwnProperty(t)&&e.push(t);return e},t.Model.prototype.values=function(){var t,e=[];for(t in this.attributes)this.attributes.hasOwnProperty(t)&&e.push(this.get(t));return e},t.Model.prototype.pairs=function(){var t,e,n=[];for(t in this.attributes)this.attributes.hasOwnProperty(t)&&(e=[],e.push(t),e.push(this.get(t)),n.push(e));return n},t.Model.prototype.omit=function(t){var e,n,i=[],r={};if(t instanceof Array)i=t;else for(e=0;e<arguments.length;e++)i.push(arguments[e]);for(n in this.attributes)this.attributes.hasOwnProperty(n)&&i.indexOf(n)==-1&&(r[n]=this.get(n));return r},t.Model.prototype.pick=function(t){var e,n=[],i={};if(t instanceof Array)n=t;else for(e=0;e<arguments.length;e++)n.push(arguments[e]);for(e=0;e<n.length;e++)this.attributes.hasOwnProperty(n[e])&&(i[n[e]]=this.get(n[e]));return i},t.Model.prototype.invert=function(){var t,e,n={};for(t in this.attributes)this.attributes.hasOwnProperty(t)&&(e=this.get(t),n[e]=t);return n},t.Model._getLastChar=function(t){return t.charAt(t.length-1)},t.Model.prototype._saveUrl=function(){var t=this._getUrlRoot();return t?t:this.GetCollection()?this.GetCollection().url:null},t.Model.prototype._getUrlRoot=function(){return t.Model.GetPropValue(this,"urlRoot")},t.Model.prototype.parseSave=function(t){return t},t.Model.prototype.isValid=function(){var t={};return t.validate=this.validate,this._checkValid(this.attributes,t,!1)},t.Model._isValidateSet=function(t,e){return t=t||{},void 0!==t.validate&&null!==t.validate?t.validate:e},t.Model.prototype._checkValid=function(e,n,i){n=n||{};var r=this.validate;return!(r&&t.Model._isValidateSet(n,i)&&(this.validationError=r.call(this,e,n),this.validationError))||(this.TriggerInternal(!1,t.Events.EventType.INVALID,this,this.validationError,n),!1)},t.Model._processArgs=function(e){var n,i,r=!1,o={},a={};if(e&&e.length>0){if(e.length>1&&e[e.length-1]&&t.Model._hasProperties(e[e.length-1])&&(r=!0,o=e[e.length-1]||{}),null==e[0])return{attributes:null,options:o};if(t.Model._hasProperties(e[0])||t.Object.isEmpty(e[0]))for(n in e[0])e[0].hasOwnProperty(n)&&(a[n]=e[0][n]);else for(i=0;i<e.length;i+=2)(void 0!==e[i]||i<e.length-1||!r&&i===e.length-1)&&(a[e[i]]=e[i+1])}return{attributes:a,options:o}},t.Model._copyOptions=function(t){var e,n={};t=t||{};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},t.Model._triggerError=function(e,n,i,r,o,a){i=i||{},i.textStatus=r,i.errorThrown=o,e.TriggerInternal(n,t.Events.EventType.ERROR,e,a,i)},t.Model.prototype.save=function(n,i){var r,o,a,s,l,u,h,c,d,p=t.Model._processArgs(arguments);d=void 0===n?void 0:p.attributes,i=i||{},h=t.Model._copyOptions(p.options);var g=e.extend(!0,{},this.attributes,d);return!!this._checkValid(g,h,!0)&&(h.wait||this.set(d),r=void 0!==h.forceNew&&h.forceNew,s=this,l=h.error,u=h.patch,h.error=function(e,n,r){t.Model._triggerError(s,!1,i,n,r,e),l&&l.apply(s,arguments)},h.saveAttrs=h.wait?this._attrUnion(d):this.attributes,c=this.attributes,this.attributes=h.saveAttrs,h.saveAttrs=this.toJSON(),this.attributes=c,r||this.isNew()?(a=t.Model._getSuccess(h),h.success=function(n,r,o){var l;if(h.xhr&&(i.xhr=h.xhr),n&&!t.Object.isEmpty(n)){if(l=e.isFunction(s.parse)?s.parse(n):n,!s._checkValid(l,h,!0))return;if(s.attributes=e.extend(!0,s.attributes,l),h.wait)for(var u in d)l.hasOwnProperty(u)&&(d[u]=l[u]);s.SetupId()}t.Model._fireSyncEvent(s,n,h,!1),h.wait&&s.set(d),a&&a.call(t.Model.GetContext(h,s),s,n,i),s._clearChanged()},h.attrs||(h.attrs=h.saveAttrs),h.parse=!0,u&&(h.saveAttrs=h.attrs),t.Model._internalSync("create",this,h)):(o=h.success,h.success=function(n,r,a){var l;if(h.xhr&&(i.xhr=h.xhr),n&&!t.Object.isEmpty(n)){if(l=e.isFunction(s.parse)?s.parse(n):n,s.attributes=e.extend(!0,s.attributes,l),h.wait)for(var u in d)l.hasOwnProperty(u)&&(d[u]=l[u]);s.SetupId()}t.Model._fireSyncEvent(s,n,h,!1),h.wait&&s.set(d),o&&o.call(t.Model.GetContext(h,s),s,n,i),s._clearChanged()},h.attrs||(void 0===d?h.attrs=void 0:h.attrs=u?d:h.saveAttrs),t.Model._internalSync(u?"patch":"update",this,h)))},t.Model.prototype._attrUnion=function(t){var e,n={};for(e in this.attributes)this.attributes.hasOwnProperty(e)&&(n[e]=this.attributes[e]);for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},t.Model.GetPropValue=function(t,n){return t?e.isFunction(t[n])?t[n]():t[n]:e.isFunction(n)?n():n},t.Model.IsComplexValue=function(t){return t&&t.hasOwnProperty("value")&&t.hasOwnProperty("comparator")},t.Model.prototype._hasAttrs=function(e){var n;for(n in e)if(e.hasOwnProperty(n)){if(!this.attributes.hasOwnProperty(n))return!1;for(var i=Array.isArray(e[n])?e[n]:[e[n]],r=0;r<i.length;r++)if(t.Model.IsComplexValue(i[r])){var o=i[r].comparator,a=i[r].value;if(t.StringUtils.isString(o))throw new Error("String comparator invalid for local where/findWhere");if(!o(this,n,a))return!1}else if(e[n]!==this.attributes[n])return!1}return!0},t.Model.prototype.matches=function(t){return function(e){for(var n in t)if(e.get(n)!==t[n])return!1;return!0}(this)},t.Model.prototype.Contains=function(t){var e,n=t.constructor===Array?t:[t];for(e=0;e<n.length;e++)if(this._hasAttrs(n[e]))return!0;return!1},t.Model._getSuccess=function(t){return null!=t&&t.success?t.success:null},t.Model.GetContext=function(t,e){return void 0!==t&&void 0!==t.context?t.context:e},t.Model.prototype.isNew=function(){return void 0==this.GetId()},t.Model.prototype._getIdAttr=function(){return this.idAttribute||"id"},t.Model.prototype.GetId=function(){return this.id},t.Model.prototype.changedAttributes=function(e){if(e){var n,i={};for(n in e)e.hasOwnProperty(n)&&(t.Object.__innerEquals(e[n],this.attributes[n])||(i[n]=e[n]));return!t.Object.isEmpty(i)&&i}return!t.Object.isEmpty(this.changed)&&this.changed},t.Model.prototype.hasChanged=function(e){return void 0!==e?t.Model._hasProperties(this.changed)&&this.changed.hasOwnProperty(e):t.Model._hasProperties(this.changed)},t.Model.prototype.destroy=function(e){e=e||{};var n,i,r,o,a=e.wait,s=e.error,l=this;o=t.Model._copyOptions(e),n=t.Model._getSuccess(o),i=t.Model.GetContext(o,this);var u=this.GetCollection();return o.success=function(i,r,s){if(o.xhr&&(e.xhr=o.xhr),u){var h=t.StringUtils.isString(i)&&!t.StringUtils.isEmpty(i)?JSON.parse(i):i;u._setPagingReturnValues(h,null,i,!0)}a&&l._fireDestroy(!1),t.Model._fireSyncEvent(l,i,o,!1),n&&n.call(t.Model.GetContext(o,l),l,i,e)},o.error=function(n,i,r){l.TriggerInternal(!1,t.Events.EventType.ERROR,l,n,e),s&&s.apply(l,arguments)},this.isNew()?(a||this._fireDestroy(!1),n&&n.call(t.Model.GetContext(o,l),l,null,e),!1):(r=t.Model._internalSync("delete",this,o),a||this._fireDestroy(!1),r)},t.Model.prototype._fireRequest=function(e,n,i,r){this.TriggerInternal(r,t.Events.EventType.REQUEST,e,n,i)},t.Model.prototype._fireDestroy=function(e){this.TriggerInternal(e,t.Events.EventType.DESTROY,this,this.collection,null)},t.Model._fireSyncEvent=function(e,n,i,r){e.TriggerInternal(r,t.Events.EventType.SYNC,e,n,i)},t.Model.prototype.toJSON=function(){var t,e={};for(t in this.attributes)this.attributes.hasOwnProperty(t)&&(Array.isArray(this.attributes[t])?e[t]=this.attributes[t].slice(0):e[t]=this.attributes[t]);return e},t.Model.prototype.previous=function(t){return this.previousAttrs[t]},t.Model.prototype.previousAttributes=function(){return this.previousAttrs},t.Model.prototype.sync=function(e,n,i){return t.sync(e,n,i)},t.Model._internalSync=function(e,n,i){i=i||{},n.oauth&&(i.oauthHeader=n.oauth.getHeader()),!i.dataType&&n.dataType&&(i.dataType=n.dataType),!i.jsonpCallback&&n.jsonpCallback&&(i.jsonpCallback=n.jsonpCallback),"create"!==e&&"patch"!==e&&"update"!==e||(i.parsedData=n.parseSave.call(n,"patch"===e?i.attrs:i.saveAttrs));var r=null;n instanceof t.Model&&(r=n.GetId());var o={};if(i)for(var a in i)o[a]=i[a];var s=t.Model.SetCustomURLOptions(r,n,i);for(var a in s)o[a]=s[a];return i.xhr=n.sync(e,n,o),o.xhr&&(i.xhr=o.xhr),i.xhr},t.Model.SetCustomURLOptions=function(e,n,i){var r=n instanceof t.Collection?n.ModifyOptionsForCustomURL(i):{};return e&&(r.recordID=e),r},t.sync=function(e,n,i){function r(t){return n._fireRequest(n,t,i,i.silent),t}i=i||{};var o,a,s,l=i.success,u=i.error;if(a="jsonp"!==i.dataType,s=n.customURL,"create"===e.valueOf()){var h=n._saveUrl();return h=h?h:t.Model.GetPropValue(n,"url"),o=new t.RestImpl(h,s),r(o.addRecord(i.parsedData,u,i,n))}if("read"===e.valueOf()){if(n instanceof t.Model){var h=i.url?i.url:t.Model.GetPropValue(n,"url");return o=new t.RestImpl(h,s),r(o.getRecord(l,u,n.GetId(),i,t.Model.GetContext(i,n)))}var h=n.GetCollectionFetchUrl(i);return o=new t.RestImpl(h,s),r(o.getRecords(l,u,i,n))}o=new t.RestImpl(t.Model.GetPropValue(n,"url"),s);var c=null;return n instanceof t.Model&&(c=n.GetId()),"update"===e.valueOf()?r(o.updateRecord(l,c,i.parsedData,u,i,n,!1)):"patch"===e.valueOf()?r(o.updateRecord(l,c,i.parsedData,u,i,n,!0)):"delete"===e.valueOf()?r(o.deleteRecord(c,u,i,n)):null},t.Model._urlError=function(t){if(!t.url)throw new Error("The url property or function must be specified")},t.ajax=function(n){return arguments&&arguments.length>0&&t.Model._urlError(arguments[0]),e.ajax.apply(t,arguments)},t.URLError=function(){this.name="URLError",this.message="No URL defined"},t.URLError.prototype=new Error,t.URLError.constructor=t.URLError,t.RestImpl=function(t,n){this.rootURL=t,this.customURL=n,e.support.cors=!0},t.RestImpl._HEADER_PROP="headers",t.RestImpl.addOptions=function(n,i,r){var o;n=e.extend(!0,n,r);for(o in i)i.hasOwnProperty(o)&&"oauthHeader"!==o&&(n.hasOwnProperty(o)||(n[o]=i[o]),o===t.RestImpl._HEADER_PROP&&(n[o]=e.extend(!0,n[o],i[o])));if(i.oauthHeader){n[t.RestImpl._HEADER_PROP]||(n[t.RestImpl._HEADER_PROP]={});for(o in i.oauthHeader)i.oauthHeader.hasOwnProperty(o)&&(n[t.RestImpl._HEADER_PROP].hasOwnProperty(o)||(n[t.RestImpl._HEADER_PROP][o]=i.oauthHeader[o]))}return n},t.RestImpl.prototype.getRecords=function(e,n,i,r){i=i||{};var o="jsonp"===i.dataType,a=this._getURL("read",this.rootURL,this.customURL,null,r,i),s={crossDomain:i.crossDomain||!o,dataType:this._getDataType(i),jsonpCallback:i.jsonpCallback,context:null!==r?r:this,success:e,error:n};return s=this._addHeaderProp(s),s=t.RestImpl.addOptions(s,i,a),i.xhr=this.ajax(s,r),i.xhr},t.RestImpl.prototype._addHeaderProp=function(e){return e[t.RestImpl._HEADER_PROP]={"Accept-Language":this.getLocale()},e},t.RestImpl.prototype.getRecord=function(e,n,i,r,o){r=r||{};var a="jsonp"===r.dataType,s=this._getURL("read",this.rootURL,this.customURL,i,o,r),l={crossDomain:r.crossDomain||!a,dataType:this._getDataType(r),jsonpCallback:r.jsonpCallback,context:null!==o?o:this,success:e,error:n};return l=this._addHeaderProp(l),l=t.RestImpl.addOptions(l,r,s),r.xhr=this.ajax(l,o),r.xhr},t.RestImpl.prototype.updateRecord=function(e,n,i,r,o,a,s){o=o||{};var l="jsonp"===o.dataType,u=this._getURL(s?"patch":"update",this.rootURL,this.customURL,n,a,o),h=t.RestImpl._emulateHTTP(o),c={crossDomain:o.crossDomain||!l,contentType:this._getContentType(o),dataType:this._getDataType(o),jsonpCallback:o.jsonpCallback,data:this._getData(JSON.stringify(i),o,u),emulateHTTP:h,emulateJSON:t.RestImpl._emulateJSON(o),success:e,error:r,context:null!==a?a:this};return c=this._addHeaderProp(c),c=t.RestImpl.addOptions(c,o,u),c=t.RestImpl._beforeSendMod(h,c),o.xhr=this.ajax(c,a),o.xhr},t.RestImpl._beforeSendMod=function(t,e){if(t){var n=e.beforeSend;e.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",e._method),n)return n.apply(this,arguments)}}return e},t.RestImpl.prototype._getData=function(e,n,i){if(t.RestImpl._emulateJSON(n)){var r={_method:i._method?i._method:i.type};return e&&(r.model=e),r}return e},t.RestImpl.prototype._getHTTPMethod=function(e,n){if(n.type)return{method:n.type};var i=null;if("create"===e&&(i="POST"),"delete"===e&&(i="DELETE"),"patch"===e&&(i="PATCH"),"update"===e&&(i="PUT"),t.RestImpl._emulateHTTP(n)){var r={};return r.method="POST",r._method=i,r}return null===i&&(i="GET"),{method:i}},t.RestImpl._emulateHTTP=function(e){return e.emulateHTTP||t.emulateHTTP},t.RestImpl._emulateJSON=function(e){return e.emulateJSON||t.emulateJSON},t.RestImpl.prototype._getURL=function(n,i,r,o,a,s){var l=this._getHTTPMethod(n,s);if(e.isFunction(r)){var u=r.call(this,n,a,t.Model.SetCustomURLOptions(o,a,s));if(t.StringUtils.isString(u)){var h={url:u,type:l.method};return l._method&&(h._method=l._method),h}if(u)return u.url=u.hasOwnProperty("url")?u.url:i,u.hasOwnProperty("type")||(u.type=l.method),u.hasOwnProperty("data")||l._method&&(u._method=l._method),u}var h={url:t.Model.GetPropValue(null,i),type:l.method};return l._method&&(h._method=l._method),h},t.RestImpl.prototype.deleteRecord=function(e,n,i,r){i=i||{};var o="jsonp"===i.dataType,a=this._getURL("delete",this.rootURL,this.customURL,e,r,i),s=t.RestImpl._emulateHTTP(i),l=t.RestImpl._emulateJSON(i),u={crossDomain:i.crossDomain||!o,success:i.success,error:n,context:null!==r?r:this,emulateHTTP:s,emulateJSON:l},h=this._getData(null,i,a);return h&&(u.data=h),u=t.RestImpl.addOptions(u,i,a),u=t.RestImpl._beforeSendMod(s,u),i.xhr=this.ajax(u,r),i.xhr},t.RestImpl.prototype.addRecord=function(e,n,i,r){i=i||{};var o=JSON.stringify(e),a="jsonp"===i.dataType,s=this._getURL("create",this.rootURL,this.customURL,null,r,i),l=t.RestImpl._emulateHTTP(i),u={crossDomain:i.crossDomain||!a,contentType:i.contentType||"application/json",dataType:this._getDataType(i),jsonpCallback:i.jsonpCallback,data:this._getData(o,i,s),success:i.success,error:n,emulateHTTP:l,emulateJSON:t.RestImpl._emulateJSON(i),context:null!==r?r:this};return u=this._addHeaderProp(u),u=t.RestImpl.addOptions(u,i,s),i.xhr=this.ajax(u,r),i.xhr},t.RestImpl.prototype._getDataType=function(e){
return t.RestImpl._emulateJSON(e)&&!t.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.dataType||"json"},t.RestImpl.prototype._getContentType=function(e){return t.RestImpl._emulateJSON(e)&&!t.RestImpl._emulateHTTP(e)?"application/x-www-form-urlencoded":e.contentType||"application/json"},t.RestImpl.prototype.getLocale=function(){return t.Config.getLocale()},t.RestImpl.prototype.ajax=function(e,n){if(null===e.url||void 0===e.url)throw new t.URLError;var i=t.ajax(e);return n._addxhr&&n._addxhr(i),i},t.OAuth=function(e,n){n=n||{},e=e||"Authorization",t.OAuth._init(this,n,e)},t.Object.createSubclass(t.OAuth,t.Object,"oj.OAuth"),t.OAuth.prototype.Init=function(){t.OAuth.superclass.Init.call(this)},t.OAuth.prototype.getHeader=function(){var t={};return this.accessTokenResponse.access_token||this.clientCredentialGrant(),t[this.accessTokenRequest.auth_header]="Bearer "+this.accessTokenResponse.access_token,t},t.OAuth.prototype.isInitialized=function(){return!!this.accessTokenResponse.access_token},t.OAuth.prototype.clientCredentialGrant=function(){var n={},i=this;n[i.accessTokenRequest.auth_header]="Basic "+t.OAuth._base64_encode(i.accessTokenRequest.client_id+":"+i.accessTokenRequest.client_secret),e.ajax({type:"POST",async:!1,url:this.accessTokenRequest.bearer_url,data:"grant_type=client_credentials",headers:n,success:function(e){t.OAuth._initAccessToken(i.accessTokenResponse,e)},error:function(t,e,n){throw new Error(t.responseText)}})},t.OAuth.prototype.setAccessTokenResponse=function(e){t.OAuth._initAccessToken(this.accessTokenResponse,e)},t.OAuth.prototype.getAccessTokenResponse=function(){return this.accessTokenResponse},t.OAuth.prototype.cleanAccessTokenResponse=function(){t.OAuth._cleanAccessToken(this.accessTokenResponse)},t.OAuth.prototype.setAccessTokenRequest=function(e){t.OAuth._initAccessToken(this.accessTokenRequest,e)},t.OAuth.prototype.getAccessTokenRequest=function(){return this.accessTokenRequest},t.OAuth.prototype.cleanAccessTokenRequest=function(){t.OAuth._cleanAccessToken(this.accessTokenRequest)},t.OAuth._init=function(e,n,i){e.Init(),e.accessTokenRequest={},e.accessTokenResponse={},n.access_token?t.OAuth._initAccessToken(e.accessTokenResponse,n):n.client_id&&n.client_secret&&n.bearer_url&&t.OAuth._initAccessToken(e.accessTokenRequest,n),e.accessTokenRequest.auth_header=i},t.OAuth._initAccessToken=function(t,e){var n;e=e||{};for(n in e)t[n]=e[n]},t.OAuth._cleanAccessToken=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"auth_header"!==e&&(t[e]=null,delete t[e])},t.OAuth._base64_encode=function(t){var e,n,i,r,o=0,a=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[];do e=t.charCodeAt(o++),n=t.charCodeAt(o++),i=t.charCodeAt(o++),r=e<<16|n<<8|i,e=r>>18&63,n=r>>12&63,i=r>>6&63,r&=63,l[a++]=s.charAt(e)+s.charAt(n)+s.charAt(i)+s.charAt(r);while(o<t.length);return l=l.join(""),e=t.length%3,(e?l.slice(0,e-3):l)+"===".slice(e||3)},t.Collection=function(e,n){t.Collection._justExtending||t.Collection._init(this,e,n,null)},t.Object.createSubclass(t.Collection,t.Object,"oj.Collection"),t.Collection.prototype.model=null,t.Collection.prototype.modelId=function(t){var e=this.model;return e&&t?t[e.idAttribute||e.prototype.idAttribute||"id"]:null},t.Collection.prototype.length=void 0,t.Collection.prototype.models=void 0,t.Collection.prototype._modelIndices=[],t.Collection.prototype.url=null,t.Collection.prototype.changes=[],t.Collection.prototype.customURL=null,t.Collection.prototype.customPagingOptions=null,t.Collection.prototype.lastFetchSize=void 0,t.Collection.prototype.hasMore=!1,t.Collection.prototype.totalResults=void 0,t.Collection.prototype.lastFetchCount=void 0,t.Collection.prototype.modelLimit=-1,t.Collection.prototype.offset=void 0,t.Collection.prototype.fetchSize=-1,t.Collection.prototype.sortDirection=1,t.Collection.prototype.comparator=null,t.Collection.prototype.Init=function(){t.Collection.superclass.Init.call(this)},t.Collection.extend=function(n,i){t.Collection._justExtending=!0;var r=new t.Collection;t.Collection._justExtending=!1,e.extend(r,this.prototype);var o;if(o=n&&n.constructor&&n.hasOwnProperty("constructor")?n.constructor:function(e,i){t.Collection._init(this,e,i,n)},i){var a;for(a in i)i.hasOwnProperty(a)&&(o[a]=i[a])}if(n){var a;for(a in n)n.hasOwnProperty(a)&&(r[a]=n[a])}return e.extend(o,this),o.prototype=r,o.extend=t.Collection.extend,o.prototype.constructor=o,o},t.Collection._init=function(e,n,i,r){var o,a,s,l;if(e.Init(),t.Events.Mixin(e),r)for(o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);for(i=i||{},s=["comparator","customPagingOptions","customURL",t.Collection._FETCH_SIZE_PROP,"model","modelLimit","sortDirection","url"],a=0;a<s.length;a++)i.hasOwnProperty(s[a])&&void 0!==i[s[a]]&&(e[s[a]]=i[s[a]]);if(void 0===e._getFetchSize(null)&&e.setFetchSize(-1),void 0===e.modelLimit&&e.setModelLimit(-1),e.hasMore=!1,e.lruCount=0,e._setModels([],!0),i.parse&&(n=e.parse(n)),null!=n)for(i.noparse=!0,l=n instanceof Array?n:[n],a=0;a<l.length;a+=1)e.add(l[a],i);e._setLength(),n||(e.totalResults=void 0),r&&r.initialize&&r.initialize.call(e,n,i)},t.Collection.prototype.on=function(t,e){},t.Collection.prototype.OnInternal=function(t,e,n,i,r){},t.Collection.prototype.TriggerInternal=function(t,e,n,i,r){},t.Collection.prototype._fireRequest=function(e,n,i,r){this.TriggerInternal(r,t.Events.EventType.REQUEST,e,n,i)},t.Collection.prototype._resetChanges=function(){this.changes=[]},t.Collection.prototype._setChangeAt=function(t,e){for(var n=t;n<t+e;n++)this.changes.indexOf(n)===-1&&(this.changes.push(n),this.changes.sort(function(t,e){return t-e}))},t.Collection.prototype._setModels=function(t,e){if(this.models=t,e)this._modelIndices=[],this._resetChanges();else for(var n=0;n<t.length;n++)t[n]&&this._modelIndices.push(n)},t.Collection.prototype._getModels=function(){return this.models},t.Collection.prototype._getModelsLength=function(){return this._getModels().length},t.Collection.prototype._overUpperLimit=function(t){return!(t<this._getModelsLength())&&!(this.IsVirtual()&&(!this._hasTotalResults()||0===this._getModelsLength()))},t.Collection.prototype._hasTotalResults=function(){return t.Collection._defined(this.totalResults)},t.Collection._defined=function(t){return null!=t},t.Collection.prototype._pushModel=function(t){this._getModels().push(t),this._modelIndices.push(this._getModelsLength()-1),this._setChangeAt(this._getModelsLength()-1,1)},t.Collection.prototype._pushModels=function(t){this._makeModelHead(t),this._pushModel(t),this.lruCount++,t.SetIndex(this._getModelsLength()-1)},t.Collection.prototype._reduceLRU=function(t){if(t)for(var e=0;e<t.length;e++)t[e]&&this.lruCount--},t.Collection.prototype._spliceModels=function(t,e,n){for(var i=t;i<t+e;i++)this._removePrevNext(this._getModel(i));void 0===n?(this._reduceLRU(this._getModels().splice(t,e)),this._spliceModelIndices(t,t+e-1)):(this._reduceLRU(this._getModels().splice(t,e,n)),this._spliceModelIndices(t,t+e-1),this._insertModelIndex(t),this._makeModelHead(n)),this._setChangeAt(t,e),this.lruCount<0&&(this.lruCount=0),this._realignModelIndices(t)},t.Collection.prototype._getModel=function(t){return this._getModels()[t]},t.Collection.prototype._realignModelIndices=function(t){for(var e,n=0;n<this._modelIndices.length;n++)e=this._modelIndices[n],e>=t&&this._getModel(e)&&this._getModel(e).SetIndex(e)},t.Collection.prototype._removePrevNext=function(t){if(t){var e=t.GetPrevious(),n=t.GetNext();e?e.SetNext(n):this.head=n,n?n.SetPrevious(e):this.tail=e}},t.Collection.prototype._makeModelHead=function(t){t.SetNext(this.head),this.head?this.head.SetPrevious(t):this.tail=t,t.SetPrevious(null),this.head=t},t.Collection.prototype._setModelIndex=function(t){this._modelIndices.indexOf(t)===-1&&this._modelIndices.push(t)},t.Collection.prototype._insertModelIndex=function(t){for(var e=0;e<this._modelIndices.length;e++)this._modelIndices[e]>=t&&this._modelIndices[e]++;this._modelIndices.push(t)},t.Collection.prototype._spliceModelIndices=function(t,e){void 0===e&&(e=t),this._clearModelIndices(t,e);for(var n=e-t+1,i=0;i<this._modelIndices.length;i++)this._modelIndices[i]>e&&(this._modelIndices[i]-=n)},t.Collection.prototype._clearModelIndices=function(t,e){void 0===e&&(e=t);for(var n=t;n<=e;n++){var i=this._modelIndices.indexOf(t);i>-1&&this._modelIndices.splice(i,1)}},t.Collection.prototype._setModel=function(t,e){var n=this._getModel(t);this._removePrevNext(n),n||this.lruCount++,this._setChangeAt(t,1),this._getModels()[t]=e,e&&(this._setModelIndex(t),e.SetIndex(t),this._makeModelHead(e))},t.Collection.prototype._clearOutModels=function(t){var e,n,i=this.tail,r=0;for(this.tail=null;i&&r<t;)e=i.GetIndex(),n=this._getModel(e),n&&n.hasChanged()?(this.tail||(this.tail=i),i=i.GetPrevious()):(this.lruCount--,e>-1&&(this._setModel(e,void 0),this._clearModelIndices(e,e)),i.SetNext(null),i=i.SetPrevious(null),r++);this.tail||(this.tail=i),this.lruCount<0&&(this.lruCount=0),0===this.lruCount&&(this.head=null,this.tail=null)},t.Collection.prototype._resetLRU=function(){this.lruCount=0,this.head=null,this.tail=null},t.Collection.prototype._manageLRU=function(t){if(this.IsVirtual()){var e=this._getModelLimit();e>-1&&this.lruCount+t>e&&this._clearOutModels(this.lruCount+t-e)}},t.Collection.prototype.clone=function(){return this._cloneInternal(!0)},t.Collection.prototype._cloneInternal=function(t){var e,n,i=new this.constructor;if(this.IsVirtual()&&(i=this._copyFetchProperties(i),i._resetModelsToFullLength()),i=this._copyProperties(i),t){var r=[];for(e=0;e<this._modelIndices.length;e++)r.push(this._modelIndices[e]);r.sort(function(t,e){return t-e});var o;for(e=0;e<r.length;e++)o=r[e],n=this._atInternal(o,null,!0,!1),n&&i._addInternal(n.clone(),{at:o},!0,!1)}return i},t.Collection.prototype._copyProperties=function(t){var e,n,i=["comparator","model","modelId"];for(n=0;n<i.length;n++)e=i[n],t[e]=this[e];return t},t.Collection.prototype._copyFetchProperties=function(e){var n,i,r=["totalResults","hasMore",t.Collection._FETCH_SIZE_PROP];for(i=0;i<r.length;i++)n=r[i],e[n]=this[n];return e},t.Collection.prototype._getLength=function(){return this.length},t.Collection.prototype._setLength=function(){var t=this._getModelsLength();this.length=t,this.IsVirtual()||(this.totalResults=t)},t.Collection._createModel=function(t,n,i){return t.model?e.isFunction(t.model)?new t.model(n,i):new t.model.constructor(n,i):null},t.Collection.prototype._newModel=function(e,n,i,r){var o,a=null,s=i||{};return s.ignoreDefaults=r,e instanceof t.Model?a=e:this.model?a=t.Collection._createModel(this,e,s):(s.collection=this,a=new t.Model(e,s)),s.validate&&a.validate&&(o=a.validate(a.attributes))?(s.validationError=o,this.TriggerInternal(!1,t.Events.EventType.INVALID,a,o,s),null):a},t.Collection.prototype.add=function(t,e){this._manageLRU(1);var n=e||{};return this._handlePromise(this._addInternal(t,e,!1,n.deferred))},t.Collection.prototype._addInternal=function(e,n,i,r){function o(t,e){void 0===g?(t._pushModels(e),c=t._getModelsLength()-1,t._getModel(c).SetCid()):(c=g,t.IsVirtual()&&i?t._setModel(c,e):t._spliceModels(c,0,e),t._getModel(c).SetCid(),g+=1),void 0===e.GetCollection()&&e.SetCollection(t),t._setLength(),t._listenToModel(e),S=!0}function a(e,r,o,a,s){if(i&&(n=n||{},n.fillIn=!0),y&&void 0===r&&!v&&void 0===g&&e._getLength()>1){c>-1&&(d=e._getModel(c).cid);var l={};t.CollectionUtils.copyInto(l,n),l.add=!0,e.sort(l),c>-1&&(c=e.IsVirtual()?-1:e.indexOf(e.getByCid(d),s))}S&&(n.at&&(n.index=c),a?(a.TriggerInternal(f,t.Events.EventType.ADD,a,e,n),C.push(a)):(o.TriggerInternal(f,t.Events.EventType.ADD,o,e,n),C.push(o)))}function s(e,n,r,s,l){var u,h=null;return!_&&m&&r?(y=r.Merge(n,e.comparator,f),h=r):(_||(u=e._getLocal(s),u&&i&&g!==u.index&&t.Logger.warn("Duplicate ID fetched or added without merging, the id = "+u.GetId())),void 0===u?(o(e,s),h=s):h=u),a(e,u,r,s,l),h}function l(e,r,o){S=!1;var a=e._newModel(r,!0,n,!1),l=null,u=null;if(null!=a){if(c=-1,a.SetupId(),l=r instanceof t.Model?r:a,o)return _?new Promise(function(t,n){var i=s(e,l,void 0,a,o);b.push(i),t(i)}):e._getInternal(l,{silent:!0},o,!0).then(function(t){u=t.m;var n=s(e,l,u,a,o);b.push(n)});!_&&m&&(u=i?e._getLocal(l):e.get(l));var h=s(e,l,u,a,o);h&&b.push(h)}else b.push(!1)}function u(t,e){return t.parse&&n.parse&&!n.noparse?t.parse(e):e}n=n||{};var h,c,d,p=[],g=n.at,f=n.silent,_=n.force,m=n.merge||!1,v=n.sort,y=!0,S=!1,C=[],b=[];if(void 0!==g&&g<0&&(g+=this._getLength()+1),e instanceof Array?p=e:p.push(e),!i&&(this.IsVirtual()||r)){var E=this;return new Promise(function(e,i){var r=function(t){return new Promise(function(e,n){l(E,p[t],!0).then(function(){e(t+1)},n)})},o=Promise.resolve(0);for(p=u(E,p),h=0;h<p.length;h++)o=o.then(r);o.then(function(){C.length>0&&E.TriggerInternal(n.silent,t.Events.EventType.ALLADDED,E,C,n),e(t.Collection._returnModels(b))},i)})}for(p=u(this,p),h=0;h<p.length;h++)l(this,p[h],!1);return C.length>0&&this.TriggerInternal(n.silent,t.Events.EventType.ALLADDED,this,C,n),t.Collection._returnModels(b)},t.Collection._returnModels=function(t){return 1===t.length?t[0]:t},t.Collection.prototype._hasComparator=function(){return t.Collection._defined(this.comparator)},t.Collection.prototype.sort=function(e){e=e||{};var n,i=e.silent,r=this.comparator;if(!this._hasComparator())return null;if(this.IsVirtual()){var o=this.totalResults;this._hasTotalResults()?this._setModels(new Array(o),!0):(this._setModels([],!0),this._resetLRU(),this._setLength());var a=e.add?{add:!0}:null;this.TriggerInternal(i,t.Events.EventType.SORT,this,a,null);var s=e.startIndex;return void 0!==s&&null!==s?this.setRangeLocal(s,this._getFetchSize(e)):null}n=this,this._getModels().sort(function(e,i){return t.Collection.SortFunc(e,i,r,n,n)}),this._realignModelIndices(0);var a=e.add?{add:!0}:null;return this.TriggerInternal(i,t.Events.EventType.SORT,this,a,null),null},t.Collection._getKey=function(e,n){return e instanceof t.Model?e.get(n):t.Model.GetPropValue(e,n)},t.Collection.SortFunc=function(n,i,r,o,a){var s,l,u,h;if(e.isFunction(r)){if(1===r.length){s=r.call(a,n),l=r.call(a,i);var c=t.StringUtils.isString(s)?s.split(","):[s],d=t.StringUtils.isString(l)?l.split(","):[l];for(u=0;u<c.length;u++)if(h=t.Collection._compareKeys(c[u],d[u],o.sortDirection),0!==h)return h}return r.call(a,n,i)}if(t.StringUtils.isString(r)){var p=r.split(",");for(u=0;u<p.length;u++)if(s=t.Collection._getKey(n,p[u]),l=t.Collection._getKey(i,p[u]),h=t.Collection._compareKeys(s,l,o.sortDirection),0!==h)return h}return 0},t.Collection.prototype.sortedIndex=function(n,i){var r,o,a=i?i:this.comparator;return a?(this._throwErrIfVirtual("sortedIndex"),r=this,o=function(n,i){var o,s;if(e.isFunction(a)){if(1===a.length){o=a.call(r,n),s=a.call(r,i);var l,u,h=t.StringUtils.isString(o)?o.split(","):[o],c=t.StringUtils.isString(s)?s.split(","):[s];for(u=0;u<h.length;u++)if(l=t.Collection._compareKeys(h[u],c[u],r.sortDirection),0!==l)return l}return a.call(r,n,i)}return t.StringUtils.isString(a)?(o=n.get(a),s=i.get(a),t.Collection._compareKeys(o,s,r.sortDirection)):0},t.Collection._find(this._getModels(),n,o)):-1},t.Collection._find=function(t,e,n){function i(r,o){var a,s,l;return r>o?-1:(a=e.GetCid(),s=e.GetId(),t[r].Match(s,a)?r:t[o].Match(s,a)?o:(l=Math.floor((o+r)/2),n(t[l],e)===-1?i(r+1,l):1===n(t[l],e)?i(l,o-1):l))}return i(0,t.length-1)},t.Collection._compareKeys=function(t,e,n){if(n===-1){if(t<e)return 1;if(e<t)return-1}else{if(t>e)return 1;if(e>t)return-1}return 0},t.Collection.prototype.unshift=function(e,n){var i={};return t.CollectionUtils.copyInto(i,n||{}),i.at||(i.at=0),this._manageLRU(1),this._handlePromise(this._addInternal(e,i,!1,i.deferred))},t.Collection.prototype._handlePromise=function(t){return e.isFunction(t.then)?this._addPromise(function(){return t}):t},t.Collection.prototype.shift=function(e){e=e||{};var n,i=this._getDeferred(e);if(this.IsVirtual()||i){var r=this;return this.at(0,e).then(function(i){return n=r._removeInternal(i,0,e),r.TriggerInternal(e.silent,t.Events.EventType.ALLREMOVED,r,[n],e),n})}return n=this._removeInternal(this.at(0),0,e),this.TriggerInternal(e.silent,t.Events.EventType.ALLREMOVED,this,[n],e),n},t.Collection.prototype.initial=function(t){void 0===t&&(t=1),this._throwErrIfVirtual("initial");var e,n=[];for(e=0;e<this._getLength()-t;e+=1)n.push(this.at(e));return n},t.Collection.prototype._getDeferred=function(t){var e=t||{};return e.deferred},t.Collection.prototype.last=function(t,e){var n=this._getDeferred(e);if(void 0===t&&(t=1),1===t){var i=this._getModelsLength();return 0===i&&(i=t),i>0?this.at(i-1,n):null}var r,o=[],i=this._getLength();if(n||this.IsVirtual()){var a=i-t;a<0&&(a=0),0===i&&(i=t);var s=this;return this._addPromise(function(){return s.IterativeAt(a,i)})}for(r=i-t;r<i;r+=1)o.push(this.at(r));return o},t.Collection.prototype.IterativeAt=function(t,e){var n,i=[],r=this;return new Promise(function(o,a){var s=function(t){return r.IsVirtual()&&r._hasTotalResults()&&t>=r.totalResults?Promise.resolve(t+1):new Promise(function(e,n){r._deferredAt(t,null).then(function(n){i.push(n),e(t+1)},n)})},l=Promise.resolve(t);for(n=t;n<e;n++)l=l.then(s);l.then(function(){o(i)},a)})},t.Collection.prototype._getDefaultFetchSize=function(e){return void 0===e||null===e?this[t.Collection._FETCH_SIZE_PROP]:e},t.Collection.prototype._calculateNextStart=function(){var e=this.lastFetchCount;return void 0!==e&&null!==e||(e=this[t.Collection._FETCH_SIZE_PROP]),void 0===this.offset||null===this.offset?e:this.offset+e},t.Collection.prototype.next=function(e,n){n=n||{},n[t.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var i=this._calculateNextStart(),r=this._getLength();if(0===r&&n[t.Collection._FETCH_SIZE_PROP]>0)i=0;else if(i>=r){var o=this;return n.success&&n.success.call(t.Model.GetContext(n,o),o,null,n),null}return n.startIndex=i,this.fetch(n)},t.Collection.prototype._calculatePrevStart=function(t){return void 0===this.offset||null===this.offset?0:this.offset-t},t.Collection.prototype.previous=function(e,n){if(n=n||{},0===this.offset){var i=this;return n.success&&this.lastFetchCount&&n.success.call(t.Model.GetContext(n,i),i,null,n),null}n[t.Collection._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var r=this._calculatePrevStart(n[t.Collection._FETCH_SIZE_PROP]);return r<0&&(n[t.Collection._FETCH_SIZE_PROP]=this.offset,r=0),n.startIndex=r,this.fetch(n)},t.Collection.prototype.setModelLimit=function(t){this.modelLimit=t,this._manageLRU(0)},t.Collection.prototype._getModelLimit=function(){return this.modelLimit},t.Collection.prototype.setFetchSize=function(e){this[t.Collection._FETCH_SIZE_PROP]=e},t.Collection.prototype.rest=function(t,e){var n=this._getDeferred(e);void 0===t&&(t=1);var i,r=[];if(this.IsVirtual()||n){var o=this;return this._addPromise(function(){return o.IterativeAt(t,o._getLength())})}for(i=t;i<this._getLength();i+=1)r.push(this.at(i));return r},t.Collection.prototype.remove=function(e,n){n=n||{};var i,r=[];e instanceof Array?r=e:r.push(e);var o=[];for(i=r.length-1;i>=0;i-=1)o.unshift(this._removeInternal(r[i],-1,n));return this.TriggerInternal(n.silent,t.Events.EventType.ALLREMOVED,this,r,n),t.Collection._returnModels(o)},t.Collection.prototype._removeInternal=function(e,n,i){i=i||{};var r=n==-1?this._getInternal(e):t.Collection._getModinfo(n,e),o=i.silent;if(n=r.index,n>-1){var a=r.m;void 0!==a&&a.GetCollection()===this&&a.SetCollection(null),this._spliceModels(n,1),this._setLength();var s={};t.CollectionUtils.copyInto(s,i),s.index=n,void 0!==a&&a.TriggerInternal(o,t.Events.EventType.REMOVE,a,this,s),this._unlistenToModel(a)}return r.m},t.Collection.prototype._unlistenToModel=function(t){void 0!==t&&t.off(null,null,this)},t.Collection.prototype._listenToModel=function(e){e.OnInternal(t.Events.EventType.ALL,this._modelEvent,this,!1,!0)},t.Collection.prototype._modelEvent=function(e,n,i,r){var o;if(e===t.Events.EventType.DESTROY&&this.remove(n),!(void 0!==i&&i instanceof t.Collection&&i!==this)){o=Array.prototype.slice.call(arguments);var a=r&&r.silent;this.TriggerInternal(a,e,n,i,r)}},t.Collection.prototype.refresh=function(e){e=e||{};var n=this;return this._addPromise(function(){return new Promise(function(i,r){if(!n.IsVirtual()){var o=void 0!==e.silent&&e.silent;try{n.reset(null,{silent:!0});var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);return a.success=function(e,r,a){n.TriggerInternal(o,t.Events.EventType.REFRESH,n,a,null),i({collection:e,response:r,options:a})},a.error=function(i,o,a){r(t.Collection._createRejectionError(i,o,a,n,e,!1))},void n.fetch(a)}catch(l){if(l instanceof t.URLError)return n.TriggerInternal(o,t.Events.EventType.REFRESH,n,e,null),void i({collection:n,options:e});throw l}}var u=e.startIndex;n._setModels([],!0),n._resetLRU(),n.totalResults=void 0,n._setLength();var o=void 0!==e.silent&&e.silent;n.TriggerInternal(o,t.Events.EventType.REFRESH,n,e,null),void 0!==u&&null!==u||(u=0),void 0!==u&&null!==u?n._setRangeLocalInternal(u,n._getFetchSize(e)).then(function(t){i(t)},function(t){r(t)}):i(void 0)})})},t.Collection.prototype.reset=function(e,n){var i={};t.CollectionUtils.copyInto(i,n||{}),i.previousModels=this._getModels();for(var r,o,a=0;a<this._modelIndices.length;a++)r=this._modelIndices[a],o=this._getModel(r),o&&(this._unlistenToModel(o),o.SetCollection(null));this._setModels([],!0),this._resetLRU();var s=void 0!==i.silent&&i.silent;if(!e)return this._setLength(),this.totalResults=void 0,this.TriggerInternal(s,t.Events.EventType.RESET,this,i,null),null;var l=null;return i.parse&&(e=this.parse(e)),this._manageLRU(e instanceof Array?e.length:1),i.noparse=!0,l=this._addInternal(e,i,!0,!1),this._setLength(),this.TriggerInternal(s,t.Events.EventType.RESET,this,i,null),this._handlePromise(l)},t.Collection.prototype.at=function(t,e){var n=this._getDeferred(e);return this._atInternal(t,e,!1,n)},t.Collection.prototype._atInternal=function(t,e,n,i){if(t<0&&(t+=this._getLength()),t<0||this._overUpperLimit(t))return n||!this.IsVirtual()&&!i?null:this._addPromise(function(){return Promise.resolve(null)});var r=this;return n||!this.IsVirtual()&&!i?this._getModel(t):this._addPromise(function(){return r._deferredAt(t,e)})},t.Collection.prototype.whenReady=function(){return this._promises?this._promises:Promise.resolve()},t.Collection.prototype._addPromise=function(e){var n=this;return void 0===this._promises&&(this._promiseCount=0,this._promises=Promise.resolve()),this._promiseCount++,this._promises=this._promises.then(e.bind(n)).then(function(e){return n._promiseCount--,0===n._promiseCount&&(n._promises=void 0,n.TriggerInternal(!1,t.Events.EventType.READY,n,null,null)),e},function(t){return n._promiseCount--,0===n._promiseCount&&(n._promises=void 0),Promise.reject(t)}),this._promises},t.Collection.prototype._addxhr=function(t){if(t&&t.abort){void 0===this._xhrs&&(this._xhrs=[]);var e=this;t.done(function(){var n=e._xhrs?e._xhrs.indexOf(t):-1;n>-1&&e._xhrs.splice(n,1)}),this._xhrs.push(t)}},t.Collection.prototype.abort=function(){var t=this;return this._xhrs&&this._xhrs.length>0?new Promise(function(e,n){for(var i=t._xhrs.length-1;i>=0;i--)t._xhrs[i].then(function(n,r,o){"abort"===r&&(t._xhrs.splice(i,1),0===t._xhrs.length&&t.whenReady().then(function(){e(null)},function(){e(null)}))},function(n,r,o){t._xhrs.splice(i,1),0===t._xhrs.length&&t.whenReady().then(function(){e(null)},function(){e(null)})}),t._xhrs[i].abort()}):Promise.resolve()},t.Collection.prototype._deferredAt=function(e,n){var i=this,r=i._getModel(e);return void 0===r?new Promise(function(r,o){var a={};t.CollectionUtils.copyInto(a,n||{}),a.context=i,a.startIndex=e,a.error=function(e,r,a){o(t.Collection._createRejectionError(e,r,a,i,n,!1))},a.success=function(t,n,o){r(i._getModel(e))},i._fetchInternal(a,-1,!1)}):new Promise(function(t,e){t(r)})},t.Collection.prototype.getByCid=function(t){for(var e,n=this._getModels(),i=null,r=0;r<this._modelIndices.length;r++)if(e=this._modelIndices[r],n[e]&&t===n[e].cid){i=n[e];break}if(i)return i;if(this.IsVirtual())throw new Error("Not found locally and not supported by server for virtual collections");return null},t.Collection.prototype.get=function(t,n){var i=this._getDeferred(n),r=this._getInternal(t,n,i);if(r){if(e.isFunction(r.then))return this._addPromise(function(){return new Promise(function(t,e){r.then(function(e){t(e.m)},function(t){e(t)})})});if(this.IsVirtual())return this._addPromise(function(){return new Promise(function(t,e){t(r.m)})});if(r.hasOwnProperty("m"))return r.m}return null},t.Collection.prototype._getLocal=function(t){var e=this._getLocalInternal(t);return e?e.m:null},t.Collection.prototype._getLocalInternal=function(e){var n=e;e instanceof t.Model?(n=e.GetCid(),e=e.GetId()):t.Collection._defined(e)&&void 0!==e.id&&(e=e.id);for(var i,r,o=null,a=this._modelIndices.length,s=this._getModels(),l=0;l<a;l++)if(r=this._modelIndices[l],i=s[r],void 0!==i&&i.Match(e,n)){o=t.Collection._getModinfo(r,i);break}return o?o:t.Collection._getModinfo(-1,void 0)},t.Collection.prototype._getInternal=function(e,n,i,r){var o=e;void 0===r&&(r=!1),e instanceof t.Model?(o=e.GetCid(),e=e.GetId()):t.Collection._defined(e)&&void 0!==e.id&&(e=e.id);for(var a,s=null,l=this._getModels(),u=0;u<this._modelIndices.length;u++)if(a=this._modelIndices[u],l[a]&&l[a].Match(e,o)){var h=t.Collection._getModinfo(a,l[a]);s=h;break}if(s)return i?new Promise(function(t,e){t(s)}):s;if(this.IsVirtual()){if(void 0===e&&void 0!==o)return new Promise(function(e,n){e(t.Collection._getModinfo(-1,void 0))});var c=this;return new Promise(function(i,a){var s=function(n){if(null!=n){var r=c._getOffset(),a=c._getModel(r);i(void 0!==a&&a.Match(e,o)?t.Collection._getModinfo(r,a):t.Collection._getModinfo(-1,void 0))}else i(t.Collection._getModinfo(-1,void 0))},l={};t.CollectionUtils.copyInto(l,n||{}),l.context=c,l.startID=e,l.error=function(e,i,r){a(t.Collection._createRejectionError(e,i,r,c,n,!1))},l.success=function(t,e,n){s(e)},c._fetchInternal(l,-1,r)})}var d=t.Collection._getModinfo(-1,void 0);return i?new Promise(function(t,e){t(d)}):d},t.Collection._getModinfo=function(t,e){return{index:t,m:e}},t.Collection.prototype.parse=function(t){var e;if(t instanceof Array)return t;if(!t)return t;for(e in t)if(t.hasOwnProperty(e)&&t[e]instanceof Array)return t[e];return t},t.Collection.prototype._checkActual=function(t,e,n){return!!(this._hasTotalResults()&&n.start+n.count>=this.totalResults)||n.start===t&&n.count===e},t.Collection.prototype.setRangeLocal=function(t,e){var n=this;return this._addPromise(function(){return n._setRangeLocalInternal(t,e)})},t.Collection.prototype._setRangeLocalInternal=function(t,e){this.IsVirtual()&&this._resetModelsToFullLength();var n=this._getLocalRange(t,e),i=this;if(this._checkActual(t,e,n))return new Promise(function(t,e){t(n)});var r=this._getModelLimit();return r>-1&&r<e&&(this.modelLimit=e),new Promise(function(n,r){i._setRangeLocalFetch(t,e,-1,{start:t,count:e},n,r,!0)})},t.Collection.prototype._setRangeLocalFetch=function(e,n,i,r,o,a,s){var l=this,u=function(){var t=l._getLocalRange(r.start,r.count);if(s&&l._hasTotalResults()&&t.count<r.count){var i=t.start+t.count,u=e+(l.lastFetchCount?l.lastFetchCount:n);u<l.totalResults?l._setRangeLocalFetch(u,n,i,r,o,a,s):o(t)}else o(t)},h=e+n;this[t.Collection._FETCH_SIZE_PROP]&&this[t.Collection._FETCH_SIZE_PROP]>n&&(h=this[t.Collection._FETCH_SIZE_PROP]+e);var c=null;if(this.IsVirtual()){var d=this._getFirstMissingModel(e,h);d>e&&(e=d,h=e+n,this[t.Collection._FETCH_SIZE_PROP]&&this[t.Collection._FETCH_SIZE_PROP]>n&&(h=this[t.Collection._FETCH_SIZE_PROP]+e)),c={context:this,startIndex:e,fetchSize:h-e}}else c={context:this};c.error=function(e,n,i){a(t.Collection._createRejectionError(e,n,i,l,null,!1))},c.success=function(t,e,n){u()};try{this._fetchInternal(c,i,i>-1)}catch(p){if(p instanceof t.URLError){var g=l._getLocalRange(e,n);o(g)}}},t.Collection._createRejectionError=function(e,n,i,r,o,a){var s=!1;o&&o.silent&&(s=o.silent),a&&t.Model._triggerError(r,s,o,n,i,e);var l=new Error(n);return l.xhr=e,l.error=i,l.collection=r,l.status=n,l},t.Collection.prototype._getMaxLength=function(t,e){var n=this._getModelsLength();return 0===n?t+e:t+e>n?n:t+e},t.Collection.prototype.isRangeLocal=function(t,e){var n=this._getLocalRange(t,e);return 0===this._getModelsLength()?0===e:t===n.start&&(e===n.count||t+e>this._getModelsLength())},t.Collection.prototype._getModelArray=function(t,e){for(var n=[],i=this._getModels(),r=t+e,o=t;o<r;o++)n.push(i[o]);return n},t.Collection.prototype._getLocalRange=function(t,e){if(!this.IsVirtual()){if(this._getModelsLength()>0){if(t+e>this._getModelsLength()){var n=this._getModelsLength()-t;return{start:t,count:n,models:this._getModelArray(t,n)}}return{start:t,count:e,models:this._getModelArray(t,e)}}return{start:t,count:0,models:[]}}var i=this._getMaxLength(t,e);if(!this._hasTotalResults()&&i<t+e)return{start:t,count:i-t,models:this._getModelArray(t,i-t)};if(0===i)return{start:t,count:0,models:[]};var r=this._getFirstMissingModel(t,i);return r>-1?{start:t,count:r-t,models:this._getModelArray(t,r-t)}:(t>i?e=0:t+e>i&&(e=i-t),{start:t,count:e,models:this._getModelArray(t,e)})},t.Collection.prototype._getFirstMissingModel=function(t,e){for(var n=t;n<e;n++)if(void 0===this._getModel(n))return n;return-1},t.Collection.prototype.fetch=function(t){var e=this._fetchInternal(t,-1,!1);return this._addPromise(function(){return Promise.resolve(e)}),e},t.Collection.prototype._fetchInternal=function(e,n,i){function r(t,e,n){t.IsVirtual()?n||t._resetModelsToFullLength():e.add||e.useset||t.reset(null,{silent:!0})}var o,a=e||{},s=a.success,l=a.error;return a.set&&(a.useset=!!a.set),void 0===a.parse&&(a.parse=!0),o=this,a.error=function(n,i,r){t.Model._triggerError(o,!1,e,i,r,n),l&&l.call(t.Model.GetContext(e,o),n,i,r)},a.success=function(l,u,h){var c;try{c=o.parse(l,e)}catch(d){return void t.Collection._reportError(o,d,a.error,e)}o._setPagingReturnValues(l,e,c,i);var p=null;if(a.add||o.model){r(o,a,i);try{var g=!1;n===-1&&(g=!0,n=o._getOffset()),p=o._fillInCollectionWithParsedData(c,n,g,a)}catch(d){return void t.Collection._reportError(o,d,a.error,e)}}else if(!i)if(o.IsVirtual()){r(o,a,i);var g=!1;n===-1&&(g=!0,n=o._getOffset()),p=o._putDataIntoCollection(c,n,g)}else a.useset?o._setInternal(c,!1,a,!1):o.reset(c,{silent:!0});o.IsVirtual()&&p&&(o.lastFetchCount=p.length);var f=!!a.silent;o.TriggerInternal(f,t.Events.EventType.SYNC,o,l,a),s&&s.call(t.Model.GetContext(e,o),o,l,a)},this._fetchCall(a)},t.Collection.prototype._putDataIntoCollection=function(t,e,n){var i;if(t){i=t instanceof Array?t:[t];var r={};n&&this._manageLRU(i.length);for(var o=e,a=this.IsVirtual(),s=null,l=0;l<i.length;l+=1)a&&(r={at:o},s=this._atInternal(o,null,!0,!1)),r.silent=!0,this._addInternal(i[l],r,!0,!1),this._atInternal(o,null,!0,!1)!==s&&o++}return i},t.Collection.prototype._fillInCollectionWithParsedData=function(e,n,i,r){r=r||{};var o=r.parse,a=t.Collection._createModel(this);if(e){var s,l=e instanceof Array?e:[e],u={};i&&this._manageLRU(l.length);var h=this.IsVirtual();if(r.useset&&!h){for(var c=0;c<l.length;c+=1)s=a&&o?a.parse(l[c]):l[c],l[c]=s;this._setInternal(l,!1,r,!1)}else for(var d=null,p=n,c=0;c<l.length;c+=1)s=a&&o?a.parse(l[c]):l[c],h&&(u={at:p},d=this._atInternal(p,u,!0,!1)),u.silent=!0,this._addInternal(s,u,!0,!1),this._atInternal(p,null,!0,!1)!==d&&p++}return l},t.Collection._reportError=function(e,n,i,r){t.Logger.error(n.toString()),i&&i.call(t.Model.GetContext(r,e),e,n,r)},t.Collection.prototype._fetchOnly=function(e){var n,i,r=e||{},o=r.success;return void 0===r.parse&&(r.parse=!0),i=this,r.success=function(a,s,l){var u,h,c,d=null,p=[];try{c=i.parse(a,e)}catch(g){return void t.Collection._reportError(i,g,r.error,e)}if(r.add||i.model){if(h=t.Collection._createModel(i),c)for(d=c instanceof Array?c:[c],u=0;u<d.length;u+=1){if(h&&r.parse)try{n=h.parse(d[u])}catch(g){return void t.Collection._reportError(i,g,r.error,e)}else n=d[u];p.push(i._newModel(n))}}else d=c instanceof Array?c:[c];i.TriggerInternal(!1,t.Events.EventType.SYNC,i,a,r),o&&o.call(t.Model.GetContext(e,i),i,p,r)},this._fetchCall(r)},t.Collection.prototype._fetchCall=function(e){
try{return t.Model._internalSync("read",this,e)}catch(n){throw t.Model._triggerError(this,!1,e,null,n,null),n}},t.Collection.prototype._resetModelsToFullLength=function(){var t=this.totalResults;return void 0!==t&&this._getModelsLength()!==t&&(this._setModels(new Array(t),!0),this._resetLRU(),this._setLength(),!0)},t.Collection.prototype._getFetchSize=function(e){return e=e||{},e[t.Collection._FETCH_SIZE_PROP]||this[t.Collection._FETCH_SIZE_PROP]},t.Collection.prototype.IsVirtual=function(){return this._getFetchSize(null)>-1},t.Collection.prototype._getReturnProperty=function(e,n,i,r,o){var a=parseInt(t.Collection._getProp(e,n,i),10);return void 0===a||null===a||isNaN(a)?r?r:o:a},t.Collection.prototype._cleanTotalResults=function(t){if(t!==-1)return t},t.Collection.prototype._setPagingReturnValues=function(e,n,i,r){var o={};if(this.customPagingOptions&&(o=this.customPagingOptions.call(this,e),o||(o={})),n=n||{},this.lastFetchSize=this._getReturnProperty(o,e,"limit",n.fetchSize,this.fetchSize),this.offset=this._getReturnProperty(o,e,"offset",n.startIndex,0),this.lastFetchCount=this._getReturnProperty(o,e,"count",this.lastFetchCount,this.lastFetchCount),this.totalResults=this._cleanTotalResults(this._getReturnProperty(o,e,"totalResults",this.totalResults,this.totalResults)),this.hasMore=this._getHasMore(t.Collection._getProp(o,e,"hasMore"),this.offset,this.lastFetchSize,this.totalResults),!r){var a=this._cleanTotalResults(parseInt(t.Collection._getProp(o,e,"totalResults"),10)),s=parseInt(t.Collection._getProp(o,e,"count"),10);this.totalResults=this._adjustTotalResults(a,this.hasMore,this.offset,s,i&&Array.isArray(i)?i.length:0)}!this.IsVirtual()&&this.totalResults&&this.totalResults!==this.lastFetchCount&&this.lastFetchSize&&this.setFetchSize(this.lastFetchSize)},t.Collection.prototype._adjustTotalResults=function(t,e,n,i,r){if(!e&&isNaN(t)){var o=isNaN(i)?r:i;return o+n}return this.totalResults},t.Collection.prototype._getHasMore=function(e,n,i,r){return t.Collection._defined(e)?e:void 0===r||null===r||!(n+i>r)},t.Collection._getProp=function(t,e,n){return t.hasOwnProperty(n)?t[n]:e?e[n]:void 0},t.Collection.prototype._getOffset=function(){return t.Collection._defined(this.offset)?this.offset:0},t.Collection.prototype.create=function(e,n){function i(n,i,r,o){return i.save(e instanceof t.Model?null:e,o),i}function r(t,e){return n.wait?o.IsVirtual()||a?o._addPromise(function(){return Promise.resolve(void 0)}):void 0:o.add(t,e)}var o=this;n=n||{};var a=this._getDeferred(n),s=this._newModel(e,!0,n,!1),l=n.success,u=n.context,h=n.validate;if(n.context=this,n.success=function(t,e,i){i.xhr&&(n.xhr=i.xhr),n.wait&&o.add(s,n),l&&l.call(null!=u?u:o,t,e,n)},null==s)return!1;n.forceNew=null!=s.GetId();var c=t.Model._copyOptions(n);if(s.SetCollection(this),a||this.IsVirtual())return new Promise(function(t,e){c.merge=!0,c.deferred=!0,r(s,c).then(function(){n.success=function(e,i,r){r.xhr&&(n.xhr=r.xhr),n.wait?(o.IsVirtual()&&(c.force=!0),o.add(s,c).then(function(){l&&l.call(null!=u?u:o,e,i,n),t(e)})):(l&&l.call(null!=u?u:o,e,i,n),t(e))};var e=i(o,s,h,n);e||t(e)})});c.merge=!0,r(s,c);var d=i(this,s,h,n);return d},t.Collection.prototype.pluck=function(t){var e,n=[];for(this._throwErrIfVirtual("pluck"),e=0;e<this._getLength();e+=1)n.push(this.at(e).get(t));return n},t.Collection.prototype.where=function(t,e){return this._handlePromise(this._whereInternal(t,e))},t.Collection.prototype._whereInternal=function(e,n){n=n||{};var i=this._getDeferred(n),r=this;if(this.IsVirtual())return new Promise(function(i,o){var a=function(t,e,n){i(e)},s={query:e,all:!0,success:a,error:function(e,i,a){o(t.Collection._createRejectionError(e,i,a,r,n,!0))}};r._fetchOnly(s)});var o,a,s=[];for(o=0;o<this._getLength();o+=1)a=this.at(o),a.Contains(e)&&s.push(a);return i?new Promise(function(t,e){t(s)}):s},t.Collection.prototype.whereToCollection=function(e,n){n=n||{};var i=this._getDeferred(n),r=this;if(this.IsVirtual()||i)return r._addPromise(function(){return new Promise(function(t,i){return r._whereInternal(e,n).then(function(e){var n=r._makeNewCollection(e);t(n)},function(t){i(t)})})});var o=this._whereInternal(e,n),a=this._makeNewCollection(o);return a[t.Collection._FETCH_SIZE_PROP]=-1,a._setLength(),a},t.Collection.prototype._makeNewCollection=function(t){var e=this._cloneInternal(!1);return e._setModels(t,!1),e._resetLRU(),e._setLength(),e},t.Collection.prototype._throwErrIfVirtual=function(t){if(this.IsVirtual())throw new Error(t+" not valid on a virtual Collection")},t.Collection.prototype.map=function(t,e){var n,i=[];return this._throwErrIfVirtual("map"),this._getModels().forEach(function(r){n=t.call(e||this,r),i.push(n)}),i},t.Collection.prototype.each=function(t,e){this._throwErrIfVirtual("each"),this._getModels().forEach(t,e)},t.Collection.prototype.size=function(){return this._getLength()},t.Collection.prototype.sortBy=function(n,i){var r,o=[];return this._throwErrIfVirtual("sortBy"),this._getModels().forEach(function(t){o.push(t)}),r=this,o.sort(function(o,a){var s,l;return e.isFunction(n)?(s=n.call(i||r,o),l=n.call(i||r,a),t.Collection._compareKeys(s,l,r.sortDirection)):(s=o.get(n),l=a.get(n),t.Collection._compareKeys(s,l,r.sortDirection))}),o},t.Collection.prototype.groupBy=function(t,n){var i,r={};return this._throwErrIfVirtual("groupBy"),this._getModels().forEach(function(o){i=e.isFunction(t)?t.call(n||this,o):o.get(t),void 0===r[i]&&(r[i]=[]),r[i].push(o)},this),r},t.Collection.prototype.indexBy=function(t,n){var i,r={};return this._throwErrIfVirtual("indexBy"),this._getModels().forEach(function(o){i=e.isFunction(t)?t.call(n||this,o):o.get(t),r[i]=o},this),r},t.Collection.prototype.min=function(t,e){var n,i,r={};return this._throwErrIfVirtual("min"),0==this._getModelsLength()?null:(r=this._getModel(0),n=t.call(e||this,this._getModel(0)),this._getModels().forEach(function(o,a){a>=1&&(i=t.call(e||this,o),i<n&&(r=o,n=i))},this),r)},t.Collection.prototype.max=function(t,e){var n,i,r={};return this._throwErrIfVirtual("max"),0==this._getModelsLength()?null:(r=this._getModel(0),n=t.call(e,this._getModel(0)),this._getModels().forEach(function(o,a){a>=1&&(i=t.call(e||this,o),i>n&&(r=o,n=i))},this),r)},t.Collection.prototype.filter=function(t,e){var n=[];return this._throwErrIfVirtual("filter"),this._getModels().forEach(function(i){t.call(e||this,i)&&n.push(i)}),n},t.Collection.prototype.without=function(t){var e,n,i,r,o=[];this._throwErrIfVirtual("without");for(var a,s=0;s<this._getModels().length;s++){for(r=!0,a=this._getModel(s),e=0;e<arguments.length;e+=1)if(i=arguments[e].GetCid(),n=arguments[e].GetId(),a.Match(n,i)){r=!1;break}r&&o.push(a)}return o},t.Collection.prototype.difference=function(t){var e,n,i,r,o,a=[];this._throwErrIfVirtual("difference");for(var s,l=0;l<this._getModels().length;l++){for(o=!0,s=this._getModel(l),e=0;e<arguments.length;e+=1){for(n=0;n<arguments[e].length;n++)if(r=arguments[e][n].GetCid(),i=arguments[e][n].GetId(),s.Match(i,r)){o=!1;break}if(!o)break}o&&a.push(s)}return a},t.Collection.prototype.isEmpty=function(){return 0===this._getLength()},t.Collection.prototype.any=function(t,e){this._throwErrIfVirtual("any");for(var n,i=0;i<this._getModelsLength();i+=1)if(n=this._getModel(i),t.call(e||this,n))return!0;return!1},t.Collection.prototype.findWhere=function(t,e){var n=this._getDeferred(e),i=this;if(this.IsVirtual()||n)return this._addPromise(function(){return new Promise(function(n,r){i._whereInternal(t,e).then(function(t){t&&t.length>0&&n(t[0]),n(null)})})});var r=this._whereInternal(t,e);return r.length>0?r[0]:null},t.Collection.prototype.slice=function(t,e,n){var i,r=this._getDeferred(n),o=[];if(void 0===e){if(this.IsVirtual()&&!this._hasTotalResults())throw new Error("End must be set for virtual collections with no totalResults");e=this._getModelsLength()}if(r||this.IsVirtual()){var a=this;return this._addPromise(function(){return a.IterativeAt(t,e)})}for(i=t;i<e;i+=1)o.push(this._getModel(i));return o},t.Collection.prototype.set=function(t,e){var n=this._getDeferred(e);return this._setInternal(t,!0,e,n||this.IsVirtual())},t.Collection._removeAfterSet=function(t,e,n,i,r){if(n)for(var o=e.length-1;o>=0;o-=1)i.indexOf(o)==-1&&t._removeInternal(e[o],o,r)},t.Collection.prototype._swapModels=function(t,e,n,i){if(this._hasComparator()||!n||!i)return{index:t,swapped:!1};var r=this._getModelsLength();if(t>=r||e>=r)return{index:t,swapped:!1};var o=this._getModel(t),a=this._getModel(e);return this._setModel(t,a),a.SetIndex(t),this._setModel(e,o),o.SetIndex(e),{index:e,swapped:e!==t}},t.Collection.prototype._setInternal=function(e,n,i,r){i=i||{};var o,a,s=void 0===i.add||i.add,l=void 0===i.remove||i.remove,u=void 0===i.merge||i.merge,h=[],c=null;if(n&&(e=this.parse(e)),a=Array.isArray(e)?e:[e],r){var d=this;return this._addPromise(function(){return d._deferredSet(a,d._getModels(),i,l,s,u,n)})}var p=!1;for(o=0;o<a.length;o+=1)if(c=this._updateModel(this._newModel(a[o],n,i,!0),s,u,r),c!==-1){var g=this._swapModels(c,o,l,s),f=g.index;g.swapped&&(p=!0),h.indexOf(f)===-1&&h.push(f)}if(p){var _=i.add?{add:!0}:null;this.TriggerInternal(i.silent,t.Events.EventType.SORT,this,_,null)}t.Collection._removeAfterSet(this,this._getModels(),l,h,i)},t.Collection.prototype._deferredSet=function(e,n,i,r,o,a,s){var l,u=[],h=this;return new Promise(function(c,d){var p=function(t){return new Promise(function(n,r){h._updateModel(h._newModel(e[t],s,i,!0),o,a,!0).then(function(e){e!==-1&&u.push(e),n(t+1)},r)})},g=Promise.resolve(0);for(l=0;l<e.length;l+=1)g=g.then(p);g.then(function(){t.Collection._removeAfterSet(h,n,r,u,i),c(void 0)},d)})},t.Collection.prototype._updateModel=function(t,e,n,i){function r(i,r,o){var a=r?r.index:-1,s=r?r.m:null;if(s){if(n){var l={merge:n};if(o)return new Promise(function(e,n){i._addInternal(t,l,!1,!0).then(function(){e(a)})});i.add(t,l)}}else if(e){if(o)return new Promise(function(e,n){i._addInternal(t,l,!1,!0).then(function(){e(i._getLength()-1)})});i.add(t),a=i._getLength()-1}return a}if(i||this.IsVirtual()){var o=this;return new Promise(function(e,n){o._getInternal(t,{silent:!0},i).then(function(t){r(o,t,!0).then(function(t){e(t)})})})}var a=this._getInternal(t);return r(this,a,!1)},t.Collection.prototype.toJSON=function(){var t=[];return this._throwErrIfVirtual("toJSON"),this._getModels().forEach(function(e){t.push(e.toJSON())}),t},t.Collection.prototype.first=function(t,e){var n,i=this._getDeferred(e),r=this._getLength(),o=[];t?r=t:t=1;var a=this.IsVirtual()||i;if(1===t){if(a){var s=this;return this._addPromise(function(){return s._deferredAt(0,null)})}return this._getModelsLength()>0?this._getModel(0):null}if(r>this._getModelsLength()&&(this.IsVirtual()&&!this._hasTotalResults()||(r=this._getModelsLength())),a){var s=this;return this._addPromise(function(){return s.IterativeAt(0,r)})}for(n=0;n<r;n+=1)o.push(this._getModel(n));return o},t.Collection.prototype.indexOf=function(t,e){var n,i=this._getDeferred(e);if(this.IsVirtual()||i){var r=this;return this._addPromise(function(){return r._getInternal(t,null,!0).then(function(t){return t.index})})}return n=this._getInternal(t),n.index},t.Collection.prototype.contains=function(t,e){var n,i=this._getDeferred(e);if(this.IsVirtual()||i){var r=this;return this._addPromise(function(){return r._getInternal(t,null,!0).then(function(t){return t.index>-1})})}return n=this._getInternal(t),n.index>-1},t.Collection.prototype.include=t.Collection.prototype.contains,t.Collection.prototype._localIndexOf=function(t){var e=this._getLocalInternal(t);return void 0!==e?e.index:-1},t.Collection.prototype.pop=function(t){var e=this._getDeferred(t);if(this.IsVirtual()||e){var n=this;return this.at(this._getLength()-1,{deferred:e}).then(function(e){return n.remove(e,t),e})}var i=this.at(this._getLength()-1);return this.remove(i,t),i},t.Collection.prototype.push=function(t,e){var n=this._getDeferred(e);return this._manageLRU(1),this._handlePromise(this._addInternal(t,e,!1,n))},t.Collection.prototype.lastIndexOf=function(e,n){var i;for(this._throwErrIfVirtual("lastIndexOf"),void 0===n&&(n=0),i=this._getLength()-1;i>=n;i-=1)if(t.Object.__innerEquals(e,this.at(i)))return i;return-1},t.Collection.prototype._getSortAttrs=function(t){return void 0===t?[]:t.split(",")},t.Collection._getQueryString=function(n){function i(t,e,n){return t+n+e}var r,o,a,s,l=Array.isArray(n)?n:[n],u="";for(a=0;a<l.length;a++){r=l[a];for(s in r)if(r.hasOwnProperty(s))for(var h=Array.isArray(r[s])?r[s]:[r[s]],c=0;c<h.length;c++){if(t.Model.IsComplexValue(h[c])){var d=h[c].value,p=null,g=h[c].comparator;p=e.isFunction(g)?g(null,s,d):g,o=i(s,d,p)}else o=i(s,r[s],"=");u+=o+"+"}u=u.substring(0,u.length-1)+","}return","===u.substring(u.length-1)?u.substring(0,u.length-1):u},t.Collection.prototype.ModifyOptionsForCustomURL=function(e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);var r=this.comparator;if(r&&t.StringUtils.isString(r)){for(var o=this._getSortAttrs(r),a=0;a<o.length;a++)0===a?n.sort=o[a]:n.sort+=","+o[a];n.sortDir=this._getSortDirStr()}return this.IsVirtual()&&(n[t.Collection._FETCH_SIZE_PROP]=this._getFetchSize(n)),n},t.Collection.prototype.IsUrlBased=function(n){var i=this.customURL;if(e.isFunction(i))return!0;var r=this.GetCollectionFetchUrl(n);return t.Collection._defined(r)},t.Collection.prototype.GetCollectionFetchUrl=function(e){var n=t.Model.GetPropValue(this,"url");if(this.IsVirtual()){var i=e.all,r=null;if(i){var o=this.totalResults;r=o?o:this._getFetchSize(e)}else r=this._getFetchSize(e);if(n+=n&&n.indexOf("?")>-1?"&":"?",n+="limit="+r,i||(t.Collection._defined(e.startIndex)&&(n+="&offset="+e.startIndex),e.startID&&(n+="&fromID="+e.startID),e.since&&(n+="&since="+e.since),e.until&&(n+="&until="+e.until)),e.query){var a=t.Collection._getQueryString(e.query);a&&a.length>0&&(n+="&q="+a)}var s=this.comparator;if(s&&t.StringUtils.isString(s)){var l,u=this._getSortAttrs(s),h=this._getSortDirStr();for(l=0;l<u.length;l++)n+=0===l?"&orderBy="+u[l]+":"+h:","+u[l]+":"+h}n+="&totalResults=true"}return n},t.Collection.prototype._getSortDirStr=function(){return this.sortDirection===-1?"desc":"asc"},t.Collection.prototype.sync=function(e,n,i){return t.sync(e,n,i)},t.Collection._FETCH_SIZE_PROP="fetchSize"}),define("ojs/ojknockout-model",["ojs/ojcore","knockout","ojs/ojmodel"],function(t,e){t.KnockoutUtils=function(){},t.KnockoutUtils.internalObjectProperty="oj._internalObj",t.KnockoutUtils.underUpdateProp="oj._underUpdate",t.KnockoutUtils.collUpdatingProp="oj.collectionUpdating",t.KnockoutUtils.subscriptionProp="oj.collectionSubscription",t.KnockoutUtils.updatingCollectionFunc="oj.collectionUpdatingFunc",t.KnockoutUtils.map=function(n,i,r){function o(e){return function(i){a[t.KnockoutUtils.underUpdateProp]||n.set(e,i)}}var a,s,l,u,h,c,d,p,g,f,_,m;if(n instanceof t.Collection){var v=new Array(n._getLength());a=r?e.observableArray(v):v,t.KnockoutUtils._storeOriginalObject(a,n);var y;if(r)for(s=0;s<n._modelIndices.length;s++)y=n._modelIndices[s],a()[y]=t.KnockoutUtils.map(n._atInternal(y,null,!0,!1),i);else for(s=0;s<n._modelIndices.length;s++)y=n._modelIndices[s],a[y]=t.KnockoutUtils.map(n._atInternal(y,null,!0,!1),i);l=function(e){var i;try{if(!a[t.KnockoutUtils.underUpdateProp]){for(a[t.KnockoutUtils.collUpdatingProp]=!0,i=0;i<e.length;i++){var r=e[i].index,o=t.KnockoutUtils._getModel(e[i].value),s=e[i].status;"added"===s?r>=n.length-1?n.add(o):n.add(o,{at:r}):"deleted"===s&&n._removeInternal(o,r)}n.comparator&&(a[t.KnockoutUtils.underUpdateProp]=!0,a.sort(function(e,i){return t.KnockoutUtils._callSort(e,i,n.comparator,n,this)}),a[t.KnockoutUtils.underUpdateProp]=!1)}}catch(l){throw l}finally{a[t.KnockoutUtils.collUpdatingProp]=!1}},r&&a.subscribe&&(a[t.KnockoutUtils.updatingCollectionFunc]=l,a[t.KnockoutUtils.subscriptionProp]=a.subscribe(l,null,"arrayChange")),u=function(e,n,i){var r;try{if(a[t.KnockoutUtils.collUpdatingProp])return;n instanceof t.Collection&&(a[t.KnockoutUtils.underUpdateProp]=!0,r=i.index,a.splice(r,1))}catch(o){throw o}finally{a[t.KnockoutUtils.underUpdateProp]=!1}},h=function(e,n,r){var o,s;try{if(a[t.KnockoutUtils.collUpdatingProp])return;if(n instanceof t.Collection&&(a[t.KnockoutUtils.underUpdateProp]=!0,o=n._localIndexOf(e),void 0!==o&&o>-1))if(s=t.KnockoutUtils.map(e,i),r.fillIn){for(var l=Array.isArray(a)?a.length:a().length,u=l;u<o;u++)a.splice(u,0,t.KnockoutUtils.map(n._atInternal(u,null,!0,!1),i));a.splice(o,1,s)}else a.splice(o,0,s)}catch(h){throw h}finally{a[t.KnockoutUtils.underUpdateProp]=!1}},_=function(n,i){try{if(a[t.KnockoutUtils.collUpdatingProp])return;n instanceof t.Collection&&(a[t.KnockoutUtils.underUpdateProp]=!0,e.isObservable(a)?(a[t.KnockoutUtils.subscriptionProp]&&a[t.KnockoutUtils.subscriptionProp].dispose(),a.removeAll(),a[t.KnockoutUtils.updatingCollectionFunc]&&a.subscribe(a[t.KnockoutUtils.updatingCollectionFunc],null,"arrayChange")):a=[])}catch(r){throw r}finally{a[t.KnockoutUtils.underUpdateProp]=!1}},m=function(e,i){try{if(a[t.KnockoutUtils.collUpdatingProp])return;e instanceof t.Collection&&(a[t.KnockoutUtils.underUpdateProp]=!0,a.sort(function(i,r){return t.KnockoutUtils._callSort(i,r,n.comparator,e,this)}))}catch(r){throw r}finally{a[t.KnockoutUtils.underUpdateProp]=!1}},n.OnInternal(t.Events.EventType.ADD,h,void 0,void 0,!0),n.OnInternal(t.Events.EventType.REMOVE,u,void 0,void 0,!0),n.OnInternal(t.Events.EventType.RESET,_,void 0,void 0,!0),n.OnInternal(t.Events.EventType.SORT,m,void 0,void 0,!0)}else{if(void 0===n)return;a={},c=n.attributes,d=null;for(d in c)c.hasOwnProperty(d)&&(p=e.observable(n.get(d)),a[d]=p,g=o(d),g._prop=d,p.subscribe&&p.subscribe(g));f=function(e,n){var i,r;try{a[t.KnockoutUtils.underUpdateProp]=!0,i=e.changedAttributes();for(r in i)i.hasOwnProperty(r)&&a[r](e.get(r))}catch(o){throw o}finally{a[t.KnockoutUtils.underUpdateProp]=!1}},n.OnInternal(t.Events.EventType.CHANGE,f,void 0,void 0,!0),t.KnockoutUtils._storeOriginalObject(a,n),i&&i(a)}return a},t.KnockoutUtils._getModel=function(e){return e instanceof t.Model?e:e.hasOwnProperty(t.KnockoutUtils.internalObjectProperty)?e[t.KnockoutUtils.internalObjectProperty]:e},t.KnockoutUtils._callSort=function(e,n,i,r,o){return t.Collection.SortFunc(t.KnockoutUtils._getModel(e),t.KnockoutUtils._getModel(n),i,r,o)},t.KnockoutUtils._storeOriginalObject=function(e,n){Object.defineProperty(e,t.KnockoutUtils.internalObjectProperty,{value:n,enumerable:!1})}}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/unique-id",["jquery","./version"],t):t(jQuery)}(function(t){return t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}})}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/keycode",["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/focusable",["jquery","./version"],t):t(jQuery)}(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}return t.ui.focusable=function(n,i){var r,o,a,s,l,u=n.nodeName.toLowerCase();return"area"===u?(r=n.parentNode,o=r.name,!(!n.href||!o||"map"!==r.nodeName.toLowerCase())&&(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(s=!n.disabled,s&&(l=t(n).closest("fieldset")[0],l&&(s=!l.disabled))):s="a"===u?n.href||i:i,s&&t(n).is(":visible")&&e(t(n)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable}),function(t){"function"==typeof define&&define.amd?define("jqueryui-amd/tabbable",["jquery","./version","./focusable"],t):t(jQuery)}(function(t){return t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}})}),define("ojs/ojmessaging",["ojs/ojcore","jquery"],function(t,e){t.Message=function(t,e,n){this.Init(t,e,n)},t.Message.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},t.Message.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},t.Object.createSubclass(t.Message,t.Object,"oj.Message"),t.Message.prototype.Init=function(e,n,i){t.Message.superclass.Init.call(this),this.summary=e,this.detail=n,this.severity=i||t.Message.SEVERITY_TYPE.ERROR},t.Message.prototype.canDisplay=function(){return!0},t.Message.prototype.equals=function(e){return!(!e||t.Message.getSeverityLevel(this.severity)!==t.Message.getSeverityLevel(e.severity)||this.summary!==e.summary||this.detail!==e.detail)},t.Message.prototype.clone=function(){return new t.Message(this.summary,this.detail,this.severity)},t.Message.getSeverityLevel=function(e){var n;return e&&("string"==typeof e?(n=t.Message._LEVEL_TO_TYPE.indexOf(e,1),e=n===-1?t.Message.SEVERITY_LEVEL.ERROR:n):"number"==typeof e&&e<t.Message.SEVERITY_LEVEL.CONFIRMATION&&e>t.Message.SEVERITY_LEVEL.FATAL&&(e=t.Message.SEVERITY_LEVEL.ERROR)),e?e:t.Message.SEVERITY_LEVEL.ERROR},t.Message.getSeverityType=function(e){var n;return e&&("string"==typeof e?(n=t.Message._LEVEL_TO_TYPE.indexOf(e,1),n===-1&&(e=t.Message.SEVERITY_TYPE.ERROR)):"number"==typeof e&&(e=e<t.Message.SEVERITY_LEVEL.CONFIRMATION&&e>t.Message.SEVERITY_LEVEL.FATAL?t.Message.SEVERITY_TYPE.ERROR:t.Message._LEVEL_TO_TYPE[e])),e||t.Message.SEVERITY_TYPE.ERROR},t.Message.getMaxSeverity=function(n){var i,r=-1;return n&&n.length>0&&e.each(n,function(e,n){n&&(i=t.Message.getSeverityLevel(n.severity)),r=r<i?i:r}),r},t.Message.isValid=function(e){var n=t.Message.getMaxSeverity(e);return!(n>=t.Message.SEVERITY_LEVEL.ERROR)},t.Message._LEVEL_TO_TYPE=["none",t.Message.SEVERITY_TYPE.CONFIRMATION,t.Message.SEVERITY_TYPE.INFO,t.Message.SEVERITY_TYPE.WARNING,t.Message.SEVERITY_TYPE.ERROR,t.Message.SEVERITY_TYPE.FATAL],t.ComponentMessage=function(t,e,n,i){this.Init(t,e,n,i)},t.Object.createSubclass(t.ComponentMessage,t.Message,"oj.ComponentMessage"),t.ComponentMessage.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"},t.ComponentMessage._DEFAULT_OPTIONS={display:t.ComponentMessage.DISPLAY.SHOWN,context:""},t.ComponentMessage.prototype.Init=function(n,i,r,o){t.ComponentMessage.superclass.Init.call(this,n,i,r),this._options=e.extend({},t.ComponentMessage._DEFAULT_OPTIONS,o)},t.ComponentMessage.prototype.equals=function(e){var n=t.ComponentMessage.superclass.equals.call(this,e);return n&&this._options.display===e._options.display},t.ComponentMessage.prototype.clone=function(){return new t.ComponentMessage(this.summary,this.detail,this.severity,this._options)},t.ComponentMessage.prototype.canDisplay=function(){return!(!(!this._options||!this._options.display)&&this._options.display===t.ComponentMessage.DISPLAY.HIDDEN)},t.ComponentMessage.prototype._forceDisplayToShown=function(){return!(!this._options||t.ComponentMessage.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=t.ComponentMessage.DISPLAY.SHOWN,!0)},t.ComponentMessage.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)}}),define("ojs/ojcomponentcore",["ojs/ojcore","jquery","jqueryui-amd/widget","jqueryui-amd/unique-id","jqueryui-amd/keycode","jqueryui-amd/focusable","jqueryui-amd/tabbable","ojs/ojmessaging"],function(t,e){function n(t,n){var i=function(){var t=e(this),i=t.data(f);if(null!=i)for(var r=0;r<i.length;r++){var o=t.data("oj-"+i[r]);null!=o&&n(o)}},r=e(t);r.hasClass(_)&&i.call(t),r.find("."+_).each(i)}function i(t){this.getCallback=function(){return t}}function r(t,e,n){var i=Object.keys(e);return i.forEach(function(i){var r=t[i]||[],o=e[i];n?r=r.concat(o):r.push(o),t[i]=r}),t}function o(e){return t.Components.getWidgetConstructor(e)}function a(t,e,n,i,r,o,a){var s=n,l=!1,u={};delete i[r],Object.defineProperty(i,r,{get:function(){if(l)return s;if(null!=t._settingNestedKey)return s;var n=o(a?a():r);return c([e,n,s],u)},set:function(e){s=e,null!=t._settingNestedKey?u[t._settingNestedKey]=!0:l=!0},enumerable:!0})}function s(t){if(1===t.length){var e=t[0];return e instanceof i?e.getCallback():null}for(var n=!1,r=0;r<t.length&&!n;r++){var o=t[r];null!=o&&o instanceof i&&(n=!0)}if(n){var a=function(e){var n=[];return t.forEach(function(t){null!=t&&t instanceof i?n.push(t.getCallback()(e)):n.push(t)}),c(n)};return a}return null}function l(e){for(var n=[];e;){var i=e.getAttribute,r=i?i.call(e,t.Components._OJ_CONTAINER_ATTR):null;null!=r&&n.push(r),e=e.parentNode}return n}function u(t,e){var n=t.data(f);n||(n=[],t.data(f,n)),n.indexOf(e)<0&&n.push(e)}function h(t,e){var n=t.data(f);if(n){var i=n.indexOf(e);i>=0&&(n.splice(i,1),0===n.length&&t.removeData(f))}}function c(t,n){for(var i=void 0,r=0;r<t.length;r++){var o=t[r];if(void 0!==o)if(e.isPlainObject(o)){var a=e.isPlainObject(i)?[i,o]:[o];i=d({},a,r==t.length-1?null:n,null)}else i=o}return i}function d(t,n,i,r){for(var o=n.length,a=0;a<o;a++)for(var s=n[a],l=Object.keys(s),u=0;u<l.length;u++){var h=l[u],c=null==i?null:null==r?h:r+"."+h;if(null==i||!i[c]){var p=s[h];if(void 0!==p)if(e.isPlainObject(p)){var g=e.isPlainObject(t[h])?[t[h],p]:[p];t[h]=d({},g,i,c)}else t[h]=p}}return t}function p(){return!0}function g(){var t,n=e("<div style='border: 1px solid;border-color:red green;position: absolute;top: -999px;background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=);'></div>");n.appendTo("body"),t=n.css("backgroundImage"),n.css("borderTopColor")!=n.css("borderRightColor")&&(null==t||"none"!=t&&"url (invalid-url:)"!=t)||e("body").addClass("oj-hicontrast"),n.remove()}t.Components={},t.Components.setDefaultOptions=function(e){var n=t.Components._defaultProperties||{},i=Object.keys(e);i.forEach(function(i){var o=e[i];if(!t.CollectionUtils.isPlainObject(o))throw"Invalid default options";n[i]=r(n[i]||{},o,!1)}),t.Components._defaultProperties=n},t.Components.getDefaultOptions=function(){return t.Components._defaultProperties||{}},t.Components.createDynamicPropertyGetter=function(t){return new i(t)},t.Components.getWidgetConstructor=function(t,n){var i=e(t),r=i.data(f);if(r&&(null==n?n=r[0]:r.indexOf(n)<0&&(n=void 0),null!=n)){var o=i[n];if("function"==typeof o)return o.bind(i)}return null},t.Components.subtreeAttached=function(e){t.DomUtils.fixResizeListeners(e),n(e,function(t){t._NotifyAttached()})},t.Components.subtreeDetached=function(t){n(t,function(t){t._NotifyDetached()})},t.Components.subtreeShown=function(e){t.DomUtils.fixResizeListeners(e),n(e,function(t){t._NotifyShown()})},t.Components.subtreeHidden=function(t){n(t,function(t){t._NotifyHidden()})},t.Components.isComponentInitialized=function(t,n){var i=t.data(f);return!!(e.isArray(i)&&i.indexOf(n)>-1&&t.is("."+_))},t.Components.__getDefaultOptions=function(e){for(var n={},i=t.Components.getDefaultOptions(),o=e.length-1;o>=0;o--){var a=e[o],s=i[a];void 0!==s&&(n=r(n,s,!0))}return n},t.Components.getComponentElementByNode=function(n){return null==n?null:n.getAttribute("data-oj-internal")?t.Components.getComponentElementByNode(n.parentNode):o(n)?n:n.classList.contains("oj-component")&&(n=e(n).find(".oj-component-initnode").not("[data-oj-internal]")[0]||n,t.Components.getWidgetConstructor(n))?n:t.Components.getComponentElementByNode(n.parentNode)},t.Components.getSubIdByNode=function(e,n){return t.Components.callComponentMethod(e,"getSubIdByNode",n)},t.Components.getNodeBySubId=function(e,n){return t.Components.callComponentMethod(e,"getNodeBySubId",n)},t.Components.getComponentOption=function(e,n){if(o(e))return t.Components.getWidgetConstructor(e)("option",n);throw new Error("node is not a component element")},t.Components.setComponentOption=function(e,n,i){if(!o(e))throw new Error("node is not a component element");t.Components.getWidgetConstructor(e)("option",n,i)},t.Components.callComponentMethod=function(n,i,r){if(o(n))return t.Components.getWidgetConstructor(n).apply(e(n),[].slice.call(arguments,1));throw new Error("node is not a component element")},t.Components._OJ_CONTAINER_ATTR="data-oj-container";var f="oj-component-names",_="oj-component-initnode";t.Components._WIDGET_KEY="_ojwidget",t.Components._CREATE_KEY="_createPromise",t.Components._CREATE_RESOLVE_KEY="_resolve",t.Components._CREATE_PROMISE_KEY="_promise",t.Components._CUSTOM_ELEMENT_MAP={},t.Components._METADATA_MAP={},t.Components.registerMetadata=function(e,n,i){var r=t.__AttributeUtils.propertyNameToAttribute(e.toLowerCase());if(n){var o=t.__AttributeUtils.propertyNameToAttribute(n.toLowerCase()),a=t.CollectionUtils.copyInto({},t.Components.getMetadata(o),void 0,!0);t.Components._METADATA_MAP[r]=t.CollectionUtils.copyInto(a,i,void 0,!0)}else t.Components._METADATA_MAP[r]=i},t.Components.getMetadata=function(e){return t.Components._METADATA_MAP[e.toLowerCase()]},t.Components.register=function(e,n){if(e&&document.registerElement){var i=e.toLowerCase();if(!t.Components._CUSTOM_ELEMENT_MAP[i]){t.Components._CUSTOM_ELEMENT_MAP[i]=!0;var r=t.Components._getPrototype(n);document.registerElement(i,{prototype:r})}}},t.Components.isRegistered=function(e){return!!e&&t.Components._CUSTOM_ELEMENT_MAP[e.toLowerCase()]},t.Components.getCreatePromise=function(e){var n=e[t.Components._CREATE_KEY];return n||(n={},n[t.Components._CREATE_PROMISE_KEY]=new Promise(function(e,i){n[t.Components._CREATE_RESOLVE_KEY]=e}),e[t.Components._CREATE_KEY]=n),n[t.Components._CREATE_PROMISE_KEY]},t.Components._getPrototype=function(e){var n=Object.create(HTMLElement.prototype),i=e.properties,r=e.methods,o=e.extension,a=o._widgetName;return t.Components._addComponentProperties(i,n),t.Components._addComponentMethods(r,n),t.Components._addElementMethods(a,i,o,n),n},t.Components._addComponentProperties=function(e,n){Object.keys(e).forEach(function(i){t.Components._addComponentProperty(i,e[i],n)})},t.Components._addComponentProperty=function(e,n,i){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){return this[t.Components._WIDGET_KEY]("option",e)},set:function(n){this[t.Components._WIDGET_KEY]&&this[t.Components._WIDGET_KEY]("option",e,n)}})},t.Components._addComponentMethods=function(t,e){Object.keys(t).forEach(function(n){var i=t[n].params,r=[];i&&i.forEach(function(t){var e=t.name;e.indexOf(".")===-1&&r.push(e)});var o="return this._ojwidget('"+n+(r.length>0?"', "+r.join():"'")+");";e[n]=new Function(r,o)})},t.Components._addElementMethods=function(n,i,r,o){o.createdCallback=function(){var e=this[t.Components._CREATE_KEY];if(e){var n=e[t.Components._CREATE_RESOLVE_KEY];n&&(n(),delete this[t.Components._CREATE_KEY][t.Components._CREATE_RESOLVE_KEY])}else this[t.Components._CREATE_KEY]={},this[t.Components._CREATE_KEY][t.Components._CREATE_PROMISE_KEY]=Promise.resolve()},o.attachedCallback=function(){if(this[t.Components._WIDGET_KEY])t.Components.subtreeAttached(this);else{var o=r._innerElement,a=this;if(o){var s=this.firstElementChild;a=s&&s.tagName.toLowerCase()===o?s:t.Components._createInnerElem(o,this,r._defaultAttrs,r._transferAttrs)}var l=r._hasWrapper?{_wrapper:this}:{},u=this,h=!1;Object.keys(i).forEach(function(e){var n=t.__AttributeUtils.propertyNameToAttribute(e);if(u.hasAttribute(n)){var r=u.getAttribute(n),o=t.__AttributeUtils.getExpressionInfo(r);o.expr?h=!0:l[e]=t.__AttributeUtils.coerceValue(e,r,i[e].type)}}),h||this.classList.add("oj-complete"),l.optionChange=function(t,e){var n={detail:{value:e.value,previousValue:e.previousValue}};this.dispatchEvent(new CustomEvent(e.option+"-changed",n))},e(a)[n](l),this[t.Components._WIDGET_KEY]=t.Components.getWidgetConstructor(a,n)}},o.detachedCallback=function(){t.Components.subtreeDetached(this)},o.attributeChangedCallback=function(e,n,r){var o=t.__AttributeUtils.attributeToPropertyName(e),a=i[o];if(a){var s={detail:{attribute:e,value:r,previousValue:n}};this.dispatchEvent(new CustomEvent("attribute-changed",s));var l=t.__AttributeUtils.getExpressionInfo(r);
l.expr||(this[o]=t.__AttributeUtils.coerceValue(o,r,a.type))}}},t.Components._createInnerElem=function(t,n,i,r){var o=document.createElement(t);n.appendChild(o);for(var a=[],s=0;s<n.childNodes.length;s++)a.push(n.childNodes[s]);for(var s=0;s<a.length;s++)n.appendChild(a[s]);if(i)for(var l in i)o.setAttribute(l,i[l]);return r&&r.forEach(function(t){n.hasAttribute(t)&&o.setAttribute(t,n.getAttribute(t))}),e(o).append(e(n).children()),o},function(){var n="baseComponent";e.widget("oj."+n,{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null},_createWidget:function(t,e){t&&(this.OuterWrapper=t._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=t||{},this._super(t,e),this._AfterCreateEvent()},_SetRootAttributes:function(){var t=this.options.rootAttributes;if(t){var n=this.widget();if(null==n)return;var i=t["class"];i&&n.addClass(i);var r=t.style;if(r){var o=n.attr("style");o?n.attr("style",o+";"+r):n.attr("style",r)}t=e.extend({},t),delete t["class"],delete t.style,n.attr(t),delete t.id;var a=Object.keys(t);if(a.length)throw new Error("Unsupported values passed to rootAttributes option: "+a.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._originalDefaults,delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this.element.addClass(_)},_InitOptions:function(t,e){this._setupDefaultOptions(t,e),this._initContextMenuOption(e)},_ComponentCreate:function(){u(this.element,this.widgetName)},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this._setupContextMenu(!0,null)},_AfterCreateEvent:e.noop,_SaveAttributes:function(t){},_SaveAllAttributes:function(t){var n=this;this._savedAttributes=[],e.each(t,function(t,i){var r={},o={element:i,attributes:r},a=i.attributes;n._savedAttributes.push(o),e.each(a,function(t,e){var n=e.name;r[n]={attr:e.value}})})},_GetSavedAttributes:function(t){var e=this._savedAttributes;if(void 0===e)return null;t=t[0];for(var n=0,i=e.length;n<i;n++){var r=e[n];if(r.element===t)return r.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){e.each(this._savedAttributes,function(t,n){var i=e(n.element),r=n.attributes;if(1===i.length){for(var o=n.element.attributes,a=[],s=0,l=o.length;s<l;s++)o[s].name in r||a.push(o[s].name);for(var s=0,l=a.length;s<l;s++)i.removeAttr(a[s]);for(var u in r)i.attr(u,r[u].attr)}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(t,e,n){return e==n},getTranslatedString:function(e,n){var i,r={};return arguments.length>2?r=Array.prototype.slice.call(arguments,1):2==arguments.length&&(r=arguments[1],"object"==typeof r||r instanceof Array||(r=[r])),i=this.option(v+e),null==i?e:t.Translations.applyParameters(i.toString(),r)},getNodeBySubId:function(t){return(null==t||null==t.subId)&&this.element?this.element[0]:null},getSubIdByNode:function(t){return null},destroy:function(){this._trigger("destroy"),t.DomUtils.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._super(),this._removeContextMenuBehavior(this.options.contextMenu),this.element.removeClass(_),this.widget().removeClass("oj-disabled"),this._removeStateClasses(this.element),h(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(t,n){if(0===arguments.length)return e.widget.extend({},this.options);var i=arguments[0],r=i,o=null,a={};if("string"==typeof i){r={};var s=i.split(".");if(i=s.shift(),s.length){o=s.join(".");var l;try{arguments.length>1&&(this._settingNestedKey=o),l=r[i]=e.widget.extend({},this.options[i])}finally{this._settingNestedKey=null}for(var u=0;u<s.length-1;u++)l[s[u]]=l[s[u]]||{},l=l[s[u]];if(i=s.pop(),1===arguments.length)return void 0===l[i]?null:l[i];l[i]=n}else{if(1===arguments.length)return void 0===this.options[i]?null:this.options[i];r[i]=n}a=arguments[2]||a}else a=arguments[1]||a;null!=o&&(a=e.widget.extend({},a,{subkey:o}));var h=a?a._context:null,c=!!h&&h.internalSet;return c?this._internalSetOptions(r,a):this._setOptions(r,a),this},_internalSetOptions:function(t,e){for(var n in t){var i=t[n],r=this.options[n];this.options[n]=i,this._optionChanged(n,i,r,e)}},_setOptions:function(t,e){for(var n in t)this._setOption(n,t[n],e);return this},_setOption:function(t,e,n){var i=this.options[t];if("disabled"===t)this.options[t]=e,this.widget().toggleClass("oj-disabled",!!e).attr("aria-disabled",e),e&&this._removeStateClasses(this.widget());else{try{var r=null==n?null:n.subkey;null!=r&&(this._settingNestedKey=r),this._super(t,e)}finally{this._settingNestedKey=null}"contextMenu"===t&&this._setupContextMenu(!1,i)}return this._optionChanged(t,e,i,n),this},_optionChanged:function(t,n,i,r){var o,a=!1,s=null,l=!1,u=!1,h=null,c=null;if(r&&(a=r.changed,s=r._context,s&&(h=s.originalEvent,l=void 0===s.writeback?null!=h:s.writeback,u=s.readOnly,c=s.optionMetadata,o=s.extraData)),a||!this._CompareOptionValues(t,i,n)){c=c||{},c.writeback=l?"shouldWrite":"shouldNotWrite",u&&(c.readOnly=!0);var d={option:t,previousValue:i,value:n,optionMetadata:c};null!=o&&(d=e.extend({},o,d)),this._trigger("optionChange",h,d)}},_trigger:function(t,e,n){return this._trigger2(t,e,n).proceed},_trigger2:function(t,n,i){var r=this.options[t];return i=i||{},n=e.Event(n,y),n.type=(this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],this.element.trigger(n,i),{proceed:!(e.isFunction(r)&&r.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented()),event:n}},_initContextMenuOption:function(t){var e=this.element.attr("contextmenu");this._initialCmDomAttr=e,!e||"contextMenu"in t||this.option("contextMenu",document.getElementById(e),{_context:{internalSet:!0}})},_setupContextMenu:function(n,i){if(this._removeContextMenuBehavior(i),this.options.contextMenu){var r=this.widget(),o=this.element;n&&!o.is(r)&&o.removeAttr("contextmenu");var a=e(this.options.contextMenu).attr("id");a&&r.attr("contextmenu",a);var s=this;this._preventKeyUpEventIfMenuOpen=function(t){121==t.which&&t.shiftKey&&s._getContextMenuNode().is(":visible")&&t.preventDefault()};var l,u,h,c=t.DomUtils.PRESS_HOLD_THRESHOLD,d=!1,p=!1,g=5,f=300,_=null,m=function(t,e,n){d=n;var i=s._getContextMenu();return d&&r.one("touchend"+s.contextMenuEventNamespace,function(t){var e=50;i.__contextMenuPressHoldJustEnded(!0),setTimeout(function(){i.__contextMenuPressHoldJustEnded(!1)},e)}),"touchstart"===_&&"contextmenu"===t.type||"contextmenu"===_&&"touchstart"===t.type?(_=null,void clearTimeout(h)):void(t.isDefaultPrevented()||t.originalEvent&&t.originalEvent.defaultPrevented||s._IsEffectivelyDisabled()||(s._NotifyContextMenuGesture(i,t,e),i.widget().is(":visible")&&(t.preventDefault(),document.addEventListener("keyup",s._preventKeyUpEventIfMenuOpen),"touchstart"!==t.type&&"contextmenu"!==t.type||(_=t.type,h=setTimeout(function(){_=null},f)))))};this._clickListener=function(t){d&&(t.preventDefault(),t.stopPropagation(),d=!1)},r[0].addEventListener("click",this._clickListener,!0),r.on("touchstart"+this.contextMenuEventNamespace+" mousedown"+this.contextMenuEventNamespace+" keydown"+this.contextMenuEventNamespace+" ",function(t){if("mousedown"!==t.type||!s._getContextMenu().__contextMenuPressHoldJustEnded()){if(d=!1,"touchstart"===t.type&&1===t.originalEvent.touches.length){var e=t.originalEvent.touches[0];l=e.pageX,u=e.pageY,p=!0,this._contextMenuPressHoldTimer=setTimeout(m.bind(void 0,t,"touch",!0),c)}return!0}}).on("touchmove"+this.contextMenuEventNamespace,function(t){var e=t.originalEvent.touches[0];return(Math.abs(l-e.pageX)>g||Math.abs(u-e.pageY)>g)&&(p=!1,clearTimeout(this._contextMenuPressHoldTimer)),!0}).on("touchend"+this.contextMenuEventNamespace+" touchcancel"+this.contextMenuEventNamespace,function(t){return p=!1,clearTimeout(this._contextMenuPressHoldTimer),!0}).on("keydown"+this.contextMenuEventNamespace+" contextmenu"+this.contextMenuEventNamespace,function(t){if("contextmenu"===t.type||121==t.which&&t.shiftKey){var e=p?"touch":"keydown"===t.type?"keyboard":"mouse";m(t,e,!1)}return!0}).addClass(t.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":void 0)}},_getContextMenu:function(){var e=t.Components.getWidgetConstructor(this._getContextMenuNode()[0],"ojMenu"),n=e&&e("instance");if(!n)throw new Error('"contextMenu" option set to "'+this.options.contextMenu+'", which does not reference a valid JET Menu.');if(!this._contextMenuListenerSet){var i=this;n.widget().on("ojclose"+this.contextMenuEventNamespace,function(t,e){document.removeEventListener("keyup",i._preventKeyUpEventIfMenuOpen)}),this._contextMenuListenerSet=!0}return n},_getContextMenuNode:function(){return e(this.options.contextMenu).first()},_removeContextMenuBehavior:function(t){this.widget().removeAttr("contextmenu").off(this.contextMenuEventNamespace).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",this._clickListener,!0),clearTimeout(this._contextMenuPressHoldTimer),e(t).off(this.contextMenuEventNamespace),this._contextMenuListenerSet=!1},_NotifyContextMenuGesture:function(t,e,n){this._OpenContextMenu(e,n)},_OpenContextMenu:function(t,n,i,r,o){var a={mouse:{my:"start top",at:"start bottom",of:t,collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",of:t,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher",collision:"flipfit"}},s={launcher:this.element,position:a[n]},l={initialFocus:"menu"};i=o?e.extend(s,i,l):e.extend(!0,s,i,l);var u=this._getContextMenu();u.__openingContextMenu=!0,u.open(t,i,r),u.__openingContextMenu=!1},_removeStateClasses:function(t){t.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),t.find(".oj-hover").removeClass("oj-hover"),t.find(".oj-focus").removeClass("oj-focus"),t.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),t.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(e){return!t.DomUtils.recentTouchEnd()},_AddHoverable:function(t){var n;e.isPlainObject(t)?n=t.element:(n=t,t={});var i=t.afterToggle||e.noop,r="oj-hover";n.on("mouseenter"+this.eventNamespace,this._hoverStartHandler.bind(this,i)).on("mouseleave"+this.eventNamespace,this._hoverAndActiveEndHandler.bind(this,r,i))},_RemoveHoverable:function(t){t&&e(t).off("mouseenter"+this.eventNamespace+" mouseleave"+this.eventNamespace)},_AddActiveable:function(n){var i;e.isPlainObject(n)?i=n.element:(i=n,n={});var r=n.afterToggle||e.noop,o="oj-active";t.DomUtils.isTouchSupported()&&i.on("touchstart"+this.eventNamespace,this._activeStartHandler.bind(this,r)).on("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,this._hoverAndActiveEndHandler.bind(this,o,r)),i.on("mousedown"+this.eventNamespace,this._activeStartHandler.bind(this,r)).on("mouseup"+this.eventNamespace,this._hoverAndActiveEndHandler.bind(this,o,r))},_RemoveActiveable:function(t){t&&e(t).off("touchstart"+this.eventNamespace+" touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace+" mousedown"+this.eventNamespace+" mouseup"+this.eventNamespace)},_activeStartHandler:function(t,n){var i=e(n.currentTarget);i.hasClass("oj-disabled")||"touchstart"!==n.type&&!this._isRealMouseEvent(n)||(i.addClass("oj-active"),t(n.type))},_hoverStartHandler:function(t,n){var i=e(n.currentTarget);!i.hasClass("oj-disabled")&&this._isRealMouseEvent(n)&&(i.addClass("oj-hover"),t(n.type))},_hoverAndActiveEndHandler:function(t,n,i){e(i.currentTarget).removeClass(t),n(i.type)},_focusable:function(n){e.isPlainObject(n)||(n={element:n}),n.component=this,t.DomUtils.makeFocusable(n)},_UnregisterChildNode:function(t){if(t){e(t).off(this.eventNamespace);var n=this.bindings;n&&(this.bindings=e(n.not(t)))}},getResource:function(t){return this.option(v+t)},_GetReadingDirection:function(){return t.DomUtils.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(t){this._ancestorDisabled=t},_getTranslationSectionLoader:function(){var n=[],i=this,r=0;this._traverseWidgetHierarchy(function(o){var a=0==r?i._GetTranslationsSectionName():o.widgetFullName;r++;var s=t.Translations.getComponentTranslations(a);null==s||e.isEmptyObject(s)||n.push(a)});var o=n.length;return o>0?function(){if(1==o)return t.Translations.getComponentTranslations(n[0]);for(var i={},r=o-1;r>=0;r--)e.widget.extend(i,t.Translations.getComponentTranslations(n[r]));return i}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var t={};this._propertyContext=t;var e=this.element[0];t.containers=l(e),t.element=e}return this._propertyContext},_setupDefaultOptions:function(t,n){var i=this.options,r=this._getTranslationSectionLoader(),o=n[m];null==r||void 0!==o&&!e.isPlainObject(o)||a(this,void 0,n[m],i,m,r),this._loadGlobalDefaultOptions(t,n)},_loadGlobalDefaultOptions:function(n,i){var r=this.options,o=[];this._traverseWidgetHierarchy(function(t){o.push(t.widgetName)});t.Components.getDefaultOptions();o.push("default");var l=t.Components.__getDefaultOptions(o);if(!e.isEmptyObject(l)){var u=this,h=function(){return u._getDynamicPropertyContext()};for(var d in l){var p=i[d];if(void 0===p||e.isPlainObject(p)){var g=l[d];if(g){var f=s(g);if(f)a(this,n[d],p,r,d,f,h);else{var _=[n[d]].concat(g);_.push(p),r[d]=c(_)}}}}}},_traverseWidgetHierarchy:function(t){for(var e=this.constructor.prototype;null!=e&&"oj"===e.namespace;)t(e),e=Object.getPrototypeOf(e)}}),delete e.fn[n]}(),t.__registerWidget=function(t,n,i,r){if(e.widget(t,n,i),r){var o=t.split(".")[1];delete e.fn[o]}if("oj.oj"===t.substring(0,5)||"oj._oj"===t.substring(0,6)){var a,s=t.split("."),l=s[0],u=s[1],h=l+"-"+u,c="_"===u.substring(0,1);a=c?"_"+l+"-"+u.substring(3):l+"-"+u.substring(2),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,h)}}};var m="translations",v=m+".",y={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=p},stopPropagation:function(){this.isPropagationStopped=p},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=p}};e(document).ready(function(){g()}),t.DomUtils={},t.DomUtils._HTML_START_TAG="<html>",t.DomUtils._HTML_END_TAG="</html>",t.DomUtils._LEGAL_ELEMENTS={SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},t.DomUtils._LEGAL_ATTRIBUTES={"class":1,style:1},t.DomUtils.isHTMLContent=function(e){return 0===e.indexOf(t.DomUtils._HTML_START_TAG)&&e.lastIndexOf(t.DomUtils._HTML_END_TAG)===e.length-7},t.DomUtils.cleanHtml=function(n){var i=e(document.createElement("span")).get(0);return i.innerHTML=n,n&&n.indexOf("<")>=0&&t.DomUtils._cleanElementHtml(i),i},t.DomUtils._cleanElementHtml=function(n){for(var i,r,o,a,s,l=n.childNodes,u=l.length-1;u>=0;){if(i=l.item(u),i&&1===i.nodeType)if(t.DomUtils._LEGAL_ELEMENTS[i.nodeName]){for(r=i.attributes,s=r.length-1;s>=0;s--)o=r[s],a=void 0!==e(i).attr(o.name),a&&(t.DomUtils._LEGAL_ATTRIBUTES[o.name]||i.removeAttribute(o.nodeName));t.DomUtils._cleanElementHtml(i)}else i&&n.removeChild(i);u--}},t.DomUtils.isAncestor=function(t,e){for(var n=e.parentNode;n;){if(n==t)return!0;n=n.parentNode}return!1},t.DomUtils.isAncestorOrSelf=function(e,n){return n==e||t.DomUtils.isAncestor(e,n)},t.DomUtils.addResizeListener=function(n,i,r){var o=e(n),a=o.data(t.DomUtils._RESIZE_TRACKER_KEY);null==a&&(a=new t.DomUtils._ResizeTracker(n),o.data(t.DomUtils._RESIZE_TRACKER_KEY,a),a.start()),a.addListener(i,r)},t.DomUtils.removeResizeListener=function(n,i){var r=e(n),o=r.data(t.DomUtils._RESIZE_TRACKER_KEY);null!=o&&(o.removeListener(i),o.isEmpty()&&(o.stop(),r.removeData(t.DomUtils._RESIZE_TRACKER_KEY)))},t.DomUtils.fixResizeListeners=function(n){e(n).find(".oj-helper-detect-expansion").parent().each(function(n,i){var r=e(i).data(t.DomUtils._RESIZE_TRACKER_KEY);null!=r&&r.init(!0)})},t.DomUtils.isMetaKeyPressed=function(e){var n=t.AgentUtils.getAgentInfo();return t.AgentUtils.OS.MAC===n.os?e.metaKey:e.ctrlKey},t.DomUtils.dispatchEvent=function(t,e){var n="disabled",i=t[n];try{t[n]=!1,t.dispatchEvent(e)}finally{t[n]=i}},t.DomUtils._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,0)}).bind(window),t.DomUtils._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){return window.clearTimeout(t)}).bind(window),t.DomUtils._ResizeTracker=function(n){function i(t){var e=!1;if(null!=_.offsetParent){var n=_.offsetWidth,i=_.offsetHeight;g===n&&f===i||(d=c,s(n,i),e=!0,t&&r(!0))}return e}function r(e){var i=n.offsetWidth,r=n.offsetHeight;l.has()&&(e?(null!==p&&t.DomUtils._cancelInvokeAfterPaint(p),p=t.DomUtils._invokeAfterPaint(function(){p=null,l.fire(i,r)})):l.fire(i,r));for(var o=0;o<u.length;o++)u[o].getCallback()(i,r)}function o(t){t.stopPropagation(),i(!0)||d>0&&null!=_.offsetParent&&(0==_.scrollLeft||0==_.scrollTop)&&(d--,s(g,f))}function a(){r(!1)}function s(t,e){g=t,f=e;var n=_.firstChild.style,i=1;do n.width=t+i+"px",n.height=e+i+"px",_.scrollLeft=_.scrollTop=i,i++;while((0==_.scrollTop||0==_.scrollLeft)&&i<=5);m.scrollLeft=t,m.scrollTop=e}var l=e.Callbacks(),u=[],h=[],c=2,d=0,p=null,g=null,f=null,_=null,m=null,v=null,y=null;this.addListener=function(e,n){void 0===n||0===n?l.add(e):(u.push(new t.DomUtils._collapsingListenerManager(e,n)),h.push(e))},this.removeListener=function(t){var e=h.indexOf(t);if(e>=0){h.splice(e,1);var n=u.splice(e,1);n[0].stop()}else l.remove(t)},this.isEmpty=function(){return!l.has()&&0==h.length},this.start=function(){if(y=o.bind(this),n.attachEvent)v=a.bind(this),n.attachEvent("onresize",v);else{var t=n.childNodes[0];_=document.createElement("div"),_.className="oj-helper-detect-expansion";var e=document.createElement("div");_.appendChild(e),null!=t?n.insertBefore(_,t):n.appendChild(_),_.addEventListener("scroll",y,!1),m=document.createElement("div"),m.className="oj-helper-detect-contraction";var i=document.createElement("div");i.style.width="200%",i.style.height="200%",m.appendChild(i),n.insertBefore(m,_),m.addEventListener("scroll",y,!1),this.init(!1)}},this.stop=function(){null!=p&&(t.DomUtils._cancelInvokeAfterPaint(p),p=null),null!=_?(_.removeEventListener("scroll",y),m.removeEventListener("scroll",y),n.removeChild(_),n.removeChild(m)):n.detachEvent("onresize",v)},this.init=function(t){var e=i(t);t&&!e&&null!=_.offsetParent&&s(g,f)}},t.DomUtils._RESIZE_TRACKER_KEY="_ojResizeTracker",t.DomUtils.isValidIdentifier=function(t){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(t)},t.DomUtils._collapsingListenerManager=function(t,e){var n=null,i=null,r=function(){t.apply(null,n),i=null},o=function(){n=Array.prototype.slice.call(arguments),null==i&&(i=window.setTimeout(r,e))};this.getCallback=function(){return o},this.stop=function(){null!=i&&(window.clearTimeout(i),i=null)}},t.DomUtils.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},t.DomUtils.setInKoRemoveNode=function(e){t.DomUtils._koRemoveNode=e},t.DomUtils.unwrap=function(e,n){var i=t.DomUtils._koRemoveNode;i&&i==e.parent().get(0)||(arguments.length>1?n.replaceWith(e):e.unwrap())},t.DomUtils.isChromeEvent=function(n){function i(t){try{return!t.originalTarget.localName}catch(e){return!0}}function r(t){return o(t)}function o(n){var i=n.target,r=e(i),o=i.getBoundingClientRect(),a=t.DomUtils.getScrollBarWidth(),s="ltr"===t.DomUtils.getReadingDirection();return!(!s||"HTML"!==i.nodeName&&"visible"===r.css("overflow-x")||!(n.clientX>o.right-a))||(!s&&"HTML"===i.nodeName&&n.clientX>o.left-a||(!s&&"visible"!==r.css("overflow-x")&&n.clientX<o.left+a||("HTML"===i.nodeName||"visible"!==r.css("overflow-y"))&&n.clientY>o.bottom-a))}if(!("clientX"in n&&"clientY"in n))return!1;var a=t.AgentUtils.getAgentInfo();return t.AgentUtils.OS.ANDROID!==a.os&&t.AgentUtils.OS.IOS!==a.os&&(t.AgentUtils.ENGINE.GECKO===a.engine?i(n):t.AgentUtils.ENGINE.WEBKIT===a.engine?o(n):t.AgentUtils.BROWSER.IE===a.browser&&r(n))},t.DomUtils.getScrollBarWidth=function(){var n=t.DomUtils._scrollBarWidth;if(e.isNumeric(n))return n;var i=e("<div />");e(document.body).append(i),i.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var r=e("<div />");r.height(1),i.append(r);var o=r.width(),a=i.width();return i.remove(),n=t.DomUtils._scrollBarWidth=a-o},t.DomUtils.getReadingDirection=function(){var t=document.documentElement.getAttribute("dir");return t&&(t=t.toLowerCase()),"rtl"===t?"rtl":"ltr"},t.DomUtils.getCSSLengthAsInt=function(t){if(!isNaN(t))return t;if(t&&t.length>0&&"auto"!=t){var e=parseInt(t,10);return isNaN(e)&&(e=0),e}return 0},t.DomUtils.getCSSLengthAsFloat=function(t){if(!isNaN(t))return t;if(t&&t.length>0){var e=parseFloat(t);return isNaN(e)&&(e=0),e}return 0},t.DomUtils._LOGICAL_PARENT_DATA="oj-logical-parent",t.DomUtils.getLogicalParent=function(e){if(e)return e.data(t.DomUtils._LOGICAL_PARENT_DATA)},t.DomUtils.setLogicalParent=function(e,n){e&&(null===n?e.removeData(t.DomUtils._LOGICAL_PARENT_DATA):e.data(t.DomUtils._LOGICAL_PARENT_DATA,n))},t.DomUtils.isLogicalAncestorOrSelf=function(n,i){t.Assert.assertDomElement(n),t.Assert.assertDomElement(i);for(var r=i;r;){if(r==n)return!0;var o=t.DomUtils.getLogicalParent(e(r));r=o?o[0]:r.parentNode}return!1},t.DomUtils.validateURL=function(t,e){var n=e||["http:","https:"],i=document.createElement("a");i.href=t;var r=i.protocol;if(null!=r&&(r=r.toLowerCase()),n.indexOf(r)<0)throw r+" is not a valid URL protocol"},t.DomUtils._supressNativeContextMenu=function(){e(document.body).hasClass("oj-hybrid")&&document.body.addEventListener("contextmenu",function(t){t.preventDefault()},!0)},t.DomUtils._supressNativeContextMenu(),t.DomUtils.PRESS_HOLD_THRESHOLD=750,t.DomUtils.recentTouchEnd=function(){function t(){e=Date.now()}var e=0,n=500;return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<n}}(),t.DomUtils.recentPointer=function(){var e,n=0,i=600,r=i,o=t.DomUtils.PRESS_HOLD_THRESHOLD+i;return document.addEventListener("mousedown",function(){var i=Date.now();(!e||i>n+t.DomUtils.PRESS_HOLD_THRESHOLD)&&(n=i,e=!1)},!0),document.addEventListener("touchstart",function(){n=Date.now(),e=!0},!0),document.addEventListener("mouseup",function(){n=Date.now(),e=!1},!0),document.addEventListener("touchend",function(){n=Date.now(),e=!1},!0),function(){var t=Date.now()-n,i=e?o:r,a=t<i;return a}}(),t.DomUtils.makeFocusable=function(){var n=0,i=(t.ThemeUtils.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,r=function(e,n){var r=e?e():i;switch(r){case"all":return!0;case"none":return!1;default:return!(t.DomUtils.recentPointer()||n&&n())}},o=function(t){var i=t.element,o="ojFocusable",a="."+o,s=" "+a;if(t.remove){i.removeClass("oj-focus oj-focus-highlight");var l=i.data(o);if(void 0==l)return;var u=a+(""+l).split(",").join(s);return void i.off(u).removeData(o)}var h=t.afterToggle||e.noop,c=function(t){t.addClass("oj-focus"),h("focusin")},d=function(e){e.addClass("oj-focus"),r(t.getFocusHighlightPolicy,t.recentPointer)&&e.addClass("oj-focus-highlight"),h("focusin")},p=t.applyHighlight?d:c,g=function(t){t.removeClass("oj-focus oj-focus-highlight"),h("focusout")},f=t.setupHandlers||function(r,s){var l=t.component,u=function(t){r(e(t.currentTarget))},h=function(t){s(e(t.currentTarget))};if(l)l._on(i,{focusin:u,focusout:h});else{var c=n++,d=i.data(o);i.data(o,void 0==d?c:d+","+c);var p={},g=a+c;p["focusin"+g]=u,p["focusout"+g]=h,i.on(p)}};f(p,g)};return o}(),t.ComponentMessaging=function(t){this.Init(t)},t.Object.createSubclass(t.ComponentMessaging,t.Object,"oj.ComponentMessaging"),t.ComponentMessaging._DISPLAY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline"},t.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK={},t.ComponentMessaging.registerMessagingStrategy=function(e,n){e&&"function"==typeof n&&(t.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]=n)},t.ComponentMessaging.prototype.Init=function(e){t.ComponentMessaging.superclass.Init.call(this),this._component=e,this._activated=!1,this._initializeMessagingStrategies()},t.ComponentMessaging.prototype.activate=function(n,i,r){var o=this;t.Assert.assertObject(r),this._launcher=n,this._contentElement=i,this._messagingContent=t.CollectionUtils.copyInto(this._messagingContent||{},r),this._isActive()?this._reactivate():(e.each(this._strategies,function(t,e){e.activate(o)}),this._activated=!0)},t.ComponentMessaging.prototype.update=function(n){t.Assert.assertObject(n),t.Assert.assertBoolean(this._activated),this._messagingContent=t.CollectionUtils.copyInto(this._messagingContent||{},n),this._activated&&e.each(this._strategies,function(t,e){e.shouldUpdate(n)&&e.update()})},t.ComponentMessaging.prototype.deactivate=function(){e.each(this._strategies,function(t,e){e.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},t.ComponentMessaging.prototype.close=function(){e.each(this._strategies,function(t,e){e.close()})},t.ComponentMessaging.prototype._createMessagingStrategy=function(e,n){var i=t.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[e]||t.ComponentMessaging._DISPLAY_TYPE_TO_CALLBACK[t.ComponentMessaging._DISPLAY_TYPE.NONE];return new i(n)},t.ComponentMessaging.prototype._getComponent=function(){return this._component||null},t.ComponentMessaging.prototype._getLauncher=function(){return this._launcher||null},t.ComponentMessaging.prototype._getContentElement=function(){return this._contentElement||null},t.ComponentMessaging.prototype._getMessagingContent=function(){return this._messagingContent||{}},t.ComponentMessaging.prototype._isActive=function(){return this._activated},t.ComponentMessaging.prototype._getResolvedMessagingDisplayOptions=function(){var n,i,r,o,a,s,l,u={},h=!1,c=this._component.options.placeholder,d=this._component.options.displayOptions||{},p={},g=this;for(o=Object.keys(d),s=0;s<o.length;s++){if(a=o[s],n=d[a],h=!1,r=a+"",Array.isArray(n))for(l=0;l<n.length;l++)i=n[l],h||(h=g._resolveDisplayTypeForArtifact(r,i,c,p));else"string"==typeof n&&(h||(h=g._resolveDisplayTypeForArtifact(r,n,c,p)));h||(p[r]=t.ComponentMessaging._DISPLAY_TYPE.NONE)}return e.each(t.ComponentMessaging._DISPLAY_TYPE,function(t,e){u[e]=[]}),e.each(p,function(t,e){u[e].push(t)}),u},t.ComponentMessaging.prototype._resolveDisplayTypeForArtifact=function(e,n,i,r){var o=!1;switch(n){case t.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER:"converterHint"===e&&(o||i||(r[e]=n,o=!0));break;case t.ComponentMessaging._DISPLAY_TYPE.INLINE:"messages"===e&&(o||(r[e]=n,o=!0));break;default:o||(r[e]=n,o=!0)}return o},t.ComponentMessaging.prototype._initializeMessagingStrategies=function(){var e=this._getResolvedMessagingDisplayOptions(),n=e[t.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW],i=e[t.ComponentMessaging._DISPLAY_TYPE.NONE],r=e[t.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER],o=e[t.ComponentMessaging._DISPLAY_TYPE.INLINE],a={};n.length>0&&(a[t.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,n)),r.length>0&&(a[t.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,r)),o.length>0&&(a[t.ComponentMessaging._DISPLAY_TYPE.INLINE]=this._createMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.INLINE,o)),a[t.ComponentMessaging._DISPLAY_TYPE.NONE]=this._createMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.NONE,i),this._strategies=a},t.ComponentMessaging.prototype._reactivate=function(){var n,i=this._getResolvedMessagingDisplayOptions(),r=this;e.each(i,function(e,i){e+="",n=r._strategies[e],i&&i.length>0?n?n&&n.reactivate(i):(n=r._createMessagingStrategy(e,i),r._strategies[e]=n,n.activate(r)):n&&t.ComponentMessaging._DISPLAY_TYPE.NONE!==e&&(n.deactivate(),delete r._strategies[e])})},t.MessagingStrategy=function(t){this.Init(t)},t.Object.createSubclass(t.MessagingStrategy,t.Object,"oj.MessagingStrategy"),t.MessagingStrategy.prototype.Init=function(e){t.Assert.assertArray(e),t.MessagingStrategy.superclass.Init.call(this),this._displayOptions=e},t.MessagingStrategy.prototype.activate=function(t){this._componentMessaging=t},t.MessagingStrategy.prototype.deactivate=function(){},t.MessagingStrategy.prototype.close=function(){},t.MessagingStrategy.prototype.reactivate=function(t){this.Init(t)},t.MessagingStrategy.prototype.shouldUpdate=function(t){return!0},t.MessagingStrategy.prototype.update=function(){},t.MessagingStrategy.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},t.MessagingStrategy.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},t.MessagingStrategy.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},t.MessagingStrategy.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},t.MessagingStrategy.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},t.MessagingStrategy.prototype.GetConverterHint=function(){var t=[],e=this._getMessagingContent(),n=e&&e.converterHint;return n&&t.push(n),t},t.MessagingStrategy.prototype.GetValidatorHints=function(){var t=[],n=this._getMessagingContent(),i=n&&n.validatorHint||[];return e.each(i,function(e,n){t.push(n)}),t},t.MessagingStrategy.prototype.GetTitle=function(){var t=this._getMessagingContent();return t&&t.title||""},t.MessagingStrategy.prototype.GetValidityState=function(){var t=this._getMessagingContent();return t&&t.validityState||null},t.MessagingStrategy.prototype.HasMessages=function(){var t=this.GetMessages();return!!(t&&t.length>0)},t.MessagingStrategy.prototype.ShowMessages=function(){return this._displayOptions.indexOf("messages")!==-1},t.MessagingStrategy.prototype.ShowConverterHint=function(){return this._displayOptions.indexOf("converterHint")!==-1},t.MessagingStrategy.prototype.ShowValidatorHint=function(){return this._displayOptions.indexOf("validatorHint")!==-1},t.MessagingStrategy.prototype.ShowTitle=function(){return this._displayOptions.indexOf("title")!==-1},t.MessagingStrategy.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},t.MessagingStrategy.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},t.DefaultMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.NONE,t.DefaultMessagingStrategy),t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID="oj-invalid",t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING="oj-warning",t.Object.createSubclass(t.DefaultMessagingStrategy,t.MessagingStrategy,"oj.DefaultMessagingStrategy"),t.DefaultMessagingStrategy.prototype.update=function(){t.DefaultMessagingStrategy.superclass.update.call(this);var e=this.GetLauncher(),n=this.GetMaxSeverity(),i=[],r=[],o=!1,a=this.GetComponent(),s=a.widget();e&&(this.IsInvalid()?(i.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),r.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),o=!0):this.HasMessages()&&n===t.Message.SEVERITY_LEVEL.WARNING?(i.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),r.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)):(i.push(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID),i.push(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING)),s.removeClass(i.join(" ")).addClass(r.join(" ")),this.GetContentElement().attr({"aria-invalid":o}))},t.DefaultMessagingStrategy.prototype.deactivate=function(){
var e=this.GetComponent().widget();e.removeClass(t.DefaultMessagingStrategy._SELECTOR_STATE_INVALID).removeClass(t.DefaultMessagingStrategy._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),t.DefaultMessagingStrategy.superclass.deactivate.call(this)},t.PlaceholderMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.PLACEHOLDER,t.PlaceholderMessagingStrategy),t.Object.createSubclass(t.PlaceholderMessagingStrategy,t.MessagingStrategy,"oj.PlaceholderMessagingStrategy"),t.PlaceholderMessagingStrategy.prototype.Init=function(e){t.PlaceholderMessagingStrategy.superclass.Init.call(this,e)},t.PlaceholderMessagingStrategy.prototype.activate=function(e){t.PlaceholderMessagingStrategy.superclass.activate.call(this,e),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype.reactivate=function(e){t.PlaceholderMessagingStrategy.superclass.reactivate.call(this,e),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype.shouldUpdate=function(t){return!(!t||void 0===t.converterHint)},t.PlaceholderMessagingStrategy.prototype.update=function(){t.PlaceholderMessagingStrategy.superclass.update.call(this),this._refreshPlaceholder()},t.PlaceholderMessagingStrategy.prototype._refreshPlaceholder=function(){var t,e,n=this.GetLauncher();if(this.ShowPlaceholderContent()&&n){e=this.GetConverterHint(),t=e.length?e[0]:"";var i={};i.internalMessagingSet=!0,this.GetComponent().option({placeholder:t},{_context:i})}},t.PlaceholderMessagingStrategy.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()},t.ComponentValidity=function(t,e){this.Init(t,e)},t.ComponentValidity.isInvalid=function(e){var n=t.Message.getMaxSeverity(e);return n>=t.Message.SEVERITY_LEVEL.ERROR},t.Object.createSubclass(t.ComponentValidity,t.Object,"oj.ComponentValidity"),t.ComponentValidity.prototype.Init=function(e,n){t.ComponentValidity.superclass.Init.call(this),this._initialize(e,n)},t.ComponentValidity.prototype.isInvalid=function(){return this._invalid},t.ComponentValidity.prototype.hasMessages=function(){return this._messages.length>0},t.ComponentValidity.prototype.getMessages=function(){return this._messages},t.ComponentValidity.prototype.getMaxSeverity=function(){return this._maxSeverity},t.ComponentValidity.prototype.update=function(t,e){this._initialize(t,e)},t.ComponentValidity.prototype._initialize=function(e,n){this._compValid=e,this._compMessages=n,this._messages=this._getImmediateMessages(),this._maxSeverity=t.Message.getMaxSeverity(this._messages),this._invalid=t.ComponentValidity.isInvalid(this._messages)},t.ComponentValidity.prototype._getImmediateMessages=function(){for(var e,n=this._compMessages||[],i=[],r=0;r<n.length;r++)e=n[r],e instanceof t.ComponentMessage&&!e.canDisplay()||i.push(e);return i},t.FocusUtils={},t.FocusUtils._TABBABLE=":tabbable",t.FocusUtils.containsFocus=function(e){var n=document.activeElement;return!(!e||!n)&&t.DomUtils.isAncestorOrSelf(e,n)},t.FocusUtils.focusElement=function(t){t.focus()},t.FocusUtils.focusFirstTabStop=function(e){var n=t.FocusUtils.getFirstTabStop(e);return n&&t.FocusUtils.focusElement(n),n},t.FocusUtils.getFirstTabStop=function(n){var i=e(n);if(i.is(t.FocusUtils._TABBABLE))return n;var r=i.find(t.FocusUtils._TABBABLE);return r&&r.length>0?r[0]:null},t.FocusUtils.isFocusable=function(n){return!!e(n).is(":focusable")&&!("A"===n.nodeName&&!n.hasAttribute("tabindex")&&t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.SAFARI)},t.Test={},t.Test.ready=!1,t.Test.domNodeForLocator=function(n){var i=n;if(t.StringUtils.isString(n)){var r=n;try{i=JSON.parse(r)}catch(o){return null}}if(i&&i.element){var a=e(i.element);if(a){var s=t.Components.getWidgetConstructor(a[0],i.component);return delete i.element,s("getNodeBySubId",i)}}return null},t.Test.getOpenPopupCount=function(){return t.ZOrderUtils.getOpenPopupCount()},t.Test.findOpenPopups=function(){return t.ZOrderUtils.findOpenPopups()},t.Test.compareStackingContexts=function(e,n){return t.ZOrderUtils.compareStackingContexts(e,n)},function(){var e={properties:{contextMenu:{type:"string"},rootAttributes:{type:"Object"},translations:{type:"Object"}},methods:{getNodeBySubId:{},option:{},refresh:{}},extension:{_widgetName:"baseComponent"}};t.Components.registerMetadata("baseComponent",null,e)}()}),define("ojs/ojbutton",["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(t,e){!function(){t.__registerWidget("oj.ojButton",e.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null},_InitOptions:function(t,e){this._super(t,e),this._initButtonTypes(),"disabled"in e||this.option("disabled",!!this.element.prop("disabled"),{_context:{internalSet:!0}}),"label"in e||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement.html(),{_context:{internalSet:!0}})),!this.options.menu||e.icons&&void 0!==e.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.element.closest("form").unbind("reset"+r).bind("reset"+r,function(){var t=e(this);setTimeout(function(){var n=t.find(":oj-button").each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)});n.length||t.unbind("reset"+r)},1)}),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.attr("title");var t=this,a=(this.options,this._isToggle),s=a?"":"oj-active";this.rootElement.addClass(o),h(this.rootElement,this.options.chroming);var l=function(){t._lastTouch=Date.now(),t.rootElement.removeClass(s),t.rootElement.removeClass("oj-hover"),t._toggleDefaultClasses()};if(this.document.bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,l),this.buttonElement.bind("touchstart"+this.eventNamespace,function(){t._IsEffectivelyDisabled()||(e(this).addClass(s),t._toggleDefaultClasses())}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,l).bind("mouseenter"+this.eventNamespace,function(){t._IsEffectivelyDisabled()||t._recentTouch()||(this===n&&t.rootElement.addClass("oj-active"),t.rootElement.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){t.rootElement.removeClass("oj-hover"),t._IsEffectivelyDisabled()||(t.rootElement.removeClass(s),t._toggleDefaultClasses())}),this._disabledClickHandler=function(e){t._IsEffectivelyDisabled()&&(e.preventDefault(),e.stopImmediatePropagation())},this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:this.rootElement,applyHighlight:!0,afterToggle:function(){t._toggleDefaultClasses()}}),a&&(this.element.bind("change"+this.eventNamespace,function(e){t._applyCheckedStateFromDom(!0);var n=t._getEnclosingContainerComponent("buttonset"),i=n&&n._getCheckedFromDom(n.$buttons);n&&void 0!==i&&n.option("checked",i,{_context:{writeback:!0,originalEvent:e,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){t._IsEffectivelyDisabled()||(i=this,t.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(e){t._IsEffectivelyDisabled()||this===i&&t.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(e){if(t._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(n){n.keyCode===e.ui.keyCode.ENTER&&(t._IsEffectivelyDisabled()||t.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(t._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(n){n.keyCode===e.ui.keyCode.ENTER&&(t.element[0].checked||t._IsEffectivelyDisabled()||(t.element[0].checked=!0,t.element.change(),t.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(i){return!t._IsEffectivelyDisabled()&&void(1!==i.which||t._recentTouch()||(e(this).addClass("oj-active").removeClass("oj-default oj-focus-only"),n=this,t.document.one("mouseup",function(){n=null})))}).bind("mouseup"+this.eventNamespace,function(){return!t._IsEffectivelyDisabled()&&(e(this).removeClass("oj-active"),void t._toggleDefaultClasses())}).bind("keydown"+this.eventNamespace,function(n){if(t._IsEffectivelyDisabled())return n.keyCode===e.ui.keyCode.TAB||n.keyCode===e.ui.keyCode.LEFT||n.keyCode===e.ui.keyCode.RIGHT;var i=n.keyCode===e.ui.keyCode.SPACE,r="anchor"===t.type;r&&i&&n.preventDefault(),(i&&!r||n.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("oj-active"),t._toggleDefaultClasses()}),"anchor"===this.type){var u=this.buttonElement.attr("tabindex");("undefined"===u||null===u||isNaN(u))&&this.buttonElement.attr("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled(),this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses()},_recentTouch:function(){return Date.now()-this._lastTouch<500},_NotifyContextMenuGesture:function(t,e,n){this._OpenContextMenu(e,n,{position:{of:"keyboard"===n?this.rootElement:e}})},_initButtonTypes:function(){if(this.element.is("input[type=checkbox]"))this.type="checkbox",this._isToggle=!0;else if(this.element.is("input[type=radio]"))this.type="radio",this._isToggle=!0;else if(this.element.is("input[type=button],input[type=submit],input[type=reset]"))this.type="inputPush";else if(this.element.is("button"))this.type="button";else{if(!this.element.is("a"))throw new Error("JET Button not supported on this element type");this.type="anchor"}if(this._isToggle){var t="label[for='"+this.element.attr("id")+"']";this.buttonElement=this.element.siblings().filter(t)}else this.buttonElement=this.element},_initButtonTypes2:function(){if(this._isToggle){this.buttonElement.addClass("oj-button-label"),this.element.addClass("oj-button-input oj-helper-hidden-accessible").add(this.buttonElement).wrapAll("<span></span>"),this.rootElement=this.element.parent(),this.rootElement.addClass("oj-button-toggle");var t=this.element[0].checked;t&&this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only")}else this.rootElement=this.element},widget:function(){return this.rootElement},_destroy:function(){this._removeMenuBehavior(this.options.menu),this.document.off(this.eventNamespace),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.element.removeClass("oj-helper-hidden-accessible").removeAttr("aria-labelledby").removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var e=this._isToggle;e||this.rootElement.removeClass(o+" "+a+" "+s+" "+l),this.buttonElement.html(this.buttonElement.find(".oj-button-text").html()),e?(this.buttonElement.removeClass("oj-button-label"),t.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttr("title"),i===this.buttonElement[0]&&(i=null)},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(t){this._super(t),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this._IsEffectivelyDisabled();this.rootElement.toggleClass("oj-disabled",t),this.rootElement.toggleClass("oj-enabled",!t),"anchor"!==this.type?(this.element.prop("disabled",t),this.rootElement.removeAttr("aria-disabled")):this.rootElement.attr("aria-disabled",t),t?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus oj-focus-highlight"),n=null,this._dismissMenu(this.options.menu)):this._toggleDefaultClasses()},_setOption:function(t,e,n){var i=this.options[t];switch(this._super(t,e,n),t){case"chroming":h(this.rootElement,e);break;case"disabled":this._manageAnchorTabIndex(i,e),this._updateEffectivelyDisabled();break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(i)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),h(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(t){"radio"===this.type?(t?c(this.element[0]):this.element).each(function(){var t=e(this).data("oj-ojButton");this.checked?t.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(t.rootElement.removeClass("oj-selected"),t._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this._setLabelOnDomAtCreateTime(),e=this._setIconOnDom(!0),n=this._setIconOnDom(!1);this._setDisplayOptionOnDom(t,e,n)}},_setLabelOnDomAtCreateTime:function(){var t=this.buttonElement,n=e("<span class='oj-button-text'></span>",this.document[0]);if(this.keepDomLabel?n.append(t.contents()):(t.empty(),n.text(this.options.label)),"button"===this.type){var i=e("<div></div>").addClass("oj-button-label");i.append(n),this.element.append(i)}else t.append(n);return"button"!==this.type&&"anchor"!==this.type||(n.uniqueId(),this.element.attr("aria-labelledby",n.attr("id"))),n},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this.buttonElement.find(".oj-button-text");t.text(this.options.label),this._setDisplayOptionOnDom(t)}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var t=this._setIconOnDom(!0),e=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,t,e)}},_setIconOnDom:function(t){var n=this.buttonElement;if("button"===this.type&&(n=this.element.children("div.oj-button-label")),t)var i=".oj-button-icon.oj-start",r="oj-button-icon oj-start",o=this.options.icons.start,a="_lastStartIcon",s="prependTo";else i=".oj-button-icon.oj-end",r="oj-button-icon oj-end",o=this.options.icons.end,a="_lastEndIcon",s="appendTo";var l=n.find(i);if(o){if(l.length){var u=this[a];l.removeClass(u)}else l=e("<span></span>").addClass(r)[s](n);l.addClass(o)}else l.remove();return this[a]=o,!!o},_setDisplayOptionOnDom:function(t,n,i){void 0===t&&(t=this.buttonElement.find(".oj-button-text")),void 0===n&&(n=!!this.options.icons.start),void 0===i&&(i=!!this.options.icons.end);var r=n&&i,o=n||i,a="icons"===this.options.display;if(o&&a){if(t.addClass("oj-helper-hidden-accessible"),!this.hasTitle){var l=t.text();this.rootElement.attr("title",e.trim(l))}}else t.removeClass("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttr("title");var u=o?a?r?"oj-button-icons-only":"oj-button-icon-only":r?"oj-button-text-icons":n?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.rootElement.removeClass(s).addClass(u)},_manageAnchorTabIndex:function(t,e){if(!t!=!e&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length)if(e){var n=this.element.attr("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(n))?n:null,this.element.attr("tabindex",-1)}else null==this._oldAnchorTabIndex?this.element.removeAttr("tabindex"):this.element.attr("tabindex",this._oldAnchorTabIndex)},_isInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(t){return this.rootElement.closest(this._selectorMap[t])},_getEnclosingContainerComponent:function(e){var n=this._getEnclosingContainerElement(e)[0],i=t.Components.getWidgetConstructor(n,this._constructorMap[e]);return i&&i("instance")},_setupMenuButton:function(t){if(this.options.menu&&this.element.is("input"))throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(t),this.options.menu){var n=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(t){if(t.which===e.ui.keyCode.DOWN)return n._showMenu(t,"firstItem"),t.preventDefault(),!0;if(t.which===e.ui.keyCode.ESCAPE){var i=n._checkMenuParent(n.rootElement);return n._dismissMenu(n.options.menu,t),i}return!0}).on("click"+this.menuEventNamespace,function(t){var e=n._getMenu();return e.__spaceEnterDownInMenu||n._showMenu(t,"firstItem"),e.__spaceEnterDownInMenu=!1,t.preventDefault(),!0})}},_checkMenuParent:function(t){return!t.hasClass("oj-selected")},_removeMenuBehavior:function(t){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(t),e(t).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var t=this._getMenuOnly(this.options.menu);if(!t)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var e=this;t.widget().on("ojclose"+this.menuEventNamespace,function(t,n){e._menuDismissHandler(t)}),this._menuListenerSet=!0}return t},_getMenuOnly:function(n){var i=t.Components.getWidgetConstructor(e(n)[0],"ojMenu");return i&&i("instance")},_showMenu:function(t,e){if(!this._IsEffectivelyDisabled()){var n=this._getMenu(),i=n.widget();n.open(t,{launcher:this.element,initialFocus:e}),i.is(":visible")&&(this._menuVisible=!0,i.attr("aria-label")||i.attr("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,i.attr("aria-labelledby",this.element.attr("id"))),this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"))}},_dismissMenu:function(t,e){if(this._menuVisible){var n=this._getMenuOnly(t);n&&(n.__collapseAll(e,!0),n.__dismiss(e))}},_menuDismissHandler:function(t){this._setAriaLabelledBy&&(e(this.options.menu).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var t,e,n=this.rootElement.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled");if(n)t=!1,e=!1;else{var i=this.rootElement.is(".oj-focus");t=!i,e=i}this.rootElement.toggleClass("oj-default",t),this.rootElement.toggleClass("oj-focus-only",e)}}),t.__registerWidget("oj.ojButtonset",e.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",focusManagement:"oneTabstop"},_setCheckedOnDom:function(t,n){var i,r,o=e.type(t);if("null"!==o&&"array"!==o||(r=n.filter("input[type=checkbox]").length===n.length),r&&"null"===o)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t);if("string"===o||"null"===o){var a=n[0].name,s=(a||n.length<=1)&&n.filter("input[type=radio][name="+a+"]").length===n.length&&(null===t||n.filter("[value="+t+"]").length);s&&n.each(function(){this.checked=this.value===t}),i=s||null===t}else if("array"===o){var l;i=r&&t.concat().sort().every(function(t,e,i){var r=t!==l&&n.filter("[value="+t+"]").length;return l=t,r}),i&&n.each(function(){this.checked=t.indexOf(this.value)>-1})}else i=!1;if(!i)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t)},_getCheckedFromDom:function(t){var e=void 0,n=null,i=null;return t.each(function(t){var r=this.tagName.toLowerCase();if("input"!==r)return e=void 0,!1;var o,a,s=this.type.toLowerCase();if("radio"===s)o=!0,a=this.name.toLowerCase();else{if("checkbox"!==s)return e=void 0,!1;o=!1,a=null}return void 0!==e&&(o!==n||a!==i||n&&!i)?(e=void 0,!1):void(void 0===e?(e=o?this.checked?this.value:null:this.checked?[this.value]:[],n=o,i=a):this.checked&&(n?e=this.value:e.push(this.value)))}),e},_CompareOptionValues:function(t,n,i){return"checked"===t?n===i||"array"===e.type(n)&&"array"===e.type(i)&&this._compareArraysAsSets(n,i):this._superApply(arguments)},_compareArraysAsSets:function(t,e){return!t.some(function(t){return e.indexOf(t)<0})&&!e.some(function(e){return t.indexOf(e)<0})},_InitOptions:function(t,n){if(this._super(t,n),this.$buttons=this.element.find(this._items),!("checked"in n)){this.initCheckedFromDom=!0;var i=this._getCheckedFromDom(this.$buttons);"array"===e.type(i)&&(this.options.checked=[]),void 0!==i&&this.option("checked",i,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super(),this.element.attr(t.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-buttonset oj-component"),this._setRole(this.options.focusManagement),this._setup(!0)},_NotifyContextMenuGesture:function(t,e,n){var i=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(e,n,{launcher:i,position:{of:"keyboard"===n?i.ojButton("widget"):e}})},_propagateDisabled:function(t){t=!!t,this.$buttons.each(function(){e(this).data("oj-ojButton").__setAncestorComponentDisabled(t)})},_setRole:function(t){"oneTabstop"===t?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(t,n,i){this._superApply(arguments),"disabled"===t?this._propagateDisabled(n):"checked"===t?(this._setCheckedOnDom(n,this.$buttons),this.$buttons.each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})):"focusManagement"===t?this._setRole(n):"chroming"===t&&(h(this.element,n),this.$buttons.ojButton("refresh"))},refresh:function(){this._super(),this._setup(!1)},_setup:function(t){var n=this;this.isRtl="rtl"===this._GetReadingDirection(),h(this.element,this.options.chroming),t?this.initCheckedFromDom||this._setCheckedOnDom(this.options.checked,this.$buttons):this.$buttons=this.element.find(this._items),this.element.toggleClass("oj-buttonset-multi",this.$buttons.length>1),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton().end().map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end(),this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){n._handleKeyDown(t,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){e(this).data("oj-ojButton")._IsEffectivelyDisabled()||n._setTabStop(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){n._setTabStop(e(this))}),this.$enabledButtons=this.$buttons.filter(function(t){return!e(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(t))},_initTabindexes:function(t){var n=e(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1");var i;i=t||!n.is(this.$enabledButtons)?this.$enabledButtons.first():n,this._setTabStop(i)},_mapToTabbable:function(t){var e=this.$enabledButtons;return t.map(function(t,n){if("radio"!=n.type||n.checked||""==n.name)return n;var i=c(n,e).filter(":checked");return i.length?i[0]:n})},_setTabStop:function(t){t=this._mapToTabbable(t);var n=t[0],i=this._lastTabStop;n!==i&&(e(i).attr("tabindex","-1"),t.attr("tabindex","0"),this._lastTabStop=n)},_handleKeyDown:function(t,n){switch(t.which){case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.preventDefault();var i=this.$enabledButtons,r=i.length;if(r<2)break;var o=i.index(n),a=t.which==e.ui.keyCode.RIGHT^this.isRtl?1:-1,s=(o+a+r)%r;i.eq(s).focus();break;case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:"radio"==n.attr("type")&&t.preventDefault()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component "+l).removeAttr(t.Components._OJ_CONTAINER_ATTR).removeAttr("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});var n,i,r=".ojButton",o="oj-button oj-component oj-enabled oj-default",a="oj-hover oj-active oj-selected",s="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",l="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",u={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},h=function(t,e){t.removeClass(l).addClass(u[e])},c=function(t,n){var i,r=t.name,o=t.form;if(r){r=r.replace(/'/g,"\\'");var a=":radio[name='"+r+"']:oj-button";i=n?n.filter(a):o?e(o).find(a):e(a,t.ownerDocument).filter(function(){return!this.form})}else i=(n?n.filter(t):e(t)).filter(":oj-button");return i},d=function(e,n,i){for(var r=0;r<i.length;++r){var o=i[r];if(n.indexOf(o)>=0)for(;;e=e.parentNode){var a=t.Components.getWidgetConstructor(e,o);if(a)return a}}return null},p={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]},g=function(e,n,i){var r=d(n,i,p[e]);return r?r("option","chroming"):(t.ThemeUtils.parseJSONFromFontFamily("oj-"+e+"-option-defaults")||{}).chroming};t.Components.setDefaultOptions({ojButton:{chroming:t.Components.createDynamicPropertyGetter(function(t){return g("button",t.element,t.containers)})},ojButtonset:{chroming:t.Components.createDynamicPropertyGetter(function(t){return g("buttonset",t.element,t.containers)})}})}(),function(){var e={properties:{chroming:{type:"string"},disabled:{type:"boolean"},display:{type:"string"},icons:{type:"Object"},label:{type:"string"},menu:{type:"string"}},methods:{destroy:{},refresh:{},widget:{}},extension:{_hasWrapper:!0,_innerElement:"button",_widgetName:"ojButton"}};t.Components.registerMetadata("ojButton","baseComponent",e),t.Components.register("oj-button",t.Components.getMetadata("ojButton"))}(),function(){var e={properties:{chroming:{type:"string"},disabled:{type:"boolean"},display:{type:"string"},icons:{type:"Object"},label:{type:"string"},menu:{type:"string"}},methods:{destroy:{},refresh:{},widget:{}},extension:{_hasWrapper:!0,_defaultAttrs:{type:"checkbox"},_innerElement:"input",_widgetName:"ojButton"}};t.Components.registerMetadata("ojToggleButton","baseComponent",e),t.Components.register("oj-toggle-button",t.Components.getMetadata("ojToggleButton"))}(),function(){var e={properties:{checked:{type:"string|Array<string>"},chroming:{type:"string"},disabled:{type:"boolean"},focusManagement:{type:"string"}},methods:{destroy:{},refresh:{},widget:{}},extension:{_widgetName:"ojButtonset"}};t.Components.registerMetadata("ojButtonset","baseComponent",e),t.Components.register("oj-buttonset",t.Components.getMetadata("ojButtonset"))}()}),define("ojs/ojdomscroller",["ojs/ojcore","jquery"],function(t,e){t.DomScroller=function(t,n,i){i=i||{},this._data=n,this._element=e(t)[0],this._fetchSize=i.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=i.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=0,this._successCallback=i.success,this._errorCallback=i.error,this._registerDataSourceEventListeners(),this._fetchTrigger=i.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,e(this._getScrollEventElement()).on("scroll.domscroller",function(t){var e=this._element,n=this._getScrollTop(e),i=e.scrollHeight-e.clientHeight;i>0&&this._handleScrollerScrollTop(n,i)}.bind(this))},t.DomScroller.prototype._getScrollEventElement=function(){return this._element==document.body||this._element==document.documentElement?window:this._element},t.DomScroller.calculateOffsetTop=function(t,n){for(var i=0,r=n;r&&r!=t&&e.contains(t,r);)i+=r.offsetTop,r=r.offsetParent;return i},t.DomScroller.prototype._getScrollTop=function(t){var e=this._fetchTrigger;return t==document.documentElement&&(void 0===this._useBodyScrollTop&&(this._useBodyScrollTop=this._initialScrollTop==t.scrollTop),this._useBodyScrollTop)?e+document.body.scrollTop:e+t.scrollTop},t.DomScroller.prototype.destroy=function(){this._unregisterDataSourceEventListeners(),e(this._getScrollEventElement()).off("scroll.domscroller")},t.DomScroller.prototype.checkViewport=function(){return this._element.clientHeight>0&&!this._checkOverflow()?this._fetchMoreRows():Promise.resolve(null)},t.DomScroller.prototype._handleScrollerScrollTop=function(t,e){if(e-t<=1&&!this._fetchPromise){var n=this;this._fetchMoreRows().then(function(t){null!=n._successCallback&&n._successCallback(t)},this._errorCallback)}},t.DomScroller.prototype._checkOverflow=function(){var t=this._element;return t.scrollHeight>t.clientHeight+this._fetchTrigger},t.DomScroller.prototype._fetchMoreRows=function(){if(this._fetchPromise)return this._fetchPromise;var t=this._maxCount-this._rowCount;if(t>0){var e=this._fetchSize,n=this;t<this._fetchSize&&(e=t);var i=this._fetchNext({pageSize:e});return this._fetchPromise=new Promise(function(e,r){i.then(function(i){n._fetchPromise=null,null!=i&&i.data.length>0&&(n._rowCount=i.data.length+i.startIndex,t<n._fetchSize&&(i.maxCount=n._maxCount,i.maxCountLimit=!0)),e(i)})}),this._fetchPromise}return Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})},t.DomScroller.prototype._fetchNext=function(t){t=t||{};var e=t.pageSize;if(this._currentStartIndex?this._currentStartIndex=this._currentStartIndex+e:this._currentStartIndex=e,this._data.totalSize()==-1||!this._isTotalSizeConfidenceActual()||this._isTotalSizeConfidenceActual()&&this._data.totalSize()>this._currentStartIndex){var n=this;return new Promise(function(t,i){n._data.fetch({startIndex:n._currentStartIndex,pageSize:e}).then(function(e){t(e)},function(t){i(null)})})}return Promise.resolve()},t.DomScroller.prototype._handleDataReset=function(){this._currentStartIndex=null,this._rowCount=0},t.DomScroller.prototype._handleDataSync=function(t){this._currentStartIndex=t.startIndex,t.data.length>0&&(this._rowCount=t.data.length+this._currentStartIndex)},t.DomScroller.prototype._handleDataRowEventFunc=function(e){return function(n){n=n||{};var i,r=n.indexes,o=r.length;for(i=0;i<o;i++){var a=r[i];void 0!==a&&this._rowCount>0&&a<=this._rowCount&&(e==t.TableDataSource.EventType.ADD?this._rowCount=this._rowCount+1:e==t.TableDataSource.EventType.REMOVE&&(this._rowCount=this._rowCount-1))}}},t.DomScroller.prototype._isTotalSizeConfidenceActual=function(){var t=this._data;return null!=t&&"actual"==t.totalSizeConfidence()},t.DomScroller.prototype._registerDataSourceEventListeners=function(){var e=this._data;if(null!=e){this._unregisterDataSourceEventListeners(),this._dataSourceEventHandlers=[],this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.SORT,eventHandler:this._handleDataReset.bind(this)}),this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.REFRESH,eventHandler:this._handleDataReset.bind(this)}),this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.RESET,eventHandler:this._handleDataReset.bind(this)}),this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.SYNC,eventHandler:this._handleDataSync.bind(this)}),this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.ADD,eventHandler:this._handleDataRowEventFunc(t.TableDataSource.EventType.ADD).bind(this)}),this._dataSourceEventHandlers.push({eventType:t.TableDataSource.EventType.REMOVE,eventHandler:this._handleDataRowEventFunc(t.TableDataSource.EventType.REMOVE).bind(this)});var n,i;for(n=0;n<this._dataSourceEventHandlers.length;n++)i=e.on(this._dataSourceEventHandlers[n].eventType,this._dataSourceEventHandlers[n].eventHandler),i&&(this._dataSourceEventHandlers[n].eventHandler=i);
}},t.DomScroller.prototype._unregisterDataSourceEventListeners=function(){var t=this._data;if(null!=this._dataSourceEventHandlers&&null!=t){var e;for(e=0;e<this._dataSourceEventHandlers.length;e++)t.off(this._dataSourceEventHandlers[e].eventType,this._dataSourceEventHandlers[e].eventHandler)}}}),define("ojs/ojlistview",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdomscroller","ojs/ojanimation","promise"],function(t,e){t.DataSourceContentHandler=function(t,e,n){this.m_root=e,this.m_widget=t,this.m_fetching=!1,this.setDataSource(n),this.Init()},t.Object.createSubclass(t.DataSourceContentHandler,t.Object,"oj.DataSourceContentHandler"),t.DataSourceContentHandler.prototype.Init=function(){t.DataSourceContentHandler.superclass.Init.call(this)},t.DataSourceContentHandler.prototype.HandleResize=function(t,e){},t.DataSourceContentHandler.prototype.notifyShown=function(){},t.DataSourceContentHandler.prototype.Destroy=function(){e(this.m_root).empty(),this.m_widget=null,this.m_root=null},t.DataSourceContentHandler.prototype.IsReady=function(){return!this.m_fetching},t.DataSourceContentHandler.prototype.setRootAriaProperties=function(){this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},t.DataSourceContentHandler.prototype.RenderContent=function(){this.signalTaskStart(),this.fetchRows(!1),this.setRootAriaProperties(),this.signalTaskEnd()},t.DataSourceContentHandler.prototype.GetKey=function(t){return t.key},t.DataSourceContentHandler.prototype.FindElementByKey=function(t){var n,i,r;for(n=e(this.m_root).find("."+this.m_widget.getItemElementStyleClass()),i=0;i<n.length;i++)if(r=n[i],t==this.GetKey(r))return r;return null},t.DataSourceContentHandler.prototype.getDataSource=function(){return this.m_dataSource},t.DataSourceContentHandler.prototype.setDataSource=function(t){this.m_dataSource=t},t.DataSourceContentHandler.prototype.fetchRows=function(t){this.m_widget.showStatusText()},t.DataSourceContentHandler.prototype.addItem=function(t,n,i,r,o){var a,s,l,u;return a=document.createElement("li"),e(a).uniqueId(),l=e(t).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()),s=n===l.length?null:l[n],t.insertBefore(a,s),u=e(t).children().index(a),this._addOrReplaceItem(a,u,t,n,i,r,o)},t.DataSourceContentHandler.prototype.replaceItem=function(t,n,i,r,o){var a,s;this.signalTaskStart(),e(t).empty(),a=t.parentNode,s=e(a).children().index(t),this._addOrReplaceItem(t,s,a,n,i,r,o)},t.DataSourceContentHandler.prototype._addOrReplaceItem=function(t,n,i,r,o,a,s){var l,u,h,c;return void 0==s&&(s=this.afterRenderItem.bind(this)),l=this.createContext(r,o,a,t),u=this.m_widget._getItemRenderer(),null!=u?(h=u.call(this,l),null!=h&&(null===h.parentNode||h.parentNode instanceof DocumentFragment?t.appendChild(h):null!=h.parentNode||h.toString&&(c=document.createElement("span"),c.appendChild(document.createTextNode(h.toString())),t.appendChild(c)))):(c=document.createElement("span"),c.appendChild(document.createTextNode(null==o?"":o.toString())),t.appendChild(c)),t=i.children[n],l.parentElement=t,e.data(t,"data",o),s(t,l),{item:t,context:l}},t.DataSourceContentHandler.prototype.afterRenderItem=function(t,n){var i;t.key=n.key,t=e(t),t.uniqueId(),i=this.m_widget.getSingleFocusableElement(t),i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!=t&&t.attr("role","presentation"),i.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(n)||t.addClass("oj-skipfocus"),t.addClass(this.m_widget.getItemElementStyleClass())},t.DataSourceContentHandler.prototype.createContext=function(t,e,n,i){var r,o;r={},r.parentElement=i,r.index=t,r.data=e,r.component=this.m_widget.getWidgetConstructor(),r.datasource=this.getDataSource();for(o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);return r},t.DataSourceContentHandler.prototype.isFocusable=function(t){return this.m_widget._getItemOption("focusable",t,!0)},t.DataSourceContentHandler.prototype.isSelectable=function(t){return this.m_widget._getItemOption("selectable",t,!0)},t.DataSourceContentHandler.prototype.signalTaskStart=function(){this.m_widget&&this.m_widget.signalTaskStart()},t.DataSourceContentHandler.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},t.TableDataSourceContentHandler=function(e,n,i){t.TableDataSourceContentHandler.superclass.constructor.call(this,e,n,i)},t.Object.createSubclass(t.TableDataSourceContentHandler,t.DataSourceContentHandler,"oj.TableDataSourceContentHandler"),t.TableDataSourceContentHandler.prototype.Init=function(){t.TableDataSourceContentHandler.superclass.Init.call(this)},t.TableDataSourceContentHandler.prototype.IsHierarchical=function(){return!1},t.TableDataSourceContentHandler.prototype.Destroy=function(){t.TableDataSourceContentHandler.superclass.Destroy.call(this),this._removeDataSourceEventListeners(),null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null,this.m_domScrollerMaxCountFunc=null),this.m_loadingIndicator=null},t.TableDataSourceContentHandler.prototype.HandleResize=function(t,e){this._isLoadMoreOnScroll()&&void 0!=this.m_height&&this.m_height!=e&&(this.m_height=e,this.checkViewport())},t.TableDataSourceContentHandler.prototype.notifyShown=function(){this._isLoadMoreOnScroll()&&this.checkViewport()},t.TableDataSourceContentHandler.prototype._isLoadMoreOnScroll=function(){return"loadMoreOnScroll"==this.m_widget.options.scrollPolicy},t.TableDataSourceContentHandler.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},t.TableDataSourceContentHandler.prototype._getScroller=function(){var n=this.m_widget.options.scrollPolicyOptions.scroller;return null!=n&&e.contains(n,this.m_root)?(this._fetchTrigger=t.DomScroller.calculateOffsetTop(n,this.m_root),n):this.m_widget.getRootElement()},t.TableDataSourceContentHandler.prototype._getFetchTrigger=function(){return this._fetchTrigger},t.TableDataSourceContentHandler.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},t.TableDataSourceContentHandler.prototype.setDataSource=function(e){var n;this._removeDataSourceEventListeners(),null!=e&&(this._isLoadMoreOnScroll()&&(n=this,this.m_domScrollerMaxCountFunc=function(t){null!=t?(n.signalTaskStart(),n._removeLoadingIndicator(),n.IsReady()&&n.signalTaskStart(),n._handleFetchedData(t),t.maxCountLimit?n._handleScrollerMaxRowCount():n._appendLoadingIndicator(),n.signalTaskEnd(),n.signalTaskEnd()):void 0===t&&(n._removeLoadingIndicator(),n.signalTaskEnd())},this.m_domScroller=new t.DomScroller(this._getScroller(),e,{fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),success:this.m_domScrollerMaxCountFunc,error:this.signalTaskEnd}),this.m_domScroller._handleScrollerScrollTop=function(e,i){i-e<=1&&n.signalTaskStart(),t.DomScroller.prototype._handleScrollerScrollTop.call(this,e,i)}),this.m_handleModelSyncEventListener=this.handleModelSyncEvent.bind(this),this.m_handleModelSortEventListener=this.handleModelSortEvent.bind(this),this.m_handleModelAddEventListener=this.handleModelAddEvent.bind(this),this.m_handleModelRemoveEventListener=this.handleModelRemoveEvent.bind(this),this.m_handleModelChangeEventListener=this.handleModelChangeEvent.bind(this),this.m_handleModelResetEventListener=this.handleModelResetEvent.bind(this),t.PagingTableDataSource&&e instanceof t.PagingTableDataSource&&e.on("sync",this.m_handleModelSyncEventListener),e.on("sort",this.m_handleModelSortEventListener),e.on("add",this.m_handleModelAddEventListener),e.on("remove",this.m_handleModelRemoveEventListener),e.on("change",this.m_handleModelChangeEventListener),e.on("reset",this.m_handleModelResetEventListener),e.on("refresh",this.m_handleModelResetEventListener)),this.m_dataSource=e},t.TableDataSourceContentHandler.prototype._appendLoadingIndicator=function(){var t,n;null==this.m_loadingIndicator&&(t=e(document.createElement("li")),t.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()),n=e(document.createElement("div")),n.addClass("oj-listview-loading-icon"),t.append(n),e(this.m_root).append(t),this.m_loadingIndicator=t)},t.TableDataSourceContentHandler.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null},t.TableDataSourceContentHandler.prototype.afterRenderItem=function(n,i){var r;t.TableDataSourceContentHandler.superclass.afterRenderItem.call(this,n,i),e(n).addClass(this.m_widget.getItemStyleClass()),this.m_widget._isSelectionEnabled()&&this.isSelectable(i)&&this.m_widget.getFocusItem(e(n)).attr("aria-selected",!1),this._isLoadMoreOnScroll()&&(r=Math.min(this.m_dataSource.totalSize(),this._getMaxCount()),r===-1&&(r=this._getMaxCount()),r>0&&e(n).attr("aria-setsize",r).attr("aria-posinset",i.index+1)),this.m_widget.itemRenderComplete(n,i)},t.TableDataSourceContentHandler.prototype.afterRenderItemForInsertEvent=function(n,i){var r,o,a,s,l,u,h="add";this.signalTaskStart(),this.afterRenderItem(n,i),r=e(n),o=r.outerHeight(),a=this.m_widget.getItemStyleClass(),r.children().wrapAll("<div></div>"),r.removeClass(a).addClass("oj-listview-item-add-remove-transition"),s=r.children().first(),s.addClass(a),this.signalTaskStart(),l=this.m_widget.getAnimationEffect(h),u=t.AnimationUtils.startAnimation(n,h,l);var c=this;u.then(function(t){c._handleAddTransitionEnd(i,n)}),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype._handleScrollerMaxRowCount=function(){t.Logger.error("max count reached")},t.TableDataSourceContentHandler.prototype._removeDataSourceEventListeners=function(){null!=this.m_dataSource&&(this.m_dataSource.off("sync",this.m_handleModelSyncEventListener),this.m_dataSource.off("sort",this.m_handleModelSortEventListener),this.m_dataSource.off("add",this.m_handleModelAddEventListener),this.m_dataSource.off("remove",this.m_handleModelRemoveEventListener),this.m_dataSource.off("change",this.m_handleModelChangeEventListener),this.m_dataSource.off("reset",this.m_handleModelResetEventListener),this.m_dataSource.off("refresh",this.m_handleModelResetEventListener))},t.TableDataSourceContentHandler.prototype._shouldAppendLoadingIndicator=function(t){return this._isLoadMoreOnScroll()&&null!=t&&t.keys&&t.keys.length>0&&(this.m_dataSource.totalSize()==-1||this.m_dataSource.totalSize()>t.keys.length)},t.TableDataSourceContentHandler.prototype.fetchRows=function(n){var i,r,o,a=!0;return this.signalTaskStart(),this.IsReady()&&(this.m_fetching=!0,t.TableDataSourceContentHandler.superclass.fetchRows.call(this,n),t.PagingTableDataSource&&this.m_dataSource instanceof t.PagingTableDataSource&&(a=!1,this.signalTaskStart()),a||n)?(a&&this.signalTaskStart(),i={fetchType:"init",startIndex:0},this._isLoadMoreOnScroll()&&(i.pageSize=this._getFetchSize()),r=this,o=this.m_dataSource.fetch(i),o.then(function(t){null!=r.m_widget&&a&&(e(r.m_root).empty(),r._handleFetchedData(t),r._shouldAppendLoadingIndicator(t)&&(r._appendLoadingIndicator(),r.m_widget.syncScrollPosition()))},function(t){r._handleFetchError(t),r.signalTaskEnd()}),void this.signalTaskEnd()):void this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype._handleFetchError=function(e){t.Logger.error(e),this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete()},t.TableDataSourceContentHandler.prototype._handleFetchSuccess=function(t,e){var n,i,r;for(n=this.m_root.childElementCount,i=0;i<t.length;i++)r=t[i],this.addItem(this.m_root,n,r,this.getMetadata(n,e[i],r)),n+=1},t.TableDataSourceContentHandler.prototype.handleModelAddEvent=function(t){var e,n,i,r;if(null!=this.m_root){if(this.signalTaskStart(),e=t.data,n=t.keys,i=t.indexes,null!=e&&null!=n&&n.length>0&&e.length>0&&n.length==e.length&&null!=i&&n.length==i.length){for(r=0;r<e.length;r++)this.signalTaskStart(),this.addItem(this.m_root,i[r],e[r],this.getMetadata(i[r],n[r],e[r]),this.afterRenderItemForInsertEvent.bind(this)),this.signalTaskEnd();this.IsReady()&&this.signalTaskStart(),this.fetchEnd()}this.signalTaskEnd()}},t.TableDataSourceContentHandler.prototype._handleAddTransitionEnd=function(t,n){e(n).removeClass("oj-listview-item-add-remove-transition").addClass(this.m_widget.getItemStyleClass()).children().children().unwrap(),this.m_widget.itemInsertComplete(n,t),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype.handleModelRemoveEvent=function(t){var e,n,i;if(e=t.keys,null!=this.m_root&&null!=e&&0!=e.length){for(this.signalTaskStart(),n=0;n<e.length;n++)i=this.FindElementByKey(e[n]),null!=i&&(this.signalTaskStart(),this._removeItem(i),this.signalTaskEnd());this.m_widget.ClearCache(),this.signalTaskEnd()}},t.TableDataSourceContentHandler.prototype._removeItem=function(n){var i,r,o,a,s=this,l="remove";this.signalTaskStart(),i=this.m_widget.getItemStyleClass(),n=e(n),n.children().wrapAll("<div class='"+i+"'></div>"),n.removeClass(i).addClass("oj-listview-item-add-remove-transition"),this.signalTaskStart(),r=this.m_widget.getAnimationEffect(l),o=n.get(0),a=t.AnimationUtils.startAnimation(o,l,r),a.then(function(t){s._handleRemoveTransitionEnd(n)}),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype._handleRemoveTransitionEnd=function(t){t=e(t);var n=t.parent();this.m_widget.itemRemoveComplete(t.get(0)),t.remove(),0==n.get(0).childElementCount&&this.m_widget.renderComplete(),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype.handleModelChangeEvent=function(t){var e,n,i,r,o;if(e=t.keys,null!=this.m_root&&null!=e&&0!=e.length){for(this.signalTaskStart(),n=t.data,i=t.indexes,r=0;r<e.length;r++)o=this.FindElementByKey(e[r]),null!=o&&(this.signalTaskStart(),this.replaceItem(o,i[r],n[r],this.getMetadata(i[r],e[r],n[r]),this.afterRenderItemForChangeEvent.bind(this)),this.signalTaskEnd());this.m_widget.ClearCache(),this.signalTaskEnd()}},t.TableDataSourceContentHandler.prototype.afterRenderItemForChangeEvent=function(e,n){var i,r,o=this,a="update";this.signalTaskStart(),this.afterRenderItem(e,n),i=this.m_widget.getAnimationEffect(a),r=t.AnimationUtils.startAnimation(e,a,i),r.then(function(t){o._handleReplaceTransitionEnd(e)}),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype._handleReplaceTransitionEnd=function(t){e(t).removeClass("oj-listview-item-add-remove-transition"),this.m_widget.restoreCurrentItem(),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype.handleModelResetEvent=function(t){null!=this.m_root&&(this.signalTaskStart(),this.m_widget.ClearCache(),this.fetchRows(!0),this.signalTaskEnd())},t.TableDataSourceContentHandler.prototype._handleFetchedData=function(t){var e,n;null!=this.m_root&&(e=t.data,n=t.keys,Array.isArray(e)&&Array.isArray(n)&&e.length==n.length&&(this._handleFetchSuccess(e,n),this.fetchEnd()))},t.TableDataSourceContentHandler.prototype.handleModelSyncEvent=function(t){null!=this.m_root&&(this.signalTaskStart(),0===t.startIndex&&e(this.m_root).empty(),this.m_widget.ClearCache(),this._handleFetchedData(t),this.signalTaskEnd())},t.TableDataSourceContentHandler.prototype.handleModelSortEvent=function(t){null!=this.m_root&&(this.signalTaskStart(),this.m_widget.ClearCache(),this.m_widget._isMultipleSelection()&&this.m_widget._clearSelection(!0),this.fetchRows(!0),this.signalTaskEnd())},t.TableDataSourceContentHandler.prototype.fetchEnd=function(){this.m_fetching=!1,this.m_widget.renderComplete(),this.checkViewport(),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype.checkViewport=function(){var t,e=this;this.signalTaskStart(),null!=this.m_domScroller&&this.m_dataSource.totalSize()>0&&this.IsReady()&&(t=this.m_domScroller.checkViewport(),null!=t&&(this.signalTaskStart(),t.then(function(t){e.m_domScrollerMaxCountFunc(t),e.signalTaskEnd()},null))),this.signalTaskEnd()},t.TableDataSourceContentHandler.prototype.getMetadata=function(t,e,n){var i=n.context;return null==i&&(i={}),null==i.index&&(i.index=t),null==i.key&&(i.key=e),i},t.TreeDataSourceContentHandler=function(e,n,i){t.TreeDataSourceContentHandler.superclass.constructor.call(this,e,n,i)},t.Object.createSubclass(t.TreeDataSourceContentHandler,t.DataSourceContentHandler,"oj.TreeDataSourceContentHandler"),t.TreeDataSourceContentHandler.prototype.Init=function(){t.TreeDataSourceContentHandler.superclass.Init.call(this)},t.TreeDataSourceContentHandler.prototype.IsHierarchical=function(){return!0},t.TreeDataSourceContentHandler.prototype.fetchRows=function(e){this.signalTaskStart(),t.TreeDataSourceContentHandler.superclass.fetchRows.call(this,e),this.fetchChildren(0,null,this.m_root,null),this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype.fetchChildren=function(t,e,n,i){var r;this.signalTaskStart(),this.m_fetching=!0,r={start:t,count:this.m_dataSource.getChildCount(e)},this.m_dataSource.fetchChildren(e,r,{success:function(t){this._handleFetchSuccess(t,e,n,i)}.bind(this),error:function(t){this._handleFetchError(t)}.bind(this)}),this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype._handleFetchSuccess=function(t,e,n,i){var r,o,a,s,l,u;for(this.signalTaskStart(),r=t.getStart(),o=t.getCount(),a=r+o,s=0;s<o;s++)l=t.getData(r+s),u=t.getMetadata(r+s),this.addItem(n,r+s,l,u);this.m_fetching=!1,null!=i&&i.call(null,n),this.m_widget.renderComplete(),this.m_initialized=!0,this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype.afterRenderItem=function(n,i){var r,o,a,s,l,u,h,c,d;this.signalTaskStart(),t.TreeDataSourceContentHandler.superclass.afterRenderItem.call(this,n,i),r=this.m_widget.getGroupStyleClass(),o=this.m_widget.getItemStyleClass(),a=this.m_widget.getGroupItemStyleClass(),s=this.m_widget.getGroupCollapseStyleClass(),u=this.m_widget.getCollapseIconStyleClass(),l=this.m_widget.getFocusedElementStyleClass(),n=e(n),0==i.leaf?(n.children().wrapAll("<div></div>"),n.hasClass(l)?n.removeClass(l).children().first().addClass(l).attr("aria-expanded","false"):n.children().first().attr("role","presentation").find("."+l).attr("aria-expanded","false"),h=n.children().first(),h.uniqueId().addClass(a),this.m_widget.isExpandable()&&(n.addClass("oj-collapsed"),c=document.createElement("a"),e(c).attr("href","#").attr("aria-labelledby",h.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(u),h.prepend(c)),d=document.createElement("ul"),e(d).addClass(r).addClass(s).attr("role","group"),n.append(d)):1==i.leaf&&n.addClass(o),this.m_widget._isSelectionEnabled()&&this.isSelectable(i)&&this.m_widget.getFocusItem(n).attr("aria-selected",!1),this.m_widget.itemRenderComplete(n[0],i),this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype._handleFetchError=function(e){this.signalTaskStart(),t.Logger.error(e),this.m_widget.renderComplete(),this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype.Expand=function(t,e){var n,i;this.signalTaskStart(),n=this.GetKey(t[0]),i=t.children("ul")[0],this.fetchChildren(0,n,i,e),this.signalTaskEnd()},t.TreeDataSourceContentHandler.prototype.Collapse=function(t){t.empty()},t.StaticContentHandler=function(t,e){this.m_widget=t,this.m_root=e},t.Object.createSubclass(t.StaticContentHandler,t.Object,"oj.StaticContentHandler"),t.StaticContentHandler.prototype.Init=function(){t.StaticContentHandler.superclass.Init.call(this)},t.StaticContentHandler.prototype.Destroy=function(){this.restoreContent(this.m_root,0),this.unsetRootAriaProperties()},t.StaticContentHandler.prototype.IsReady=function(){return!0},t.StaticContentHandler.prototype.HandleResize=function(t,e){},t.StaticContentHandler.prototype.notifyShown=function(){},t.StaticContentHandler.prototype.RenderContent=function(){this.modifyContent(this.m_root,0),this.setRootAriaProperties(),this.m_widget.renderComplete()},t.StaticContentHandler.prototype.Expand=function(t,n){var i,r;i="."+this.m_widget.getGroupStyleClass(),r=e(t).children(i)[0],e(r).css("display","block"),n.call(null,r)},t.StaticContentHandler.prototype.Collapse=function(t){},t.StaticContentHandler.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=e(this.m_root).children("li").children("ul").length>0),this.m_hier},t.StaticContentHandler.prototype.restoreContent=function(t,n){var i,r,o,a,s,l,u,h,c,d,p;for(i=this.m_widget.getGroupStyleClass(),r=this.m_widget.getGroupCollapseStyleClass(),o=this.m_widget.getGroupExpandStyleClass(),a=this.m_widget.getGroupItemStyleClass(),s=this.m_widget.getItemStyleClass(),l=this.m_widget.getItemElementStyleClass(),u=t.children,h=0;h<u.length;h++)c=u[h],this.unsetAriaProperties(c),c=e(c),c.removeClass(l).removeClass(s).removeClass(this.m_widget.getDepthStyleClass(n)).removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected"),d=c.children("ul"),d.length>0&&(c.children("."+a).children().unwrap(),c.children(".oj-component-icon").remove(),p=e(d[0]),p.removeClass(i).removeClass(o).removeClass(r).removeAttr("role"),this.restoreContent(p[0],n+1))},t.StaticContentHandler.prototype.modifyContent=function(t,n){var i,r,o,a,s,l,u,h,c,d,p,g,f,_,m,v;for(i=this.m_widget.getItemStyleClass(),r=this.m_widget.getItemElementStyleClass(),o=this.m_widget.getGroupStyleClass(),a=this.m_widget.getGroupItemStyleClass(),s=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getCollapseIconStyleClass(),u=this.m_widget.getFocusedElementStyleClass(),h=t.children,c=this.m_widget.isExpandable(),d=0;d<h.length;d++)p=e(h[d]),g=this.createContext(p),this.setAriaProperties(p,g),p.uniqueId().addClass(r),n>0&&p.addClass(this.m_widget.getDepthStyleClass(n)),this.isFocusable(g)||p.addClass("oj-skipfocus"),f=p.children("ul"),f.length>0?(this.m_hier=!0,p.children(":not(ul)").wrapAll("<div></div>"),_=p.children().first(),_.addClass(a),this.hasChildren(f[0])&&(p.hasClass(u)?(p.removeClass(u),_.addClass(u).attr("aria-expanded","false")):(_.attr("role","presentation"),_.find("."+u).attr("aria-expanded","false")),c&&(p.addClass("oj-collapsed"),_.uniqueId(),m=document.createElement("a"),e(m).attr("href","#").attr("role","button").attr("aria-labelledby",_.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),_.prepend(m))),v=e(f[0]),v.addClass(o).addClass(s).attr("role","group").css("display","none"),this.modifyContent(v[0],n+1)):p.addClass(i),this.m_widget._isSelectionEnabled()&&this.isSelectable(g)&&this.m_widget.getFocusItem(p).attr("aria-selected",!1),this.m_widget.itemRenderComplete(p[0],g)},t.StaticContentHandler.prototype.setRootAriaProperties=function(){this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},t.StaticContentHandler.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},t.StaticContentHandler.prototype.hasChildren=function(t){return e(t).children("li").length>0},t.StaticContentHandler.prototype.createContext=function(t){var e,n;return e={},e.key=t.attr("id"),e.parentElement=t.children().first()[0],e.index=t.index(),e.data=t[0],e.component=this.m_widget.getWidgetConstructor(),this.IsHierarchical()&&(e.leaf=0==t.children("ul").length,n=t.parents("li."+this.m_widget.getItemElementStyleClass()),e.depth=n.length,0==n.length?e.parentKey=null:e.parentKey=n.first().attr("id")),e},t.StaticContentHandler.prototype.setAriaProperties=function(t,e){var n=this.m_widget.getSingleFocusableElement(t);n.attr("role",this.IsHierarchical()?"treeitem":"option"),n!=t&&t.attr("role","presentation"),n.addClass(this.m_widget.getFocusedElementStyleClass())},t.StaticContentHandler.prototype.unsetAriaProperties=function(t){var n=this.m_widget.getSingleFocusableElement(e(t));n.removeAttr("role"),n.removeAttr("aria-selected"),n.removeAttr("aria-expanded"),n.removeClass(this.m_widget.getFocusedElementStyleClass())},t.StaticContentHandler.prototype.GetKey=function(t){return e(t).attr("id")},t.StaticContentHandler.prototype.FindElementByKey=function(t){return document.getElementById(t)},t.StaticContentHandler.prototype.isFocusable=function(t){return this.m_widget._getItemOption("focusable",t,!0)},t.StaticContentHandler.prototype.isSelectable=function(t){return this.m_widget._getItemOption("selectable",t,!0)};var n={clazz:function(n,i){var r=function(){};return t.Object.createSubclass(r,n,""),r.prototype=e.extend(r.prototype,i),r}};t._ojListView=n.clazz(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,FOCUS_MODE_LIST:0,FOCUS_MODE_ITEM:1,init:function(e){var n,i=this;this.readinessStack=[],this.signalTaskStart(),this.ojContext=e.ojContext,this.element=e.element,this.OuterWrapper=e.OuterWrapper,this.options=e,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.SetRootElementTabIndex(),"undefined"!=typeof t.ListViewDndContext&&(n=new t.ListViewDndContext(this),this.m_dndContext=n,this.ojContext._on(this.element,{dragstart:function(t){return n._handleDragStart(t)},dragenter:function(t){return n._handleDragEnter(t)},dragover:function(t){return n._handleDragOver(t)},dragleave:function(t){return n._handleDragLeave(t)},dragend:function(t){return n._handleDragEnd(t)},drag:function(t){return n._handleDrag(t)},drop:function(t){return n._handleDrop(t)}})),this.ojContext._on(this.element,{click:function(t){i.HandleMouseClick(t)},touchstart:function(t){i.HandleMouseDownOrTouchStart(t)},touchend:function(t){i.HandleTouchEndOrCancel(t)},touchcancel:function(t){i.HandleTouchEndOrCancel(t)},mousedown:function(t){0===t.button?i._recentTouch()||i.HandleMouseDownOrTouchStart(t):i.m_preActive=!0},mouseup:function(t){i._handleMouseUpOrPanMove(t),i.m_preActive=!1},mouseout:function(t){i._handleMouseOut(t)},mouseover:function(t){i._handleMouseOver(t)},keydown:function(t){i.HandleKeyDown(t)},ojpanmove:function(t){i._handleMouseUpOrPanMove(t)}}),this.ojContext._on(this.ojContext.element,{focus:function(t){i.HandleFocus(t)},blur:function(t){i.HandleBlur(t)}}),t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.FIREFOX&&this._getListContainer().attr("tabIndex",-1),this.GetFocusMode()===this.FOCUS_MODE_ITEM?this.ojContext._on(this.ojContext.element,{focusin:function(t){i.HandleFocus(t)},focusout:function(t){i.HandleFocusOut(t)}}):this.ojContext._on(this.element,{focus:function(t){i.HandleFocus(t)},blur:function(t){i.HandleBlur(t)}}),this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this._registerScrollHandler(),this.ojContext._focusable({applyHighlight:i.ShouldApplyHighlight(),recentPointer:i.RecentPointerCallback(),setupHandlers:function(t,e){i._focusInHandler=t,i._focusOutHandler=e}})},afterCreate:function(){var t;this._buildList(),this._addContextMenu(),this._initContentHandler(),t=this._getListContainer(),this._registerResizeListener(t[0]),this.signalTaskEnd()},refresh:function(){this._resetInternal(),this.signalTaskStart(),this.SetAriaProperties(),this._addContextMenu(),this._initContentHandler(),this._registerScrollHandler(),this.signalTaskEnd()},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this._getListContainer()),this._resetInternal(),t.DomUtils.unwrap(this.element,this._getListContainer()),this.ojContext.document.off(".ojlistview")},_resetInternal:function(){var t=this;this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(),delete this.m_contentHandler,this.m_contentHandler=null),this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.readinessStack=[],this.readyPromise=new Promise(function(e,n){t.readyResolve=e}),this.ClearCache()},notifyAttached:function(){this.syncScrollPosition()},notifyDetached:function(){this._getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&e(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){this.syncScrollPosition(),null!=this.m_contentHandler&&this.m_contentHandler.notifyShown()},getNodeBySubId:function(t){var n,i,r,o;return null==t?this.element?this.element[0]:null:(n=t.subId,"oj-listview-disclosure"!==n&&"oj-listview-icon"!==n||(i=t.key,r=this.FindElementByKey(i),null==r||!r.firstElementChild||(o=r.firstElementChild.firstElementChild,null==o||!e(o).hasClass(this.getExpandIconStyleClass())&&!e(o).hasClass(this.getCollapseIconStyleClass())))?null:o)},getSubIdByNode:function(t){var n,i;return(null!=t&&e(t).hasClass(this.getExpandIconStyleClass())||e(t).hasClass(this.getCollapseIconStyleClass()))&&(n=this.FindItem(t),null!=n&&n.length>0&&(i=this.GetKey(n[0]),null!=i))?{subId:"oj-listview-disclosure",key:i}:null},getContextByNode:function(t){var e,n,i,r,o;return e=this.FindItem(t),null!=e&&e.length>0&&(n=this.GetKey(e[0]),null!=n)?(i=e.parent(),r=i.children("li").index(e),o={subId:"oj-listview-item",key:n,index:r},i.get(0)!=this.element.get(0)&&(o.parent=i.parent().get(0)),e.children().first().hasClass(this.getGroupItemStyleClass())?o.group=!0:o.group=!1,o):null},getDataForVisibleItem:function(t){var n,i,r;return n=t.index,i=t.parent,i=null==i?this.element.get(0):e(i).children("ul."+this.getGroupStyleClass()).first(),r=e(i).children("li").get(n),null!=r&&e(r).hasClass(this.getItemStyleClass())?this._getDataForItem(r):null},_getDataForItem:function(t){return null==this.GetOption("data")?t:e.data(t,"data")},_addContextMenu:function(t){null!=this.m_dndContext&&this.m_dndContext.addContextMenu(t)},_unregisterResizeListener:function(e){e&&this._resizeHandler&&t.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),t.DomUtils.addResizeListener(e,this._resizeHandler))},_handleResize:function(t,e){t>0&&e>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize(t,e)},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(t){return null!=t.data||null!=t.drillMode||null!=t.groupHeaderPosition||null!=t.item||null!=t.scrollPolicy||null!=t.scrollPolicyOptions},setOptions:function(t,n){var i,r,o,a,s,l;if(this.ShouldRefresh(t))return null!=t.data&&(null==t.currentItem&&this.SetOption("currentItem",null),null==t.selection&&this._clearSelection(!0)),!0;if(null!=t.expanded&&this.m_contentHandler.IsHierarchical()&&(this._collapsedKeys=void 0,o=t.expanded,Array.isArray(o))){this.signalTaskStart(),this._collapseAll(),this._ignoreExpanded=!0;try{i=this,e.each(o,function(t,e){i.expandKey(e,!0,!0,!0)})}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}return null!=t.currentItem?(r=this.FindElementByKey(t.currentItem),null!=r&&(r=e(r),this.SkipFocus(r)||(a=document.activeElement,a&&this.element.get(0).contains(a)?this._activeAndFocus(r,null):this._setActive(r,null)))):null===t.currentItem&&(this.UnhighlightActive(),this.m_active=null,this.SetRootElementTabIndex()),this.HandleSelectionOption(t),null!=t.selectionMode&&(this._clearSelection(!0),this.SetAriaProperties()),null!=t.contextMenu&&this._addContextMenu(t.contextMenu),null!=t.scrollTop&&(s=this._getScroller(),l=t.scrollTop,null==l||isNaN(l)||(s.scrollTop=l)),null!=this.m_dndContext&&null!=this.m_active&&null!=t.dnd&&null!=t.dnd.reorder&&("enabled"===t.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===t.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},HandleSelectionOption:function(t){var e,n,i;if(null!=t.selection&&this._isSelectionEnabled())for(t.selection=this._filterSelection(t.selection),n=t.selection,this._clearSelection(!1),i=0;i<n.length;i++)e=this.FindElementByKey(n[i]),null!=e&&this._applySelection(e,n[i])},Trigger:function(t,e,n){return this.ojContext._trigger(t,e,n)},SetOption:function(t,e,n){this.ojContext.option(t,e,n)},GetOption:function(t){return this.ojContext.option(t);
},signalTaskStart:function(){var t=this;this.readinessStack&&(0==this.readinessStack.length&&(this.readyPromise=new Promise(function(e,n){t.readyResolve=e})),this.readinessStack.push(1))},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0==this.readinessStack.length&&this.readyResolve(null))},getItems:function(t){var n,i=this,r=[];return e.each(t,function(t,e){n=i.FindElementByKey(e),null!=n&&r.push(n)}),r},_initContentHandler:function(){var e;if(this.signalTaskStart(),e=this.GetOption("data"),null!=e){if("undefined"==typeof t.TableDataSource||"undefined"==typeof t.TreeDataSource)throw"oj.TableDataSource or oj.TreeDataSource not found. Ensure the required modules are imported";if(e instanceof t.TableDataSource)this.m_contentHandler=new t.TableDataSourceContentHandler(this,this.element[0],e);else{if(!(e instanceof t.TreeDataSource))throw"Invalid data";this.m_contentHandler=new t.TreeDataSourceContentHandler(this,this.element[0],e)}}else this.m_contentHandler=new t.StaticContentHandler(this,this.element[0]);this.showStatusText(),this.m_contentHandler.RenderContent(),this.signalTaskEnd()},UpdateActiveDescendant:function(t){this.element.attr("aria-activedescendant",t.attr("id"))},SetAriaProperties:function(){this.element.attr("aria-activedescendant",""),this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},_buildList:function(t){var e,n,i;e=this._getListContainer(),this.SetAriaProperties(),n=this._buildStatus(),e.append(n),this.m_status=n,i=this._buildAccInfo(),e.append(i),this.m_accInfo=i,this._isTouchSupport()&&null!=this.m_dndContext&&e.append(this._buildAccInstructionText())},_buildStatus:function(){var t=e(document.createElement("div"));return t.addClass("oj-listview-status-message oj-listview-status").attr({id:this._createSubId("status"),role:"status"}),t},_buildAccInfo:function(){var t=e(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),t},_buildAccInstructionText:function(){var t=e(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("instr")}),t.text(this.ojContext.getTranslatedString("accessibleReorderTouchInstructionText")),t},_setAccInfoText:function(t){""!=t&&this.m_accInfo.text()!=t&&this.m_accInfo.text(t)},showStatusText:function(){var t=this.ojContext.getTranslatedString("msgFetchingData");this.m_status.text(t).css("left",this.element.outerWidth()/2-this.m_status.outerWidth()/2).show()},hideStatusText:function(){this.m_status.hide()},getRootElement:function(){return this._getListContainer()},_getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var t;return this.OuterWrapper?t=e(this.OuterWrapper):(t=e(document.createElement("div")),this.element.parent()[0].replaceChild(t[0],this.element[0])),t.addClass(this.GetContainerStyleClass()).addClass("oj-component"),t.prepend(this.element),t},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var t,e;return t=this._getEmptyText(),e=document.createElement("li"),e.id=this._createSubId("empty"),e.className=this.getEmptyTextStyleClass()+" oj-listview-empty-text",e.textContent=t,e},GetState:function(t){var e=this.getFocusItem(t).attr("aria-expanded");return"true"==e?this.STATE_EXPANDED:"false"==e?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(t,e){var n=this.isExpandable();e==this.STATE_EXPANDED?(this.getFocusItem(t).attr("aria-expanded","true"),n&&t.removeClass("oj-collapsed").addClass("oj-expanded")):e==this.STATE_COLLAPSED&&(this.getFocusItem(t).attr("aria-expanded","false"),n&&t.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(t,e,n){var i,r;return i=this.options.item,r=i[t],"function"==typeof r&&n?r.call(this,e):r},_getItemRenderer:function(){var t=this._getItemOption("renderer",null,!1);return"function"!=typeof t?null:t},itemInsertComplete:function(t,e){},itemRemoveComplete:function(t){var n;if(null!=this.m_active&&this.m_active.elem&&e(this.m_active.elem).get(0)==t&&this.SetOption("currentItem",null),null!=t&&t.id&&null!=this.m_keyElemMap)for(n in this.m_keyElemMap)if(this.m_keyElemMap.hasOwnProperty(n)&&this.m_keyElemMap[n]===t.id)return void delete this.m_keyElemMap[n]},itemRenderComplete:function(t,n){var i,r,o,a,s,l,u;if(null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(t),this._disableAllTabbableElements(t),this._isSelectionEnabled())if(i=this.GetOption("selection"),this.IsSelectable(t)){for(o=0;o<i.length;o++)if(i[o]==n.key&&(this._applySelection(t,i[o]),!this._isMultipleSelection())){i.length>1&&(r=e(this.FindElementByKey(n.key)),this.SetOption("selection",[n.key],{_context:{originalEvent:null,internalSet:!0,extraData:{items:r}},changed:!0}));break}}else if(a=i.indexOf(n.key),a>-1){for(s=i.slice(0),s.splice(a,1),r=new Array(s.length),o=0;o<s.length;o++)r[o]=this.FindElementByKey(s[o]);this.SetOption("selection",s,{_context:{originalEvent:null,internalSet:!0,extraData:{items:e(r)}},changed:!0})}this.m_contentHandler.IsHierarchical()&&void 0==this._ignoreExpanded&&this.GetState(e(t))==this.STATE_COLLAPSED&&(l=this.GetOption("expanded"),this._isExpandAll()?void 0==this._collapsedKeys&&this.ExpandItem(e(t),null,!1,null,!1,!1,!1):Array.isArray(l)&&(u=this,e.each(l,function(i,r){r!=n.key||void 0!=u._collapsedKeys&&u._collapsedKeys.indexOf(r)!=-1||u.ExpandItem(e(t),null,!1,null,!1,!1,!1)}))),null!=this.m_active&&n.key==this.m_active.key&&null!=this.m_active.elem&&t!=this.m_active.elem.get(0)&&(this.m_active.elem=e(t))},renderComplete:function(){var t,n,i;return this.hideStatusText(),e(document.getElementById(this._createSubId("empty"))).remove(),0==this.element[0].childElementCount?(t=this._buildEmptyText(),this.element.append(t),void this.Trigger("ready",null,{})):(this.m_items=null,n=this.GetOption("currentItem"),null!=n&&(i=this.FindElementByKey(n),null==i?this.SetOption("currentItem",null):null!=this.m_active||this.SkipFocus(e(i))||this._activeAndFocus(e(i),null)),this._getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&this._initFocus(),this.syncScrollPosition(),void this.Trigger("ready",null,{}))},syncScrollPosition:function(){var t,e;return t=this.GetOption("scrollTop"),isNaN(t)||(e=this._getScroller(),t==e.scrollTop||(e.scrollTop=t,e.scrollTop==t))?void(this._skipScrollUpdate=!1):void(this._skipScrollUpdate=!0)},restoreCurrentItem:function(){var t=this.GetOption("currentItem");if(null!=t){var n=this.FindElementByKey(t);null==n||this.SkipFocus(e(n))||this._activeAndFocus(e(n),null)}},ClearCache:function(){this.m_items=null,this.m_groupItems=null},notifyContextMenuGesture:function(t,n,i){var r,o,a;return!this.IsNodeEditableOrClickable(e(n.target))&&(r=e(n.target).closest("."+this.getItemElementStyleClass()),r.length>0&&!this.SkipFocus(e(r[0]))&&this._activeAndFocus(e(r[0]),null),a=this.element,null!=this.m_active&&(a=this.m_active.elem),o={launcher:a,initialFocus:"menu"},"keyboard"===i&&(o.position={my:"start top",at:"start bottom",of:this.m_active.elem}),void this.ojContext._OpenContextMenu(n,i,o))},IsElementEditableOrClickable:function(t){var e=t.prop("nodeName");return null!=e.match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(t){for(var e;null!=t&&t[0]!=this.element[0]&&"LI"!=(e=t.prop("nodeName"));)if(3!=t[0].nodeType){var n=t.attr("tabIndex"),i=t.attr("data-oj-tabindex");if(null!=n&&n>=0&&!t.hasClass(this.getFocusedElementStyleClass()))return!0;if(this.IsElementEditableOrClickable(t)&&(n!=-1||i!=-1))return!0;t=t.parent()}else t=t.parent();return!1},_disableAllTabbableElements:function(t){var n,i,r;n=e(t),n.hasClass(this.getItemStyleClass())||(n=e(n.get(0).firstElementChild)),i="a, input, select, textarea, button, object, .oj-component-initnode",n.find(i).each(function(t){e(this).removeAttr("data-first").removeAttr("data-last"),r=parseInt(e(this).attr("tabIndex"),10),(isNaN(r)||r>=0)&&e(this).attr("tabIndex",-1).attr("data-tabmod",isNaN(r)?-1:r)})},_disableAllTabbableElementsBeforeItem:function(t){var e,n,i;for(e=this._getItemsCache(),n=e.index(t),i=0;i<=n;i++)this._disableAllTabbableElements(e[i])},_disableAllTabbableElementsAfterItem:function(t){var e,n,i;if(e=this._getItemsCache(),n=e.index(t),n!=-1)for(i=n;i<=e.length-1;i++)this._disableAllTabbableElements(e[i])},_enableAllTabbableElements:function(t){var n,i;n=e(t).find("[data-tabmod]").each(function(t){i=parseInt(e(this).attr("data-tabmod"),10),e(this).removeAttr("data-tabmod"),i==-1?e(this).removeAttr("tabIndex"):e(this).attr("tabIndex",i)}),n.first().attr("data-first","true"),n.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(t){e(t).find("[data-tabmod]").removeAttr("tabIndex").removeAttr("data-tabmod").removeAttr("data-first").removeAttr("data-last")},SkipFocus:function(t){return t.hasClass("oj-skipfocus")},_isFocusBlurTriggeredByDescendent:function(t){return void 0===t.relatedTarget||!(null==t.relatedTarget||!e.contains(this.ojContext.element.get(0),t.relatedTarget))},HandleFocus:function(t){this._getListContainer().addClass("oj-focus-ancestor"),null==this.m_active?this.m_preActive||this._isFocusBlurTriggeredByDescendent(t)||this._initFocus(t):(this.m_preActive||this._isNonWindowTouch()||this._isFocusBlurTriggeredByDescendent(t)||this.HighlightActive(),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem))},_initFocus:function(t){var n,i,r;if(!this._isTouchSupport())for(n=this._getItemsCache(),i=0;i<n.length;i++)if(r=e(n[i]),!this.SkipFocus(r)){this._activeAndFocus(r,t);break}},HandleFocusOut:function(t){this.HandleBlur(t)},_supportRelatedTargetOnBlur:function(){var e=t.AgentUtils.getAgentInfo();return!(e.browser==t.AgentUtils.BROWSER.FIREFOX&&parseInt(e.browserVersion,10)<48)},_isExtraBlurEvent:function(e){var n=t.AgentUtils.getAgentInfo();return null==e.relatedTarget&&n.browser==t.AgentUtils.BROWSER.IE&&e.target==this.ojContext.element.get(0)},HandleBlur:function(t){this._supportRelatedTargetOnBlur()&&!this._isExtraBlurEvent(t)&&(this._isFocusBlurTriggeredByDescendent(t)||(this._getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active&&this._resetTabIndex(this.m_active.elem),this.SetRootElementTabIndex()))},_handleMouseOut:function(t){var e=this.FindItem(t.target);null!=e&&(this.m_hoverItem=null,this._unhighlightElem(e,"oj-hover"))},_handleMouseOver:function(t){if(!this._recentTouch()){var e=this.FindItem(t.target);null==e||this.SkipFocus(e)||(this.m_hoverItem=e,this._highlightElem(e,"oj-hover"))}},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(t){var e,n,i;if(this.isExpandable()&&(e=t.keyCode,e===this.LEFT_KEY||e===this.RIGHT_KEY))if(n=this.m_active.elem,e===this.LEFT_KEY){if(this.GetState(n)==this.STATE_EXPANDED)return void this.CollapseItem(n,t,!0,this.m_active.key,!0,!0)}else if(this.GetState(n)==this.STATE_COLLAPSED)return void this.ExpandItem(n,t,!0,this.m_active.key,!0,!0,!0);i=this.HandleSelectionOrActiveKeyDown(t),null!=this.m_dndContext&&(i=i||this.m_dndContext.HandleKeyDown(t)),i===!0&&t.preventDefault()},_handleMouseUpOrPanMove:function(t){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dndContext._unsetDraggable(e(t.target))},HandleMouseDownOrTouchStart:function(t){var n,i;i=e(t.target),null!=this.m_dndContext&&this.m_dndContext._setDraggable(i),n=this._findItem(i,!0),null!=n&&this._isClickthroughDisabled(n)&&(this.m_preActive=!0,n=null),null==n||0==n.length||this.SkipFocus(n)||i.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=n,this._highlightElem(n,"oj-focus"),t.originalEvent.touches&&t.originalEvent.touches.length>0&&(this.m_touchPos={x:t.originalEvent.changedTouches[0].pageX,y:t.originalEvent.changedTouches[0].pageY}))},HandleTouchEndOrCancel:function(e){var n,i,r,o,a="pointerUp";null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos&&(n=this.m_preActiveItem.offset(),i=this.getAnimationEffect(a),i.offsetX=this.m_touchPos.x-n.left+"px",i.offsetY=this.m_touchPos.y-n.top+"px",o=this.m_preActiveItem.children("."+this.getGroupItemStyleClass()),r=o.length>0?o.get(0):this.m_preActiveItem.get(0),t.AnimationUtils.startAnimation(r,a,i),this.m_touchPos=null)),this._lastTouch=Date.now(),this._handleMouseOut(e)},_enterActionableMode:function(){var t,e;t=this.m_active.elem,this._disableAllTabbableElements(t),this._enableAllTabbableElements(t),e=t.find("[data-first]"),e.length>0&&this._setActionableMode(!0)},_exitActionableMode:function(){this._setActionableMode(!1),this._disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(t){var n,i,r,o,a;if(0===t.button)if(n=this.getCollapseIconStyleClass(),i=this.getExpandIconStyleClass(),r=this.getGroupItemStyleClass(),o=e(t.target),o.hasClass(i))this._collapse(t),t.preventDefault();else if(o.hasClass(n))this._expand(t),t.preventDefault();else{if(a=this._findItem(o),null==a||0==a.length||this.SkipFocus(a))return;this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!=a.get(0)&&this._exitActionableMode(),this._getListContainer().hasClass("oj-focus-ancestor")||this._getListContainer().addClass("oj-focus-ancestor"),this._isSelectionEnabled()&&this.IsSelectable(a[0])?this._isTouchSupport()?this._handleTouchSelection(a,t):this.HandleClickSelection(a,t):this.HandleClickActive(a,t),this.isExpandable()&&o.closest("."+r)&&(this.GetState(a)==this.STATE_COLLAPSED?this._expand(t):this.GetState(a)==this.STATE_EXPANDED&&this._collapse(t))}},_isTouchSupport:function(){return t.DomUtils.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&t.AgentUtils.getAgentInfo().os!=t.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(e){return t.DomUtils.isMetaKeyPressed(e)},_createSubId:function(t){var e=this.element.attr("id");return[e,t].join(":")},FindItem:function(t){return e(t).closest("."+this.getItemElementStyleClass())},_isClickthroughDisabled:function(t){return t.hasClass("oj-clickthrough-disabled")||t.hasClass("oj-component-initnode")||t.hasClass("oj-component")},_findItem:function(t,e){for(var n=t;n.length>0;){if(this._isClickthroughDisabled(n))return e?n:null;if(n.hasClass(this.getItemElementStyleClass()))return n;n=n.parent()}return null},_getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this._getListContainer().css("border-top-width"),10)+parseInt(this._getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},_scrollToVisible:function(t){var n,i,r,o,a,s,l,u,h=0;return n=t.offsetTop,i=t.offsetHeight,r=this._getListContainer()[0],o=r.scrollTop,a=r.offsetHeight,null!=this.m_groupItemToPin&&(s=parseInt(this.m_groupItemToPin.style.top,10),l=e(this.m_groupItemToPin).outerHeight(),n<=s&&s<n+i?h=(i+n-s)/2:n>=s&&n<s+l&&(h=(s+l-n)/2)),n>=o&&n+i<=o+a?void(h>0&&(r.scrollTop=o-h)):(u=Math.max(0,Math.min(n-h,Math.abs(n+i-a))),u>o&&(u+=this._getListContainerBorderWidth()),void(r.scrollTop=u))},GetKey:function(t){return this.m_contentHandler.GetKey(t)},FindElementByKey:function(t){var e;return null!=this.m_keyElemMap&&(e=this.m_keyElemMap[t],null!=e)?document.getElementById(e):this.m_contentHandler.FindElementByKey(t)},IsArrowKey:function(t){return t==this.UP_KEY||t==this.DOWN_KEY},_getItemsCache:function(){var t,n,i;return null==this.m_items&&(t=this.getGroupCollapseStyleClass(),n="."+this.getItemElementStyleClass()+":visible",this.m_items=this.element.find(n).filter(function(n){return i=e(this).parent().hasClass(t),!i||!e(this).parent().parent().hasClass("oj-collapsed")})),this.m_items},_handleLastItemKeyboardFocus:function(t){var n=t.get(0).nextElementSibling;if(null==n||!e(n).hasClass(this.getItemElementStyleClass())){var i=this._getScroller();i.scrollTop<i.scrollHeight&&(i.scrollTop=i.scrollHeight)}},HandleArrowKeys:function(t,n,i){var r,o,a,s,l;if(!this.m_contentHandler.IsReady())return!0;switch(r=!n||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier,o=!1,a=this._getItemsCache(),s=a.index(r),t){case this.UP_KEY:if(s--,s>=0){for(l=e(a[s]);this.SkipFocus(l);){if(s--,s<0)return!1;l=e(a[s])}n?(this._extendSelection(l,i),this.m_isNavigate=!1):(this._activeAndFocus(l,i),this.m_isNavigate=!0)}o=!0;break;case this.DOWN_KEY:if(s++,s<a.length){for(l=e(a[s]);this.SkipFocus(l);){if(s++,s==a.length)return!1;l=e(a[s])}n?(this._extendSelection(l,i),this.m_isNavigate=!1):(this._activeAndFocus(l,i),this.m_isNavigate=!0,this._handleLastItemKeyboardFocus(l))}o=!0}return o},_isActionableMode:function(){return"actionable"==this.m_keyMode},_setActionableMode:function(t){this.m_keyMode=t?"actionable":"navigation",t||this.element[0].focus()},GetFocusMode:function(){return this.FOCUS_MODE_ITEM},getFocusItem:function(t){return t.hasClass(this.getFocusedElementStyleClass())?t:e(t.find("."+this.getFocusedElementStyleClass()).first())},SetRootElementTabIndex:function(){this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_setTabIndex:function(t){this.getFocusItem(t).attr("tabIndex",0)},_resetTabIndex:function(t){var e;e=!0,"presentation"===t.attr("role")&&(e=!1),t=this.getFocusItem(t),e?t.removeAttr("tabIndex"):t.attr("tabIndex",-1)},_focusItem:function(t,e){this.GetFocusMode()===this.FOCUS_MODE_ITEM?(null!=t&&this._resetTabIndex(t),this._setTabIndex(e),this.RemoveRootElementTabIndex()):this.UpdateActiveDescendant(e)},getSingleFocusableElement:function(t){var e,n;return e="a, input, select, textarea, button",n=t.children(e),1===n.length&&0===n.first().find(e).length?n.first():t},_setActive:function(t,e){var n,i,r,o,a;if(null!=t)if(n=t[0],i=this.GetKey(n),null==this.m_active||i!=this.m_active.key){if(r={key:i,item:t},null!=this.m_active&&(r.previousKey=this.m_active.key,r.previousItem=this.m_active.elem,null!=this.m_dndContext&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(r.previousItem)),o=!this.Trigger("beforeCurrentItem",e,r))return;a={key:i,elem:t},this.m_active=a,null!=this.m_dndContext&&this._isTouchSupport()&&this.m_dndContext._setDraggable(t),this._focusItem(r.previousItem,t),this.SetOption("currentItem",i,{_context:{originalEvent:e,internalSet:!0,extraData:{item:t}},changed:!0})}else i==this.m_active.key&&(a={key:i,elem:t},this.m_active=a,this._focusItem(null,t));else this.m_active=null},HighlightActive:function(t){var e,n;null!=this.m_active&&this._getListContainer().hasClass("oj-focus-ancestor")&&(t=t||!1,e=this.m_active.elem,this._highlightElem(e,"oj-focus"),this.GetFocusMode()===this.FOCUS_MODE_ITEM&&(e=this.getFocusItem(e),n=document.activeElement,!t&&e.get(0).contains(n)||e.get(0).focus()))},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(t,e){this._activeAndFocus(t,e)},_activeAndFocus:function(t,e){this._scrollToVisible(t[0]),this.UnhighlightActive(),this._setActive(t,e),this.HighlightActive()},_isSelectionEnabled:function(){return"none"!=this.GetOption("selectionMode")},_isMultipleSelection:function(){return"multiple"==this.GetOption("selectionMode")},IsSelectable:function(t){return t=this.getFocusItem(e(t)).get(0),t.hasAttribute("aria-selected")},_filterSelection:function(t){var e,n,i;for(e=[],n=0;n<t.length&&(i=this.FindElementByKey(t[n]),null==i||!this.IsSelectable(i)||(e.push(t[n]),this._isMultipleSelection()));n++);return e},_unhighlightSelection:function(){var t,n;null!=this.m_keyElemMap&&(t=this,e.each(this.GetOption("selection"),function(e,i){n=t.FindElementByKey(i),null!=n&&t._unhighlightElem(n,"oj-selected")}))},_highlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!0)},_unhighlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!1)},HighlightUnhighlightElem:function(t,n,i){var r;t=e(t),"oj-selected"==n&&this.getFocusItem(t).attr("aria-selected",i?"true":"false"),r=t.children("."+this.getGroupItemStyleClass()),r.length>0&&(t=e(r[0])),"oj-focus"===n?i?"actionable"!=this.m_keyMode&&this._focusInHandler(t):this._focusOutHandler(t):i?t.addClass(n):t.removeClass(n)},HandleClickSelection:function(t,e){var n,i;this._scrollToVisible(t[0]),n=this._ctrlEquivalent(e),i=e.shiftKey,this._isMultipleSelection()&&(n||i)?!n&&i?this._extendSelection(t,e):this._augmentSelectionAndFocus(t,e):this.SelectAndFocus(t,e)},_handleTouchSelection:function(t,e){this._isMultipleSelection()?this._augmentSelectionAndFocus(t,e):this.SelectAndFocus(t,e)},_clearSelection:function(t){this._unhighlightSelection(),t&&this.SetOption("selection",[],{_context:{originalEvent:null,internalSet:!0,extraData:{items:e()}},changed:!0}),this.m_selectionFrontier=null},SelectAndFocus:function(t,e){this._clearSelection(!1),this._augmentSelectionAndFocus(t,e,[])},_extendSelection:function(t,e){var n;null!=this.m_active&&(n=this.m_selectionFrontier,n!=t&&(this._unhighlightElem(t,"oj-focus"),this._extendSelectionRange(this.m_active.elem,t,e)))},_extendSelectionRange:function(t,e,n){this._clearSelection(!1),this.m_selectionFrontier=e,this._highlightRange(t,e,n),this.HighlightActive()},_highlightRange:function(t,n,i){var r,o,a,s,l,u,h,c,d,p;for(r=[],o=[],a=this._getItemsCache(),s=a.index(t),l=a.index(n),s>l?(u=l,h=s):(u=s,h=l),c=u;c<=h;c++)d=a[c],this.IsSelectable(d)&&(p=this.m_contentHandler.GetKey(d),this._applySelection(d,p),r.push(p),o.push(d));this.SetOption("selection",r,{_context:{originalEvent:i,internalSet:!0,extraData:{items:e(o)}},changed:!0})},_applySelection:function(t,n){null==this.m_keyElemMap&&(this.m_keyElemMap={}),this.m_keyElemMap[n]=e(t).attr("id"),this._highlightElem(t,"oj-selected")},_augmentSelectionAndFocus:function(t,n,i){var r,o,a,s,l;if(r=t,o=this.GetKey(t[0]),void 0==i&&(i=this.GetOption("selection").slice(0)),this.UnhighlightActive(),this._setActive(r,n),this.HighlightActive(),null==this.m_active||this.m_active.elem.get(0)!=r.get(0))return void(null!=i&&0==i.length&&this.SetOption("selection",i,{_context:{originalEvent:n,internalSet:!0,extraData:{items:e([])}},changed:!0}));for(a=i.indexOf(o),a>-1?(this._unhighlightElem(t,"oj-selected"),i.splice(a,1)):(this.m_selectionFrontier=t,this._applySelection(t,o),i.push(o)),s=new Array(i.length),l=0;l<i.length;l++)s[l]=this.FindElementByKey(i[l]);this.SetOption("selection",i,{_context:{originalEvent:n,internalSet:!0,extraData:{items:e(s)}},changed:!0})},ToggleSelection:function(t,n,i){var r,o,a,s,l,u;if(r=this.GetOption("selection").slice(0),a=this.m_active.elem,s=this.m_active.key,l=r.indexOf(s),l>-1){if(i)return;this._unhighlightElem(a,"oj-selected"),r.splice(l,1),0==r.length&&(this.m_selectionFrontier=null)}else this.IsSelectable(a[0])&&(n||(this._clearSelection(!1),r.length=0),this.m_selectionFrontier=a,this._applySelection(a,s),r.push(s));for(o=new Array(r.length),u=0;u<r.length;u++)o[u]=this.FindElementByKey(r[u]);this.SetOption("selection",r,{_context:{originalEvent:t,internalSet:!0,extraData:{items:e(o)}},changed:!0})},HandleSelectionOrActiveKeyDown:function(t){var e,n,i,r,o,a,s=!1;return null!=this.m_active&&(e=t.keyCode,n=this.m_active.elem,this._isActionableMode()?e==this.ESC_KEY?(this._exitActionableMode(),this.HighlightActive(!0),this._setTabIndex(n),s=!0):e===this.TAB_KEY&&(o=n.find("[data-first]"),a=n.find("[data-last]"),t.shiftKey?o.length>0&&a.length>0&&o!=a&&t.target==o[0]&&(a[0].focus(),s=!0):o.length>0&&a.length>0&&o!=a&&t.target==a[0]&&(o[0].focus(),s=!0)):e==this.F2_KEY?(this._enterActionableMode(),o=n.find("[data-first]"),o.length>0&&(o[0].focus(),n.removeClass("oj-focus-highlight"))):e==this.SPACE_KEY&&this._isSelectionEnabled()?(i=this._ctrlEquivalent(t),r=t.shiftKey,r&&!i&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,t):this.ToggleSelection(t,i&&!r&&this._isMultipleSelection(),!1),s=!0):e==this.ENTER_KEY&&this._isSelectionEnabled()?this.ToggleSelection(t,!1,!0):this.IsArrowKey(e)?(i=this._ctrlEquivalent(t),r=t.shiftKey,i||(s=this.HandleArrowKeys(e,r&&this._isSelectionEnabled()&&this._isMultipleSelection(),t))):e===this.TAB_KEY&&(t.shiftKey?this._disableAllTabbableElementsBeforeItem(n):this._disableAllTabbableElementsAfterItem(n)),s)},_isDisclosing:function(t){return!(!t||!this.m_disclosing)&&this.m_disclosing.indexOf(t)>-1},_setDisclosing:function(t,e){var n;if(null!=t)if(null==this.m_disclosing&&(this.m_disclosing=[]),e)this.m_disclosing.push(t);else for(n=this.m_disclosing.indexOf(t);n>-1;)this.m_disclosing.splice(n,1),n=this.m_disclosing.indexOf(t)},getAnimationEffect:function(e){var n;return null==this.defaultAnimations&&(n=t.ThemeUtils.parseJSONFromFontFamily(this.getOptionDefaultsStyleClass()),this.defaultAnimations=n.animation),this.defaultAnimations[e]},isExpandable:function(){return"none"!=this.GetOption("drillMode")},_isExpandAll:function(){var t=this.GetOption("expanded");if("auto"===t){if(!this.isExpandable())return!0}else if("all"===t)return!0;return!1},expandKey:function(t,n,i,r,o){var a=this.FindElementByKey(t);null!=a&&this.ExpandItem(e(a),null,o,t,n,r,i)},_expand:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.ExpandItem(e,t,!0,null,!0,!0,!0)},ExpandItem:function(t,e,n,i,r,o,a){var s,l,u;this.GetState(t)==this.STATE_COLLAPSED&&(null==i&&(i=this.GetKey(t[0])),n&&this._isDisclosing(i)||(s={item:t,key:i},a&&(l=!this.Trigger("beforeExpand",e,s),l&&r)||(this.signalTaskStart(),n&&this._setDisclosing(i,!0),this.m_contentHandler.Expand(t,function(t){this._expandSuccess(t,n,e,s,o)}.bind(this)),this.m_items=null,null!=e&&e.stopPropagation(),null!=this._collapsedKeys&&(u=this._collapsedKeys.indexOf(i),u!=-1&&this._collapsedKeys.splice(u,1)),this.signalTaskEnd())))},_expandSuccess:function(t,n,i,r,o){var a,s,l,u,h,c=this;this.signalTaskStart(),t.key=r.key,h=this.AnimateExpand(e(t),n,i),a=t.parentNode,a=e(a),this.SetState(a,this.STATE_EXPANDED),s=this.getCollapseIconStyleClass(),l=this.getExpandIconStyleClass(),u=this.getGroupItemStyleClass(),a.children("."+u).find("."+s).removeClass(s).addClass(l),o&&h.then(function(){c.Trigger("expand",i,r)}),h.then(function(){c.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(t,n){var i;t.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(t){i=parseInt(e(this).css("maxHeight"),10),i>0&&e(this).css("maxHeight",i+n+"px")})},AnimateExpand:function(n,i,r){var o,a,s,l,u,h=0,c=this,d="expand";return o=new Promise(function(t,e){a=t}),i?(this.signalTaskStart(),n.children().each(function(){h+=e(this).outerHeight(!0)}),this._isTouchSupport()&&this._adjustAncestorsMaxHeight(n,h),n.css("maxHeight",h+"px"),s=this.getAnimationEffect(d),this.signalTaskStart(),l=n.get(0),u=t.AnimationUtils.startAnimation(l,d,s),u.then(function(t){c._handleExpandTransitionEnd(n,a)}),this.signalTaskEnd()):(this._isTouchSupport()?(n.children().each(function(){h+=e(this).outerHeight(!0)}),n.css("maxHeight",h+"px"),this._adjustAncestorsMaxHeight(n,h)):n.css("maxHeight",""),this.AnimateExpandComplete(n),a(null)),o},_handleExpandTransitionEnd:function(t,e){this._isTouchSupport()||t.css("maxHeight",""),this.AnimateExpandComplete(t),e(null),this.signalTaskEnd()},AnimateExpandComplete:function(t){t.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(t[0].key,!1)},collapseKey:function(t,n,i,r){var o=this.FindElementByKey(t);null!=o&&this.CollapseItem(e(o),null,r,t,n,i)},_collapse:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.CollapseItem(e,t,!0,null,!0,!0)},CollapseItem:function(t,e,n,i,r,o){var a,s,l,u,h,c=this;this.GetState(t)==this.STATE_EXPANDED&&(null==i&&(i=this.GetKey(t[0])),n&&this._isDisclosing(i)||(a={item:t,key:i},s=!this.Trigger("beforeCollapse",e,a),s&&r||(this.signalTaskStart(),n&&this._setDisclosing(i,!0),h=this.AnimateCollapse(t,i,n,e),this.SetState(t,this.STATE_COLLAPSED),l=this.getCollapseIconStyleClass(),u=this.getExpandIconStyleClass(),t.find("."+u).first().removeClass(u).addClass(l),this.m_items=null,null!=e&&e.stopPropagation(),o&&h.then(function(){c.Trigger("collapse",e,a)}),void 0==this._collapsedKeys&&(this._collapsedKeys=[]),this._collapsedKeys.indexOf(i)==-1&&this._collapsedKeys.push(i),h.then(function(){c.signalTaskEnd()}))))},AnimateCollapse:function(n,i,r,o){var a,s,l,u,h,c,d=0,p=this,g="collapse";return s=new Promise(function(t,e){l=t}),a=n.children("ul").first(),a[0].key=i,r?(this.signalTaskStart(),a.children().each(function(){d+=e(this).outerHeight()}),a.css("maxHeight",d+"px"),u=this.getAnimationEffect(g),u.persist="all",this.signalTaskStart(),h=a.get(0),c=t.AnimationUtils.startAnimation(h,g,u),c.then(function(t){p._handleCollapseTransitionEnd(a,l)}),this.signalTaskEnd()):(a.css("maxHeight","0px"),this.AnimateCollapseComplete(a),l(null)),s},_handleCollapseTransitionEnd:function(t,e){this.AnimateCollapseComplete(t),e(null),this.signalTaskEnd()},AnimateCollapseComplete:function(t){t.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(t),this._setDisclosing(t[0].key,!1)},_collapseAll:function(){var t,n;this.signalTaskStart(),t=this,n=this._getItemsCache(),n.each(function(){t.CollapseItem(e(this),null,!1,null,!1,!1)}),this.signalTaskEnd()},getExpanded:function(){var t,n,i,r;return t=[],n=this,i=this._getItemsCache(),i.each(function(){r=e(this),n.GetState(r)==n.STATE_EXPANDED&&t.push(n.GetKey(r[0]))}),t},getWidgetConstructor:function(){return t.Components.getWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return"oj-listview-item"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(){return"oj-listview-group-item"},getGroupStyleClass:function(){return"oj-listview-group"},getGroupExpandStyleClass:function(){return"oj-listview-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getDepthStyleClass:function(t){return""},getOptionDefaultsStyleClass:function(){return"oj-listview-option-defaults"},_preventMouseWheelOverscroll:function(t,e){var n=e.originalEvent.wheelDelta;isNaN(n)||(n<0?t.scrollTop+t.clientHeight+Math.abs(n)>=t.scrollHeight&&(t.scrollTop=t.scrollHeight,e.preventDefault()):t.scrollTop-n<=0&&(t.scrollTop=0,e.preventDefault()))},_getScrollEventElement:function(){var t=this._getScroller();return t==document.body||t==document.documentElement?window:t},_registerScrollHandler:function(){var t,n=this;t=e(this._getScrollEventElement()),this.ojContext._off(t,"scroll mousewheel"),this.ojContext._on(t,{scroll:function(t){n._skipScrollUpdate||n.SetOption("scrollTop",n._getScroller().scrollTop,{_context:{originalEvent:t,internalSet:!0}}),n._skipScrollUpdate=!1,n._isPinGroupHeader()&&n._handlePinGroupHeader()}}),"loadMoreOnScroll"==this.options.scrollPolicy&&this.ojContext._on(t,{mousewheel:function(t){n._preventMouseWheelOverscroll(n._getScroller(),t)}})},_isPinGroupHeader:function(){return"static"!=this.GetOption("groupHeaderPosition")},_getGroupItemsCache:function(){var t;return null==this.m_groupItems&&(t="."+this.getGroupItemStyleClass()+":visible",
this.m_groupItems=this.element.find(t).filter(function(t){return!e(this).parent().hasClass("oj-collapsed")&&e(this).next().children().length>0})),this.m_groupItems},_unpinGroupItem:function(t){e(t).removeClass("oj-pinned"),t.style.top="auto",t.style.width="auto"},_getNextGroupItem:function(t){var e,n;return e=this._getGroupItemsCache(),n=e.index(t),n>-1&&n<e.length-1?e[n+1]:null},_pinGroupItem:function(t,n){var i,r,o;i=t.offsetWidth,r=t.offsetHeight,o=this._getNextGroupItem(t),null!=o&&o.offsetTop<=n+r+5&&(n-=r),e(t).addClass("oj-pinned"),t.style.top=n+"px",t.style.width=i+"px"},_handlePinGroupHeader:function(){var t,e,n,i,r,o,a,s,l,u;if(t=this._getScroller(),e=t.scrollTop,null!=this.m_groupItemToPin&&0==e)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);for(i=this._getGroupItemsCache(),r=0,null!=this.m_groupItemToPin&&(r=this.m_groupItemToPin.offsetHeight),o=0;o<i.length;o++)if(a=i[o],this.m_groupItemToPin!=a&&(s=i[o].offsetTop,l=s+a.parentNode.offsetHeight,s<e&&l>e+r)){n=a;break}if(null!=n&&n!=this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(n,e),this.m_groupItemToPin=n;else if(null!=this.m_groupItemToPin){if(u=this._getNextGroupItem(this.m_groupItemToPin),null!=u&&u.offsetTop<=e+r)return void(this.m_groupItemToPin.style.top=u.offsetTop-r+"px");this.m_groupItemToPin.style.top=e+"px"}},_getScroller:function(){var t,e;return t=this.GetOption("scrollPolicyOptions"),null!=t&&(e=t.scroller,null!=e)?e:this._getListContainer().get(0)},_scrollToGroupHeader:function(t){var e,n;e=this._getScroller(),n=e.scrollTop,null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null),e.scrollTop=t.offsetTop,this._isPinGroupHeader()&&n==e.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(t)},_setFirstFocusableItemInGroupCurrent:function(t){var n,i,r=this;n=e(t).next().children(),n.each(function(){if(i=e(this),!r.SkipFocus(i))return r.SetOption("currentItem",this.key),!1})}}),t.__registerWidget("oj.ojListView",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{currentItem:null,data:null,dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:"auto",groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollTop:0,selection:[],selectionMode:"none",animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,optionChange:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var n={};n.element=this.element,n.OuterWrapper=this.OuterWrapper,n.ojContext=this,n=e.extend(this.options,n),this.listview=new t._ojListView,this.listview.init(n)},_AfterCreate:function(){this._super(),this.listview.afterCreate()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(t,e,n){this.listview.notifyContextMenuGesture(t,e,n)},_setOptions:function(t,e){var n=this.listview.setOptions(t,e);this._super(t,e),n&&(this.listview.refresh(),this._fireIndexerModelChangeEvent())},_setOption:function(t,n,i){var r=!0;if("selectionMode"==t?r="none"==n||"single"==n||"multiple"==n:"drillMode"==t?r="collapsible"==n||"none"==n:"scrollPolicy"==t?r="auto"==n||"loadMoreOnScroll"==n:"groupHeaderPosition"==t&&(r="static"==n||"sticky"==n),!r)throw"Invalid value: "+n+" for key: "+t;"selection"==t&&(i={_context:{extraData:{items:e(this.listview.getItems(n))}}}),this._super(t,n,i)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},widget:function(){return this.listview.getRootElement()},refresh:function(){this._super(),this.listview.refresh(),this._fireIndexerModelChangeEvent()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(t){return this.listview.getNodeBySubId(t)},getSubIdByNode:function(t){return this.listview.getSubIdByNode(t)},getContextByNode:function(t){return this.listview.getContextByNode(t)},getDataForVisibleItem:function(t){return this.listview.getDataForVisibleItem(t)},expand:function(t,e){this.listview.expandKey(t,e,!0,!0)},collapse:function(t,e){this.listview.collapseKey(t,e,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&t.ListViewIndexerModel&&(this.indexerModel=new t.ListViewIndexerModel(this.listview)),this.indexerModel},_fireIndexerModelChangeEvent:function(){null!=this.indexerModel&&this.indexerModel.fireChangeEvent&&this.indexerModel.fireChangeEvent()}}),function(){var e={properties:{currentItem:{type:"Object"},data:{},dnd:{},drillMode:{type:"string"},expanded:{type:"Array<Object>|string"},groupHeaderPosition:{},item:{},scrollPolicy:{type:"string"},scrollPolicyOptions:{type:"Object<string, number>"},scrollTop:{type:"number"},selection:{type:"Array<Object>"},selectionMode:{type:"string"}},methods:{collapse:{},expand:{},getContextByNode:{},getDataForVisibleItem:{},getExpanded:{},getIndexerModel:{},getNodeBySubId:{},getSubIdByNode:{},refresh:{},whenReady:{},widget:{}},extension:{_hasWrapper:!0,_innerElement:"ul",_widgetName:"ojListView"}};t.Components.registerMetadata("ojListView","baseComponent",e),t.Components.register("oj-list-view",t.Components.getMetadata("ojListView"))}()}),define("ojs/ojdatasource-common",["ojs/ojcore","jquery"],function(t,e){t.DataSource=function(t){this.data=t,this.Init()},t.Object.createSubclass(t.DataSource,t.EventSource,"oj.DataSource"),t.DataSource.prototype.Init=function(){t.DataSource.superclass.Init.call(this)},t.TreeDataSource=function(e){t.TreeDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.TreeDataSource,t.DataSource,"oj.TreeDataSource"),t.TableDataSource=function(e,n){if(this.constructor==t.TableDataSource){var i=t.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,r=t.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(i+"\n"+r)}this.data=e,this.options=n,this.isFetching=!1,this._startIndex=0,this.Init()},t.Object.createSubclass(t.TableDataSource,t.DataSource,"oj.TableDataSource"),t.TableDataSource.prototype.Init=function(){t.TableDataSource.superclass.Init.call(this)},t.TableDataSource.prototype.sortCriteria=null,t.TableDataSource.prototype.totalSizeConfidence=function(){return"actual"},t.TableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},t.TableDataSource._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."},t.DataGridDataSource=function(e){t.DataGridDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.DataGridDataSource,t.DataSource,"oj.DataGridDataSource")}),define("ojs/ojarraytabledatasource",["ojs/ojcore","jquery","ojs/ojdatasource-common"],function(t,e){t.ArrayTableDataSource=function(e,n){if(this.data=e||{},!(e instanceof Array)&&"function"!=typeof e&&"function"!=typeof e.subscribe){var i=t.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,r=t.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(i+"\n"+r)}if(null!=n&&null!=n.idAttribute||t.Logger.info(t.ArrayTableDataSource._LOGGER_MSG._INFO_ARRAY_TABLE_DATASOURCE_IDATTR),t.ArrayTableDataSource.superclass.constructor.call(this,e,n),this._eventHandlers=[],this._rows={},null!=e&&void 0!==e&&(this._idAttribute=null,null!=n&&null!=n.idAttribute&&(this._idAttribute=n.idAttribute),this._data=e instanceof Array?e:e(),this._totalSize=this._data.length,!(e instanceof Array))){var o=this;e.subscribe(function(t){if(o._isDataLoaded()){var e,n=[],i=[];for(e=0;e<t.length;e++)"deleted"===t[e].status&&n.push(t[e].value);for(o.remove(n,null),n=[],i=[],e=0;e<t.length;e++)"added"===t[e].status&&(n.push(t[e].value),i.push(t[e].index));o.add(n,{at:i})}},null,"arrayChange")}(null==n||"enabled"!=n.startFetch&&null!=n.startFetch)&&null!=n||(this._startFetchEnabled=!0)},t.Object.createSubclass(t.ArrayTableDataSource,t.TableDataSource,"oj.ArrayTableDataSource"),t.ArrayTableDataSource.prototype.comparator=null,t.ArrayTableDataSource.prototype.sortCriteria=null,t.ArrayTableDataSource.prototype.Init=function(){t.ArrayTableDataSource.superclass.Init.call(this)},t.ArrayTableDataSource.prototype.add=function(t,e){e=e||{},this._checkDataLoaded();var n=e.at;return this._addToRowSet(t,n,e)},t.ArrayTableDataSource.prototype.at=function(t,e){this._checkDataLoaded();var n;return n=t<0||t>=this._rows.data.length?null:{data:this._rows.data[t],index:t,key:this._getId(this._rows.data[t])},new Promise(function(t,e){t(n)})},t.ArrayTableDataSource.prototype.change=function(e,n){n=n||{},this._checkDataLoaded();var i,r,o,a,s=n.silent,l={};for(l.data=[],l.keys=[],l.indexes=[],e instanceof Array||(e=[e]),i=0;i<e.length;i++)r=e[i],null!=r&&(o=this._getId(r),a=this._getInternal(o,null),l.data.push(this._wrapWritableValue(r)),l.keys.push(o),l.indexes.push(a.index),this._rows.data[a.index]=r);return!s&&l.data.length>0&&t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.CHANGE,l),Promise.resolve(l)},t.ArrayTableDataSource.prototype.fetch=function(t){t=t||{};var e=t.fetchType;return"init"!=e||this._startFetchEnabled?this._fetchInternal(t):Promise.resolve()},t.ArrayTableDataSource.prototype.get=function(t,e){return e=e||{},this._checkDataLoaded(),Promise.resolve(this._getInternal(t,e))},t.ArrayTableDataSource.prototype.getCapability=function(t){return"full"},t.ArrayTableDataSource.prototype.remove=function(t,e){return e=e||{},this._checkDataLoaded(),this._removeInternal(t,e)},t.ArrayTableDataSource.prototype.reset=function(e,n){n=n||{},n.previousRows=this._rows;var i=n.silent;return null!=e&&(this._data=e),this._rows={},this._totalSize=0,i||t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.RESET,null),Promise.resolve()},t.ArrayTableDataSource.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e,this._checkDataLoaded();var n=this;return new Promise(function(i,r){e=e||{};var o=n._getComparator();n._rows.data.sort(function(e,i){return t.ArrayTableDataSource._sortFunc(e,i,o,n)}),n._sorted=!0;var a={header:e.key,direction:e.direction};t.TableDataSource.superclass.handleEvent.call(n,t.TableDataSource.EventType.SORT,a),i(a)})},t.ArrayTableDataSource.prototype.totalSize=function(){return this._totalSize},t.ArrayTableDataSource.prototype._addToRowSet=function(e,n,i){var r,o,a,s;i=i||{};var l=i.silent,u={};for(u.data=[],u.keys=[],u.indexes=[],e instanceof Array||(e=[e]),null==n||n instanceof Array||(n=[n]),r=0;r<e.length;r++)if(a=e[r],null!=a){if(s=this._getId(a),u.data.push(this._wrapWritableValue(a)),u.keys.push(s),1==this._sorted&&this._rows.data.length>0){var h=this;for(o=0;o<this._rows.data.length;o++){if(t.ArrayTableDataSource._sortFunc(a,this._rows.data[o],h._getComparator(),h)<0){this._rows.data.splice(o,0,a),u.indexes.push(o);break}if(o==this._rows.data.length-1){this._rows.data.push(a),u.indexes.push(o+1);break}}}else null==n?(this._rows.data.push(a),u.indexes.push(this._rows.data.length-1)):(this._rows.data.splice(n[r],0,a),u.indexes.push(n[r]));this._totalSize++,this._realignRowIndices()}return!l&&u.data.length>0&&t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.ADD,u),Promise.resolve(u)},t.ArrayTableDataSource.prototype._checkDataLoaded=function(){this._isDataLoaded()||(this.data instanceof Array||"function"!=typeof this.data||"function"!=typeof this.data.subscribe||(this._data=this.data()),this._rows=this._getRowArray(this._data),this._totalSize=this._data.length)},t.ArrayTableDataSource.prototype._isDataLoaded=function(){return null!=this._rows&&null!=this._rows.data},t.ArrayTableDataSource.prototype._fetchInternal=function(e){e=e||{},this._startFetch(e),this._checkDataLoaded();var n;try{n=e.pageSize>0?e.pageSize:-1,this._startIndex||(this._startIndex=0),this._startIndex=null==e.startIndex?this._startIndex:e.startIndex;var i,r,o,a=t.ArrayTableDataSource._getEndIndex(this._rows,this._startIndex,n),s=[],l=[];for(i=this._startIndex;i<=a;i++)r=this._getId(this._rows.data[i]),o=this._wrapWritableValue(this._rows.data[i]),s[i-this._startIndex]=o,l[i-this._startIndex]=r}catch(u){return this._endFetch(e,null,u),Promise.reject(u)}a<this._startIndex&&(this._startIndex=a+1),e.pageSize=n,e.startIndex=this._startIndex,e.refresh=!0;var h={data:s,keys:l,startIndex:this._startIndex};return this._endFetch(e,h,null),Promise.resolve(h)},t.ArrayTableDataSource.prototype._getInternal=function(t,n){n=n||{};var i,r,o,a,s,l=null;for(i=0;i<this._rows.data.length;i++)if(o=this._rows.data[i],void 0!==o)if(s=this._getId(o),e.isArray(s)&&e.isArray(t)){if(s.length==t.length){var u=!0;for(r=0;r<t.length;r++)if(s[r]!=t[r]){u=!1;break}u&&(a=this._wrapWritableValue(o),l={data:a,key:s,index:this._rows.indexes[i]})}}else s==t&&(a=this._wrapWritableValue(o),l={data:a,key:s,index:this._rows.indexes[i]});return l},t.ArrayTableDataSource.prototype._getComparator=function(){var t=this.comparator;if(null==t){var n=this.sortCriteria.key,i=this.sortCriteria.direction;"ascending"==i?t=function(t){return e.isFunction(t[n])?t[n]():t[n]}:"descending"==i&&(t=function(t,i){var r,o;return e.isFunction(t[n])?(r=t[n](),o=i[n]()):(r=t[n],o=i[n]),r===o?0:r>o?-1:1})}return t},t.ArrayTableDataSource.prototype._realignRowIndices=function(){for(var t=0;t<this._rows.data.length;t++)this._rows.indexes[t]=t},t.ArrayTableDataSource.prototype._removeInternal=function(e,n){var i,r,o,a,s=this;n=n||{};var l=n.silent,u={};u.data=[],u.keys=[],u.indexes=[],e instanceof Array||(e=[e]);var h=[];for(i=0;i<e.length;i++)r=e[i],null!=r&&(o=this._getId(r),a=this._getInternal(o,null),null!=a&&h.push({data:a.data,key:a.key,index:a.index}));for(h.sort(function(t,e){return t.index-e.index}),i=0;i<h.length;i++)u.data.push(h[i].data),u.keys.push(h[i].key),u.indexes.push(h[i].index);for(i=u.indexes.length-1;i>=0;i--)this._rows.data.splice(u.indexes[i],1),this._rows.indexes.splice(u.indexes[i],1),this._totalSize--,this._realignRowIndices();return!l&&u.data.length>0&&t.TableDataSource.superclass.handleEvent.call(s,t.TableDataSource.EventType.REMOVE,u),Promise.resolve(u)},t.ArrayTableDataSource.prototype._setRow=function(t,e){this._rows[t]=e,e.index=t},t.ArrayTableDataSource.prototype._startFetch=function(e){e.silent||t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},t.ArrayTableDataSource.prototype._endFetch=function(e,n,i){null!=i?t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.ERROR,i):e.silent||t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.SYNC,n)},t.ArrayTableDataSource.prototype._handleRowChange=function(e){e.startIndex=this._startIndex,t.TableDataSource.superclass.handleEvent.call(this,t.TableDataSource.EventType.CHANGE,e)},t.ArrayTableDataSource._compareKeys=function(t,e,n){if("descending"==n){if(t<e)return 1;if(e<t)return-1}else{if(t>e)return 1;if(e>t)return-1}return 0},t.ArrayTableDataSource._getEndIndex=function(t,e,n){var i=t.data.length-1;return n>0&&(i=e+n-1,i=i>t.data.length-1?t.data.length-1:i),i},t.ArrayTableDataSource._getKey=function(t,n){return e.isFunction(t[n])?t[n]():t[n]},t.ArrayTableDataSource.prototype._getRowArray=function(t){var e,n,i=t.length-1,r={};for(r.data=[],r.indexes=[],this._attributes=null,e=0;e<=i;e++){var o={},a=t[e];for(n in a)a.hasOwnProperty(n)&&(o[n]=a[n],0==e&&(null==this._attributes&&(this._attributes=[]),this._attributes.push(n)));r.data[e]=o,r.indexes[e]=e}return r},t.ArrayTableDataSource.prototype._getId=function(n){var i,r=this._getIdAttr(n);if(e.isArray(r)){var o;for(i=[],o=0;o<r.length;o++){if(!(r[o]in n)){var a=t.Translations.applyParameters(t.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[r[o]]);throw new Error(a)}i[o]=t.ArrayTableDataSource._getKey(n,r[o])}}else{if(!(r in n)){var a=t.Translations.applyParameters(t.ArrayTableDataSource._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[r]);throw new Error(a)}i=t.ArrayTableDataSource._getKey(n,r)}return i},t.ArrayTableDataSource.prototype._getIdAttr=function(t){if(null!=this._idAttribute)return this._idAttribute;if(null==this._attributes){this._attributes=[];var e;for(e in t)t.hasOwnProperty(e)&&this._attributes.push(e)}return this._attributes.hasOwnProperty("id")?"id":this._attributes},t.ArrayTableDataSource._sortFunc=function(n,i,r,o){var a,s,l,u,h=o.sortCriteria.direction;if(e.isFunction(r)){if(1===r.length){a=r.call(o,n),s=r.call(o,i);var c=t.StringUtils.isString(a)?a.split(","):[a],d=t.StringUtils.isString(s)?s.split(","):[s];for(l=0;l<c.length;l++)if(u=t.ArrayTableDataSource._compareKeys(c[l],d[l],h),0!==u)return u;return 0}return r.call(o,n,i)}if(t.StringUtils.isString(r)){var p=r.split(",");for(l=0;l<p.length;l++)if(a=t.ArrayTableDataSource._getKey(n,p[l]),s=t.ArrayTableDataSource._getKey(i,p[l]),u=t.ArrayTableDataSource._compareKeys(a,s,h),0!==u)return u}return 0},t.ArrayTableDataSource.prototype._wrapWritableValue=function(e){var n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)t.ArrayTableDataSource._defineProperty(i,e,r[n]);return i},t.ArrayTableDataSource._defineProperty=function(t,e,n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},enumerable:!0})},t.ArrayTableDataSource._LOGGER_MSG={_INFO_ARRAY_TABLE_DATASOURCE_IDATTR:"idAttribute option has not been specified. Will default to using 'id' if the field exists. If not, will use all the fields.",_ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW:"Specified idAttribute {0} not in row data. Please ensure all specified idAttribute fields are in the row data or do not specify idAttribute and all fields will be used as id."}}),define("views/acts",["knockout","ojs/ojcore","settings","ojs/ojmodel","ojs/ojknockout-model","ojs/ojbutton","ojs/ojlistview","ojs/ojarraytabledatasource"],function(t,e,n){function i(n){this.fetched=t.observable(!1),this.acts=t.observableArray(),this.sort=t.observable("votes"),this.sortedActs=t.computed(s,this),this.dataSource=new e.ArrayTableDataSource(this.sortedActs),this.handleActivated=r.bind(this),this.handleBindingsApplied=o.bind(this),this.drill=l.bind(this,n)}function r(){var t=this,e=$.getJSON("/mobile/custom/artistapi/acts").then(function(e){return $.each(e,function(t,e){e.registrationDate=new Date(e.registrationDate),e.nameNoWhitespace=e.name&&e.name.replace(/ /g,""),e.likes=0}),t.acts(e),t.dataSource.reset(),t.fetched(!0),e})["catch"](function(t){throw console.error(t),t});Promise.all([e,$.getJSON("https://artist-enricher-api-partnercloud17.apaas.us6.oraclecloud.com/artists/likes")]).then(function(e){var n=e[0],i=e[1].artist_likes;$.each(n,function(t,e){e.likes=i[e.name]||0}),t.dataSource.reset()})["catch"](function(t){throw console.error(t),t}),this.sort.subscribe(a.bind(this))}function o(t){twttr&&twttr.widgets.load(t.element.querySelector(".twitter-timeline"))}function a(t){this.dataSource.reset()}function s(){var t=this.acts(),e=this.sort();return t&&e?t.sort(function(t,n){return"votes"===e?n.numberOfVotes-t.numberOfVotes:"date"===e?t.registrationDate>n.registrationDate?-1:t.registrationDate<n.registrationDate?1:0:"likes"===e?n.likes-t.likes:void 0}):t}function l(t,e,n){var i=n.value,r=i[0],o=JSON.stringify({logLevel:"info",module:"accs.jet.artists-portal.client",message:"We are drilling down in the acts. Going to act: "+r}),a=new XMLHttpRequest;a.withCredentials=!0,a.addEventListener("readystatechange",function(){}),a.open("POST","https://129.144.150.140:8010/logger-api"),a.setRequestHeader("content-type","application/json"),a.setRequestHeader("cache-control","no-cache"),a.send(o),t.drillModel.drillId(r),t.drillModel.currentModule("details")}return i}),define("ojtranslations/nls/localeElements",{root:{supplemental:{weekData:{firstDay:{"001":1,AE:6,BH:6,BR:0,DZ:6,EG:6,IQ:6,JO:6,KW:6,LB:1,LY:6,MA:6,OM:6,QA:6,SA:0,SD:6,SY:6,TN:0,YE:0,BY:1,BG:1,ES:1,CZ:1,DK:1,AT:1,CH:1,DE:1,LU:1,CY:1,GR:1,AU:0,CA:0,GB:1,IE:0,IN:0,MT:0,NZ:0,PH:0,SG:0,US:0,ZA:0,AR:0,CL:1,CO:0,CR:1,DO:0,EC:1,GT:0,HN:0,MX:0,NI:0,PA:0,PE:0,PR:0,PY:0,SV:0,UY:1,VE:0,EE:1,FI:1,BE:1,FR:1,IL:0,HR:1,HU:1,ID:0,IS:1,IT:1,JP:0,KR:0,LT:1,LV:1,MK:1,MY:1,NO:1,NL:1,PL:1,PT:1,RO:1,RU:1,SK:1,SI:1,AL:1,BA:1,ME:1,RS:1,SE:1,TH:0,TR:1,UA:1,VN:1,CN:0,HK:0,MO:0,TW:0},weekendStart:{"001":6,AE:5,BH:5,DZ:5,EG:5,IQ:5,JO:5,KW:5,LY:5,MA:5,OM:5,QA:5,SA:5,SD:5,SY:5,TN:5,YE:5,IN:0,IL:5},weekendEnd:{"001":0,AE:6,BH:6,DZ:6,EG:6,IQ:6,JO:6,KW:6,LY:6,MA:6,OM:6,QA:6,SA:6,SD:6,SY:6,TN:6,YE:6,IL:6}},prefferedHours:{"001":"H",AE:"h",BH:"h",DZ:"h",EG:"h",IQ:"h",JO:"h",KW:"h",LB:"h",LY:"h",MA:"H",OM:"h",QA:"h",SA:"h",SD:"h",SY:"h",TN:"h",YE:"h",BG:"H",ES:"H",CZ:"H",DK:"H",AT:"H",CH:"H",DE:"H",LU:"H",CY:"h",GR:"h",AU:"h",CA:"h",GB:"H",IE:"H",IN:"h",NZ:"h",PH:"h",SG:"h",US:"h",ZA:"h",AR:"H",BO:"H",CL:"H",CO:"h",CR:"H",CU:"H",DO:"h",EC:"H",GT:"H",HN:"H",MX:"H",NI:"H",PA:"h",PE:"H",PR:"h",SV:"H",UY:"H",VE:"h",EE:"H",FI:"H",BE:"H",FR:"H",IL:"H",HR:"H",ID:"H",IS:"H",IT:"H",JP:"H",KR:"h",LT:"H",LV:"H",MK:"H",MY:"h",NL:"H",PT:"H",RO:"H",RU:"H",SK:"H",SI:"H",AL:"h",BA:"H",ME:"H",RS:"H",SE:"H",TR:"H",UA:"H",CN:"h",HK:"h",MO:"h",TW:"h"},plurals:{ar:function(t){return 0===t?"zero":1===t?"one":2===t?"two":t%100===Math.floor(t%100)&&3<=t%100&&10>=t%100?"few":t%100===Math.floor(t%100)&&11<=t%100&&99>=t%100?"many":"other"},as:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},be:function(t){return 1===t%10&&11!==t%100?"one":t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===t%10||t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||t%100===Math.floor(t%100)&&11<=t%100&&14>=t%100?"many":"other"},bg:function(t){return 1===t?"one":"other"},bn:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},bo:function(t){return"other"},brx:function(t){return 1===t?"one":"other"},ca:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},cs:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":e===Math.floor(e)&&2<=e&&4>=e&&0===t?"few":0!==t?"many":"other"},da:function(t){var e=Math.floor(Math.abs(t)),n=parseInt(t.toString().replace(/^[^.]*.?|0+$/g,""),10);return 1===t||0!==n&&(0===e||1===e)?"one":"other"},de:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},el:function(t){return 1===t?"one":"other"},en:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},es:function(t){return 1===t?"one":"other"},et:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},fi:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},fr:function(t){return t=Math.floor(Math.abs(t)),0===t||1===t?"one":"other"},ga:function(t){return 1===t?"one":2===t?"two":t===Math.floor(t)&&3<=t&&6>=t?"few":t===Math.floor(t)&&7<=t&&10>=t?"many":"other"},gu:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},he:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return 1===e&&0===n?"one":2===e&&0===n?"two":0!==n||0<=t&&10>=t||0!==t%10?"other":"many"},hi:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},hr:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return t=parseInt(t.toString().replace(/^[^.]*.?/,""),10),0===n&&1===e%10&&(11!==e%100||1===t%10&&11!==t%100)?"one":0===n&&e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&(!(12<=e%100&&14>=e%100)||t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100))?"few":"other"},hu:function(t){return 1===t?"one":"other"},id:function(t){return"other"},is:function(t){var e=Math.floor(Math.abs(t));return t=parseInt(t.toString().replace(/^[^.]*.?|0+$/g,""),10),0!==t||1!==e%10||11===e%100&&0===t?"other":"one"},it:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},ja:function(t){return"other"},kn:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},ko:function(t){return"other"},kok:function(t){return"other"},ks:function(t){return 1===t?"one":"other"},lt:function(t){var e=parseInt(t.toString().replace(/^[^.]*.?/,""),10);return 1!==t%10||11<=t%100&&19>=t%100?t%10===Math.floor(t%10)&&2<=t%10&&9>=t%10&&!(11<=t%100&&19>=t%100)?"few":0!==e?"many":"other":"one"},lv:function(t){var e=t.toString().replace(/^[^.]*.?/,"").length,n=parseInt(t.toString().replace(/^[^.]*.?/,""),10);return 0===t%10||t%100===Math.floor(t%100)&&11<=t%100&&19>=t%100||2===e&&n%100===Math.floor(n%100)&&11<=n%100&&19>=n%100?"zero":1===t%10&&(11!==t%100||2===e&&1===n%10&&(11!==n%100||2!==e&&1===n%10))?"one":"other"},mk:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return t=parseInt(t.toString().replace(/^[^.]*.?/,""),10),0!==n||1!==e%10&&1!==t%10?"other":"one"},ml:function(t){return 1===t?"one":"other"},mr:function(t){return 0===Math.floor(Math.abs(t))||1===t?"one":"other"},ms:function(t){return"other"},mt:function(t){return 1===t?"one":0===t||t%100===Math.floor(t%100)&&2<=t%100&&10>=t%100?"few":t%100===Math.floor(t%100)&&11<=t%100&&19>=t%100?"many":"other"},nb:function(t){return 1===t?"one":"other"},ne:function(t){return 1===t?"one":"other"},nl:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},nn:function(t){return 1===t?"one":"other"},no:function(t){return 1===t?"one":"other"},or:function(t){return 1===t?"one":"other"},pa:function(t){return t===Math.floor(t)&&0<=t&&1>=t?"one":"other"},pl:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":0===t&&e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100)?"few":0===t&&1!==e&&(e%10===Math.floor(e%10)&&0<=e%10&&1>=e%10||0===t&&(e%10===Math.floor(e%10)&&5<=e%10&&9>=e%10||0===t&&e%100===Math.floor(e%100)&&12<=e%100&&14>=e%100))?"many":"other"},pt:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return t=parseInt(t.toString().replace(/^[^.]*.?|0+$/g,""),10),1===e&&(0===n||0===e&&1===t)?"one":"other"},"pt-PT":function(t){var e=t.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===e?"one":"other"},ro:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return 1===e&&0===n?"one":0!==n||0===t||1!==t&&t%100===Math.floor(t%100)&&1<=t%100&&19>=t%100?"few":"other"},ru:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,0===t&&1===e%10&&11!==e%100?"one":0===t&&e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100)?"few":0===t&&(0===e%10||0===t&&(e%10===Math.floor(e%10)&&5<=e%10&&9>=e%10||0===t&&e%100===Math.floor(e%100)&&11<=e%100&&14>=e%100))?"many":"other"},sk:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":e===Math.floor(e)&&2<=e&&4>=e&&0===t?"few":0!==t?"many":"other"},sl:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,0===t&&1===e%100?"one":0===t&&2===e%100?"two":0===t&&(e%100===Math.floor(e%100)&&3<=e%100&&4>=e%100||0!==t)?"few":"other"},sq:function(t){return 1===t?"one":"other"},sr:function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*.?/,"").length;return t=parseInt(t.toString().replace(/^[^.]*.?/,""),10),0===n&&1===e%10&&(11!==e%100||1===t%10&&11!==t%100)?"one":0===n&&e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&(!(12<=e%100&&14>=e%100)||t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100))?"few":"other"},sv:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},ta:function(t){return 1===t?"one":"other"},te:function(t){return 1===t?"one":"other"},th:function(t){return"other"},tr:function(t){return 1===t?"one":"other"},uk:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,0===t&&1===e%10&&11!==e%100?"one":0===t&&e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100)?"few":0===t&&(0===e%10||0===t&&(e%10===Math.floor(e%10)&&5<=e%10&&9>=e%10||0===t&&e%100===Math.floor(e%100)&&11<=e%100&&14>=e%100))?"many":"other"},ur:function(t){var e=Math.floor(Math.abs(t));return t=t.toString().replace(/^[^.]*.?/,"").length,1===e&&0===t?"one":"other"},vi:function(t){return"other"},zh:function(t){return"other"}}}},ar:1,"ar-AE":1,"ar-BH":1,"ar-DZ":1,"ar-EG":1,"ar-IQ":1,"ar-JO":1,"ar-KW":1,"ar-LB":1,"ar-LY":1,"ar-MA":1,"ar-OM":1,"ar-QA":1,"ar-SA":1,"ar-SD":1,"ar-SY":1,"ar-TN":1,"ar-YE":1,as:1,be:1,"be-BY":1,bg:1,"bg-BG":1,bn:1,bo:1,"bo-IN":1,brx:1,ca:1,"ca-ES":1,cs:1,"cs-CZ":1,da:1,"da-DK":1,de:1,"de-AT":1,"de-CH":1,"de-DE":1,"de-LU":1,el:1,"el-CY":1,"el-GR":1,en:1,"en-AU":1,"en-CA":1,"en-GB":1,"en-IE":1,"en-IN":1,"en-MT":1,"en-NZ":1,"en-PH":1,"en-SG":1,"en-US":1,"en-ZA":1,es:1,"es-AR":1,"es-BO":1,"es-CL":1,"es-CO":1,"es-CR":1,"es-CU":1,"es-DO":1,"es-EC":1,"es-ES":1,"es-GT":1,"es-HN":1,"es-MX":1,"es-NI":1,"es-PA":1,"es-PE":1,"es-PR":1,"es-PY":1,"es-SV":1,"es-US":1,"es-UY":1,"es-VE":1,et:1,"et-EE":1,fi:1,"fi-FI":1,fr:1,"fr-BE":1,"fr-CA":1,"fr-CH":1,"fr-FR":1,"fr-LU":1,ga:1,"ga-IE":1,gu:1,he:1,"he-IL":1,hi:1,"hi-IN":1,hr:1,"hr-HR":1,hu:1,"hu-HU":1,id:1,"id-ID":1,is:1,"is-IS":1,it:1,"it-CH":1,"it-IT":1,ja:1,"ja-JP":1,kn:1,ko:1,"ko-KR":1,kok:1,ks:1,lt:1,"lt-LT":1,lv:1,"lv-LV":1,mk:1,"mk-MK":1,ml:1,mr:1,ms:1,"ms-MY":1,mt:1,"mt-MT":1,nb:1,"nb-NO":1,ne:1,"ne-IN":1,nl:1,"nl-BE":1,"nl-NL":1,nn:1,"nn-NO":1,no:1,"no-NO":1,or:1,pa:1,pl:1,"pl-PL":1,pt:1,"pt-BR":1,"pt-PT":1,ro:1,"ro-RO":1,ru:1,"ru-RU":1,sk:1,"sk-SK":1,sl:1,"sl-SI":1,sq:1,"sq-AL":1,sr:1,"sr-Cyrl":1,"sr-Cyrl-BA":1,"sr-Cyrl-ME":1,"sr-Cyrl-RS":1,"sr-Latn":1,"sr-Latn-BA":1,"sr-Latn-ME":1,"sr-Latn-RS":1,sv:1,"sv-SE":1,ta:1,te:1,th:1,"th-TH":1,tr:1,"tr-TR":1,uk:1,"uk-UA":1,ur:1,"ur-IN":1,vi:1,"vi-VN":1,zh:1,"zh-Hans":1,"zh-Hans-CN":1,"zh-Hans-SG":1,"zh-Hant":1,"zh-Hant-HK":1,"zh-Hant-MO":1,"zh-Hant-TW":1,__noOverlay:!0,__defaultNoOverlayLocale:"en-US"}),define("ojs/ojvalidation",["ojs/ojcore","jquery","ojL10n!ojtranslations/nls/localeElements","ojs/ojmessaging"],function(t,e,n){t.LocaleData={},t.LocaleData.setBundle=function(e){t.LocaleData._bundle=e},t.LocaleData.getFirstDayOfWeek=function(){return t.LocaleData._getWeekData("firstDay")},t.LocaleData.getWeekendStart=function(){return t.LocaleData._getWeekData("weekendStart")},t.LocaleData.getWeekendEnd=function(){return t.LocaleData._getWeekData("weekendEnd")},t.LocaleData.getDayNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var n=t.LocaleData._getCalendarData().days["stand-alone"][e];return[n.sun,n.mon,n.tue,n.wed,n.thu,n.fri,n.sat]},t.LocaleData.getMonthNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var n=t.LocaleData._getCalendarData().months["stand-alone"][e];return[n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12]]},t.LocaleData.isMonthPriorToYear=function(){var e=t.LocaleData._getCalendarData().dateFormats["long"].toUpperCase(),n=e.indexOf("M"),i=e.indexOf("Y");return n<i},t.LocaleData._getWeekData=function(e){var n=t.LocaleData.__getBundle(),i="001",r=t.LocaleData._getRegion()||i,o=n.supplemental.weekData[e],a=o[r];
return void 0===a&&(a=o[i]),a},t.LocaleData._getCalendarData=function(){var e,n,i=t.LocaleData.__getBundle(),r=i.main;for(n in r)if(r.hasOwnProperty(n)){e=r[n];break}return e.dates.calendars.gregorian},t.LocaleData._getRegion=function(){var e=t.Config.getLocale();if(e){var n=e.toUpperCase().split(/-|_/);if(n.length>=2){var i=n[1];if(4!=i.length)return i;if(n.length>=3)return n[2]}}return null},t.LocaleData.__getBundle=function(){var e=t.LocaleData._bundle;return e?e:t.__isAmdLoaderPresent()?(t.Assert.assert(void 0!==n,"LocaleElements module must be loaded"),n):{}},t.LocaleData.__updateBundle=function(t){n=t},t.Validation={},t.Validation._converterFactories={},t.Validation._validatorFactories={},t.Validation._defaultConverterFactories={},t.Validation._defaultValidatorFactories={},t.Validation._CONTRACTS={converter:{name:"oj.ConverterFactory",type:t.ConverterFactory},validator:{name:"oj.ValidatorFactory",type:t.ValidatorFactory}},t.Validation.converterFactory=function(e,n){var i;return e&&!n?i=t.Validation._getFactory(e,t.Validation._converterFactories):e&&n&&(i=t.Validation._registerFactory(e,n,t.Validation._converterFactories,t.Validation._CONTRACTS.converter)),i},t.Validation.validatorFactory=function(e,n){var i;return e&&!n?i=t.Validation._getFactory(e,t.Validation._validatorFactories):e&&n&&(i=t.Validation._registerFactory(e,n,t.Validation._validatorFactories,t.Validation._CONTRACTS.validator)),i},t.Validation.getDefaultConverterFactory=function(e){return t.Validation._getFactory(e,t.Validation._defaultConverterFactories)},t.Validation.getDefaultValidatorFactory=function(e){return t.Validation._getFactory(e,t.Validation._defaultValidatorFactories)},t.Validation.__registerDefaultConverterFactory=function(e,n){var i=t.Validation._CONTRACTS.converter;t.Validation._registerFactory(e,n,t.Validation._defaultConverterFactories,i),t.Validation._registerFactory(e,n,t.Validation._converterFactories,i)},t.Validation.__registerDefaultValidatorFactory=function(e,n){var i=t.Validation._CONTRACTS.validator;t.Validation._registerFactory(e,n,t.Validation._defaultValidatorFactories,i),t.Validation._registerFactory(e,n,t.Validation._validatorFactories,i)},t.Validation._doImplementsCheck=function(e,n,i){if(n&&!t.Validation._quacksLike(e,n))throw new Error("Factory instance does not implement the methods expected by the factory of type "+i)},t.Validation._getFactory=function(e,n){t.Assert.assertString(e);var i=null;if(e){e=e.toLowerCase();var r=n[e]||{};i=r.instance||null}return i},t.Validation._quacksLike=function(e,n){var i,r=!0;t.Assert.assertObject(e),t.Assert.assertObject(n);for(i in n)if(n.hasOwnProperty(i)&&"function"==typeof n[i]&&!e[i]&&"function"!=typeof e[i]){r=!1;break}return r},t.Validation._registerFactory=function(e,n,i,r){if(t.Assert.assertString(e),t.Assert.assertObject(n),e){var o={};o.instance=n,t.Validation._doImplementsCheck(n,r.type,r.name),i[e.toLowerCase()]=o}},t.ConverterFactory={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",createConverter:function(t){}},t.ValidatorFactory={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(t){}},t.Converter=function(t){this.Init(t)},t.Object.createSubclass(t.Converter,t.Object,"oj.Converter"),t.Converter.prototype.Init=function(e){t.Converter.superclass.Init.call(this),this._options=e},t.Converter.prototype.getHint=function(){return t.Assert.failedInAbstractFunction(),null},t.Converter.prototype.getOptions=function(){return this._options||{}},t.Converter.prototype.parse=function(e){return t.Assert.failedInAbstractFunction(),null},t.Converter.prototype.format=function(e){return t.Assert.failedInAbstractFunction(),null},t.Converter.prototype.resolvedOptions=function(){var t={};return e.extend(t,this._options),t},t.ConverterError=function(e,n){var i=new t.Message(e,n,t.Message.SEVERITY_LEVEL.ERROR);this.Init(i)},t.ConverterError.prototype=new Error,t.ConverterError.prototype.Init=function(t){var e=t.detail,n=t.summary;this._message=t,this.name="Converter Error",this.message=e||n},t.ConverterError.prototype.getMessage=function(){return this._message},t.NumberConverter=function(){this.Init()},t.Object.createSubclass(t.NumberConverter,t.Converter,"oj.NumberConverter"),t.NumberConverter.prototype.Init=function(e){t.NumberConverter.superclass.Init.call(this,e)},t.NumberConverter.prototype.format=function(e){return t.NumberConverter.superclass.format.call(this,e)},t.NumberConverter.prototype.parse=function(e){return t.NumberConverter.superclass.parse.call(this,e)},t.DateTimeConverter=function(t){this.Init(t)},t.Object.createSubclass(t.DateTimeConverter,t.Converter,"oj.DateTimeConverter"),t.DateTimeConverter.prototype.Init=function(e){t.DateTimeConverter.superclass.Init.call(this,e)},t.DateTimeConverter.prototype.format=function(e){return t.DateTimeConverter.superclass.format.call(this,e)},t.DateTimeConverter.prototype.isHourInDaySet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isHourInAMPMSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isMinuteSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isSecondSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isMilliSecondSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isYearSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isMonthSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isDaySet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.isDayNameSet=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.calculateWeek=function(){t.Assert.failedInAbstractFunction()},t.DateTimeConverter.prototype.parse=function(e){return t.DateTimeConverter.superclass.parse.call(this,e)},t.DateTimeConverter.prototype.compareISODates=function(e,n){return t.DateTimeConverter.superclass.compareISODates.call(this,e,n)},t.Validator=function(){this.Init()},t.Object.createSubclass(t.Validator,t.Object,"oj.Validator"),t.Validator.prototype.Init=function(){t.Validator.superclass.Init.call(this)},t.Validator.prototype.validate=function(e){t.Assert.failedInAbstractFunction()},t.Validator.prototype.getHint=function(){t.Assert.failedInAbstractFunction()},t.ValidatorError=function(e,n){var i=new t.Message(e,n,t.Message.SEVERITY_LEVEL.ERROR);this.Init(i)},t.ValidatorError.prototype=new Error,t.ValidatorError.prototype.Init=function(t){var e=t.detail,n=t.summary;this._message=t,this.name="Validator Error",this.message=e||n},t.ValidatorError.prototype.getMessage=function(){return this._message},t.RequiredValidator=function(t){this.Init(t)},t.Object.createSubclass(t.RequiredValidator,t.Validator,"oj.RequiredValidator"),t.RequiredValidator._BUNDLE_KEY_DETAIL="oj-validator.required.detail",t.RequiredValidator._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",t.RequiredValidator.prototype.Init=function(e){t.RequiredValidator.superclass.Init.call(this),this._options=e},t.RequiredValidator.prototype.validate=function(e){var n,i,r,o,a="",s={};if("number"==typeof e&&0===e||e&&0!==e.length)return!0;throw this._options&&(n=this._options.messageDetail||this._options.message||null,o=this._options.messageSummary||null,a=this._options.label||""),s={label:a},r=o?t.Translations.applyParameters(o,s):t.Translations.getTranslatedString(this._getSummaryKey(),s),i=n?t.Translations.applyParameters(n,s):t.Translations.getTranslatedString(this._getDetailKey(),s),new t.ValidatorError(r,i)},t.RequiredValidator.prototype.getHint=function(){var e="";return this._options&&this._options.hint&&(e=t.Translations.getTranslatedString(this._options.hint)),e},t.RequiredValidator.prototype._getSummaryKey=function(){return t.RequiredValidator._BUNDLE_KEY_SUMMARY},t.RequiredValidator.prototype._getDetailKey=function(){return t.RequiredValidator._BUNDLE_KEY_DETAIL},t.DateRestrictionValidator=function(t){this.Init(t)},t.Object.createSubclass(t.DateRestrictionValidator,t.Validator,"oj.DateRestrictionValidator"),t.DateRestrictionValidator.prototype.Init=function(e){t.DateRestrictionValidator.superclass.Init.call(this),this._dayFormatter=e.dayFormatter,this._converter=t.IntlConverterUtils.getConverterInstance(e.converter),e&&(this._messageSummary=e.messageSummary||null,this._messageDetail=e.messageDetail||null)},t.DateRestrictionValidator.prototype._inDisabled=function(t){var e=this._dayFormatter;if(e){var n=t.fullYear,i=t.month+1,r=t.date,o=e({fullYear:n,month:i,date:r});return o&&o.disabled}return!1},t.DateRestrictionValidator.prototype.validate=function(e){var n="",i="",r=t.Translations,o=this._messageSummary,a=this._messageDetail,s=e?this._converter.format(e):e,l=e?t.IntlConverterUtils._dateTime(e,["fullYear","month","date"],!0):null;if(null===e)return e;if(this._inDisabled(l))throw n=o?r.applyParameters(o,{value:s}):r.getTranslatedString("oj-validator.restriction.date.messageSummary",{value:s}),i=a?r.applyParameters(a,{value:s}):r.getTranslatedString("oj-validator.restriction.date.messageDetail",{value:s}),new t.ValidatorError(n,i);return e},t.DateRestrictionValidator.prototype.getHint=function(){return null},t.DateTimeRangeValidator=function(t){this.Init(t)},t.Object.createSubclass(t.DateTimeRangeValidator,t.Validator,"oj.DateTimeRangeValidator"),t.DateTimeRangeValidator.prototype.Init=function(e){t.DateTimeRangeValidator.superclass.Init.call(this),this._converter=t.IntlConverterUtils.getConverterInstance(e.converter),this._min=e.min||null,this._max=e.max||null,e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},t.DateTimeRangeValidator.prototype.validate=function(e){var n,i,r=this._customMessageSummary,o=this._customMessageDetail,a=o.rangeOverflow,s=o.rangeUnderflow,l=r.rangeOverflow,u=r.rangeUnderflow,h=t.IntlConverterUtils,c=this._min,d=this._max,p="",g="",f=t.Translations,_=null,m=e?this._converter.format(e):e;if(null===e)return e;if(m=this._converter.format(e),c&&(c=h._minMaxIsoString(c,e),n=this._converter?this._converter.format(c):c),d&&(d=h._minMaxIsoString(d,e),i=this._converter?this._converter.format(d):d),null!==c&&null!==d){if(this._converter.compareISODates(e,c)>=0&&this._converter.compareISODates(e,d)<=0||this._converter.compareISODates(c,d)>0)return e}else if(null!==c){if(this._converter.compareISODates(e,c)>=0)return e}else if(null===d||this._converter.compareISODates(e,d)<=0)return e;throw null!==d&&this._converter.compareISODates(e,d)>0?(_={value:m,max:i},p=l?l:f.getTranslatedString("oj-validator.range.datetime.messageSummary.rangeOverflow"),g=a?f.applyParameters(a,_):f.getTranslatedString("oj-validator.range.datetime.messageDetail.rangeOverflow",_)):null!==c&&this._converter.compareISODates(e,c)<0&&(_={value:m,min:n},p=u?u:f.getTranslatedString("oj-validator.range.datetime.messageSummary.rangeUnderflow"),g=s?f.applyParameters(s,_):f.getTranslatedString("oj-validator.range.datetime.messageDetail.rangeUnderflow",_)),new t.ValidatorError(p,g)},t.DateTimeRangeValidator.prototype.getHint=function(){var e=null,n=this._hint,i=n.inRange,r=n.min,o=n.max,a=this._min,s=this._max,l=a&&this._converter?this._converter.format(a):a,u=s&&this._converter?this._converter.format(s):s,h=null,c=t.Translations;return null!==a&&null!==s?(h={min:l,max:u},e=i?c.applyParameters(i,h):c.getTranslatedString("oj-validator.range.datetime.hint.inRange",h)):null!==a?(h={min:l},e=r?c.applyParameters(r,h):c.getTranslatedString("oj-validator.range.datetime.hint.min",h)):null!==s&&(h={max:u},e=o?c.applyParameters(o,h):c.getTranslatedString("oj-validator.range.datetime.hint.max",h)),e},t.NumberConverterFactory=function(){function e(e){return new t.IntlNumberConverter(e)}return{createConverter:function(t){return e(t)}}}(),t.Validation.__registerDefaultConverterFactory(t.ConverterFactory.CONVERTER_TYPE_NUMBER,t.NumberConverterFactory),t.DateTimeConverterFactory=function(){function e(e){return new t.IntlDateTimeConverter(e)}return{createConverter:function(t){return e(t)}}}(),t.Validation.__registerDefaultConverterFactory(t.ConverterFactory.CONVERTER_TYPE_DATETIME,t.DateTimeConverterFactory),t.RequiredValidatorFactory=function(){function e(e){return new t.RequiredValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REQUIRED,t.RequiredValidatorFactory),t.RegExpValidatorFactory=function(){function e(e){return new t.RegExpValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REGEXP,t.RegExpValidatorFactory),t.DateTimeRangeValidatorFactory=function(){function e(e){return new t.DateTimeRangeValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE,t.DateTimeRangeValidatorFactory),t.DateRestrictionValidatorFactory=function(){function e(e){return new t.DateRestrictionValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_DATERESTRICTION,t.DateRestrictionValidatorFactory),t.NumberRangeValidatorFactory=function(){function e(e){return new t.NumberRangeValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE,t.NumberRangeValidatorFactory),t.LengthValidatorFactory=function(){function e(e){return new t.LengthValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_LENGTH,t.LengthValidatorFactory);var i={};i.numeringSystems={latn:"0123456789",arab:"",thai:""},i.regexTrim=/^\s+|\s+$|\u200f|\u200e/g,i.regexTrimNumber=/\s+|\u200f|\u200e/g,i.regexTrimRightZeros=/0+$/g,i.zeros=["0","00","000"],i._ISO_DATE_REGEXP=/^\d{4}(?:-?\d{2}(?:-?\d{2})?)?(?:T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,i.getLocalTimeZoneOffset=function(){var t=new Date,e=t.getTimezoneOffset();return i.getTimeStringFromOffset("Etc/GMT",e,!1,!1)},i._getTimeZone=function(t){if(!t||"string"!=typeof t)return null;var e=i._ISO_DATE_REGEXP.exec(t);return null===e&&i._throwInvalidISOString(t),void 0!==e[1]?e[1]:null},i.dateToLocalIso=function(t){var e=i.padZeros(t.getFullYear(),4)+"-"+i.padZeros(t.getMonth()+1,2)+"-"+i.padZeros(t.getDate(),2)+"T"+i.padZeros(t.getHours(),2)+":"+i.padZeros(t.getMinutes(),2)+":"+i.padZeros(t.getSeconds(),2);return t.getMilliseconds()>0&&(e+="."+i.trimRightZeros(i.padZeros(t.getMilliseconds(),3))),e},i.partsToIsoString=function(t){var e=i.padZeros(t[0],4)+"-"+i.padZeros(t[1],2)+"-"+i.padZeros(t[2],2)+"T"+i.padZeros(t[3],2)+":"+i.padZeros(t[4],2)+":"+i.padZeros(t[5],2);return t[6]>0&&(e+="."+i.trimRightZeros(i.padZeros(t[6],3))),e},i.isoToLocalDate=function(t){return t&&"string"==typeof t?this._isoToLocalDateIgnoreTimezone(t):null},i._isoToLocalDateIgnoreTimezone=function(t){var e=i._IsoStrParts(t);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],e[6])},i._IsoStrParts=function(t){var e,n=t.split("T"),r=t.indexOf("T"),o=new Date,a=[o.getFullYear(),o.getMonth()+1,o.getDate(),0,0,0,0];if(""!==n[0]){var s=n[0].split("-");for(e=0;e<s.length;e++)a[e]=parseInt(s[e],10)}if(r!==-1){var l=n[1].split("."),u=l[0].split(":");for(e=0;e<u.length;e++)a[3+e]=parseInt(u[e],10);2===l.length&&l[1]&&(a[6]=parseInt(i.zeroPad(l[1],3,!1),10))}return a},i.getISOStrFormatInfo=function(t){var e={format:null,dateTime:null,timeZone:"",isoStrParts:null},n=i._ISO_DATE_REGEXP.exec(t);return null===n&&i._throwInvalidISOString(t),void 0===n[1]&&void 0===n[2]?(e.format="local",e.dateTime=t,e.isoStrParts=i._IsoStrParts(e.dateTime),e):(e.timeZone=void 0!==n[1]?n[1]:n[2],"Z"===e.timeZone?e.format="zulu":e.format="offset",e.dateTime=t.substring(0,t.indexOf(e.timeZone)),e.isoStrParts=i._IsoStrParts(e.dateTime),e)},i._throwTimeZoneNotSupported=function(){var t,e,n;throw t="time zone is not supported",e=new Error(t),n={errorCode:"timeZoneNotSupported"},e.errorInfo=n,e},i._throwInvalidISOString=function(t){var e,n,i;throw e="The string "+t+" is not a valid ISO 8601 string.",n=new Error(e),i={errorCode:"invalidISOString",parameterMap:{isoStr:t}},n.errorInfo=i,n},i.trim=function(t){return(t+"").replace(i.regexTrim,"")},i.trimRightZeros=function(t){return(t+"").replace(i.regexTrimRightZeros,"")},i.trimNumber=function(t){var e=(t+"").replace(i.regexTrimNumber,"");return e},i.startsWith=function(t,e){return 0===t.indexOf(e)},i.toUpper=function(t){return t.split("").join(" ").toUpperCase()},i.padZeros=function(t,e){var n,r=t+"";return e>1&&r.length<e?(n=i.zeros[e-2]+r,n.substr(n.length-e,e)):n=r},i.zeroPad=function(t,e,n){t=""+t;var i;for(i=t.length;i<e;i+=1)t=n?"0"+t:t+"0";return t},i.getTimeStringFromOffset=function(t,e,n,r){var o=n?e>=0:e<0;e=Math.abs(e);var a=e/60<<0,s=e%60,l=o?"-":"+";r&&(a=i.zeroPad(a,2,!0));var u=t+l+a;return(s>0||r)&&(u+=":"+i.zeroPad(s,2,!0)),u},i.getNumberingSystemKey=function(t,e){if(void 0===e)return"latn";var n=i.getNumberingExtension(e),r="symbols-numberSystem-"+n;return void 0===t.numbers[r]&&(n="latn"),n},i.getBCP47Lang=function(t){var e=t.split("-");return e[0]},i.getBCP47Region=function(t){var e=t.split("-");return 3===e.length?e[2]:2===e.length&&2===e[1].length?e[1]:"001"},i.getNumberingExtension=function(t){t=t||"en-US";var e=t.indexOf("-u-nu-"),n="latn";return e!==-1&&(n=t.substr(e+6,4)),n},i.haveSamePropertiesLength=function(t){var e=0;for(var n in t)e++;return e},i.getLocaleElementsMainNode=function(t){var e,n=t.main;for(var i in n){e=i;break}return n[e]},i.getLocaleElementsMainNodeKey=function(t){var e,n=t.main;for(var i in n){e=i;break}return e},i._toBoolean=function(t){if("string"==typeof t){var e=t.toLowerCase().trim();switch(e){case"true":case"1":return!0;case"false":case"0":return!1;default:return t}}return t},i.getGetOption=function(t,e){if(void 0===t)throw new Error("Internal "+e+" error. Default options missing.");var n=function(n,r,o,a){if(void 0!==t[n]){var s=t[n];switch(r){case"boolean":s=i._toBoolean(s);break;case"string":s=String(s);break;case"number":s=Number(s);break;default:throw new Error("Internal error. Wrong value type.")}if(void 0!==o&&o.indexOf(s)===-1){for(var l=[],u=0;u<o.length;u++)l.push(o[u]);var h="The value '"+t[n]+"' is out of range for '"+e+"' options property '"+n+"'. Valid values: "+l,c=new RangeError(h),d={errorCode:"optionOutOfRange",parameterMap:{propertyName:n,propertyValue:t[n],propertyValueValid:l,caller:e}};throw c.errorInfo=d,c}return s}return a};return n},i.matchString=function(t,e,n,r){void 0===r&&(r={sensitivity:"base",usage:"sort"});var o=i.getGetOption(r,"OraI18nUtils.matchString");r.usage=o("usage","string",["sort","search"],"sort"),r.sensitivity=o("sensitivity","string",["base","accent","case","variant"],"base");var a,s,l=t.length,u=e.length-1;for(a=0;a<l;a++)for(s=0;s<3;s++){var h=l-a;h=Math.min(h,u+s);var c=t.substr(a,h),d=c.localeCompare(e,n,r);if(0===d){var p=a+h-1,g=[a,p];return g}}return null};var r="T00:00:00.000",o={fullYear:{pos:0,pad:4},month:{pos:1,pad:2},date:{pos:2,pad:2},hours:{pos:3,pad:2},minutes:{pos:4,pad:2},seconds:{pos:5,pad:2},milliseconds:{pos:6,pad:3},timeZone:{pos:7}};i.isoToDate=function(t){return new Date(this._normalizeIsoString(t))},i._copyTimeOver=function(t,e){if(!t||!e)throw new Error("Provided invalid arguments");e=this._normalizeIsoString(e);var n=t.indexOf("T"),i=e.indexOf("T"),o=e.substring(0,i),a=n!==-1?t.substring(n):r;return o+a},i._clearTime=function(t){return this._dateTime(t,{hours:0,minutes:0,seconds:0,milliseconds:0})},i._dateTime=function(t,n,i){if(!t||!n)throw new Error("Invalid argument invocation");var r,a,s,l=null,u=null,h=o,c=this.padZeros,d=this._normalizeIsoString(t),p=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):?(\d{2})?\.?(\d{3})?(.*)?/.exec(d);if(!p)throw new Error("Unable to capture anything");if(p=p.slice(1),Array.isArray(n)){l={};for(var g=0,f=n.length;g<f;g++)if(u=n[g],u in h){if(r=h[u].pos,a=p[r],i&&"timeZone"===u)throw new Error("Dude you tried to ask timezone to be parsed");if(i){var _=parseInt(a,10);l[u]=1===r?_-1:_}else l[u]=a}}else if(e.isPlainObject(n)){for(var m in n)s=h[m],r=s.pos,a=n[m],1===r&&"number"==typeof a&&a++,p[r]=s.pad?c(a,s.pad):a;l=p[0]+"-"+p[1]+"-"+p[2]+"T"+p[3]+":"+p[4]+":"+p[5]+(p.length>6&&p[6]?"."+p[6]+(8===p.length&&p[7]?p[7]:""):"")}return l},i._normalizeIsoString=function(t){if(!t)throw new Error("Provided invalid arguments");var e=function(t){var e=t.split(":");return e.length>1?t:t+":00"},n=(new Date).toISOString(),i=n.substring(0,n.indexOf("T")),o=t.indexOf("T"),a=o===-1?t:t.substring(0,o),s=o!==-1?e(t.substring(o)):r;return a=a||i,a+s},i.formatHM=function(t){return t=t.replace(/\'[^']*\'/g,"").replace(/[^hHma]*/g,""),t=t.replace(/(h|H)+/,"h").replace(/m+/,"m")},i.extractHourCode=function(t,e){var n,i;return"h"===t?(n=e.match(/([hH]+)/),i=n[1]):"m"===t&&(n=e.match(/(m+)/),i=n[1]),i},i.hFormat=function(t){return 0===t?"12":""+t},i.hhFormat=function(t){if(0===t)return"12";var e="0"+t;return e.slice(-2)},i.HFormat=function(t){return""+t},i.HHFormat=function(t){var e="0"+t;return e.slice(-2)},i.mmFormat=function(t){var e="0"+t;return e.slice(-2)},i.ampmFormat=function(t){return["AM","PM"][t]},i.FORMAT_MAP={h:i.hFormat,hh:i.hhFormat,H:i.HFormat,HH:i.HHFormat,mm:i.mmFormat},i.numberParser=function(t){return t.match(/^\d+$/)?parseInt(t,10):-1},i.hour12Parser=function(t){if(t.match(/^\d+$/)){var e=parseInt(t,10);return 0===e&&(e=-1),12===e&&(e=0),e}return-1},i.ampmParser=function(t){return t=t.toLowerCase().charAt(0),"a"===t?0:"p"===t?1:-1},i.PARSER_MAP={h:i.hour12Parser,hh:i.hour12Parser,H:i.numberParser,HH:i.numberParser,mm:i.numberParser},i.isoToMinutes=function(t){var e=i.isoToLocalDate(t),n=e.getHours(),r=e.getMinutes();return 60*n+r},i.minutesToIso=function(t){t=Math.floor(t);var e=Math.floor(t/60);return t%=60,"T"+i.HHFormat(e)+":"+i.mmFormat(t)},t.IntlDateTimeConverter=function(t){this.Init(t)},t.Object.createSubclass(t.IntlDateTimeConverter,t.DateTimeConverter,"oj.IntlDateTimeConverter"),t.IntlDateTimeConverter._DEFAULT_DATE=new Date(1998,10,29,15,45,31),t.IntlDateTimeConverter.prototype.Init=function(e){t.IntlDateTimeConverter.superclass.Init.call(this,e)},t.IntlDateTimeConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=l.getInstance()),this._wrapped},t.IntlDateTimeConverter.prototype.format=function(e){var n,i=t.LocaleData.__getBundle(),r=t.Config.getLocale(),o=this.resolvedOptions();if(null==e||"string"==typeof e&&0===t.StringUtils.trim(""+e).length)return t.IntlConverterUtils.__getNullFormattedValue();try{return this._getWrapped().format(e,i,o,r)}catch(a){throw n=this._processConverterError(a,e)}},t.IntlDateTimeConverter.prototype.formatRelative=function(e,n){var i,r=t.LocaleData.__getBundle(),o=t.Config.getLocale();try{return this._getWrapped().formatRelative(e,r,n,o)}catch(a){throw i=this._processConverterError(a,e)}},t.IntlDateTimeConverter.prototype.getHint=function(){var t=this.resolvedOptions(),e=t.patternFromOptions||this.getOptions().pattern;return e?e.toLowerCase():""},t.IntlDateTimeConverter.prototype._getHintValue=function(){var e="";try{e=this.format(t.IntlConverterUtils.dateToLocalIso(t.IntlDateTimeConverter._DEFAULT_DATE))}catch(n){n instanceof t.ConverterError&&(e="")}finally{return e}},t.IntlDateTimeConverter.prototype.getOptions=function(){return t.IntlDateTimeConverter.superclass.getOptions.call(this)},t.IntlDateTimeConverter.prototype.resolvedOptions=function(){var e,n,i=t.Config.getLocale(),r=this.getOptions();if(i!==this._locale||!this._resolvedOptions){e=t.LocaleData.__getBundle();try{if(!e)return t.Logger.error("locale bundle for the current locale %s is unavailable",i),{};this._resolvedOptions=this._getWrapped().resolvedOptions(e,r,i),this._locale=i}catch(o){throw n=this._processConverterError(o)}}return this._resolvedOptions},t.IntlDateTimeConverter.prototype.isHourInDaySet=function(){var t=this.resolvedOptions(),e=t.hour,n=t.hour12;return!(!e||n)},t.IntlDateTimeConverter.prototype.isHourInAMPMSet=function(){var t=this.resolvedOptions(),e=t.hour,n=t.hour12;return!(!e||!n)},t.IntlDateTimeConverter.prototype.isMinuteSet=function(){return this._isOptionSet("minute")},t.IntlDateTimeConverter.prototype.isSecondSet=function(){return this._isOptionSet("second")},t.IntlDateTimeConverter.prototype.isMilliSecondSet=function(){return this._isOptionSet("millisecond")},t.IntlDateTimeConverter.prototype.isYearSet=function(){return this._isOptionSet("year")},t.IntlDateTimeConverter.prototype.isMonthSet=function(){return this._isOptionSet("month")},t.IntlDateTimeConverter.prototype.isDaySet=function(){return this._isOptionSet("day")},t.IntlDateTimeConverter.prototype.isDayNameSet=function(){return this._isOptionSet("weekday")},t.IntlDateTimeConverter.prototype.calculateWeek=function(e){return this._getWrapped().calculateWeek(e,t.LocaleData.__getBundle(),t.Config.getLocale())},t.IntlDateTimeConverter.prototype.parse=function(e){var n,i;if(null==e||""===e)return null;var r,o=t.LocaleData.__getBundle(),a=t.Config.getLocale(),s=this.resolvedOptions();try{return n=this._getWrapped().parse(e,o,s,a),i=n.value,i&&n.warning&&t.Logger.warn("The value "+e+" was leniently parsed to represent a date "+i.toString?i.toString():i),i}catch(l){throw r=this._processConverterError(l,e)}},t.IntlDateTimeConverter.prototype.compareISODates=function(e,n){var i=t.StringUtils.isString;if(!i(e)||!i(n))throw new Error("Invalid arguments for compareISODates ",e,n);return this._getWrapped().compareISODates(e,n,t.LocaleData.__getBundle())},t.IntlDateTimeConverter.prototype._processConverterError=function(e,n){var i,r,o,a,s,l,u,h=e.errorInfo;return h&&(o=h.errorCode,a=h.parameterMap||{},t.Assert.assertObject(a),l=a.propertyName,e instanceof TypeError?"optionTypesMismatch"!==o&&"optionTypeInvalid"!==o||(s=t.IntlConverterUtils.__getConverterOptionError(o,a)):e instanceof RangeError?"optionOutOfRange"===o?s=t.IntlConverterUtils.__getConverterOptionError(o,a):"datetimeOutOfRange"===o&&(i=t.Translations.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.summary",{propertyName:l,value:a.value}),r=t.Translations.getTranslatedString("oj-converter.datetime.datetimeOutOfRange.detail",{minValue:a.minValue,maxValue:a.maxValue}),s=new t.ConverterError(i,r)):e instanceof SyntaxError?"optionValueInvalid"===o&&(s=t.IntlConverterUtils.__getConverterOptionError(o,a)):e instanceof Error&&("dateFormatMismatch"===o?u="oj-converter.datetime.dateFormatMismatch.summary":"timeFormatMismatch"===o?u="oj-converter.datetime.timeFormatMismatch.summary":"datetimeFormatMismatch"===o?u="oj-converter.datetime.datetimeFormatMismatch.summary":"invalidTimeZoneID"===o?(i=t.Translations.getTranslatedString("oj-converter.datetime.invalidTimeZoneID.summary",{timeZoneID:a.timeZoneID}),r=t.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),s=new t.ConverterError(i,r)):"nonExistingTime"===o?u="oj-converter.datetime.nonExistingTime.summary":"missingTimeZoneData"===o?u="oj-converter.datetime.missingTimeZoneData.summary":"dateToWeekdayMismatch"===o&&(i=t.Translations.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.summary",{date:a.date,weekday:a.weekday}),r=t.Translations.getTranslatedString("oj-converter.datetime.dateToWeekdayMismatch.detail"),s=new t.ConverterError(i,r)),u&&(i=t.Translations.getTranslatedString(u,{value:n||a.value,format:a.format}),r=t.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),s=new t.ConverterError(i,r)))),s||(i=e.message,r=e.message,s=new t.ConverterError(i,r)),s},t.IntlDateTimeConverter.prototype._isOptionSet=function(t){var e=this.resolvedOptions(),n=!!e[t];return n},t.NumberRangeValidator=function(t){this.Init(t)},t.Object.createSubclass(t.NumberRangeValidator,t.Validator,"oj.NumberRangeValidator"),t.NumberRangeValidator.prototype.Init=function(e){t.NumberRangeValidator.superclass.Init.call(this),e&&(this._min=e.min,this._max=e.max,this._converter=t.IntlConverterUtils.getConverterInstance(e.converter),this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},t.NumberRangeValidator.prototype.validate=function(e){var n=e?e.toString():e,i=parseFloat(n),r=this._customMessageSummary,o=this._customMessageDetail,a=o.rangeOverflow,s=o.rangeUnderflow,l=r.rangeOverflow,u=r.rangeUnderflow,h=void 0!==this._min?parseFloat(this._min):null,c=void 0!==this._max?parseFloat(this._max):null,d=h&&this._converter?this._converter.format(h):h,p=c&&this._converter?this._converter.format(c):c,g="",f="",_=null,m=t.Translations;if(null===e)return e;if(null!==h&&null!==c){if(i>=h&&i<=c||h>c)return n}else if(null!==h){if(i>=h)return n}else if(null===c||i<=c)return n;throw null!==c&&i>c?(_={value:e,max:p},g=l?l:m.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"),f=a?m.applyParameters(a,_):m.getTranslatedString("oj-validator.range.number.messageDetail.rangeOverflow",_)):null!==h&&i<h&&(_={value:e,min:d},g=u?u:m.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"),f=s?m.applyParameters(s,_):m.getTranslatedString("oj-validator.range.number.messageDetail.rangeUnderflow",_)),new t.ValidatorError(g,f)},t.NumberRangeValidator.prototype.getHint=function(){var e=null,n=this._hint,i=n.inRange,r=n.min,o=n.max,a=t.Translations,s=void 0!==this._min?parseFloat(this._min):null,l=void 0!==this._max?parseFloat(this._max):null,u=s&&this._converter?this._converter.format(s):s,h=l&&this._converter?this._converter.format(l):l;return null!==s&&null!==l?e=i?a.applyParameters(i,{min:u,max:h}):a.getTranslatedString("oj-validator.range.number.hint.inRange",{min:u,max:h}):null!==s?e=r?a.applyParameters(r,{min:u}):a.getTranslatedString("oj-validator.range.number.hint.min",{min:u}):null!==l&&(e=o?a.applyParameters(o,{max:h}):a.getTranslatedString("oj-validator.range.number.hint.max",{max:h})),e},t.IntlNumberConverter=function(t){this.Init(t)},t.Object.createSubclass(t.IntlNumberConverter,t.NumberConverter,"oj.IntlNumberConverter"),t.IntlNumberConverter.prototype.Init=function(e){t.IntlNumberConverter.superclass.Init.call(this,e)},t.IntlNumberConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=s.getInstance()),this._wrapped},t.IntlNumberConverter.prototype.format=function(e){var n,i,r,o;if(null==e||"string"==typeof e&&0===t.StringUtils.trim(""+e).length||"number"==typeof e&&isNaN(e))return t.IntlConverterUtils.__getNullFormattedValue();i=t.Config.getLocale(),r=t.LocaleData.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().format(e,r,o,i)}catch(a){throw n=this._processConverterError(a,e)}},t.IntlNumberConverter.prototype.getHint=function(){return null},t.IntlNumberConverter.prototype.getOptions=function(){return t.IntlNumberConverter.superclass.getOptions.call(this)},t.IntlNumberConverter.prototype.parse=function(e){var n,i,r,o;if(null==e||""===e)return null;i=t.Config.getLocale(),r=t.LocaleData.__getBundle(),o=this.resolvedOptions();try{return this._getWrapped().parse(t.StringUtils.trim(e),r,o,i)}catch(a){throw n=this._processConverterError(a,e)}},t.IntlNumberConverter.prototype.resolvedOptions=function(){var e,n,i=t.Config.getLocale();if(i!==this._locale||!this._resolvedOptions){n=t.LocaleData.__getBundle();try{if(!n)return t.Logger.error("locale bundle for the current locale %s is unavailable",i),{};this._resolvedOptions=this._getWrapped().resolvedOptions(n,this.getOptions(),i),this._locale=i}catch(r){throw e=this._processConverterError(r)}}return this._resolvedOptions;
},t.IntlNumberConverter.prototype._processConverterError=function(e,n){var i,r,o,a,s,l,u,h=e.errorInfo;if(h){switch(r=h.errorCode,a=h.parameterMap,t.Assert.assertObject(a),s=a.propertyName,r){case"optionTypesMismatch":case"optionTypeInvalid":i=t.IntlConverterUtils.__getConverterOptionError(r,a);break;case"optionOutOfRange":i=t.IntlConverterUtils.__getConverterOptionError(r,a);break;case"optionValueInvalid":i=t.IntlConverterUtils.__getConverterOptionError(r,a);break;case"decimalFormatMismatch":l="oj-converter.number.decimalFormatMismatch.summary";break;case"currencyFormatMismatch":l="oj-converter.number.currencyFormatMismatch.summary";break;case"percentFormatMismatch":l="oj-converter.number.percentFormatMismatch.summary";break;case"unsupportedParseFormat":u=t.Translations.getTranslatedString("oj-converter.number.decimalFormatUnsupportedParse.summary"),o=t.Translations.getTranslatedString("oj-converter.number.decimalFormatUnsupportedParse.detail"),i=new t.ConverterError(u,o)}l&&(u=t.Translations.getTranslatedString(l,{value:n||a.value,format:a.format}),o=t.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),i=new t.ConverterError(u,o))}return i||(u=e.message,o=e.message,i=new t.ConverterError(u,o)),i},t.IntlNumberConverter.prototype._getHintValue=function(){var e="";try{e=this.format(12345.98765)}catch(n){n instanceof t.ConverterError&&(e="",t.Logger.error("error retrieving hint value in format"))}finally{return e}};var a;a=function(){function t(t,e){var n=e.zones[t];if(v.test(t)){var i,r=0,o=t.replace(v,""),a=o.split(":");if(i=60*parseInt(a[0],10),isNaN(i))return;if(2===a.length&&(r=parseInt(a[1],10),isNaN(r)))return;if(i+=i>=0?r:-r,i<b||i>E)return;i=u(i,1);var s=t.replace("/etc//i","").toUpperCase();n=s+"|"+i+"|0|"}void 0!==n&&this._set(l(t,n))}function e(){return{getZone:function(t,e){var n=e.supplemental.timeZoneData;void 0===n&&_();var i=d(t,n);if(!i){var r=n.links[t];r&&(i=d(r,n))}return i||g(t),i}}}var n,i,r,o,a,s,l,u,h,c,d,p,g,f,_,m={},v=/^Etc\/GMT/i,y=1e3,S=60*y,C=60*S,b=-840,E=720,T="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX",A=1e-6;return h=function(t,e){for(var n,i=".",r="";e>0;)e-=1,t*=60,n=Math.floor(t+A),i+=T[n],t-=n,n&&(r+=i,i="");return r},u=function(t,e){for(var n="",i=Math.abs(t),r=Math.floor(i),o=h(i-r,Math.min(~~e,10));r>0;)n=T[r%60]+n,r=Math.floor(r/60);return t<0&&(n="-"+n),n&&o?n+o:o||"-"!==n?n||o||"0":"0"},i=function(t){return t>96?t-87:t>64?t-29:t-48},r=function(t){var e,n=0,r=t.split("."),o=r[0],a=r[1]||"",s=1,l=0,u=1;for(45===t.charCodeAt(0)&&(n=1,u=-1);n<o.length;n++)e=i(o.charCodeAt(n)),l=60*l+e;for(n=0;n<a.length;n++)s/=60,e=i(a.charCodeAt(n)),l+=e*s;return l*u},o=function(t){for(var e=0;e<t.length;e++)t[e]=r(t[e])},a=function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+t[n]*S);t[e-1]=1/0},s=function(t,e){var n,i=[];for(n=0;n<e.length;n++)i[n]=t[e[n]];return i},l=function(t,e){var n=e.split("|"),i=n[1].split(" "),r=n[2].split(""),l=n[3].split(" ");return o(i),o(r),o(l),a(l,r.length),{name:t,abbrs:s(n[0].split(" "),r),offsets:s(i,r),untils:l}},g=function(t){var e,n,i;throw e="invalid timeZone ID: "+t,n=new Error(e),i={errorCode:"invalidTimeZoneID",parameterMap:{timeZoneID:t}},n.errorInfo=i,n},f=function(){var t,e,n;throw t="The input time does not exist because it falls during the transition to daylight saving time.",e=new Error(t),n={errorCode:"nonExistingTime"},e.errorInfo=n,e},_=function(){var t,e,n;throw t="TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data.",e=new Error(t),n={errorCode:"missingTimeZoneData"},e.errorInfo=n,e},t.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets},parse:function(t,e,n,i){var r,o,a,s,l,u,h,c=this.offsets,d=this.untils,p=d.length-1;for(a=0;a<p;a++){if(r=c[a],o=c[a+1],h=d[a],s=h-r*S,l=s+C,u=s-C,t>=s&&t<l&&r>o){if(i!==!0)return a+1;f()}if(t>=u&&t<s&&r<o)return e?a:a+1;if(t<h-r*S)return n===!1?e?r<o?a:a+1:r<o?a+1:a:a}return p},abbr:function(t){return this.abbrs[t]},ofset:function(t){var e=this.offsets.length;return t>=0&&t<e?parseInt(this.offsets[t],10):parseInt(this.offsets[e-1],10)},len:function(){return this.offsets.length}},c=function(t){return(t||"").toLowerCase().replace(/\//g,"_")},p=function(e,n){var i,r;i=new t(e,n),r=c(i.name),m[r]=i},d=function(t,e){var n=c(t);return void 0===m[n]&&p(t,e),m[c(t)]||null},{getInstance:function(){return n||(n=e()),n}}}();var s;s=function(){function t(){return{format:function(t,e,i,r){(arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),p(i,"OraNumberConverter.format");var o={};return d(e,o,i,r),n(t,i,e,o,r)},parse:function(t,e,n,i){return"number"==typeof t?t:"[object Number]"===Object.prototype.toString.call(t)?Number(t):((arguments.length<=2||void 0===n)&&(n={useGrouping:!0,style:"decimal"}),p(n,"OraNumberConverter.parse"),r(t,e,n,i))},resolvedOptions:function(t,e,n){(arguments.length<3||void 0===n)&&(n=i.getLocaleElementsMainNodeKey(t)),(arguments.length<2||void 0===e)&&(e={useGrouping:!0,style:"decimal"});var r=N(t,e,n);return k(r,e,n)}}}var e,n,r,o,a,s,l,u,h,c,d,p,g,f,_,m,v,y,S,C,b,E,T,A,x,I,O,M,D,P,w,R,L,N,k,U=/^[+\-]?infinity$/i,B=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,F=/([^+-.0-9]*)([+\-]?\d*\.?\d*(E[+\-]?\d+)?).*$/,H=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,j=/(^0\.0*)([^0].*$)/,G={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},V={trillion:1e12,billion:1e9,million:1e6,thousand:1e3},Y={HALF_UP:"ceil",HALF_DOWN:"floor",DEFAULT:"round"};e=function(t,e,n){var i;for(i=t.length;i<e;i+=1)t=n?"0"+t:t+"0";return t},v=function(t,e,n,i){var r=t+" is out of range.  Enter a value between "+e+" and "+n+" for "+i,o=new RangeError(r),a={errorCode:"numberOptionOutOfRange",parameterMap:{value:t,minValue:e,maxValue:n,propertyName:i}};throw o.errorInfo=a,o},b=function(t,e,n,i,r){var o=t[e];return void 0!==o?(o=Number(o),(isNaN(o)||o<n||o>i)&&v(o,n,i,e),Math.floor(o)):r},_=function(t,e){if(void 0===e)return"latn";var n=E(e),i="symbols-numberSystem-"+n;return void 0===t.numbers[i]&&(n="latn"),n},m=function(t){var e=t.split("-");return e[0]},E=function(t){t=t||"en-US";var e=t.indexOf("-u-nu-"),n="latn";return e!==-1&&(n=t.substr(e+6,4)),n},d=function(t,e,n,r){var o,a=i.getLocaleElementsMainNode(t),s=_(a,r);if(e.numberingSystemKey=s,e.numberingSystem="symbols-numberSystem-"+s,void 0!==n.pattern&&n.pattern.length>0)o=n.pattern;else{var u;switch(n.style){case"decimal":u="decimalFormats-numberSystem-";break;case"currency":u="currencyFormats-numberSystem-";break;case"percent":u="percentFormats-numberSystem-";break;default:u="decimalFormats-numberSystem-"}u+=e.numberingSystemKey,o=a.numbers[u].standard;var h=n.decimalFormat;void 0!==h&&"decimal"===n.style&&(e.shortDecimalFormat=a.numbers["decimalFormats-numberSystem-latn"][h].decimalFormat)}var c=i.getLocaleElementsMainNodeKey(t),d=m(c);e.plurals=t.supplemental.plurals,e.lang=d,e.pat=o,e.minusSign=a.numbers[e.numberingSystem].minusSign,e.decimalSeparator=a.numbers[e.numberingSystem].decimal,e.exponential=a.numbers[e.numberingSystem].exponential,e.groupingSeparator=a.numbers[e.numberingSystem].group,e.currencyDisplay=n.currencyDisplay,void 0!==n.currency&&(e.currencyCode=n.currency.toUpperCase()),e.style=n.style,l(n,o,a,e),void 0===n.pattern&&(e.minimumIntegerDigits=b(n,"minimumIntegerDigits",1,21,e.minimumIntegerDigits),void 0!==n.maximumFractionDigits&&(e.maximumFractionDigits=b(n,"maximumFractionDigits",0,20,e.maximumFractionDigits),e.maximumFractionDigits<e.minimumFractionDigits&&(e.minimumFractionDigits=e.maximumFractionDigits)),void 0!==n.minimumFractionDigits&&(e.minimumFractionDigits=b(n,"minimumFractionDigits",0,20,e.minimumFractionDigits)),e.maximumFractionDigits<e.minimumFractionDigits&&(e.maximumFractionDigits=e.minimumFractionDigits))},f=function(t){var e=new TypeError('The property "currency" is required whenthe property "'+t+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.'),n={errorCode:"optionTypesMismatch",parameterMap:{propertyName:t,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}};throw e.errorInfo=n,e},x=function(){var t,e,n="unsupportedParseFormat",i="long and short decimalFormats are not supported for parsing";throw t=new Error(i),e={errorCode:n,parameterMap:{value:"decimal"}},t.errorInfo=e,t},p=function(t,e){var n=i.getGetOption(t,e),r=n("style","string",["currency","decimal","percent","perMill"],"decimal");"decimal"===r&&(r=n("decimalFormat","string",["standard","short","long"]),"OraNumberConverter.parse"===e&&void 0!==r&&"standard"!==r&&x());var o=n("currency","string");"currency"===r&&void 0===o&&f("style");n("roundingMode","string",["HALF_UP","HALF_DOWN","HALF_EVEN"],"DEFAULT")},M=function(t,e,n){function i(t){var e=0,n=0,i=0,r="";if("0"!==t[0]){for(;"0"!==t[e]&&e<t.length;)e++;r=t.substr(0,e),i=e}for(e=i;e<t.length&&"0"===t[e];e++)n++;return[r,n]}function r(t){var e,n,i;for(e in G)for(i=G[e].length,n=0;n<i;n++)if(G[e][n]<=t)return[e,G[e][n]];return[t,null]}var o=r(t),a="";if(null!==o[1]){var s=n.lang,l=n.plurals[s](Math.floor(t/V[o[0]])),u=""+o[1]+"-count-"+l;u=n.shortDecimalFormat[u],void 0===u&&(l="other",u=""+o[1]+"-count-"+l,u=n.shortDecimalFormat[u]);var h=i(u),c=h[1];if(a=h[0],c<u.length){var d=1*Math.pow(10,c);d=o[1]/d*10,t/=d}}var p,g="";return void 0!==u&&(g=u.substr(c+h[0].length)),p=I(t,e,n),g=a+p+g},O=function(t,n){var i=t+"",r=0,o=i.split(/e/i),a=o[0];j.lastIndex=0;var s=j.exec(a);null!==s?(r=s[1].length-1,a=s[2]):a=a.replace(".","");var l=o.length>1?parseInt(o[1],10):0,u=parseInt(a,10),h=n.minimumIntegerDigits+n.maximumFractionDigits;if(a.length>h){h-=a.length;var c=Math.pow(10,h);u=Math.round(u*c)}var d=n.minimumIntegerDigits+n.minimumFractionDigits;u+="",u=e(u,d,!1),l-=i.indexOf(".")!==-1?n.minimumIntegerDigits-i.indexOf(".")+r:d-a.length-n.minimumFractionDigits;var p=Math.abs(l);p=e(p+"",n.minExponentDigits,!0),l<0&&(p=n.minusSign+p);var g=u.slice(0,n.minimumIntegerDigits),f=u.slice(n.minimumIntegerDigits);return g+=f.length>0?n.decimalSeparator+u.slice(n.minimumIntegerDigits)+n.exponential+p:n.exponential+p},I=function(t,n,i){var r=i.groupingSize,o=i.groupingSize0,a=t+"",s=a.split(/e/i),l=s.length>1?parseInt(s[1],10):0;a=s[0],s=a.split(".");var u=s.length>1?s[1]:"";if(s.length>1&&u.length>l){var h=Math.min(i.maximumFractionDigits,u.length-l),c=n.roundingMode||"DEFAULT";t=y(t,h,c)}a=t+"",s=a.split(/e/i),l=s.length>1?parseInt(s[1],10):0,a=s[0],s=a.split("."),a=s[0],u=s.length>1?s[1]:"",l>0?(u=e(u,l,!1),a+=u.slice(0,l),u=u.substr(l)):l<0&&(l=-l,a=e(a,l+1,!0),u=a.slice(-l,a.length)+u,a=a.slice(0,-l)),u=h>0?i.decimalSeparator+(u.length>h?u.slice(0,h):e(u,h,!1)):i.minimumFractionDigits>0?i.decimalSeparator:"";var d=i.decimalSeparator.length+i.minimumFractionDigits;u=e(u,d,!1);var p=i.groupingSeparator,g="";n.useGrouping===!1&&void 0===n.pattern&&(p=""),a=e(a,i.minimumIntegerDigits,!0);var f=a.length-1;u=u.length>1?u:"";for(var _;f>=0;){if(0===r||r>f)return _=a.slice(0,f+1)+(g.length?p+g+u:u);g=a.slice(f-r+1,f+1)+(g.length?p+g:""),f-=r,o>0&&(r=o)}return _=a.slice(0,f+1)+p+g+u},T=function(t,e,n){if("HALF_DOWN"===n||"HALF_EVEN"===n){var i=t.substr(e);i=parseInt(i,10),i>5&&(n="HALF_UP")}return n},y=function(t,e,n){var i=t.toString().split(".");if(void 0===i[1])return t;if("5"===i[1][e]&&"DEFAULT"!==n){var r=T(i[1],e,n);return r=C(i,r,e),S(t,-e,r,i)}var o=Math.pow(10,e),a=Math.round(t*o)/o;return isFinite(a)?a:t},C=function(t,e,n){var i=Y[e];if("HALF_EVEN"===e){var r;if(0===n){var o=t[0].length;r=parseInt(t[0][o-1],10)}else r=parseInt(t[1][n-1],10);i=r%2==0?Y.HALF_DOWN:Y.HALF_UP}return i},S=function(t,e,n,i){if(0===e)return"5"===i[1][0]?Math[n](t):Math.round(t);var r=t.toString().split("e"),o=r[0],a=r[1],s=o+"e"+(a?parseInt(a,10)-e:-e),l=parseFloat(s);return t=Math[n](l),r=t.toString().split("e"),o=r[0],a=r[1],s=o+"e"+(a?parseInt(a,10)+e:e),l=parseFloat(s)},n=function(t,e,n,r,o){var a=i.getLocaleElementsMainNode(n);if(!isFinite(t))return t===1/0?a.numbers[r.numberingSystem].infinity:t===-(1/0)?a.numbers[r.numberingSystem].infinity:a.numbers[r.numberingSystem].nan;var s=Math.abs(t);r.isPercent===!0||"percent"===e.style?s*=100:r.isPerMill===!0&&(s*=1e3),s="decimal"===e.style&&void 0!==e.decimalFormat&&"standard"!==e.decimalFormat?M(s,e,r):r.useExponentialNotation===!0?O(s,r):I(s,e,r);var l="";l+=t<0?r.negativePrefix+s+r.negativeSuffix:r.positivePrefix+s+r.positiveSuffix;var u=E(o);if(void 0===i.numeringSystems[u]&&(u="latn"),"latn"!==u){var h,c=[];for(h=0;h<l.length;h++)l[h]>="0"&&l[h]<="9"?c.push(i.numeringSystems[u][l[h]]):c.push(l[h]);return c.join("")}return l},u=function(t,e,n,r){var o,a=i.trimNumber(t),s="",l=!1,u=r.numbers[n.numberingSystem].plusSign,c=new RegExp("^"+u.replace(H,"\\$1"));a=a.replace(c,"");var d=i.trimNumber(n.positivePrefix),p=i.trimNumber(n.positiveSuffix),g=i.trimNumber(n.negativePrefix),f=i.trimNumber(n.negativeSuffix),_=new RegExp("^"+(d||"").replace(H,"\\$1")),m=new RegExp((p||"").replace(H,"\\$1")+"$"),v=new RegExp("^"+(g||"").replace(H,"\\$1")),y=new RegExp((f||"").replace(H,"\\$1")+"$");if(v.test(a)===!0&&y.test(a)===!0)a=a.replace(v,""),a=a.replace(y,""),s="-",l=!0;else if(_.test(a)===!0&&m.test(a)===!0)a=a.replace(_,""),a=a.replace(m,""),s="+",l=!0;else if("currency"===e.style){var S,C,b,E,T,A=n.currencyCode,x=A;void 0!==r.numbers.currencies[A]&&(x=r.numbers.currencies[A].symbol),void 0===n.currencyDisplay||"symbol"===n.currencyDisplay?T=x:"code"===n.currencyDisplay&&(T=A),void 0!==T&&(S=(d||"").replace(T,""),C=(p||"").replace(T,""),b=(g||"").replace(T,""),E=(f||"").replace(T,""),_=new RegExp(("^"+S).replace(H,"\\$1")),m=new RegExp(C.replace(H,"\\$1")+"$"),v=new RegExp(("^"+b).replace(H,"\\$1")),y=new RegExp(E.replace(H,"\\$1")+"$"),v.test(a)===!0&&y.test(a)===!0?(a=a.replace(v,""),a=a.replace(y,""),s="-",l=!0):_.test(a)===!0&&m.test(a)===!0&&(a=a.replace(_,""),a=a.replace(m,""),s="+",l=!0))}return l?o=[s,a]:(o=h(a,n,r),o[2]=!0),o},h=function(t,e,n){var r=n.numbers[e.numberingSystem].group,o=n.numbers[e.numberingSystem].decimal,a=n.numbers[e.numberingSystem].minusSign,s="+",l="-",u="",h="",c=i.toUpper(n.numbers[e.numberingSystem].exponential);t=i.toUpper(t),t=t.split(c).join("E");var d=r;t=t.split(d).join("");var p=d.replace(/\u00A0/g," ");d!==p&&(t=t.split(p).join("")),t=t.split(o).join("."),"."===t.charAt(0)&&(t=t.substr(1),h="."),t=t.replace(a,l);var g=F.exec(t),f=h+g[2];return i.startsWith(f,l)?(f=f.substr(l.length),u="-"):i.startsWith(t,s)&&(f=f.substr(s.length),u="+"),[u,f]},c=function(t,e,n){var r,o=e.numbers[n.numberingSystem].minusSign,a=e.numbers[n.numberingSystem].plusSign;return t=i.trimNumber(t),o=i.trimNumber(o),a=i.trimNumber(a),i.startsWith(t,o)?r=["-",t.substr(o.length)]:i.startsWith(t,i.trimNumber(a))&&(r=["+",t.substr(a.length)]),r||["",t]},o=function(t,e){var n=E(e);if(void 0===i.numeringSystems[n])return t;var r,o=[];for(r=0;r<t.length;r++){var a=i.numeringSystems[n].indexOf(t[r]);a!==-1?o.push(a):o.push(t[r])}var s=o.join("");return s},a=function(t,e,n){var r={},o=n.numbers[e.numberingSystem].decimal,a=n.numbers[e.numberingSystem].group;t=t.replace(/ /g,"");var s,l,u=e.exponential,h=t.indexOf(u.toLowerCase());h<0&&(h=t.indexOf(i.toUpper(u))),h<0?(l=t,r.exponent=null):(l=t.substr(0,h),r.exponent=t.substr(h+u.length));var c=o,d=l.indexOf(c);d<0?(s=l,r.fraction=null):(s=l.substr(0,d),r.fraction=l.substr(d+c.length)),s=s.split(a).join("");var p=a.replace(/\u00A0/g," ");return a!==p&&(s=s.split(p).join("")),r.integer=s,r},A=function(t,e,n,r){isNaN(t)&&s(e.style,n,r),n.isPercent===!0||"percent"===e.style?t/=100:n.isPerMill===!0&&(t/=1e3);var o=i.getGetOption(e,"OraNumberConverter.parse"),a=o("roundDuringParse","boolean",[!0,!1],!1);return a&&(t=g(t,n,e)),t},s=function(t,e,n){var i,r,o,a;switch(i="Unparsable number "+n+" The expected number pattern is "+e.pat,t){case"decimal":a="decimalFormatMismatch";break;case"currency":a="currencyFormatMismatch";break;case"percent":a="percentFormatMismatch"}throw r=new Error(i),o={errorCode:a,parameterMap:{value:n,format:e.pat}},r.errorInfo=o,r},r=function(t,e,n,r){var s=i.getLocaleElementsMainNode(e),l={},p=o(t,r);d(e,l,n,r);var g=NaN,f=p.replace(/ /g,"");if(U.test(f))return g=parseFloat(p);var _=u(p,n,l,s),m=_[0],v=_[1];if(m=m||"+",_[2])return g=parseFloat(m+v),A(g,n,l,t);var y=a(v,l,s),S=y.integer,C=y.fraction,b=y.exponent,E=m+S;if(null!==C&&(E+="."+C),null!==b){var T=c(b,s,l);E+="e"+(T[0]||"+")+T[1]}return B.test(E)?g=parseFloat(E):(E=h(p,l,s),g=parseFloat(E[0]+E[1])),A(g,n,l,t)};var K,W,z,X,q="0",Z=",",$=".",J="%",Q="",tt="#",et=";",nt="E",it="-",rt="'",ot="",at=2147483647,st=2147483647;return L=function(t){var e,n,i,r="#,##0.###";throw e='Unexpected character(s) encountered in the pattern "'+t+' An example of a valid pattern is "'+r+'".',n=new SyntaxError(e),i={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:t,propertyValueHint:r}},n.errorInfo=i,n},P=function(t,e,n){var i=t.substr(e,n.length),r=new RegExp(n,"i");return null!==r.exec(i)},R=function(t,e){var n={};null!==K&&(e.positivePrefix=w(K,t,e,n)),null!==W&&(e.positiveSuffix=w(W,t,e,n)),null!==z&&(e.negativePrefix=w(z,t,e,n)),null!==X&&(e.negativeSuffix=w(X,t,e,n)),void 0!==n.name&&(e.positiveSuffix=""+n.name,e.positivePrefix="","ar"===e.lang?(e.negativeSuffix=t.numbers[e.numberingSystem].minusSign+""+n.name,e.negativePrefix=""):(e.negativeSuffix=""+n.name,e.negativePrefix=t.numbers[e.numberingSystem].minusSign))},w=function(t,e,n,i){for(var r="",o=0;o<t.length;){var a=t.charAt(o++);if(a!==rt){switch(a){case ot:var s=n.currencyCode,l=s,u=s;void 0!==e.numbers.currencies[s]&&(l=e.numbers.currencies[s].displayName,u=e.numbers.currencies[s].symbol),void 0===n.currencyDisplay||"symbol"===n.currencyDisplay?a=u:"code"===n.currencyDisplay?a=s:(a=l,i.name=a);break;case J:a=e.numbers[n.numberingSystem].percentSign;break;case Q:a=e.numbers[n.numberingSystem].perMille;break;case it:a=e.numbers[n.numberingSystem].minusSign}r=r.concat(a)}}return r},l=function(t,e,n,i){for(var r=!1,o=!1,a=0,s=0,l=!0,u=1;u>=0&&s<e.length;--u){var h,c=!1,d="",p="",g=-1,_=1,m=0,v=0,y=0,S=-1,C=-1,b=0;l=!0;for(var E=s;E<e.length;++E){var T=e.charAt(E);switch(b){case 0:case 2:if(c){if(T===rt){E+1<e.length&&e.charAt(E+1)===rt?(++E,l?d=d.concat("''"):p=p.concat("''")):c=!1;continue}}else{if(T===tt||T===q||T===Z||T===$){b=1,--E;continue}if(T===ot){void 0===t.currency&&f("pattern"),t.style="currency";var A=E+1<e.length&&e.charAt(E+1)===ot;A&&++E,l?d=d.concat(A?"'":"'"):p=p.concat(A?"'":"'");continue}if(T===rt){if(T===rt){E+1<e.length&&e.charAt(E+1)===rt?(++E,l?d=d.concat("''"):p=p.concat("''")):c=!0;continue}}else{if(T===et){0!==b&&0!==u||L(e),s=E+1,E=e.length;continue}if(T===J){t.style="percent",1!==_&&L(e),i.isPercent=!0,_=100,l?d=d.concat("'%"):p=p.concat("'%");continue}if(T===Q){1!==_&&L(e),t.style="perMill",i.isPerMill=!0,_=1e3,l?d=d.concat("'"):p=p.concat("'");continue}if(T===it){l?d=d.concat("'-"):p=p.concat("'-");continue}}}l?d=d.concat(T):p=p.concat(T);break;case 1:if(1!==u){0===--a&&(b=2,l=!1);continue}if(++a,T===tt)v>0?++y:++m,S>=0&&g<0&&++S;else if(T===q)y>0&&L(e),++v,S>=0&&g<0&&++S;else if(T===Z)C=S,S=0;else{if(T!==$){if(P(e,E,nt)){for(o&&L(e),o=!0,h=0,E+=nt.length;E<e.length&&e.charAt(E)===q;)++h,++a,++E;(m+v<1||h<1)&&L(e),b=2,l=!1,--E;continue}b=2,l=!1,--E,--a;continue}g>=0&&L(e),g=m+v+y}}}if(0===v&&m>0&&g>=0){var x=g;0===x&&++x,y=m-x,m=x-1,v=1}if((g<0&&y>0||g>=0&&(g<m||g>m+v)||0===S||c)&&L(e),1===u){K=d,W=p,z=K,X=W;var I=m+v+y,O=g>=0?g:I;i.minimumIntegerDigits=O-m,i.maximumIntegerDigits=o?m+i.minimumIntegerDigits:at,i.maximumFractionDigits=g>=0?I-g:0,i.minimumFractionDigits=g>=0?m+v-g:0,i.groupingSize=S>0?S:0,i.groupingSize0=C}else z=d,X=p,r=!0}0===e.length&&(K=W="",i.minimumIntegerDigits=0,i.maximumIntegerDigits=at,i.minimumFractionDigits=0,i.maximumFractionDigits=st),i.useExponentialNotation=o,i.minExponentDigits=h,(!r||0===z.localeCompare(K)&&0===X.localeCompare(W))&&("currency"===t.style&&"ar"===i.lang?(X=W+"'-",z=K):(X=W,z="'-"+K)),R(n,i)},g=function(t,e,n){var i=e.maximumFractionDigits,r=t<0,o=n.roundingMode||"DEFAULT",a=y(Math.abs(t),i,o);return r?-a:a},N=function(t,e,n){var r={};return p(e,"OraNumberConverter.resolvedOptions"),d(t,r,e,n),r.numberingSystemKey=E(n),void 0===i.numeringSystems[r.numberingSystemKey]&&(r.numberingSystemKey="latn"),r},k=function(t,e,n){var i={locale:n,style:void 0===e.style?"decimal":e.style,useGrouping:void 0===e.useGrouping||e.useGrouping,numberingSystem:t.numberingSystemKey};i.minimumIntegerDigits=t.minimumIntegerDigits,i.minimumFractionDigits=t.minimumFractionDigits,i.maximumFractionDigits=t.maximumFractionDigits,"decimal"===e.style&&void 0!==e.decimalFormat&&(i.decimalFormat=e.decimalFormat),"currency"===e.style&&(i.currency=e.currency,i.currencyDisplay=void 0===e.currencyDisplay?"symbol":e.currencyDisplay),void 0!==e.pattern&&(i.pattern=e.pattern);var r=e.roundingMode,o=e.roundDuringParse;return void 0!==r&&(i.roundingMode=r),void 0!==o&&(i.roundDuringParse=o),i},{getInstance:function(){return D||(D=t()),D}}}(),t.RegExpValidator=function(t){this.Init(t)},t.Object.createSubclass(t.RegExpValidator,t.Validator,"oj.RegExpValidator"),t.RegExpValidator._BUNDLE_KEY_DETAIL="oj-validator.regExp.detail",t.RegExpValidator._BUNDLE_KEY_SUMMARY="oj-validator.regExp.summary",t.RegExpValidator.prototype.Init=function(e){t.RegExpValidator.superclass.Init.call(this),this._options=e},t.RegExpValidator.prototype.validate=function(e){var n,i,r,o,a=this._options&&this._options.pattern||"";if(null===e||void 0===e||""===e)return!0;e=e||0===e?e.toString():e;var s,l,u,h="^("+a+")$",c=!1;if(u=e.match(h),null===u||u[0]!==e)throw this._options&&(o=this._options.messageSummary||null,n=this._options.messageDetail||null,i=this._options&&this._options.label||""),r={label:i,pattern:a,value:e},l=o?t.Translations.applyParameters(o,r):t.Translations.getTranslatedString(this._getSummaryKey(),r),s=n?t.Translations.applyParameters(n,r):t.Translations.getTranslatedString(this._getDetailKey(),r),new t.ValidatorError(l,s);return c=!0},t.RegExpValidator.prototype.getHint=function(){var e=null,n={};return this._options&&this._options.hint&&(n={pattern:this._options.pattern},e=t.Translations.applyParameters(this._options.hint,n)),e},t.RegExpValidator.prototype._getSummaryKey=function(){return t.RegExpValidator._BUNDLE_KEY_SUMMARY},t.RegExpValidator.prototype._getDetailKey=function(){return t.RegExpValidator._BUNDLE_KEY_DETAIL},t.IntlConverterUtils={},t.IntlConverterUtils.isoToDate=function(t){return i.isoToDate(t)},t.IntlConverterUtils.isoToLocalDate=function(t){return i.isoToLocalDate(t)},t.IntlConverterUtils.dateToLocalIso=function(t){return i.dateToLocalIso(t)},t.IntlConverterUtils._getTimeZone=function(t){return i._getTimeZone(t)},t.IntlConverterUtils.getLocalTimeZoneOffset=function(){return i.getLocalTimeZoneOffset()},t.IntlConverterUtils.getConverterInstance=function(e){var n,i="",r={},o=null;return e&&("object"==typeof e&&(e instanceof t.Converter||e.parse&&"function"==typeof e.parse||e.format&&"function"==typeof e.format?o=e:(i=e.type,r=e.options||{})),o||(i=i||e,i&&"string"==typeof i&&(n=t.Validation.converterFactory(i),o=n.createConverter(r)))),o},t.IntlConverterUtils._minMaxIsoString=function(t,e){if(t){e=e||this.dateToLocalIso(new Date);var n=e.indexOf("T");0===t.indexOf("T")&&n>0&&(t=e.substring(0,n)+t)}return t},t.IntlConverterUtils.__getConverterOptionError=function(e,n){t.Assert.assertObject(n);var i,r,o="",a="",s=n.propertyName;return"optionTypesMismatch"===e?(i=n.requiredPropertyName,r=n.requiredPropertyValueValid,o=t.Translations.getTranslatedString("oj-converter.optionTypesMismatch.summary",{propertyName:s,propertyValue:n.propertyValue,requiredPropertyName:i}),a=t.IntlConverterUtils._getOptionValueDetailMessage(i,r)):"optionTypeInvalid"===e?(s=n.propertyName,r=n.propertyValueValid,o=t.Translations.getTranslatedString("oj-converter.optionTypeInvalid.summary",{propertyName:s}),a=t.IntlConverterUtils._getOptionValueDetailMessage(s,r)):"optionOutOfRange"===e?(o=t.Translations.getTranslatedString("oj-converter.optionOutOfRange.summary",{propertyName:s,propertyValue:n.propertyValue}),r=n.propertyValueValid,a=t.IntlConverterUtils._getOptionValueDetailMessage(s,r)):"optionValueInvalid"===e&&(o=t.Translations.getTranslatedString("oj-converter.optionValueInvalid.summary",{propertyName:s,propertyValue:n.propertyValue}),r=n.propertyValueHint,a=t.IntlConverterUtils._getOptionValueDetailMessage(s,r)),new t.ConverterError(o,a)},t.IntlConverterUtils._getOptionValueDetailMessage=function(e,n){var i;return n?("string"==typeof n?i="oj-converter.optionHint.detail":(i="oj-converter.optionHint.detail-plural",n=n.join(t.Translations.getTranslatedString("oj-converter.plural-separator"))),t.Translations.getTranslatedString(i,{propertyName:e,propertyValueValid:n})):""},t.IntlConverterUtils.__getNullFormattedValue=function(){return""},t.IntlConverterUtils._copyTimeOver=function(t,e){return i._copyTimeOver(t,e)},t.IntlConverterUtils._clearTime=function(t){return i._clearTime(t)},t.IntlConverterUtils._dateTime=function(t,e,n){return i._dateTime(t,e,n)},t.IntlConverterUtils._normalizeIsoString=function(t){return i._normalizeIsoString(t)};var l;l=function(){function t(){return{format:function(t,e,n,r){var o,a;if("number"==typeof t)o=i.dateToLocalIso(new Date(t));else{if("string"!=typeof t)return null;if(o=i.trim(t),""===o)return null}(arguments.length<=2||void 0===n)&&(n={year:"numeric",month:"numeric",day:"numeric"}),a=i.getISOStrFormatInfo(o);var s=u(e,n,a,r),l=i.getNumberingExtension(r);if(void 0===i.numeringSystems[l]&&(l="latn"),"latn"!==l){var h,c=[];for(h=0;h<s.length;h++)s[h]>="0"&&s[h]<="9"?c.push(i.numeringSystems[l][s[h]]):c.push(s[h]);return c.join("")}return s},formatRelative:function(t,e,n){return c(t,e,n)},parse:function(t,e,n,i){return h(t,e,n,i)},resolvedOptions:function(t,e,n){(arguments.length<3||void 0===n)&&(n=i.getLocaleElementsMainNodeKey(t)),(arguments.length<2||void 0===e)&&(e={year:"numeric",month:"numeric",day:"numeric"});var r,o,a,s=i.getGetOption(e,"OraDateTimeConverter.resolvedOptions");void 0!==e&&(o=s("isoStrFormat","string",[Jt,ne,ee,Qt,te],te),a=s("dst","boolean",[!0,!1],!1),r=e.timeZone);var l=i.getNumberingExtension(n);return void 0===i.numeringSystems[l]&&(l="latn"),void 0!==e&&void 0!==e.pattern?Q(o,r,a,n,l,e):void 0!==e?$(e,s,r,a,o,t,l,n):X(t,n,l)},calculateWeek:function(t){var e,n=i.isoToLocalDate(t),r=new Date(n.getTime());return r.setDate(r.getDate()+4-(r.getDay()||7)),e=r.getTime(),r.setMonth(0),r.setDate(1),Math.floor(Math.round((e-r)/864e5)/7)+1},getAvailableTimeZones:function(t){return _t(t)},compareISODates:function(t,e,n){var r=it(t,e),o=h(t,n,r,"en-US"),a=h(e,n,r,"en-US"),s=o.value.replace("Z",""),l=a.value.replace("Z",""),u=i._IsoStrParts(s);u=Date.UTC(u[0],u[1]-1,u[2],u[3],u[4],u[5],u[6]);var c=i._IsoStrParts(l);return c=Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5],c[6]),u-c},isHour12:function(t){return m(t)}}}var e,n,r,o,s,u,h,c,d,p,g,f,_,m,v,y,S,C,b,E,T,A,x,I,O,M,D,P,w,R,L,N,k,U,B,F,H,j,G,V,Y,K,W,z,X,q,Z,$,J,Q,tt,et,nt,it,rt,ot,at,st,lt,ut,ht,ct,dt,pt,gt,ft,_t,mt,vt,yt,St,Ct,bt,Et,Tt,At,xt,It,Ot,Mt,Dt,Pt,wt,Rt,Lt={},Nt={},kt=/(\d{1,4})\D+?(\d{1,4})/g,Ut=/(\d{1,4})\D+?(\d{1,4})\D+?(\d{1,4})/g,Bt=/^[M][^M]|[^M]M[^M]|[^M]M$|^M$/g,Ft=/^[L][^L]|[^L]L[^L]|[^L]L$|^L$/g,Ht=/^[d][^d]|[^d]d[^d]|[^d]d$|^d$|^d[^d]/,jt=/(?:^|[^h])h[^h]|[^H]H[^H]|[^k]k[^k]|[^K]K[^K]|^H[^H]|^H$|[^h]h$/,Gt=/'.*'/,Vt=/'[^d]*d[^d]*'/,Yt=/(\d{1,2})(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,3}))?/g,Kt=/h|H|K|k/g,Wt=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,zt=/ccccc|cccc|ccc|cc|c|EEEEE|EEEE|EEE|EE|E|dd|d|MMMMM|MMMM|MMM|MM|M|LLLLL|LLLL|LLL|LL|L|yyyy|yy|y|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|aa|a|SSS|SS|S|zzzz|zzz|zz|z|v|ZZZ|ZZ|Z|XXX|XX|X|VV|GGGGG|GGGG|GGG|GG|G/g,Xt=/\s?(?:\(|\[)?z{1,4}(?:\)|\])?/g,qt=!1,Zt={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},$t={s:46,m:46,h:23,d:7,w:4,M:12},Jt="zulu",Qt="local",te="auto",ee="invariant",ne="offset",ie="UTC",re="(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)",oe="(\\D+|\\D+\\d\\d?)",ae="(\\D*)",se="(.+?)",le="(\\d\\d?)",ue="(\\d{1,3})",he="(\\d{1,4})",ce="([+-]?\\d{1,4})",de="([+-]?\\d{1,2})",pe="([+-]?\\d{1,2}:\\d{1,2})",ge="(\\/)",fe={MMM:{token:"months",style:"format",mLen:"abbreviated",matchIndex:0,key:"month",value:"short",regExp:re},MMMM:{token:"months",style:"format",mLen:"wide",matchIndex:0,key:"month",value:"long",regExp:re},MMMMM:{token:"months",style:"format",mLen:"narrow",matchIndex:0,key:"month",value:"narrow",regExp:re},LLL:{token:"months",style:"stand-alone",mLen:"abbreviated",matchIndex:1,key:"month",value:"short",regExp:re},LLLL:{token:"months",style:"stand-alone",mLen:"wide",matchIndex:1,key:"month",value:"long",regExp:re},LLLLL:{token:"months",style:"stand-alone",mLen:"narrow",matchIndex:1,key:"month",value:"narrow",regExp:re},E:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:oe},EE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:oe},EEE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:oe},EEEE:{token:"days",style:"format",dLen:"wide",matchIndex:0,key:"weekday",value:"long",regExp:oe},EEEEE:{token:"days",style:"format",dLen:"narrow",matchIndex:0,key:"weekday",value:"narrow",regExp:oe},c:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:oe},cc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:oe},ccc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:oe},cccc:{token:"days",style:"stand-alone",dLen:"wide",matchIndex:1,key:"weekday",value:"long",regExp:oe},ccccc:{token:"days",style:"stand-alone",dLen:"narrow",matchIndex:1,key:"weekday",value:"narrow",regExp:oe},h:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"numeric",regExp:le},hh:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"2-digit",regExp:le},K:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"numeric",regExp:le},KK:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"2-digit",regExp:le},H:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"numeric",regExp:le},HH:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"2-digit",regExp:le},k:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"numeric",regExp:le},kk:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"2-digit",regExp:le},m:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"numeric",regExp:le},mm:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"2-digit",regExp:le},s:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"numeric",regExp:le},ss:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"2-digit",regExp:le},S:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:ue},SS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:ue},SSS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:ue},d:{token:"dayOfMonth",key:"day",value:"numeric",getPartIdx:2,regExp:le},dd:{token:"dayOfMonth",key:"day",value:"2-digit",getPartIdx:2,regExp:le},M:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:le},MM:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:le},L:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:le},LL:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:le
},y:{token:"year",key:"year",value:"numeric",regExp:he},yy:{token:"year",key:"year",value:"2-digit",regExp:le},yyyy:{token:"year",key:"year",value:"numeric",regExp:he},a:{token:"ampm",key:"hour12",value:!0,regExp:ae},z:{token:"tzAbbrev",regExp:se},v:{token:"tzAbbrev",key:"timeZoneName",value:"short",regExp:se},zz:{token:"tzAbbrev",regExp:se},zzz:{token:"tzAbbrev",regExp:se},zzzz:{token:"tzFull",regExp:se},Z:{token:"tzhm",regExp:ce},ZZ:{token:"tzhm",regExp:ce},ZZZ:{token:"tzhm",regExp:ce},X:{token:"tzh",regExp:de},XX:{token:"tzhm",key:"XX",regExp:ce},XXX:{token:"tzhsepm",regExp:pe},VV:{token:"tzid",regExp:se},G:{token:"era",key:"era",value:"short",regExp:oe},GG:{token:"era",key:"era",value:"short",regExp:oe},GGG:{token:"era",key:"era",value:"short",regExp:oe},GGGG:{token:"era",key:"era",value:"long",regExp:oe},GGGGG:{token:"era",key:"era",value:"narrow",regExp:oe},"/":{token:"slash",regExp:ge}};return _=function(t){var e=t["two-digit-year-start"];return(void 0===e||isNaN(e))&&(e=1950),e=parseInt(e,10)},m=function(t){var e=t._ojLocale_,n=i.getBCP47Region(e),r=t.supplemental.prefferedHours,o=r[n];return"h"===o},S=function(t){return t%400===0||t%100!==0&&t%4===0},C=function(t,e){switch(e){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return S(t)?29:28;default:return 30}},y=function(t,e,n){var r,o,a,s=i.getLocaleElementsMainNode(e),l=i.getGetOption(t,n),u=l("formatType","string",["date","time","datetime"],"date"),h=l("dateFormat","string",["short","medium","long","full"],"short"),c=l("timeFormat","string",["short","medium","long","full"],"short"),d=s.dates.calendars.gregorian,p=d.dateFormats,g=d.timeFormats;switch(h){case"full":r=p.full;break;case"long":r=p["long"];break;case"medium":r=p.medium;break;case"short":r=p["short"]}switch(c){case"full":o=g.full;break;case"long":o=g["long"];break;case"medium":o=g.medium;break;case"short":o=g["short"]}return void 0===r||"datetime"!==u&&"date"!==u||(a=r),void 0===o||"datetime"!==u&&"time"!==u||(qt&&(o=o.replace(Xt,"")),a=a?a+" "+o:o),a},n=function(t,e){for(var n=0,i=!1,r=0,o=t.length;r<o;r++){var a=t.charAt(r);switch(a){case"'":i?e.push("'"):n++,i=!1;break;case"\\":i&&e.push("\\"),i=!i;break;default:e.push(a),i=!1}}return n},d=function(t,e,n){var i,r,o,a,s=void 0!==e.year||void 0!==e.month||void 0!==e.weekday||void 0!==e.day,l=void 0!==e.hour||void 0!==e.minute||void 0!==e.second;throw a=s&&l?"MM/dd/yy hh:mm:ss a":s?"MM/dd/yy":"hh:mm:ss a",i="Unexpected character(s) "+n+' encountered in the pattern "'+t+' An example of a valid pattern is "'+a+'".',r=new SyntaxError(i),o={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:t,"propertyValueHint ":a}},r.errorInfo=o,r},A=function(t,e,n,r){var o,a,s=i.getLocaleElementsMainNode(e),l=s.dates.calendars.gregorian.dateTimeFormats.availableFormats,u=["weekday","era","year","month","day","hour","minute","second","timeZoneName"],h={"2-digit":0,numeric:1,narrow:2,"short":3,"long":4},c=120,d=20,p=8,g=6,f=6,_=3,m=-(1/0),v=void 0;for(var y in l){a=!1;var S={};S.pattern=l[y];for(var C=0;null!==(o=zt.exec(y));){var b=o[0];("h"!==b&&"hh"!==b||r)&&("H"!==b&&"HH"!==b||!r)?void 0!==fe[b]&&(S[fe[b].key]=fe[b].value):a=!0}if(!a){for(var E in u){var T=t[u[E]],A=S[u[E]];if(void 0===T&&void 0!==A)C-=d;else if(void 0!==T&&void 0===A)C-=c;else if(void 0!==T&&void 0!==A){var x=h[T],I=h[A],O=Math.max(Math.min(I-x,2),-2);2===O?C-=g:1===O?C-=_:O===-1?C-=f:O===-2&&(C-=p)}}C>m&&(m=C,v=S)}}return void 0!==v?v.pattern:null},b=function(t,e,n){var r="",o="",a={},s={},l=i.getGetOption(t,n),u=l("era","string",["narrow","short","long"]);r+=x(a,"era",u,{narrow:"GGGGG","short":"GGG","long":"GGGG"}),u=l("year","string",["2-digit","numeric"]),r+=x(a,"year",u,{"2-digit":"yy",numeric:"y"}),u=l("month","string",["2-digit","numeric","narrow","short","long"]),r+=x(a,"month",u,{"2-digit":"MM",numeric:"M",narrow:"MMMMM","short":"MMM","long":"MMMM"}),u=l("weekday","string",["narrow","short","long"]),r+=x(a,"weekday",u,{narrow:"EEEEE","short":"E","long":"EEEE"}),u=l("day","string",["2-digit","numeric"]),r+=x(a,"day",u,{"2-digit":"dd",numeric:"d"});var h=l("hour12","boolean",[!0,!1]);return void 0===h&&(h=m(e)),u=l("hour","string",["2-digit","numeric"]),o+=h===!0?x(s,"hour",u,{"2-digit":"hh",numeric:"h"}):x(s,"hour",u,{"2-digit":"HH",numeric:"H"}),u=l("minute","string",["2-digit","numeric"]),o+=x(s,"minute",u,{"2-digit":"mm",numeric:"m"}),u=l("second","string",["2-digit","numeric"]),o+=x(s,"second",u,{"2-digit":"ss",numeric:"s"}),u=l("timeZoneName","string",["short","long"]),o+=x(s,"timeZoneName",u,{"short":"v","long":"v"}),[r,o,a,s]},x=function(t,e,n,i){return void 0!==n?(t[e]=n,i[n]):""},E=function(t,e,n){var r,o=t,a=i.getGetOption(e,n),s=a("year","string",["2-digit","numeric"]),l={"2-digit":"yy",numeric:"yyyy"};if(void 0!==s&&(o=o.replace(/y{1,4}/,l[s])),s=a("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==s){l={"2-digit":"MM",numeric:"M",narrow:"MMMMM","short":"MMM","long":"MMMM"};var u={"2-digit":"LL",numeric:"L",narrow:"LLLLL","short":"LLL","long":"LLLL"};void 0!==l[s]&&l[s].length>2?(o=o.replace(/M{3,5}/,l[s]),o=o.replace(/L{3,5}/,u[s])):"2-digit"===s&&(Bt.lastIndex=0,r=Bt.test(t),r&&(o=o.replace("M","MM")),r=Ft.test(t),r&&(o=o.replace("L","LL")))}if(s=a("weekday","string",["narrow","short","long"]),void 0!==s){var h={narrow:"EEEEE","short":"EEE","long":"EEEE"},c={narrow:"ccccc","short":"ccc","long":"cccc"};o=o.replace(/E{1,5}/,h[s]),o=o.replace(/c{1,5}/,c[s])}if(s=a("day","string",["2-digit","numeric"]),void 0!==s&&"2-digit"===s){Ht.lastIndex=0,Vt.lastIndex=0;var d=Vt.test(t);r=Ht.test(t),1==r&&d===!1&&(o=o.replace("d","dd"))}return o},T=function(t,e,n){var r=t,o=i.getGetOption(e,n),a=o("hour","string",["2-digit","numeric"]);if("2-digit"===a){jt.lastIndex=0,Gt.lastIndex=0;var s=t.replace(Gt,""),l=jt.exec(s);if(null!==l){Kt.lastIndex=0;var u=Kt.exec(l[0]),h=u[0]+u[0];r=t.replace(u[0],h)}}return r},ut=function(t,e,n){var i,r=0;for(i in e)r++;if(r>1)return null;var o;for(i=t.length;i>0;i--)if(o=n[t.substr(0,i)],void 0!==o)return o;return t},o=function(t){var e="yyyy-MM-ddTHH:mm:ss",n=i.getGetOption(t,"OraDateTimeConverter.format"),r=n("isoStrFormat","string",[Jt,ne,ee,Qt,te],te);switch(r){case Jt:t.timeZone="Etc/GMT+0",e+="'Z'";break;case ne:e+="XXX"}return e},ot=function(t,e){var n=i.getNumberingSystemKey(t,e),r="symbols-numberSystem-"+n;return t.numbers[r].decimal},r=function(t,e,n,r){function o(e){if(void 0!==f){var i=ot(s,n);i=void 0===d&&void 0===p&&void 0===g?"S":"ss"+i+"SSS",e=e.replace("ss",i),void 0===g&&(t.second=void 0)}var r=u("timeZoneName","string",["short","long"]),o={"short":"z","long":"zzzz"};return void 0!==r&&(e=e.replace(/v/,o[r])),e}var a,s=i.getLocaleElementsMainNode(e),l=i.getLocaleElementsMainNodeKey(e),u=i.getGetOption(t,r),h=u("formatMatcher","string",["basic","munger"],"munger"),c=0;for(c in t)c++;0===c&&(t={year:"numeric",month:"numeric",day:"numeric"});var d,p,g,f;f=u("millisecond","string",["numeric","2-digit"]),g=u("second","string",["numeric","2-digit"]),void 0!==f&&(d=u("hour","string",["numeric","2-digit"]),p=u("minute","string",["numeric","2-digit"]),t.second="2-digit");var _=b(t,e,r);if(void 0!==Lt[l]){var v=Lt[l].dates.calendars.gregorian.dateTimeFormats[_[0]+_[1]];if(void 0!==v)return v=o(v)}if(""===_[0]&&""===_[1])return y(t,e,r);var S=s.dates.calendars.gregorian.dateTimeFormats.availableFormats,C=S[_[0]],x=u("hour12","boolean",[!0,!1]);void 0===x&&(x=m(e)),void 0===C&&""!==_[0]&&(C=ut(_[0],_[2],S),null===C&&(C=A(_[2],e,!0,x)),null!==C?"basic"!==h&&(C=E(C,t,r)):C=_[0]);var I=S[_[1]];return void 0===I&&""!==_[1]&&(I=ut(_[1],_[3],S),null===I&&(I=A(_[3],e,!0,x)),null!==I?"basic"!==h&&(I=T(I,t,r)):I=_[1]),a=C||"",void 0!==I&&(""!==a?a+=" "+I:a=I),void 0===Lt[l]&&(Lt[l]={},Lt[l].dates={},Lt[l].dates.calendars={},Lt[l].dates.calendars.gregorian={},Lt[l].dates.calendars.gregorian.dateTimeFormats={}),Lt[l].dates.calendars.gregorian.dateTimeFormats[_[0]+_[1]]=a,a=o(a)},Ct=function(t){var e=t.split(" "),n=e[0].split("-"),i=new Date(n[0],n[1]-1,n[2]);return e.length>1&&(n=e[1].split(":"),i.setHours(n[0]),i.setMinutes(n[1])),i.getTime()},St=function(t,e,n){var i=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);i=i.getTime();var r=e.split("/"),o=r[0],a=r[1],s=n[o];if(void 0===s)return null;if(s=s[a],void 0===s)return null;var l,u,h,c,d,p,g=s.length;for(l=0;l<g;l++){if(c=s[l].usesMetazone._from,d=s[l].usesMetazone._to,p=s[l].usesMetazone._mzone,void 0===c&&void 0===d)return p;if(void 0===c&&void 0!==d&&(h=Ct(d),i<=h))return p;if(void 0!==c&&void 0===d&&(u=Ct(c),i>=u))return p;if(void 0!==c&&void 0!==d&&(u=Ct(c),h=Ct(d),i>=u&&i<h))return p}},bt=function(t,e,n,r,o){var a=i.getLocaleElementsMainNode(t),s="",l=n.timeZone,u=i.getGetOption(n,"OraDateTimeConverter"),h=u("dst","boolean",[!0,!1],!1);if(void 0===l)return s;var c,d=t.supplemental.metazones,p=St(e,l,d),g="long",f="short",_="standard",m=!o,v=Et(l,t),y=Tt(v,e,h,m,!0);if(void 0!==a.dates.timeZoneNames.metazone&&(c=a.dates.timeZoneNames.metazone[p]),void 0===c){var S=v.ofset(y);return i.getTimeStringFromOffset(ie,S,!0,!0)}var C;C=1===r?c[g]:c[f];var b=v.ofset(y),E=v.ofset(y+1);return b<E&&(_="daylight"),void 0!==C&&(s=C[_],void 0!==s)?s:i.getTimeStringFromOffset(ie,b,!0,!0)},Et=function(t,e){var n=a.getInstance(),i=n.getZone(t,e);return i},Tt=function(t,e,n,i,r){var o=Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]),a=t.parse(o,n,i,r);return a},u=function(t,e,o,a){function s(t,e){switch(e){case 0:return t[0];case 1:return t[1];case 2:return t[2];case 3:var n=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return Zt[n.getDay()]}}function l(t,e,n,r){var o=s(e,n);t.push(r>1?i.padZeros(o,r):o)}function u(t,n,r,o,a){var s;switch(o.timePart){case"hour":s=11===o.end1?n[3]%12:n[3],"h"===a||"hh"===a?0===s&&(s=12):"k"!==a&&"kk"!==a||0===s&&(s=24);break;case"minute":s=n[4];break;case"second":s=void 0===e.second&&void 0!==e.millisecond?0:n[5];break;case"millisec":s=n[6]}t.push(r>1?i.padZeros(s,r):s)}function h(e,n,r){var a,s,l,u=n.timeZone,h=m("dst","boolean",[!0,!1],!1),c=!r;if(void 0!==u)s=Et(u,t),l=Tt(s,e,h,c,!0),a=-s.ofset(l);else if(o.format!==Qt)switch(o.format){case ne:a=o.timeZone.split(":");var d=parseInt(a[0],10),p=parseInt(a[1],10);a=60*d+(i.startsWith(o.timeZone,"-")?-p:p);break;case Jt:a=0;break;default:a=0}return a}var c,p,g=o.isoStrParts,f=0===o.dateTime.indexOf("T"),_=i.getLocaleElementsMainNode(t),m=i.getGetOption(e,"OraDateTimeConverter.format");p=e.pattern||r(e,t,a,"OraDateTimeConverter.format"),c=[];var v,y=0,S=_.dates.calendars.gregorian,C=e.timeZone;for(o.format!==Qt&&void 0!==C&&gt(o,e,t);;){var b=zt.lastIndex,E=zt.exec(p),T=p.slice(b,E?E.index:p.length);if(y+=n(T,c),!E)break;if(y%2)c.push(E[0]);else{var A=E[0],x=A.length,I=fe[A];switch(I.token){case"days":v=S[I.token][I.style][I.dLen],c.push(v[s(g,3)]);break;case"months":v=S[I.token][I.style][I.mLen],c.push(v[s(g,1)]);break;case"dayOfMonth":case"monthIndex":c.push(l(c,g,I.getPartIdx,x));break;case"year":v=g[0],2===x&&(v%=100),c.push(i.padZeros(v,x));break;case"time":u(c,g,x,I,A);break;case"ampm":v=g[3]<12?S.dayPeriods.format.wide.am:S.dayPeriods.format.wide.pm,c.push(v);break;case"tzhm":v=h(g,e,f),0===v?"XX"===I.key?c.push("Z"):c.push("+0000"):c.push((v<=0?"-":"+")+i.padZeros(Math.floor(Math.abs(v/60)),2)+i.padZeros(Math.floor(Math.abs(v%60)),2));break;case"tzhsepm":v=h(g,e,f),0===v?c.push("Z"):c.push((v<=0?"-":"+")+i.padZeros(Math.floor(Math.abs(v/60)),2)+":"+i.padZeros(Math.floor(Math.abs(v%60)),2));break;case"tzh":v=h(g,e,f),0===v?c.push("Z"):c.push((v<=0?"-":"+")+i.padZeros(Math.floor(Math.abs(v/60)),2));break;case"tzid":v=void 0!==C?C:o.format===Jt?ie:"",c.push(v);break;case"tzAbbrev":v=bt(t,g,e,0,f),c.push(v);break;case"tzFull":v=bt(t,g,e,1,f),c.push(v);break;case"era":v=S.eras.eraAbbr,c.push(v[1]);break;case"slash":c.push("/");break;default:d(p,e,A)}}}return c.join("")},M=function(t,e){return t.getFullYear()===e.getFullYear()},D=function(t,e){return e.getFullYear()-t.getFullYear()===1},P=function(t,e){return D(e,t)},w=function(t,e){return M(t,e)&&t.getMonth()===e.getMonth()},R=function(t,e){return M(t,e)?e.getMonth()-t.getMonth()===1:!!D(t,e)&&(11===t.getMonth()&&0===e.getMonth())},L=function(t,e){return R(e,t)},I=function(t,e){var n=t.getDate(),i=e.getDate();return R(t,e)&&(i+=C(t.getFullYear,t.getMonth())),i-n},O=function(t,e){var n=t._ojLocale_,r=i.getBCP47Region(n),o=t.supplemental.weekData.firstDay,a=o[r];void 0===a&&(a=o["001"]);var s=e-a;return s<0&&(s+=7),s},N=function(t,e,n){if(e>n){var i=e;e=n,n=i}if(!w(e,n)&&!R(e,n))return!1;var r=I(e,n)+O(t,e.getDay());return r>=0&&r<=6},k=function(t,e,n){if(!w(e,n)&&!R(e,n))return!1;var i=I(e,n)+O(t,e.getDay());return i>=7&&i<=13},U=function(t,e,n){return k(t,n,e)},B=function(t,e){return M(t,e)&&w(t,e)&&t.getDate()===e.getDate()},F=function(t,e){return!(!w(t,e)&&!R(t,e))&&1===I(t,e)},H=function(t,e){return F(e,t)},At=function(t,e,n){var r=n.timeZone,o=i.getISOStrFormatInfo(t),a=o.format;if(a===Qt&&void 0===r)return t;var s={isoStrFormat:"zulu"};void 0!==r&&(s.timeZone=r,s.dst=!0);var l=h(t,e,s,"en-US"),u=i.getLocalTimeZoneOffset();s={timeZone:u,isoStrFormat:"local"};var c=h(l.value,e,s,"en-US");return c.value},xt=function(t,e,n){var r=i._IsoStrParts(t),o=i._IsoStrParts(e);return n?(r=Date.UTC(r[0],r[1]-1,r[2],0,0,0,0),o=Date.UTC(o[0],o[1]-1,o[2],0,0,0,0)):(r=Date.UTC(r[0],r[1]-1,r[2],r[3],r[4],r[5],r[6]),o=Date.UTC(o[0],o[1]-1,o[2],o[3],o[4],o[5],o[6])),r-o},It=function(t,e){return t.replace(/\{(\d+)\}/g,function(){return e[arguments[1]]})},Ot=function(t,e,n,r){var o,a,s,l,h={hour:"numeric",minute:"numeric"},c={year:"numeric",month:"numeric",day:"numeric"},d=i.getLocaleElementsMainNode(n),p=d.dates.calendars.gregorian.dateTimeFormats["long"],g=d.dates.calendars.gregorian.days.format.wide,f=d.dates.fields,_=i.isoToLocalDate(e),m=i.isoToLocalDate(t),v=i.getISOStrFormatInfo(e);if(B(m,_))o=f.day["relative-type-0"];else if(F(m,_))o=f.day["relative-type-1"];else if(H(m,_))o=f.day["relative-type--1"];else{s=_.getDay(),l=Zt[s];var y=xt(e,t,!0);if(y/=864e5,y<-1&&y>-7)o=f[l]["relative-type--1"];else{if(!(y>1&&y<7))return u(n,c,v,"en-US");o=g[l]}}return r?o:(a=u(n,h,v,"en-US"),p=p.replace(/'/g,""),p=It(p,[a,o]))},Mt=function(t,e,n,r){var o=i.getLocaleElementsMainNode(r),a=o.dates.fields,s=i.getGetOption(n,"OraDateTimeConverter.formatRelative"),l=s("dateField","string",["day","week","month","year","hour","minute","second"]),u=i.isoToLocalDate(t),h=i.isoToLocalDate(e);switch(l){case"day":return B(u,h)?a.day["relative-type-0"]:F(u,h)?a.day["relative-type-1"]:H(u,h)?a.day["relative-type--1"]:Dt(t,e,r,"day");case"week":return N(r,u,h)?a.week["relative-type-0"]:k(r,u,h)?a.week["relative-type-1"]:U(r,u,h)?a.week["relative-type--1"]:Dt(t,e,r,"week");case"month":return w(u,h)?a.month["relative-type-0"]:R(u,h)?a.month["relative-type-1"]:L(u,h)?a.month["relative-type--1"]:Dt(t,e,r,"month");case"year":return M(u,h)?a.year["relative-type-0"]:D(u,h)?a.year["relative-type-1"]:P(u,h)?a.year["relative-type--1"]:Dt(t,e,r,"year");case"hour":return Dt(t,e,r,"hour");case"minute":return Dt(t,e,r,"minute");case"second":return Dt(t,e,r,"second")}return null},Rt=function(t){return 4800*t/146097},wt=function(t){var e=t/864e5,n=Rt(e),i=n/12,r={year:Math.round(i),month:Math.round(n),week:Math.round(t/6048e5),day:Math.round(t/864e5),hour:Math.round(t/36e5),minute:Math.round(t/6e4),second:Math.round(t/1e3),millisecond:t};return r},Pt=function(t){var e=t.split("-");return e[0]},Dt=function(t,e,n,r){var o="relativeTime-type-future",a="relativeTime-type-past",s="relative-type-0",l=i.getLocaleElementsMainNodeKey(n),u=i.getLocaleElementsMainNode(n),h=Pt(l),c=n.supplemental.plurals,d=u.dates.fields,p="relativeTimePattern-count-",g=xt(e,t,!1),f=Math.abs(g),_=wt(f);if(null===r&&(r=_.second<$t.s&&"second"||_.minute<$t.m&&"minute"||_.hour<$t.h&&"hour"||_.day<$t.d&&"day"||_.week<$t.w&&"week"||_.month<$t.M&&"month"||"year"),"second"===r&&_.second<$t.s)return d[r][s];var m=c[h](_[r]),v=p+m,y=g<0?a:o,S=d[r][y][v];return void 0===S&&(v=p+"other",S=d[r][y][v]),S=It(S,[_[r]])},c=function(t,e,n){var r=i.dateToLocalIso(new Date);if("number"==typeof t)t=i.dateToLocalIso(new Date(t));else{if("string"!=typeof t)return null;if(""===i.trim(t))return null}void 0===n&&(n={formatUsing:"displayName"});var o=i.getGetOption(n,"OraDateTimeConverter.formatRelative"),a=o("relativeTime","string",["fromNow","toNow"],"fromNow"),s=o("dateField","string",["day","week","month","year","hour","minute","second"]);t=At(t,e,n);var l="toNow"===a;if(l){var u=r;r=t,t=u}var h=o("formatUsing","string",["displayName","calendar"],"displayName");if("calendar"===h){var c=o("dateOnly","boolean",[!0,!1],!1);return Ot(r,t,e,c)}return void 0!==s?Mt(r,t,n,e):Dt(r,t,e,null)},ht=function(t,e){var n,i,r;throw n="The weekday "+t+" does not match the date "+e,i=new Error(n),r={errorCode:"dateToWeekdayMismatch",parameterMap:{weekday:t,date:e}},i.errorInfo=r,i},lt=function(t,e,n){var i,r,o,a;throw 2===n?(i='The value "'+t+'" does not match the expected date-time format "'+e+'"',a="datetimeFormatMismatch"):0===n?(i='The value "'+t+'" does not match the expected date format "'+e+'"',a="dateFormatMismatch"):(i='The value "'+t+'" does not match the expected time format "'+e+'"',a="timeFormatMismatch"),r=new Error(i),o={errorCode:a,parameterMap:{value:t,format:e}},r.errorInfo=o,r},j=function(t,e){if(e<100){var n=t%100;e+=100*Math.floor(t/100)+(e<n?100:0)}return e},rt=function(t,e){var n={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(var r in t)if(i.trim(i.toUpper(t[r]))===i.trim(e))return n[r];return-1},at=function(t,e){for(var n in t)if(i.trim(i.toUpper(t[n]))===i.trim(e))return n-1;return-1},z=function(t,e,n){var r,o,a=i.getLocaleElementsMainNode(t),s=a.dates.calendars.gregorian.days.format,l=a.dates.calendars.gregorian.days["stand-alone"];switch(n){case 0:o=[s.abbreviated,s.wide];break;case 1:o=[l.abbreviated,l.wide]}return e=i.toUpper(e),r=rt(o[0],e),r===-1&&(r=rt(o[1],e)),r},q=function(t,e,n){var r,o=-1,a=i.getLocaleElementsMainNode(t),s=a.dates.calendars.gregorian.months.format,l=a.dates.calendars.gregorian.months["stand-alone"];switch(n){case 0:r=[s.wide,s.abbreviated];break;case 1:r=[l.wide,l.abbreviated];break;case 2:r=[s.wide,s.abbreviated,l.wide,l.abbreviated];break;default:return-1}e=i.toUpper(e);for(var u in r)if(o=at(r[u],e),o!==-1)return o;return o},J=function(t,e){for(var i,r={},o=t.replace(Wt,"\\\\$1"),a=["^"],s=[],l=0,u=0;null!==(i=zt.exec(o));){var h=o.slice(l,i.index);if(l=zt.lastIndex,u+=n(h,a),u%2)a.push(i[0]);else{var c,p=i[0];void 0!==fe[p]?c=fe[p].regExp:d(t,e,p),c&&a.push(c),s.push(i[0])}}n(o.slice(l),a),a.push("$");var g=a.join("").replace(/\s+/g,"\\s+"),f={regExp:g,groups:s};return r[t]=f},nt=function(t,e,n,i,r,o,a){if(e<n||e>i){var s=r+" is out of range.  Enter a value between "+o+" and "+a+" for "+t,l=new RangeError(s),u={errorCode:"datetimeOutOfRange",parameterMap:{value:r,minValue:o,maxValue:a,propertyName:t}};throw l.errorInfo=u,l}},G=function(t,e){for(var n=0;n<t.length;n++)for(var i in t[n])if(i===e)return parseInt(n,10);return 0},W=function(t,e,n,r,o){var a=i.getLocaleElementsMainNode(r),s=a.dates.calendars.gregorian.dayPeriods.format.wide.pm;Yt.lastIndex=0;var l,u=0,h=0,c=0,d=0,p=Yt.exec(e);switch(null===p&&lt(e,n,o),void 0!==p[1]&&(u=parseInt(p[1],10)),void 0!==p[2]&&(h=parseInt(p[2],10)),void 0!==p[3]&&(c=parseInt(p[3],10)),void 0!==p[4]&&(d=parseInt(p[4],10)),Kt.lastIndex=0,p=Kt.exec(n),p[0]){case"h":12===u&&(u=0),nt("hour",u,0,11,u,1,12),l=i.toUpper(e).indexOf(i.toUpper(s)),l!==-1&&u<12&&(u+=12);break;case"K":nt("hour",u,0,11,u,0,11),l=i.toUpper(e).indexOf(i.toUpper(s)),l!==-1&&u<12&&(u+=12);break;case"H":nt("hour",u,0,23,u,0,23);break;case"k":24===u&&(u=0),nt("hour",u,0,23,u,1,24)}nt("minute",h,0,59,h,0,59),nt("second",c,0,59,c,0,59),nt("millisec",d,0,999,d,0,999),t.setHours(u,h,c,d)},yt=function(t,e){var n,r,o,a=i.getLocaleElementsMainNode(e),s=a.dates.calendars.gregorian.days.format,l=a.dates.calendars.gregorian.days["stand-alone"],u=[s.wide,s.abbreviated,l.wide,l.abbreviated],h=!1;for(r in u){for(o in u[r]){n=u[r][o];var c=new RegExp(n+"\\b","i");if(c.test(t)){h=!0;break}}if(h)break;n=null}return n},Y=function(t,e,n,r,o){Ut.lastIndex=0;var a=Ut.exec(t);if(null===a){var s=o?2:0;lt(t,e,s)}var l=[{y:e.indexOf("y")},{M:e.indexOf("M")},{d:e.indexOf("d")}];l.sort(function(t,e){for(var n in t)break;for(var i in e)break;return t[n]-e[i]});var u,h,c,d,p,g,f=G(l,"d"),m=!1,v=!1;for(g=1;g<=3;g++){var y=a[g];(y.length>2||y>31)&&(u=y,m=!0,d=g-1)}for(m||(d=G(l,"y"),u=a[G(l,"y")+1]),g=0;g<3;g++)if(g!==d&&a[g+1]>12){c=a[g+1],v=!0,p=g;break}if(v){for(g=0;g<3;g++)if(g!==p&&g!==d){h=a[g+1];break}void 0===h&&(h=a[G(l,"M")+1])}else d===G(l,"d")?(c=a[G(l,"y")+1],h=a[G(l,"M")+1]):d===G(l,"M")?(c=a[G(l,"d")+1],h=a[G(l,"y")+1]):(c=a[G(l,"d")+1],h=a[G(l,"M")+1]);h-=1;var S=C(u,h);v&&f!==p&&h>12&&nt("month",c,0,11,c,1,12),nt("month",h,0,11,h+1,1,12),nt("day",c,1,S,c,1,S);var b=_(n);u=j(b,parseInt(u,10)),nt("year",u,0,9999,u,0,9999);var E=new Date(u,h,c),T=yt(t,r);if(null!==T){var A=z(r,T,0);E.getDay()!==A&&ht(T,E.getDate())}var x={value:E,offset:"",warning:"lenient parsing was used"};if(o){var I=t.substr(Ut.lastIndex);0===I.length?x.value.setHours(0,0,0,0):W(x.value,I,e,r,2)}return x.value=i.dateToLocalIso(x.value),x},K=function(t,e,n,r,o){var a=t;t=i.toUpper(t);var s,l,u,h,c=i.getLocaleElementsMainNode(r),d=c.dates.calendars.gregorian.months.format,p=c.dates.calendars.gregorian.months["stand-alone"],g=[d.wide,d.abbreviated,p.wide,p.abbreviated],f=!1;for(l in g){s=[];for(u in g[l])h=i.toUpper(g[l][u]),s.push({idx:u,name:h});s.sort(function(t,e){return e.idx-t.idx});for(u in s)if(h=s[u].name,t.indexOf(h)!==-1){f=!0,t=t.replace(h,"");break}if(f)break}if(!f)return Y(a,e,n,r,o);var m=q(r,h,2);nt("month",m,0,11,m,1,12);var v=yt(a,r),y=new RegExp(v+"\\W","i");null!==v&&(t=t.replace(y,"")),kt.lastIndex=0;var S=kt.exec(t);if(null===S){var b=o?2:0;lt(a,e,b)}var E=[{y:e.indexOf("y")},{d:e.indexOf("d")}];E.sort(function(t,e){for(var n in t)break;for(var i in e)break;return t[n]-e[i]});var T,A,x,I=!1;for(l=1;l<=2;l++){var O=S[l];(O.length>2||O>31)&&(T=O,I=!0,x=l-1)}I||(x=G(E,"y"),T=S[G(E,"y")+1]),A=x===G(E,"d")?S[G(E,"y")+1]:S[G(E,"d")+1];var M=_(n);T=j(M,parseInt(T,10)),nt("year",T,0,9999,T,0,9999);var D=new Date(T,m,A);if(null!==v){var P=z(r,v,0);D.getDay()!==P&&ht(v,D.getDate())}var w=C(T,m);nt("day",A,1,w,A,1,w);var R={value:D,offset:"",warning:"lenient parsing was used"};if(o){var L=t.substr(kt.lastIndex);0===L.length?R.value.setHours(0,0,0,0):W(R.value,L,e,r,2)}return R.value=i.dateToLocalIso(R.value),R},V=function(t,e,n,r){var o=g(n,"OraDateTimeConverter.parse");switch(o){case 0:return K(t,e,n,r,!1);case 1:var a=new Date;W(a,t,e,r,1);var s=i.dateToLocalIso(a),l={value:s,offset:"",warning:"lenient parsing was used"};return l;case 2:return K(t,e,n,r,!0)}return null},vt=function(t,e,n,r,o,a,s,l,u,h,c){var d,p,g,f=i.getLocaleElementsMainNode(t),_=f.dates.calendars.gregorian[e][o];return d="months"===e?q(t,n,a):z(t,n,a),p=_[r][u],g=_[r][h],nt(c,d,s,l,n,p,g),d},mt=function(t,e,n,i){e[n.timePart]=t,"h"===i||"hh"===i?12===t&&(e[n.timePart]=0):"k"!==i&&"kk"!==i||24===t&&(e[n.timePart]=0),nt(n.timePart,e[n.timePart],n.start1,n.end1,t,n.start2,n.end2)},s=function(t,e,n,r){var o=i.getLocaleElementsMainNode(r),a=o.dates.calendars.gregorian,s=a.eras.eraAbbr[1],l=i.trimNumber(s);t=t.replace(s,l);var u=J(e,n),h=new RegExp(u.regExp).exec(t);if(null===h)return V(t,e,n,r);for(var c,d=u.groups,p=null,g=null,f=null,m=null,v="",y=null,S=!1,b={hour:0,minute:0,second:0,millisec:0},E=o.dates.calendars.gregorian.dayPeriods.format.wide.pm,T=_(n),A=0,x=d.length;A<x;A++){var I=h[A+1];if(I){var O=d[A],M=parseInt(I,10),D=fe[O];switch(D.token){case"months":g=vt(r,D.token,I,D.mLen,D.style,D.matchIndex,0,11,"1","12","month name");break;case"days":c=I,m=vt(r,D.token,I,D.dLen,D.style,D.matchIndex,0,6,"sun","sat","weekday");break;case"time":mt(M,b,D,O);break;case"dayOfMonth":if(f=M,f>31)return V(t,e,n,r);break;case"monthIndex":if(g=M-1,g>11)return V(t,e,n,r);break;case"year":p=j(T,M),nt("year",p,0,9999,p,0,9999);break;case"ampm":S=i.toUpper(I).indexOf(i.toUpper(E))!==-1;break;case"tzhm":v=I.substr(-2),v=I.substr(0,3)+":"+v;break;case"tzhsepm":v=I;break;case"tzh":v=I+":00";break;case"tzid":y=I}}}var P=new Date;null===p&&(p=P.getFullYear()),null===g&&null===f?(g=P.getMonth(),f=P.getDate()):null===f&&(f=1);var w=C(p,g);nt("day",f,1,w,f,1,w),P.setFullYear(p,g,f),null!==m&&P.getDay()!==m&&ht(c,P.getDate()),S&&b.hour<12&&(b.hour+=12);var R=[p,g+1,f,b.hour,b.minute,b.second,b.millisec],L=i.partsToIsoString(R);if(null!==y){var N=Et(y,r),k=Tt(N,R,!1,!0,!0);v=-N.ofset(k),v=i.getTimeStringFromOffset("",v,!1,!0)}""!==v&&(L+=v);var U={value:L};return U},p=function(t,e,i){for(var r,o=i.replace(Wt,"\\\\$1"),a=["^"],s=0,l=0,u={locale:t,numberingSystem:e,calendar:"gregorian"};null!==(r=zt.exec(o));){var h=o.slice(l,r.index);if(l=zt.lastIndex,s+=n(h,a),!(s%2)){var c=r[0];"/"!==c&&"zzzz"!==c&&"zzz"!==c&&"zz"!==c&&"z"!==c&&(void 0!==fe[c]?(void 0!==fe[c].key&&(u[fe[c].key]=fe[c].value),"kk"===c||"HH"===c||"H"===c||"k"===c?u.hour12=!1:"KK"!==c&&"hh"!==c&&"h"!==c&&"K"!==c||(u.hour12=!0)):d(i,u,c))}}return u},v=function(t){var e=p("","",t),n=void 0!==e.year||void 0!==e.month||void 0!==e.weekday||void 0!==e.day,i=void 0!==e.hour||void 0!==e.minute||void 0!==e.second||void 0!==e.millisecond;return n&&i?2:i?1:0},f=function(t){var e=t.indexOf("T");return e===-1?0:e>0?2:1},g=function(t,e){if(void 0!==t.pattern)return v(t.pattern);var n=i.getGetOption(t,e),r=void 0!==n("hour","string",["2-digit","numeric"])||void 0!==n("minute","string",["2-digit","numeric"])||void 0!==n("second","string",["2-digit","numeric"])||void 0!==n("millisecond","string",["numeric"]),o=void 0!==n("year","string",["2-digit","numeric"])||void 0!==n("month","string",["2-digit","numeric","narrow","short","long"])||void 0!==n("day","string",["2-digit","numeric"])||void 0!==n("weekday","string",["narrow","short","long"]);if(o&&r)return 2;if(r)return 1;if(o)return 0;var a=n("formatType","string",["date","time","datetime"],"date");return"datetime"===a?2:"time"===a?1:0},ft=function(t,e){var n=Tt(t,e,!1,!0,!1),i=t.ofset(n),r=t.ofset(n+1);return Math.max(i,r)},gt=function(t,e,n){var r,o,a,s,l=t.isoStrParts,u=t.format,h=e.timeZone,c=(i.getGetOption(e,"OraDateTimeConverter.parse"),Et(h,n));switch(r=Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5]),u){case ne:var d=t.timeZone;o=d.split(":");var p=parseInt(o[0],10),g=parseInt(o[1],10);o=60*p+(i.startsWith(d,"-")?-g:g);break;case Jt:o=0}a=ft(c,l),r-=6e4*(a+o),s=c.parse(r,!1,!0,!1),a=-c.ofset(s),a-=o;var f=new Date(Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5])),_=f.getUTCMinutes()+a;f.setUTCHours(f.getUTCHours()+(_/60<<0),_%60),l[0]=f.getUTCFullYear(),l[1]=f.getUTCMonth()+1,l[2]=f.getUTCDate(),l[3]=f.getUTCHours(),l[4]=f.getUTCMinutes(),l[5]=f.getUTCSeconds()},st=function(t){var e=t.dateTime,n=2,i=e.split("T");return""===i[0]?n=1:void 0===i[1]&&(n=0),n},pt=function(t,e){var n,r="";switch(t){case 0:r=i.padZeros(e[0],4)+"-"+i.padZeros(e[1],2)+"-"+i.padZeros(e[2],2);break;case 1:r="T"+i.padZeros(e[3],2)+":"+i.padZeros(e[4],2)+":"+i.padZeros(e[5],2),n=e[6],n>0&&(r+="."+i.trimRightZeros(i.padZeros(n,3)));break;default:r=i.padZeros(e[0],4)+"-"+i.padZeros(e[1],2)+"-"+i.padZeros(e[2],2)+"T"+i.padZeros(e[3],2)+":"+i.padZeros(e[4],2)+":"+i.padZeros(e[5],2),n=e[6],n>0&&(r+="."+i.trimRightZeros(i.padZeros(n,3)))}return r},dt=function(t,e,n,r,o,a){var s=Et(t,o),l=Tt(s,e,n,r,a),u=s.ofset(l);return i.getTimeStringFromOffset("",u,!0,!0)},ct=function(t,e,n,r){var o,a,s,l=i.getGetOption(n,"OraDateTimeConverter.parse"),u=l("isoStrFormat","string",[Jt,ne,ee,Qt,te],te),h=l("dst","boolean",[!0,!1],!1),c=!0,d=e.isoStrParts,p=e.timeZone,g=n.timeZone,f=e.format,_=n.isoStrFormat,m=pt(t,d);if(0===t||"local"===_)return m;switch(1===t&&(c=!1),u){case ne:void 0===g&&f===ne?m+=p:void 0===g&&f===Qt?m+="":void 0===g&&f===Jt?m+="+00:00":void 0!==g&&(s=dt(g,d,h,c,r,!0),m+=s);break;case Jt:var v=0;if(void 0===g){if(f===ne){s=p.split(":");var y=parseInt(s[0],10),S=parseInt(s[1],10);v=60*y+(i.startsWith(s[0],"-")?-S:S),v=-v}}else o=Et(g,r),a=Tt(o,d,h,c,!0),s=o.ofset(a),v=s;if(0!==v){var C=new Date(Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6]));v=C.getUTCMinutes()+v,C.setUTCHours(C.getUTCHours()+(v/60<<0),v%60),d[0]=C.getUTCFullYear(),d[1]=C.getUTCMonth()+1,d[2]=C.getUTCDate(),d[3]=C.getUTCHours(),d[4]=C.getUTCMinutes(),d[5]=C.getUTCSeconds(),m=pt(t,d)}m+="Z";break;case te:void 0!==g?(s=dt(g,d,h,c,r,!0),m+=s):(s=p,s&&(m+=s))}return m},h=function(t,e,n,o){var a=i.getNumberingExtension(o);if(void 0===i.numeringSystems[a]&&(a="latn"),"latn"!==a){var l,u=[];for(l=0;l<t.length;l++){var h=i.numeringSystems[a].indexOf(t[l]);h!==-1?u.push(h):u.push(t[l])}t=u.join("")}(arguments.length<=2||void 0===n)&&(n={year:"numeric",month:"numeric",day:"numeric"});var c,d,p,_,m=i._ISO_DATE_REGEXP.test(t),v={};return m===!0?(p=t,c=f(t)):(d=n.pattern||r(n,e,o,"OraDateTimeConverter.parse"),c=g(n,"OraDateTimeConverter.parse"),v=s(t,d,n,e),p=v.value),_=i.getISOStrFormatInfo(p),void 0!==n.timeZone&&_.format!==Qt&&gt(_,n,e),p=ct(c,_,n,e),v.value=p,v},it=function(t,e){var n={isoStrFormat:Qt},r=i.getISOStrFormatInfo(t),o=i.getISOStrFormatInfo(e),a=r.format,s=o.format;return a===Qt||s===Qt?n:(n.isoStrFormat=Jt,n)},Q=function(t,e,n,i,r,o){var a=p(i,r,o.pattern);return a.pattern=o.pattern,void 0!==t&&(a.isoStrFormat=t),void 0!==e&&(a.timeZone=e),void 0!==n&&(a.dst=n),a["two-digit-year-start"]=_(o),a},tt=function(t,e,n,i){var r,o=!1;return void 0!==n&&(e.dst=n),r=t("year","string",["2-digit","numeric"]),void 0!==r&&(e.year=r,o=!0),r=t("era","string",["narrow","short","long"]),void 0!==r&&(e.era=r,o=!0),r=t("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==r&&(e.month=r,o=!0),r=t("day","string",["2-digit","numeric"]),void 0!==r&&(e.day=r,o=!0),r=t("weekday","string",["narrow","short","long"]),void 0!==r&&(e.weekday=r,o=!0),r=t("hour","string",["2-digit","numeric"]),void 0!==r&&(e.hour=r,o=!0,r=t("hour12","boolean",[!0,!1]),void 0===r&&(r=m(i)),e.hour12=r),r=t("minute","string",["2-digit","numeric"]),void 0!==r&&(e.minute=r,o=!0),r=t("second","string",["2-digit","numeric"]),void 0!==r&&(e.second=r,o=!0),r=t("millisecond","string",["numeric"]),void 0!==r&&(e.millisecond=r,o=!0),o},Z=function(t,e,n,i){var r=y(e,n,l.resolvedOptions),o=i("formatType","string",["date","time","datetime"],"date"),a=i("dateFormat","string",["short","medium","long","full"],"short"),s=i("timeFormat","string",["short","medium","long","full"],"short");t.formatType=o,"datetime"!==o&&"date"!==o||(t.dateFormat=a),"datetime"!==o&&"time"!==o||(t.timeFormat=s),t.patternFromOptions=r},et=function(t,e){var n=t("formatUsing","string",["displayName","calendar"]);void 0!==n&&(e.formatUsing=n),n=t("dateField","string",["day","week","month","year","hour","minute","second"]),void 0!==n&&(e.dateField=n),n=t("relativeTime","string",["fromNow","toNow"]),void 0!==n&&(e.relativeTime=n),n=t("dateOnly","boolean",[!0,!1]),void 0!==n&&(e.dateOnly=n)},$=function(t,e,n,i,o,a,s,l){var u,h={locale:l,numberingSystem:s,calendar:"gregorian"},c=0;for(u in t)c++;if(0===c)return h.year="numeric",h.month="numeric",h.day="numeric",h;void 0!==n&&(h.timeZone=n,void 0!==o&&(h.isoStrFormat=o)),et(e,h);var d=tt(e,h,i,a);return h["two-digit-year-start"]=_(t),d?(void 0!==n&&(u=e("timeZoneName","string",["short","long"]),void 0!==u&&(h.timeZoneName=u)),h.patternFromOptions=r(h,a,l,"OraDateTimeConverter.resolvedOptions"),h):(Z(h,t,a,e),h)},X=function(t,e,n){var i={year:"numeric",month:"numeric",day:"numeric"},o=r(i,t,e,"OraDateTimeConverter.resolvedOptions");return{calendar:"gregorian",locale:e,numberingSystem:n,year:"numeric",month:"numeric",day:"numeric",patternFromOptions:o}},_t=function(t){function e(e,n,r,o){var a=e.split("/"),s=a[0],l=a[1],u="",h="",c={},d=o[s];void 0!==d&&(u=d[l],void 0!==u&&(u=u.exemplarCity,void 0!==u&&(u=" "+u))),e=s+"/"+l;var p=t.supplemental.metazones,g=St(_,e,p);void 0!==r&&(g=r[g]),void 0!==g&&null!==g&&void 0!==g["long"]&&(h=g["long"].generic,void 0===h&&(h=g["long"].standard),
void 0!==h&&(h=" - "+h));var f="("+ie+")";return 0!==n&&(f=i.getTimeStringFromOffset(ie,n,!0,!0),f="("+f+")"),void 0===u||void 0===h?null:(c.offsetLocName=f+u+h,c.locName=u+h,c)}function n(n){var i,r,o;for(i in n){r=s.getZone(i,t),o=ft(r,_);var a=e(i,o,c,d);null!==a&&(p.push({id:i,displayName:a}),g[i]=o)}}var r=i.getLocaleElementsMainNodeKey(t);if(void 0!==Nt[r]){var o=Nt[r].availableTimeZones;if(void 0!==o)return o}var s=a.getInstance(),l={sensitivity:"variant"},u=i.getLocaleElementsMainNodeKey(t),h=i.getLocaleElementsMainNode(t),c=h.dates.timeZoneNames.metazone,d=h.dates.timeZoneNames.zone,p=[],g={},f=new Date,_=[f.getFullYear(),f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()],m=t.supplemental.timeZoneData;n(m.zones),n(m.links),p.sort(function(t,e){var n=g[e.id]-g[t.id],i=t.displayName.locName.localeCompare(e.displayName.locName,u,l);return n+i});for(var v=p.length,y=0;y<v;y++)p[y].displayName=p[y].displayName.offsetLocName;return void 0===Nt[r]&&(Nt[r]={},Nt[r].availableTimeZones=p),p},{getInstance:function(){return e||(e=t()),e}}}(),t.LengthValidator=function(t){this.Init(t)},t.LengthValidator.defaults={countBy:"codeUnit"},t.Object.createSubclass(t.LengthValidator,t.Validator,"oj.LengthValidator"),t.LengthValidator.prototype.Init=function(e){var n=e.countBy;if(t.LengthValidator.superclass.Init.call(this),this._min=void 0!==e.min?parseInt(e.min,10):null,this._max=void 0!==e.max?parseInt(e.max,10):null,isNaN(this._min))throw new Error("length validator's min option is not a number. min option is "+e.min);if(isNaN(this._max))throw new Error("length validator's max option is not a number. max option is "+e.min);if(null!==this._min&&this._min<0)throw new Error("length validator's min option cannot be less than 0. min option is "+e.min);if(null!==this._max&&this._max<1)throw new Error("length validator's max option cannot be less than 1. max option is "+e.max);this._countBy=void 0===n?t.LengthValidator.defaults.countBy:n,e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},t.LengthValidator.prototype.getHint=function(){var e,n=null,i=this._hint,r=i.exact,o=i.inRange,a=i.max,s=i.min,l=this._max,u=this._min,h=t.Translations;return null!==u&&null!==l?u!==l?(e={min:u,max:l},n=o?h.applyParameters(o,e):h.getTranslatedString("oj-validator.length.hint.inRange",e)):(e={length:u},n=r?h.applyParameters(r,e):h.getTranslatedString("oj-validator.length.hint.exact",e)):null!==u?(e={min:u},n=s?h.applyParameters(s,e):h.getTranslatedString("oj-validator.length.hint.min",e)):null!==l&&(e={max:l},n=a?h.applyParameters(a,e):h.getTranslatedString("oj-validator.length.hint.max",e)),n},t.LengthValidator.prototype.validate=function(e){var n,i,r,o=this._customMessageDetail,a=this._customMessageSummary,s="",l=this._max,u=a.tooLong,h=a.tooShort,c=o.tooLong,d=o.tooShort,p=this._min,g="",f=t.Translations;if(r=""+e,n=this._getLength(r),(null===p||n>=this._min)&&(null===l||n<=this._max))return r;throw n<this._min?(i={value:e,min:p},g=h?f.applyParameters(h,i):f.getTranslatedString("oj-validator.length.messageSummary.tooShort"),s=d?f.applyParameters(d,i):f.getTranslatedString("oj-validator.length.messageDetail.tooShort",i)):(i={value:e,max:l},g=u?f.applyParameters(u,i):f.getTranslatedString("oj-validator.length.messageSummary.tooLong"),s=c?f.applyParameters(c,i):f.getTranslatedString("oj-validator.length.messageDetail.tooLong",i)),new t.ValidatorError(g,s)},t.LengthValidator.prototype._getLength=function(e){var n,i,r=this._countBy.toLowerCase(),o=e.length,a=0;switch(r){case"codepoint":for(n=0;n<o;n++)55296===(63488&e.charCodeAt(n))&&a++;t.Assert.assert(a%2===0,"the number of surrogate chars must be an even number."),i=o-a/2;break;case"codeunit":default:i=o}return i}}),define("ojs/internal-deps/dvt/DvtToolkit",[],function(){var t;return t=function(){var t={};t.exportProperty=function(t,e,n){t[e]=n},t.Obj=function(){},t.Obj._GET_FUNCTION_NAME_REGEXP=/function\s+([\S^]+)\s*\(/,t.Obj.createSubclass=function(e,n,i){if(void 0!==e&&null!==e&&(void 0===n&&(n=Object),e!=n)){var r=t.Obj._tempSubclassConstructor;r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=n.prototype,i&&(e._typeName=i)}},t.Obj._tempSubclassConstructor=function(){},t.Obj.getTypeName=function(e){var n=e._typeName;if(null==n){var i=e.toString(),r=t.Obj._GET_FUNCTION_NAME_REGEXP.exec(i);r&&(n=r[1],e._typeName=n)}return n},t.Obj.prototype.getTypeName=function(){return t.Obj.getTypeName(this.constructor)},t.Obj.prototype.clone=function(){return null},t.Obj.prototype.mergeProps=function(t){},t.Obj.createCallback=function(t,e){return function(){return e.apply(t,arguments)}},t.Obj.defineConstant=function(t){return t},t.ArrayUtils=new Object,t.Obj.createSubclass(t.ArrayUtils,t.Obj),t.ArrayUtils.NONE=0,t.ArrayUtils.ADD=1,t.ArrayUtils.SUB=2,t.ArrayUtils.DIV=3,t.ArrayUtils.MULT=4,t.ArrayUtils.MOD=5,t.ArrayUtils.argsToArray=function(t){if(t){var e=new Array(t.length);if(t.length>0)for(var n=0;n<t.length;n++)e[n]=t[n];return e}return t},t.ArrayUtils.isArray=function(t){return"undefined"!=typeof t&&"[object Array]"===Object.prototype.toString.apply(t)},t.ArrayUtils.toFloat=function(e,n,i){if(!t.ArrayUtils.isArray(e))return e;n||(i=t.ArrayUtils.NONE),i=null===i||isNaN(i)?t.ArrayUtils.NONE:i,i!==t.ArrayUtils.NONE&&("number"!=typeof n&&(n=parseFloat(n)),isNaN(n)&&(i=t.ArrayUtils.NONE));var r,o=e.length;if(i===t.ArrayUtils.NONE)for(r=0;r<o;r++)e[r]=parseFloat(e[r]);else for(r=0;r<o;r++){var a=parseFloat(e[r]);switch(i){case t.ArrayUtils.MULT:a*=n;break;case t.ArrayUtils.ADD:a+=n;break;case t.ArrayUtils.SUB:a-=n;break;case t.ArrayUtils.DIV:a/=n;break;case t.ArrayUtils.MOD:a%=n}e[r]=a}return e},t.ArrayUtils.copy=function(t){var e;if(t){e=[];for(var n=t.length,i=0;i<n;i++)e.push(t[i])}return e},t.ArrayUtils.getIndex=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n}return-1},t.ArrayUtils.getLastIndex=function(t,e){if(t.lastIndexOf)return t.lastIndexOf(e);for(var n=t.length-1;n>=0;n--)if(t[n]===e)return n;return-1},t.ArrayUtils.equals=function(t,e){if(!t&&e)return!1;if(t&&!e)return!1;if(t||e){if(t.length!=e.length)return!1;for(var n=0;n<=t.length;n++)if(t[n]!==e[n])return!1;return!0}return!0},t.ArrayUtils.hasAnyMapItem=function(t,e){if(!t||!e)return!1;for(var n=0;n<e.length;n++)if(t[e[n]])return!0;return!1},t.ArrayUtils.hasAllMapItems=function(t,e){if(!t||!e)return!1;for(var n=0;n<e.length;n++)if(!t[e[n]])return!1;return!0},t.ArrayUtils.hasAnyItem=function(e,n){return t.ArrayUtils.hasAnyMapItem(t.ArrayUtils.createBooleanMap(e),n)},t.ArrayUtils.hasAllItems=function(e,n){return t.ArrayUtils.hasAllMapItems(t.ArrayUtils.createBooleanMap(e),n)},t.ArrayUtils.createBooleanMap=function(t){if(!t)return null;for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e},t.ArrayUtils.reduce=function(t,e){if(t.reduce)return t.reduce(e);for(var n=t.length,i=t[0],r=1;r<n;r++)i=e(i,t[r],r,t);return i},t.ArrayUtils.map=function(t,e){if(t.map)return t.map(e);for(var n=t.length,i=[],r=0;r<n;r++)i[r]=e(t[r],r,t);return i},t.ArrayUtils.forEach=function(t,e){if(t.map)t.forEach(e);else for(var n=t.length,i=0;i<n;i++)e(t[i],i,t)},t.StringUtils={},t.Obj.createSubclass(t.StringUtils,t.Obj),t.StringUtils._hasTrim=null!="hello".trim,t.StringUtils._hasEndsWith=null!="hello".endsWith,t.StringUtils.trim=function(e){return t.StringUtils._hasTrim?e.trim():e.replace(/^\s+|\s+$/g,"")},t.StringUtils.endsWith=function(e,n){return t.StringUtils._hasEndsWith?e.endsWith(n):e.match(n+"$")==n},t.StringUtils.processAriaLabel=function(t){var e=t;return e=e.replace(/(<|&#60;)/g,"&lt;"),e=e.replace(/(>|&#62;)/g,"&gt;"),e=e.replace(/&lt;b&gt;/g,""),e=e.replace(/&lt;\/b&gt;/g,""),e=e.replace(/&lt;i&gt;/g,""),e=e.replace(/&lt;\/i&gt;/g,""),e=e.replace(/\n/g,"; "),e=e.replace(/&#92;n/g,"; "),e=e.replace(/&lt;br&gt;/g,"; "),e=e.replace(/&lt;br\/&gt;/g,"; ")},t.Context=function(e,n,i){var r=n?n+"_svg":null;this._root=t.ToolkitUtils.createSvgDocument(r),e.appendChild(this._root),this._parentDiv=e,this._referenceDiv=i,this._implFactory=new j(this),this._defs=this._implFactory.newDefs(),t.ToolkitUtils.appendChildElem(this._root,this._defs),this._keyboardFocusArray=[],this._keyboardFocusIndex=0,this._dndEventManagers=[],this._defaultFontFamily=t.Context._DEFAULT_FONT_FAMILY,this._defaultFontSize=t.Context._DEFAULT_FONT_SIZE,this._normalizedFontFamilyCache={},this.Init(this._implFactory,this._root,n),t.ToolkitUtils.appendChildElem(this._root,this._stage.getElem())},t.Obj.createSubclass(t.Context,t.Obj),t.Context._DATATIP_POPUP_STYLE_CLASS="OraDVTDatatipPopup",t.Context._TOOLTIP_POPUP_STYLE_CLASS="OraDVTTooltipPopup",t.Context._DEFAULT_FONT_FAMILY="'Helvetica Neue',Helvetica,Arial,sans-serif",t.Context._DEFAULT_FONT_SIZE="12px",t.Context._id=0,t.Context.prototype.Init=function(e,n,i){this._implFactory=e;var r=(i?i:"_dvt"+t.Context._id)+"_stage";this._stage=new S(this,n,r),t.Context._id++,t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-family",this.getDefaultFontFamily()),t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-size",this.getDefaultFontSize()),this._tooltipManagers=new Object,this._customTooltipManagers=new Object,this._scheduler=null,this._globalDefsMap={}},t.Context.prototype.getDefaultFontFamily=function(){return this._defaultFontFamily},t.Context.prototype.setDefaultFontFamily=function(e){e&&(this._defaultFontFamily=this._normalizeFontFamily(e),t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-family",this.getDefaultFontFamily()))},t.Context.prototype.isDefaultFontFamily=function(t){return!!t&&this._defaultFontFamily===this._normalizeFontFamily(t)},t.Context.prototype.getDefaultFontSize=function(){return this._defaultFontSize},t.Context.prototype.setDefaultFontSize=function(e){e&&(this._defaultFontSize=e,t.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-size",this.getDefaultFontSize()))},t.Context.prototype._normalizeFontFamily=function(t){var e=this._normalizedFontFamilyCache[t];return e||(e=t.replace(/, /g,",").replace(/"/g,"'"),this._normalizedFontFamilyCache[t]=e),e},t.Context.prototype.getImplFactory=function(){return this._implFactory},t.Context.prototype.getStage=function(){return this._stage},t.Context.prototype.isReadyToRender=function(){if(null!=this._parentDiv.offsetParent)return!0;var t=window.getComputedStyle(this._parentDiv);return!(!t||"fixed"!=t.position)&&"none"!=t.display},t.Context.prototype.getSvgDocument=function(){return this._root},t.Context.prototype.setReadingDirection=function(t){this._readingDirection=t},t.Context.prototype.getReadingDirection=function(){return this._readingDirection},t.Context.prototype.existsGlobalDefReference=function(t){return this._globalDefsMap[t]>0},t.Context.prototype.increaseGlobalDefReference=function(t){null!=t&&(this._globalDefsMap[t]?this._globalDefsMap[t]++:this._globalDefsMap[t]=1)},t.Context.prototype.decreaseGlobalDefReference=function(t){if(null!=t){var e=this._globalDefsMap[t];e&&(1==e?delete this._globalDefsMap[t]:this._globalDefsMap[t]=e-1),this._globalDefsMap[t]||this.removeDefsById(t)}},t.Context.prototype.getTooltipManager=function(t){t||(t="_dvtTooltip");var e=this.getStage().getId();t+=e;var n=this._tooltipManagers[t];return n||(this._tooltipManagers[t]=this._implFactory.newTooltipManager(t)),this._tooltipManagers[t]},t.Context.prototype.hideTooltips=function(){for(var t in this._tooltipManagers)this._tooltipManagers[t].hideTooltip()},t.Context.prototype.getScheduler=function(){return this._scheduler||(this._scheduler=new i(this)),this._scheduler},t.Context.prototype.getDocumentUtils=function(){return this._implFactory.getDocumentUtils()},t.Context.prototype.pageToStageCoords=function(e,n){var i=this.getStageAbsolutePosition(),r=e-i.x,o=n-i.y;return new t.Point(r,o)},t.Context.prototype.stageToPageCoords=function(e,n){var i=this.getStageAbsolutePosition(),r=e+i.x,o=n+i.y;return new t.Point(r,o)},t.Context.prototype.getStageAbsolutePosition=function(){if(this._stageAbsolutePosition)return this._stageAbsolutePosition;var e=this._referenceDiv;if(!e){var n=this.getStage().getImpl().getSVGRoot();e=n.parentNode?n.parentNode:n}var i=t.Agent.getElementPosition(e);return this._stageAbsolutePosition=new t.Point(parseInt(i.x),parseInt(i.y)),this._stageAbsolutePosition},t.Context.prototype.clearStageAbsolutePosition=function(){this._stageAbsolutePosition=null},t.Context.prototype.isOffscreen=function(){var t=this.getStage().getImpl().getSVGRoot(),e=t.getBoundingClientRect();return e.bottom<0||e.right<0||e.top>(window.innerHeight||document.documentElement.clientHeight)||e.left>(window.innerWidth||document.documentElement.clientWidth)},t.Context.prototype.getCustomTooltipManager=function(t){t||(t="_dvtCustomTooltip");var e=this.getStage().getId();t+=e;var n=this._customTooltipManagers[t];return n||(this._customTooltipManagers[t]=new R(this,t)),this._customTooltipManagers[t]},t.Context.prototype.appendDefs=function(e){t.ToolkitUtils.appendChildElem(this._defs,e)},t.Context.prototype.getDefs=function(){return this._defs},t.Context.prototype.getImplFactory=function(){return this._implFactory},t.Context.prototype.removeDefs=function(t){t._obj&&t._obj.destroy(),this._defs.removeChild(t)},t.Context.prototype.removeDefsById=function(t){for(var e=this._defs.childNodes,n=e.length,i=0;i<n;i++){var r=e[i];if(r.id===t)return void this.removeDefs(r)}},t.Context.prototype.getRootAttribute=function(e){return t.ToolkitUtils.getAttrNullNS(this._root,e)},t.Context.resetUniqueSeeds=function(){t.Agent.isEnvironmentBrowser()||("undefined"!=typeof DvtAfComponent&&(DvtAfComponent._uniqueSeed=0),V._counter=0,t.ClipPath._uniqueSeed=0,t.SvgShapeUtils._uniqueSeed=0,t.Mask._uniqueSeed=0,t.Agent._bInitialized=!1)},t.Context.resetCaches=function(){t.Agent.isEnvironmentBrowser()||("undefined"!=typeof DvtAfComponent&&DvtAfStyleUtils.resetStyles(),t.OutputText._cache=null,t.TextUtils._cachedTextDimensions={},t.LedGaugeRenderer&&(t.LedGaugeRenderer._cache=null))},t.Context.prototype.setActiveElement=function(e){if(t.Agent.isEnvironmentBrowser()){this._activeElement&&(t.ToolkitUtils.removeAttrNullNS(this._activeElement.getElem(),"id"),this._activeElement=null);var n=e.getElem(),i=t.ToolkitUtils.getAttrNullNS(n,"id");i||(i=e.getId(),i?t.ToolkitUtils.setAttrNullNS(n,"id",i):(i=t.EventManager._getActiveElementId(),t.ToolkitUtils.setAttrNullNS(n,"id",i),this._activeElement=e)),e.applyAriaProperties(),"application"==this._role&&this._parentDiv.setAttribute("aria-activedescendant",i)}},t.Context.prototype.setAriaLabel=function(e){this._parentDiv.getAttribute("aria-label")||(e?this._parentDiv.setAttribute("aria-label",t.StringUtils.processAriaLabel(e)):this._parentDiv.removeAttribute("aria-label"))},t.Context.prototype.setAriaRole=function(t){t?this._parentDiv.setAttribute("role",t):this._parentDiv.removeAttribute("role"),this._role=t},t.Context.prototype.setTooltipAttachedCallback=function(t){this._tooltipAttachedCallback=t},t.Context.prototype.getTooltipAttachedCallback=function(){return this._tooltipAttachedCallback},t.Context.prototype.setTooltipStyleClass=function(t){this._tooltipStyleClass=t},t.Context.prototype.getTooltipStyleClass=function(){return this._tooltipStyleClass?this._tooltipStyleClass:t.Context._TOOLTIP_POPUP_STYLE_CLASS},t.Context.prototype.setDatatipStyleClass=function(t){this._datatipStyleClass=t},t.Context.prototype.getDatatipStyleClass=function(){return this._datatipStyleClass?this._datatipStyleClass:t.Context._DATATIP_POPUP_STYLE_CLASS},t.Context.prototype.resetCurrentKeyboardFocus=function(e){this._keyboardFocusArray&&0!==this._keyboardFocusArray.length&&(e.keyCode==t.KeyboardEvent.TAB&&e.shiftKey?this.setCurrentKeyboardFocus(this._keyboardFocusArray[this._keyboardFocusArray.length-1]):e.keyCode==t.KeyboardEvent.TAB&&this.setCurrentKeyboardFocus(this._keyboardFocusArray[0]))},t.Context.prototype.setKeyboardFocusArray=function(t){if(this._keyboardFocusArray=t,this._keyboardFocusIndex=0,t.length>0){var e=this._root.parentNode;e._currentObj=this._keyboardFocusArray[this._keyboardFocusIndex]}},t.Context.prototype.getCurrentKeyboardFocus=function(){return this._keyboardFocusArray.length<=this._keyboardFocusIndex?null:this._keyboardFocusArray[this._keyboardFocusIndex]},t.Context.prototype.setCurrentKeyboardFocus=function(e){var n=t.ArrayUtils.getIndex(this._keyboardFocusArray,e);if(n==-1)return!1;var i=this._keyboardFocusArray[n];this._keyboardFocusIndex=n;var r=this._root.parentNode;return r._currentObj=i,!0},t.Context.prototype.nextKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex+1];if(t){this._keyboardFocusIndex++;var e=this._root.parentNode;return e._currentObj=t,t}return null},t.Context.prototype.previousKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex-1];if(t){this._keyboardFocusIndex--;var e=this._root.parentNode;return e._currentObj=t,t}return null},t.Context.prototype.getNumberConverter=function(t){var e=this.getLocaleHelpers();return e.numberConverterFactory?e.numberConverterFactory.createConverter(t):null},t.Context.prototype.getLocaleHelpers=function(){return this._localeHelpers?this._localeHelpers:{}},t.Context.prototype.setLocaleHelpers=function(t){this._localeHelpers=t},t.Context.requestAnimationFrame=function(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,1e3/30)},t.Context.cancelAnimationFrame=function(t){window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)},t.Context.prototype.getContainer=function(){return this._parentDiv},t.Context.prototype.createOverlayDiv=function(){var t=document.createElement("div");return t.style.top="-100%",t.style.position="relative",t},t.Context.prototype.setOverlayAttachedCallback=function(t){this._overlayAttachedCallback=t},t.Context.prototype.getOverlayAttachedCallback=function(){return this._overlayAttachedCallback},t.Context.prototype.addDndEventManager=function(t){this._dndEventManagers.push(t)},t.Context.prototype.removeDndEventManager=function(t){var e=this._dndEventManagers.indexOf(t);this._dndEventManagers.splice(e,1)},t.Context.prototype.isLastDndEventManager=function(t){return this._dndEventManagers[this._dndEventManagers.length-1]===t};var e=function(){this._Init()};t.Obj.createSubclass(e,t.Obj),e.prototype._Init=function(){this._bLocked=!1},e.prototype.isLocked=function(){return this._bLocked},e.prototype.__lock=function(){this._bLocked=!0};var n=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(n,t.Obj),n._STATE_INITIALIZE=0,n._STATE_BEGIN=1,n._STATE_RUN=2,n.CalcProgress=function(t,e,n){var i=n-e;if(0==i)return.5;var r=(t-e)/i;return r>1&&(r=1),r},n.prototype.Init=function(t,e,i,r,o){this._context=t,this._scheduler=e,this.setDuration(i),this.setDelay(r),this.setEasing(o),this._bRunning=!1,this._startTime=null,this._progress=0,this._state=n._STATE_INITIALIZE,this._onInit=null,this._onInitObj=null,this._onStart=null,this._onStartObj=null,this._onEnd=null,this._onEndObj=null},n.prototype.getDuration=function(){return this._duration},n.prototype.setDuration=function(t){this._duration=t?t:.5},n.prototype.getDelay=function(){return this._delay},n.prototype.setDelay=function(t){this._delay=t?t:0},n.prototype.getEasing=function(){return this._easing},n.prototype.setEasing=function(e){this._easing=e?e:t.Easing.cubicInOut},n.prototype.setOnInit=function(t,e){this._onInit=t,e?this._onInitObj=e:this._onInitObj=null},n.prototype.getOnInit=function(){return[this._onInit,this._onInitObj]},n.prototype.setOnStart=function(t,e){this._onStart=t,e?this._onStartObj=e:this._onStartObj=null},n.prototype.getOnStart=function(){return[this._onStart,this._onStartObj]},n.prototype.setOnEnd=function(t,e){this._onEnd=t,e?this._onEndObj=e:this._onEndObj=null},n.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},n.prototype.isRunning=function(){return this._bRunning},n.prototype.play=function(e){e?this._play():this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))},n.prototype._play=function(){this._bRunning||(this._bRunning=!0,this.ProcessPlay(),this._scheduler.addScheduled(this)),this._context.isOffscreen()&&this.stop(!0),this._animationRequestId=null},n.prototype.stop=function(e){return this._animationRequestId?(t.Context.cancelAnimationFrame(this._animationRequestId),void(this._animationRequestId=null)):(this._scheduler.removeScheduled(this),e&&this.ProcessStep(1),void this.ProcessEnd())},n.prototype.processTime=function(t){if(this._bRunning){var e=t-this._startTime;if(e<0)return!1;var n=1e3*this.GetTotalDuration(),i=1;0!=n&&(i=e/n),i>1&&(i=1),this.ProcessStep(i);var r=i>=1;return r&&this.ProcessEnd(),r}},n.prototype.GetTotalDuration=function(){return this._delay+this._duration},n.prototype.ProcessPlay=function(){if(this._state==n._STATE_INITIALIZE&&this.ProcessInitialize(),this._state==n._STATE_BEGIN)this._startTime=(new Date).getTime(),this.ProcessStart();else{var t=1e3*this._progress*this.GetTotalDuration();this._startTime=(new Date).getTime()-t}this._state=n._STATE_RUN},n.prototype.ProcessInitialize=function(){this._onInit&&this._onInit.call(this._onInitObj),this.Initialize(),this._state=n._STATE_BEGIN},n.prototype.ProcessStart=function(){this._bRunning=!0,this._progress=0,this._onStart&&this._onStart.call(this._onStartObj)},n.prototype.ProcessStep=function(t){this._progress=t;var e=t;this._delay>0&&(e=n.CalcProgress(t,this._delay/this.GetTotalDuration(),1)),e>=0&&(this._easing&&(e=this._easing(e)),this.Step(e))},n.prototype.ProcessEnd=function(){this._bRunning&&(this._bRunning=!1,this._progress=1,this._state=n._STATE_BEGIN,this._onEnd&&this._onEnd.call(this._onEndObj))},n.prototype.Initialize=function(){},n.prototype.Step=function(t){};var i=function(t){this.Init(t)};t.Obj.createSubclass(i,t.Obj),i.prototype.Init=function(t){this._scheduledItems=new Array,this._bRunning=!1},i.prototype.HandleTimer=function(){for(var e=(new Date).getTime(),n=0;n<this._scheduledItems.length;n++){var r=this._scheduledItems[n];r.processTime(e)&&this.removeScheduled(r)}this._scheduledItems.length<1?(this._bRunning&&(this._bRunning=!1,this._animationRequestId&&t.Context.cancelAnimationFrame(this._animationRequestId)),this._animationRequestId=null):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.HandleTimer)),i._frameCount++},i.prototype.addScheduled=function(e){var n=t.ArrayUtils.getIndex(this._scheduledItems,e);n<0&&this._scheduledItems.push(e),this.play()},i.prototype.removeScheduled=function(e){var n=t.ArrayUtils.getIndex(this._scheduledItems,e);n>=0&&this._scheduledItems.splice(n,1)},i.prototype.play=function(){if(!this._bRunning){for(var e=0;e<this._scheduledItems.length;e++){var n=this._scheduledItems[e];n.isRunning()||n.play()}this._bRunning=!0,this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.HandleTimer))}},t.Animator=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.Animator,n),t.Animator.TYPE_NUMBER="typeNumber",t.Animator.TYPE_MATRIX="typeMatrix",t.Animator.TYPE_NUMBER_ARRAY="typeNumberArray",t.Animator.TYPE_COLOR="typeColor",t.Animator.TYPE_COLOR_ARRAY="typeColorArray",t.Animator.TYPE_GROW_POLYLINE="typeGrowPolyline",t.Animator.TYPE_RECTANGLE="typeRectangle",t.Animator.TYPE_POINT="typePoint",t.Animator.TYPE_PATH="typePath",t.Animator.TYPE_GROW_PATH="typeGrowPath",t.Animator.TYPE_FILL="typeFill",t.Animator.TYPE_STROKE="typeStroke",t.Animator.TYPE_POLYLINE="typePolyline",t.Animator._KEY_PREFIX="dvtAnimPropMap_",t.Animator.prototype.Init=function(e,n,i,r){t.Animator.superclass.Init.call(this,e,e.getScheduler(),n,i,r),this._context=e,this._props={}},t.Animator.prototype.addProp=function(e,n,i,o,a){var s=this.GetPropItem(n,i);if(s)s.destVal=a;else{var s=new r(e,n,i,o,a),l=t.Animator.GetKey(n);this._props[l]||(this._props[l]={}),this._props[l][t.Animator.GetKey(i)]=s}},t.Animator.prototype.removeProp=function(e,n){var i=this.GetPropItem(e,n);if(i){var r=i.destVal;return delete this._props[t.Animator.GetKey(e)][t.Animator.GetKey(n)],r}return null},t.Animator.prototype.getDestVal=function(t,e,n){var i=this.GetPropItem(t,e);return i?i.destVal:n?e.call(t):null},t.Animator.prototype.GetPropItem=function(e,n){var i=t.Animator.GetKey(e);return this._props[i]?this._props[i][t.Animator.GetKey(n)]:null},t.Animator.GetKey=function(e){return e._dvtAnimPropMapKey||(e._dvtAnimPropMapKey=t.Animator._KEY_PREFIX+Math.random()),e._dvtAnimPropMapKey},t.Animator.prototype.Initialize=function(){for(var t in this._props)for(var e in this._props[t]){var n=this._props[t][e];n.startVal=n.getter.call(n.obj)}},t.Animator.prototype.Step=function(t){for(var e in this._props)for(var n in this._props[e]){var i=this._props[e][n],r=i.type,a=i.obj,s=i.setter,l=i.destVal,u=i.startVal,h=o.interpolate(this._context,r,u,l,t);s.call(a,h)}};var r=function(t,e,n,i,r){this.type=t,this.obj=e,this.getter=n,this.setter=i,this.destVal=r,this.startVal=null};t.Obj.createSubclass(r,t.Obj),t.Playable=function(t){this.Init(t)},t.Obj.createSubclass(t.Playable,t.Obj),t.Playable.appendOnEnd=function(t,e,n){if(t&&e){var i=t.getOnEnd();if(i&&i[0]){var r=function(){i[0].call(i[1]),e.call(n)};t.setOnEnd(r)}else t.setOnEnd(e,n)}},t.Playable.prependOnEnd=function(t,e,n){if(t&&e){var i=t.getOnEnd();if(i&&i[0]){var r=function(){e.call(n),i[0].call(i[1])};t.setOnEnd(r)}else t.setOnEnd(e,n)}},t.Playable.appendOnStart=function(t,e,n){if(t&&e&&t.getOnStart&&t.setOnStart){var i=t.getOnStart();if(i&&i[0]){var r=function(){i[0].call(i[1]),e.call(n)};t.setOnStart(r)}else t.setOnStart(e,n)}},t.Playable.prependOnStart=function(t,e,n){if(t&&e&&t.getOnStart&&t.setOnStart){var i=t.getOnStart();if(i&&i[0]){var r=function(){e.call(n),i[0].call(i[1])};t.setOnStart(r)}else t.setOnStart(e,n)}},t.Playable.appendOnInit=function(t,e,n){if(t&&e&&t.getOnInit&&t.setOnInit){var i=t.getOnInit();if(i&&i[0]){var r=function(){i[0].call(i[1]),e.call(n)};t.setOnInit(r)}else t.setOnInit(e,n)}},t.Playable.prependOnInit=function(t,e,n){if(t&&e&&t.getOnInit&&t.setOnInit){var i=t.getOnInit();if(i&&i[0]){var r=function(){e.call(n),i[0].call(i[1])};t.setOnInit(r)}else t.setOnInit(e,n)}},t.Playable.prototype.Init=function(t){this.Context=t,this._onEnd=null,this._onEndObj=null},t.Playable.prototype.setOnEnd=function(t,e){this._onEnd=t,e?this._onEndObj=e:this._onEndObj=null,this.OnEndUpdated()},t.Playable.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},t.Playable.prototype.OnEndUpdated=function(){},t.Playable.prototype.getDuration=function(){return 0},t.Playable.prototype.initialize=function(){},t.Playable.prototype.play=function(t){},t.Playable.prototype.stop=function(t){},t.ParallelPlayable=function(e){var n;arguments&&arguments.length>1&&arguments[1]instanceof Array?n=arguments[1]:(n=t.ArrayUtils.argsToArray(arguments),n.splice(0,1)),this.Init(e,n)},t.Obj.createSubclass(t.ParallelPlayable,t.Playable),t.ParallelPlayable.prototype.Init=function(e,n){t.ParallelPlayable.superclass.Init.call(this,e),this._runningCounter=0,this._arPlayables=n?n:[],this._bStarted=!1},t.ParallelPlayable.prototype.getPlayables=function(){return this._arPlayables},t.ParallelPlayable.prototype.getDuration=function(){for(var e=0,n=0;n<this._arPlayables.length;n++){var i=this._arPlayables[n];i instanceof t.Playable&&(e=Math.max(e,i.getDuration()))}return e},t.ParallelPlayable.prototype.initialize=function(){for(var e=0;e<this._arPlayables.length;e++)this._arPlayables[e]instanceof t.Playable&&this._arPlayables[e].initialize()},t.ParallelPlayable.prototype.play=function(e){this._arPlayables.length>0?e?this._play():(this.initialize(),this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.DoEnd))},t.ParallelPlayable.prototype._play=function(){var e;if(!this._bStarted)for(var n=0;n<this._arPlayables.length;n++)e=this._arPlayables[n],e instanceof t.Playable&&(this._runningCounter++,t.Playable.appendOnEnd(e,this.OnPlayableEnd,this));for(var n=0;n<this._arPlayables.length;n++)e=this._arPlayables[n],e instanceof t.Playable&&e.play(!0);this._bStarted=!0,this._animationRequestId=null},t.ParallelPlayable.prototype.stop=function(e){if(this._animationRequestId)return t.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();for(var n,i=0;i<this._arPlayables.length;i++)n=this._arPlayables[i],n instanceof t.Playable&&n.stop(e)},t.ParallelPlayable.prototype.OnPlayableEnd=function(){this._runningCounter--,this._runningCounter<1&&this.DoEnd()},t.ParallelPlayable.prototype.DoEnd=function(){this._onEnd&&this._onEnd.call(this._onEndObj),this._animationRequestId=null},t.SequentialPlayable=function(e){var n;arguments&&arguments.length>1&&arguments[1]instanceof Array?n=arguments[1]:(n=t.ArrayUtils.argsToArray(arguments),n.splice(0,1)),this.Init(e,n)},t.Obj.createSubclass(t.SequentialPlayable,t.Playable),t.SequentialPlayable.prototype.Init=function(e,n){t.SequentialPlayable.superclass.Init.call(this,e),this._arPlayables=n?n:[],this._currIndex=-1,this._bStarted=!1},t.SequentialPlayable.prototype.getPlayables=function(){return this._arPlayables},t.SequentialPlayable.prototype.getDuration=function(){for(var e=0,n=0;n<this._arPlayables.length;n++){var i=this._arPlayables[n];i instanceof t.Playable&&(e+=i.getDuration())}return e},t.SequentialPlayable.prototype.initialize=function(){this._arPlayables.length>0&&this._arPlayables[0]instanceof t.Playable&&this._arPlayables[0].initialize()},t.SequentialPlayable.prototype.play=function(e){this._arPlayables&&this._arPlayables.length>0?e?this._play():(this.initialize(),this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._play))):this._animationRequestId=t.Context.requestAnimationFrame(t.Obj.createCallback(this,this.DoEnd))},t.SequentialPlayable.prototype._play=function(){if(this._bStarted){var e=this._arPlayables[this._currIndex];return void(e instanceof t.Playable&&e.play(!0))}var n;this._arPlayables[0]instanceof t.Playable&&(n=this._arPlayables[0]);var i;this._arPlayables[this._arPlayables.length-1]instanceof t.Playable&&(i=this._arPlayables[this._arPlayables.length-1]);for(var r,o=0;o<this._arPlayables.length-1;o++)r=this._arPlayables[o],r instanceof t.Playable&&t.Playable.appendOnEnd(r,this.DoSequenceStep,this);i&&t.Playable.appendOnEnd(i,this.DoEnd,this),this._bStarted=!0,this._currIndex=0,n&&n.play(!0),this._animationRequestId=null},t.SequentialPlayable.prototype.DoSequenceStep=function(){var e=this._arPlayables[++this._currIndex];e instanceof t.Playable?e.play(!0):this.DoSequenceStep()},t.SequentialPlayable.prototype.stop=function(e){if(this._animationRequestId)return t.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();if(this._arPlayables)for(var n,i=this._currIndex;i<this._arPlayables.length;i++)n=this._arPlayables[i],n&&n instanceof t.Playable&&n.stop(e)},t.SequentialPlayable.prototype.DoEnd=function(){this._onEnd&&this._onEnd.call(this._onEndObj),this._animationRequestId=null},t.BlackBoxAnimationHandler=function(){},t.Obj.createSubclass(t.BlackBoxAnimationHandler,t.Obj),t.BlackBoxAnimationHandler.ALPHA_FADE="alphaFade",t.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT="conveyorFromRight",t.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT="conveyorFromLeft",t.BlackBoxAnimationHandler.CUBE_TO_RIGHT="cubeToRight",t.BlackBoxAnimationHandler.CUBE_TO_LEFT="cubeToLeft",t.BlackBoxAnimationHandler.FLIP_RIGHT="flipRight",t.BlackBoxAnimationHandler.FLIP_LEFT="flipLeft",t.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT="transitionToRight",t.BlackBoxAnimationHandler.TRANSITION_TO_LEFT="transitionToLeft",t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT="slideToRight",t.BlackBoxAnimationHandler.SLIDE_TO_LEFT="slideToLeft",t.BlackBoxAnimationHandler.ZOOM="zoom",t.BlackBoxAnimationHandler.isSupported=function(e){return e==t.BlackBoxAnimationHandler.ALPHA_FADE||e==t.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT||e==t.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT||e==t.BlackBoxAnimationHandler.CUBE_TO_RIGHT||e==t.BlackBoxAnimationHandler.CUBE_TO_LEFT||e==t.BlackBoxAnimationHandler.FLIP_RIGHT||e==t.BlackBoxAnimationHandler.FLIP_LEFT||e==t.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT||e==t.BlackBoxAnimationHandler.TRANSITION_TO_LEFT||e==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT||e==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT||e==t.BlackBoxAnimationHandler.ZOOM;
},t.BlackBoxAnimationHandler.getInAnimation=function(e,n,i,r,o){return n==t.BlackBoxAnimationHandler.ALPHA_FADE?new t.AnimFadeIn(e,i,o):n==t.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT?new a(e,i,t.BaseAnimation.DIR_E,o):n==t.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT?new a(e,i,t.BaseAnimation.DIR_W,o):n==t.BlackBoxAnimationHandler.CUBE_TO_RIGHT?new h(e,i,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_CLOCKWISE,o):n==t.BlackBoxAnimationHandler.CUBE_TO_LEFT?new h(e,i,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,o):n==t.BlackBoxAnimationHandler.FLIP_RIGHT?new l(e,i,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_CLOCKWISE,o):n==t.BlackBoxAnimationHandler.FLIP_LEFT?new l(e,i,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,o):n==t.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT?new t.AnimScaleFadeIn(e,i,r,t.BaseAnimation.DIR_NW,.5,o):n==t.BlackBoxAnimationHandler.TRANSITION_TO_LEFT?new t.AnimScaleFadeIn(e,i,r,t.BaseAnimation.DIR_NE,.5,o):n==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(t.BlackBoxAnimationHandler._offsetObjects(i,-r.w,0),new t.AnimMoveBy(e,i,new t.Point(r.w,0),o)):n==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(t.BlackBoxAnimationHandler._offsetObjects(i,r.w,0),new t.AnimMoveBy(e,i,new t.Point((-r.w),0),o)):n==t.BlackBoxAnimationHandler.ZOOM?new t.AnimScaleFadeIn(e,i,r,t.BaseAnimation.DIR_C,.5,o):null},t.BlackBoxAnimationHandler.getCombinedAnimation=function(e,n,i,r,o,a){return n==t.BlackBoxAnimationHandler.ALPHA_FADE?new p(e,i,r,a):n==t.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT?new d(e,i,r,t.BaseAnimation.DIR_W,t.BaseAnimation.DIR_E,a):n==t.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT?new d(e,i,r,t.BaseAnimation.DIR_E,t.BaseAnimation.DIR_W,a):n==t.BlackBoxAnimationHandler.CUBE_TO_RIGHT?new t.CombinedAnimCube(e,i,r,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_CLOCKWISE,a):n==t.BlackBoxAnimationHandler.CUBE_TO_LEFT?new t.CombinedAnimCube(e,i,r,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,a):n==t.BlackBoxAnimationHandler.FLIP_RIGHT?new t.CombinedAnimFlip(e,i,r,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_CLOCKWISE,a):n==t.BlackBoxAnimationHandler.FLIP_LEFT?new t.CombinedAnimFlip(e,i,r,t.BaseAnimation.AXIS_Y,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,a):n==t.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT?new g(e,i,r,o,t.BaseAnimation.DIR_SE,t.BaseAnimation.DIR_NW,.5,a):n==t.BlackBoxAnimationHandler.TRANSITION_TO_LEFT?new g(e,i,r,o,t.BaseAnimation.DIR_SW,t.BaseAnimation.DIR_NE,.5,a):n==t.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(t.BlackBoxAnimationHandler._offsetObjects(r,-o.w,0),new t.CombinedAnimMoveBy(e,i,r,new t.Point(o.w,0),new t.Point(o.w,0),a)):n==t.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(t.BlackBoxAnimationHandler._offsetObjects(r,o.w,0),new t.CombinedAnimMoveBy(e,i,r,new t.Point((-o.w),0),new t.Point((-o.w),0),a)):n==t.BlackBoxAnimationHandler.ZOOM?new g(e,i,r,o,t.BaseAnimation.DIR_C,t.BaseAnimation.DIR_C,.5,a):null},t.BlackBoxAnimationHandler._offsetObjects=function(e,n,i){if(e.length)for(var r=0;r<e.length;r++)t.BlackBoxAnimationHandler._offsetObjects(e[r],n,i);else e&&e.setTranslate(e.getTranslateX()+n,e.getTranslateY()+i)},t.DataAnimationHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.DataAnimationHandler,t.Obj),t.DataAnimationHandler._OVERLAP_RATIO=.4,t.DataAnimationHandler.prototype.Init=function(t,e){this._context=t,this._deleteContainer=e,this._playables=[]},t.DataAnimationHandler.prototype.getCtx=function(){return this._context},t.DataAnimationHandler.prototype.constructAnimation=function(t,e){if(e&&!this._context.isOffscreen()){if(e=e.slice(0),t)for(var n=0;n<t.length;n++){var i=t[n];if(i){for(var r=i.getId(),o=!1,a=0;a<e.length;a++){var s=e[a];if(s){var l=s.getId();if(r===l||r&&r.equals&&r.equals(l)){s.animateUpdate(this,i),e.splice(a,1),o=!0;break}}}o||i.animateDelete(this,this._deleteContainer)}}for(var u=0;u<e.length;u++)e[u]&&e[u].animateInsert(this)}},t.DataAnimationHandler.prototype.add=function(t,e){if(t){for(e||(e=0);this._playables.length<=e;)this._playables.push(new Array);this._playables[e].push(t)}},t.DataAnimationHandler.prototype.getAnimation=function(e){for(var n=[],i=0;i<this._playables.length;i++)if(this._playables[i].length>0){var r=new t.ParallelPlayable(this._context,this._playables[i]);n.push(r)}if(e){for(var o=[],a=0,s=0;s<n.length;s++){if(a>0){var l=new t.CustomAnimation(this._context,null,a);o.push(new t.SequentialPlayable(this._context,[l,n[s]]))}else o.push(n[s]);a+=(1-t.DataAnimationHandler._OVERLAP_RATIO)*n[s].getDuration()}return new t.ParallelPlayable(this._context,o)}return new t.SequentialPlayable(this._context,n)},t.DataAnimationHandler.prototype.getNumPlayables=function(){return this._playables.length},t.Easing=function(){this.Init()},t.Obj.createSubclass(t.Easing,t.Obj),t.Easing.linear=function(t){return t},t.Easing.quadraticIn=function(e){return t.Easing.PolyIn(e,2)},t.Easing.quadraticOut=function(e){return t.Easing.PolyOut(e,2)},t.Easing.quadraticInOut=function(e){return t.Easing.PolyInOut(e,2)},t.Easing.cubicIn=function(e){return t.Easing.PolyIn(e,3)},t.Easing.cubicOut=function(e){return t.Easing.PolyOut(e,3)},t.Easing.cubicInOut=function(e){return t.Easing.PolyInOut(e,3)},t.Easing.backOut=function(t,e){return e||(e=1.70158),t=1-t,1-t*t*((e+1)*t-e)},t.Easing.backIn=function(t,e){return e||(e=1.70158),t*t*((e+1)*t-e)},t.Easing.elasticIn=function(t,e,n){if(t<=0||t>=1)return t;n||(n=.45);var i;return!e||e<1?(e=1,i=n/4):i=n/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n))},t.Easing.elasticOut=function(e,n,i){return 1-t.Easing.elasticIn(1-e,n,i)},t.Easing.PolyIn=function(t,e){return t<0?0:t>1?1:Math.pow(t,e)},t.Easing.PolyOut=function(t,e){return t<0?0:t>1?1:1-Math.pow(1-t,e)},t.Easing.PolyInOut=function(t,e){return t<0?0:t>1?1:t<.5?.5*Math.pow(2*t,e):.5*(2-Math.pow(2*(1-t),e))},t.Easing.prototype.Init=function(){};var o=function(){this.Init()};t.Obj.createSubclass(o,t.Obj),o.addInterpolator=function(t,e){o._map[t]=e},o.removeInterpolator=function(t){delete o._map[t]},o.interpolate=function(t,e,n,i,r){var a=o._getInterpolator(e);return a?a(t,n,i,r):i},o._getInterpolator=function(t){return o._map[t]},o.InterpolateNumber=function(e,n,i,r){return t.Math.interpolateNumber(n,i,r)},o.InterpolateNumberArray=function(t,e,n,i){for(var r=e.length,a=n.length,s=[],l=0;l<Math.max(r,a);l++){var u,h;u=l<r?e[l]:e[r-1],h=l<a?n[l]:n[a-1],s.push(o.InterpolateNumber(t,u,h,i))}return s},o.InterpolateMatrix=function(e,n,i,r){var a=o.InterpolateNumber(e,n.getA(),i.getA(),r),s=o.InterpolateNumber(e,n.getB(),i.getB(),r),l=o.InterpolateNumber(e,n.getC(),i.getC(),r),u=o.InterpolateNumber(e,n.getD(),i.getD(),r),h=o.InterpolateNumber(e,n.getTx(),i.getTx(),r),c=o.InterpolateNumber(e,n.getTy(),i.getTy(),r);return new t.Matrix(a,s,l,u,h,c)},o.InterpolateColor=function(e,n,i,r){return t.ColorUtils.interpolateColor(n,i,r)},o.InterpolateColorArray=function(t,e,n,i){for(var r=e.length,a=n.length,s=[],l=0;l<Math.max(r,a);l++){var u,h;u=l<r?e[l]:e[r-1],h=l<a?n[l]:n[a-1],s.push(o.InterpolateColor(t,u,h,i))}return s},o.InterpolateGrowPolyline=function(t,e,n,i){if(0===i)return[n[0],n[1]];if(1===i)return n;for(var r,a=n.length,s=[n[0],n[1]],l=o.CalcPolylineLength(n),u=i*l,h=0,c=2;c<a-1;c+=2){var d=n[c-2],p=n[c-1],g=n[c],f=n[c+1];if(r=o.CalcPolylineLength([d,p,g,f]),h+r>u){var _=(u-h)/r,m=g-d,v=f-p;s.push(d+_*m),s.push(p+_*v);break}h+=r,s.push(g),s.push(f)}return s},o.InterpolateGrowPath=function(t,e,n,i){if(0===i)return[n[0],n[1]];if(1===i)return n;for(var r,a,s,l,u,h,c,d,p,g=n.length,f=[],_=o.CalcPathLength(n),m=i*_,v=0,y=0;y<g;y++){var S,C=n[y];switch(C){case"M":a=n[++y],s=n[++y],d=a,p=s,S=[d,p,d,p];break;case"L":a=n[++y],s=n[++y],S=[d,p,a,s];break;case"Q":l=n[++y],u=n[++y],a=n[++y],s=n[++y],S=[d,p,a,s];break;case"C":l=n[++y],u=n[++y],h=n[++y],c=n[++y],a=n[++y],s=n[++y],S=[d,p,a,s]}if(r=o.CalcPolylineLength(S),v+r>m){var b=(m-v)/r;switch(f.push(C),C){case"Q":f.push(d+b*(l-d),p+b*(u-p));break;case"C":f.push(d+b*(l-d),p+b*(u-p),d+b*(h-d),p+b*(c-p))}f.push(d+b*(a-d),p+b*(s-p));break}switch(v+=r,f.push(C),C){case"Q":f.push(l,u);break;case"C":f.push(l,u,h,c)}f.push(a),f.push(s),d=a,p=s}return f},o.CalcPolylineLength=function(t){for(var e,n,i,r,o=0,a=0;a<t.length;a+=2){if(i=t[a],r=t[a+1],a>0)if(i===e)o+=Math.abs(r-n);else if(r===n)o+=Math.abs(i-e);else{var s=Math.abs(i-e),l=Math.abs(r-n);o+=Math.sqrt(s*s+l*l)}e=i,n=r}return o},o.CalcPathLength=function(t){for(var e,n,i,r,o,a=0,s=0;s<t.length;){switch(o=t[s]){case"M":i=t[s+1],r=t[s+2],e=i,n=r,s+=3;continue;case"L":i=t[s+1],r=t[s+2],s+=3;break;case"Q":i=t[s+3],r=t[s+4],s+=5;break;case"C":i=t[s+5],r=t[s+6],s+=7}if(s>0)if(i===e)a+=Math.abs(r-n);else if(r===n)a+=Math.abs(i-e);else{var l=Math.abs(i-e),u=Math.abs(r-n);a+=Math.sqrt(l*l+u*u)}e=i,n=r}return a},o.InterpolateRectangle=function(e,n,i,r){var a=o.InterpolateNumber(e,n.x,i.x,r),s=o.InterpolateNumber(e,n.y,i.y,r),l=o.InterpolateNumber(e,n.w,i.w,r),u=o.InterpolateNumber(e,n.h,i.h,r);return new t.Rectangle(a,s,l,u)},o.InterpolatePoint=function(e,n,i,r){var a=o.InterpolateNumber(e,n.x,i.x,r),s=o.InterpolateNumber(e,n.y,i.y,r);return new t.Point(a,s)},o.InterpolatePath=function(t,e,n,i){var r=e.length,a=n.length;if(r!=a)return n;for(var s=[],l=0,u=0;l<r&&u<a;){var h=e[l],c=n[u],d=!isNaN(h),p=!isNaN(c);d||p?d&&p&&s.push(o.InterpolateNumber(t,h,c,i)):h===c&&s.push(h),l++,u++}return s},o.InterpolateFill=function(e,n,i,r){if(n instanceof t.SolidFill&&i instanceof t.SolidFill){var a=o.InterpolateColor(e,n.getColor(),i.getColor(),r),s=o.InterpolateNumber(e,n.getAlpha(),i.getAlpha(),r);return new t.SolidFill(a,s)}return i},o.InterpolateStroke=function(e,n,i,r){if(n instanceof t.SolidStroke&&i instanceof t.SolidStroke){var a=o.InterpolateColor(e,n.getColor(),i.getColor(),r),s=o.InterpolateNumber(e,n.getAlpha(),i.getAlpha(),r),l=o.InterpolateNumber(e,n.getWidth(),i.getWidth(),r),u=i.clone();return u.setColor(a),u.setAlpha(s),u.setWidth(l),u}return i},o.InterpolatePolyline=function(t,e,n,i){for(var r=e.length,a=n.length,s=[],l=0;l<Math.max(r,a);l++){var u=2;l%2==1&&(u=1);var h,c;h=l<r?e[l]:e[r-u],c=l<a?n[l]:n[a-u],s.push(o.InterpolateNumber(t,h,c,i))}if(a<r)for(var d=s.length,p=s[d-2],g=s[d-1],l=d-4;l>=0;l-=2){var f=s[l],_=s[l+1];if(f!=p||_!=g)break;s.splice(l,2)}return s},o.prototype.Init=function(){},o._map={},o._map[t.Animator.TYPE_NUMBER]=o.InterpolateNumber,o._map[t.Animator.TYPE_MATRIX]=o.InterpolateMatrix,o._map[t.Animator.TYPE_NUMBER_ARRAY]=o.InterpolateNumberArray,o._map[t.Animator.TYPE_COLOR]=o.InterpolateColor,o._map[t.Animator.TYPE_COLOR_ARRAY]=o.InterpolateColorArray,o._map[t.Animator.TYPE_GROW_POLYLINE]=o.InterpolateGrowPolyline,o._map[t.Animator.TYPE_RECTANGLE]=o.InterpolateRectangle,o._map[t.Animator.TYPE_POINT]=o.InterpolatePoint,o._map[t.Animator.TYPE_PATH]=o.InterpolatePath,o._map[t.Animator.TYPE_GROW_PATH]=o.InterpolateGrowPath,o._map[t.Animator.TYPE_FILL]=o.InterpolateFill,o._map[t.Animator.TYPE_STROKE]=o.InterpolateStroke,o._map[t.Animator.TYPE_POLYLINE]=o.InterpolatePolyline,t.Timer=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.Timer,t.Obj),t.Timer.prototype.Init=function(t,e,n,i,r){this._interval=e,this._callback=n,this._callbackObj=i,this._repeatCount=r,this._bRunning=!1,this._numIterations=0},t.Timer.prototype.start=function(){this._bRunning||(this._bRunning=!0,this.StartTimer())},t.Timer.prototype.stop=function(){this._bRunning&&(this._bRunning=!1,this.StopTimer())},t.Timer.prototype.reset=function(){this._bRunning&&this.stop(),this._numIterations=0},t.Timer.prototype.isRunning=function(){return this._bRunning},t.Timer.prototype.HandleTimer=function(){this._callback&&(this._callback.call(this._callbackObj),this._repeatCount&&(this._numIterations++,this._numIterations>=this._repeatCount&&this.stop()))},t.Timer.prototype.setInterval=function(t){var e=t;e<0&&(e=0);var n=this._bRunning;n&&this.stop(),this._interval=e,n&&this.start()},t.Timer.prototype.getInterval=function(){return this._interval},t.Timer.prototype.StartTimer=function(){var t=this,e=this.HandleTimer;this._timerId=window.setInterval(function(){e.call(t)},this.getInterval())},t.Timer.prototype.StopTimer=function(){this._timerId&&(window.clearInterval(this._timerId),this._timerId=null)},t.BaseAnimation=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.BaseAnimation,t.Playable),t.BaseAnimation.EASING_LINEAR=1,t.BaseAnimation.EASING_CUBIC_IN_OUT=2,t.BaseAnimation.EASING_CUBIC_IN=3,t.BaseAnimation.EASING_CUBIC_OUT=4,t.BaseAnimation.EASING_QUADRATIC_IN_OUT=5,t.BaseAnimation.EASING_QUADRATIC_IN=6,t.BaseAnimation.EASING_QUADRATIC_OUT=7,t.BaseAnimation.EASING_BOUNCE_IN=8,t.BaseAnimation.EASING_BOUNCE_OUT=9,t.BaseAnimation.EASING_ELASTIC_IN=10,t.BaseAnimation.EASING_ELASTIC_OUT=11,t.BaseAnimation.DIR_C=1,t.BaseAnimation.DIR_N=2,t.BaseAnimation.DIR_NE=3,t.BaseAnimation.DIR_E=4,t.BaseAnimation.DIR_SE=5,t.BaseAnimation.DIR_S=6,t.BaseAnimation.DIR_SW=7,t.BaseAnimation.DIR_W=8,t.BaseAnimation.DIR_NW=9,t.BaseAnimation.AXIS_X=1,t.BaseAnimation.AXIS_Y=2,t.BaseAnimation.ROT_DIR_CLOCKWISE=1,t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE=2,t.BaseAnimation.GetEasingFunction=function(e){switch(e){case t.BaseAnimation.EASING_LINEAR:return t.Easing.linear;case t.BaseAnimation.EASING_CUBIC_IN:return t.Easing.cubicIn;case t.BaseAnimation.EASING_CUBIC_OUT:return t.Easing.cubicOut;case t.BaseAnimation.EASING_QUADRATIC_IN_OUT:return t.Easing.quadraticInOut;case t.BaseAnimation.EASING_QUADRATIC_IN:return t.Easing.quadraticIn;case t.BaseAnimation.EASING_QUADRATIC_OUT:return t.Easing.quadraticOut;case t.BaseAnimation.EASING_BOUNCE_IN:return t.Easing.backIn;case t.BaseAnimation.EASING_BOUNCE_OUT:return t.Easing.backOut;case t.BaseAnimation.EASING_ELASTIC_IN:return t.Easing.elasticIn;case t.BaseAnimation.EASING_ELASTIC_OUT:return t.Easing.elasticOut;case t.BaseAnimation.EASING_CUBIC_IN_OUT:default:return t.Easing.cubicInOut}},t.BaseAnimation.GetCompassPoint=function(e,n){switch(n){case t.BaseAnimation.DIR_N:return new t.Point(e.x+.5*e.w,e.y);case t.BaseAnimation.DIR_NE:return new t.Point(e.x+e.w,e.y);case t.BaseAnimation.DIR_E:return new t.Point(e.x+e.w,e.y+.5*e.h);case t.BaseAnimation.DIR_SE:return new t.Point(e.x+e.w,e.y+e.h);case t.BaseAnimation.DIR_S:return new t.Point(e.x+.5*e.w,e.y+e.h);case t.BaseAnimation.DIR_SW:return new t.Point(e.x,e.y+e.h);case t.BaseAnimation.DIR_W:return new t.Point(e.x,e.y+.5*e.h);case t.BaseAnimation.DIR_NW:return new t.Point(e.x,e.y);case t.BaseAnimation.DIR_C:default:return new t.Point(e.x+.5*e.w,e.y+.5*e.h)}},t.BaseAnimation.GetAlignCompassPoint=function(e,n,i){var r=t.BaseAnimation.GetCompassPoint(n,i);switch(i){case t.BaseAnimation.DIR_N:return new t.Point(r.x-.5*e.w,r.y);case t.BaseAnimation.DIR_NE:return new t.Point(r.x-e.w,r.y);case t.BaseAnimation.DIR_E:return new t.Point(r.x-e.w,r.y-.5*e.h);case t.BaseAnimation.DIR_SE:return new t.Point(r.x-e.w,r.y-e.h);case t.BaseAnimation.DIR_S:return new t.Point(r.x-.5*e.w,r.y-e.h);case t.BaseAnimation.DIR_SW:return new t.Point(r.x,r.y-e.h);case t.BaseAnimation.DIR_W:return new t.Point(r.x,r.y-.5*e.h);case t.BaseAnimation.DIR_NW:return new t.Point(r.x,r.y);case t.BaseAnimation.DIR_C:default:return new t.Point(r.x-.5*e.w,r.y-.5*e.h)}},t.BaseAnimation.prototype.Init=function(e,n,i,r){t.BaseAnimation.superclass.Init.call(this,e),this._context=e,n instanceof Array?this._arObjects=n:this._arObjects=[n],this._duration=i?i:.5,this._delay=r?r:0,this._easing=t.BaseAnimation.EASING_CUBIC_IN_OUT,this._bInitialized=!1,this._bSaveAndRestoreOriginalMatrices=!1,this._origMatrixArray=null,this._bHideObjectsOnEnd=!1,this.CreateAnimator(e)},t.BaseAnimation.prototype.GetContext=function(){return this._context},t.BaseAnimation.prototype.isRunning=function(){return!!this._animator&&this._animator.isRunning()},t.BaseAnimation.prototype.initialize=function(){this._bInitialized||(this._initializeEndStates(this._arObjects),this._initializeStartStates(this._arObjects),this.InitializePlay(),this._bInitialized=!0)},t.BaseAnimation.prototype.play=function(t){this.initialize(),this._animator&&this._animator.play(t)},t.BaseAnimation.prototype.stop=function(t){this._animator&&this._animator.stop(t)},t.BaseAnimation.prototype.getDuration=function(){return this._duration},t.BaseAnimation.prototype.setDuration=function(t){this._duration=t?t:0,this._animator&&this._animator.setDuration(this._duration)},t.BaseAnimation.prototype.getDelay=function(){return this._delay},t.BaseAnimation.prototype.setDelay=function(t){this._delay=t?t:0,this._animator&&this._animator.setDelay(this._delay)},t.BaseAnimation.prototype.getEasing=function(){return this._easing},t.BaseAnimation.prototype.setEasing=function(e){this._easing=e,this._animator&&this._animator.setEasing(t.BaseAnimation.GetEasingFunction(this._easing))},t.BaseAnimation.prototype.CreateAnimator=function(e){this._animator=new t.Animator(e,this._duration,this._delay,t.BaseAnimation.GetEasingFunction(this._easing)),this._animator.setOnEnd(this.OnAnimEnd,this)},t.BaseAnimation.prototype.OnAnimEnd=function(){this._bHideObjectsOnEnd&&this.HideObjects(),this._bSaveAndRestoreOriginalMatrices&&this.RestoreOriginalMatrices(),this._onEnd&&this._onEnd.call(this._onEndObj)},t.BaseAnimation.prototype.InitializePlay=function(){},t.BaseAnimation.prototype._initializeStartStates=function(t){if(t)for(var e,n=0;n<t.length;n++)e=t[n],e&&(this._bSaveAndRestoreOriginalMatrices&&(this._origMatrixArray||(this._origMatrixArray=[]),this._origMatrixArray.push(e.getMatrix())),this.InitStartState(e))},t.BaseAnimation.prototype._initializeEndStates=function(t){if(t)for(var e,n=0;n<t.length;n++)e=t[n],e&&this.InitEndState(e)},t.BaseAnimation.prototype.InitStartState=function(t){},t.BaseAnimation.prototype.InitEndState=function(t){},t.BaseAnimation.prototype.ShowObjects=function(){this.SetObjectsVisible(!0)},t.BaseAnimation.prototype.HideObjects=function(){this.SetObjectsVisible(!1)},t.BaseAnimation.prototype.SetObjectsVisible=function(t){if(this._arObjects)for(var e,n=this._arObjects.length-1;n>=0;n--)e=this._arObjects[n],e&&e.setVisible(t)},t.BaseAnimation.prototype.RestoreOriginalMatrices=function(){if(this._arObjects)for(var t,e=this._arObjects.length-1;e>=0;e--)t=this._arObjects[e],t&&this._origMatrixArray&&t.setMatrix(this._origMatrixArray.pop())},t.CustomAnimation=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.CustomAnimation,t.BaseAnimation),t.CustomAnimation.prototype.getAnimator=function(){return this._animator};var a=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(a,t.BaseAnimation),a.prototype.Init=function(t,e,n,i,r){a.superclass.Init.call(this,t,e,i,r),this._direction=n,this._SCALE=.2,this._SKEW_ANGLE=Math.PI/12,this._bSaveAndRestoreOriginalMatrices=!0},a.prototype.CreateAnimator=function(e){a.superclass.CreateAnimator.call(this,e),this.setEasing(t.BaseAnimation.EASING_CUBIC_IN),this._animator.setDuration(this.getDuration()/2),this._animator.setOnEnd(this.PlayEndAnim,this),this._endAnim=new t.Animator(e,this.getDuration()/2,0,t.BaseAnimation.GetEasingFunction(t.BaseAnimation.EASING_CUBIC_OUT)),this._endAnim.setOnEnd(this.OnAnimEnd,this)},a.prototype.InitializePlay=function(){a.superclass.InitializePlay.call(this),this.ShowObjects()},a.prototype.InitStartState=function(e){a.superclass.InitStartState.call(this,e),e.setVisible(!1);var n=this._SCALE,i=1-n,r=e.getDimensions(),o=(r.w*i,r.h*i,this.GetConcatenatedRotationMatrix(e,r)),s=new t.Matrix;this._direction===t.BaseAnimation.DIR_W||this._direction===t.BaseAnimation.DIR_E?this._direction===t.BaseAnimation.DIR_W?s.translate(r.w,0):s.translate(-r.w,0):this._direction===t.BaseAnimation.DIR_N?s.translate(0,r.h):s.translate(0,-r.h),s.concat(o),e.setMatrix(s),e.setAlpha(0)},a.prototype.InitEndState=function(e){a.superclass.InitEndState.call(this,e);var n=e.getDimensions(),i=this.GetConcatenatedRotationMatrix(e,n);this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,i),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,1);var r=e.getMatrix();this._endAnim.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,r)},a.prototype.PlayEndAnim=function(){this._endAnim.play(!0)},a.prototype.GetConcatenatedRotationMatrix=function(e,n){var i=this._SCALE,r=1-i,o=n.w*r,a=n.h*r,s=this._SKEW_ANGLE;this._direction!==t.BaseAnimation.DIR_W&&this._direction!==t.BaseAnimation.DIR_S||(s=-s);var l=Math.tan(s),u=e.getMatrix(),h=new t.Matrix;return this._direction===t.BaseAnimation.DIR_W||this._direction===t.BaseAnimation.DIR_E?(h.skew(0,s),h.scale(i,1),this._direction===t.BaseAnimation.DIR_W?h.translate(0,0):h.translate(o,-n.w*l)):(h.skew(s,0),h.scale(1,i),this._direction===t.BaseAnimation.DIR_N?h.translate(0,0):h.translate(-n.h*l,a)),h.concat(u),h};var s=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(s,t.BaseAnimation),s.prototype.Init=function(t,e,n,i,r){s.superclass.Init.call(this,t,e,i,r),this._direction=n,this._bSaveAndRestoreOriginalMatrices=!0,this._bHideObjectsOnEnd=!0},s.prototype.CreateAnimator=function(e){s.superclass.CreateAnimator.call(this,e),this.setEasing(t.BaseAnimation.EASING_CUBIC_IN),this._animator.setDuration(this.getDuration()/2),this._animator.setOnEnd(this.PlayEndAnim,this),this._endAnim=new t.Animator(e,this.getDuration()/2,0,t.BaseAnimation.GetEasingFunction(t.BaseAnimation.EASING_CUBIC_OUT)),this._endAnim.setOnEnd(this.OnAnimEnd,this)},s.prototype.InitEndState=function(e){s.superclass.InitEndState.call(this,e);var n=.2,i=1-n,r=e.getDimensions(),o=r.w*i,a=r.h*i,l=Math.PI/12;this._direction!==t.BaseAnimation.DIR_W&&this._direction!==t.BaseAnimation.DIR_S||(l=-l);var u=Math.tan(l),h=e.getMatrix(),c=new t.Matrix;this._direction===t.BaseAnimation.DIR_W||this._direction===t.BaseAnimation.DIR_E?(c.skew(0,l),c.scale(n,1),this._direction===t.BaseAnimation.DIR_W?c.translate(0,0):c.translate(o,-r.w*u)):(c.skew(l,0),c.scale(1,n),this._direction===t.BaseAnimation.DIR_N?c.translate(0,0):c.translate(-r.h*u,a)),c.concat(h),this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,c);var d=new t.Matrix;this._direction===t.BaseAnimation.DIR_W||this._direction===t.BaseAnimation.DIR_E?this._direction===t.BaseAnimation.DIR_W?d.translate(r.w,0):d.translate(-r.w,0):this._direction===t.BaseAnimation.DIR_N?d.translate(0,r.h):d.translate(0,-r.h),d.concat(c),this._endAnim.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,d),this._endAnim.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0)},s.prototype.PlayEndAnim=function(){this._endAnim.play(!0)};var l=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(l,t.BaseAnimation),l.prototype.Init=function(t,e,n,i,r,o){l.superclass.Init.call(this,t,e,r,o),this._axis=n,this._rotationDir=i,this._bSaveAndRestoreOriginalMatrices=!0,this._cubeEffect=!1},l.prototype.InitStartState=function(e){l.superclass.InitStartState.call(this,e),e.setVisible(!1);var n=e.getDimensions(),i=n.w/2,r=n.h/2,o=Math.PI/6;this._rotationDir===t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE&&(o=-o);var a=Math.tan(o),s=e.getMatrix(),u=new t.Matrix;this._axis===t.BaseAnimation.AXIS_Y?(u.skew(0,o),u.scale(0,1),this._cubeEffect?this._rotationDir===t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE?u.translate(n.w,0):u.translate(0,-n.w*a):u.translate(i,-i*a)):(u.skew(o,0),u.scale(1,0),this._cubeEffect?this._rotationDir===t.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE?u.translate(-n.h*a,0):u.translate(0,n.h):u.translate(-r*a,r)),u.concat(s),e.setMatrix(u),this._cubeEffect&&e.setAlpha(0)},l.prototype.InitEndState=function(e){l.superclass.InitEndState.call(this,e);var n=e.getMatrix();this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,n),this._cubeEffect&&this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,1)},l.prototype.InitializePlay=function(){l.superclass.InitializePlay.call(this),this.ShowObjects()};var u=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(u,t.BaseAnimation),u.prototype.Init=function(t,e,n,i,r,o){u.superclass.Init.call(this,t,e,r,o),this._axis=n,this._rotationDir=i,this._bSaveAndRestoreOriginalMatrices=!0,this._bHideObjectsOnEnd=!0,this._cubeEffect=!1},u.prototype.InitEndState=function(e){u.superclass.InitEndState.call(this,e);var n=e.getDimensions(),i=n.w/2,r=n.h/2,o=Math.PI/6;this._rotationDir===t.BaseAnimation.ROT_DIR_CLOCKWISE&&(o=-o);var a=Math.tan(o),s=e.getMatrix(),l=new t.Matrix;this._axis===t.BaseAnimation.AXIS_Y?(l.skew(0,o),l.scale(0,1),this._cubeEffect?this._rotationDir===t.BaseAnimation.ROT_DIR_CLOCKWISE?l.translate(n.w,0):l.translate(0,-n.w*a):l.translate(i,-i*a)):(l.skew(o,0),l.scale(1,0),this._cubeEffect?this._rotationDir===t.BaseAnimation.ROT_DIR_CLOCKWISE?l.translate(-n.h*a,0):l.translate(0,n.h):l.translate(-r*a,r)),l.concat(s),this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,l),this._cubeEffect&&this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0)};var h=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(h,l),h.prototype.Init=function(t,e,n,i,r,o){h.superclass.Init.call(this,t,e,n,i,r,o),this._cubeEffect=!0};var c=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(c,u),c.prototype.Init=function(t,e,n,i,r,o){c.superclass.Init.call(this,t,e,n,i,r,o),this._cubeEffect=!0},t.AnimFadeIn=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.AnimFadeIn,t.BaseAnimation),t.AnimFadeIn.prototype.Init=function(e,n,i,r){t.AnimFadeIn.superclass.Init.call(this,e,n,i,r)},t.AnimFadeIn.prototype.InitStartState=function(t){t.setAlpha(0)},t.AnimFadeIn.prototype.InitEndState=function(e){this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,1)},t.AnimFadeOut=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.AnimFadeOut,t.BaseAnimation),t.AnimFadeOut.prototype.Init=function(e,n,i,r){t.AnimFadeOut.superclass.Init.call(this,e,n,i,r)},t.AnimFadeOut.prototype.InitEndState=function(e){this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0)},t.AnimMoveBy=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimMoveBy,t.BaseAnimation),t.AnimMoveBy.prototype.Init=function(e,n,i,r,o){i instanceof Array?this._arOffsets=i:i instanceof t.Point?this._arOffsets=[i]:this._arOffsets=[new t.Point(0,0)],this._currIndex=0,t.AnimMoveBy.superclass.Init.call(this,e,n,r,o)},t.AnimMoveBy.prototype.InitEndState=function(e){var n;n=this._currIndex<this._arOffsets.length?this._arOffsets[this._currIndex]:this._arOffsets[this._arOffsets.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,e.getTranslateX()+n.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,e.getTranslateY()+n.y),this._currIndex++},t.AnimMoveTo=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimMoveTo,t.BaseAnimation),t.AnimMoveTo.prototype.Init=function(e,n,i,r,o){i instanceof Array?this._arPoints=i:i instanceof t.Point?this._arPoints=[i]:this._arPoints=[new t.Point(0,0)],this._currIndex=0,t.AnimMoveTo.superclass.Init.call(this,e,n,r,o)},t.AnimMoveTo.prototype.InitEndState=function(e){var n;n=this._currIndex<this._arPoints.length?this._arPoints[this._currIndex]:this._arPoints[this._arPoints.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,n.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,n.y),this._currIndex++},t.AnimScaleBy=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimScaleBy,t.BaseAnimation),t.AnimScaleBy.prototype.Init=function(e,n,i,r,o){i instanceof Array?this._arScales=i:i instanceof t.Point?this._arScales=[i]:this._arScales=[new t.Point(1,1)],this._currIndex=0,t.AnimScaleBy.superclass.Init.call(this,e,n,r,o)},t.AnimScaleBy.prototype.InitEndState=function(e){var n;n=this._currIndex<this._arScales.length?this._arScales[this._currIndex]:this._arScales[this._arScales.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,e.getScaleX()*n.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,e.getScaleY()*n.y),this._currIndex++},t.AnimScaleFadeIn=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.AnimScaleFadeIn,t.AnimFadeIn),t.AnimScaleFadeIn.prototype.Init=function(e,n,i,r,o,a,s){this._boundsRect=i,this._direction=r?r:t.BaseAnimation.DIR_NW,this._minScale=o?o:.5,t.AnimScaleFadeIn.superclass.Init.call(this,e,n,a,s),this._bSaveAndRestoreOriginalMatrices=!0},t.AnimScaleFadeIn.prototype.InitStartState=function(e){t.AnimScaleFadeIn.superclass.InitStartState.call(this,e);var n=this._minScale*e.getScaleX(),i=this._minScale*e.getScaleY(),r=e.getDimensions(),o=new t.Rectangle(0,0,n*r.w,i*r.h),a=t.BaseAnimation.GetAlignCompassPoint(o,this._boundsRect,this._direction);e.setTranslate(a.x,a.y),e.setScale(n,i)},t.AnimScaleFadeIn.prototype.InitEndState=function(e){t.AnimScaleFadeIn.superclass.InitEndState.call(this,e);var n=e.getMatrix();this._animator.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,n)},t.AnimScaleFadeOut=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.AnimScaleFadeOut,t.AnimFadeOut),t.AnimScaleFadeOut.prototype.Init=function(e,n,i,r,o,a,s){this._boundsRect=i,this._direction=r?r:t.BaseAnimation.DIR_NE,this._minScale=o?o:.5,t.AnimScaleFadeOut.superclass.Init.call(this,e,n,a,s),this._bSaveAndRestoreOriginalMatrices=!0},t.AnimScaleFadeOut.prototype.InitEndState=function(e){t.AnimScaleFadeOut.superclass.InitEndState.call(this,e);var n=this._minScale*e.getScaleX(),i=this._minScale*e.getScaleY(),r=e.getDimensions(),o=new t.Rectangle(0,0,n*r.w,i*r.h),a=t.BaseAnimation.GetAlignCompassPoint(o,this._boundsRect,this._direction);this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,n),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,i),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,a.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateY,e.setTranslateY,a.y)},t.AnimScaleTo=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimScaleTo,t.BaseAnimation),t.AnimScaleTo.prototype.Init=function(e,n,i,r,o){i instanceof Array?this._arScales=i:i instanceof t.Point?this._arScales=[i]:this._arScales=[new t.Point(1,1)],this._currIndex=0,t.AnimScaleTo.superclass.Init.call(this,e,n,r,o)},t.AnimScaleTo.prototype.InitEndState=function(e){var n;n=this._currIndex<this._arScales.length?this._arScales[this._currIndex]:this._arScales[this._arScales.length-1],this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,n.x),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,n.y),this._currIndex++},t.AnimPopIn=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimPopIn,t.BaseAnimation),t.AnimPopIn.BackOut=function(e){return t.Easing.backOut(e,2.5)},t.AnimPopIn.prototype.Init=function(e,n,i,r,o){this._bCenter=i,this._bCenter&&(this._tempContainers=[],this._currIndex=0),t.AnimPopIn.superclass.Init.call(this,e,n,r,o)},t.AnimPopIn.prototype.setEasing=function(t){},t.AnimPopIn.prototype.CreateAnimator=function(e){t.AnimPopIn.superclass.CreateAnimator.call(this,e),this._animator.setEasing(t.AnimPopIn.BackOut),this._bCenter&&t.Playable.appendOnEnd(this._animator,this.RemoveTempContainers,this)},t.AnimPopIn.prototype.InitStartState=function(t){if(this._bCenter){var e=this._tempContainers[this._currIndex],n=t.getDimensions();e._dvtAnimPopInOrigTx=t.getTranslateX(),e._dvtAnimPopInOrigTy=t.getTranslateY();var i=n.x+.5*n.w,r=n.y+.5*n.h;e.setTranslate(e._dvtAnimPopInOrigTx+i,e._dvtAnimPopInOrigTy+r),t.setTranslate(-i,-r);var o=t.getParent().getChildIndex(t);e._dvtAnimPopInChildIndex=o,t.getParent().addChildAt(e,o),e.addChild(t),e.setScale(.01,.01),this._currIndex++}else t.setScale(.01,.01);t.setVisible(!0)},t.AnimPopIn.prototype.InitEndState=function(e){if(this._bCenter){var n=new t.Container(this._context);this._tempContainers.push(n),this._animator.addProp(t.Animator.TYPE_NUMBER,n,n.getScaleX,n.setScaleX,1),this._animator.addProp(t.Animator.TYPE_NUMBER,n,n.getScaleY,n.setScaleY,1);
}else this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,1),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,1)},t.AnimPopIn.prototype.RemoveTempContainers=function(){if(this._tempContainers){for(var t=0;t<this._tempContainers.length;t++){var e=this._tempContainers[t];if(this._tempContainers[t]=null,e.getNumChildren()>0){var n=e.getChildAt(0);n&&(n.setTranslate(e._dvtAnimPopInOrigTx,e._dvtAnimPopInOrigTy),e.getParent().addChildAt(n,e._dvtAnimPopInChildIndex))}e.getParent().removeChild(e)}this._tempContainers=null}},t.AnimPopOut=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.AnimPopOut,t.BaseAnimation),t.AnimPopOut.BackIn=function(e){return t.Easing.backIn(e,2.5)},t.AnimPopOut.prototype.Init=function(e,n,i,r,o){this._bCenter=i,this._bCenter&&(this._tempContainers=[],this._currIndex=0),t.AnimPopOut.superclass.Init.call(this,e,n,r,o),this._bSaveAndRestoreOriginalMatrices=!this._bCenter,this._bHideObjectsOnEnd=!0},t.AnimPopOut.prototype.setEasing=function(t){},t.AnimPopOut.prototype.CreateAnimator=function(e){t.AnimPopOut.superclass.CreateAnimator.call(this,e),this._animator.setEasing(t.AnimPopOut.BackIn),this._bCenter&&t.Playable.appendOnEnd(this._animator,this.RemoveTempContainers,this)},t.AnimPopOut.prototype.InitStartState=function(t){if(this._bCenter){var e=this._tempContainers[this._currIndex],n=t.getDimensions();e._dvtAnimPopInOrigTx=t.getTranslateX(),e._dvtAnimPopInOrigTy=t.getTranslateY();var i=n.x+.5*n.w,r=n.y+.5*n.h;e.setTranslate(e._dvtAnimPopInOrigTx+i,e._dvtAnimPopInOrigTy+r),t.setTranslate(-i,-r);var o=t.getParent().getChildIndex(t);e._dvtAnimPopInChildIndex=o,t.getParent().addChildAt(e,o),e.addChild(t),this._currIndex++}},t.AnimPopOut.prototype.InitEndState=function(e){if(this._bCenter){var n=new t.Container(this._context);this._tempContainers.push(n),this._animator.addProp(t.Animator.TYPE_NUMBER,n,n.getScaleX,n.setScaleX,.01),this._animator.addProp(t.Animator.TYPE_NUMBER,n,n.getScaleY,n.setScaleY,.01)}else this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,.01),this._animator.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,.01)},t.AnimPopOut.prototype.RemoveTempContainers=function(){if(this._tempContainers){for(var t=0;t<this._tempContainers.length;t++){var e=this._tempContainers[t];if(this._tempContainers[t]=null,e.getNumChildren()>0){var n=e.getChildAt(0);n&&(n.setTranslate(e._dvtAnimPopInOrigTx,e._dvtAnimPopInOrigTy),e.getParent().addChildAt(n,e._dvtAnimPopInChildIndex))}e.getParent().removeChild(e)}this._tempContainers=null}};var d=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)};t.Obj.createSubclass(d,t.ParallelPlayable),d.prototype.Init=function(t,e,n,i,r,o,l){o||(o=.5),l||(l=0);var u=new s(t,e,i,o,l),h=new a(t,n,r,o,o/3+l);d.superclass.Init.call(this,t,[u,h])},t.CombinedAnimCube=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.CombinedAnimCube,t.ParallelPlayable),t.CombinedAnimCube.prototype.Init=function(e,n,i,r,o,a,s){a||(a=.5),s||(s=0);var l=new c(e,n,r,o,a,s),u=new h(e,i,r,o,a,s);t.CombinedAnimCube.superclass.Init.call(this,e,[l,u])};var p=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(p,t.ParallelPlayable),p.prototype.Init=function(e,n,i,r,o){r||(r=.5),o||(o=0);var a=new t.AnimFadeOut(e,n,r,o),s=new t.AnimFadeIn(e,i,r,.5*a.getDuration()+o);p.superclass.Init.call(this,e,[a,s])},t.CombinedAnimFlip=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.CombinedAnimFlip,t.SequentialPlayable),t.CombinedAnimFlip.prototype.Init=function(e,n,i,r,o,a,s){a||(a=.5),s||(s=0);var h=new u(e,n,r,o,a,s);h.setEasing(t.BaseAnimation.EASING_CUBIC_IN);var c=new l(e,i,r,o,a,s);c.setEasing(t.BaseAnimation.EASING_CUBIC_OUT),c.HideObjects(),t.CombinedAnimFlip.superclass.Init.call(this,e,[h,c])},t.CombinedAnimMoveBy=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.CombinedAnimMoveBy,t.ParallelPlayable),t.CombinedAnimMoveBy.prototype.Init=function(e,n,i,r,o,a,s){a||(a=.5),s||(s=0);var l=new t.AnimMoveBy(e,n,r,a,s),u=new t.AnimMoveBy(e,i,o,a,s);t.CombinedAnimMoveBy.superclass.Init.call(this,e,[l,u])};var g=function(t,e,n,i,r,o,a,s,l){this.Init(t,e,n,i,r,o,a,s,l)};t.Obj.createSubclass(g,t.ParallelPlayable),g.prototype.Init=function(e,n,i,r,o,a,s,l,u){o||(o=t.BaseAnimation.DIR_NE),a||(a=t.BaseAnimation.DIR_NW),s||(s=.5),l||(l=.5),u||(u=0);var h=new t.AnimScaleFadeOut(e,n,r,o,s,l,u),c=new t.AnimScaleFadeIn(e,i,r,a,s,l,.3*h.getDuration()+u);g.superclass.Init.call(this,e,[h,c])},t.CombinedAnimPopIn=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.CombinedAnimPopIn,t.ParallelPlayable),t.CombinedAnimPopIn.prototype.Init=function(e,n,i,r,o,a){var s,l=[];s=n instanceof Array?n:[n],a=null===a||isNaN(a)?0:a;for(var u=0;u<s.length;u++){var h=s[u],c=a+Math.random()*(o-r),d=new t.AnimPopIn(e,h,i,r,c);l.push(d)}t.CombinedAnimPopIn.superclass.Init.call(this,e,l)};var f=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(f,t.ParallelPlayable),f.prototype.Init=function(e,n,i,r,o,a){var s,l=[];s=n instanceof Array?n:[n],a=null===a||isNaN(a)?0:a;for(var u=0;u<s.length;u++){var h=s[u],c=a+Math.random()*(o-r),d=new t.AnimPopOut(e,h,i,r,c);l.push(d)}f.superclass.Init.call(this,e,l)};var _=function(){this._Init()};t.Obj.createSubclass(_,e),_.prototype._Init=function(){_.superclass._Init.call(this)},_.prototype.getId=function(){return this._id},_.prototype.setId=function(t){this._id=t},_.prototype.mergeProps=function(t){t.setId(this._id)},t.ColorUtils={},t.Obj.createSubclass(t.ColorUtils,t.Obj),t.ColorUtils._RED=0,t.ColorUtils._GREEN=1,t.ColorUtils._BLUE=2,t.ColorUtils._ALPHA=3,t.ColorUtils._RGBA="rgba(",t.ColorUtils._RGB="rgb(",t.ColorUtils._POUND="#",t.ColorUtils._FACTOR=.15,t.ColorUtils._names,t.ColorUtils.getColorFromName=function(e){if(!t.ColorUtils._names){var n=[];n.aliceblue="#f0f8ff",n.antiquewhite="#faEbd7",n.aqua="#00ffff",n.aquamarine="#7fffd4",n.azure="#f0ffff",n.beige="#f5f5dc",n.bisque="#ffE4c4",n.black="#000000",n.blanchedalmond="#ffEbcd",n.blue="#0000ff",n.blueviolet="#8a2bE2",n.brown="#a52a2a",n.burlywood="#dEb887",n.cadetblue="#5f9Ea0",n.chartreuse="#7fff00",n.chocolate="#d2691E",n.coral="#ff7f50",n.cornflowerblue="#6495Ed",n.cornsilk="#fff8dc",n.crimson="#dc143c",n.cyan="#00ffff",n.darkblue="#00008b",n.darkcyan="#008b8b",n.darkgoldenrod="#b8860b",n.darkgray="#a9a9a9",n.darkgreen="#006400",n.darkkhaki="#bdb76b",n.darkmagenta="#8b008b",n.darkolivegreen="#556b2f",n.darkorange="#ff8c00",n.darkorchid="#9932cc",n.darkred="#8b0000",n.darksalmon="#E9967a",n.darkseagreen="#8fbc8f",n.darkslateblue="#483d8b",n.darkslategray="#2f4f4f",n.darkturquoise="#00cEd1",n.darkviolet="#9400d3",n.deeppink="#ff1493",n.deepskyblue="#00bfff",n.dimgray="#696969",n.dodgerblue="#1E90ff",n.firebrick="#b22222",n.floralwhite="#fffaf0",n.forestgreen="#228b22",n.fuchsia="#ff00ff",n.gainsboro="#dcdcdc",n.ghostwhite="#f8f8ff",n.gold="#ffd700",n.goldenrod="#daa520",n.gray="#808080",n.green="#008000",n.greenyellow="#adff2f",n.honeydew="#f0fff0",n.hotpink="#ff69b4",n["indianred "]="#cd5c5c",n["indigo "]="#4b0082",n.ivory="#fffff0",n.khaki="#f0E68c",n.lavender="#E6E6fa",n.lavenderblush="#fff0f5",n.lawngreen="#7cfc00",n.lemonchiffon="#fffacd",n.lightblue="#add8E6",n.lightcoral="#f08080",n.lightcyan="#E0ffff",n.lightgoldenrodyellow="#fafad2",n.lightgray="#d3d3d3",n.lightgreen="#90EE90",n.lightpink="#ffb6c1",n.lightsalmon="#ffa07a",n.lightseagreen="#20b2aa",n.lightskyblue="#87cEfa",n.lightslategray="#778899",n.lightsteelblue="#b0c4dE",n.lightyellow="#ffffE0",n.lime="#00ff00",n.limegreen="#32cd32",n.linen="#faf0E6",n.magenta="#ff00ff",n.maroon="#800000",n.mediumaquamarine="#66cdaa",n.mediumblue="#0000cd",n.mediumorchid="#ba55d3",n.mediumpurple="#9370db",n.mediumseagreen="#3cb371",n.mediumslateblue="#7b68EE",n.mediumspringgreen="#00fa9a",n.mediumturquoise="#48d1cc",n.mediumvioletred="#c71585",n.midnightblue="#191970",n.mintcream="#f5fffa",n.mistyrose="#ffE4E1",n.moccasin="#ffE4b5",n.navajowhite="#ffdEad",n.navy="#000080",n.oldlace="#fdf5E6",n.olive="#808000",n.olivedrab="#6b8E23",n.orange="#ffa500",n.orangered="#ff4500",n.orchid="#da70d6",n.palegoldenrod="#EEE8aa",n.palegreen="#98fb98",n.paleturquoise="#afEEEE",n.palevioletred="#db7093",n.papayawhip="#ffEfd5",n.peachpuff="#ffdab9",n.peru="#cd853f",n.pink="#ffc0cb",n.plum="#dda0dd",n.powderblue="#b0E0E6",n.purple="#800080",n.rebeccapurple="#663399",n.red="#ff0000",n.rosybrown="#bc8f8f",n.royalblue="#4169E1",n.saddlebrown="#8b4513",n.salmon="#fa8072",n.sandybrown="#f4a460",n.seagreen="#2E8b57",n.seashell="#fff5EE",n.sienna="#a0522d",n.silver="#c0c0c0",n.skyblue="#87cEEb",n.slateblue="#6a5acd",n.slategray="#708090",n.snow="#fffafa",n.springgreen="#00ff7f",n.steelblue="#4682b4",n.tan="#d2b48c",n.teal="#008080",n.thistle="#d8bfd8",n.tomato="#ff6347",n.turquoise="#40E0d0",n.violet="#EE82EE",n.wheat="#f5dEb3",n.white="#ffffff",n.whitesmoke="#f5f5f5",n.yellow="#ffff00",n.yellowgreen="#9acd32",n.transparent="rgba(255,255,255,0)",t.ColorUtils._names=n}return t.ColorUtils._names[e]},t.ColorUtils.isColor=function(e,n){if(!n)return e.charAt(0)===t.ColorUtils._POUND||0===e.indexOf(t.ColorUtils._RGBA)||0===e.indexOf(t.ColorUtils._RGB);var i=!1;if(e=t.StringUtils.trim(e),e=e.toLowerCase(),e.charAt(0)===t.ColorUtils._POUND){if(7===e.length){var r=new RegExp(/^#[0-9a-f]{6}$/i);i=r.test(e)}}else{var o,a=0===e.indexOf(t.ColorUtils._RGBA);if(a||(o=0===e.indexOf(t.ColorUtils._RGB)),a||o){var s=e.indexOf(")");if(s>=0){for(var l=e.substring(a?5:4,s).split(","),u=l.length,h=!0,c=0;c<u;c++){var d=l[c];if(d<0||d>255||c>3&&(d<0||d>1)){h=!1;break}}h&&(i=a?4===u:3===u)}}}return i},t.ColorUtils.getAlpha=function(e){return t.ColorUtils._getChannel(e,t.ColorUtils._ALPHA)},t.ColorUtils.setAlpha=function(e,n){return t.ColorUtils._setChannel(e,t.ColorUtils._ALPHA,n)},t.ColorUtils.getRed=function(e){return t.ColorUtils._getChannel(e,t.ColorUtils._RED)},t.ColorUtils.setRed=function(e,n){return t.ColorUtils._setChannel(e,t.ColorUtils._RED,n)},t.ColorUtils.getBlue=function(e){return t.ColorUtils._getChannel(e,t.ColorUtils._BLUE)},t.ColorUtils.setBlue=function(e,n){return t.ColorUtils._setChannel(e,t.ColorUtils._BLUE,n)},t.ColorUtils.getGreen=function(e){return t.ColorUtils._getChannel(e,t.ColorUtils._GREEN)},t.ColorUtils.setGreen=function(e,n){return t.ColorUtils._setChannel(e,t.ColorUtils._GREEN,n)},t.ColorUtils._getChannel=function(e,n){var i=e,r=null,o=t.ColorUtils.getColorFromName(i);if(o&&(i=o),n===t.ColorUtils._ALPHA){if("#"===i.charAt(0))return i.length>7?parseInt(i.substring(1,3),16)/255:1;if("none"===i)return 0}var a=i.indexOf("(");if(a<0)l=[],i.length>7?(l[0]=parseInt(i.substr(3,2),16),l[1]=parseInt(i.substr(5,2),16),l[2]=parseInt(i.substr(7,2),16),l[3]=parseInt(i.substr(1,2),16)/255):(l[0]=parseInt(i.substr(1,2),16),l[1]=parseInt(i.substr(3,2),16),l[2]=parseInt(i.substr(5,2),16),l[3]=1),r=l[n];else{var s=i.indexOf(")"),l=i.substring(a+1,s).split(",");3===l.length&&n===t.ColorUtils._ALPHA?r=1:(r=l[n],r=parseFloat(r))}return r},t.ColorUtils.getDarker=function(e,n){var i=t.ColorUtils._getChannel(e,t.ColorUtils._RED),r=t.ColorUtils._getChannel(e,t.ColorUtils._GREEN),o=t.ColorUtils._getChannel(e,t.ColorUtils._BLUE),a=t.ColorUtils._getChannel(e,t.ColorUtils._ALPHA);return n||(n=t.ColorUtils._FACTOR),i=Math.max(parseInt(i*(1-n)),0),r=Math.max(parseInt(r*(1-n)),0),o=Math.max(parseInt(o*(1-n)),0),t.ColorUtils.makeRGBA(i,r,o,a)},t.ColorUtils.getBrighter=function(e,n){var i=t.ColorUtils._getChannel(e,t.ColorUtils._ALPHA),r=t.ColorUtils._getChannel(e,t.ColorUtils._RED),o=t.ColorUtils._getChannel(e,t.ColorUtils._GREEN),a=t.ColorUtils._getChannel(e,t.ColorUtils._BLUE);n||(n=t.ColorUtils._FACTOR);var s=Math.min(r+parseInt((255-r)*n),255),l=Math.min(o+parseInt((255-o)*n),255),u=Math.min(a+parseInt((255-a)*n),255);return t.ColorUtils.makeRGBA(s,l,u,i)},t.ColorUtils.getGrey=function(e){var n=t.ColorUtils._getChannel(e,t.ColorUtils._RED),i=t.ColorUtils._getChannel(e,t.ColorUtils._BLUE),r=t.ColorUtils._getChannel(e,t.ColorUtils._GREEN),o=Math.round(.3*n+.59*i+.11*r);return this.setRGB(e,o,o,o)},t.ColorUtils.invert=function(e){var n,i=255-t.ColorUtils._getChannel(e,t.ColorUtils._RED),r=255-t.ColorUtils._getChannel(e,t.ColorUtils._BLUE),o=255-t.ColorUtils._getChannel(e,t.ColorUtils._GREEN);return n="#"===e.charAt(0)?t.ColorUtils.makePound(i,r,o):e.substr(0,4)===t.ColorUtils._RGB?t.ColorUtils.makeRGB(i,r,o):t.ColorUtils.makeRGBA(i,r,o,t.ColorUtils._getChannel(e,t.ColorUtils._ALPHA))},t.ColorUtils.isRGBA=function(e){return e.substr(0,5)===t.ColorUtils._RGBA},t.ColorUtils.makeRGB=function(e,n,i){return i=null===i||isNaN(i)?0:i,n=null===n||isNaN(n)?0:n,e=null===e||isNaN(e)?0:e,t.ColorUtils._RGB+e+","+n+","+i+")"},t.ColorUtils.makeRGBA=function(e,n,i,r){return i=null===i||isNaN(i)?0:Math.round(i),n=null===n||isNaN(n)?0:Math.round(n),e=null===e||isNaN(e)?0:Math.round(e),r=null===r||isNaN(r)?1:r,t.ColorUtils._RGBA+e+","+n+","+i+","+r+")"},t.ColorUtils.makePound=function(t,e,n){var i=Math.round(t),r=Math.round(e),o=Math.round(n),a=i.toString(16),s=r.toString(16),l=o.toString(16);return"#"+(1===a.length?"0":"")+a+(1===s.length?"0":"")+s+(1===l.length?"0":"")+l},t.ColorUtils.getPound=function(e){var n;if("#"===e.charAt(0)){var i=e.length;if(i<=7)return e;n=t.ColorUtils._POUND,n+=e.substring(3,5)+e.substring(5,7)+e.substring(7,9)}else{var r=t.ColorUtils.getRed(e),o=t.ColorUtils.getGreen(e),a=t.ColorUtils.getBlue(e);n=t.ColorUtils.makePound(r,o,a)}return n},t.ColorUtils.getRGB=function(e){var n,i=t.ColorUtils.getColorFromName(e);if(i&&(e=i),"#"===e.charAt(0)){n=t.ColorUtils._RGB;var r=e.length;if(r>7)n+=parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16)+","+parseInt(e.substring(7,9),16);else if(7===r)n+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substr(5),16);else if(4===r){var o=e.substring(1,2);o+=o;var a=e.substring(2,3);a+=a;var s=e.substring(3);s+=s,n+=parseInt(o,16)+","+parseInt(a,16)+","+parseInt(s,16)}else 5===r?n+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+",0,1":3===r&&(n+=parseInt(e.substring(1,3),16)+",0,0,1");n+=")"}else if(e.substr(0,5)===t.ColorUtils._RGBA){var l=e.lastIndexOf(",");n=t.ColorUtils._RGB,n+=e.substring(5,l),n+=")"}else n=e;return n},t.ColorUtils.getRGBA=function(e){var n,i=t.ColorUtils.getColorFromName(e);if(i&&(e=i),"#"===e.charAt(0)){n=t.ColorUtils._RGBA;var r=e.length;if(r>7)n+=parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16)+","+parseInt(e.substring(7,9),16)+","+parseInt(e.substring(1,3),16)/255;else if(7===r)n+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substr(5),16)+",1";else if(5===r)n+=parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+",0,1";else if(4===r){var o=e.substring(1,2);o+=o;var a=e.substring(2,3);a+=a;var s=e.substring(3);s+=s,n+=parseInt(o,16)+","+parseInt(a,16)+","+parseInt(s,16)+",1"}else 3===r&&(n+=parseInt(e.substring(1,3),16)+",0,0,1");n+=")"}else e.substr(0,4)===t.ColorUtils._RGB?(n=t.ColorUtils._RGBA,n+=e.substring(4,e.length-1)+",1)"):n=e;return n},t.ColorUtils._setChannel=function(e,n,i){if(void 0===n||void 0===i||n<t.ColorUtils._RED||n>t.ColorUtils._ALPHA)return e;var r=t.ColorUtils.getColorFromName(e);r&&(e=r);var o,a,s,l="#"===e.charAt(0);if(l)o=[],o.push(parseInt(e.substr(1,2),16)),o.push(parseInt(e.substr(3,2),16)),o.push(parseInt(e.substr(5,2),16)),n===t.ColorUtils._ALPHA&&(o.push(i),l=!1,a=!0);else{var a=e.substr(0,5)===t.ColorUtils._RGBA,u=e.indexOf("("),h=e.indexOf(")"),o=e.substring(u+1,h).split(",");a||n!==t.ColorUtils._ALPHA||(o.push(i),a=!0)}return o[n]=i,s=l?t.ColorUtils.makePound(o[0],o[1],o[2]):a?t.ColorUtils.makeRGBA(o[0],o[1],o[2],o[3]):t.ColorUtils.makeRGB(o[0],o[1],o[2])},t.ColorUtils.setRGB=function(e,n,i,r){if(r=null===r||isNaN(r)?0:r,i=null===i||isNaN(i)?0:i,n=null===n||isNaN(n)?0:n,"#"===e.charAt(0))return t.ColorUtils.makePound(n,i,r);var o=e.substr(0,5)===t.ColorUtils._RGBA,a=(o?t.ColorUtils._RGBA:t.ColorUtils._RGB)+n+","+i+","+r;if(o){var s=e.lastIndexOf(5,","),l=e.indexOf(")");a+=","+e.substring(s+1,l)}return a+=")"},t.ColorUtils.rgb2hsl=function(t,e,n){t/=255,e/=255,n/=255;var i,r,o=Math.max(t,e,n),a=Math.min(t,e,n),s=o+a,l=s/2;if(o==a)i=0,r=0;else{var u=o-a;r=l>.5?u/(2-s):u/s,o==t?i=(e-n)/u+(e<n?6:0):o==e?i=(n-t)/u+2:o==n&&(i=(t-e)/u+4),i/=6}return{h:360*i,s:r,l:l}},t.ColorUtils.hsl2rgb=function(e,n,i){e/=360;var r,o,a;if(0==n)r=o=a=i;else{var s=i<.5?i*(1+n):i+n-i*n,l=2*i-s;r=t.ColorUtils._hue2rgb(l,s,e+1/3),o=t.ColorUtils._hue2rgb(l,s,e),a=t.ColorUtils._hue2rgb(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*a}},t.ColorUtils._hue2rgb=function(t,e,n){return n<0?n+=1:n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},t.ColorUtils.hsv2rgb=function(t,e,n){var i,r,o,a,s,l,u,h;return t%=360,0==n?{r:0,g:0,v:0}:(e/=100,n/=100,t/=60,a=Math.floor(t),s=t-a,l=n*(1-e),u=n*(1-e*s),h=n*(1-e*(1-s)),0==a?(i=n,r=h,o=l):1==a?(i=u,r=n,o=l):2==a?(i=l,r=n,o=h):3==a?(i=l,r=u,o=n):4==a?(i=h,r=l,o=n):5==a&&(i=n,r=l,o=u),i=Math.floor(255*i),r=Math.floor(255*r),o=Math.floor(255*o),{r:i,g:r,b:o})},t.ColorUtils.rgb2hsv=function(t,e,n){var i,r,o,a,s,l;return t/=255,e/=255,n/=255,i=Math.min(t,e,n),r=Math.max(t,e,n),i==r?{h:void 0,s:0,v:100*r}:(o=t==i?e-n:e==i?n-t:t-e,a=t==i?3:e==i?5:1,s=Math.floor(60*(a-o/(r-i)))%360,l=Math.floor((r-i)/r*100),r=Math.floor(100*r),{h:s,s:l,v:r})},t.ColorUtils.adjustHSL=function(e,n,i,r){t.ColorUtils._hslCache||(t.ColorUtils._hslCache=new t.Cache(100));var o=e+":"+n+":"+i+":"+r,a=t.ColorUtils._hslCache.get(o);if(null!=a)return a;var s=t.ColorUtils._getChannel(e,t.ColorUtils._RED),l=t.ColorUtils._getChannel(e,t.ColorUtils._GREEN),u=t.ColorUtils._getChannel(e,t.ColorUtils._BLUE),h=t.ColorUtils._getChannel(e,t.ColorUtils._ALPHA),c=t.ColorUtils.rgb2hsl(s,l,u),d=Math.min(Math.max(0,c.h+n),360),p=Math.min(Math.max(0,c.s+i),1),g=Math.min(Math.max(0,c.l+r),1),f=t.ColorUtils.hsl2rgb(d,p,g);return a=1==h?t.ColorUtils.makePound(f.r,f.g,f.b):t.ColorUtils.makeRGBA(f.r,f.g,f.b,h),t.ColorUtils._hslCache.put(o,a),a},t.ColorUtils.interpolateColor=function(e,n,i){var r=t.ColorUtils.getRed(e),o=t.ColorUtils.getGreen(e),a=t.ColorUtils.getBlue(e),s=t.ColorUtils.getAlpha(e),l=t.ColorUtils.getRed(n),u=t.ColorUtils.getGreen(n),h=t.ColorUtils.getBlue(n),c=t.ColorUtils.getAlpha(n),d=Math.round(t.Math.interpolateNumber(r,l,i)),p=Math.round(t.Math.interpolateNumber(o,u,i)),g=Math.round(t.Math.interpolateNumber(a,h,i)),f=t.Math.interpolateNumber(s,c,i);return t.ColorUtils.makeRGBA(d,p,g,f)},t.ColorUtils.inferColor=function(e,n,i){if(e==n)return i;if(i==e)return n;var r,o=t.ColorUtils.getRed(e),a=t.ColorUtils.getRed(n);o==a?r=t.ColorUtils.getRed(i):(0==o&&(o=1),r=a/o*t.ColorUtils.getRed(i));var s;o=t.ColorUtils.getGreen(e),a=t.ColorUtils.getGreen(n),o==a?s=t.ColorUtils.getGreen(i):(0==o&&(o=1),s=a/o*t.ColorUtils.getGreen(i));var l;return o=t.ColorUtils.getBlue(e),a=t.ColorUtils.getBlue(n),o==a?l=t.ColorUtils.getBlue(i):(0==o&&(o=1),l=a/o*t.ColorUtils.getBlue(i)),t.ColorUtils.makePound(r,s,l)},t.ColorUtils.getContrastingTextColor=function(e){var n=t.ColorUtils.getRed(e),i=t.ColorUtils.getGreen(e),r=t.ColorUtils.getBlue(e),o=(299*n+587*i+114*r)/1e3;return o>=128?"#000000":"#FFFFFF"},t.ColorUtils.fixColorForPlatform=function(e,n){if(!e)return null;"#"==e.charAt(0)&&e.length>8&&(e=t.ColorUtils.getRGBA(e));var i={};return t.Agent.isEnvironmentBatik()&&e.indexOf("rgba")!==-1?(i.color=t.ColorUtils.getRGB(e),null!=n?i.alpha=t.ColorUtils.getAlpha(e)*n:i.alpha=t.ColorUtils.getAlpha(e)):(i.color=e,null!=n&&(i.alpha=n)),i},t.ClipPath=function(e){this._id=(e?e+"$":"")+"cp"+t.ClipPath._uniqueSeed++,this._regions=[]},t.Obj.createSubclass(t.ClipPath,t.Obj),t.ClipPath._uniqueSeed=0,t.ClipPath.NONE=0,t.ClipPath.RECT=1,t.ClipPath.PATH=2,t.ClipPath.POLYGON=3,t.ClipPath.ELLIPSE=4,t.ClipPath.CIRCLE=5,t.ClipPath.prototype._addRegion=function(t){t&&this._regions.push(t)},t.ClipPath.prototype.getId=function(){return this._id},t.ClipPath.prototype.getRegions=function(t){return this._regions},t.ClipPath.prototype.addRect=function(e,n,i,r,o,a){var s={};s.type=t.ClipPath.RECT,s.x=e,s.y=n,s.w=i,s.h=r,s.rx=o,s.ry=a,this._addRegion(s)},t.ClipPath.prototype.addCircle=function(e,n,i){var r={};r.type=t.ClipPath.CIRCLE,r.cx=e,r.cy=n,r.r=i,this._addRegion(r)},t.ClipPath.prototype.addEllipse=function(e,n,i,r){var o={};o.type=t.ClipPath.ELLIPSE,o.cx=e,o.cy=n,o.rx=i,o.ry=r,this._addRegion(o)},t.ClipPath.prototype.addPolygon=function(e){var n={};n.type=t.ClipPath.POLYGON,n.points=e,this._addRegion(n)},t.ClipPath.prototype.addPath=function(e){var n={};n.type=t.ClipPath.PATH,n.d=e,this._addRegion(n)},t.Mask=function(e,n){this._id="mask"+t.Mask._uniqueSeed++,this._gradient=e,this._bounds=n},t.Obj.createSubclass(t.Mask,t.Obj),t.Mask._uniqueSeed=0,t.Mask.prototype.getId=function(){return this._id},t.Mask.prototype.getGradient=function(){return this._gradient},t.Mask.prototype.getBounds=function(){return this._bounds},t.Fill=function(){this._Init()},t.Obj.createSubclass(t.Fill,e),t.Fill.NONE=0,t.Fill.COLOR=1,t.Fill.GRADIENT=2,t.Fill.PATTERN=3,t.Fill.IMAGE=4,t.Fill.prototype._Init=function(){t.Fill.superclass._Init.call(this)},t.Fill.prototype.getId=function(){return this._id},t.Fill.prototype.setId=function(t){this._id=t},t.Fill.prototype.equals=function(t){return!0},t.SolidFill=function(t,e){this._Init(t,e)},t.Obj.createSubclass(t.SolidFill,t.Fill),t.SolidFill.prototype.clone=function(){var e=new t.SolidFill;return this.mergeProps(e),e},t.SolidFill.prototype._Init=function(e,n){t.SolidFill.superclass._Init.call(this),this._fc=e,this._fa=null!=n?n:1},t.SolidFill.prototype.getColor=function(){return this._fc},t.SolidFill.prototype.setColor=function(t){this.isLocked()||(this._fc=t)},t.SolidFill.prototype.getAlpha=function(){return this._fa},t.SolidFill.prototype.setAlpha=function(t){this.isLocked()||(this._fa=t)},t.SolidFill.prototype.mergeProps=function(e){t.SolidFill.superclass.mergeProps.call(this,e),e._fc=this._fc,e._fa=this._fa},t.SolidFill.invisibleFill=function(){return t.SolidFill._INVISIBLE_FILL||(t.SolidFill._INVISIBLE_FILL=new t.SolidFill("rgba(0,0,0,0)")),t.SolidFill._INVISIBLE_FILL},t.SolidFill.prototype.equals=function(e){return e instanceof t.SolidFill&&e._fc==this._fc&&e._fa==this._fa&&t.SolidFill.superclass.equals.call(this,e)},t.Stroke=function(t,e){this._Init(t,e)},t.Obj.createSubclass(t.Stroke,e),t.Stroke.SOLID=0,t.Stroke.DASHED=1,t.Stroke.DOTTED=2,t.Stroke.DASHED_DOTTED=3,t.Stroke.SQUARE="square",t.Stroke.ROUND="round",t.Stroke.BEVEL="bevel",t.Stroke.MITER="miter",t.Stroke.BUTT="butt",t.Stroke.convertTypeString=function(e){return"solid"==e?t.Stroke.SOLID:"dashed"==e?t.Stroke.DASHED:"dotted"==e?t.Stroke.DOTTED:t.Stroke.SOLID},t.Stroke.prototype._Init=function(e){this._sw=null===e||isNaN(e)?1:e,t.Stroke.superclass._Init.call(this),this._bFixedWidth=!1},t.Stroke.prototype.getId=function(){return this._id},t.Stroke.prototype.setId=function(t){this._id=t},t.Stroke.prototype.mergeProps=function(e){e._sw=this._sw,e._st=this._st,e._sd=this._sd,e._sdo=this._sdo,e._sj=this._sj,e._se=this._se,e._sm=this._sm,e._bFixedWidth=this._bFixedWidth,t.Stroke.superclass.mergeProps.call(this,e)},t.Stroke.prototype.setStyle=function(e,n,i,r,o){this.isLocked()||(e&&!n&&(n=t.Stroke.getDefaultDash(e,this._sw)),this._st=e,this._sd=n,i&&(this._sj=i),r&&(this._se=r),o&&(this._sm=o))},t.Stroke.prototype.getDash=function(){return this._sd},t.Stroke.prototype.getDashOffset=function(){return this._sdo},t.Stroke.prototype.getLineJoin=function(){return this._sj},t.Stroke.prototype.setLineJoin=function(t){this.isLocked()||(this._sj=t)},t.Stroke.prototype.getLineEnd=function(){return this._se},t.Stroke.prototype.setLineEnd=function(t){this.isLocked()||(this._se=t)},t.Stroke.prototype.getMiterLimit=function(){return this._sm},t.Stroke.prototype.setMiterLimit=function(t){this.isLocked()||(this._sm=t)},t.Stroke.prototype.getType=function(){return this._st},t.Stroke.prototype.setType=function(e,n,i){this.isLocked()||(e===t.Stroke.SOLID?(n=null,i=null):n||(n=t.Stroke.getDefaultDash(e,this._sw)),this._st=e,this._sd=n,this._sdo=i)},t.Stroke.prototype.getWidth=function(){return this._sw},t.Stroke.prototype.setWidth=function(t){this.isLocked()||(this._sw=t)},t.Stroke.prototype.setFixedWidth=function(t){this._bFixedWidth=t},t.Stroke.prototype.isFixedWidth=function(){return this._bFixedWidth},t.Stroke.getDefaultDash=function(e,n){n=Math.ceil(n);var i=Math.max(6,2*n),r=Math.max(2,n),o=Math.floor((i+r)/2);return e==t.Stroke.DASHED?""+i:e==t.Stroke.DOTTED?""+r:e==t.Stroke.DASHED_DOTTED?""+i+","+o+","+r+","+o:null},t.GradientStroke=function(t,e,n,i,r,o){this._Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.GradientStroke,t.Stroke),t.GradientStroke.prototype.getAlpha=function(){return 1},t.GradientStroke.prototype.getAlphas=function(){return this._arAlphas},t.GradientStroke.prototype.getBounds=function(){return this._arBounds},t.GradientStroke.prototype.getColors=function(){return this._arColors},t.GradientStroke.prototype.getStops=function(){return this._arStops},t.GradientStroke.prototype._Init=function(e,n,i,r,o,a){t.GradientStroke.superclass._Init.call(this,o,a),this._arColors=e,this._arBounds=r;var s=0;e&&(s=e.length-1),n||(n=t.GradientStroke.createDefaultAlphas(s)),this._arAlphas=n,i||(i=t.GradientStroke.createDefaultStops(s)),this._arStops=i},t.GradientStroke.createDefaultAlphas=function(t){if(t<0)return null;for(var e=[],n=0;n<t;n++)e.push(1);return e},t.GradientStroke.createDefaultStops=function(t){var e=[],n=1/t,i=0;do e.push(i),i+=n;while(--t>0);return e.push(1),e},t.GradientStroke.prototype.mergeProps=function(e){e._arColors=this._arColors,e._arStops=this._arStops,e._arAlphas=this._arAlphas,e._arBounds=this._arBounds,t.GradientStroke.superclass.mergeProps.call(this,e)},t.LinearGradientStroke=function(t,e,n,i,r,o,a){this._Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.LinearGradientStroke,t.GradientStroke),t.LinearGradientStroke.prototype.clone=function(){var e=new t.LinearGradientStroke;return this.mergeProps(e),e},t.LinearGradientStroke.prototype._Init=function(e,n,i,r,o,a,s){t.LinearGradientStroke.superclass._Init.call(this,n,i,r,o,a,s),this._angle=null===e||isNaN(e)?0:e},t.LinearGradientStroke.prototype.getAngle=function(){return this._angle},t.LinearGradientStroke.prototype.mergeProps=function(e){t.LinearGradientStroke.superclass.mergeProps.call(this,e),e._angle=this._angle},t.LinearGradientStroke.prototype.setAngle=function(t){this.isLocked()||0!==t&&(Math.abs(t)>360&&(t%=360),this._angle=t)},t.SolidStroke=function(t,e,n){this._Init(t,e,n)},t.Obj.createSubclass(t.SolidStroke,t.Stroke),t.SolidStroke.prototype.clone=function(){var e=new t.SolidStroke;return this.mergeProps(e),e},t.SolidStroke.prototype._Init=function(e,n,i){this._sc=e,this._sa=null!=n?n:1,this._st=t.Stroke.SOLID,t.SolidStroke.superclass._Init.call(this,i)},t.SolidStroke.prototype.getAlpha=function(){return this._sa},t.SolidStroke.prototype.setAlpha=function(t){this.bLocked||(this._sa=t)},t.SolidStroke.prototype.getColor=function(){return this._sc},t.SolidStroke.prototype.setColor=function(t){this.bLocked||(this._sc=t)},t.SolidStroke.prototype.mergeProps=function(e){t.SolidStroke.superclass.mergeProps.call(this,e),e._sc=this._sc,e._sa=this._sa},t.Shadow=function(t,e,n,i,r,o,a,s,l,u){this._Init(t,e,n,i,r,o,a,s,l,u)},t.Obj.createSubclass(t.Shadow,_),t.Shadow._uniqueId=1,t.Shadow.prototype._Init=function(e,n,i,r,o,a,s,l,u,h){t.Shadow.superclass._Init.call(this),this.__type="shadow",this._rgba=e?e:"rgba(48,48,48,0.35)",this._distance=null===n||isNaN(n)?4:n,this._strength=null===a||isNaN(a)?1:a,this._blurX=null===i||isNaN(i)?4:i,this._blurY=null===r||isNaN(r)?4:r,this._angle=null===o||isNaN(o)?45:o,this._quality=null===s||isNaN(s)?1:s,this._bInner=!!l,this._bKnockout=!1,this._bHide=!1,this._Id="ds"+t.Shadow._uniqueId++},t.Shadow.prototype.clone=function(){var e=new t.Shadow;return this.mergeProps(e),e},t.Shadow.prototype.mergeProps=function(e){t.Shadow.superclass.mergeProps.call(this,e),e._rgba=this._rgba,e._distance=this._distance,e._strength=this._strength,e._blurX=this._blurX,e._blurY=this._blurY,e._angle=this._angle,e._quality=this._quality,e._bInner=this._bInner,e._bKnockout=this._bKnockout,e._bHide=this._bHide,e._Id=this._Id},t.GradientFill=function(t,e,n,i){this._Init(t,e,n,i)},t.Obj.createSubclass(t.GradientFill,t.Fill),t.GradientFill.prototype.getAlphas=function(){return this._arAlphas},t.GradientFill.prototype.getBounds=function(){return this._arBounds},t.GradientFill.prototype.getColors=function(){return this._arColors},t.GradientFill.prototype.getStops=function(){return this._arStops},t.GradientFill.prototype._Init=function(e,n,i,r){if(t.GradientFill.superclass._Init.call(this),this._arColors=e,this._arBounds=r,!n&&(n=[],e))for(var o=0;o<e.length;o++)n.push(1);this._arAlphas=n;var a=e?e.length-1:0;if(!i){i=[];var s=a>0?1/a:0,l=0;do i.push(l),l+=s;while(--a>0);i.push(1)}this._arStops=i},t.GradientFill.prototype.mergeProps=function(e){e._arColors=this._arColors,e._arStops=this._arStops,e._arAlphas=this._arAlphas,e._arBounds=this._arBounds,t.GradientFill.superclass.mergeProps.call(this,e)},t.GradientFill.prototype.equals=function(e){return!!(e instanceof t.GradientFill&&t.ArrayUtils.equals(this._arColors,e._arColors)&&t.ArrayUtils.equals(this._arStops,e._arStops)&&t.ArrayUtils.equals(this._arAlphas,e._arAlphas)&&t.ArrayUtils.equals(this._arBounds,e._arBounds))&&t.GradientFill.superclass.equals.call(this,e)},t.LinearGradientFill=function(t,e,n,i,r){this._Init(t,e,n,i,r)},t.Obj.createSubclass(t.LinearGradientFill,t.GradientFill),t.LinearGradientFill.prototype.clone=function(){var e=new t.LinearGradientFill;return this.mergeProps(e),e},t.LinearGradientFill.prototype._Init=function(e,n,i,r,o){t.LinearGradientFill.superclass._Init.call(this,n,i,r,o),this._angle=null===e||isNaN(e)?0:e},t.LinearGradientFill.prototype.getAngle=function(){return this._angle},t.LinearGradientFill.prototype.clone=function(){var e=new t.LinearGradientFill;return this.mergeProps(e),e},t.LinearGradientFill.prototype.mergeProps=function(e){t.LinearGradientFill.superclass.mergeProps.call(this,e),e._angle=this._angle},t.LinearGradientFill.prototype.setAngle=function(t){this.isLocked()||0!==t&&(Math.abs(t)>360&&(t%=360),this._angle=t)},t.LinearGradientFill.prototype.equals=function(e){return e instanceof t.LinearGradientFill&&e._angle==this._angle&&t.LinearGradientFill.superclass.equals.call(this,e)},t.ImageFill=function(t,e,n){this._Init(t,e,n)},t.Obj.createSubclass(t.ImageFill,t.Fill),t.ImageFill.prototype.getBound=function(){return this._bound},t.ImageFill.prototype.getSrc=function(){return this._src},t.ImageFill.prototype.getRepeat=function(){return this._repeat},t.ImageFill.prototype._Init=function(e,n,i){t.ImageFill.superclass._Init.call(this),this._src=e,this._bound=n,this._repeat=i},t.ImageFill.prototype.clone=function(){var e=new t.ImageFill;return this.mergeProps(e),e},t.ImageFill.prototype.mergeProps=function(e){e._src=this._src,e._bound=this._bound,e._repeat=this._repeat,t.ImageFill.superclass.mergeProps.call(this)},t.ImageFill.prototype.equals=function(e){if(e instanceof t.ImageFill&&e._src==this._src&&e._repeat==this._repeat){if(this._bound&&e._bound&&this._bound.x==e.bound.x&&this._bound.y==e.bound.y&&this._bound.w==e.bound.w&&this._bound.h==e.bound.h)return t.ImageFill.superclass.equals.call(this,e);if(!this._bound&&!e._bound)return t.ImageFill.superclass.equals.call(this,e)}return!1},t.PatternFill=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.PatternFill,t.Fill),t.PatternFill.SM_DIAG_UP_LT="sDUL",t.PatternFill.LG_DIAG_UP_LT="lDUL",t.PatternFill.SM_DIAG_UP_RT="sDUR",t.PatternFill.LG_DIAG_UP_RT="lDUR",t.PatternFill.SM_CROSSHATCH="sC",t.PatternFill.LG_CROSSHATCH="lC",t.PatternFill.SM_CHECK="sCh",t.PatternFill.LG_CHECK="lCh",t.PatternFill.SM_TRIANGLE_CHECK="sTCh",t.PatternFill.LG_TRIANGLE_CHECK="lTCh",t.PatternFill.SM_DIAMOND_CHECK="sDCh",t.PatternFill.LG_DIAMOND_CHECK="lDCh",t.PatternFill.prototype.Init=function(e,n,i){t.PatternFill.superclass._Init.call(this),
this._pattern=e?t.PatternFill._convertPatternValue(e):t.PatternFill.SM_DIAG_UP_LT,this._fillColor=n?n:"#000000",this._backgroundColor=i?i:"#ffffff"},t.PatternFill.prototype.getPattern=function(){return this._pattern},t.PatternFill.prototype.getColor=function(){return this._fillColor},t.PatternFill.prototype.getBackgroundColor=function(){return this._backgroundColor},t.PatternFill.prototype.clone=function(){var e=new t.PatternFill;return this.mergeProps(e),e},t.PatternFill.prototype.mergeProps=function(e){e._pattern=this._pattern,e._fillColor=this._fillColor,e._backgroundColor=this._backgroundColor,t.PatternFill.superclass.mergeProps.call(this)},t.PatternFill.prototype.equals=function(e){return e instanceof t.PatternFill&&e._pattern==this._pattern&&e._fillColor==this._fillColor&&e._backgroundColor==this._backgroundColor&&t.PatternFill.superclass.equals.call(this,e)},t.PatternFill.prototype.getMatrix=function(){return this._matrix?this._matrix:new t.Matrix},t.PatternFill.prototype.setMatrix=function(t){this._matrix=t,this._matrix&&!this._matrix.isLocked()&&this._matrix.__lock()},t.PatternFill._convertPatternValue=function(e){return"smallDiagonalLeft"==e?t.PatternFill.SM_DIAG_UP_LT:"largeDiagonalLeft"==e?t.PatternFill.LG_DIAG_UP_LT:"smallDiagonalRight"==e?t.PatternFill.SM_DIAG_UP_RT:"largeDiagonalRight"==e?t.PatternFill.LG_DIAG_UP_RT:"smallCrosshatch"==e?t.PatternFill.SM_CROSSHATCH:"largeCrosshatch"==e?t.PatternFill.LG_CROSSHATCH:"smallChecker"==e?t.PatternFill.SM_CHECK:"largeChecker"==e?t.PatternFill.LG_CHECK:"smallTriangle"==e?t.PatternFill.SM_TRIANGLE_CHECK:"largeTriangle"==e?t.PatternFill.LG_TRIANGLE_CHECK:"smallDiamond"==e?t.PatternFill.SM_DIAMOND_CHECK:"largeDiamond"==e?t.PatternFill.LG_DIAMOND_CHECK:e},t.RadialGradientFill=function(t,e,n,i,r,o,a){this._Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.RadialGradientFill,t.GradientFill),t.RadialGradientFill.prototype.clone=function(){var e=new t.RadialGradientFill;return this.mergeProps(e),e},t.RadialGradientFill.prototype.getRadius=function(){return this._r},t.RadialGradientFill.prototype.getCx=function(){return this._cx},t.RadialGradientFill.prototype.getCy=function(){return this._cy},t.RadialGradientFill.prototype._Init=function(e,n,i,r,o,a,s){t.RadialGradientFill.superclass._Init.call(this,e,n,i,s),this._cx=r,this._cy=o,this._r=a},t.RadialGradientFill.prototype.clone=function(){var e=new t.RadialGradientFill;return this.mergeProps(e),e},t.RadialGradientFill.prototype.mergeProps=function(e){t.RadialGradientFill.superclass.mergeProps.call(this,e),e._cx=this._cx,e._cy=this._cy,e._r=this._r},t.RadialGradientFill.prototype.equals=function(e){return e instanceof t.RadialGradientFill&&e._cx==this._cx&&e._cy==this._cy&&e._r==this._r&&t.RadialGradientFill.superclass.equals.call(this,e)},t.SelectionEffectUtils={},t.Obj.createSubclass(t.SelectionEffectUtils,t.Obj),t.SelectionEffectUtils.getHoverBorderColor=function(e){return t.ColorUtils.adjustHSL(e,0,0,.15)},t.SelectionEffectUtils.applyDrawEffect=function(t,e){var n=t.getNumDrawEffects();if(0==n)t.addDrawEffect(e);else{var i=t.getDrawEffectIndex(e);i>-1?(t.removeDrawEffectAt(i),t.addDrawEffectAt(e,i)):t.addDrawEffect(e)}},t.SelectionEffectUtils.createSelectingStroke=function(e){var n=new t.SolidStroke(t.SelectionEffectUtils.getHoverBorderColor(e),1,2);return n.setMiterLimit(1),n},t.SelectionEffectUtils.getSelectingCursor=function(){return"pointer"},t.KeyboardFocusEffect=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.KeyboardFocusEffect,t.Obj),t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS=1,t.KeyboardFocusEffect.FOCUS_STROKE_WIDTH=1,t.KeyboardFocusEffect.FOCUS_STROKE_ALPHA=1,t.KeyboardFocusEffect.FOCUS_STROKE_TYPE=t.Stroke.DOTTED,t.KeyboardFocusEffect.prototype.Init=function(e,n,i,r,o,a){this._container=n,this._focusEffect=new t.Rect(e,i.x,i.y,i.w,i.h,o);var s=this.CreateStroke();this._focusEffect.setStroke(s),this._focusEffect.setRx(t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),this._focusEffect.setRy(t.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),r&&this._focusEffect.setMatrix(r),this._focusEffect.setFill(null),this._appendLast=a},t.KeyboardFocusEffect.prototype.CreateStroke=function(){var e=t.Agent.getFocusColor(),n=t.KeyboardFocusEffect.FOCUS_STROKE_WIDTH,i=t.KeyboardFocusEffect.FOCUS_STROKE_ALPHA,r=t.KeyboardFocusEffect.FOCUS_STROKE_TYPE;t.Agent.isPlatformWebkit()&&(n=2,r=t.Stroke.SOLID);var o=new t.SolidStroke(e,i,n);return o.setType(r,n,n),o},t.KeyboardFocusEffect.prototype.getEffect=function(){return this._focusEffect},t.KeyboardFocusEffect.prototype.setEffect=function(t){this._focusEffect=t},t.KeyboardFocusEffect.prototype.show=function(){this._focusEffect instanceof t.Shape&&(this._appendLast?this._container.addChild(this._focusEffect):this._container.addChildAt(this._focusEffect,0))},t.KeyboardFocusEffect.prototype.hide=function(){this._focusEffect instanceof t.Shape&&this._container.removeChild(this._focusEffect)},t.Dimension=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.Dimension,t.Obj),t.Dimension.prototype.Init=function(t,e){this.w=null===t||isNaN(t)?0:t,this.h=null===e||isNaN(e)?0:e},t.Dimension.prototype.getWidth=function(){return this.w},t.Dimension.prototype.getHeight=function(){return this.h},t.Matrix=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.Matrix,e),t.Matrix._DECOMP_TX=0,t.Matrix._DECOMP_TY=1,t.Matrix._DECOMP_R=2,t.Matrix._DECOMP_SKEWX=3,t.Matrix._DECOMP_SX=4,t.Matrix._DECOMP_SY=5,t.Matrix.prototype.Init=function(e,n,i,r,o,a){this._a=null==e?1:e,this._b=null==n?0:n,this._c=null==i?0:i,this._d=null==r?1:r,this._tx=null==o?0:o,this._ty=null==a?0:a,this._u=0,this._v=0,this._w=1,t.Matrix.superclass._Init.call(this)},t.Matrix.prototype.Identity=function(){this._a=1,this._b=0,this._c=0,this._d=1,this._tx=0,this._ty=0},t.Matrix.prototype.getA=function(){return this._a},t.Matrix.prototype.getB=function(){return this._b},t.Matrix.prototype.getC=function(){return this._c},t.Matrix.prototype.getD=function(){return this._d},t.Matrix.prototype.getTx=function(){return this._tx},t.Matrix.prototype.getTy=function(){return this._ty},t.Matrix.prototype.clone=function(){return new t.Matrix(this._a,this._b,this._c,this._d,this._tx,this._ty)},t.Matrix.prototype.concat=function(t){if(!this.isLocked()){var e=this._a*t._a+this._c*t._b+this._u*t._tx,n=this._b*t._a+this._d*t._b+this._v*t._tx,i=this._tx*t._a+this._ty*t._b+this._w*t._tx,r=this._a*t._c+this._c*t._d+this._u*t._ty,o=this._b*t._c+this._d*t._d+this._v*t._ty,a=this._tx*t._c+this._ty*t._d+this._w*t._ty;this._a=e,this._b=n,this._c=r,this._d=o,this._tx=i,this._ty=a}},t.Matrix.prototype.translate=function(e,n){if(!this.isLocked()){var i=new t.Matrix;i._tx=e,i._ty=n,this.concat(i)}},t.Matrix.prototype.scale=function(e,n,i,r){if(!this.isLocked()){(i||r)&&this.translate(-i,-r);var o=new t.Matrix;o._a=e,o._d=n,this.concat(o),(i||r)&&this.translate(i,r)}},t.Matrix.prototype.rotate=function(e){if(!this.isLocked()){var n=new t.Matrix;n._a=Math.cos(e),n._d=n._a,n._c=Math.sin(e),n._b=-n._c,this.concat(n)}},t.Matrix.prototype.skew=function(e,n){if(!this.isLocked()){var i=new t.Matrix;i._b=Math.tan(e),i._c=Math.tan(n),this.concat(i)}},t.Matrix.prototype.Determinant=function(){var t=this._a*(this._d*this._w-this._ty*this._v)-this._b*(this._c*this._w-this._ty*this._u)+this._tx*(this._c*this._v-this._d*this._u);return t},t.Matrix.prototype.invert=function(){if(!this.isLocked()){var t=this.Determinant(),e=this._d*this._w-this._ty*this._v,n=this._tx*this._v-this._b*this._w,i=this._b*this._ty-this._tx*this._d,r=this._ty*this._u-this._c*this._w,o=this._a*this._w-this._tx*this._u,a=this._tx*this._c-this._a*this._ty;this._a=e/t,this._b=n/t,this._tx=i/t,this._c=r/t,this._d=o/t,this._ty=a/t}},t.Matrix.prototype._decompose=function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,o=this._ty;if(t*i-e*n===0)return null;var a=Math.sqrt(t*t+n*n);t/=a,n/=a;var s=t*e+n*i;e-=t*s,i-=n*s;var l=Math.sqrt(e*e+i*i);e/=l,i/=l,s/=l;var u=t*i-e*n;u===-1&&(s=-s,l=-l);var h=Math.atan2(n,t),c=Math.atan(s);return[r,o,h,c,a,l]},t.Matrix.prototype._recompose=function(t){if(!this.isLocked()){this.Identity();var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5];this.scale(o,a),this.skew(r,0),this.rotate(i),this.translate(e,n)}},t.Matrix.prototype.equals=function(t){return!(!this&&t)&&(!(this&&!t)&&(!this&&!t||this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty))},t.Matrix.prototype.transformPoint=function(e){var n=this._a*e.x+this._b*e.y+1*this._tx,i=this._c*e.x+this._d*e.y+1*this._ty;return new t.Point(n,i)},t.Matrix.prototype.isIdentity=function(){return 1==this._a&&0==this._b&&0==this._c&&1==this._d&&0==this._tx&&0==this._ty},t.Point=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.Point,t.Obj),t.Point.prototype.Init=function(t,e){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e},t.Point.prototype.equals=function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},t.Rectangle=function(t,e,n,i){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e,this.w=null===n||isNaN(n)?0:n,this.h=null===i||isNaN(i)?0:i},t.Obj.createSubclass(t.Rectangle,t.Obj),t.Rectangle.create=function(e){return new t.Rectangle(e[0],e[1],e[2],e[3])},t.Rectangle.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h},t.Rectangle.prototype.getCenter=function(){return new t.Point(this.x+this.w/2,this.y+this.h/2)},t.Rectangle.prototype.getUnion=function(e){var n=new t.Rectangle;if(e&&0!==e.w&&0!==e.h)if(0!==this.w&&0!==this.h){var i=this.x+this.w,r=this.y+this.h,o=e.x+e.w,a=e.y+e.h,s=Math.min(this.x,e.x),l=Math.min(this.y,e.y);n.w=i<o?o-s:i-s,n.h=r>a?r-l:a-l,n.x=s,n.y=l}else n.x=e.x,n.y=e.y,n.w=e.w,n.h=e.h;else n.x=this.x,n.y=this.y,n.w=this.w,n.h=this.h;return n},t.Rectangle.prototype.getIntersection=function(e){var n=new t.Rectangle;if(!e||0===e.w||0===e.h)return null;if(0===this.w||0===this.h)return null;var i=this.x+this.w,r=this.y+this.h,o=e.x+e.w,a=e.y+e.h,s=Math.max(this.x,e.x),l=Math.max(this.y,e.y);return s>=i||s>=o||l>=r||l>=a?null:(n.w=i<o?i-s:o-s,n.h=r>a?a-l:r-l,n.x=s,n.y=l,n)},t.Rectangle.prototype.grow=function(t,e){var n=this.x,i=this.y,r=this.x+this.w,o=this.y+this.h;t<n&&(n=t),t>r&&(r=t),e<i&&(i=e),e>o&&(o=e),this.x=n,this.y=i,this.w=r-n,this.h=o-i},t.Rectangle.prototype.intersects=function(t){if(t&&0!==t.w&&0!==t.h&&0!==this.w&&0!==this.h){var e=this.x+this.w,n=this.y+this.h,i=t.x+t.w,r=t.y+t.h;return!(t.x>e||i<this.x||t.y>n||r<this.y)}return!1},t.Rectangle.prototype.clone=function(){return new t.Rectangle(this.x,this.y,this.w,this.h)},t.Rectangle.prototype.equals=function(e){return e instanceof t.Rectangle&&this.x==e.x&&this.y==e.y&&this.w==e.w&&this.h==e.h},t.Rectangle.prototype.toString=function(){return this.x+", "+this.y+", "+this.w+", "+this.h},t.VectorUtils={},t.Obj.createSubclass(t.VectorUtils,t.Obj),t.VectorUtils.createVector=function(t,e){var n={};return n.x=t,n.y=e,n},t.VectorUtils.addVectors=function(e,n){return t.VectorUtils.createVector(e.x+n.x,e.y+n.y)},t.VectorUtils.subtractVectors=function(e,n){return t.VectorUtils.createVector(e.x-n.x,e.y-n.y)},t.VectorUtils.scaleVector=function(e,n){return t.VectorUtils.createVector(e.x*n,e.y*n)},t.VectorUtils.getMagnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.Array2D=function(){this.Init()},t.Obj.createSubclass(t.Array2D,t.Obj),t.Array2D.prototype.Init=function(){this._data=[]},t.Array2D.prototype.get=function(t,e){return this._getInner(t)[e]},t.Array2D.prototype.put=function(t,e,n){var i=this._getInner(t),r=i[e];return i[e]=n,r},t.Array2D.prototype._getInner=function(t){var e=this._data[t];return e||(e=[],this._data[t]=e),e},t.Cache=function(t){this.Init(t)},t.Obj.createSubclass(t.Cache,t.Obj),t.Cache._TARGET_SIZE=1e3,t.Cache._BUFFER_SIZE=.5,t.Cache.prototype.Init=function(e){this._targetSize=null!=e?e:t.Cache._TARGET_SIZE,this._maxSize=Math.ceil(this._targetSize*(1+t.Cache._BUFFER_SIZE)),this._cache={},this._lruArray=[],this._hits=0,this._misses=0},t.Cache.prototype.get=function(t){var e=this._cache[t];return null!=e?(this._hits++,e):(this._misses++,null)},t.Cache.prototype.put=function(e,n){var i=null!=this._cache[e];if(this._cache[e]=n,i){var r=t.ArrayUtils.getIndex(this._lruArray,e);this._lruArray.splice(r,1),this._lruArray.push(e)}else if(this._lruArray.push(e),this._lruArray.length>this._maxSize)for(var o=this._lruArray.splice(0,this._maxSize-this._targetSize),a=0;a<o.length;a++)delete this._cache[o[a]]},t.Cache.prototype.toString=function(){var t="Cache Size: "+this._lruArray.length;return t+="\nHits: "+this._hits,t+="\nMisses: "+this._misses,t+="\nHit %: "+Math.round(1e4*this._hits/(this._hits+this._misses))/100},t.DragAndDropUtils={},t.Obj.createSubclass(t.DragAndDropUtils,t.Obj),t.DragAndDropUtils.getDragFeedbackBounds=function(t,e){if(!t)return null;var n=null;if(t instanceof Array){if(t.length>0){n=t[0].getDimensions(e?e:t[0].getParent());for(var i=1;i<t.length;i++){var r=t[i],o=r.getDimensions(e?e:r.getParent());o.x<n.x&&(n.w+=n.x-o.x,n.x=o.x),o.y<n.y&&(n.h+=n.y-o.y,n.y=o.y),o.x+o.w>n.x+n.w&&(n.w=o.x+o.w-n.x),o.y+o.h>n.y+n.h&&(n.h=o.y+o.h-n.y)}}}else n=t.getDimensions(e?e:t.getParent());return n},t.LayoutUtils={},t.Obj.createSubclass(t.LayoutUtils,t.Obj),t.LayoutUtils.position=function(e,n,i,r,o,a){i&&(a=r*o>0?a:0,"start"==n?n=t.Agent.isRightToLeft(i.getCtx())?"right":"left":"end"==n&&(n=t.Agent.isRightToLeft(i.getCtx())?"left":"right"),"top"==n?(i.setTranslate(e.x+e.w/2-r/2,e.y),e.y+=o+a,e.h-=o+a):"bottom"==n?(i.setTranslate(e.x+e.w/2-r/2,e.y+e.h-o),e.h-=o+a):"left"==n?(i.setTranslate(e.x,e.y+e.h/2-o/2),e.x+=r+a,e.w-=r+a):"right"==n&&(i.setTranslate(e.x+e.w-r,e.y+e.h/2-o/2),e.w-=r+a))},t.LayoutUtils.align=function(e,n,i,r){if(i){var o=n;"start"==o?o=t.Agent.isRightToLeft(i.getCtx())?"right":"left":"end"==o&&(o=t.Agent.isRightToLeft(i.getCtx())?"left":"right"),"left"==o?i.setX(e.x):"center"==o?i.setX(e.x+e.w/2-r/2):"right"==o&&i.setX(e.x+e.w-r)}},t.LayoutUtils.getBubbleSize=function(t,e,n,i,r){if(t<=0)return 0;var o=i*i,a=r*r;if(n/e<a/o){var s=Math.sqrt(o*a),l=Math.sqrt(e*n);if(t==l)return Math.sqrt(s);a=n/l*s,o=e/l*s}var u=o+(t-e)/(n-e)*(a-o);return Math.sqrt(u)},t.Math=new Object,t.Obj.createSubclass(t.Math,t.Obj),t.Math.RADS_PER_DEGREE=Math.PI/180,t.Math.DEGREES_PER_RAD=180/Math.PI,t.Math.TWO_PI=2*Math.PI,t.Math.HALF_PI=Math.PI/2,t.Math.QUARTER_PI=Math.PI/4,t.Math.TOLERANCE=.1,t.Math.cantorPairing=function(t,e){return t<0||e<0?-1:(t+e)*(t+e+1)/2+t},t.Math.degreesToRads=function(e){return e*t.Math.RADS_PER_DEGREE},t.Math.radsToDegrees=function(e){return e*t.Math.DEGREES_PER_RAD},t.Math.interpolateNumber=function(t,e,n){return t+n*(e-t)},t.Math.log10=function(t){return Math.log(t)/Math.LN10},t.Map2D=function(){this.Init()},t.Obj.createSubclass(t.Map2D,t.Obj),t.Map2D.prototype.Init=function(){this._map={}},t.Map2D.prototype.get=function(t,e){return this._getInnerMap(t)[e]},t.Map2D.prototype.put=function(t,e,n){var i=this._getInnerMap(t),r=i[e];return i[e]=n,r},t.Map2D.prototype._getInnerMap=function(t){var e=this._map[t];return e||(e={},this._map[t]=e),e},t.PixelMap=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.PixelMap,t.Array2D),t.PixelMap._INITIAL_SIZE=1500,t.PixelMap.prototype.Init=function(e,n){t.PixelMap.superclass.Init.call(this),this._innerMap=n,this._innerMap&&(this._innerMap._outerMap=this,this._innerMap._bOuterMap=!0),this._scale=e||1,this._capacity=this._scale*this._scale,this._bInnerMap=null!=this._innerMap,this._bOuterMap=!1;for(var i=t.PixelMap._INITIAL_SIZE/this._scale,r=0;r<i;r++)for(var o=0;o<i;o++)this.put(r,o,0)},t.PixelMap.prototype.isObscured=function(t,e,n,i){for(var r=this._adjustForScale(t),o=this._adjustForScale(e),a=this._adjustForScale(n),s=this._adjustForScale(i),l=r;l<=a;l++)for(var u=o;u<=s;u++){var h=this.get(l,u);if(h!==!0){if(!this._bInnerMap)return!1;var c=Math.max(t,l*this._scale),d=Math.max(e,u*this._scale),p=Math.min(n,(l+1)*this._scale-1),g=Math.min(i,(u+1)*this._scale-1);if(!this._innerMap.isObscured(c,d,p,g))return!1}}return!0},t.PixelMap.prototype.obscure=function(t,e,n,i,r){for(var o=this._adjustForScale(t),a=this._adjustForScale(e),s=this._adjustForScale(n),l=this._adjustForScale(i),u=o;u<=s;u++)for(var h=a;h<=l;h++){var c=this.get(u,h);if(c!==!0)if(this._bInnerMap){var d=Math.max(t,u*this._scale),p=Math.max(e,h*this._scale),g=Math.min(n,(u+1)*this._scale-1),f=Math.min(i,(h+1)*this._scale-1);this._innerMap.obscure(d,p,g,f,r)}else this._increment(u,h,r)}},t.PixelMap.prototype._increment=function(t,e,n){var i=this._adjustForScale(t),r=this._adjustForScale(e),o=this.get(i,r);o=null!=o?o+n:n,o>=this._capacity&&(o=!0),this.put(i,r,o),o===!0&&this._bOuterMap&&this._outerMap._increment(t,e,this._capacity)},t.PixelMap.prototype._adjustForScale=function(t){return Math.floor(t/this._scale)},t.PropMap=function(){this.Init()},t.PropMap.REGEXP=new RegExp("#\\{([^\\}]*)\\}","g"),t.Obj.createSubclass(t.PropMap,t.Obj),t.PropMap.prototype.Init=function(){this._props={}},t.PropMap.prototype.getProperty=function(t){return this._props[t]},t.PropMap.prototype.setProperty=function(t,e){this._props[t]=e},t.PropMap.prototype.getStringProp=function(t,e){var n=this._props[t];return n?n:e},t.PropMap.prototype.getBooleanProp=function(t,e){var n=this._props[t],i=e;return"boolean"==typeof n?i=n:0===n?i=!1:1===n?i=!0:"string"==typeof n&&(i="true"===n.toLowerCase()||"yes"===n.toLowerCase()||"on"===n.toLowerCase()),i},t.PropMap.prototype.getIntegerProp=function(t,e){var n,i=this._props[t];return i&&(n=parseInt(i)),n?n:e},t.PropMap.prototype.getFloatProp=function(t,e){var n,i=this._props[t];return i&&(n=parseFloat(i)),n?n:e},t.PropMap.prototype.getId=function(){return this.getProperty("id")},t.PropMap.prototype.setId=function(t){this.setProperty("id",t)},t.PropMap.prototype.setProperties=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.name&&void 0!==n.value&&this.setProperty(n.name,n.value)}},t.PropMap.prototype.stamp=function(e){var n=new this.constructor,i={};for(var r in this._props)this._props[r]&&this._props[r].replace?i[r]=this._props[r].replace(t.PropMap.REGEXP,function(t,n){return e&&void 0!==e[n]?e[n]:t}):i[r]=this._props[r];return n._props=i,n},t.PropMap.toELContext=function(t){for(var e,n=t.getAttributes(),i={},r=0;r<n.length;r++)e=n[r],i[e.name]=e.value;return i},t.ImageLoader={},t.Obj.createSubclass(t.ImageLoader,t.Obj),t.ImageLoader.loadImage=function(t,e,n){var i=t.getImplFactory().getImageLoader();return i.loadImage(e,n)},t.JsonUtils=new Object,t.Obj.createSubclass(t.JsonUtils,t.Obj),t.JsonUtils.clone=function(e,n,i){if(null==e)return null;var r=null;if(e instanceof Array){r=[];for(var o=0;o<e.length;o++)t.JsonUtils._isDeepClonable(e[o])?r[o]=t.JsonUtils.clone(e[o],n,i):r[o]=e[o]}else if(e instanceof t.CSSStyle)r=e.clone();else if(e instanceof Date)r=e.getTime();else if(t.JsonUtils._isClonableObject(e)){r={};for(var a in e)if(!n||n(a)){var s=e[a];if(i&&1==i[a]||!t.JsonUtils._isDeepClonable(s)||"_widgetConstructor"==a)r[a]=s;else{var l=i?i[a]:null;r[a]=t.JsonUtils.clone(s,n,l)}}}return r},t.JsonUtils.merge=function(e,n,i){var r=t.JsonUtils.clone(e,null,i),o=t.JsonUtils.clone(n,null,i);return null==r?o:null==o?r:(t.JsonUtils._copy(r,o),o)},t.JsonUtils._copy=function(e,n){for(var i in e){var r=e[i];r&&r instanceof Array||"_widgetConstructor"==i?n[i]=r:n[i]&&n[i]instanceof t.CSSStyle?r instanceof t.CSSStyle?n[i].merge(r):n[i].merge(new t.CSSStyle(r)):t.JsonUtils._isDeepClonable(r)&&n[i]?t.JsonUtils._copy(r,n[i]):n[i]=r}},t.JsonUtils._isDeepClonable=function(t){return"undefined"!=typeof t&&!(!(t instanceof Object)||t instanceof Boolean||t instanceof String||t instanceof Number||t instanceof Function||t.then)},t.JsonUtils._isClonableObject=function(t){return t instanceof Object&&(!t.then&&(!t.jquery&&(!("undefined"!=typeof NodeList&&t instanceof NodeList)&&!("undefined"!=typeof Node&&t instanceof Node))))},t.BaseEvent=function(){},t.Obj.createSubclass(t.BaseEvent,t.Obj),t.BaseEvent.prototype.Init=function(e){this.type=e.type,this.type=this.type,this.target=t.BaseEvent.FindDisplayable(e.target),this._isPropagationStopped=!1,this._event=e},t.BaseEvent.prototype.getNativeEvent=function(){return this._event},t.BaseEvent.prototype.preventDefault=function(){this._event.cancelable&&this._event.preventDefault()},t.BaseEvent.prototype.stopPropagation=function(){this._event.stopPropagation&&this._event.stopPropagation(),this._event.cancelBubble=!0,this._event.cancel=!0,this._event.returnValue=!1,this._isPropagationStopped=!0},t.BaseEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},t.BaseEvent.prototype.getType=function(){return this.type},t.BaseEvent.FindDisplayable=function(t){for(;t;){if(t._obj&&t._obj.getObj&&t._obj.getObj())return t._obj.getObj();t=t.parentNode}return null},t.BaseComponentEvent=function(){},t.Obj.createSubclass(t.BaseComponentEvent,t.Obj),t.BaseComponentEvent.CLIENT_ROW_KEY="clientRowKey",t.BaseComponentEvent.prototype.Init=function(t){this._type=t,this.type=t},t.BaseComponentEvent.prototype.getType=function(){return this._type},t.BaseComponentEvent.prototype.addParam=function(t,e){this._paramKeys||(this._paramKeys=[],this._paramValues=[]),this._paramKeys.push(t),this._paramValues.push(e),this[t]=e},t.BaseComponentEvent.prototype.getParamValue=function(t){if(!t||!this._paramKeys||!this._paramValues)return null;for(var e=-1,n=0;n<this._paramKeys.length;n++)if(this._paramKeys[n]==t){e=n;break}return e!=-1?this._paramValues[e]:this[t]};var m=function(t){this.Init(t)};t.Obj.createSubclass(m,t.BaseEvent),m.FOCUS=t.Obj.defineConstant("focus"),m.FOCUSIN=t.Obj.defineConstant("focusin"),m.FOCUSOUT=t.Obj.defineConstant("focusout"),m.BLUR=t.Obj.defineConstant("blur"),m.prototype.Init=function(e){m.superclass.Init.call(this,e),this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.view=e.view,null!=e.relatedTarget&&(this.relatedTarget=t.BaseEvent.FindDisplayable(e.relatedTarget))},t.KeyboardEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.KeyboardEvent,t.BaseEvent),t.KeyboardEvent.KEYDOWN=t.Obj.defineConstant("keydown"),t.KeyboardEvent.KEYUP=t.Obj.defineConstant("keyup"),t.KeyboardEvent.KEYPRESS=t.Obj.defineConstant("keypress"),t.KeyboardEvent.TAB=9,t.KeyboardEvent.ENTER=13,t.KeyboardEvent.SHIFT=16,t.KeyboardEvent.CONTROL=17,t.KeyboardEvent.HOME=36,t.KeyboardEvent.END=35,t.KeyboardEvent.ESCAPE=27,t.KeyboardEvent.SPACE=32,t.KeyboardEvent.PAGE_UP=33,t.KeyboardEvent.PAGE_DOWN=34,t.KeyboardEvent.UP_ARROW=38,t.KeyboardEvent.DOWN_ARROW=40,t.KeyboardEvent.DELETE=46,t.KeyboardEvent.LEFT_ARROW=37,t.KeyboardEvent.RIGHT_ARROW=39,t.KeyboardEvent.OPEN_BRACKET=219,t.KeyboardEvent.CLOSE_BRACKET=221,t.KeyboardEvent.BACK_SLASH=220,t.KeyboardEvent.FORWARD_SLASH=191,t.KeyboardEvent.ZERO=48,t.KeyboardEvent.NUMPAD_ZERO=96,t.KeyboardEvent.ONE=49,t.KeyboardEvent.NUMPAD_ONE=97,t.KeyboardEvent.TWO=50,t.KeyboardEvent.NUMPAD_TWO=98,t.KeyboardEvent.THREE=51,t.KeyboardEvent.NUMPAD_THREE=99,t.KeyboardEvent.FOUR=52,t.KeyboardEvent.NUMPAD_FOUR=100,t.KeyboardEvent.FIVE=53,t.KeyboardEvent.NUMPAD_FIVE=101,t.KeyboardEvent.SIX=54,t.KeyboardEvent.NUMPAD_PLUS=107,t.KeyboardEvent.NUMPAD_MINUS=109,t.KeyboardEvent.WEBKIT_PLUS=187,t.KeyboardEvent.WEBKIT_MINUS=189,t.KeyboardEvent.GECKO_PLUS=61,t.KeyboardEvent.GECKO_MINUS=173,t.KeyboardEvent.WEBKIT_SEMICOLON=186,t.KeyboardEvent.GECKO_SEMICOLON=59,t.KeyboardEvent.A=65,t.KeyboardEvent.F=70,t.KeyboardEvent.L=76,t.KeyboardEvent.M=77,t.KeyboardEvent.N=78,t.KeyboardEvent.PERIOD=190,t.KeyboardEvent.NUMPAD_PERIOD=110,t.KeyboardEvent.SINGLE_QUOTE=222,t.KeyboardEvent.STAR=56,t.KeyboardEvent.NUMPAD_STAR=144,t.KeyboardEvent.OPEN_ANGLED_BRACKET=188,t.KeyboardEvent.CLOSE_ANGLED_BRACKET=190,t.KeyboardEvent.GRAVE_ACCENT=192,t.KeyboardEvent.prototype.Init=function(e){t.KeyboardEvent.superclass.Init.call(this,e),this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.view=e.view,this.charCode=e.charCode,this.keyCode=e.keyCode,this.location=e.location,this.ctrlKey=e.ctrlKey||e.metaKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.repeat=e.repeat,this.locale=e.locale},t.KeyboardEvent.isPlus=function(e){var n=e.keyCode;return n==t.KeyboardEvent.NUMPAD_PLUS||(t.Agent.isPlatformGecko()?!(n!=t.KeyboardEvent.GECKO_PLUS||!e.shiftKey):!(n!=t.KeyboardEvent.WEBKIT_PLUS||!e.shiftKey))},t.KeyboardEvent.isEquals=function(e){var n=e.keyCode;return t.Agent.isPlatformGecko()?n==t.KeyboardEvent.GECKO_PLUS&&!e.shiftKey:n==t.KeyboardEvent.WEBKIT_PLUS&&!e.shiftKey},t.KeyboardEvent.isMinus=function(e){var n=e.keyCode;return n==t.KeyboardEvent.NUMPAD_MINUS||(t.Agent.isPlatformGecko()?n==t.KeyboardEvent.GECKO_MINUS&&!e.shiftKey:n==t.KeyboardEvent.WEBKIT_MINUS&&!e.shiftKey)},t.KeyboardEvent.isUnderscore=function(e){var n=e.keyCode;return t.Agent.isPlatformGecko()?!(n!=t.KeyboardEvent.GECKO_MINUS||!e.shiftKey):!(n!=t.KeyboardEvent.WEBKIT_MINUS||!e.shiftKey)},t.KeyboardEvent.isSemicolon=function(e){var n=e.keyCode;return t.Agent.isPlatformGecko()?n==t.KeyboardEvent.GECKO_SEMICOLON:n==t.KeyboardEvent.WEBKIT_SEMICOLON},t.MouseEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.MouseEvent,t.BaseEvent),t.MouseEvent.CLICK=t.Obj.defineConstant("click"),t.MouseEvent.DBLCLICK=t.Obj.defineConstant("dblclick"),t.MouseEvent.MOUSEOVER=t.Obj.defineConstant("mouseover"),t.MouseEvent.MOUSEOUT=t.Obj.defineConstant("mouseout"),t.MouseEvent.MOUSEDOWN=t.Obj.defineConstant("mousedown"),t.MouseEvent.MOUSEUP=t.Obj.defineConstant("mouseup"),t.MouseEvent.MOUSEMOVE=t.Obj.defineConstant("mousemove"),t.MouseEvent.MOUSEWHEEL=t.Obj.defineConstant("wheel"),t.MouseEvent.RIGHT_CLICK_BUTTON=2,t.MouseEvent.prototype.Init=function(e){t.MouseEvent.superclass.Init.call(this,e),null!=e.relatedTarget&&(this.relatedTarget=t.BaseEvent.FindDisplayable(e.relatedTarget)),this.button=e.button,this.ctrlKey=e.ctrlKey||e.metaKey,this.shiftKey=e.shiftKey,this.pageX=e.pageX,this.pageY=e.pageY,this._isEventModifiedForIE=!1,null!=e.wheelDeltaY?this.wheelDelta=e.wheelDeltaY/40:null!=e.deltaY?(this.deltaMode=e.deltaMode,this.deltaY=e.deltaY,e.deltaMode==e.DOM_DELTA_LINE?this.wheelDelta=-e.deltaY:e.deltaMode==e.DOM_DELTA_PIXEL&&(this.wheelDelta=-e.deltaY/15)):null!=e.wheelDelta?this.wheelDelta=e.wheelDelta/40:this.wheelDelta=e.detail},t.MouseEvent.prototype.modifyEventForIE=function(e,n){this._isEventModifiedForIE||(this.type=e,this.relatedTarget=this.target,this.target=t.BaseEvent.FindDisplayable(n),this._isEventModifiedForIE=!0)},t.TouchEvent=function(t){this.Init(t)},t.Obj.createSubclass(t.TouchEvent,t.BaseEvent),t.TouchEvent.TOUCHSTART=t.Obj.defineConstant("touchstart"),t.TouchEvent.TOUCHMOVE=t.Obj.defineConstant("touchmove"),t.TouchEvent.TOUCHEND=t.Obj.defineConstant("touchend"),t.TouchEvent.TOUCHCANCEL=t.Obj.defineConstant("touchcancel"),t.TouchEvent.prototype.Init=function(e){t.TouchEvent.superclass.Init.call(this,e),e.type==t.TouchEvent.TOUCHCANCEL&&(this.type=t.TouchEvent.TOUCHEND),this.touches=t.TouchEvent.createTouchArray(e.touches),this.targetTouches=t.TouchEvent.createTouchArray(e.targetTouches),this.changedTouches=t.TouchEvent.createTouchArray(e.changedTouches),this._touchManager=null},t.TouchEvent.prototype.blockTouchHold=function(){this.getNativeEvent()._touchHoldBlocked=!0},t.TouchEvent.prototype.isInitialTouch=function(){return this.touches.length-this.changedTouches.length==0},t.TouchEvent.prototype.isTouchHoldBlocked=function(){return!!this.getNativeEvent()._touchHoldBlocked},t.TouchEvent.createTouchArray=function(e){for(var n=new Array,i=0;i<e.length;i++){var r=e[i],o=new t.Touch(r);n.push(o)}return n},t.TouchEvent.prototype.stopPropagation=function(){t.TouchEvent.superclass.stopPropagation.call(this),this._touchManager&&this._touchManager.postEventBubble(this)},t.TouchEvent.prototype.setTouchManager=function(t){this._touchManager=t},t.Touch=function(t){this.Init(t)},t.Obj.createSubclass(t.Touch,t.Obj),t.Touch.prototype.Init=function(t){this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,this.pageX=t.pageX,this.pageY=t.pageY,this.target=t.target,this.identifier=null==t.identifier||isNaN(t.identifier)?1:t.identifier},t.TouchManager=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.TouchManager,t.Obj),t.TouchManager.TOUCH_MODE="mode",t.TouchManager.TOUCH_MODE_DEFAULT="defaultMode",t.TouchManager.TOUCH_MODE_LONG_PRESS="longPressMode",t.TouchManager.PREV_HOVER_OBJ="prevHoverObj",t.TouchManager.HOVER_TOUCH_KEY="hoverTouch",t.TouchManager.prototype.Init=function(e,n){this._context=n,this._id=e,this._touchCount=0,this._touchHoldTimer=new t.Timer(this._context,200,this._handleTouchHoldStartTimer,this),this._blockTouchHold=!1,this._touchMap=new Object,this._savedTouchInfo=new Array,this._addTouchHoldMoveEventListener(this._onTouchHoldHover,this),this._doubleTapTimer=new t.Timer(this._context,600,this._handleDoubleTapTimer,this,1),this._dvtTouchEvent=null},t.TouchManager.prototype.blockTouchHold=function(){this._stopTouchHoldTimer(),this._blockTouchHold=!0},t.TouchManager.prototype.unblockTouchHold=function(){this._blockTouchHold=!1},t.TouchManager.prototype._addTouchHoldMoveEventListener=function(e,n){this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,e,n),this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,e,n),this.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,e,n)},t.TouchManager.prototype._onTouchHoldHover=function(e){var n=e.getType(),i=e.touch,r=e.getNativeEvent(),o=this._touchMap[i.identifier],a=e.target;if(n==t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE){var s=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,i,a,null,r);s._isCancelEvent=this._isCancelEvent,null!=a&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,i,a,null,r)),o[t.TouchManager.PREV_HOVER_OBJ]=null,this.FireListener(s)}else n==t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE?(o[t.TouchManager.PREV_HOVER_OBJ]=null,null!=a&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,i,a,null,r)),o[t.TouchManager.PREV_HOVER_OBJ]=a,this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,i,a,null,r))):n==t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE&&(this._fireHoverOverOutEvents(a,o[t.TouchManager.PREV_HOVER_OBJ],i,r),o[t.TouchManager.PREV_HOVER_OBJ]=a,this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,i,a,null,r)))},t.TouchManager.prototype._getObjFromTouch=function(t){var e=null;if(t){var n=this._context.getDocumentUtils();n&&(e=n.elementFromTouch(t))}return e},t.TouchManager.prototype._fireHoverOverOutEvents=function(e,n,i,r){n!=e&&(null!=n&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,i,n,e,r)),null!=e&&this.FireListener(new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,i,e,n,r)))},t.TouchManager.prototype.addTouchEventListener=function(t,e,n){var i=this._getListeners(t,!0);i.push(e),i.push(n)},t.TouchManager.prototype.removeTouchEventListener=function(t,e,n){var i=this._getListeners(t,!1);if(i)for(var r=0;r<i.length;r+=2)if(i[r]===e&&i[r+1]===n){i.splice(r,2);break}},t.TouchManager.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var n=t,i=this._listenerObj[n];return!i&&e&&(i=[],this._listenerObj[n]=i),i},t.TouchManager.prototype.FireListener=function(t){var e=this._getListeners(t.getType(),!1);if(e)for(var n=0;n<e.length;n+=2){var i=e[n+1];e[n].call(i,t)}},t.TouchManager.prototype.startTouchHold=function(e){var n=this._startSingleFingerTouchId;if(null!=n&&!isNaN(n)){var i=this._touchMap[n];if(i){for(var r=i.startTarget,o=i.startTouch,a=e.getNativeEvent(),s=this._findMatches("touchId",n),l=0;l<s.length;l++){var u=s[l],h=u.touchObj,c=u.touchId;if(h!=t.TouchManager.HOVER_TOUCH_KEY){var d=this.getTouchInfo(c),p=d.startTouch;this.performAssociatedTouchEnd(p,h,null)}}i[t.TouchManager.TOUCH_MODE]=t.TouchManager.TOUCH_MODE_LONG_PRESS,this.saveProcessedTouch(n,t.TouchManager.HOVER_TOUCH_KEY,null,t.TouchManager.HOVER_TOUCH_KEY,t.TouchManager.HOVER_TOUCH_KEY,this.HoverMoveInternal,this.HoverEndInternal,this);
var g=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,o,r,null,a);this.FireListener(g)}}},t.TouchManager.prototype.fireLogicalEvents=function(e){var n=e.type,i=e.getNativeEvent();if(n==t.TouchEvent.TOUCHSTART?(e.isTouchHoldBlocked()||this.processAssociatedTouchAttempt(e,t.TouchManager.HOVER_TOUCH_KEY,this.HoverStartInternal,this),this._doubleTapAttemptStarted&&e.preventDefault()):n==t.TouchEvent.TOUCHMOVE?this.processAssociatedTouchMove(e,t.TouchManager.HOVER_TOUCH_KEY):n==t.TouchEvent.TOUCHEND&&this.processAssociatedTouchEnd(e,t.TouchManager.HOVER_TOUCH_KEY),n==t.TouchEvent.TOUCHEND)for(var r=this._getStoredTouches(e.changedTouches),o=0;o<r.length;o++){var a=r[o],s=a.identifier,l=this.getTouchInfo(s),u=l.currentObj;if(l[t.TouchManager.TOUCH_MODE]!=t.TouchManager.TOUCH_MODE_LONG_PRESS&&l.fireClick){var h=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,a,u,null,i);if(h.touchEvent=e,this.FireListener(h),this._doubleTapAttemptStarted){var c=this._doubleTapAttemptObj;if(this.resetDoubleTap(),u==c){var d=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,a,u,null,i);d.touchEvent=e,this.FireListener(d)}}else this.resetDoubleTap(),this._doubleTapTimer.start(),this._doubleTapAttemptStarted=!0,this._doubleTapAttemptObj=u}}},t.TouchManager.prototype.getTouchInfo=function(t){return this._touchMap[t]},t.TouchManager.prototype.HoverStartInternal=function(t,e){if(!this._blockTouchHold){var n=e.identifier;this._startSingleFingerTouchId=n,this._stopTouchHoldTimer(),this._startTouchHoldTimer(t)}},t.TouchManager.prototype.HoverMoveInternal=function(e,n){var i=n.identifier,r=this.getTouchInfo(i),o=r.currentObj,a=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,n,o,null,e.getNativeEvent());this.FireListener(a),e.preventDefault()},t.TouchManager.prototype.HoverEndInternal=function(e,n){var i=n.identifier,r=this.getTouchInfo(i),o=r.currentObj,a=new t.ComponentTouchEvent(t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,n,o,null,e.getNativeEvent());this.FireListener(a),e&&e.preventDefault()},t.TouchManager.prototype.resetTouchHold=function(){this._startSingleFingerTouchId=null,this._stopTouchHoldTimer()},t.TouchManager.prototype.preEventBubble=function(e){e.setTouchManager&&e.setTouchManager(this);var n=e.type;n==t.TouchEvent.TOUCHSTART?this.processTouchStart(e):n==t.TouchEvent.TOUCHMOVE?this.processTouchMove(e):n==t.TouchEvent.TOUCHEND&&this.processTouchEnd(e)},t.TouchManager.prototype.postEventBubble=function(e){var n=e.type;if(n==t.TouchEvent.TOUCHSTART);else if(n==t.TouchEvent.TOUCHMOVE);else if(n==t.TouchEvent.TOUCHEND)for(var i=this._getStoredTouches(e.changedTouches),r=0;r<i.length;r++){var o=i[r],a=o.identifier;delete this._touchMap[a],this._startSingleFingerTouchId==a&&(this._startSingleFingerTouchId=null);for(var s=this._findMatches("touchId",a),l=0;l<s.length;l++){var u=s[l];this.removeTooltipInfo(u.touchId,u.touchObj)}}},t.TouchManager.prototype.saveProcessedTouch=function(e,n,i,r,o,a,s,l){if(null!=e&&!isNaN(e)){var u=t.TouchManager.createSavedTouchInfo(e,n,i,r,o,a,s,l);return this._savedTouchInfo.push(u),!0}return!1},t.TouchManager.prototype.saveProcessedTouchDefault=function(t,e,n,i,r,o){var a=null;o.immediateTouchMoved&&(a=o.immediateTouchMoved);var s=null;o.immediateTouchEnded&&(s=o.immediateTouchEnded),this.saveProcessedTouch(t,e,n,i,r,a,s,o)},t.TouchManager.prototype.processAssociatedTouch=function(e,n,i,r){var o=e.type;o==t.TouchEvent.TOUCHSTART?this.processAssociatedTouchAttempt(e,n,i,r):o==t.TouchEvent.TOUCHMOVE?this.processAssociatedTouchMove(e,n):o==t.TouchEvent.TOUCHEND&&this.processAssociatedTouchEnd(e,n)},t.TouchManager.prototype.processAssociatedTouchDefault=function(t,e){this.processAssociatedTouch(t,e,e.immediateTouchAttempted,e)},t.TouchManager.prototype.cancelTouchHold=function(){for(var e=t.TouchManager.HOVER_TOUCH_KEY,n=this.getTouchIdsForObj(e),i=0;i<n.length;i++){var r=n[i],o=this.getTouchInfo(r),a=o.startTouch;a&&(this._isCancelEvent=!0,this.performAssociatedTouchEnd(a,e,null),this._isCancelEvent=!1,delete this._touchMap[r])}},t.TouchManager.prototype.performAssociatedTouchEnd=function(t,e,n){for(var i=t.identifier,r=this._getSavedTouchInfo(i,e),o=0;o<r.length;o++){var a=r[o],s=a.listenerObj,l=a.endListener;this.removeTooltipInfo(i,e),l&&l.call(s,n,t,a)}},t.TouchManager.prototype.processAssociatedTouchAttempt=function(t,e,n,i){for(var r=t.changedTouches,o=0;o<r.length;o++){var a=r[o];a&&n&&n.call(i,t,a)}},t.TouchManager.prototype.processAssociatedTouchMove=function(e,n){for(var i=this.getTouchIdsForObj(n),r=0;r<i.length;r++){var o=i[r];if(null!=o&&!isNaN(o)){var a=t.TouchManager.getTouchById(o,this._getStoredTouches(e.changedTouches));if(a)for(var s=this._getSavedTouchInfo(a.identifier,n),r=0;r<s.length;r++){var l=s[r],u=l.listenerObj,h=l.moveListener;h&&h.call(u,e,a)}}}},t.TouchManager.prototype.processAssociatedTouchEnd=function(e,n){for(var i=this.getTouchIdsForObj(n),r=0;r<i.length;r++){var o=i[r],a=t.TouchManager.getTouchById(o,this._getStoredTouches(e.changedTouches));a&&this.performAssociatedTouchEnd(a,n,e)}},t.TouchManager.prototype._findMatch=function(t,e){for(var n=-1,i=0;i<this._savedTouchInfo.length;i++){var r=this._savedTouchInfo[i];r[t]==e&&(n=i)}return n},t.TouchManager.prototype._findMatches=function(t,e){for(var n=new Array,i=0;i<this._savedTouchInfo.length;i++){var r=this._savedTouchInfo[i];r[t]==e&&n.push(r)}return n},t.TouchManager.prototype._getSavedTouchInfo=function(t,e){for(var n=this._findMatches("touchId",t),i=[],r=0;r<n.length;r++){var o=n[r];o.touchObj==e&&i.push(o)}return i},t.TouchManager.prototype.containsTouchId=function(t){var e=this._findMatches("touchId",t);return e.length>0},t.TouchManager.prototype.getTouchIdsForObj=function(t){for(var e=new Array,n=this._findMatches("touchObj",t),i=0;i<n.length;i++){var r=n[i],o=r.touchId;e.push(o)}return e},t.TouchManager.prototype.removeTooltipInfo=function(t,e){for(var n=this._findMatches("touchId",t),i=new Array,r=0;r<n.length;r++){var o=n[r];o.touchObj==e&&i.push(o)}for(var r=0;r<i.length;r++){for(var a=i[r],s=-1,l=0;l<this._savedTouchInfo.length;l++){var o=this._savedTouchInfo[l];o==a&&(s=l)}s!=-1&&(this._savedTouchInfo.splice(s,1),0==this._savedTouchInfo.length&&this._context.getTooltipManager().hideTooltip())}},t.TouchManager.prototype.setTooltipEnabled=function(t,e){for(var n=this._savedTouchInfo,i=0;i<n.length;i++){var r=n[i],o=r.touchId;o==t&&(r.allowTooltips=e)}},t.TouchManager.prototype.getTooltipInfo=function(){for(var t=new Object,e=new Array,n=null,i=null,r=!1,o=this._findMatches("allowTooltips",!0),a=0;a<o.length;a++){var s=o[a],l=s.touchId;i?s.grouping!=i&&(r=!0):i=s.grouping;var u,h=this._touchMap[l];h&&(u=h.currentObj),s.tooltipObjOverride&&(u=s.tooltipObjOverride),e.push(l),n=u}return r&&(e=new Array),t.touchIds=e,t.tooltipTarget=n,t},t.TouchManager.prototype.containsGrouping=function(t){var e=this._findMatches("grouping",t);return e.length>0},t.TouchManager.prototype.processTouchStart=function(e){var n=e.changedTouches,i=e.touches;this._touchCount=i.length;for(var r=0;r<n.length;r++){var o=n[r],a=o.screenX,s=o.screenY,l=o.identifier,u=this._getObjFromTouch(o),h={x:a,y:s,prevX:a,prevY:s,pageX:o.pageX,pageY:o.pageY,prevPageX:o.pageX,prevPageY:o.pageY,dx:0,dy:0,fireClick:!0,startTarget:u,currentObj:u,touchMoved:!1,touchtype:null,startTouch:o};h[t.TouchManager.TOUCH_MODE]=t.TouchManager.TOUCH_MODE_DEFAULT,h.origx=a,h.origy=s,this._touchMap[l]=h}return!this._isHovering()&&this._isTouchHoldAllowed()||e.blockTouchHold(),!0},t.TouchManager.prototype._isTouchHoldAllowed=function(){var t=!1,e=0;for(var n in this._touchMap){var i=this.getTouchInfo(n);i.touchMoved&&(t=!0),e++}return!(e>1&&!t)||(this.resetTouchHold(),!1)},t.TouchManager.prototype._isHovering=function(){for(var e in this._touchMap){var n=this.getTouchInfo(e);if(n[t.TouchManager.TOUCH_MODE]==t.TouchManager.TOUCH_MODE_LONG_PRESS)return!0}return!1},t.TouchManager.prototype._getStoredTouches=function(t){for(var e=new Array,n=0;n<t.length;n++){var i=t[n],r=i.identifier,o=this.getTouchInfo(r);o&&e.push(i)}return e},t.TouchManager.prototype.processTouchMove=function(e){for(var n=this._getStoredTouches(e.changedTouches),i=this._getStoredTouches(e.touches),r=0;r<n.length;r++){var o=n[r],a=this._getObjFromTouch(o),s=o.identifier,l=this.getTouchInfo(s);if(l.currentObj=a,l.touchMoved=!0,l[t.TouchManager.TOUCH_MODE]!=t.TouchManager.TOUCH_MODE_LONG_PRESS){var u=Math.abs(l.pageX-o.pageX),h=Math.abs(l.pageY-o.pageY);this._startSingleFingerTouchId==s&&(u>0||h>0)&&this.resetTouchHold(),l.touchMoved=u>3||h>3}l.fireClick&&(l[t.TouchManager.TOUCH_MODE]==t.TouchManager.TOUCH_MODE_LONG_PRESS||l.currentObj!=l.startTarget&&(l.fireClick=!1))}for(var r=0;r<i.length;r++){var o=i[r],c=o.identifier,l=this.getTouchInfo(c),d=o.screenX,p=o.screenY,g=d-l.x,f=p-l.y;l.prevX=l.x,l.prevY=l.y,l.dx=g,l.dy=f,l.x=d,l.y=p,l.prevPageX=l.pageX,l.prevPageY=l.pageY,l.pageX=o.pageX,l.pageY=o.pageY}return!0},t.TouchManager.prototype.processTouchEnd=function(e){var n=e.changedTouches;this._touchCount=e.touches.length;for(var i=0;i<n.length;i++){var r=n[i],o=this._getObjFromTouch(r),a=r.identifier,s=this.getTouchInfo(a);if(s&&s.fireClick)if(s[t.TouchManager.TOUCH_MODE]==t.TouchManager.TOUCH_MODE_LONG_PRESS)this._startSingleFingerTouchId=null;else{var l=o==s.startTarget,u=s.touchMoved,h=l&&!u;s.fireClick=h}}return this._context.clearStageAbsolutePosition(),!0},t.TouchManager.getTouchById=function(t,e){if(null!=t&&!isNaN(t))for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier==t)return i}return null},t.TouchManager.createSavedTouchInfo=function(t,e,n,i,r,o,a,s){var l={touchId:t,tooltipObjOverride:n,grouping:i,type:r,touchObj:e,allowTooltips:!0};return l.moveListener=o,l.endListener=a,l.listenerObj=s,l},t.TouchManager.prototype._handleTouchHoldStartTimer=function(){var t=this._dvtTouchEvent;this._stopTouchHoldTimer(),this.startTouchHold(t)},t.TouchManager.prototype._startTouchHoldTimer=function(t){this._dvtTouchEvent=t,this._touchHoldTimer&&this._touchHoldTimer.start()},t.TouchManager.prototype._stopTouchHoldTimer=function(){this._dvtTouchEvent=null,this._touchHoldTimer&&this._touchHoldTimer.stop()},t.TouchManager.prototype._handleDoubleTapTimer=function(){this.resetDoubleTap()},t.TouchManager.prototype.resetDoubleTap=function(){this._doubleTapAttemptStarted=!1,this._doubleTapAttemptObj=null,this._doubleTapTimer.stop()},t.TouchManager.prototype.getMultiTouchData=function(t){if(2==t.length){var e=this._touchMap[t[0]],n=this._touchMap[t[1]];if(null==e||null==n)return null;if(0==e.dx&&0==n.dy)return null;var i=e.pageX-n.pageX,r=e.pageY-n.pageY,o=Math.sqrt(i*i+r*r),a=e.prevPageX-n.prevPageX,s=e.prevPageY-n.prevPageY,l=Math.sqrt(a*a+s*s),u=o-l,h=(e.pageX+n.pageX)/2,c=(e.pageY+n.pageY)/2,d=(e.prevPageX+n.prevPageX)/2,p=(e.prevPageY+n.prevPageY)/2,g=h-d,f=c-p;return{dz:u,cx:h,cy:c,dcx:g,dcy:f,dist:o}}return null},t.TouchManager.prototype.getMultiTouchDelta=function(t){if(t){var e,n;if(2==t.length){var i=this._touchMap[t[0]],r=this._touchMap[t[1]];if(null==i||null==r)return;if(null==i.touchtype){var o=this._determineTouchDirection(i);if(null!=o){var a=this._determineTouchDirection(r);null!=a&&(n=this._isSameDirection(o,a)?"scroll":"pinch",i.touchtype=n)}}if(n=i.touchtype,null==n)return;if("pinch"==n)return null}for(var s=0,l=0,u=0;u<t.length;u++)e=this._touchMap[t[u]],s+=e.dx,l+=e.dy;s/=t.length,l/=t.length;var h=!0;if(h){var c=1;return{deltaX:s*c,deltaY:l*c}}}return null},t.TouchManager.prototype._isSameDirection=function(t,e){return t==e||(2==t.length&&1==e.length?t.charAt(0)==e||t.charAt(1)==e:1==t.length&&2==e.length&&(t==e.charAt(0)||e==t.charAt(1)))},t.TouchManager.prototype._determineTouchDirection=function(t){var e=t.origx,n=t.origy;if(null==e||null==n)return null;var i=t.x,r=t.y,o=.01,a=i-e,s=r-n,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),u=window.innerWidth*o;if(l<u)return null;var h=.25,c=null;Math.abs(a/s)>=h&&(c=a<0?"l":"r");var d=null;return Math.abs(s/a)>=h&&(d=s<0?"u":"d"),null!=c&&null!=d?d+c:null==c?d:null==d?c:null},t.TouchManager.prototype.calcAveragePosition=function(e){for(var n=0,i=0,r=e.length,o=0;o<r;o++){var a=e[o],s=this.getTouchInfo(a);n+=s.pageX,i+=s.pageY}return n/=r,i/=r,new t.Point(n,i)},t.TouchManager.prototype.getStartTargetsByIds=function(t){for(var e=new Array,n=0;n<t.length;n++){var i=this.getTouchInfo(t[n]);e.push(i.startTarget)}return e},t.TouchManager.prototype.reset=function(){this._touchMap=new Object,this._savedTouchInfo=new Array,this.resetTouchHold(),this.resetDoubleTap()},t.ViewportChangeEvent=function(e,n,i){this.Init(t.ViewportChangeEvent.TYPE),this._oldDim=e,this._newDim=n,this._evt=i},t.ViewportChangeEvent.TYPE="viewportChange",t.Obj.createSubclass(t.ViewportChangeEvent,t.BaseComponentEvent),t.ViewportChangeEvent.prototype.getNativeEvent=function(){return this._evt},t.ViewportChangeEvent.prototype.getOldDimensions=function(){return this._oldDim},t.ViewportChangeEvent.prototype.getNewDimensions=function(){return this._newDim};var v=function(t,e){this.Init(t),this.target=e};v.TOOLTIP_CLOSED_TYPE="actiontooltipclosed",v.TOOLTIP_STARTED_TYPE="actiontooltipstarted",t.Obj.createSubclass(v,t.BaseComponentEvent),v.prototype.Init=function(t){v.superclass.Init.call(this,t)},t.ComponentTouchEvent=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.ComponentTouchEvent.TOUCH_HOLD_START_TYPE="touchholdstart",t.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE="touchholdmove",t.ComponentTouchEvent.TOUCH_HOLD_END_TYPE="touchholdend",t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE="touchhoverstart",t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE="touchhovermove",t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE="touchhoverend",t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE="touchhoverover",t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE="touchhoverout",t.ComponentTouchEvent.TOUCH_CLICK_TYPE="touchclick",t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE="touchdblclick",t.Obj.createSubclass(t.ComponentTouchEvent,t.BaseComponentEvent),t.ComponentTouchEvent.prototype.Init=function(e,n,i,r,o){t.ComponentTouchEvent.superclass.Init.call(this,e),this.target=i,this.touch=n,this.relatedTarget=r,this._isPropagationStopped=!1,this._nativeEvent=o},t.ComponentTouchEvent.prototype.preventDefault=function(){},t.ComponentTouchEvent.prototype.stopPropagation=function(){this._isPropagationStopped=!0},t.ComponentTouchEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},t.ComponentTouchEvent.prototype.getNativeEvent=function(){return this._nativeEvent},t.ResizeEvent=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.ResizeEvent,t.Obj),t.ResizeEvent.RESIZE_EVENT="dvtResizeEvent",t.ResizeEvent.prototype.Init=function(e,n,i,r){this.type=t.ResizeEvent.RESIZE_EVENT,this._ww=e,this._hh=n,this._xx=i,this._yy=r},t.ResizeEvent.prototype.getWidth=function(){return this._ww},t.ResizeEvent.prototype.getHeight=function(){return this._hh},t.ResizeEvent.prototype.getX=function(){return this._xx},t.ResizeEvent.prototype.getY=function(){return this._yy},t.ResizeEvent.prototype.getType=function(){return this.type},t.ScrollEvent=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.ScrollEvent,t.Obj),t.ScrollEvent.SCROLL_EVENT="dvtScrollEvent",t.ScrollEvent.prototype.Init=function(e,n){this.type=t.ScrollEvent.SCROLL_EVENT,this._x=e,this._y=n},t.ScrollEvent.prototype.getX=function(){return this._x},t.ScrollEvent.prototype.getY=function(){return this._y},t.ScrollEvent.prototype.getType=function(){return this.type},t.MarqueeEvent=function(e,n,i,r,o,a){this.Init(t.MarqueeEvent.TYPE),this.subtype=e,this.x=n,this.y=i,this.w=r,this.h=o,this.ctrlKey=a},t.Obj.createSubclass(t.MarqueeEvent,t.BaseComponentEvent),t.MarqueeEvent.TYPE="dvtMarquee",t.MarqueeEvent.SUBTYPE_START="dvtMarqueeStartEvent",t.MarqueeEvent.SUBTYPE_MOVE="dvtMarqueeMoveEvent",t.MarqueeEvent.SUBTYPE_END="dvtMarqueeEndEvent",t.MarqueeEvent.prototype.getSubtype=function(){return this.subtype},t.PanZoomEvent=function(e,n,i,r,o,a,s,l,u){this.Init(t.PanZoomEvent.TYPE),this.subtype=e,this.dxMin=n,this.dxMax=i,this.dyMin=r,this.dyMax=o,this.dxMinTotal=a,this.dxMaxTotal=s,this.dyMinTotal=l,this.dyMaxTotal=u},t.Obj.createSubclass(t.PanZoomEvent,t.BaseComponentEvent),t.PanZoomEvent.TYPE="dvtPanZoom",t.PanZoomEvent.SUBTYPE_PAN_START="dvtPanStartEvent",t.PanZoomEvent.SUBTYPE_PAN_MOVE="dvtPanMoveEvent",t.PanZoomEvent.SUBTYPE_PAN_END="dvtPanEndEvent",t.PanZoomEvent.SUBTYPE_ZOOM="dvtZoomEvent",t.PanZoomEvent.SUBTYPE_PINCH_START="dvtPinchStartEvent",t.PanZoomEvent.SUBTYPE_PINCH_MOVE="dvtPinchMoveEvent",t.PanZoomEvent.SUBTYPE_PINCH_END="dvtPinchEndEvent",t.PanZoomEvent.prototype.getSubtype=function(){return this.subtype},t.SimpleScrollbarEvent=function(e,n,i){this.Init(t.SimpleScrollbarEvent.TYPE),this._subtype=e,this._newMin=n,this._newMax=i},t.Obj.createSubclass(t.SimpleScrollbarEvent,t.BaseComponentEvent),t.SimpleScrollbarEvent.TYPE="dvtSimpleScrollbar",t.SimpleScrollbarEvent.SUBTYPE_MOVE="dvtMoveEvent",t.SimpleScrollbarEvent.SUBTYPE_END="dvtEndEvent",t.SimpleScrollbarEvent.prototype.getSubtype=function(){return this._subtype},t.SimpleScrollbarEvent.prototype.getNewMin=function(){return this._newMin},t.SimpleScrollbarEvent.prototype.getNewMax=function(){return this._newMax},t.DomEventFactory=new Object,t.Obj.createSubclass(t.DomEventFactory,t.Obj),t.DomEventFactory.newEvent=function(e,n){var i=e.type;return i==t.TouchEvent.TOUCHSTART||i==t.TouchEvent.TOUCHMOVE||i==t.TouchEvent.TOUCHEND||i==t.TouchEvent.TOUCHCANCEL?new t.TouchEvent(e):i==t.KeyboardEvent.KEYDOWN||i==t.KeyboardEvent.KEYUP||i==t.KeyboardEvent.KEYPRESS?new t.KeyboardEvent(e):(n._nativeEvent!=e&&(n._nativeEvent=e,i==m.FOCUS||i==m.FOCUSIN||i==m.FOCUSOUT||i==m.BLUR?n._logicalEvent=new m(e):n._logicalEvent=new t.MouseEvent(e)),n._logicalEvent)},t.DomEventFactory.generateMouseEventFromKeyboardEvent=function(e,n,i,r,o,a){var s=null;if(document.createEvent){s=document.createEvent("MouseEvents");var l=n.stageToPageCoords(o,a);s.initMouseEvent(i,!0,!0,window,1,l.x,l.y,l.x,l.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null)}if(s){var u=t.DomEventFactory.newEvent(s,n);return u.target=e.target,u}return null},t.PanEvent=function(e,n,i,r,o,a){this.Init(t.PanEvent.TYPE),this.type=this.getType(),this._subtype=e,this._newX=n,this._newY=i,this._oldX=r,this._oldY=o,this._animator=a},t.Obj.createSubclass(t.PanEvent,t.BaseComponentEvent),t.PanEvent.TYPE="dvtPan",t.PanEvent.SUBTYPE_DRAG_PAN_BEGIN="dragPanBegin",t.PanEvent.SUBTYPE_DRAG_PAN_END="dragPanEnd",t.PanEvent.SUBTYPE_PANNED="panned",t.PanEvent.SUBTYPE_PANNING="panning",t.PanEvent.SUBTYPE_ELASTIC_ANIM_BEGIN="elasticAnimBegin",t.PanEvent.SUBTYPE_ELASTIC_ANIM_END="elasticAnimEnd",t.PanEvent.prototype.getSubType=function(){return this._subtype},t.PanEvent.prototype.getNewX=function(){return this._newX},t.PanEvent.prototype.getNewY=function(){return this._newY},t.PanEvent.prototype.getOldX=function(){return this._oldX},t.PanEvent.prototype.getOldY=function(){return this._oldY},t.PanEvent.prototype.getAnimator=function(){return this._animator},t.ZoomEvent=function(e,n,i,r,o,a,s,l){this.Init(t.ZoomEvent.TYPE),this.type=this.getType(),this._subtype=e,this._newZoom=n,this._oldZoom=i,this._animator=r,this._zoomToFitBounds=o,this._centerPoint=a,this._tx=s,this._ty=l},t.Obj.createSubclass(t.ZoomEvent,t.BaseComponentEvent),t.ZoomEvent.TYPE="dvtZoom",t.ZoomEvent.SUBTYPE_ZOOMED="zoomed",t.ZoomEvent.SUBTYPE_ZOOMING="zooming",t.ZoomEvent.SUBTYPE_ZOOM_END="zoomEnd",t.ZoomEvent.SUBTYPE_DRAG_ZOOM_BEGIN="dragZoomBegin",t.ZoomEvent.SUBTYPE_DRAG_ZOOM_END="dragZoomEnd",t.ZoomEvent.SUBTYPE_ZOOM_AND_CENTER="zoomAndCenter",t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS="zoomToFitCalcBounds",t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_BEGIN="zoomToFitBegin",t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_END="zoomToFitEnd",t.ZoomEvent.SUBTYPE_ELASTIC_ANIM_BEGIN="elasticAnimBegin",t.ZoomEvent.SUBTYPE_ELASTIC_ANIM_END="elasticAnimEnd",t.ZoomEvent.SUBTYPE_ADJUST_PAN_CONSTRAINTS="adjustPanConstraints",t.ZoomEvent.prototype.getSubType=function(){return this._subtype},t.ZoomEvent.prototype.getNewZoom=function(){return this._newZoom},t.ZoomEvent.prototype.getOldZoom=function(){return this._oldZoom},t.ZoomEvent.prototype.getAnimator=function(){return this._animator},t.ZoomEvent.prototype.setZoomToFitBounds=function(t){this._zoomToFitBounds=t},t.ZoomEvent.prototype.getZoomToFitBounds=function(){return this._zoomToFitBounds},t.ZoomEvent.prototype.getCenterPoint=function(){return this._centerPoint},t.ZoomEvent.prototype.getTx=function(){return this._tx},t.ZoomEvent.prototype.getTy=function(){return this._ty};var y={};t.Obj.createSubclass(y,t.Obj),y.lineLinear=function(t){return t.join("L")},y.lineCardinalClosed=function(t,e){return t.length<3?y.lineLinear(t):t[0]+y.lineHermite((t.push(t[0]),t),y.lineCardinalTangents([t[t.length-2]].concat(t,[t[1]]),e))},y.lineCardinal=function(t,e){return t.length<3?y.lineLinear(t):t[0]+y.lineHermite(t,y.lineCardinalTangents(t,e))},y.lineHermite=function(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return y.lineLinear(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(i+="Q"+Math.round(o[0]-2*a[0]/3)+","+Math.round(o[1]-2*a[1]/3)+","+Math.round(o[0])+","+Math.round(o[1]),r=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,i+="C"+Math.round(r[0]+a[0])+","+Math.round(r[1]+a[1])+","+Math.round(o[0]-s[0])+","+Math.round(o[1]-s[1])+","+Math.round(o[0])+","+Math.round(o[1]);for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],i+="S"+Math.round(o[0]-s[0])+","+Math.round(o[1]-s[1])+","+Math.round(o[0])+","+Math.round(o[1])}if(n){var h=t[l];i+="Q"+Math.round(o[0]+2*s[0]/3)+","+Math.round(o[1]+2*s[1]/3)+","+Math.round(h[0])+","+Math.round(h[1])}return i},y.lineCardinalTangents=function(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i},y.lineSlope=function(t,e){return(e[1]-t[1])/(e[0]-t[0])},y.lineFiniteDifferences=function(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=y.lineSlope(r,o);++e<n;)i[e]=(a+(a=y.lineSlope(r=o,o=t[e+1])))/2;return i[e]=a,i},y.lineMonotoneTangents=function(t,e){e&&(t=y._rotatePoints(t));for(var n,i,r,o,a=[],s=y.lineFiniteDifferences(t),l=-1,u=t.length-1;++l<u;)n=y.lineSlope(t[l],t[l+1]),Math.abs(n)<1e-6?s[l]=s[l+1]=0:(i=s[l]/n,r=s[l+1]/n,o=i*i+r*r,o>9&&(o=3*n/Math.sqrt(o),s[l]=o*i,s[l+1]=o*r));for(l=-1;++l<=u;)o=(t[Math.min(u,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+s[l]*s[l])),a.push([o||0,s[l]*o||0]);return e&&(a=y._rotatePoints(a)),a},y.lineMonotone=function(t,e){return t.length<3?y.lineLinear(t):t[0]+y.lineHermite(t,y.lineMonotoneTangents(t,e))},y._rotatePoints=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n][1],t[n][0]]);return e},t.DisplayableUtils=function(){},t.Obj.createSubclass(t.DisplayableUtils,t.Obj),t.DisplayableUtils.getDimensionsForced=function(t,e){var n,i=e.getParent();i&&(n=i.getChildIndex(e));var r=t.getStage();r.addChild(e);var o=e.getDimensions();return r.removeChild(e),i&&i.addChildAt(e,n),o},t.DisplayableUtils.getDimForced=function(e,n){if(n._dim||!e)return n._dim;var i=t.DisplayableUtils.getDimensionsForced(e,n);return t.DisplayableUtils._setDimForced(n,i),i},t.DisplayableUtils._setDimForced=function(t,e){t._dim=e},t.DisplayableUtils.isAncestor=function(e,n){for(var i=n;i;){if(i==e)return!0;i instanceof t.Container&&(i=i.getParent())}return!1},t.PathUtils={},t.Obj.createSubclass(t.PathUtils,t.Obj),t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL="mv",t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL="mh",t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED="cc",t.PathUtils.SPLINE_TYPE_CARDINAL="c",t.PathUtils._MIN_CORNER_RADIUS=2.5,t.PathUtils.moveTo=function(e,n){return"M"+t.ToolkitUtils.roundDecimal(e)+","+t.ToolkitUtils.roundDecimal(n)},t.PathUtils.lineTo=function(e,n){return"L"+t.ToolkitUtils.roundDecimal(e)+","+t.ToolkitUtils.roundDecimal(n)},t.PathUtils.quadTo=function(e,n,i,r){return"Q"+t.ToolkitUtils.roundDecimal(e)+","+t.ToolkitUtils.roundDecimal(n)+","+t.ToolkitUtils.roundDecimal(i)+","+t.ToolkitUtils.roundDecimal(r)},t.PathUtils.horizontalLineTo=function(e){return"H"+t.ToolkitUtils.roundDecimal(e)},t.PathUtils.verticalLineTo=function(e){return"V"+t.ToolkitUtils.roundDecimal(e)},t.PathUtils.cubicTo=function(e,n,i,r,o,a){return"C"+t.ToolkitUtils.roundDecimal(e)+","+t.ToolkitUtils.roundDecimal(n)+","+t.ToolkitUtils.roundDecimal(i)+","+t.ToolkitUtils.roundDecimal(r)+","+t.ToolkitUtils.roundDecimal(o)+","+t.ToolkitUtils.roundDecimal(a)},t.PathUtils.arcTo=function(e,n,i,r,o,a){var s="A"+t.ToolkitUtils.roundDecimal(e)+","+t.ToolkitUtils.roundDecimal(n)+",0,";return s+=i>Math.PI?"1,":"0,",s+=r+","+t.ToolkitUtils.roundDecimal(o)+","+t.ToolkitUtils.roundDecimal(a)},t.PathUtils.closePath=function(){return"Z"},t.PathUtils.roundedRectangle=function(e,n,i,r,o,a,s,l){return t.PathUtils._roundedRectangle(e,n,i,r,o,o,a,a,s,s,l,l)},t.PathUtils.rectangleWithBorderRadius=function(e,n,i,r,o,a,s){var l=s,u=s,h=s,c=s,d=s,p=s,g=s,f=s;if(o)if(o.indexOf("/")!=-1){var _=o.split("/"),m=t.StringUtils.trim(_[0]).split(/\s+/),v=t.StringUtils.trim(_[1]).split(/\s+/);1==m.length?l=h=d=g=m[0]:2==m.length?(l=d=m[0],h=g=m[1]):3==m.length?(l=m[0],h=g=m[1],d=m[2]):4==m.length&&(l=m[0],h=m[1],d=m[2],g=m[3]),1==v.length?u=c=p=f=v[0]:2==v.length?(u=p=v[0],c=f=v[1]):3==v.length?(u=v[0],c=f=v[1],p=v[2]):4==v.length&&(u=v[0],c=v[1],p=v[2],f=v[3])}else if("auto"!=o){var y=t.StringUtils.trim(o).split(/\s+/);1==y.length?l=h=d=g=u=c=p=f=y[0]:2==y.length?(l=d=u=p=y[0],h=g=c=f=y[1]):3==y.length?(l=u=y[0],h=g=c=f=y[1],d=p=y[2]):4==y.length&&(l=u=y[0],h=c=y[1],d=p=y[2],g=f=y[3])}return o&&"0"!=o?t.PathUtils._roundedRectangle(e,n,i,r,t.PathUtils._parseBorderRadiusItem(l,a),t.PathUtils._parseBorderRadiusItem(u,a),t.PathUtils._parseBorderRadiusItem(h,a),t.PathUtils._parseBorderRadiusItem(c,a),t.PathUtils._parseBorderRadiusItem(d,a),t.PathUtils._parseBorderRadiusItem(p,a),t.PathUtils._parseBorderRadiusItem(g,a),t.PathUtils._parseBorderRadiusItem(f,a)):t.PathUtils._rectangle(e,n,i,r)},t.PathUtils._parseBorderRadiusItem=function(e,n){var i=Math.min(parseFloat(e),n/2);return e.indexOf("%")!=-1&&(i=.01*Math.min(50,parseFloat(e))*n),i<t.PathUtils._MIN_CORNER_RADIUS?0:i},t.PathUtils._roundedRectangle=function(e,n,i,r,o,a,s,l,u,h,c,d){a=Math.min(a,.5*r),l=Math.min(l,.5*r),h=Math.min(h,.5*r),d=Math.min(d,.5*r),o=Math.min(o,.5*i),s=Math.min(s,.5*i),u=Math.min(u,.5*i),c=Math.min(c,.5*i);var p=t.PathUtils.moveTo(e+o,n)+t.PathUtils.lineTo(e+i-s,n)+t.PathUtils.arcTo(s,l,Math.PI/2,1,e+i,n+l)+t.PathUtils.lineTo(e+i,n+r-h)+t.PathUtils.arcTo(u,h,Math.PI/2,1,e+i-u,n+r)+t.PathUtils.lineTo(e+c,n+r)+t.PathUtils.arcTo(c,d,Math.PI/2,1,e,n+r-d)+t.PathUtils.lineTo(e,n+a)+t.PathUtils.arcTo(o,a,Math.PI/2,1,e+o,n)+t.PathUtils.closePath();return p},t.PathUtils.polyline=function(e,n){if(e.length<2)return"";for(var i=n?t.PathUtils.lineTo(e[0],e[1]):t.PathUtils.moveTo(e[0],e[1]),r=2;r<e.length;r+=2)i+=t.PathUtils.lineTo(e[r],e[r+1]);return i},t.PathUtils.curveThroughPoints=function(e,n,i){if(0==e.length)return"";for(var r=[],o=0;o<e.length;o+=2)r.push([e[o],e[o+1]]);var a=n?"L":"M";return i==t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL?a+y.lineMonotone(r,!1):i==t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL?a+y.lineMonotone(r,!0):i==t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED?a+y.lineCardinalClosed(r,.7):a+y.lineCardinal(r,.7)},t.PathUtils.createPathArray=function(t){if(!t)return null;var e,n=t.replace(/([mlqhvzca])/gi,",$1,"),i=n.split(/[ ,]/g),r=i.length;for(e=0;e<r;e++){var o=i[e];o?isNaN(o)||(i[e]=parseFloat(o)):(i.splice(e,1),e--,r--)}return i},t.PathUtils.getDimensions=function(e){if(!e||!e.length)return new t.Rectangle;var n,i,r,o,a,s,l,u,h,c,d,p,g,f=e.length,_=!0,m=Number.MAX_VALUE,v=Number.MIN_VALUE,y=Number.MAX_VALUE,S=Number.MIN_VALUE,C=[];for(d=0;d<f;d++){o=!1;var b=0;switch(p=0,n=e[d]){case"m":o=!0;case"M":do a=e[d+1],s=e[d+2],_?_=!1:o&&(a+=i,s+=r),i=a,r=s,C[p++]=a,C[p++]=s,b++,d+=2;while(!isNaN(e[d+1]));break;case"c":o=!0;case"C":do a=e[d+1],s=e[d+2],l=e[d+3],u=e[d+4],h=e[d+5],c=e[d+6],o&&(a+=i,s+=r,l+=i,u+=r,h+=i,c+=r),i=h,r=c,C[p++]=h,C[p++]=c,b++,d+=6;while(!isNaN(e[d+1]));break;case"q":o=!0;case"Q":do a=e[d+1],s=e[d+2],l=e[d+3],u=e[d+4],o&&(a+=i,s+=r,l+=i,u+=r),i=l,r=u,C[p++]=l,C[p++]=u,b++,d+=4;while(!isNaN(e[d+1]));break;case"l":o=!0;case"L":do a=e[d+1],s=e[d+2],o&&(a+=i,s+=r),i=a,r=s,C[p++]=a,C[p++]=s,b++,d+=2;while(!isNaN(e[d+1]));break;case"h":o=!0;case"H":do a=e[d+1],o&&(a+=i),i=a,C[p++]=a,C[p++]=r,b++,d+=1;while(!isNaN(e[d+1]));break;case"v":o=!0;case"V":do s=e[d+1],o&&(s+=r),r=s,C[p++]=i,C[p++]=s,b++,d+=1;while(!isNaN(e[d+1]));break;case"z":case"Z":}for(p=0,g=0;g<b;g++)a=C[p++],s=C[p++],m=Math.min(m,a),v=Math.max(v,a),y=Math.min(y,s),S=Math.max(S,s)}return new t.Rectangle(m,y,Math.abs(v-m),Math.abs(S-y))},t.PathUtils.getPathString=function(t){for(var e,n="",i=t.length,r=0;r<i;r++)e=t[r],void 0!==e&&null!==e&&(n+=(r>0?" ":"")+t[r]);return n},t.PathUtils.transformPath=function(e,n,i,r,o){var a="";if(e){for(var s=e.match(/[a-z][^a-z]*/gi),l=0;l<s.length;l++){var u=s[l],h=u.charAt(0),c=h===h.toUpperCase();a+=h+" ";var d=u.substring(1);if(d=d.replace(/,/g," "),d=d.replace(/^\s+|\s+$/g,""),d.length>0){var p=d.split(/\s+/g);if("A"===h.toUpperCase())for(var g=0;g<p.length;g+=7)a+=t.ToolkitUtils.roundDecimal(parseFloat(p[g])*r)+" ",a+=t.ToolkitUtils.roundDecimal(parseFloat(p[g+1])*o)+" ",a+=t.ToolkitUtils.roundDecimal(p[g+2])+" ",a+=t.ToolkitUtils.roundDecimal(p[g+3])+" ",a+=t.ToolkitUtils.roundDecimal(p[g+4])+" ",a+=t.ToolkitUtils.roundDecimal(parseFloat(p[g+5])*r+(c?n:0))+" ",a+=t.ToolkitUtils.roundDecimal(parseFloat(p[g+6])*o+(c?i:0))+" ";else{var f=[],_=[];"H"===h.toUpperCase()?(f.push(r),_.push(c?n:0)):"V"===h.toUpperCase()?(f.push(o),_.push(c?i:0)):(f.push(r),f.push(o),_.push(c?n:0),_.push(c?i:0));for(var g=0;g<p.length;g++){var m=f[g%f.length],v=_[g%_.length];a+=t.ToolkitUtils.roundDecimal(parseFloat(p[g])*m+v)+" "}}}}return a}},t.PathUtils._fitsInScale=function(t,e,n){return Math.abs(t)>n||Math.abs(e)>n},t.PathUtils.simplifyPath=function(e,n){for(var i,r,o="",a="",s=0,l=0,u=0,h=0,c=0,d=0;d<e.length;d++)if(isNaN(e[d]))i=e[d],"Z"!=i&&"z"!=i||(r=i,a+=i,c>0&&(o+=a,u=0,h=0),a="",c=0,s=0,l=0);else switch(i){case"M":u=0,h=0;case"m":u+=e[d],h+=e[d+1],a=a+i+u+" "+h,r=i,d++;break;case"l":s+=e[d],l+=e[d+1],t.PathUtils._fitsInScale(s,l,n)&&(r!=i?(r=i,a+=i):a+=" ",a=a+s+" "+l,s=0,l=0,c++),d++;break;case"h":case"v":"h"==i?s+=e[d]:l+=e[d],t.PathUtils._fitsInScale(s,l,n)&&(0!=s&&0!=l?("l"!=r?(r="l",a+="l"):a+=" ",a=a+s+" "+l):(r=i,a=a+i+("h"==i?s:l)),s=0,l=0,c++)}return o},t.PathUtils._rectangle=function(e,n,i,r){var o=t.PathUtils.moveTo(e,n)+t.PathUtils.horizontalLineTo(e+i)+t.PathUtils.verticalLineTo(n+r)+t.PathUtils.horizontalLineTo(e)+t.PathUtils.closePath();return o},t.MarkerGradient=function(){},t.Obj.createSubclass(t.MarkerGradient,t.Obj),t.MarkerGradient.createMarkerGradient=function(e,n,i){var r=[],o=[],a=[i,i,i,i],s=null,l=n.getType(),u=t.DisplayableUtils.getDimForced(n.getCtx(),n),h=u.getCenter(),c=Math.min(u.w,u.h);if(l!=t.SimpleMarker.HUMAN){o=[0,.5,.75,1];var d=t.ColorUtils.getBrighter(e,.2),p=t.ColorUtils.getBrighter(e,.1),g=t.ColorUtils.getDarker(e,.2),f=c/2,_=h.x,m=h.y,r=[t.ColorUtils.getPound(d),t.ColorUtils.getPound(p),e,t.ColorUtils.getPound(g)],v=new t.Rectangle((-f),(-f),2*f,2*f),y=[v.x,v.y,v.w,v.h];s=new t.RadialGradientFill(r,a,o,_,m,f,y)}else{o=[0,.3,.7,1];var d=t.ColorUtils.getBrighter(e,.2),p=t.ColorUtils.getDarker(e,.1),g=t.ColorUtils.getDarker(e,.2),r=[t.ColorUtils.getPound(d),t.ColorUtils.getPound(p),e,t.ColorUtils.getPound(g)],v=new t.Rectangle(-c/2,-c/2,c,c),y=[v.x,v.y,v.w,v.h];s=new t.LinearGradientFill(135,r,a,o,y)}return s},t.PolygonUtils={},t.Obj.createSubclass(t.PolygonUtils,t.Obj),t.PolygonUtils.getDimensions=function(e){if(!e||0===e.length)return new t.Rectangle;for(var n,i,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.length,u=0;u<l;u++)n=e[u++],i=e[u],r=Math.min(r,n),o=Math.max(o,n),a=Math.min(a,i),s=Math.max(s,i);return new t.Rectangle(r,a,Math.abs(o-r),Math.abs(s-a))},t.PolygonUtils.getRegularPolygonPoints=function(t,e,n,i,r,o){
for(var a,s=[],l=0;l<n;l++)a=r+l/n*2*Math.PI*(0==o?-1:1),s.push(t+i*Math.sin(a),e-i*Math.cos(a));return s},t.PolygonUtils.scale=function(t,e,n){for(var i=[],r=0;r<t.length-1;r+=2)i.push(t[r]*e),i.push(t[r+1]*n);return i},t.PolygonUtils.translate=function(t,e,n){for(var i=[],r=0;r<t.length-1;r+=2)i.push(t[r]+e),i.push(t[r+1]+n);return i},t.TextUtils={},t.Obj.createSubclass(t.TextUtils,t.Obj),t.TextUtils._cachedTextDimensions={},t.TextUtils.EMPTY_TEXT_BUFFER=2,t.TextUtils.getMaxTextDimensions=function(e){for(var n=0,i=0,r=0;r<e.length;r++)if(null!=e[r]){var o=e[r].getDimensions();n=Math.max(n,o.w),i=Math.max(i,o.h)}return new t.Dimension(n,i)},t.TextUtils.getTextStringDimensions=function(e,n,i){var r=t.OutputText.getCachedDimensions(n,i);if(null!=r)return r;var o=new t.OutputText(e,n);return o.setCSSStyle(i),o.getDimensions()},t.TextUtils.getTextWidth=function(t){return t.getDimensions().w},t.TextUtils.getTextStringWidth=function(e,n,i){return t.TextUtils.getTextStringDimensions(e,n,i).w},t.TextUtils.getTextHeight=function(e){return t.TextUtils.guessTextDimensions(e).h},t.TextUtils.getTextStringHeight=function(e,n){return t.TextUtils._getRepresentativeDimensions(e,n).h},t.TextUtils.guessTextDimensions=function(e,n){var i=e.getTextString(),r=t.TextUtils._getRepresentativeDimensions(e.getCtx(),e.getCSSStyle()),o=r.w*t.TextUtils._getTextLength(i);n=isNaN(n)||null==n?1:n;var a=Math.min(.3*o,r.w*(.3*n+2));return e instanceof t.MultilineText||e instanceof t.BackgroundMultilineText?{w:o,h:r.h*e.getLineCount(),wMin:a}:{w:o,h:r.h,wMin:a}},t.TextUtils.fitText=function(e,n,i,r,o){o=isNaN(o)||null==o?1:o;var a=e.getTextString(),s=t.TextUtils._guessFit(e,n,i,r,o);if(1==s)return r.addChild(e),!0;if(0==s){var l=e.getParent();return l&&l.removeChild(e),!1}return r.addChild(e),e instanceof t.MultilineText||e instanceof t.BackgroundMultilineText?e.__fitText(n,i,o):(e instanceof t.OutputText||e instanceof t.BackgroundOutputText?t.TextUtils._truncateOutputText(e,n,o):e.setMaxWidth(n,o),""==e.getTextString()?(r.removeChild(e),e.setTextString(a),!1):(e.getTextString()!=a&&e.setUntruncatedTextString(a),!0))},t.TextUtils.renderEmptyText=function(e,n,i,r,o){var a=new t.OutputText(e.getCtx(),n,i.x+i.w/2,i.y+i.h/2);o&&a.setCSSStyle(o),a.alignCenter(),a.alignMiddle();var s=i.w-2*t.TextUtils.EMPTY_TEXT_BUFFER;return t.TextUtils.fitText(a,s,1/0,e,0)&&(a.isTruncated()&&r.associate(a,new t.SimpleObjPeer(a.getUntruncatedTextString())),a.setAriaProperty("hidden",null)),a},t.TextUtils.centerTextVertically=function(e,n){if(t.Agent.isPlatformIE())e.setY(n),e.alignMiddle();else{var i=0;e instanceof t.OutputText?i=t.TextUtils.getTextHeight(e):e instanceof t.MultilineText&&(i=e.getDimensions().h),e.setY(n-i/2)}},t.TextUtils._guessFit=function(e,n,i,r,o){if(e instanceof t.MultilineText)return null;var a=t.TextUtils.guessTextDimensions(e,o);return!(a.h>i||a.wMin>n&&t.TextUtils._getTextLength(e.getTextString())>3)&&(a.w<n||null)},t.TextUtils._truncateOutputText=function(e,n,i){var r=e.measureDimensions();if(!(r.w<=n)){var o=e.getTextString(),a=o.length,s=r.w/t.TextUtils._getTextLength(o),l=Math.max(Math.floor(n/s)-2,i),u=o.substring(0,l)+t.OutputText.ELLIPSIS;e.setTextString(u),r=e.measureDimensions();for(var h=u,c=r;r.w<n&&!(l>=o.length);){var d=n-r.w,p=Math.min(a-l,Math.max(Math.floor(d/s),1));if(l+=p,u=o.substring(0,l)+t.OutputText.ELLIPSIS,e.setTextString(u),r=e.measureDimensions(),1==p&&r.w>n){e.setTextString(h),r=c;break}h=u,c=r}for(;r.w>n;){if(l<=i){e.setTextString("");break}l-=1,u=o.substring(0,l)+t.OutputText.ELLIPSIS,e.setTextString(u),r=e.measureDimensions()}}},t.TextUtils._getTextLength=function(t){return t=t.replace(/[\u200A\u200B\u200C\u200D\u200E\u200F\uFEFF]/g,""),t.length},t.TextUtils._getRepresentativeDimensions=function(e,n){var i=null!=n?n.hashCodeForTextMeasurement():"",r=t.TextUtils._cachedTextDimensions[i];if(null==r){var o=new t.OutputText(e,t.OutputText.REPRESENTATIVE_TEXT);o.alignAuto(),o.setCSSStyle(n);var a=o.measureDimensions();r={x:a.x,y:a.y,w:.5*a.w,h:a.h},t.TextUtils._cachedTextDimensions[i]=r}return r},t.TextUtils.getBaselineTranslation=function(e){var n=e.getVertAlignment();if(n!=t.OutputText.V_ALIGN_AUTO){var i=t.TextUtils._getRepresentativeDimensions(e.getCtx(),e.getCSSStyle());if(n==t.OutputText.V_ALIGN_TOP)return-i.y;if(n==t.OutputText.V_ALIGN_MIDDLE)return-i.y-i.h/2;if(n==t.OutputText.V_ALIGN_BOTTOM)return-i.y-i.h}return 0},t.SvgShapeUtils=function(){},t.Obj.createSubclass(t.SvgShapeUtils,t.Obj),t.SvgShapeUtils._uniqueSeed=0,t.SvgShapeUtils.addClipPath=function(e,n){var i=e.getId();if(!i)return!1;var r=n.getDefs();if(!r)return!1;for(var o=r.childNodes,a=o.length,s=0;s<a;s++){var l=o[s];if(l.id===i)return!0}var u=t.SvgShapeUtils.createElement("clipPath",i);n.appendDefs(u);for(var h=e.getRegions(),s=0;s<h.length;s++){var c=h[s];if(c){var d=null;c.type===t.ClipPath.RECT?(d=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(d,"x",c.x),t.ToolkitUtils.setAttrNullNS(d,"y",c.y),t.ToolkitUtils.setAttrNullNS(d,"width",c.w),t.ToolkitUtils.setAttrNullNS(d,"height",c.h),c.rx&&t.ToolkitUtils.setAttrNullNS(d,"rx",c.rx),c.ry&&t.ToolkitUtils.setAttrNullNS(d,"ry",c.ry)):c.type===t.ClipPath.PATH?(d=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(d,"d",c.d)):c.type===t.ClipPath.POLYGON?(d=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(d,"points",c.points)):c.type===t.ClipPath.ELLIPSE?(d=t.SvgShapeUtils.createElement("ellipse"),t.ToolkitUtils.setAttrNullNS(d,"cx",c.cx),t.ToolkitUtils.setAttrNullNS(d,"cy",c.cy),t.ToolkitUtils.setAttrNullNS(d,"rx",c.rx),t.ToolkitUtils.setAttrNullNS(d,"ry",c.ry)):c.type===t.ClipPath.CIRCLE&&(d=t.SvgShapeUtils.createElement("circle"),t.ToolkitUtils.setAttrNullNS(d,"cx",c.cx),t.ToolkitUtils.setAttrNullNS(d,"cy",c.cy),t.ToolkitUtils.setAttrNullNS(d,"r",c.r)),d&&t.ToolkitUtils.appendChildElem(u,d)}}return!0},t.SvgShapeUtils.addMask=function(e,n){var i=e.getId();if(!i)return!1;var r=n.getDefs();if(!r)return!1;for(var o=r.childNodes,a=o.length,s=0;s<a;s++){var l=o[s];if(l.id===i)return!0}var u=t.SvgShapeUtils.createElement("mask",i);n.appendDefs(u);var h=e.getGradient();t.SvgShapeUtils.addSpecialFill(h,n);var c=e.getBounds(),d=t.SvgShapeUtils.createElement("rect");return t.ToolkitUtils.setAttrNullNS(d,"x",c.x),t.ToolkitUtils.setAttrNullNS(d,"y",c.y),t.ToolkitUtils.setAttrNullNS(d,"width",c.w),t.ToolkitUtils.setAttrNullNS(d,"height",c.h),t.ToolkitUtils.setAttrNullNS(d,"fill",t.ToolkitUtils.getUrlById(h.getId())),t.ToolkitUtils.appendChildElem(u,d),!0},t.SvgShapeUtils.addSpecialFill=function(e,n){var i;if(e.isLocked()?i=e.getId():(i=e.getId(),i||(i=e instanceof t.PatternFill?t.SvgShapeUtils.getUniqueId("pat"):t.SvgShapeUtils.getUniqueId("Gr"),e.setId(i))),!e._defPresent){var r=e._defElem;r||(e instanceof t.GradientFill?r=Y.createElem(e,i):e instanceof t.ImageFill?r=K.createElem(e,i):e instanceof t.PatternFill&&(r=W.createElem(e,i))),e._defElem=r,n.appendDefs(r),e._defPresent=!0}},t.SvgShapeUtils.addSpecialStroke=function(e,n){var i;if(e.isLocked()?i=e.getId():(i=e.getId(),i||(i=t.SvgShapeUtils.getUniqueId("Gr"),e.setId(i))),!e._defPresent){var r=e._defElem;r||(r=Y.createElem(e,i)),e._defElem=r,n.appendDefs(r),e._defPresent=!0}},t.SvgShapeUtils.createElement=function(e,n){var i=document.createElementNS(t.ToolkitUtils.SVG_NS,e);return n&&t.ToolkitUtils.setAttrNullNS(i,"id",n),i},t.SvgShapeUtils.getUniqueId=function(e){return(e?e:"$")+t.SvgShapeUtils._uniqueSeed++},t.SvgShapeUtils.convertPointsArray=function(e){for(var n=e.length,i="",r=0;r<n;r++)r>0&&(i+=" "),i+=t.ToolkitUtils.roundDecimal(e[r]);return i},t.Displayable=function(){},t.Obj.createSubclass(t.Displayable,t.Obj),t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER=["clip-path"],t.Displayable._CREATE_EVENT_TYPE_MAP={click:t.MouseEvent.CLICK,mouseover:t.MouseEvent.MOUSEOVER,mouseout:t.MouseEvent.MOUSEOUT,mousemove:t.MouseEvent.MOUSEMOVE,keydown:t.KeyboardEvent.KEYDOWN,keyup:t.KeyboardEvent.KEYUP,keypress:t.KeyboardEvent.KEYPRESS},t.Displayable.SET_ID_ON_DOM=!1,t.Displayable.prototype.Init=function(e,n,i){this._context=e,this._elem=t.SvgShapeUtils.createElement(n),this._elem._obj=this,this.setId(i),this._bVisible=!0,this._pixelHinting=!1,this._cursor=null,this._bMouseEnabled=!0,this._alpha=1,this._matrix=null,this._ariaProperties={},this._properties={}},t.Displayable.prototype.getCtx=function(){return this._context},t.Displayable.prototype.getImpl=function(){return this},t.Displayable.prototype.getObj=function(){return this},t.Displayable.prototype.getElem=function(){return this._elem},t.Displayable.prototype.getOuterElem=function(){return this._outerElem?this._outerElem:this.getElem()},t.Displayable.prototype.getId=function(){return this._id},t.Displayable.prototype.setId=function(e,n){this._id!==e&&(e&&0===e.length&&(e=null),this._id=e,(t.Displayable.SET_ID_ON_DOM||n)&&(e?t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"id",e):t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"id")))},t.Displayable.prototype.getParent=function(){return this._parent},t.Displayable.prototype.setParent=function(t){this._parent=t},t.Displayable.prototype.isDescendantOf=function(t){return!(!t||!this.getParent())&&(this.getParent()==t||this.getParent().isDescendantOf(t))},t.Displayable.prototype.getPixelHinting=function(){return this._pixelHinting},t.Displayable.prototype.setPixelHinting=function(e){this._pixelHinting=e,e?t.ToolkitUtils.setAttrNullNS(this._elem,"shape-rendering","crispEdges"):t.ToolkitUtils.removeAttrNullNS(this._elem,"shape-rendering")},t.Displayable.prototype.getVisible=function(){return this._bVisible},t.Displayable.prototype.setVisible=function(e){if(this._bVisible!==e){this._bVisible=e;var n=this.getElem();e?t.ToolkitUtils.removeAttrNullNS(n,"visibility"):t.ToolkitUtils.setAttrNullNS(n,"visibility","hidden")}},t.Displayable.prototype.setClipPath=function(e){if(e){if(this.ClipPathId==e.getId())return;this.ClipPathId&&this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=e.getId(),this._context.increaseGlobalDefReference(this.ClipPathId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var n=e.getId();if(n){var i=this.getCtx();t.SvgShapeUtils.addClipPath(e,i)&&t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"clip-path",t.ToolkitUtils.getUrlById(n))}}else if(!e&&this.ClipPathId)return this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=null,void t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"clip-path")},t.Displayable.prototype.setMask=function(e){if(e){if(this.MaskId==e.getId())return;this.MaskId&&this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=e.getId(),this._context.increaseGlobalDefReference(this.MaskId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var n=e.getId();if(n){var i=this.getCtx();t.SvgShapeUtils.addMask(e,i)&&t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"mask",t.ToolkitUtils.getUrlById(n))}}else if(!e&&this.MaskId)return this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=null,void t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"mask")},t.Displayable.prototype.ConvertCoordSpaceRect=function(e,n){if(!n||n===this)return e;var i=this.localToStage(new t.Point(e.x,e.y)),r=this.localToStage(new t.Point(e.x+e.w,e.y+e.h)),o=n.stageToLocal(i),a=n.stageToLocal(r);return new t.Rectangle(Math.min(o.x,a.x),Math.min(o.y,a.y),Math.abs(a.x-o.x),Math.abs(a.y-o.y))},t.Displayable.prototype.GetSvgDimensions=function(){try{var e=this.getElem().getBBox()}catch(n){return t.Agent.isEnvironmentTest()&&print("Error in dvt.Displayable.prototype.GetSvgDimensions: "+n),null}return new t.Rectangle(e.x,e.y,e.width,e.height)},t.Displayable.prototype.getDimensions=function(t){var e=this.GetSvgDimensions();return this.ConvertCoordSpaceRect(e,t)},t.Displayable.prototype.getDimensionsWithStroke=function(t){var e=this.GetDimensionsWithStroke();return this.ConvertCoordSpaceRect(e,t)},t.Displayable.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},t.Displayable.prototype.GetElemDimensionsWithStroke=function(){return this.GetSvgDimensions()},t.Displayable.HasAttributes=function(e,n){if(n)for(var i=n.length,r=0;r<i;r++)if(t.ToolkitUtils.getAttrNullNS(e,n[r]))return!0;return!1},t.Displayable.TransferAttributes=function(e,n,i){if(i)for(var r,o,a=i.length,s=0;s<a;s++)r=i[s],o=t.ToolkitUtils.getAttrNullNS(e,r),o&&(t.ToolkitUtils.removeAttrNullNS(e,r),t.ToolkitUtils.setAttrNullNS(n,r,o),t.Agent.isPlatformIE()&&t.ToolkitUtils.setAttrNullNS(e,r,null))},t.Displayable.prototype._createOuterGroupElem=function(){if(!this._outerElem){var e=this._id?this._id+"_outer":null;this._outerElem=t.SvgShapeUtils.createElement("g",e);var n=this.getParent();if(n){var i=n.getElem();i.replaceChild(this._outerElem,this.getElem())}t.ToolkitUtils.appendChildElem(this._outerElem,this.getElem()),t.Displayable.TransferAttributes(this.getElem(),this._outerElem,t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)}},t.Displayable.prototype.getCSSStyle=function(){return this._cssStyle},t.Displayable.prototype.setCSSStyle=function(t){this._cssStyle=t},t.Displayable.prototype.setCursor=function(e){this._cursor=e,t.Agent.isEnvironmentBatik()||(e?t.ToolkitUtils.setAttrNullNS(this.getElem(),"cursor",e):t.ToolkitUtils.removeAttrNullNS(this.getElem(),"cursor"))},t.Displayable.prototype.getCursor=function(){return this._cursor},t.Displayable.prototype.setMouseEnabled=function(e){this._bMouseEnabled=e;var n=e?"visiblePainted":"none";t.ToolkitUtils.setAttrNullNS(this.getElem(),"pointer-events",n)},t.Displayable.prototype.isMouseEnabled=function(){return this._bMouseEnabled},t.Displayable.prototype.getAlpha=function(){return this._alpha},t.Displayable.prototype.setAlpha=function(e){e<1e-5&&(e=0),e!==this._alpha&&(this._alpha=e,t.ToolkitUtils.setAttrNullNS(this.getElem(),"opacity",this._alpha,1))},t.Displayable.prototype.applyAriaProperties=function(){if(t.Agent.deferAriaCreation()){this._ariaRole&&this._setAriaRole(this._ariaRole);for(var e in this._ariaProperties)this._setAriaProperty(e,this._ariaProperties[e])}},t.Displayable.prototype.setAriaRole=function(e){t.Agent.deferAriaCreation()||this._setAriaRole(e),this._ariaRole=e},t.Displayable.prototype._setAriaRole=function(e){var n=this.GetAriaElem();e?t.ToolkitUtils.setAttrNullNS(n,"role",e):t.ToolkitUtils.removeAttrNullNS(n,"role")},t.Displayable.prototype.getAriaRole=function(){return this._ariaRole},t.Displayable.prototype.GetAriaElem=function(){return this.getElem()},t.Displayable.prototype.setAriaProperty=function(e,n){e&&(t.Agent.deferAriaCreation()||this._setAriaProperty(e,n),this._ariaProperties[e]=n)},t.Displayable.prototype._setAriaProperty=function(e,n){var i=this.GetAriaElem();null!=n&&""!==n?("label"==e&&(n=t.StringUtils.processAriaLabel(n)),t.ToolkitUtils.setAttrNullNS(i,"aria-"+e,n)):t.ToolkitUtils.removeAttrNullNS(i,"aria-"+e)},t.Displayable.prototype.getAriaProperty=function(t){return t?this._ariaProperties[t]:null},t.Displayable.prototype.stageToLocal=function(t){for(var e,n=this.getPathToStage(),i=t,r=n.length-1;r>=0;r--)e=n[r].getMatrix().clone(),e.invert(),i=e.transformPoint(i);return i},t.Displayable.prototype.localToStage=function(t){for(var e,n=this.getPathToStage(),i=t,r=0;r<n.length;r++)e=n[r].getMatrix(),i=e.transformPoint(i);return i},t.Displayable.prototype.getPathToStage=function(){for(var t=this,e=[];t;)e.push(t),t=t.getParent();return e},t.Displayable.prototype.destroy=function(){this.removeAllDrawEffects(),this.ClipPathId&&this.setClipPath(null)},t.Displayable.prototype.createCopy=function(){var e=new t.Container(this.getCtx(),"clonedContainer"),n=this.getElem().cloneNode(!0);return t.ToolkitUtils.appendChildElem(e.getElem(),n),this._disableEvents(n),e},t.Displayable.prototype._disableEvents=function(e){for(var n=e.firstChild;null!=n;)n.setAttributeNS&&(t.ToolkitUtils.setAttrNullNS(n,"pointer-events","none"),t.ToolkitUtils.setAttrNullNS(n,"id",null)),this._disableEvents(n),n=n.nextSibling},t.Displayable.prototype.dispatchNativeEvent=function(t){},t.Displayable.prototype.GetProperty=function(t){return this._properties[t]},t.Displayable.prototype.SetProperty=function(t,e){return e!==this._properties[t]&&(this._properties[t]=e),this},t.Displayable.prototype.SetSvgProperty=function(e,n,i){return n!==this._properties[e]&&(this._properties[e]=n,t.ToolkitUtils.setAttrNullNS(this._elem,e,n,i),this.SvgPropertyChanged(e)),this},t.Displayable.prototype.SvgPropertyChanged=function(t){},t.Displayable.generateAriaLabel=function(e,n){var i="",r=n&&n.length>0;if(e){var o=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER");i=e,r&&(i+=o)}if(r)for(var a=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_STATE_DELIMITER"),s=0;s<n.length;s++)i+=n[s],s!=n.length-1&&(i+=a);return i},t.Displayable.prototype.getNumDrawEffects=function(){return this._drawEffects?this._drawEffects.length:0},t.Displayable.prototype.addDrawEffect=function(t){this._drawEffects||(this._drawEffects=[]),t.__lock(),this._drawEffects.push(t),this._applyDrawEffects(this._drawEffects)},t.Displayable.prototype.addDrawEffectAt=function(t,e){this._drawEffects||(this._drawEffects=[]),t.__lock(),e>=this._drawEffects.length?this._drawEffects.push(t):this._drawEffects.splice(e,0,t),this._applyDrawEffects(this._drawEffects)},t.Displayable.prototype.removeDrawEffect=function(t){var e=this.getDrawEffectIndex(t);e>-1&&(this._drawEffects.splice(e,1),this._applyDrawEffects(this._drawEffects))},t.Displayable.prototype.removeDrawEffectAt=function(t){if(this._drawEffects){var e=this._drawEffects.length;t>=0&&t<e&&(this._drawEffects.splice(t,1),this._applyDrawEffects(this._drawEffects))}},t.Displayable.prototype.removeAllDrawEffects=function(){this._drawEffects&&(this._drawEffects=null,this._applyDrawEffects(this._drawEffects))},t.Displayable.prototype.getDrawEffectIndex=function(t){if(this._drawEffects)for(var e=this._drawEffects.length,n=0;n<e;n++)if(t===this._drawEffects[n])return n;return-1},t.Displayable.prototype._applyDrawEffects=function(){var e=this._drawEffects;if(this._filter&&(t.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"filter"),this.getCtx().removeDefs(this._filter),this._filter=null),!this._outerElem&&this._matrix&&this._createOuterGroupElem(),e&&e.length>0&&(this._filter=V.createFilter(e,this),this._filter)){this.getCtx().appendDefs(this._filter);var n=t.ToolkitUtils.getAttrNullNS(this._filter,"id");t.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"filter",t.ToolkitUtils.getUrlById(n))}},t.Displayable.prototype.addEvtListener=function(t,e,n,i){var r=this._getListeners(t,n,!0);r.push(e),r.push(i),this._addListener(t,n)},t.Displayable.prototype.removeEvtListener=function(t,e,n,i){var r=this._getListeners(t,n,!1);if(r)for(var o=0;o<r.length;o+=2)if(r[o]===e&&r[o+1]===i){r.splice(o,2);break}r&&r.length<=0&&this._removeListener(t,n)},t.Displayable.prototype.dispatchDisplayableEvent=function(e,n){var i,r=t.Displayable._CREATE_EVENT_TYPE_MAP[e];if(t.MouseEvent.CLICK==r||t.MouseEvent.MOUSEOVER==r||t.MouseEvent.MOUSEOUT==r||t.MouseEvent.MOUSEMOVE==r){if(document.createEvent){i=this.getCtx();var o=this.getDimensions(),a=this.localToStage(new t.Point(o.x,o.y)),s=i.getStageAbsolutePosition(),l=new t.Point(s.x+a.x,s.y+a.y),u=document.createEvent("MouseEvents");u.initMouseEvent(r,!0,!0,window,1,l.x,l.y,l.x,l.y,!1,!1,!1,!1,0,null),this.getElem().dispatchEvent(u)}}else if((t.KeyboardEvent.KEYDOWN==r||t.KeyboardEvent.KEYUP==r||t.KeyboardEvent.KEYPRESS==r)&&document.createEvent){var h,c=document.createEvent("KeyboardEvent");n instanceof t.KeyboardEvent?(h=n.keyCode,this._ctrlKeyPressed=n.ctrlKey,this._shiftKeyPressed=n.shiftKey):(h=parseInt(n),void 0===this._ctrlKeyPressed&&(this._ctrlKeyPressed=!1),void 0===this._shiftKeyPressed&&(this._shiftKeyPressed=!1),h==t.KeyboardEvent.CONTROL?this._ctrlKeyPressed&&r==t.KeyboardEvent.KEYUP?this._ctrlKeyPressed=!1:this._ctrlKeyPressed||r!=t.KeyboardEvent.KEYDOWN||(this._ctrlKeyPressed=!0):h==t.KeyboardEvent.SHIFT&&(this._shiftKeyPressed&&r==t.KeyboardEvent.KEYUP?this._shiftKeyPressed=!1:this._shiftKeyPressed||r!=t.KeyboardEvent.KEYDOWN||(this._shiftKeyPressed=!0))),"undefined"!=typeof c.initKeyboardEvent?c.initKeyboardEvent(r,!0,!0,window,this._ctrlKeyPressed,!1,this._shiftKeyPressed,!1,h,h):c.initKeyEvent(r,!0,!0,window,this._ctrlKeyPressed,!1,!1,this._shiftKeyPressed,h,h);var d=t.DomEventFactory.newEvent(c);d.keyCode=h,d.ctrlKey=this._ctrlKeyPressed,d.shiftKey=this._shiftKeyPressed,i=this.getCtx();var p=i.getStage(),g=p.getSVGRoot().parentNode;t.HtmlKeyboardListenerUtils._bubbleListener.call(g,d)}},t.Displayable.prototype.AddElemListener=function(e,n,i){t.ToolkitUtils.addDomEventListener(this.getElem(),e,n,i),e==t.TouchEvent.TOUCHEND&&t.ToolkitUtils.addDomEventListener(this.getElem(),t.TouchEvent.TOUCHCANCEL,n,i)},t.Displayable.prototype.FireListener=function(t,e){var n=t.getType?t.getType():t.type,i=this._getListeners(n,e,!1);if(i)for(var r=0;r<i.length;r+=2){var o=i[r+1];i[r]&&i[r].call(o,t)}},t.Displayable.prototype.fireKeyboardListener=function(t,e){this.FireListener(t,e)},t.Displayable.prototype._getListeners=function(t,e,n){if(!this._listenerObj){if(!n)return null;this._listenerObj={}}var i=t+"_"+!!e,r=this._listenerObj[i];return!r&&n&&(r=[],this._listenerObj[i]=r),r},t.Displayable.prototype._addListener=function(e,n){var i=this._getListener(n);if(e==t.KeyboardEvent.KEYUP||e==t.KeyboardEvent.KEYDOWN||e==t.KeyboardEvent.KEYPRESS||e==m.FOCUS||e==m.FOCUSIN||e==m.FOCUSOUT||e==m.BLUR){var r=this.getCtx(),o=r.getStage(),a=o.getSVGRoot().parentNode;if(!a)return;a._obj||(a._obj=[]),t.ArrayUtils.getIndex(a._obj,this)==-1&&a._obj.push(this),i=t.HtmlKeyboardListenerUtils.getListener(n),t.ToolkitUtils.addDomEventListener(a,e,i,n)}else this.AddElemListener(e,i,n)},t.Displayable.prototype._removeListener=function(e,n){var i=this._getListener(n);if(e==t.KeyboardEvent.KEYUP||e==t.KeyboardEvent.KEYDOWN||e==t.KeyboardEvent.KEYPRESS||e==m.FOCUS||e==m.FOCUSIN||e==m.FOCUSOUT||e==m.BLUR){var r=this.getCtx().getStage().getSVGRoot().parentNode;t.ToolkitUtils.removeDomEventListener(r,e,i,n);var o=t.ArrayUtils.getIndex(r._obj,this);o!==-1&&r._obj.splice(o,1)}else t.ToolkitUtils.removeDomEventListener(this.getElem(),e,i,n)},t.Displayable.prototype._getListener=function(t){var e=this;return t?(this._captureClosure||(this._captureClosure=function(t){e._captureListener(t)}),this._captureClosure):(this._bubbleClosure||(this._bubbleClosure=function(t){e._bubbleListener(t)}),this._bubbleClosure)},t.Displayable.prototype._bubbleListener=function(e){if(t.Agent.isPlatformIE())if(e.type==t.MouseEvent.MOUSEOVER){if(this._bubbleHoverItem){if(this._bubbleHoverItem==e.target)return;var n=t.DomEventFactory.newEvent(e,this.getCtx());n.modifyEventForIE(t.MouseEvent.MOUSEOUT,this._bubbleHoverItem),this.FireListener(n,!1)}this._bubbleHoverItem=e.target}else e.type==t.MouseEvent.MOUSEOUT&&(this._bubbleHoverItem=null);var n=t.DomEventFactory.newEvent(e,this.getCtx());this.FireListener(n,!1)},t.Displayable.prototype._captureListener=function(e){if(t.Agent.isPlatformIE())if(e.type==t.MouseEvent.MOUSEOVER){if(this._captureHoverItem){if(this._captureHoverItem==e.target)return;var n=t.DomEventFactory.newEvent(e,this.getCtx());n.modifyEventForIE(t.MouseEvent.MOUSEOUT,this._captureHoverItem),this.FireListener(n,!0)}this._captureHoverItem=e.target}else e.type==t.MouseEvent.MOUSEOUT&&(this._captureHoverItem=null);var n=t.DomEventFactory.newEvent(e,this.getCtx());this.FireListener(n,!0)},t.Displayable.prototype.getFill=function(){return this.GetProperty("fill")},t.Displayable.prototype.setFill=function(e){if(this._manageDefinitions(this.GetProperty("fill"),e),!e)return t.ToolkitUtils.setAttrNullNS(this._elem,"fill","none"),t.ToolkitUtils.removeAttrNullNS(this._elem,"fill-opacity"),void this.SetProperty("fill",null);if(this.GetProperty("fill")!==e){if(this.SetProperty("fill",e),e instanceof t.GradientFill||e instanceof t.ImageFill||e instanceof t.PatternFill)t.SvgShapeUtils.addSpecialFill(e,this.getCtx()),t.ToolkitUtils.setAttrNullNS(this._elem,"fill",t.ToolkitUtils.getUrlById(e.getId()));else{var n=t.ColorUtils.fixColorForPlatform(e.getColor(),e.getAlpha());n&&n.color&&(t.ToolkitUtils.setAttrNullNS(this._elem,"fill",n.color),null!=n.alpha&&t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity",n.alpha,1))}e.__lock(),this.UpdateSelectionEffect()}},t.Displayable.prototype.getClassName=function(){return this._className},t.Displayable.prototype.setClassName=function(e){return this._className&&!e?t.ToolkitUtils.removeAttrNullNS(this._elem,"class"):e&&t.ToolkitUtils.setAttrNullNS(this._elem,"class",e),this._className=e,this},t.Displayable.prototype.getStyle=function(){return this._style},t.Displayable.prototype.setStyle=function(e){return this._style&&!e?t.ToolkitUtils.removeAttrNullNS(this._elem,"style"):e&&t.ToolkitUtils.setAttrNullNS(this._elem,"style",t.CSSStyle.cssObjectToString(e),""),this._style=e,this},t.Displayable.prototype.setSolidFill=function(e,n){this.setFill(new t.SolidFill(e,n))},t.Displayable.prototype.setInvisibleFill=function(){this.setFill(t.SolidFill.invisibleFill())},t.Displayable.prototype.getStroke=function(){return this._stroke},t.Displayable.prototype.setStroke=function(e){if(this._manageDefinitions(this._stroke,e),this._stroke=e,!e)return t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-width"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linejoin"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linecap"),void t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-miterlimit");if(e instanceof t.GradientStroke){t.SvgShapeUtils.addSpecialStroke(e,this.getCtx()),t.ToolkitUtils.setAttrNullNS(this._elem,"stroke",t.ToolkitUtils.getUrlById(e.getId()));var n=e.getAlpha();null!=n&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-opacity",n)}else{var i=t.ColorUtils.fixColorForPlatform(e.getColor(),e.getAlpha());i&&i.color?(t.ToolkitUtils.setAttrNullNS(this._elem,"stroke",i.color),null!=i.alpha&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-opacity",i.alpha,1)):(t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity"))}t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-width",e.getWidth(),1),e.isFixedWidth()&&t.ToolkitUtils.setAttrNullNS(this._elem,"vector-effect","non-scaling-stroke");var r=e.getType();r!==t.Stroke.SOLID?(e.getDash()&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dasharray",e.getDash()),e.getDashOffset()&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dashoffset",e.getDashOffset())):(t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),t.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset"));var o=e.getLineJoin();o&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linejoin",o),o=e.getLineEnd(),o&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linecap",o),o=e.getMiterLimit(),o&&t.ToolkitUtils.setAttrNullNS(this._elem,"stroke-miterlimit",o),e.__lock()},t.Displayable.prototype.setSolidStroke=function(e,n,i){this.setStroke(new t.SolidStroke(e,n,i))},t.Displayable.prototype._manageDefinitions=function(t,e){t!=e&&(t&&(t._referenceCount--,0==t._referenceCount&&t._defElem&&(this.getCtx().removeDefs(t._defElem),t._defPresent=!1)),e&&(e._referenceCount||(e._referenceCount=0),e._referenceCount++))},t.Displayable.prototype.setTranslate=function(e,n){var i=this.getMatrix().clone(),r=i._decompose();null!=e&&(r[t.Matrix._DECOMP_TX]=e),null!=n&&(r[t.Matrix._DECOMP_TY]=n),i._recompose(r),this.setMatrix(i)},t.Displayable.prototype.getTranslateX=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_TX]:0},t.Displayable.prototype.setTranslateX=function(e){var n=this.getMatrix().clone(),i=n._decompose();i[t.Matrix._DECOMP_TX]=e,n._recompose(i),this.setMatrix(n)},t.Displayable.prototype.getTranslateY=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_TY]:0},t.Displayable.prototype.setTranslateY=function(e){var n=this.getMatrix().clone(),i=n._decompose();i[t.Matrix._DECOMP_TY]=e,n._recompose(i),this.setMatrix(n)},t.Displayable.prototype.setScale=function(e,n){var i=this.getMatrix().clone(),r=i._decompose();e&&(r[t.Matrix._DECOMP_SX]=e),n&&(r[t.Matrix._DECOMP_SY]=n),i._recompose(r),this.setMatrix(i)},t.Displayable.prototype.getScaleX=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_SX]:1},t.Displayable.prototype.setScaleX=function(e){var n=this.getMatrix().clone(),i=n._decompose();i[t.Matrix._DECOMP_SX]=e,n._recompose(i),this.setMatrix(n)},t.Displayable.prototype.getScaleY=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_SY]:1},t.Displayable.prototype.setScaleY=function(e){var n=this.getMatrix().clone(),i=n._decompose();i[t.Matrix._DECOMP_SY]=e,n._recompose(i),this.setMatrix(n)},t.Displayable.prototype.getRotation=function(){var e=this.getMatrix();return e?e._decompose()[t.Matrix._DECOMP_R]:0},t.Displayable.prototype.setRotation=function(e){var n=this.getMatrix().clone(),i=n._decompose();i[t.Matrix._DECOMP_R]=e,n._recompose(i),this.setMatrix(n)},t.Displayable.prototype.getMatrix=function(){return this._matrix?this._matrix:new t.Matrix},t.Displayable.prototype.setMatrix=function(e){if(e&&e.isIdentity()&&(e=null),this._matrix!=e)if(this._matrix=e,this._matrix&&!this._matrix.isLocked()&&this._matrix.__lock(),!this._outerElem&&t.Displayable.HasAttributes(this.getElem(),t.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)&&this._createOuterGroupElem(),this._matrix=e,e){var n="matrix("+t.ToolkitUtils.roundDecimal(e.getA())+","+t.ToolkitUtils.roundDecimal(e.getC())+","+t.ToolkitUtils.roundDecimal(e.getB())+","+t.ToolkitUtils.roundDecimal(e.getD())+","+t.ToolkitUtils.roundDecimal(e.getTx())+","+t.ToolkitUtils.roundDecimal(e.getTy())+")";t.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",n,"matrix(1,0,0,1,0,0)")}else{var i=t.ToolkitUtils.getAttrNullNS(this.getElem(),"transform");i&&(t.ToolkitUtils.removeAttrNullNS(this.getElem(),"transform"),t.Agent.isPlatformIE()&&t.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",null));var r;r&&t.ToolkitUtils.removeAttrNullNS(this.getElem(),"vector-effect")}},t.Container=function(t,e){this.Init(t,"g",e)},t.Obj.createSubclass(t.Container,t.Displayable),t.Container.prototype.Init=function(e,n,i){this._bShapeContainer=this instanceof t.Shape,t.Container.superclass.Init.call(this,e,null!=n?n:"g",i),this._childGroupElem=null},t.Container.AttributesTransferableToGroup=["transform","opacity","visibility","pointer-events","clip-path","cursor"],t.Container.prototype.addChild=function(e){if(e){var n=e.getParent();n&&n.removeChild(e),this._arList||(this._arList=[]),e.setParent(this),this._bShapeContainer&&this.CreateChildGroupElem(!1);var i=this.getContainerElem();t.ToolkitUtils.appendChildElem(i,e.getOuterElem()),this._arList.push(e)}},t.Container.prototype.addChildAt=function(t,e){this.AddChildAt(t,e)},t.Container.prototype.AddChildAt=function(t,e){if(e>=0&&e<=this.getNumChildren()&&t){var n=this._findChild(t);if(n>=0&&n==e)return;var i=t.getParent();i&&i.removeChild(t),t.setParent(this),n>=0&&e==this.getNumChildren()+1&&e--;var r=e;this._bShapeContainer&&(this.CreateChildGroupElem(!1),r++);var o=this.getContainerElem(),a=o.childNodes[r];a||(a=null),o.insertBefore(t.getOuterElem(),a),this._arList||(this._arList=[]),this._arList.splice(e,0,t)}},t.Container.prototype.contains=function(t){return this._findChild(t)>=0},t.Container.prototype._findChild=function(t){var e=-1;if(this._arList)for(var n=this._arList.length,i=0;i<n;i++)if(this._arList[i]===t){e=i;break}return e},t.Container.prototype.getChildAfter=function(t){var e=null,n=this._findChild(t);return n>=0&&++n<this._arList.length&&(e=this._arList[n]),e},t.Container.prototype.getChildBefore=function(t){var e=null,n=this._findChild(t);
return n>0&&(e=this._arList[--n]),e},t.Container.prototype.getChildAt=function(t){var e=null;return this._arList&&this._arList.length>t&&t>=0&&(e=this._arList[t]),e},t.Container.prototype.getChildIndex=function(t){return this._findChild(t)},t.Container.prototype.getNumChildren=function(){return this._arList?this._arList.length:0},t.Container.prototype.removeChild=function(t){var e=this._findChild(t);e!==-1&&this._removeObj(t,e)},t.Container.prototype.removeChildImpl=function(e){var n=e.getOuterElem(),i=e.getParent();if(n&&i){var r=this.getContainerElem();r.removeChild(n)}if(!this._anchorElem&&this._bShapeContainer&&1===this.getNumChildren()){var o=this._childGroupElem,a=o?o.parentNode:null;a&&(t.Displayable.TransferAttributes(o,this._elem,this.GetAttributesTransferableToGroup()),a.replaceChild(this._elem,o),this._childGroupElem=null)}},t.Container.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e&&this._removeObj(e,t),e},t.Container.prototype.removeChildren=function(){if(this._arList)for(var t=this._arList;this.getNumChildren()>0;)this._removeObj(t[0],0)},t.Container.prototype._removeObj=function(t,e){this.removeChildImpl(t),t.setParent(null),this._arList.splice(e,1),0===this._arList.length&&(this._arList=null)},t.Container.prototype.destroy=function(){t.Container.superclass.destroy.call(this);for(var e=this.getNumChildren(),n=0;n<e;n++){var i=this.getChildAt(n);i.destroy()}},t.Container.prototype.getHyperlink=function(){return this._linkObj},t.Container.prototype.GetAttributesTransferableToGroup=function(){return t.Container.AttributesTransferableToGroup},t.Container.prototype.getElem=function(){return this._childGroupElem?this._childGroupElem:this._elem},t.Container.prototype.CreateChildGroupElem=function(e,n){if(this._childGroupElem||!n&&0!==this.getNumChildren())e&&this.removeChildren();else{var i=t.Displayable.SET_ID_ON_DOM&&this._id?this._id+"_g":null;this._childGroupElem=t.SvgShapeUtils.createElement("g",i);var r,o=this.getParent();o&&(r=o.getElem(),r.replaceChild(this._childGroupElem,this._elem)),e||t.ToolkitUtils.appendChildElem(this._childGroupElem,this._elem),t.Displayable.TransferAttributes(this._elem,this._childGroupElem,this.GetAttributesTransferableToGroup()),this._elem._obj&&(this._childGroupElem._obj=this._elem._obj),t.Agent.isEnvironmentTest()&&document.shapeContainerCount++}},t.Container.prototype.getDimensionsWithStroke=function(){for(var t=[],e=this.getNumChildren(),n=0;n<e;n++)t.push(this.getChildAt(n));for(var i=null;t.length>0;){var r=t.shift(),o=r.GetDimensionsWithStroke(this);o&&(i=i?i.getUnion(o):o),e=r.getNumChildren();for(var n=0;n<e;n++)t.push(r.getChildAt(n))}return i},t.Container.prototype.GetDimensionsWithStroke=function(t){return null},t.Container._reparentChildren=function(e,n){var i=n.childNodes;if(i)for(var r,o,a=i.length-1;a>=0;a--)r=i[a],o?e.insertBefore(r,o):t.ToolkitUtils.appendChildElem(e,r),o=r},t.Container.prototype.getContainerElem=function(){return this._anchorElem?this._anchorElem:this.getElem()},t.Container.prototype.dispatchNativeEvent=function(t){var e=t.getNativeEvent(),n=null;n=this._bShapeContainer?this._childGroupElem:this._anchorElem?this._anchorElem:this._elem,n.dispatchEvent&&n.dispatchEvent(e)},t.Container.prototype.UpdateSelectionEffect=function(){},t.Container.prototype.setHollow=function(t,e){for(var n=0;n<this.getNumChildren();n++){var i=this.getChildAt(n),r=i.getFill()?i.getFill().getColor():t;i.setHollow(r,e)}};var S=function(t,e,n){this.Init(t,"g",n),this._SVGRoot=e,this.disableSelection(this._elem),this.setCursor("default")};t.Obj.createSubclass(S,t.Container),S.prototype.addChild=function(t){S.superclass.addChild.call(this,t)},S.prototype.appendDefs=function(e){t.ToolkitUtils.appendChildElem(this._elemDefs,e)},S.prototype.getDefs=function(){return this._elemDefs},S.prototype.getSVGRoot=function(){return this._SVGRoot},S.prototype.disableSelection=function(t){t.onselectstart=function(){return!1},t.onselect=function(){return!1}},t.Shape=function(){},t.Obj.createSubclass(t.Shape,t.Container),t.Shape.prototype.Init=function(e,n,i){t.Shape.superclass.Init.call(this,e,n,i),this._bSelectable=!1,this.IsSelected=!1,this.InnerShape=null,this.HoverInnerStroke=null,this.HoverOuterStroke=null,this.SelectedInnerStroke=null,this.SelectedOuterStroke=null,this.SelectedHoverInnerStroke=null,this.SelectedHoverOuterStroke=null,this.OriginalStroke=null,this._isOriginalStrokeSet=!1,this.IsShowingHoverEffect=!1},t.Shape.prototype.setHollow=function(e,n){if(this._bHollow)this.setFill(this._origFill),this.setStroke(this._origStroke),this._bHollow=!1;else{this._origFill=this.GetProperty("fill"),this._origStroke=this.getStroke();var i,r=t.SolidFill.invisibleFill();i=e?new t.SolidStroke(t.ColorUtils.getRGB(e),t.ColorUtils.getAlpha(e),n):new t.SolidStroke(this.GetProperty("fill").getColor(),this.GetProperty("fill").getAlpha(),n),this.setFill(r),this.setStroke(i),this._bHollow=!0}},t.Shape.prototype.isHollow=function(){return this._bHollow},t.Shape.prototype.destroy=function(){t.Shape.superclass.destroy.call(this),this.setFill(null),this.setStroke(null)},t.Shape.prototype.getDimensionsWithStroke=function(){var e=this.GetElemDimensionsWithStroke(),n=t.Shape.superclass.getDimensionsWithStroke.call(this);return e&&n?e=e.getUnion(n):n&&(e=n),e},t.Shape.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},t.Shape.prototype.GetElemDimensionsWithStroke=function(){var e=this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf():t.Shape.superclass.getDimensions.call(this),n=this.getStroke();if(e&&n){var i=n.getWidth();if(i){var r=.5*i;e.x-=r,e.y-=r,e.w+=i,e.h+=i}}return e},t.Shape.prototype.UpdateSelectionEffect=function(){if(this.isSelected()||this.isHoverEffectShown()){var e;this.InnerShape&&(e=this.InnerShape.getStroke(),this.removeChild(this.InnerShape)),this.InnerShape=this.copyShape(),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setFill(this.getFill()),this.InnerShape.setStyle(this.getStyle()).setClassName(this.getClassName()),e&&this.InnerShape.setStroke(e),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.AddChildAt(this.InnerShape,0)}},t.Shape.prototype.setHoverStroke=function(t,e){return this.HoverInnerStroke=t,this.HoverOuterStroke=e,this},t.Shape.prototype.setSelectedStroke=function(t,e){return this.SelectedInnerStroke=t,this.SelectedOuterStroke=e,this},t.Shape.prototype.setSelectedHoverStroke=function(t,e){return this.SelectedHoverInnerStroke=t,this.SelectedHoverOuterStroke=e,this},t.Shape.prototype.setSelectable=function(e){this._bSelectable=e,this._bSelectable?this.setCursor(t.SelectionEffectUtils.getSelectingCursor()):this.setCursor(null)},t.Shape.prototype.isSelectable=function(){return this._bSelectable},t.Shape.prototype.isSelected=function(){return this.IsSelected},t.Shape.prototype.setSelected=function(t){this.IsSelected!=t&&(this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.IsSelected=t,this.isSelected()?(this.UpdateSelectionEffect(),this.isHoverEffectShown()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke))):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},t.Shape.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.UpdateSelectionEffect(),this.isSelected()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.HoverInnerStroke),this.setStroke(this.HoverOuterStroke)))},t.Shape.prototype.CreateSelectedHoverStrokes=function(){this.SelectedHoverInnerStroke||(this.SelectedHoverInnerStroke=this.HoverInnerStroke.clone()),this.SelectedHoverOuterStroke||(this.SelectedHoverOuterStroke=this.SelectedOuterStroke.clone(),this.SelectedHoverOuterStroke.setWidth(this.SelectedOuterStroke.getWidth()+(this.HoverInnerStroke.getWidth()-this.SelectedInnerStroke.getWidth())))},t.Shape.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke)):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},t.Shape.prototype.isHoverEffectShown=function(){return this.IsShowingHoverEffect},t.Shape.prototype.addChildAt=function(e,n){t.Shape.superclass.addChildAt.call(this,e,n+this._getInnerShapeCount())},t.Shape.prototype.getChildAt=function(e,n){return t.Shape.superclass.getChildAt.call(this,e,n+this._getInnerShapeCount())},t.Shape.prototype.getChildIndex=function(e){return t.Shape.superclass.getChildIndex.call(this,e)-this._getInnerShapeCount()},t.Shape.prototype.removeChildAt=function(e){t.Shape.superclass.removeChildAt.call(this,e+this._getInnerShapeCount())},t.Shape.prototype.getDimensions=function(e){return this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf(e):t.Shape.superclass.getDimensions.call(this,e)},t.Shape.prototype._getInnerShapeCount=function(){return this.isSelected()||this.isHoverEffectShown()?1:0},t.Shape.prototype.SvgPropertyChanged=function(t){this.UpdateSelectionEffect()},t.Shape.prototype.copyShape=function(){return null};var C=function(){};t.Obj.createSubclass(C,t.Shape),C.prototype.Init=function(t,e,n,i,r){C.superclass.Init.call(this,t,e,r),this.setCx(n).setCy(i)},C.prototype.getCx=function(){return this.GetProperty("cx")},C.prototype.setCx=function(t){return this.SetSvgProperty("cx",t,0)},C.prototype.getCy=function(){return this.GetProperty("cy")},C.prototype.setCy=function(t){return this.SetSvgProperty("cy",t,0)};var b=function(){};t.Obj.createSubclass(b,t.Shape),b.prototype.Init=function(t,e,n,i){b.superclass.Init.call(this,t,e,i),n&&this.setPoints(n)},b.prototype.getPoints=function(){return this.GetProperty("arPoints")},b.prototype.setPoints=function(e){return this.SetProperty("arPoints",e),this.SetSvgProperty("points",t.SvgShapeUtils.convertPointsArray(e))},b.prototype.getDimensionsSelf=function(e){var n=t.PolygonUtils.getDimensions(this.getPoints());return this.ConvertCoordSpaceRect(n,e)},t.Arc=function(t,e,n,i,r,o,a,s,l){this.Init(t,e,n,i,r,o,a,s,l)},t.Obj.createSubclass(t.Arc,t.Shape),t.Arc.OPEN="OPEN",t.Arc.CHORD="CHORD",t.Arc.PIE="PIE",t.Arc.prototype.Init=function(e,n,i,r,o,a,s,l,u){t.Arc.superclass.Init.call(this,e,"path",u),this._sa=0,this._ae=0,o=null===o||isNaN(o)?r:o,this._bInInit=!0,this.setCx(n),this.setCy(i),this.setRx(r),this.setRy(o),this.setAngleStart(a),this.setAngleExtent(s),this.setClosure(l?l:t.Arc.OPEN),this._bInInit=!1,this._createArc()},t.Arc.prototype._addClosure=function(e){return this._ct===t.Arc.CHORD?e+=" z":this._ct===t.Arc.PIE?e+=" L "+this._cx+","+this._cy+" z":this._ct===t.Arc.OPEN&&this.setFill(null),e},t.Arc.prototype._createArc=function(){if(!this._bInInit){var e=this._sa*t.Math.RADS_PER_DEGREE,n=this._ae*t.Math.RADS_PER_DEGREE,i=this._cx+this._rx*Math.cos(e),r=this._cy-this._ry*Math.sin(e),o=this._cx+this._rx*Math.cos(e+n),a=this._cy-this._ry*Math.sin(e+n),s=Math.abs(this._ae)>180?"1":"0",l=this._ae>0?"0":"1",u="M "+t.ToolkitUtils.roundDecimal(i)+" "+t.ToolkitUtils.roundDecimal(r)+" A "+t.ToolkitUtils.roundDecimal(this._rx)+","+t.ToolkitUtils.roundDecimal(this._ry)+" 0 "+s+","+l+" "+t.ToolkitUtils.roundDecimal(o)+","+t.ToolkitUtils.roundDecimal(a);u=this._addClosure(u),t.ToolkitUtils.setAttrNullNS(this._elem,"d",u),null!==this._stroke&&this.setStroke(this._stroke)}},t.Arc.prototype.getAngleExtent=function(){return this._ae},t.Arc.prototype.setAngleExtent=function(t){t=null===t||isNaN(t)?0:t,this._ae!==t&&(360===t&&(t=359.99),this._ae=t,this._createArc(),this.UpdateSelectionEffect())},t.Arc.prototype.getAngleStart=function(){return this._sa},t.Arc.prototype.setAngleStart=function(t){t=null===t||isNaN(t)?0:t,this._sa!==t&&(this._sa=t,this._createArc(),this.UpdateSelectionEffect())},t.Arc.prototype.getClosure=function(){return this._ct},t.Arc.prototype.setClosure=function(t){t!==this._ct&&(this._ct=t,this._createArc(),this.UpdateSelectionEffect())},t.Arc.prototype.getCx=function(){return this._cx},t.Arc.prototype.setCx=function(e){e!==this._cx&&(this._cx=e,t.ToolkitUtils.setAttrNullNS(this._elem,"cx",e),this.UpdateSelectionEffect())},t.Arc.prototype.getCy=function(){return this._cy},t.Arc.prototype.setCy=function(e){e!==this._cy&&(this._cy=e,t.ToolkitUtils.setAttrNullNS(this._elem,"cy",e),this.UpdateSelectionEffect())},t.Arc.prototype.getRx=function(){return this._rx},t.Arc.prototype.setRx=function(e){e!==this._rx&&(this._rx=e,t.ToolkitUtils.setAttrNullNS(this._elem,"rx",this._rx),this._createArc(),this.UpdateSelectionEffect())},t.Arc.prototype.getRy=function(){return this._ry},t.Arc.prototype.setRy=function(e){e!==this._ry&&(this._ry=e,t.ToolkitUtils.setAttrNullNS(this._elem,"ry",this._ry),this._createArc(),this.UpdateSelectionEffect())},t.Arc.prototype.setArc=function(t,e){this.setAngleStart(t),this.setAngleExtentStart(e)},t.Arc.prototype.setRadius=function(t,e){this.setRx(t),this.setRy(e)},t.Arc.prototype.copyShape=function(){return new t.Arc(this.getCtx(),this.getCx(),this.getCy(),this.getRx(),this.getRy(),this.getAngleStart(),this.getAngleExtent(),this.getClosure())},t.Arc.prototype.GetAriaElem=function(){return t.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),t.Arc.superclass.GetAriaElem.call(this)},t.Circle=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.Circle,C),t.Circle.prototype.Init=function(e,n,i,r,o){t.Circle.superclass.Init.call(this,e,"circle",n,i,o),this.setRadius(r)},t.Circle.prototype.getRadius=function(){return this.GetProperty("r")},t.Circle.prototype.setRadius=function(t){return this.SetSvgProperty("r",t)},t.Circle.prototype.copyShape=function(){return new t.Circle(this.getCtx(),this.getCx(),this.getCy(),this.getRadius())},t.Circle.prototype.getDimensionsSelf=function(e){var n=new t.Rectangle(this.getCx()-this.getRadius(),this.getCy()-this.getRadius(),2*this.getRadius(),2*this.getRadius());return this.ConvertCoordSpaceRect(n,e)},t.Image=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.Image,t.Shape),t.Image.XLINK_NS="http://www.w3.org/1999/xlink",t.Image.prototype.Init=function(e,n,i,r,o,a,s){t.Image.superclass.Init.call(this,e,"image",s),n=t.ToolkitUtils.getImageUrl(e,n),t.Agent.isPlatformIE()&&(t.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0")),this.setImage(n,i,r,o,a),this.setAriaProperty("hidden","true")},t.Image.prototype.getX=function(){return this.GetProperty("x")},t.Image.prototype.setX=function(t){return this.SetSvgProperty("x",t)},t.Image.prototype.getY=function(){return this.GetProperty("y")},t.Image.prototype.setY=function(t){return this.SetSvgProperty("y",t)},t.Image.prototype.getWidth=function(){return this.GetProperty("width")},t.Image.prototype.setWidth=function(t){return this.SetSvgProperty("width",t)},t.Image.prototype.getHeight=function(){return this.GetProperty("height")},t.Image.prototype.setHeight=function(t){return this.SetSvgProperty("height",t)},t.Image.prototype.getSrc=function(){return this._src},t.Image.prototype.setSrc=function(e){if(e!==this._src){var n=e;if(this._src=e,t.Agent.isEnvironmentBatik()){var i=t.JavaImageLoader.getImageInfo(e);i&&(n=i.uri)}t.ToolkitUtils.setAttrNS(this._elem,t.Image.XLINK_NS,"xlink:href",n)}return this},t.Image.prototype.getPos=function(){return new t.Point(this._x,this._y)},t.Image.prototype.setPos=function(t,e){this.setX(t).setY(e)},t.Image.prototype.setImage=function(e,n,i,r,o){n instanceof t.Image?(this.setSrc(e.src),this.setPos(e.x,e.y),this.setWidth(e.w),this.setHeight(e.h)):(this.setSrc(e),this.setPos(n,i),this.setWidth(r),this.setHeight(o)),t.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio","none")},t.Image.prototype.getDimensions=function(e){if(this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0)return this.getDimensionsSelf(e);var n=this.getElem().getBBox();return n=n.width&&n.height?new t.Rectangle(n.x,n.y,n.width,n.height):new t.Rectangle(n.x,n.y,this.getWidth(),this.getHeight()),this.ConvertCoordSpaceRect(n,e)},t.Image.prototype.__setDimensions=function(t){this.setWidth(t.width),this.setHeight(t.height)},t.Image.prototype.UpdateSelectionEffect=function(){},t.Image.prototype.copyShape=function(){return new t.Image(this.getCtx(),this.getSrc(),this.getX(),this.getY(),this.getWidth(),this.getHeight())},t.Image.prototype.getDimensionsSelf=function(e){var n=new t.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(n,e)},t.Image.prototype.setAriaProperty=function(e,n){t.Image.superclass.setAriaProperty.call(this,e,n),"hidden"!=e&&t.Image.superclass.setAriaProperty.call(this,"hidden",null)},t.Line=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.Line,t.Shape),t.Line.prototype.Init=function(e,n,i,r,o,a){t.Line.superclass.Init.call(this,e,"line",a),this.setX1(n).setY1(i).setX2(r).setY2(o),this._bHollow=!1},t.Line.prototype.getX1=function(){return this.GetProperty("x1")},t.Line.prototype.setX1=function(t){return this.SetSvgProperty("x1",t,0)},t.Line.prototype.getY1=function(){return this.GetProperty("y1")},t.Line.prototype.setY1=function(t){return this.SetSvgProperty("y1",t,0)},t.Line.prototype.getX2=function(){return this.GetProperty("x2")},t.Line.prototype.setX2=function(t){return this.SetSvgProperty("x2",t,0)},t.Line.prototype.getY2=function(){return this.GetProperty("y2")},t.Line.prototype.setY2=function(t){return this.SetSvgProperty("y2",t,0)},t.Line.prototype.setHollow=function(){var e=this._elem.parentNode;if(this._bHollow)this._origElem&&(e.replaceChild(this._origElem,this._elem),t.ToolkitUtils.setAttrNullNS(this._origElem,"opacity",this._alpha),this._elem=this._origElem,this._origElem=null,this._bHollow=!1);else{this._origElem=this._elem;var n,i=this.getX2()-this.getX1(),r=i,o=this.getY1()-i/2,a=this.getStroke();n=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(n,"x",this.getX1()),t.ToolkitUtils.setAttrNullNS(n,"y",o),t.ToolkitUtils.setAttrNullNS(n,"width",this.getX2()-this.getX1()),t.ToolkitUtils.setAttrNullNS(n,"height",r);var s=a.getColor();if(s){var l=a.getAlpha();t.Agent.isBrowserSafari()&&s.indexOf("rgba")!==-1?(t.ToolkitUtils.setAttrNullNS(n,"stroke",t.ColorUtils.getRGB(s)),null!=l?t.ToolkitUtils.setAttrNullNS(n,"stroke-opacity",t.ColorUtils.getAlpha(s)*l):t.ToolkitUtils.setAttrNullNS(n,"stroke-opacity",t.ColorUtils.getAlpha(s))):(t.ToolkitUtils.setAttrNullNS(n,"stroke",s),null!=l&&t.ToolkitUtils.setAttrNullNS(n,"stroke-opacity",l))}t.ToolkitUtils.setAttrNullNS(n,"fill","#ffffff"),t.ToolkitUtils.setAttrNullNS(n,"fill-opacity","0.001"),t.ToolkitUtils.setAttrNullNS(n,"shape-rendering","crispEdges"),n._obj=this,e.replaceChild(n,this._elem),this._elem=n,t.ToolkitUtils.setAttrNullNS(this._elem,"opacity",this._alpha),this._bHollow=!0}},t.Line.prototype.getDimensions=function(e){var n=t.Line.superclass.getDimensions.call(this,e);if(this._childGroupElem&&this._elem){var i=this._childGroupElem.getBBox();if(0==i.x&&0==i.y&&0==i.width&&0==i.height){var r=this._elem.getBBox();n=new t.Rectangle(r.x,r.y,r.width,r.height)}}return n},t.Line.prototype.copyShape=function(){return new t.Line(this.getCtx(),this.getX1(),this.getY1(),this.getX2(),this.getY2())},t.Line.prototype.getDimensionsSelf=function(e){var n=Math.min(this.getX1(),this.getX2()),i=Math.min(this.getY1(),this.getY2()),r=Math.abs(this.getX1()-this.getX2()),o=Math.abs(this.getY1()-this.getY2()),a=new t.Rectangle(n,i,r,o);return this.ConvertCoordSpaceRect(a,e)},t.Line.prototype._adjustDimensionsForStyle=function(){this.getX1()==this.getX2()?this.setX2(this.getX2()+.001):this.getY1()==this.getY2()&&this.setY2(this.getY2()+.001)},t.Line.prototype.setStyle=function(e,n){return e&&!n&&this._adjustDimensionsForStyle(),t.Line.superclass.setStyle.call(this,e)},t.Line.prototype.setClassName=function(e,n){return e&&!n&&this._adjustDimensionsForStyle(),t.Line.superclass.setClassName.call(this,e)},t.SimpleMarker=function(t,e,n,i,r,o,a,s,l,u,h){this.Init(t,e,n,i,r,o,a,s,l,u,h)},t.Obj.createSubclass(t.SimpleMarker,t.Shape),t.SimpleMarker.CIRCLE="circle",t.SimpleMarker.ELLIPSE="ellipse",t.SimpleMarker.SQUARE="square",t.SimpleMarker.RECTANGLE="rectangle",t.SimpleMarker.DIAMOND="diamond",t.SimpleMarker.TRIANGLE_UP="triangleUp",t.SimpleMarker.TRIANGLE_DOWN="triangleDown",t.SimpleMarker.PLUS="plus",t.SimpleMarker.HUMAN="human",t.SimpleMarker.STAR="star",t.SimpleMarker._CIRCLE_ELEM="circle",t.SimpleMarker._ELLIPSE_ELEM="ellipse",t.SimpleMarker._RECT_ELEM="rect",t.SimpleMarker._PATH_ELEM="path",t.SimpleMarker._POLYGON_ELEM="polygon",t.SimpleMarker._SHAPE_ELEM_MAP={},t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.CIRCLE]=t.SimpleMarker._CIRCLE_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.ELLIPSE]=t.SimpleMarker._ELLIPSE_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.SQUARE]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.RECTANGLE]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.DIAMOND]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.TRIANGLE_UP]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.TRIANGLE_DOWN]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.PLUS]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.HUMAN]=t.SimpleMarker._PATH_ELEM,t.SimpleMarker._SHAPE_ELEM_MAP[t.SimpleMarker.STAR]=t.SimpleMarker._POLYGON_ELEM,t.SimpleMarker.DEFAULT_BORDER_RADIUS="6",t.SimpleMarker._HUMAN_CMDS="M 38.07,36.467856 q 13.414,0 13.414,-13.406 l 0,-9.258 q 0,-13.4039999 -13.414,-13.4039999 -13.414,0 -13.414,13.4039999 l 0,9.258 q 0,13.406 13.414,13.406 l 0,0 z m 16.219,7.275 -32.435999,0 q -10.139552,0 -15.9400009,7.443875 Q 0.5,58.133383 0.5,69.156856 l 0,54.396004 12.746001,0 0,-51.609004 q 0,-2.824 0.793,-2.824 0.742,0 0.742,2.709 l 0,124.267994 q 0,2.82401 2.823999,2.82401 l 12.531,0 q 2.824,0 2.824,-2.824 l 0,-66.25 10.219,0 0,66.25 q 0,2.824 2.824,2.824 l 12.528,0 q 2.825,0 2.825,-2.824 l 0,-124.268004 q 0,-2.709 0.839,-2.709 0.792,0 0.792,2.824 l 0,51.609004 12.65,0 0,-54.396004 Q 75.6386,58.132927 70.227626,51.186731 64.428999,43.742856 54.289,43.742856 l 0,0 z",t.SimpleMarker._HUMAN2_CMDS="M 306.40625 386.78125 C 304.19988 386.78125 302.40625 389.07579 302.40625 391.90625 C 302.40625 394.73671 304.19988 397.03125 306.40625 397.03125 C 308.61263 397.03125 310.40625 394.73671 310.40625 391.90625 C 310.40625 389.07579 308.61263 386.78125 306.40625 386.78125 z M 301.78125 396.0625 C 300.43025 397.2945 298.28125 400.28125 298.90625 403.15625 C 302.41725 405.79925 309.20225 406.154 314.03125 403 C 314.21825 399.828 312.68325 397.5635 310.90625 396.0625 C 308.65625 400.7185 304.28125 399.7815 301.78125 396.0625 z ",t.SimpleMarker._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8],t.SimpleMarker.prototype.Init=function(e,n,i,r,o,a,s,l,u,h,c){h&&(r=Math.round(r),o=Math.round(o),a=Math.round(a),s=Math.round(s),s=s%2==1?s+1:s,a=a%2==1?a+1:a),this._bMaintainAspectRatio=!0,u===!1&&(this._bMaintainAspectRatio=!1,n==t.SimpleMarker.CIRCLE&&(n=t.SimpleMarker.ELLIPSE)),l&&"0"!=l&&(this._borderRadius=l),this._skin=i,this._shape=n?n:t.SimpleMarker.RECTANGLE,this._dataColor="#000000";var d=n?t.SimpleMarker._SHAPE_ELEM_MAP[n]:t.SimpleMarker._PATH_ELEM;null==d&&(this._isCustomShape=!0,this._path=new t.Path(e,n),d=t.SimpleMarker._PATH_ELEM),t.SimpleMarker.superclass.Init.call(this,e,d,c),this._shape!=t.SimpleMarker.SQUARE&&this._shape!=t.SimpleMarker.RECTANGLE||(this._path=this._getBorderRadiusPath(e,r,o,a,s,l)),this._shape==t.SimpleMarker.HUMAN&&(this._path=new t.Path(e,t.CSSStyle.afterSkinAlta(this._skin)?t.SimpleMarker._HUMAN2_CMDS:t.SimpleMarker._HUMAN_CMDS)),this._propertyChange={},this.setCenter(r,o,!0).setSize(a,s)},t.SimpleMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},t.SimpleMarker.prototype.getCenterDimensions=function(){return new t.Rectangle(this._cx,this._cy,this._width,this._height)},t.SimpleMarker.prototype.setSize=function(t,e,n){return this.setWidth(t,!0).setHeight(e,n)},t.SimpleMarker.prototype.setCenter=function(t,e,n){return this.setCx(t,!0).setCy(e,n)},t.SimpleMarker.prototype._updateSvgProperties=function(){if(this._propertyChange.width||this._propertyChange.height){var e=Math.min(this._width,this._height);this._propertyChange.s=this._s!=e,this._s=e}if(this._shape!=t.SimpleMarker.RECTANGLE&&this._shape!=t.SimpleMarker.SQUARE||this._borderRadius)this._shape==t.SimpleMarker.CIRCLE||this._shape==t.SimpleMarker.ELLIPSE?(this._propertyChange.cx&&t.ToolkitUtils.setAttrNullNS(this._elem,"cx",this._cx,0),this._propertyChange.cy&&t.ToolkitUtils.setAttrNullNS(this._elem,"cy",this._cy,0),this._shape==t.SimpleMarker.CIRCLE?this._propertyChange.s&&t.ToolkitUtils.setAttrNullNS(this._elem,"r",this._s/2,0):(this._propertyChange.width&&t.ToolkitUtils.setAttrNullNS(this._elem,"rx",this._width/2,0),this._propertyChange.height&&t.ToolkitUtils.setAttrNullNS(this._elem,"ry",this._height/2,0))):this._isPolygon()?(this._propertyChange.s||this._propertyChange.cx||this._propertyChange.cy)&&this._setPolygon(this._getPolygonArray()):this._isPath()&&(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy)&&this._setCmds(this._getCmds());else if(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy){var n=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height);this._setCmds(n)}return this.UpdateSelectionEffect(),this._propertyChange={},this},t.SimpleMarker.prototype.getCx=function(){return this._cx},t.SimpleMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getCy=function(){return this._cy},t.SimpleMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getSize=function(){return this._s},t.SimpleMarker.prototype.getWidth=function(){return this._width},t.SimpleMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype.getHeight=function(){return this._height},t.SimpleMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},t.SimpleMarker.prototype._getPolygonArray=function(){var e=[],n=this._cx,i=this._cy,r=this.getMaintainAspectRatio()?this._s/2:this._width/2,o=this.getMaintainAspectRatio()?this._s/2:this._height/2,a=this.getMaintainAspectRatio()?this._s/6:this._width/6,s=this.getMaintainAspectRatio()?this._s/6:this._height/6;return this._shape==t.SimpleMarker.TRIANGLE_UP?e=[n-r,i+o,n,i-o,n+r,i+o]:this._shape==t.SimpleMarker.TRIANGLE_DOWN?e=[n-r,i-o,n,i+o,n+r,i-o]:this._shape==t.SimpleMarker.DIAMOND?e=[n-r,i,n,i-o,n+r,i,n,i+o]:this._shape==t.SimpleMarker.PLUS?e=[n-r,i-s,n-a,i-s,n-a,i-o,n+a,i-o,n+a,i-s,n+r,i-s,n+r,i+s,n+a,i+s,n+a,i+o,n-a,i+o,n-a,i+s,n-r,i+s]:this._shape==t.SimpleMarker.STAR&&(e=t.SimpleMarker._SHAPE_STAR_CMDS,e=t.PolygonUtils.scale(e,this.getMaintainAspectRatio()?this._s/100:this._width/100,this.getMaintainAspectRatio()?this._s/100:this._height/100),e=t.PolygonUtils.translate(e,n,i)),e},t.SimpleMarker.prototype._setPolygon=function(e){t.ToolkitUtils.setAttrNullNS(this._elem,"points",t.SvgShapeUtils.convertPointsArray(e))},t.SimpleMarker.prototype._getCmds=function(){var e=t.DisplayableUtils.getDimForced(this.getCtx(),this._path),n=Math.max(e.w,e.h),i=this.getMaintainAspectRatio();this._shape==t.SimpleMarker.RECTANGLE&&(i=!1);var r=i?this._s/n:this._width/e.w,o=i?this._s/n:this._height/e.h,a=this._cx-e.x*r-e.w*r/2,s=this._cy-e.y*o-e.h*o/2;return t.PathUtils.transformPath(this._path.getCmds(),a,s,r,o)},t.SimpleMarker.prototype._setCmds=function(e){t.ToolkitUtils.setAttrNullNS(this._elem,"d",e)},t.SimpleMarker.prototype.getType=function(){return this._shape},t.SimpleMarker.prototype._isPolygon=function(){return t.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==t.SimpleMarker._POLYGON_ELEM},t.SimpleMarker.prototype._isPath=function(){return t.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==t.SimpleMarker._PATH_ELEM||this._isCustomShape},t.SimpleMarker.prototype.SetStrokeWidth=function(t){var e=this.getStroke();e&&(e=e.clone(),e.setWidth(t),this.setStroke(e))},t.SimpleMarker.prototype.GetStrokeWidth=function(){var t=this.getStroke();return t?t.getWidth():0},t.SimpleMarker.prototype._getBorderRadiusPath=function(e,n,i,r,o,a){if(this._shape==t.SimpleMarker.SQUARE||this._shape==t.SimpleMarker.RECTANGLE){var s=Math.min(r,o),l=this._shape==t.SimpleMarker.SQUARE?s:r,u=this._shape==t.SimpleMarker.SQUARE?s:o,h=n-l/2,c=i-u/2,d=t.PathUtils.rectangleWithBorderRadius(h,c,l,u,a,s,"0");return new t.Path(e,d)}return null},t.SimpleMarker.prototype._getBorderRadius=function(){return this._borderRadius},t.SimpleMarker.prototype.setDataColor=function(e,n){if(this._dataColor=e,!n){var i=t.SelectionEffectUtils.getHoverBorderColor(e),r="#FFFFFF",o="#5A5A5A";this.setHoverStroke(new t.SolidStroke(r,1,1),new t.SolidStroke(i,1,3.5)),this.setSelectedStroke(new t.SolidStroke(r,1,1.5),new t.SolidStroke(o,1,4.5)),this.setSelectedHoverStroke(new t.SolidStroke(r,1,1.5),new t.SolidStroke(i,1,4.5)),this.HoverInnerStroke.setFixedWidth(!0),this.HoverOuterStroke.setFixedWidth(!0),this.SelectedInnerStroke.setFixedWidth(!0),this.SelectedOuterStroke.setFixedWidth(!0),this.SelectedHoverInnerStroke.setFixedWidth(!0),this.SelectedHoverOuterStroke.setFixedWidth(!0)}},t.SimpleMarker.prototype.getDataColor=function(){return this._dataColor},t.SimpleMarker.prototype.setHollow=function(e){var n=this.GetStrokeWidth();n=n?n:1,t.SimpleMarker.superclass.setHollow.call(this,e,n)},t.SimpleMarker.prototype.setText=function(t){this._markerText=t},t.SimpleMarker.prototype.setAlpha=function(e){t.SimpleMarker.superclass.setAlpha.call(this,e),this._markerText&&this._markerText.setAlpha(e),this.UpdateSelectionEffect()},t.SimpleMarker.prototype.copyShape=function(){return new t.SimpleMarker(this.getCtx(),this._shape,this._skin,this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this.getMaintainAspectRatio())},t.SimpleMarker.prototype.getDimensions=function(t){return this.getDimensionsSelf(t)},t.SimpleMarker.prototype.getDimensionsSelf=function(e){var n=this.getCx()-this.getWidth()/2,i=this.getCy()-this.getHeight()/2,r=new t.Rectangle(n,i,this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(r,e)},t.SimpleMarker.prototype.setMaintainAspectRatio=function(t){this._bMaintainAspectRatio=t},t.SimpleMarker.prototype.getMaintainAspectRatio=function(){return this._bMaintainAspectRatio},t.ImageMarker=function(t,e,n,i,r,o,a,s,l,u,h){this.Init(t,e,n,i,r,o,a,s,l,u,h)},t.Obj.createSubclass(t.ImageMarker,t.Shape),t.ImageMarker.prototype.Init=function(e,n,i,r,o,a,s,l,u,h,c){t.ImageMarker.superclass.Init.call(this,e,"image",c),this._setMarkerImageStates(s,l,u,h);var d=this._getImage();this._setSource(d),this._propertyChange={},this.setCenter(n,i,!0).setSize(r,o),this._updateBorder(a),t.Agent.isPlatformIE()&&(t.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),t.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0"))},t.ImageMarker.prototype.setPreserveAspectRatio=function(e){
t.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio",e,"xMidYMid")},t.ImageMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},t.ImageMarker.prototype.getCenterDimensions=function(){return new t.Rectangle(this._cx,this._cy,this._width,this._height)},t.ImageMarker.prototype.setSize=function(t,e,n){return this.setWidth(t,!0).setHeight(e,n)},t.ImageMarker.prototype.getSize=function(){return Math.max(this.getWidth(),this.getHeight())},t.ImageMarker.prototype.setCenter=function(t,e,n){return this.setCx(t,!0).setCy(e,n)},t.ImageMarker.prototype._updateSvgProperties=function(){return(this._propertyChange.cx||this._propertyChange.width)&&t.ToolkitUtils.setAttrNullNS(this._elem,"x",this._cx-this._width/2,0),(this._propertyChange.cy||this._propertyChange.height)&&t.ToolkitUtils.setAttrNullNS(this._elem,"y",this._cy-this._height/2,0),this._propertyChange.width&&t.ToolkitUtils.setAttrNullNS(this._elem,"width",this._width,0),this._propertyChange.height&&t.ToolkitUtils.setAttrNullNS(this._elem,"height",this._height,0),this._updateBorder(this._borderRadius),this.UpdateSelectionEffect(),this._propertyChange={},this},t.ImageMarker.prototype.getCx=function(){return this._cx},t.ImageMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getCy=function(){return this._cy},t.ImageMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getWidth=function(){return this._width},t.ImageMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype.getHeight=function(){return this._height},t.ImageMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},t.ImageMarker.prototype._setSource=function(e){if(t.Agent.isEnvironmentBatik()){var n=t.JavaImageLoader.getImageInfo(e);n&&(e=n.uri)}t.ToolkitUtils.setAttrNS(this._elem,t.Image.XLINK_NS,"xlink:href",e)},t.ImageMarker.prototype._setMarkerImageStates=function(t,e,n,i){var r=t;this._imageStates=[r],this._imageStates.push(e?e:r),this._imageStates.push(n?n:r),this._imageStates.push(i?i:this._imageStates[1])},t.ImageMarker.prototype._getImage=function(){return this._imageStates[0]},t.ImageMarker.prototype._getImageSelected=function(){return this._imageStates[1]},t.ImageMarker.prototype._getImageHover=function(){return this._imageStates[2]},t.ImageMarker.prototype._getImageHoverSelected=function(){return this._imageStates[3]},t.ImageMarker.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this.isSelected()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageHover())},t.ImageMarker.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.isSelected()?this._setSource(this._getImageSelected()):this._setSource(this._getImage())},t.ImageMarker.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,t?this.isHoverEffectShown()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageSelected()):this._setSource(this._getImage()))},t.ImageMarker.prototype._updateBorder=function(e){if(e||this._borderPath){if(e&&"0"!=e){var n=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height,e,Math.min(this._width,this._height),"0"),i=new t.ClipPath;i.addPath(n),this.setClipPath(i)}if(this._borderPath){var r=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+this._borderWidth/2,this._cy-this._height/2+this._borderWidth/2,this._width-this._borderWidth,this._height-this._borderWidth,e,Math.min(this._width,this._height),"0");this._borderPath.setCmds(r)}}this._borderRadius=e},t.ImageMarker.prototype._getBorderRadius=function(){return this._borderRadius},t.ImageMarker.prototype.setStroke=function(e){if(!e||e.getWidth()<=0)return this._borderWidth=0,void(this._borderPath&&(this.removeChild(this._borderPath),this._borderPath=null));var n=e.getWidth();if(!this._borderPath||n!=this._borderWidth){var i=t.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+n/2,this._cy-this._height/2+n/2,this._width-n,this._height-n,this._borderRadius,Math.min(this._width,this._height),"0");this._borderPath?this._borderPath.setCmds(i):(this._borderPath=new t.Path(this.getCtx(),i),this._borderPath.setInvisibleFill(),this.addChild(this._borderPath))}this._borderWidth=n,this._borderPath.setStroke(e)},t.ImageMarker.prototype.setHollow=function(e,n){t.ImageMarker.superclass.setHollow.call(this,e,n);var i=this.isHollow();i?(this._imageContainer=this._elem.parentElement,this._imageContainer.removeChild(this._elem)):!i&&this._imageContainer&&this._imageContainer.appendChild(this._elem)},t.ImageMarker.prototype.copyShape=function(){return new t.ImageMarker(this.getCtx(),this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this._getImage(),this._getImageSelected(),this._getImageHover(),this._getImageHoverSelected(),null)},t.Oval=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.Oval,C),t.Oval.prototype.Init=function(e,n,i,r,o,a){t.Oval.superclass.Init.call(this,e,"ellipse",n,i,a),this.setRx(r).setRy(o)},t.Oval.prototype.getRx=function(){return this.GetProperty("rx")},t.Oval.prototype.setRx=function(t){return this.SetSvgProperty("rx",t)},t.Oval.prototype.getRy=function(){return this.GetProperty("ry")},t.Oval.prototype.setRy=function(t){return this.SetSvgProperty("ry",t)},t.Oval.prototype.copyShape=function(){return new t.Oval(this.getCtx(),this.getCx(),this.getCy(),this.getRx(),this.getRy())},t.Oval.prototype.getDimensionsSelf=function(e){var n=new t.Rectangle(this.getCx()-this.getRx(),this.getCy()-this.getRy(),2*this.getRx(),2*this.getRy());return this.ConvertCoordSpaceRect(n,e)},t.Path=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.Path,t.Shape),t.Path.prototype.Init=function(e,n,i){t.Path.superclass.Init.call(this,e,"path",i),t.ArrayUtils.isArray(n)?this.setCmds(t.PathUtils.getPathString(n)):this.setCmds(n)},t.Path.prototype.getCmds=function(){return this.GetProperty("d")},t.Path.prototype.setCmds=function(t){return t&&this.SetSvgProperty("d",t),this.SetProperty("arCmds",null),this},t.Path.prototype.getCommands=function(){var e=this.GetProperty("arCmds");return e||(e=this.GetProperty("d")?t.PathUtils.createPathArray(this.GetProperty("d")):null,this.SetProperty("arCmds",e)),e},t.Path.prototype.setCommands=function(e){var n=e?t.PathUtils.getPathString(e):null;return this.setCmds(n),this.SetProperty("arCmds",e),this},t.Path.prototype.copyShape=function(){return new t.Path(this.getCtx(),this.getCmds())},t.Path.prototype.GetAriaElem=function(){return t.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),t.Path.superclass.GetAriaElem.call(this)},t.Polygon=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.Polygon,b),t.Polygon.prototype.Init=function(e,n,i){t.Polygon.superclass.Init.call(this,e,"polygon",n,i)},t.Polygon.prototype.copyShape=function(){return new t.Polygon(this.getCtx(),this.getPoints())},t.Polygon.prototype.GetAriaElem=function(){return t.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),t.Polygon.superclass.GetAriaElem.call(this)},t.Polyline=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.Polyline,b),t.Polyline.prototype.Init=function(e,n,i){t.Polyline.superclass.Init.call(this,e,"polyline",n,i),t.ToolkitUtils.setAttrNullNS(this._elem,"fill","none")},t.Polyline.prototype.copyShape=function(){return new t.Polyline(this.getCtx(),this.getPoints())},t.Rect=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.Rect,t.Shape),t.Rect._cssAttrs=["background-color","border-color","border-width"],t.Rect.prototype.Init=function(e,n,i,r,o,a){t.Rect.superclass.Init.call(this,e,"rect",a),this.setX(n).setY(i).setWidth(r).setHeight(o)},t.Rect.prototype.getX=function(){return this.GetProperty("x")},t.Rect.prototype.setX=function(t){return this.SetSvgProperty("x",t,0)},t.Rect.prototype.getY=function(){return this.GetProperty("y")},t.Rect.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},t.Rect.prototype.getWidth=function(){return this.GetProperty("width")},t.Rect.prototype.setWidth=function(t){return this.SetSvgProperty("width",null!=t?t:0)},t.Rect.prototype.getHeight=function(){return this.GetProperty("height")},t.Rect.prototype.setHeight=function(t){return this.SetSvgProperty("height",null!=t?t:0)},t.Rect.prototype.getRx=function(){return this.GetProperty("rx")},t.Rect.prototype.setRx=function(t){return this.SetSvgProperty("rx",t)},t.Rect.prototype.getRy=function(){return this.GetProperty("ry")},t.Rect.prototype.setRy=function(t){return this.SetSvgProperty("ry",t)},t.Rect.prototype.setCSSStyle=function(e){t.Rect.superclass.setCSSStyle.call(this,e);var n=this._elem;if(e){var i=e.getStyle("background-color");if(i&&t.ToolkitUtils.setAttrNullNS(n,"fill",i),i=e.getStyle("border-color"),i&&t.ToolkitUtils.setAttrNullNS(n,"stroke",i),i=e.getStyle("border-width"),i&&t.ToolkitUtils.setAttrNullNS(n,"stroke-width",i),i=e.getStyle("border-radius")){var r=t.StringUtils.trim(i).split(" ");r.length>0&&r[0]&&this.setRx(r[0]),r.length>1&&r[1]&&this.setRy(r[1])}}else t.ToolkitUtils.removeAttrNullNS(this._elem,"style")},t.Rect.prototype.setPos=function(t,e){this.setX(t).setY(e)},t.Rect.prototype.setCornerRadius=function(t,e){this.setRx(t).setRy(e)},t.Rect.prototype.setRect=function(e,n,i,r){e instanceof t.Rectangle?this.setX(e.x).setY(e.y).setWidth(e.w).setHeight(e.h):this.setX(e).setY(n).setWidth(i).setHeight(r)},t.Rect.prototype.copyShape=function(){var e=new t.Rect(this.getCtx(),this.getX(),this.getY(),this.getWidth(),this.getHeight());return e.setRx(this.getRx()).setRy(this.getRy()),e},t.Rect.prototype.getDimensionsSelf=function(e){var n=new t.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(n,e)},t.OutputText=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.OutputText,t.Shape),t.OutputText.ELLIPSIS="",t.OutputText.REPRESENTATIVE_TEXT="MW",t.OutputText.BIDI_ZERO_WIDTH="",t.OutputText.H_ALIGN_LEFT="left",t.OutputText.H_ALIGN_CENTER="center",t.OutputText.H_ALIGN_RIGHT="right",t.OutputText.V_ALIGN_TOP="top",t.OutputText.V_ALIGN_MIDDLE="middle",t.OutputText.V_ALIGN_BOTTOM="bottom",t.OutputText.V_ALIGN_AUTO="auto",t.OutputText.prototype.Init=function(e,n,i,r,o){t.OutputText.superclass.Init.call(this,e,"text",o),this._x=null!=i?i:0,this._baseline=!1,t.Agent.isRightToLeft(e)&&t.Agent.isPlatformIE()&&t.ToolkitUtils.setAttrNullNS(this.getElem(),"unicode-bidi","embed"),this.alignLeft(),this.alignTop(),this.setTextString(n),this.setX(i),this.setY(r),t.ToolkitUtils.removeAttrNullNS(this.getElem(),"fill"),this.setAriaProperty("hidden","true")},t.OutputText.prototype.getTextString=function(){return this._textString},t.OutputText.prototype.setTextString=function(e){e=null!=e?t.StringUtils.trim(String(e)):"",t.OutputText.needsTextAnchorAdjustment()&&t.Agent.isPlatformIE()&&e.charAt(0)!=t.OutputText.BIDI_ZERO_WIDTH&&(e=t.OutputText.BIDI_ZERO_WIDTH+e),this._textString=e;var n=this.getElem().firstChild;return null!==n?n.nodeValue=e:(n=document.createTextNode(e),t.ToolkitUtils.appendChildElem(this.getElem(),n)),t.Agent.isPlatformIE()&&this.setX(this._x),this},t.OutputText.prototype.isTruncated=function(){return null!=this.getUntruncatedTextString()},t.OutputText.prototype.getUntruncatedTextString=function(){return this._untruncatedTextString},t.OutputText.prototype.setUntruncatedTextString=function(t){t!=this.getTextString()&&(this._untruncatedTextString=t)},t.OutputText.prototype.getX=function(){var e;return e=t.Agent.isPlatformIE()?this._x:this.GetProperty("x"),e?e:0},t.OutputText.prototype.setX=function(e){return this._x=null!=e?e:0,t.Agent.isPlatformIE()?this.SetSvgProperty("x",this._x+this._getIEAlignmentOffset(),0):this.SetSvgProperty("x",e,0)},t.OutputText.prototype._getIEAlignmentOffset=function(){var e=this.getHorizAlignment(),n=t.Agent.isRightToLeft();return e==t.OutputText.H_ALIGN_LEFT?n?this.measureDimensions().w:0:e==t.OutputText.H_ALIGN_CENTER?n?this.measureDimensions().w/2:-this.measureDimensions().w/2:e==t.OutputText.H_ALIGN_RIGHT?n?0:-this.measureDimensions().w:void 0},t.OutputText.prototype.getY=function(){var t=this.GetProperty("y");return t?t:0},t.OutputText.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},t.OutputText.prototype.setFontSize=function(e){var n=this.getCSSStyle();n=n?n.clone():new t.CSSStyle,n.setFontSize(t.CSSStyle.FONT_SIZE,String(e)),this.setCSSStyle(n)},t.OutputText.prototype.getHorizAlignment=function(){return this._horizAlign},t.OutputText.prototype.setHorizAlignment=function(e){e==t.OutputText.H_ALIGN_LEFT?this.alignLeft():e==t.OutputText.H_ALIGN_CENTER?this.alignCenter():e==t.OutputText.H_ALIGN_RIGHT&&this.alignRight()},t.OutputText.prototype.getVertAlignment=function(){return this._vertAlign},t.OutputText.prototype.setVertAlignment=function(e){e==t.OutputText.V_ALIGN_TOP?this.alignTop():e==t.OutputText.V_ALIGN_MIDDLE?this.alignMiddle():e==t.OutputText.V_ALIGN_BOTTOM?this.alignBottom():e==t.OutputText.V_ALIGN_AUTO&&this.alignAuto()},t.OutputText.prototype.alignLeft=function(){if(this._horizAlign!=t.OutputText.H_ALIGN_LEFT)if(this._horizAlign=t.OutputText.H_ALIGN_LEFT,t.Agent.isPlatformIE())this.setX(this._x);else{var e=t.OutputText.needsTextAnchorAdjustment();t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",e?"end":"start","start")}},t.OutputText.prototype.alignCenter=function(){this._horizAlign!=t.OutputText.H_ALIGN_CENTER&&(this._horizAlign=t.OutputText.H_ALIGN_CENTER,t.Agent.isPlatformIE()?this.setX(this._x):t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor","middle","start"))},t.OutputText.prototype.alignRight=function(){if(this._horizAlign!=t.OutputText.H_ALIGN_RIGHT)if(this._horizAlign=t.OutputText.H_ALIGN_RIGHT,t.Agent.isPlatformIE())this.setX(this._x);else{var e=t.OutputText.needsTextAnchorAdjustment();t.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",e?"start":"end","start")}},t.OutputText.prototype.alignTop=function(){this._vertAlign!=t.OutputText.V_ALIGN_TOP&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&t.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_TOP,t.Agent.isPlatformIE()?this._setBaseline(!0):this.SetDominantBaselineAttr("text-before-edge"))},t.OutputText.prototype.alignMiddle=function(){this._vertAlign!=t.OutputText.V_ALIGN_MIDDLE&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&t.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_MIDDLE,t.Agent.isPlatformIE()?this._setBaseline(!0):this.SetDominantBaselineAttr("middle"))},t.OutputText.prototype.alignBottom=function(){this._vertAlign!=t.OutputText.V_ALIGN_BOTTOM&&(this._vertAlign=t.OutputText.V_ALIGN_BOTTOM,t.Agent.isPlatformIE()?this._setBaseline(!0):t.Agent.isBrowserSafari()?(this._setBaseline(!0),this.SetDominantBaselineAttr(null)):this.SetDominantBaselineAttr("text-after-edge"))},t.OutputText.prototype.alignAuto=function(){this._vertAlign!=t.OutputText.V_ALIGN_AUTO&&(this._vertAlign==t.OutputText.V_ALIGN_BOTTOM&&t.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=t.OutputText.V_ALIGN_AUTO,t.Agent.isPlatformIE()?this._setBaseline(!1):this.SetDominantBaselineAttr(null))},t.OutputText.prototype._setBaseline=function(t){this._baseline=t,this.setMatrix(this.getMatrix())},t.OutputText.prototype.SetDominantBaselineAttr=function(e){e?t.ToolkitUtils.setAttrNullNS(this.getElem(),"dominant-baseline",e):t.ToolkitUtils.removeAttrNullNS(this.getElem(),"dominant-baseline")},t.OutputText.prototype.setCSSStyle=function(e){t.OutputText.superclass.setCSSStyle.call(this,e);var n=this.getOuterElem();if(e){var i=e.getStyle("color"),r=t.ColorUtils.fixColorForPlatform(i);r&&r.color&&(t.ToolkitUtils.setAttrNullNS(n,"fill",r.color),null!=r.alpha&&t.ToolkitUtils.setAttrNullNS(n,"fill-opacity",r.alpha,1)),i=e.getStyle("font-family"),i&&!this.getCtx().isDefaultFontFamily(i)?t.ToolkitUtils.setAttrNullNS(n,"font-family",i):t.ToolkitUtils.removeAttrNullNS(n,"font-family"),i=e.getStyle("font-size"),i&&i!=this.getCtx().getDefaultFontSize()?(t.ToolkitUtils.setAttrNullNS(n,"font-size",i),(t.Agent.isPlatformIE()||t.Agent.isBrowserSafari())&&this.setMatrix(this.getMatrix())):t.ToolkitUtils.removeAttrNullNS(n,"font-size"),i=e.getStyle("font-style"),i&&t.ToolkitUtils.setAttrNullNS(n,"font-style",i),i=e.getStyle("font-weight"),i&&t.ToolkitUtils.setAttrNullNS(n,"font-weight",i),i=e.getStyle("text-decoration"),i&&t.ToolkitUtils.setAttrNullNS(n,"text-decoration",i),i=e.getStyle("cursor"),i&&t.ToolkitUtils.setAttrNullNS(n,"cursor",i),t.Agent.isPlatformIE()&&this.setX(this._x)}},t.OutputText.prototype._getBaselineTranslation=function(){if(this._baseline){if(this._textString&&!this._isRepresentativeText())return t.TextUtils.getBaselineTranslation(this);var e=this.getVertAlignment();if(e!=t.OutputText.V_ALIGN_AUTO){var n=t.ToolkitUtils.getAttrNullNS(this.getElem(),"font-size");if(n||(n=t.ToolkitUtils.getAttrNullNS(this.getOuterElem(),"font-size")),(!n||isNaN(n)&&n.indexOf("px")==-1)&&(n=t.StyleUtils.DEFAULT_FONT_SIZE),n=parseFloat(n),e==t.OutputText.V_ALIGN_TOP)return.8*n;if(e==t.OutputText.V_ALIGN_MIDDLE)return.3*n;if(e==t.OutputText.V_ALIGN_BOTTOM)return-.2*n}}return 0},t.OutputText.prototype._getBaselineAdjustedMatrix=function(e){if(this._baseline){e||(e=new t.Matrix);var n=new t.Matrix(null,null,null,null,null,this._getBaselineTranslation());n.concat(e),e=n}return e},t.OutputText.prototype.setMatrix=function(e){(t.Agent.isPlatformIE()||t.Agent.isBrowserSafari())&&(this._matrixForIE=e,e=this._getBaselineAdjustedMatrix(e)),t.OutputText.superclass.setMatrix.call(this,e)},t.OutputText.prototype.getMatrix=function(){var e=null;return(t.Agent.isPlatformIE()||t.Agent.isBrowserSafari())&&(e=this._matrixForIE),e||(e=t.OutputText.superclass.getMatrix.call(this)),e},t.OutputText.prototype._isRepresentativeText=function(){return this._textString==t.OutputText.REPRESENTATIVE_TEXT||this._textString==t.OutputText.BIDI_ZERO_WIDTH||this._textString==t.OutputText.BIDI_ZERO_WIDTH+t.OutputText.REPRESENTATIVE_TEXT},t.OutputText.prototype.GetSvgDimensions=function(){var e=t.OutputText.superclass.GetSvgDimensions.call(this);return e&&(e.y+=this._getBaselineTranslation(),this._isRepresentativeText()||(e.h=t.TextUtils.getTextStringHeight(this.getCtx(),this.getCSSStyle()))),e},t.OutputText.prototype.UpdateSelectionEffect=function(){},t.OutputText.prototype.getOptimalFontSize=function(t){for(var e=Math.max(Math.min(t.w/this.getTextString().length,t.h/2),9);e<51;e+=1){this.setFontSize(e);var n=this.measureDimensions();if(n.w>t.w||n.h>t.h)return Math.min(e-1,50)}return 50},t.OutputText.prototype.measureDimensions=function(e){var n=null!=this.getTextString()?this.getTextString():"",i=this.getHorizAlignment(),r=this.getVertAlignment();t.OutputText._cache||(t.OutputText._cache=new t.Cache);var o,a=this.getCSSStyle(),s=null!=a?a.hashCodeForTextMeasurement():"",l=n.length>0?n+s:"",u=t.OutputText._cache.get(l);if(null!=u)o=new t.Rectangle(u.x+this.getX(),u.y+this.getY(),u.w,u.h);else{t.Agent.isPlatformIE()||this.alignLeft(),this.alignAuto();for(var h=!1,c=this.getCtx().getStage(),d=this.getParent();d;){if(d==c){h=!0;break}d=d.getParent()}if(h&&(o=this.GetSvgDimensions()),o||(o=new t.Rectangle(0,0,0,0)),o.w<=0&&o.h<=0&&n.length>0){var p,g=this.getParent();g&&(p=g.getChildIndex(this)),c.addChild(this),o=this.GetSvgDimensions(),c.removeChild(this),g&&g.addChildAt(this,p)}t.Agent.isPlatformIE()?i===t.OutputText.H_ALIGN_RIGHT?o.x+=o.w:i===t.OutputText.H_ALIGN_CENTER&&(o.x+=o.w/2):this.setHorizAlignment(i),this.setVertAlignment(r),u=new t.Rectangle(0,o.y-this.getY(),o.w,o.h),t.OutputText._cache.put(l,u),o.x=this.getX()}return i===t.OutputText.H_ALIGN_RIGHT?o.x-=o.w:i===t.OutputText.H_ALIGN_CENTER&&(o.x-=o.w/2),r===t.OutputText.V_ALIGN_TOP?o.y-=u.y:r===t.OutputText.V_ALIGN_BOTTOM?o.y-=u.y+u.h:r===t.OutputText.V_ALIGN_MIDDLE&&(o.y-=u.y+u.h/2),e&&e!==this?this.ConvertCoordSpaceRect(o,e):o},t.OutputText.prototype.copyShape=function(){var e=new t.OutputText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return e.setCSSStyle(this.getCSSStyle()),e.setHorizAlignment(this.getHorizAlignment()),e.setVertAlignment(this.getVertAlignment()),e},t.OutputText.prototype.addChild=function(e){if(t.Agent.isEnvironmentTest()){print("dvt.OutputText.prototype.addChild: Text should not be used as a shape container.");var n=null;n.errorShouldOccurDueToInvalidAddChild()}},t.OutputText.needsTextAnchorAdjustment=function(){return t.Agent.isRightToLeft()&&!t.Agent.isEnvironmentBatik()},t.OutputText.prototype.getDimensionsSelf=function(t){return this.measureDimensions(t)},t.OutputText.getCachedDimensions=function(e,n){var i=null!=n?n.hashCodeForTextMeasurement():"",r=e.length>0?e+i:"";return t.OutputText._cache?t.OutputText._cache.get(r):null},t.BackgroundOutputText=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.BackgroundOutputText,t.Container),t.BackgroundOutputText._PADDING=.15,t.BackgroundOutputText.prototype.Init=function(e,n,i,r,o,a){t.BackgroundOutputText.superclass.Init.call(this,e,"g",a),this.TextInstance=this.CreateTextInstance(e,n,i,r,a),this._backgroundRect=null,o&&this.setCSSStyle(o),this.addChild(this.TextInstance)},t.BackgroundOutputText.prototype.getTextString=function(){return this.TextInstance.getTextString()},t.BackgroundOutputText.prototype.setTextString=function(t){return this.TextInstance.setTextString(t),this},t.BackgroundOutputText.prototype.isTruncated=function(){return this.TextInstance.isTruncated()},t.BackgroundOutputText.prototype.getUntruncatedTextString=function(){return this.TextInstance.getUntruncatedTextString()},t.BackgroundOutputText.prototype.setUntruncatedTextString=function(t){this.TextInstance.setUntruncatedTextString(t)},t.BackgroundOutputText.prototype.getX=function(){return this.TextInstance.getX()},t.BackgroundOutputText.prototype.setX=function(t){return this.TextInstance=this.TextInstance.setX(t),this._realignBackground(),this},t.BackgroundOutputText.prototype.getY=function(){return this.TextInstance.getY()},t.BackgroundOutputText.prototype.setY=function(t){return this.TextInstance=this.TextInstance.setY(t),this._realignBackground(),this},t.BackgroundOutputText.prototype.setFontSize=function(e){this.TextInstance.setFontSize(e),this._style.setFontSize(t.CSSStyle.FONT_SIZE,String(e)),this._realignBackground()},t.BackgroundOutputText.prototype.getHorizAlignment=function(){return this.TextInstance.getHorizAlignment()},t.BackgroundOutputText.prototype.setHorizAlignment=function(t){this.TextInstance.setHorizAlignment(t),this._realignBackground()},t.BackgroundOutputText.prototype.getVertAlignment=function(){return this.TextInstance.getVertAlignment()},t.BackgroundOutputText.prototype.setVertAlignment=function(t){this.TextInstance.setVertAlignment(t),this._realignBackground()},t.BackgroundOutputText.prototype.alignLeft=function(){this.TextInstance.alignLeft(),this._realignBackground()},t.BackgroundOutputText.prototype.alignCenter=function(){this.TextInstance.alignCenter(),this._realignBackground()},t.BackgroundOutputText.prototype.alignRight=function(){this.TextInstance.alignRight(),this._realignBackground()},t.BackgroundOutputText.prototype.alignTop=function(){this.TextInstance.alignTop(),this._realignBackground()},t.BackgroundOutputText.prototype.alignMiddle=function(){this.TextInstance.alignMiddle(),this._realignBackground()},t.BackgroundOutputText.prototype.alignBottom=function(){this.TextInstance.alignBottom(),this._realignBackground()},t.BackgroundOutputText.prototype.alignAuto=function(){this.TextInstance.alignAuto(),this._realignBackground()},t.BackgroundOutputText.prototype.setCSSStyle=function(e){e.getStyle(t.CSSStyle.BACKGROUND_COLOR)&&!e.getStyle(t.CSSStyle.COLOR)&&e.setStyle(t.CSSStyle.COLOR,t.ColorUtils.getContrastingTextColor(e.getStyle(t.CSSStyle.BACKGROUND_COLOR))),this.TextInstance&&this.TextInstance.setCSSStyle(e),(this._backgroundRect||t.BackgroundOutputText._hasBackgroundStyles(e))&&(this._backgroundRect||(this._backgroundRect=this.CreateBackground(this.getCtx(),this.TextInstance),this.addChildAt(this._backgroundRect,0)),this._setBackgroundCSSStyle(this._backgroundRect,e)),this._style=e},t.BackgroundOutputText.prototype.getCSSStyle=function(){return this._style},t.BackgroundOutputText.prototype.setMatrix=function(t){this.TextInstance.setMatrix(t),this._backgroundRect&&this._backgroundRect.setMatrix(t)},t.BackgroundOutputText.prototype.getMatrix=function(){return this.TextInstance.getMatrix()},t.BackgroundOutputText.prototype.getOptimalFontSize=function(t){return this.TextInstance.getOptimalFontSize(t)},t.BackgroundOutputText.prototype.measureDimensions=function(t){return this.getDimensions(t)},t.BackgroundOutputText.prototype.getTextDimensions=function(t){return this.TextInstance.getDimensions(t)},t.BackgroundOutputText.prototype.getDimensions=function(e){var n=this.TextInstance.getDimensions(e),i=n.h*t.BackgroundOutputText._PADDING;return n.x-=i,n.w+=2*i,n},t.BackgroundOutputText.prototype.copyShape=function(){return this.TextInstance.copyShape()},t.BackgroundOutputText.needsTextAnchorAdjustment=function(t){return this.TextInstance.needsTextAnchorAdjustment(t)},t.BackgroundOutputText.getCachedDimensions=function(t,e){return this.TextInstance.getCachedDimensions(t,e)},t.BackgroundOutputText.prototype.CreateTextInstance=function(e,n,i,r,o){return new t.OutputText(e,n,i,r,o)},t.BackgroundOutputText.prototype.CreateBackground=function(e,n){var i=n.getDimensions(),r=i.h*t.BackgroundOutputText._PADDING;return new t.Rect(e,i.x-r,i.y,i.w+2*r,i.h)},t.BackgroundOutputText.prototype._realignBackground=function(){if(this._backgroundRect){var e=this.TextInstance.getDimensions(),n=.15*e.h,i=this.getHorizAlignment(),r=this.getVertAlignment();i==t.OutputText.H_ALIGN_LEFT?this._backgroundRect.setX(this.getX()-n):i==t.OutputText.H_ALIGN_CENTER?this._backgroundRect.setX(this.getX()-.5*e.w-n):i==t.OutputText.H_ALIGN_RIGHT&&this._backgroundRect.setX(this.getX()-e.w-n);var o=parseFloat(this._style.getFontSize());isNaN(o)&&(o=0);var a=0;(t.Agent.isBrowserChrome()||t.Agent.isEnvironmentTest())&&r==t.OutputText.V_ALIGN_MIDDLE?a=.12*o:t.Agent.isPlatformIE()&&r==t.OutputText.V_ALIGN_BOTTOM&&(a=.4*-o);var s=this.GetTextDimensionsForRealign(e);r==t.OutputText.V_ALIGN_TOP?this._backgroundRect.setY(this.getY()):r==t.OutputText.V_ALIGN_MIDDLE?this._backgroundRect.setY(this.getY()-.5*s-a):r==t.OutputText.V_ALIGN_BOTTOM?this._backgroundRect.setY(this.getY()-s-a):r==t.OutputText.V_ALIGN_AUTO&&this._backgroundRect.setY(e.y),this._backgroundRect.setWidth(e.w+2*n),this._backgroundRect.setHeight(e.h)}},t.BackgroundOutputText.prototype._setBackgroundCSSStyle=function(e,n){if(n){var i=n.getStyle(t.CSSStyle.BACKGROUND_COLOR);null!=i?e.setSolidFill(i):e.setInvisibleFill();var r=n.getStyle(t.CSSStyle.BORDER_COLOR),o=n.getStyle(t.CSSStyle.BORDER_WIDTH),a=n.getStyle(t.CSSStyle.BORDER_RADIUS);if(r||o||a){var s=new t.CSSStyle;s.setStyle(t.CSSStyle.BORDER_COLOR,r),s.setStyle(t.CSSStyle.BORDER_WIDTH,o),s.setStyle(t.CSSStyle.BORDER_RADIUS,a),e.setCSSStyle(s)}}else e.setInvisibleFill();e.setMouseEnabled(!1)},t.BackgroundOutputText.prototype.GetTextDimensionsForRealign=function(t){return t.h},t.BackgroundOutputText._hasBackgroundStyles=function(e){return!!e&&!!(e.getStyle(t.CSSStyle.BORDER_COLOR)||e.getStyle(t.CSSStyle.BORDER_WIDTH)||e.getStyle(t.CSSStyle.BORDER_RADIUS)||e.getStyle(t.CSSStyle.BACKGROUND_COLOR))},t.MultilineText=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.MultilineText,t.Container),t.MultilineText._LINE_SPACE=0,t.MultilineText.H_ALIGN_LEFT="left",t.MultilineText.H_ALIGN_CENTER="center",t.MultilineText.H_ALIGN_RIGHT="right",t.MultilineText.V_ALIGN_TOP="top",t.MultilineText.V_ALIGN_MIDDLE="middle",t.MultilineText.V_ALIGN_BOTTOM="bottom",t.MultilineText.prototype.Init=function(e,n,i,r,o){t.MultilineText.superclass.Init.call(this,e,null,o),this._textInstance=null,this._additionalLines=[],this._lineHeight=null,this._yCoord=null,this._noWrap=!1,this.setTextString(n),this.setX(i?i:0),this.setY(r?r:0),this.setMaxLines(1/0)},t.MultilineText.prototype.getTextString=function(){return this._textString},t.MultilineText.prototype.setTextString=function(e){this._textString=null!=e?String(e):null,this._textInstance?(this._textInstance.setTextString(e),this._removeAdditionalLines()):(this._textInstance=new t.OutputText(this.getCtx(),this._textString),this.addChild(this._textInstance)),this._bTruncated=!1},t.MultilineText.prototype._getTextLines=function(){var t=this._additionalLines.slice();return this._textInstance.getParent()==this&&t.unshift(this._textInstance),t},t.MultilineText.prototype.getX=function(){return this._textInstance.getX()},t.MultilineText.prototype.setX=function(e){return t.ArrayUtils.forEach(this._getTextLines(),function(t){t.setX(e)}),this},t.MultilineText.prototype.getY=function(){return this._textInstance.getY()},t.MultilineText.prototype.getYAlignCoord=function(){return this._yCoord},t.MultilineText.prototype.setY=function(e){if(this._yCoord=e,this._vertAlign)this._alignVerticalText();else{var n=e-this._textInstance.getY();n||(n=e),t.ArrayUtils.forEach(this._getTextLines(),function(t){var e=t.getY();t.setY(e?e+n:n)})}return this},t.MultilineText.prototype.getMaxLines=function(){return this.GetProperty("maxLines")},t.MultilineText.prototype.setMaxLines=function(t){if(t>0)return this.SetProperty("maxLines",t)},t.MultilineText.prototype.isTruncated=function(){return this._bTruncated},t.MultilineText.prototype.getHorizAlignment=function(){return this._textInstance.getHorizAlignment()},t.MultilineText.prototype.setHorizAlignment=function(e){return t.ArrayUtils.forEach(this._getTextLines(),function(t){t.setHorizAlignment(e)}),this},t.MultilineText.prototype.alignLeft=function(){this._horizAlign!=t.MultilineText.H_ALIGN_LEFT&&(this._horizAlign=t.MultilineText.H_ALIGN_LEFT,t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignLeft()}))},t.MultilineText.prototype.alignCenter=function(){this._horizAlign!=t.MultilineText.H_ALIGN_CENTER&&(this._horizAlign=t.MultilineText.H_ALIGN_CENTER,t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignCenter()}))},t.MultilineText.prototype.alignRight=function(){this._horizAlign!=t.MultilineText.H_ALIGN_RIGHT&&(this._horizAlign=t.MultilineText.H_ALIGN_RIGHT,t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignRight()}))},t.MultilineText.prototype.alignTop=function(){this._vertAlign!=t.MultilineText.V_ALIGN_TOP&&(this._vertAlign=t.MultilineText.V_ALIGN_TOP,this._alignVerticalText(),t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignTop()}))},t.MultilineText.prototype.alignMiddle=function(){this._vertAlign!=t.MultilineText.V_ALIGN_MIDDLE&&(this._vertAlign=t.MultilineText.V_ALIGN_MIDDLE,this._alignVerticalText(),t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignMiddle()}))},t.MultilineText.prototype.alignBottom=function(){this._vertAlign!=t.MultilineText.V_ALIGN_BOTTOM&&(this._vertAlign=t.MultilineText.V_ALIGN_BOTTOM,this._alignVerticalText(),t.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignBottom()}))},t.MultilineText.prototype._alignVerticalText=function(){if(this._vertAlign)for(var e=this.getYAlignCoord(),n=this.getLineCount(),i=this.getLineHeight(),r=this._getTextLines(),o=0,a=0;a<r.length;a++){var s=r[a];if(this._vertAlign==t.MultilineText.V_ALIGN_TOP)o=i*a;else if(this._vertAlign==t.MultilineText.V_ALIGN_MIDDLE){var l=i*(n-1);o=i*a-l/2}else this._vertAlign==t.MultilineText.V_ALIGN_BOTTOM&&(o=-i*(n-a-1));s.setY(e+o)}},t.MultilineText.prototype.getCSSStyle=function(){return this._textInstance.getCSSStyle()},t.MultilineText.prototype.setCSSStyle=function(e){return t.ArrayUtils.forEach(this._getTextLines(),function(t){
t.setCSSStyle(e)}),this},t.MultilineText.prototype.copyShape=function(){var e=new t.MultilineText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return e.setCSSStyle(this.getCSSStyle()).setHorizAlignment(this.getHorizAlignment()).setMaxLines(this.getMaxLines()),e},t.MultilineText.prototype._removeAdditionalLines=function(){for(var t=0;t<this._additionalLines.length;t++)this.removeChild(this._additionalLines[t]);this._additionalLines=[]},t.MultilineText.prototype.__fitText=function(e,n,i){return this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),t.TextUtils.fitText(this._textInstance,e,n,this,i)?!this._textInstance.isTruncated()||(!this.isWrapEnabled()||this.wrapText(e,n,i,!1)):(this.getParent().removeChild(this),!1)},t.MultilineText.prototype.wrapText=function(e,n,i,r){var o=this.getLineHeight(),a=o*t.MultilineText._LINE_SPACE,s=this.getMaxLines(),l=Math.min(n,s*(o+a)-a)-o-a;this.getLineCount()>1&&this._removeAdditionalLines();var u=this.getTextString().split(" ");u.reverse();for(var h=this._textInstance,c=null,d=!0;u.length>0;){var p=u.pop(),g=c?c+" "+p:p;if(h.setTextString(g),h.setUntruncatedTextString(null),!t.TextUtils.fitText(h,e,1/0,this,i))return!d;if(h.isTruncated()){if(l<a+o)return this._bTruncated=!0,!0;if(c)h.setTextString(c),u.push(p);else{if(r)return this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),!1;this._bTruncated=!0}if(u.length>0){var f=h.copyShape();f.setY(h.getY()+a+o),this.addChild(f),this._additionalLines.push(f),h=f,c=null,l-=a+o}}else c=g;d=!1}return!0},t.MultilineText.prototype.GetSvgDimensions=function(e){var n;return t.ArrayUtils.forEach(this._getTextLines(),function(t){n=n?n.getUnion(t.measureDimensions(e)):t.measureDimensions(e)}),n?n:new t.Rectangle(0,0,0,0)},t.MultilineText.prototype.getLineCount=function(){return this._additionalLines.length+1},t.MultilineText.prototype.getLineHeight=function(){return this._lineHeight||(this._lineHeight=this._textInstance.measureDimensions().h),this._lineHeight},t.MultilineText.prototype.setWrapEnabled=function(t){0==t&&(this._textInstance.getParent()!=this&&this.addChild(this._textInstance),this._textInstance.getTextString()||this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines()),this._noWrap=!t},t.MultilineText.prototype.isWrapEnabled=function(){return 0==this._noWrap},t.MultilineText.prototype.getUntruncatedTextString=function(){return this.isTruncated()?this.getTextString():null},t.MultilineText.prototype.setUntruncatedTextString=function(t){},t.MultilineText.prototype.measureDimensions=function(t){return this.GetSvgDimensions(t)},t.MultilineText.prototype.getDimensions=function(t){return this.GetSvgDimensions(t)},t.MultilineText.prototype.UpdateSelectionEffect=function(){},t.MultilineText.prototype.getHorizAlignment=function(){return this._horizAlign},t.MultilineText.prototype.setHorizAlignment=function(e){e==t.MultilineText.H_ALIGN_LEFT?this.alignLeft():e==t.MultilineText.H_ALIGN_CENTER?this.alignCenter():e==t.MultilineText.H_ALIGN_RIGHT&&this.alignRight()},t.MultilineText.prototype.getVertAlignment=function(){return this._vertAlign},t.MultilineText.prototype.setVertAlignment=function(e){e==t.MultilineText.V_ALIGN_TOP?this.alignTop():e==t.MultilineText.V_ALIGN_MIDDLE?this.alignMiddle():e==t.MultilineText.V_ALIGN_BOTTOM&&this.alignBottom()},t.BackgroundMultilineText=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.BackgroundMultilineText,t.BackgroundOutputText),t.BackgroundMultilineText.prototype.Init=function(e,n,i,r,o,a){t.BackgroundMultilineText.superclass.Init.call(this,e,n,i,r,o,a)},t.BackgroundMultilineText.prototype.wrapText=function(t,e,n,i){return this.TextInstance.wrapText(t,e,n,i)},t.BackgroundMultilineText.prototype.CreateTextInstance=function(e,n,i,r,o){return new t.MultilineText(e,n,i,r,o)},t.BackgroundMultilineText.prototype.GetTextDimensionsForRealign=function(){return this.getLineHeight()},t.BackgroundMultilineText.prototype.measureDimensions=function(){return this.TextInstance.measureDimensions()},t.BackgroundMultilineText.prototype.__fitText=function(t,e,n){return this.TextInstance.__fitText(t,e,n)},t.BackgroundMultilineText.prototype._getTextLines=function(){return this.TextInstance._getTextLines()},t.BackgroundMultilineText.prototype.getLineHeight=function(){return this.TextInstance.getLineHeight()},t.BackgroundMultilineText.prototype.getLineCount=function(){return this.TextInstance.getLineCount()},t.BackgroundMultilineText.prototype.getYAlignCoord=function(){return this.TextInstance.getYAlignCoord()},t.BackgroundMultilineText.prototype.setWrapEnabled=function(t){this.TextInstance.setWrapEnabled(t)},t.BackgroundMultilineText.prototype.isWrapEnabled=function(){return this.TextInstance.isWrapEnabled()},t.BackgroundMultilineText.prototype.UpdateSelectionEffect=function(){},t.Use=function(t,e,n,i,r){this.Init(t,e,n,i,r)},t.Obj.createSubclass(t.Use,t.Displayable),t.Use._uniqueSeed=0,t.Use.prototype.Init=function(e,n,i,r,o){t.Use.superclass.Init.call(this,e,"use",o);var a=r.getId();if(a||(a="use"+t.Use._uniqueSeed++,r.setId(a)),e.existsGlobalDefReference(a))e.increaseGlobalDefReference(a);else{var s=r.getElem();t.ToolkitUtils.setAttrNullNS(s,"id",a),e.appendDefs(s),e.increaseGlobalDefReference(a)}this._targetId=a,t.ToolkitUtils.setAttrNS(this._elem,t.Image.XLINK_NS,"xlink:href",t.ToolkitUtils.getUrlPathById(a)),this.setX(n).setY(i)},t.Use.prototype.getX=function(){return this.GetProperty("x")},t.Use.prototype.setX=function(t){return this.SetSvgProperty("x",t,0)},t.Use.prototype.getY=function(){return this.GetProperty("y")},t.Use.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},t.Use.prototype.destroy=function(){this.getCtx().decreaseGlobalDefReference(this._targetId),t.Use.superclass.destroy.call(this)},t.StyleUtils={},t.Obj.createSubclass(t.StyleUtils,t.Obj),t.StyleUtils.DEFAULT_FONT_FAMILY="Tahoma,Verdana,Helvetica,sans-serif",t.StyleUtils.DEFAULT_FONT_SIZE="11px",t.StyleUtils.DEFAULT_FONT_COLOR="black",t.StyleUtils.getStyle=function(t,e,n){return t&&null!==t[e]&&"undefined"!=typeof t[e]?t[e]:n},t.StyleUtils.setStyle=function(t,e,n){t&&null!==n&&"undefined"!=typeof n&&(t[e]=n)},t.StyleUtils.getShadow=function(e){var n=null;if(null!=e&&"none"!=e){var i,r=0,o=0,a=0,s=e.replace(/, /g,",").split(" ");if(null==e.match(/rgb/i)&&(s[s.length]="rgba(0, 0, 0, 0.2)"),s.length<3)return null;for(var l=0;l<s.length;l++)0==l?r=parseInt(s[0]):1==l?o=parseInt(s[1]):2==l&&null==s[l].match(/rgb/i)?a=parseInt(s[l]):s[l].match(/rgb/i)&&(i=s[l]);var u=Math.sqrt(r*r+o*o),h=180*Math.atan2(o,r)/Math.PI;n=new t.Shadow(i,u,a,a,h,1,3,(!1),(!1),(!1))}return n},t.StyleUtils.getTimeMilliseconds=function(t){return"string"==typeof t&&(t="ms"==t.slice(-2)?parseInt(t.slice(0,-2)):"s"==t.slice(-1)?1e3*parseFloat(t.slice(0,-1)):parseInt(t)),t},t.CSSGradient=function(t){this.Init(t)},t.Obj.createSubclass(t.CSSGradient,t.Obj),t.CSSGradient.LINEAR=0,t.CSSGradient.RADIAL=1,t.CSSGradient.prototype.Init=function(t){this._type=t},t.CSSGradient.prototype.getGradientType=function(){return this._type},t.CSSGradient.prototype.getAlphas=function(){return this._arAlphas},t.CSSGradient.prototype.setAlphas=function(t){this._arAlphas=t},t.CSSGradient.prototype.getColors=function(){return this._arColors},t.CSSGradient.prototype.setColors=function(t){this._arColors=t},t.CSSGradient.prototype.getRatios=function(){return this._arRatios},t.CSSGradient.prototype.setRatios=function(t){this._arRatios=t};var E=function(){this.Init()};t.Obj.createSubclass(E,t.CSSGradient),E.LEFT=0,E.BOTTOM_LEFT=45,E.BOTTOM=90,E.BOTTOM_RIGHT=135,E.RIGHT=180,E.TOP_RIGHT=225,E.TOP=270,E.TOP_LEFT=315,E.prototype.Init=function(){E.superclass.Init.call(this,t.CSSGradient.LINEAR)},E.prototype.getAngle=function(){return this._angle},E.prototype.setAngle=function(t){this._angle=t},t.GradientParser=function(){},t.Obj.createSubclass(t.GradientParser,t.Obj),t.GradientParser.WEBKIT_GD_LINEAR="-webkit-linear-gradient",t.GradientParser.FIREFOX_GD_LINEAR="-moz-linear-gradient",t.GradientParser.IE_GD_LINEAR="progid:DXImageTransform.Microsoft.gradient",t.GradientParser.IE_GD_LINEAR2="progid:DXImageTransform.Microsoft.Gradient",t.GradientParser.IE7_GD_FILTER="filter",t.GradientParser.IE8_GD_FILTER="-ms-filter",t.GradientParser.IE10_GD_LINEAR="-ms-linear-gradient",t.GradientParser.IE_GD_START_COLOR_STR="startColorstr",t.GradientParser.IE_GD_END_COLOR_STR="endColorstr",t.GradientParser.IE_GD_GRADIENT_TYPE="GradientType",t.GradientParser.OLD_WEBKIT_GD_LINEAR="-webkit-gradient",t.GradientParser.GD_LINEAR="linear-gradient",t.GradientParser.GD_RADIAL="radial-gradient",t.GradientParser.GD_TOP="top",t.GradientParser.GD_BOTTOM="bottom",t.GradientParser.GD_LEFT="left",t.GradientParser.GD_RIGHT="right",t.GradientParser.GD_CENTER="center",t.GradientParser.GD_TO="to",t.GradientParser.parseCSSGradient=function(e){if(null!=e){if(e=t.StringUtils.trim(e),t.GradientParser._startsWith(e,t.GradientParser.WEBKIT_GD_LINEAR))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.WEBKIT_GD_LINEAR),t.GradientParser._parseLinearGradient(e);if(t.GradientParser._startsWith(e,t.GradientParser.FIREFOX_GD_LINEAR))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.FIREFOX_GD_LINEAR),t.GradientParser._parseLinearGradient(e);if(t.GradientParser._startsWith(e,t.GradientParser.IE_GD_LINEAR))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.IE_GD_LINEAR),t.GradientParser._parseIELinearGradient(e);if(t.GradientParser._startsWith(e,t.GradientParser.IE_GD_LINEAR2))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.IE_GD_LINEAR2),t.GradientParser._parseIELinearGradient(e);if(t.GradientParser._startsWith(e,t.GradientParser.IE10_GD_LINEAR))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.IE10_GD_LINEAR),t.GradientParser._parseLinearGradient(e);if(t.GradientParser._startsWith(e,t.GradientParser.GD_LINEAR))return e=t.GradientParser._removeParenthesis(e,t.GradientParser.GD_LINEAR),t.GradientParser._parseLinearGradient(e)}return null},t.GradientParser._parseLinearGradient=function(e){var n=new RegExp("(-?(?:\\d*\\.)?\\d+)"),i=new RegExp("(deg|rad|grad|turn)"),r=new RegExp("(left|right)"),o=new RegExp("(top|bottom)"),a=new RegExp("(?:(to)\\s+)"),s=new RegExp("(?:"+n.source+i.source+")"),l=new RegExp("(?:"+r.source+"(?:\\s+"+o.source+")?)"),u=new RegExp("(?:"+o.source+"(?:\\s+"+r.source+")?)"),h=new RegExp("(?:"+l.source+"|"+u.source+")"),c=new RegExp("(?:"+s.source+"|(?:"+a.source+"?"+h.source+"))"),d=new RegExp("(?:\\s*"+c.source+"\\s*,\\s*)","i"),p=e.match(d);if(null==p||0==p.length)return null;var g=(p.length,new E),f=p[5]==t.GradientParser.GD_TOP||p[6]==t.GradientParser.GD_TOP,_=p[5]==t.GradientParser.GD_BOTTOM||p[6]==t.GradientParser.GD_BOTTOM,m=p[4]==t.GradientParser.GD_LEFT||p[7]==t.GradientParser.GD_LEFT,v=p[4]==t.GradientParser.GD_RIGHT||p[7]==t.GradientParser.GD_RIGHT,y=p[3]==t.GradientParser.GD_TO;if(y&&((f||_)&&(f=!f,_=!_),(m||v)&&(m=!m,v=!v)),f)m?g.setAngle(E.TOP_LEFT):v?g.setAngle(E.TOP_RIGHT):g.setAngle(E.TOP);else if(_)m?g.setAngle(E.BOTTOM_LEFT):v?g.setAngle(E.BOTTOM_RIGHT):g.setAngle(E.BOTTOM);else if(m)g.setAngle(E.LEFT);else if(v)g.setAngle(E.RIGHT);else if(p[2]){var s=parseFloat(p[1]);isNaN(s)||("grad"==p[2]?s=s/200*180:"rad"==p[2]?s=s/Math.PI*180:"turn"==p[2]&&(s=s/.5*180),g.setAngle(s))}return e=e.substring(p[0].length),t.GradientParser._parseCSSColorStops(e,g),g},t.GradientParser._parseIELinearGradient=function(e){var n,i=e.split(","),r=i.length,o=[],a=new E;a.setAngle(E.TOP);for(var s=0;s<r;s++)n=t.StringUtils.trim(i[s]).split("="),2==n.length&&(n[0]=t.StringUtils.trim(n[0]),n[0]==t.GradientParser.IE_GD_START_COLOR_STR?o[0]=t.GradientParser.removeQuotes(n[1],t.CSSStyle.SINGLE_QUOTE):n[0]==t.GradientParser.IE_GD_END_COLOR_STR?o[1]=t.GradientParser.removeQuotes(n[1],t.CSSStyle.SINGLE_QUOTE):n[0]==t.GradientParser.IE_GD_GRADIENT_TYPE&&"1"==n[1]&&a.setAngle(E.LEFT));return t.GradientParser._parseColorStops(o,a),a},t.GradientParser._parseCSSColorStops=function(e,n){var i=e.match(/(#[0-9a-f]+|rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)|rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d?)(\.\d+)?\s*\)|[a-z]+)(\s+\d+\.?\d*%)?/gi);null!=i&&i.length>0&&t.GradientParser._parseColorStops(i,n)},t.GradientParser._parseColorStops=function(e,n){for(var i,r,o,a=e.length,s=[],l=[],u=[],h=!0,c=[],d=0;d<e.length;d++)o=t.CSSStyle.parseBorderColor(e[d],c),i=c.pop(),l[d]=i,s[d]=t.ColorUtils.getAlpha(i),o=t.StringUtils.trim(o),o.length>0&&(r=parseFloat(o),isNaN(r)||t.StringUtils.endsWith(o,"%")&&(u[d]=r/100,h=!1));if(a>1&&h)for(var p=0;p<a;p++)u[p]=p/(a-1);else h&&(u[0]=0);n.setColors(l),n.setAlphas(s),n.setRatios(u)},t.GradientParser._removeParenthesis=function(e,n){return")"!=e.charAt(e.length-1)?null:(e=e.substring(n.length),t.GradientParser.removeQuotes(e,"(",")"))},t.GradientParser.removeQuotes=function(e,n,i){if(e=t.StringUtils.trim(e),e.charAt(0)!=n)return e;null==i&&(i=n);var r=1,o=e.lastIndexOf(i);return o<0?e.substring(r):e.substring(r,o)},t.GradientParser._startsWith=function(t,e){return 0==t.indexOf(e)},t.CSSStyle=function(t){this.Init(t)},t.Obj.createSubclass(t.CSSStyle,t.Obj),t.CSSStyle.SKIN_FUSION="fusion",t.CSSStyle.SKIN_SKYROS="skyros",t.CSSStyle.SKIN_ALTA="alta",t.CSSStyle.SKIN_NEXT="next",t.CSSStyle.BACKGROUND="background",t.CSSStyle.BACKGROUND_COLOR="background-color",t.CSSStyle.BACKGROUND_IMAGE="background-image",t.CSSStyle.BACKGROUND_REPEAT="background-repeat",t.CSSStyle.BACKGROUND_POSITION="background-position",t.CSSStyle.BORDER="border",t.CSSStyle.BORDER_TOP="border-top",t.CSSStyle.BORDER_BOTTOM="border-bottom",t.CSSStyle.BORDER_LEFT="border-left",t.CSSStyle.BORDER_RIGHT="border-right",t.CSSStyle.BORDER_WIDTH="border-width",t.CSSStyle.BORDER_TOP_WIDTH="border-top-width",t.CSSStyle.BORDER_BOTTOM_WIDTH="border-bottom-width",t.CSSStyle.BORDER_LEFT_WIDTH="border-left-width",t.CSSStyle.BORDER_RIGHT_WIDTH="border-right-width",t.CSSStyle.BORDER_COLOR="border-color",t.CSSStyle.BORDER_TOP_COLOR="border-top-color",t.CSSStyle.BORDER_BOTTOM_COLOR="border-bottom-color",t.CSSStyle.BORDER_LEFT_COLOR="border-left-color",t.CSSStyle.BORDER_RIGHT_COLOR="border-right-color",t.CSSStyle.BORDER_STYLE="border-style",t.CSSStyle.BORDER_RADIUS="border-radius",t.CSSStyle.BORDER_TOP_LEFT_RADIUS="border-top-left-radius",t.CSSStyle.BORDER_TOP_RIGHT_RADIUS="border-top-right-radius",t.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS="border-bottom-right-radius",t.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS="border-bottom-left-radius",t.CSSStyle.MARGIN="margin",t.CSSStyle.MARGIN_TOP="margin-top",t.CSSStyle.MARGIN_BOTTOM="margin-bottom",t.CSSStyle.MARGIN_LEFT="margin-left",t.CSSStyle.MARGIN_RIGHT="margin-right",t.CSSStyle.PADDING="padding",t.CSSStyle.PADDING_TOP="padding-top",t.CSSStyle.PADDING_BOTTOM="padding-bottom",t.CSSStyle.PADDING_LEFT="padding-left",t.CSSStyle.PADDING_RIGHT="padding-right",t.CSSStyle.COLOR="color",t.CSSStyle.FONT_FAMILY="font-family",t.CSSStyle.FONT_SIZE="font-size",t.CSSStyle.FONT_STYLE="font-style",t.CSSStyle.FONT_WEIGHT="font-weight",t.CSSStyle.TEXT_DECORATION="text-decoration",t.CSSStyle.TEXT_ALIGN="text-align",t.CSSStyle.BORDER_BOX="border-box",t.CSSStyle.CONTENT_BOX="content-box",t.CSSStyle.HEIGHT="height",t.CSSStyle.WIDTH="width",t.CSSStyle.NONE="none",t.CSSStyle.NO_REPEAT="no-repeat",t.CSSStyle.REPEAT="repeat",t.CSSStyle.REPEAT_X="repeat-x",t.CSSStyle.REPEAT_Y="repeat-y",t.CSSStyle.AUTO="auto",t.CSSStyle.AUTO_MARGIN="8",t.CSSStyle.BORDER_TYPE="border-type",t.CSSStyle.FILL_TYPE="fill-type",t.CSSStyle.CONTENT="content",t.CSSStyle.INNER_COLOR="-tr-inner-color",t.CSSStyle.OUTER_COLOR="-tr-outer-color",t.CSSStyle.WHITE_SPACE="white-space",t.CSSStyle._NAMED_FONT_SIZE_MAP={"xx-small":"9","x-small":"10",small:"13",medium:"16",large:"18","x-large":"24","xx-large":"32"},t.CSSStyle._NAMED_WIDTH_MAP={thin:"2",medium:"4",thick:"6"},t.CSSStyle._NAMED_COLOR_MAP={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",white:"#FFFFFF",fuchsia:"#FF00FF",gray:"#848284",lime:"#00FF00",maroon:"#840000",green:"#008200",navy:"#000084",olive:"#848200",red:"#FF0000",silver:"#C6C3C6",teal:"#008284",yellow:"#FFFF00",purple:"#800080",cyan:"#D2B48C",goldenrod:"#DAA520",lightblue:"#ADD8E6",lightyellow:"#FFFFE0",orange:"#FFA500",paleGoldenRod:"#EEE8AA",paleturquoise:"#AFEEEE",peachpuff:"#FFDAB9",pink:"#FFC0CB",tan:"#D2B48C",thistle:"#D8BFD8",transparent:"transparent"},t.CSSStyle._numericAttrsList=[t.CSSStyle.WIDTH,t.CSSStyle.HEIGHT,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle.BORDER_LEFT_WIDTH,t.CSSStyle.BORDER_RIGHT_WIDTH,t.CSSStyle.MARGIN,t.CSSStyle.MARGIN_TOP,t.CSSStyle.MARGIN_BOTTOM,t.CSSStyle.MARGIN_LEFT,t.CSSStyle.MARGIN_RIGHT,t.CSSStyle.PADDING,t.CSSStyle.PADDING_TOP,t.CSSStyle.PADDING_BOTTOM,t.CSSStyle.PADDING_LEFT,t.CSSStyle.PADDING_RIGHT],t.CSSStyle._DOUBLE_QUOTE='"',t.CSSStyle._SINGLE_QUOTE="'",t.CSSStyle.COLORS_SKYROS=["#003366","#CC3300","#666699","#006666","#FF9900","#993366","#99CC33","#624390","#669933","#FFCC33","#006699","#EBEA79"],t.CSSStyle.COLORS_ALTA=["#267db3","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],t.CSSStyle.prototype.Init=function(t){this._styleMap={},this.parseInlineStyle(t)},t.CSSStyle.prototype.parseInlineStyle=function(e){var n=this;t.CSSStyle._parseStyleString(e,function(t,e){n.setStyle(t,e)})},t.CSSStyle.prototype.setStyle=function(e,n){if(null==n)this._setStyleAttr(e,n);else switch(e){case"background-repeat":this._setBackgroundRepeat(e,n);break;case"color":case"background-color":case"border-top-color":case"border-bottom-color":case"border-left-color":case"border-right-color":this._setColorAttr(e,n);break;case"border-top":case"border-bottom":case"border-left":case"border-right":this._setBorderSide(e,n);break;case"border":this._setBorderShorthand(e,n);break;case"border-color":this._setBorderColorShorthand(e,n);break;case"border-width":this._setBorderWidthShorthand(e,n);break;case"border-radius":this._setBorderRadius(e,n);break;case"padding":this._setPaddingShorthand(e,n);break;case"margin":this._setMarginShorthand(e,n);break;case"font-size":this.setFontSize(e,n);break;case"background-image":var i=t.GradientParser.parseCSSGradient(n);i&&(n=i),this._setStyleAttr(e,n);break;case t.GradientParser.IE7_GD_FILTER:case t.GradientParser.IE8_GD_FILTER:var r=t.GradientParser.removeQuotes(n,t.CSSStyle._DOUBLE_QUOTE),i=t.GradientParser.parseCSSGradient(r);i&&(e=t.CSSStyle.BACKGROUND_IMAGE,n=i),this._setStyleAttr(e,n);break;default:this._setStyleAttr(e,n)}return this},t.CSSStyle.prototype.getStyle=function(t){return this._styleMap[t]},t.CSSStyle.prototype._setStyleAttr=function(t,e){return null!=e?this._styleMap[t]=e:delete this._styleMap[t],this},t.CSSStyle.prototype.setFontSize=function(e,n){var i=t.StringUtils.trim(n),r=t.CSSStyle._NAMED_FONT_SIZE_MAP[i];r?this._setStyleAttr(e,String(r)+"px"):this._setStyleAttr(e,isNaN(parseFloat(i))?t.StyleUtils.DEFAULT_FONT_SIZE:i)},t.CSSStyle.prototype._setBorderWidthShorthand=function(e,n){var i=n.split(" "),r=null;switch(i.length){case 1:this._setStyleAttr(e,t.CSSStyle._getBorderWidth(i[0])),this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,null),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,null);break;case 2:r=t.CSSStyle._getBorderWidth(i[0]),this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,r),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,r),r=t.CSSStyle._getBorderWidth(i[1]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,r),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,r);break;case 3:this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle._getBorderWidth(i[0])),r=t.CSSStyle._getBorderWidth(i[1]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,r),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,r),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle._getBorderWidth(i[2]));break;case 4:this._setStyleAttr(t.CSSStyle.BORDER_TOP_WIDTH,t.CSSStyle._getBorderWidth(i[0])),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_WIDTH,t.CSSStyle._getBorderWidth(i[1])),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_WIDTH,t.CSSStyle._getBorderWidth(i[2])),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_WIDTH,t.CSSStyle._getBorderWidth(i[3]));break;case 0:}},t.CSSStyle._getBorderWidth=function(e){var n=t.StringUtils.trim(e),i=t.CSSStyle._NAMED_WIDTH_MAP[n];return i||(i=isNaN(parseFloat(n))?"0px":n),i},t.CSSStyle.prototype._setBorderSide=function(e,n){for(var i,r=n.split(" "),o=null,a=!1,s=0;s<r.length;s++)if(o=r[s],i=e,0==o.indexOf("rgb")){for(var l=s+1;l<r.length&&(o+=r[l],s++,r[l].indexOf(")")==-1);l++);t.StringUtils.endsWith(e,"-"+t.CSSStyle.COLOR)||(i=e+"-"+t.CSSStyle.COLOR),this._setStyleAttr(i,o)}else t.CSSStyle._isColorValue(o)?(t.StringUtils.endsWith(e,"-"+t.CSSStyle.COLOR)||(i=e+"-"+t.CSSStyle.COLOR),this._setStyleAttr(i,t.CSSStyle._parseHexColor(o))):t.CSSStyle._isBorderWidthValue(o)?(t.StringUtils.endsWith(e,"-"+t.CSSStyle.WIDTH)||(i=e+"-"+t.CSSStyle.WIDTH),this._setStyleAttr(i,o)):"none"==n&&(a=!0);a&&this._setStyleAttr(e+"-"+t.CSSStyle.WIDTH,"0")},t.CSSStyle.prototype.getBorderSideWidth=function(e){return this._getSideWidth(e,t.CSSStyle.BORDER_WIDTH)},t.CSSStyle.prototype.getMargin=function(e){return this._getSideWidth(e,t.CSSStyle.MARGIN)},t.CSSStyle.prototype.getPadding=function(e){return this._getSideWidth(e,t.CSSStyle.PADDING)},t.CSSStyle.prototype.getBorderWidth=function(){var e=this.getStyle(t.CSSStyle.BORDER_WIDTH);return e?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_TOP_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_RIGHT_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_BOTTOM_WIDTH))?t.CSSStyle.toNumber(e):(e=this.getStyle(t.CSSStyle.BORDER_LEFT_WIDTH),e?t.CSSStyle.toNumber(e):0)},t.CSSStyle.prototype.getWidth=function(){return this.getStyle(t.CSSStyle.WIDTH)},t.CSSStyle.prototype.getHeight=function(){return this.getStyle(t.CSSStyle.HEIGHT)},t.CSSStyle.toNumber=function(t){return t?(t=parseFloat(t),isNaN(t)?0:t):0},t.CSSStyle.isInheritable=function(e){switch(e){case t.CSSStyle.COLOR:case t.CSSStyle.FONT_FAMILY:case t.CSSStyle.FONT_SIZE:case t.CSSStyle.FONT_STYLE:case t.CSSStyle.FONT_WEIGHT:case t.CSSStyle.TEXT_ALIGN:return!0;default:return!1}},t.CSSStyle.prototype._setBorderColorShorthand=function(e,n){var i,r=t.CSSStyle._parseBorderColorString(e,n);switch(r.length){case 1:this._setStyleAttr(e,r[0]),this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,null),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,null);break;case 2:i=r[0],this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,i),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,i),i=r[1],this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,i),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,i);break;case 3:this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,r[0]),i=r[1],this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,i),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,i),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,r[2]);break;case 4:this._setStyleAttr(t.CSSStyle.BORDER_TOP_COLOR,r[0]),this._setStyleAttr(t.CSSStyle.BORDER_RIGHT_COLOR,r[1]),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_COLOR,r[2]),this._setStyleAttr(t.CSSStyle.BORDER_LEFT_COLOR,r[3]);break;case 0:}},t.CSSStyle.prototype._setPaddingShorthand=function(e,n){var i=n.split(" "),r=null;switch(i.length){case 1:this._setStyleAttr(e,this._getPercent(i[0])),this._setStyleAttr(t.CSSStyle.PADDING_TOP,null),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,null),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,null),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,null);break;case 2:r=this._getPercent(i[0]),this._setStyleAttr(t.CSSStyle.PADDING_TOP,r),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,r),r=this._getPercent(i[1]),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,r),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,r);break;case 3:this._setStyleAttr(t.CSSStyle.PADDING_TOP,this._getPercent(i[0])),r=this._getPercent(i[1]),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,r),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,r),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,this._getPercent(i[2]));break;case 4:this._setStyleAttr(t.CSSStyle.PADDING_TOP,this._getPercent(i[0])),this._setStyleAttr(t.CSSStyle.PADDING_RIGHT,this._getPercent(i[1])),this._setStyleAttr(t.CSSStyle.PADDING_BOTTOM,this._getPercent(i[2])),this._setStyleAttr(t.CSSStyle.PADDING_LEFT,this._getPercent(i[3]));break;case 0:}},t.CSSStyle.prototype._setMarginShorthand=function(e,n){var i=n.split(" "),r=null;switch(i.length){case 1:this._setStyleAttr(e,this._getMargin(i[0])),this._setStyleAttr(t.CSSStyle.MARGIN_TOP,null),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,null),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,null),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,null);break;case 2:r=this._getMargin(i[0]),this._setStyleAttr(t.CSSStyle.MARGIN_TOP,r),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,r),r=this._getMargin(i[1]),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,r),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,r);break;case 3:this._setStyleAttr(t.CSSStyle.MARGIN_TOP,this._getMargin(i[0])),r=this._getMargin(i[1]),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,r),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,r),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,this._getMargin(i[2]));break;case 4:this._setStyleAttr(t.CSSStyle.MARGIN_TOP,this._getMargin(i[0])),this._setStyleAttr(t.CSSStyle.MARGIN_RIGHT,this._getMargin(i[1])),this._setStyleAttr(t.CSSStyle.MARGIN_BOTTOM,this._getMargin(i[2])),this._setStyleAttr(t.CSSStyle.MARGIN_LEFT,this._getMargin(i[3]));break;case 0:}},t.CSSStyle.prototype._getMargin=function(e){var n=t.StringUtils.trim(e);return t.CSSStyle.AUTO==n?t.CSSStyle.AUTO_MARGIN:this._getPercent(n)},t.CSSStyle.prototype._getPercent=function(e){return t.StringUtils.trim(e)},t.CSSStyle.prototype._setBorderShorthand=function(e,n){for(var i=n.split(" "),r=null,o=!1,a=0;a<i.length;a++)if(r=i[a],0==r.indexOf("rgb")){for(var s=a+1;s<i.length&&(r+=i[s],a++,i[s].indexOf(")")==-1);s++);this._setBorderColorShorthand(t.CSSStyle.BORDER_COLOR,r)}else t.CSSStyle._isColorValue(r)?this._setBorderColorShorthand(t.CSSStyle.BORDER_COLOR,r):t.CSSStyle._isBorderWidthValue(r)?this._setBorderWidthShorthand(t.CSSStyle.BORDER_WIDTH,r):"none"==n&&(o=!0);o&&this._setBorderWidthShorthand(t.CSSStyle.BORDER_WIDTH,"0")},t.CSSStyle._getBorderRadius=function(e){var n=t.StringUtils.trim(e);return isNaN(parseFloat(n))?"0px":n},t.CSSStyle.prototype._setBorderRadius=function(e,n){var i=n.split("/");if(null==i[0])return void this._setStyleAttr(e,"0px");var r=t.StringUtils.trim(i[0]).split(" ");switch(r.length){case 1:default:this._setStyleAttr(e,t.CSSStyle._getBorderRadius(r[0])),this._setStyleAttr(t.CSSStyle.BORDER_TOP_LEFT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_TOP_RIGHT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS,null),this._setStyleAttr(t.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS,null)}if(2==i.length&&null!=i[1]){var o=t.StringUtils.trim(i[1]).split(" ");switch(o.length){case 1:this.getStyle(e)?this._setStyleAttr(e,this.getStyle(e)+" "+t.CSSStyle._getBorderRadius(o[0])):this._setStyleAttr(e,t.CSSStyle._getBorderRadius(o[0]));break;case 0:}}},t.CSSStyle.prototype.getBorderRadius=function(){return"undefined"!==this.getStyle(t.CSSStyle.BORDER_RADIUS)&&null!==this.getStyle(t.CSSStyle.BORDER_RADIUS)?t.CSSStyle.toNumber(this.getStyle(t.CSSStyle.BORDER_RADIUS)):0},t.CSSStyle.prototype._setBackgroundRepeat=function(e,n){var i=n.split(" ");2==i.length&&(i[0]==i[1]?n=i[0]:i[0]==t.CSSStyle.REPEAT&&i[1]==t.CSSStyle.NO_REPEAT&&(n=t.CSSStyle.REPEAT_X),i[0]==t.CSSStyle.NO_REPEAT&&i[1]==t.CSSStyle.REPEAT&&(n=t.CSSStyle.REPEAT_Y)),this._setStyleAttr(e,n)},t.CSSStyle.prototype._setColorAttr=function(e,n){var i=t.CSSStyle._toColorVal(n);i?this._setStyleAttr(e,i):t.CSSStyle._isColorValue(n)&&this._setStyleAttr(e,n)},t.CSSStyle._toColorVal=function(e){e=t.StringUtils.trim(e);var n=t.CSSStyle._NAMED_COLOR_MAP[e.toLowerCase()];return n?n:null},t.CSSStyle.prototype.setColor=function(t,e){this._setStyleAttr(t,e)},t.CSSStyle._isValueInEM=function(t){return t.toLowerCase().indexOf("em")>=0},t.CSSStyle.prototype._resolveEMx=function(e,n){var i=this.getStyle(e);return!i||!t.CSSStyle._isValueInEM(i)||!!n&&(this._setStyleAttr(e,String(Math.round(parseFloat(i)*parseFloat(n)))+"px"),!0)},t.CSSStyle.prototype.getAbsoluteFontSize=function(){var e=this.getFontSize();return e&&!t.CSSStyle._isValueInEM(e)?e:null},t.CSSStyle.prototype.resolveEM=function(e){var n=this.getFontSize();n&&(t.CSSStyle._isValueInEM(n)?this._resolveEMx(t.CSSStyle.FONT_SIZE,e):e=n);for(var i=t.CSSStyle._numericAttrsList,r=0;r<i.length;r++)if(!this._resolveEMx(i[r],e))return!1;return!0},t.CSSStyle.prototype.clone=function(){var e=new t.CSSStyle;for(var n in this._styleMap)e._setStyleAttr(n,this.getStyle(n));return e},t.CSSStyle.prototype.merge=function(t){if(t)for(var e in t._styleMap)this._setStyleAttr(e,t.getStyle(e));return this},t.CSSStyle.prototype.mergeUnder=function(t){if(t)for(var e in t._styleMap)this.getStyle(e)||this._setStyleAttr(e,t.getStyle(e));return this},t.CSSStyle.prototype.toString=function(){var t="";for(var e in this._styleMap)t+=e+":"+this.getStyle(e)+"; ";return t},t.CSSStyle.prototype.getBackgroundImage=function(){var e,n,i=this.getStyle(t.CSSStyle.BACKGROUND_IMAGE);return i&&i instanceof t.CSSGradient?i:(i&&(e=i.indexOf("url("),n=i.lastIndexOf(")"),0==e&&n==i.length-1&&(i=i.substring(4,n))),i&&(e=i.indexOf(t.CSSStyle._SINGLE_QUOTE),n=i.lastIndexOf(t.CSSStyle._SINGLE_QUOTE),0==e&&n==i.length-1?i=i.substring(1,n):(e=i.indexOf(t.CSSStyle._DOUBLE_QUOTE),n=i.lastIndexOf(t.CSSStyle._DOUBLE_QUOTE),0==e&&n==i.length-1&&(i=i.substring(1,n)))),i)},t.CSSStyle._isColorValue=function(e){if(e=t.StringUtils.trim(e),0==e.indexOf("rgb")||0==e.indexOf("#"))return!0;var n=t.CSSStyle._NAMED_COLOR_MAP[e.toLowerCase()];return!!n},t.CSSStyle._isBorderWidthValue=function(e){var n=t.StringUtils.trim(e);return!!t.CSSStyle._NAMED_WIDTH_MAP[n]||!isNaN(parseFloat(n))},t.CSSStyle._parseBorderColorString=function(e,n){for(var n=t.StringUtils.trim(n),i=[];null!=n&&n.length>0;)n=t.CSSStyle.parseBorderColor(n,i);return i},t.CSSStyle.parseBorderColor=function(e,n){e=t.StringUtils.trim(e);var i,r=e.length,o=-1;if(!e)return e;if(0==e.indexOf("rgb"))o=e.indexOf(")")+1,i=e.slice(0,o);else{o=e.indexOf(" "),o==-1&&(o=r);var a=e.slice(0,o);i=t.CSSStyle._toColorVal(a),i||(i=t.CSSStyle._parseHexColor(a))}return i&&(n.push(i),e=e.slice(o)),e},t.CSSStyle._parseHexColor=function(t){var e,n;if(t&&t.length>0){var i=t.length>7;if(e=Number("0x"+t.substring(1)),isNaN(e)&&(e=0),i){var r="#"+t.substring(3);n=r}else n=t}return n},t.CSSStyle.prototype._getSideWidth=function(e,n){var i=this.getStyle(e);return i||(i=this.getStyle(n)),t.CSSStyle.toNumber(i)},t.CSSStyle.prototype.getFontSize=function(){return this.getStyle(t.CSSStyle.FONT_SIZE)},t.CSSStyle.mergeStyles=function(e){var n=new t.CSSStyle;if(e)for(var i=0;i<e.length;i++)n.merge(e[i]);return n},t.CSSStyle.prototype.isEmpty=function(){for(var t in this._styleMap)return!1;return!0},t.CSSStyle.prototype.isTextAlignEnd=function(e){var n=this.getStyle(t.CSSStyle.TEXT_ALIGN);return"end"==n||(t.Agent.isRightToLeft(e)?"left"==n:"right"==n)},t.CSSStyle.prototype.parseBackgroundPosition=function(){var e=this.getStyle(t.CSSStyle.BACKGROUND_POSITION);if(!e)return null;var n=e.split(" ");if(0==n.length)return["0%","0%"];var i,r=["50%","50%"];return n.length>0&&(i=t.StringUtils.trim(n[0]),"left"==i?r[0]="0%":"right"==i?r[0]="100%":"top"==i?r[1]="0%":"bottom"==i?r[1]="100%":"center"!=i&&(r[0]=i)),n.length>1&&(i=t.StringUtils.trim(n[1]),"left"==i?r[0]="0%":"right"==i?r[0]="100%":"top"==i?r[1]="0%":"bottom"==i?r[1]="100%":"center"!=i&&(r[1]=i)),r},t.CSSStyle.prototype.getIconUrl=function(){return this.getStyle(t.CSSStyle.CONTENT)},t.CSSStyle.prototype.setIconUrl=function(e){this._setStyleAttr(t.CSSStyle.CONTENT,e);
},t.CSSStyle.prototype.hashCodeForTextMeasurement=function(){for(var e="",n=t.CSSStyle.getTextMeasurementProperties(),i=0;i<n.length;i++)this.getStyle(n[i])&&(e+=this.getStyle(n[i]));return e},t.CSSStyle.getTextMeasurementProperties=function(){return[t.CSSStyle.FONT_FAMILY,t.CSSStyle.FONT_SIZE,t.CSSStyle.FONT_STYLE,t.CSSStyle.FONT_WEIGHT]},t.CSSStyle.afterSkinAlta=function(e){return null!=e&&e!=t.CSSStyle.SKIN_FUSION&&e!=t.CSSStyle.SKIN_SKYROS},t.CSSStyle.cssObjectToString=function(t){var e="";return t&&JSON.parse(JSON.stringify(t),function(t,n){t&&(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e+=t+":"+n+";")}),e},t.CSSStyle.cssStringToObject=function(e){var n={};return t.CSSStyle._parseStyleString(e,function(e,i){e=t.CSSStyle.cssStringToObjectProperty(e),n[e]=i}),n},t.CSSStyle.cssStringToObjectProperty=function(t){return t&&(t=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})),t},t.CSSStyle._parseStyleString=function(e,n){if(e&&e.length>0)for(var i=e.split(";"),r=0;r<i.length;r++){var o=i[r];if(o&&o.length>0){var a=o.indexOf(":");if(a>-1){var s=t.StringUtils.trim(o.substring(0,a)),l=t.StringUtils.trim(o.substring(a+1));s&&s.length>0&&l&&l.length>0&&(s==t.CSSStyle.BACKGROUND_IMAGE&&l.indexOf("data:image/")>=0&&(l=l+";"+i[r+1],r++),n(s,l))}}}},t.BaseComponent=function(){},t.Obj.createSubclass(t.BaseComponent,t.Container),t.BaseComponent.prototype.Init=function(e,n,i){t.BaseComponent.superclass.Init.call(this,e),this._callback=n,this._callbackObj=i,this.Defaults=null,this.Options=null,this.Width=0,this.Height=0,this.EventManager=null,this.Animation=null,this.AnimationStopped=!1,this._optionsCache=new t.BaseComponentCache,this._cache=new t.BaseComponentCache},t.BaseComponent.prototype.GetDefaults=function(t){return this.Defaults?this.Defaults.getDefaults(t):{}},t.BaseComponent.prototype.GetComponentDescription=function(){return t.Bundle.getTranslation(this.getOptions(),"componentName")},t.BaseComponent.prototype.IsParentRoot=function(){return this.getParent()==this.getCtx().getStage()},t.BaseComponent.prototype.UpdateAriaAttributes=function(){this.IsParentRoot()&&(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.StringUtils.processAriaLabel(this.GetComponentDescription())])))},t.BaseComponent.prototype.SetOptions=function(t){},t.BaseComponent.prototype.getOptions=function(){return this.Options||(this.Options=this.GetDefaults()),this.Options},t.BaseComponent.prototype.applyOptions=function(e){this.Options&&e&&this.SetOptions(t.JsonUtils.merge(e,this.Options))},t.BaseComponent.prototype.render=function(t,e,n){},t.BaseComponent.prototype.RenderComplete=function(){this.Animation=null,this.AnimationStopped=!1,this.dispatchEvent(t.EventFactory.newReadyEvent())},t.BaseComponent.prototype.getWidth=function(){return this.Width},t.BaseComponent.prototype.getHeight=function(){return this.Height},t.BaseComponent.prototype.highlight=function(t){},t.BaseComponent.prototype.select=function(t){},t.BaseComponent.prototype.dispatchEvent=function(e){t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)},t.BaseComponent.prototype.getDimensionsWithStroke=function(t){return this.getDimensions(t)},t.BaseComponent.prototype.getEventManager=function(){return this.EventManager},t.BaseComponent.prototype.getKeyboardFocus=function(){var t=this.getEventManager();return t&&t.getFocus()?t.getFocus().getTargetElem():null},t.BaseComponent.prototype.getCache=function(){return this._cache},t.BaseComponent.prototype.getOptionsCache=function(){return this._optionsCache},t.BaseComponent.prototype.StopAnimation=function(t){this.Animation&&(this.AnimationStopped=!0,this.Animation.stop(t||!1),this.Animation=null)},t.BaseComponent.prototype.destroy=function(){this.StopAnimation(),this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),t.BaseComponent.superclass.destroy.call(this)},t.BaseComponentDefaults=function(){this.Init()},t.Obj.createSubclass(t.BaseComponentDefaults,t.Obj),t.BaseComponentDefaults.FONT_SIZE="font-size: ",t.BaseComponentDefaults.FONT_SIZE_11=t.BaseComponentDefaults.FONT_SIZE+"11px;",t.BaseComponentDefaults.FONT_SIZE_12=t.BaseComponentDefaults.FONT_SIZE+"12px;",t.BaseComponentDefaults.FONT_SIZE_13=t.BaseComponentDefaults.FONT_SIZE+"13px;",t.BaseComponentDefaults.FONT_SIZE_14=t.BaseComponentDefaults.FONT_SIZE+"14px;",t.BaseComponentDefaults.FONT_WEIGHT_BOLD="font-weight: bold;",t.BaseComponentDefaults.FONT_FAMILY_SKYROS="font-family: tahoma, sans-serif;",t.BaseComponentDefaults.FONT_FAMILY_ALTA="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;",t.BaseComponentDefaults.FONT_FAMILY_ALTA_11=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_11,t.BaseComponentDefaults.FONT_FAMILY_ALTA_12=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_12,t.BaseComponentDefaults.FONT_FAMILY_ALTA_13=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_13,t.BaseComponentDefaults.FONT_FAMILY_ALTA_14=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_SIZE_14,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD=t.BaseComponentDefaults.FONT_FAMILY_ALTA+t.BaseComponentDefaults.FONT_WEIGHT_BOLD,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_11=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_11,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_12,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_13=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_13,t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_14=t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+t.BaseComponentDefaults.FONT_SIZE_14,t.BaseComponentDefaults._SKINS=[t.CSSStyle.SKIN_FUSION,t.CSSStyle.SKIN_SKYROS,t.CSSStyle.SKIN_ALTA,t.CSSStyle.SKIN_NEXT],t.BaseComponentDefaults.prototype.Init=function(t){this._defaults=t?t:{},this.constructor.defaultsCache||(this.constructor.defaultsCache={})},t.BaseComponentDefaults.prototype.getBaseSkinName=function(){return t.CSSStyle.SKIN_NEXT},t.BaseComponentDefaults.prototype.calcOptions=function(e){var n=e?e.skin:null,i=this.getDefaults(n);return e?t.JsonUtils.merge(e,i,this.getNoCloneObject()):i},t.BaseComponentDefaults.prototype.getDefaults=function(e){if(e||(e=this.getBaseSkinName()),this.constructor.defaultsCache[e])return t.JsonUtils.clone(this.constructor.defaultsCache[e]);for(var n=Math.max(t.ArrayUtils.getIndex(t.BaseComponentDefaults._SKINS,e),0),i=t.JsonUtils.clone(this._defaults[t.BaseComponentDefaults._SKINS[0]]),r=1;r<=n;r++)i=t.JsonUtils.merge(this._defaults[t.BaseComponentDefaults._SKINS[r]],i);return this.constructor.defaultsCache[e]=t.JsonUtils.clone(i),i},t.BaseComponentDefaults.prototype.getNoCloneObject=function(){return{}},t.BaseComponentCache=function(){this.Init()},t.BaseComponentCache.prototype.Init=function(){this.Cache={}},t.BaseComponentCache.prototype.clearCache=function(){this.Cache={}},t.BaseComponentCache.prototype.getFromCache=function(t){return this.Cache[t]},t.BaseComponentCache.prototype.putToCache=function(t,e){this.Cache[t]=e},t.BaseComponentCache.prototype.getFromCachedMap=function(t,e){return this._getCachedMap(t)[e]},t.BaseComponentCache.prototype._getCachedMap=function(t){var e=this.getFromCache(t);return e||(e={},this.putToCache(t,e)),e},t.BaseComponentCache.prototype.putToCachedMap=function(t,e,n){this._getCachedMap(t)[e]=n},t.BaseComponentCache.prototype.getFromCachedMap2D=function(t,e,n){var i=this._getCachedMap2D(t);return i.get(e,n)},t.BaseComponentCache.prototype._getCachedMap2D=function(e){var n=this.getFromCache(e);return n||(n=new t.Map2D,this.putToCache(e,n)),n},t.BaseComponentCache.prototype.putToCachedMap2D=function(t,e,n,i){var r=this._getCachedMap2D(t);r.put(e,n,i)},t.ShowPopupBehavior=function(t,e,n,i){this._popupId=t,this._triggerType=e,this._alignId=n,this._align=i},t.Obj.createSubclass(t.ShowPopupBehavior,t.Obj),t.ShowPopupBehavior.TRIGGER_TYPE_ACTION="action",t.ShowPopupBehavior.TRIGGER_TYPE_CLICK="click",t.ShowPopupBehavior.TRIGGER_TYPE_CONTEXT_MENU="contextMenu",t.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK="dblClick",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER="mouseHover",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER="mouseOver",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN="mouseDown",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE="mouseMove",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP="mouseUp",t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT="mouseOut",t.ShowPopupBehavior.TRIGGER_TYPE_KEY_DOWN="keyDown",t.ShowPopupBehavior.TRIGGER_TYPE_KEY_UP="keyUp",t.ShowPopupBehavior.TRIGGER_TYPE_KEY_PRESS="keyPress",t.ShowPopupBehavior.TRIGGER_TYPE_FOCUS="focus",t.ShowPopupBehavior.TRIGGER_TYPE_BLUR="blur",t.ShowPopupBehavior.ALIGN_AFTER_START="afterStart",t.ShowPopupBehavior.ALIGN_AFTER_END="afterEnd",t.ShowPopupBehavior.ALIGN_BEFORE_START="beforeStart",t.ShowPopupBehavior.ALIGN_BEFORE_END="beforeEnd",t.ShowPopupBehavior.ALIGN_END_AFTER="endAfter",t.ShowPopupBehavior.ALIGN_END_BEFORE="endBefore",t.ShowPopupBehavior.ALIGN_START_AFTER="startAfter",t.ShowPopupBehavior.ALIGN_START_BEFORE="startBefore",t.ShowPopupBehavior.ALIGN_OVERLAP="overlap",t.ShowPopupBehavior.createBehaviors=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i];n.push(t.ShowPopupBehavior.newInstance(r))}return n},t.ShowPopupBehavior.newInstance=function(e){return new t.ShowPopupBehavior(e.popupId,e.triggerType,e.alignId,e.align)},t.ShowPopupBehavior.prototype.getPopupId=function(){return this._popupId},t.ShowPopupBehavior.prototype.getTriggerType=function(){return this._triggerType},t.ShowPopupBehavior.prototype.getAlignId=function(){return this._alignId},t.ShowPopupBehavior.prototype.getAlign=function(){return this._align},t.ClientBehavior=function(t,e){this._type=t,this._triggerType=e,this._props={}},t.Obj.createSubclass(t.ClientBehavior,t.Obj),t.ClientBehavior.TRIGGER_TYPE_ACTION="action",t.ClientBehavior.TRIGGER_TYPE_CLICK="click",t.ClientBehavior.TYPE_ROW_DISCLOSURE="DvtRowDisclosureBehavior",t.ClientBehavior.TYPE_DRILL="DvtDrillBehavior",t.ClientBehavior.TYPE_ISOLATE_LEVELS="DvtIsolateLevelsBehavior",t.ClientBehavior.TYPE_RESTORE="DvtRestoreBehavior",t.ClientBehavior.prototype.getType=function(){return this._type},t.ClientBehavior.prototype.getTriggerType=function(){return this._triggerType},t.ClientBehavior.prototype.setProperty=function(t,e){this._props[t]=e},t.ClientBehavior.prototype.getProperty=function(t){return this._props[t]},t.ClientBehavior.prototype.getProperties=function(){return this._props},t.SimpleScrollbar=function(e,n,i,r){t.SimpleScrollbar.superclass.Init.call(this,e),this._callback=n,this._callbackObj=i,this._dragTarget=r},t.Obj.createSubclass(t.SimpleScrollbar,t.Container),t.SimpleScrollbar.prototype.render=function(e,n,i){this._width=n,this._height=i,this._globalMin=e.min,this._globalMax=e.max,this._isHoriz=e.isHorizontal,this._isReversed=e.isReversed;var r=new t.Rect(this.getCtx(),0,0,n,i);r.setSolidFill(e.backgroundColor),r.setPixelHinting(!0),this.addChild(r),this._thumb=new t.Rect(this.getCtx(),0,0,n,i),this._thumb.setSolidFill(e.color),this._thumb.setPixelHinting(!0),this.addChild(this._thumb),this._thumbMin=this._globalMin,this._thumbMax=this._globalMax;var o=t.Agent.isTouchDevice()?8:4,a=new t.Rect(this.getCtx(),(-o),(-o),this._width+2*o,this._height+2*o);a.setInvisibleFill(),this.addChild(a);var s=null!=this._dragTarget;t.SvgDocumentUtils.addDragListeners(s?this._dragTarget:this,this._onDragStart,this._onDragMove,this._onDragEnd,this,!s),t.Agent.isTouchDevice()||s||this.addEvtListener(t.MouseEvent.CLICK,this._onClick,!1,this),this._dragged=!1},t.SimpleScrollbar.prototype.setViewportRange=function(t,e,n,i){null!=n&&(this._globalMin=n),null!=i&&(this._globalMax=i);var r=this._getCoord(t),o=this._getCoord(e);this._isHoriz?(this._thumb.setX(Math.min(r,o)),this._thumb.setWidth(Math.abs(o-r))):(this._thumb.setY(Math.min(r,o)),this._thumb.setHeight(Math.abs(o-r))),this._thumbMin=t,this._thumbMax=e},t.SimpleScrollbar.prototype._getCoord=function(t){var e=(t-this._globalMin)/(this._globalMax-this._globalMin);return this._isReversed&&(e=1-e),this._isHoriz?e*this._width:e*this._height},t.SimpleScrollbar.prototype._getValue=function(t,e){var n=this.stageToLocal(this.getCtx().pageToStageCoords(t,e)),i=this._isHoriz?n.x/this._width:n.y/this._height;return this._isReversed&&(i=1-i),i=Math.min(Math.max(i,0),1),this._globalMin+i*(this._globalMax-this._globalMin)},t.SimpleScrollbar.prototype._onClick=function(e){var n=this._getValue(e.pageX,e.pageY);if(!(n>=this._thumbMin&&n<=this._thumbMax)){var i=this._thumbMax-this._thumbMin;this._setViewportRange(n-i/2,n+i/2,t.SimpleScrollbarEvent.SUBTYPE_END)}},t.SimpleScrollbar.prototype._onDragStart=function(t){var e;if(t.touches){if(1!=t.touches.length)return!1;e=this._getValue(t.touches[0].pageX,t.touches[0].pageY)}else e=this._getValue(t.pageX,t.pageY);return!!(this._dragTarget||e>=this._thumbMin&&e<=this._thumbMax)&&(this._dragged=!0,this._prevVal=e,!0)},t.SimpleScrollbar.prototype._onDragMove=function(e){if(this._dragged){var n;if(e.touches){if(1!=e.touches.length)return;n=this._getValue(e.touches[0].pageX,e.touches[0].pageY)}else n=this._getValue(e.pageX,e.pageY);var i=n-this._prevVal;this._dragTarget&&(i*=-1),this._setViewportRange(this._thumbMin+i,this._thumbMax+i,t.SimpleScrollbarEvent.SUBTYPE_MOVE),this._prevVal=n,e.preventDefault()}},t.SimpleScrollbar.prototype._onDragEnd=function(e){if(this._dragged){if(e.touches)this._setViewportRange(this._thumbMin,this._thumbMax,t.SimpleScrollbarEvent.SUBTYPE_END);else{var n=this._getValue(e.pageX,e.pageY),i=n-this._prevVal;this._setViewportRange(this._thumbMin+i,this._thumbMax+i,t.SimpleScrollbarEvent.SUBTYPE_END)}this._dragged=!1}},t.SimpleScrollbar.prototype._setViewportRange=function(e,n,i){var r=n-e;if(e<this._globalMin&&(e=this._globalMin,n=this._globalMin+r),n>this._globalMax&&(n=this._globalMax,e=this._globalMax-r),this.setViewportRange(e,n),this._callback){var o=new t.SimpleScrollbarEvent(i,e,n);this._callback.call(this._callbackObj,o,this)}},t.SimpleScrollableContainer=function(e,n,i,r){t.SimpleScrollableContainer.superclass.Init.call(this,e),this._contentSize=r?n:i,this._width=n,this._height=i,this._background=new t.Rect(e,0,0,n,i),this._background.setInvisibleFill(),this.addChild(this._background),this._container=new t.Container(e),this.addChild(this._container),this._isHorizontalScrolling=r,this._isScrollbarVisible=!1,t.Agent.isTouchDevice()||this.addEvtListener(t.MouseEvent.MOUSEWHEEL,this._onMouseWheel,!1,this)},t.Obj.createSubclass(t.SimpleScrollableContainer,t.Container),t.SimpleScrollableContainer._SCROLLBAR_WIDTH=3,t.SimpleScrollableContainer._SCROLLBAR_GAP=2,t.SimpleScrollableContainer.prototype.getScrollingPane=function(){return this._container},t.SimpleScrollableContainer.prototype.prepareContentPane=function(){var e=this._container.getDimensions();if(this._isHorizontalScrolling?this._contentSize=e.w+e.x:this._contentSize=e.h+e.y,this.hasScrollingContent()){if(this._isHorizontalScrolling?this._contentSize+=e.x:this._contentSize+=e.y,!this._maskContainer){var n=new t.Rectangle(0,0,this._width,this._height);this._fadeTop=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?0:270,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),n),this._fadeBottom=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),n),this._fadeTopBottom=new t.Mask(new t.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[0,1,1,0],[0,.1,.9,1]),n),this._maskContainer=new t.Container(this.getCtx()),this.addChild(this._maskContainer);var i=new t.ClipPath;i.addRect(0,0,this._width,this._height),this._container.setClipPath(i),this._maskContainer.addChild(this._container),this._scrollbar=new t.SimpleScrollbar(this.getCtx(),this._handleScrollbar,this,this),this._scrollbarTimer=new t.Timer(this.getCtx(),100,this._hideScrollbar,this)}this._maskContainer.setMask(this._fadeBottom);var r={color:"#9E9E9E",backgroundColor:"#F0F0F0",isHorizontal:this._isHorizontalScrolling,isReversed:!1,min:0,max:this._contentSize};this._isHorizontalScrolling?(this._scrollbar.render(r,this._getScrollbarWidth(),t.SimpleScrollableContainer._SCROLLBAR_WIDTH),this._scrollbar.setTranslate(t.SimpleScrollableContainer._SCROLLBAR_GAP,this._height-(t.SimpleScrollableContainer._SCROLLBAR_WIDTH+t.SimpleScrollableContainer._SCROLLBAR_GAP))):(this._scrollbar.render(r,t.SimpleScrollableContainer._SCROLLBAR_WIDTH,this._getScrollbarWidth()),this._scrollbar.setTranslate(t.Agent.isRightToLeft(this.getCtx())?t.SimpleScrollableContainer._SCROLLBAR_GAP:this._width-(t.SimpleScrollableContainer._SCROLLBAR_WIDTH+t.SimpleScrollableContainer._SCROLLBAR_GAP),t.SimpleScrollableContainer._SCROLLBAR_GAP)),this._scrollbar.setViewportRange(0,this._getAvailSize()),t.Agent.isEnvironmentTest()||this._scrollbar.setAlpha(0),this.addChild(this._scrollbar)}else this.addChild(this._container),this.removeChild(this._maskContainer),this.removeChild(this._scrollbar)},t.SimpleScrollableContainer.prototype._getScrollbarWidth=function(){return(this._isHorizontalScrolling?this._width:this._height)-2*t.SimpleScrollableContainer._SCROLLBAR_GAP},t.SimpleScrollableContainer.prototype._getAvailSize=function(){return this._isHorizontalScrolling?this._width:this._height},t.SimpleScrollableContainer.prototype._hideScrollbar=function(e){this._isScrollbarVisible&&(this._isScrollbarVisible=!1,this._scrollbarTimer.reset(),this._fadeOutAnim=new t.AnimFadeOut(this.getCtx(),this._scrollbar,.2),this._fadeOutAnim.play())},t.SimpleScrollableContainer.prototype._showScrollbar=function(t){this._isScrollbarVisible?(this._scrollbarTimer.reset(),this._scrollbarTimer.start()):(this._fadeOutAnim&&(this._fadeOutAnim.stop(!0),this._fadeOutAnim=null),this._scrollbar.setAlpha(1),this._isScrollbarVisible=!0,this._scrollbarTimer.start())},t.SimpleScrollableContainer.prototype._updateFade=function(t){0==t?this._maskContainer.setMask(this._fadeBottom):t+this._getAvailSize()>=this._contentSize?this._maskContainer.setMask(this._fadeTop):this._maskContainer.setMask(this._fadeTopBottom)},t.SimpleScrollableContainer.prototype._onMouseWheel=function(e){if(this.hasScrollingContent()){this._showScrollbar();var n=null!=e.wheelDelta?e.wheelDelta:0;t.Agent.isPlatformGecko()&&(n*=-1);var i=-1*(this._isHorizontalScrolling?this._container.getTranslateX():this._container.getTranslateY())-4*n,r=0,o=Math.max(this._contentSize-this._getAvailSize(),0),a=Math.max(Math.min(i,o),r);this._isHorizontalScrolling?(this._container.setTranslateX(a*-1),this._scrollbar.setViewportRange(a+this._width,a)):(this._container.setTranslateY(a*-1),this._scrollbar.setViewportRange(a,a+this._height)),this._updateFade(a),e.preventDefault()}},t.SimpleScrollableContainer.prototype._handleScrollbar=function(t){this._showScrollbar(),this._isHorizontalScrolling?this._container.setTranslateX(t.getNewMin()*-1):this._container.setTranslateY(t.getNewMin()*-1),this._updateFade(t.getNewMin())},t.SimpleScrollableContainer.prototype.getWidth=function(){return this._width},t.SimpleScrollableContainer.prototype.getHeight=function(){return this._height},t.SimpleScrollableContainer.prototype.scrollIntoView=function(t){if(this.hasScrollingContent()){var e,n=t.getDimensions(t.getParent()),i=this._container.getDimensions();if(this._isHorizontalScrolling){var r=-1*this._container.getTranslateX(),o=n.x-i.x,a=n.x+n.w-this._width+i.x;r<a?(this._container.setTranslateX(-1*a),this._scrollbar.setViewportRange(a+this._width,a),e=a):r>o&&(this._container.setTranslateX(-1*o),this._scrollbar.setViewportRange(o+this._width,o),e=o)}else{var s=-1*this._container.getTranslateY(),l=n.y-i.y,u=n.y+n.h-this._height+i.y;s<u?(this._container.setTranslateY(-1*u),this._scrollbar.setViewportRange(u,u+this._height),e=u):s>l&&(this._container.setTranslateY(-1*l),this._scrollbar.setViewportRange(l,l+this._height),e=l)}void 0!=e&&this._updateFade(e)}},t.SimpleScrollableContainer.prototype.hasScrollingContent=function(){return this._contentSize>this._getAvailSize()},t.DragRecognizer=function(){},t.Obj.createSubclass(t.DragRecognizer,t.Obj),t.DragRecognizer.prototype.prepDrag=function(){},t.DragRecognizer.prototype.abortPrep=function(){},t.DragRecognizer.prototype.recognizeDrag=function(){return!0},t.DragSource=function(t){this.Init(t)},t.Obj.createSubclass(t.DragSource,t.Obj),t.DragSource.DRAG_FEEDBACK_MARGIN=2,t.DragSource.prototype.Init=function(t){this._context=t,this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},t.DragSource.prototype.getDragCandidate=function(){return this._dragCandidate},t.DragSource.prototype.setDragCandidate=function(t){t&&t.isDragAvailable&&t.getDragTransferable?this._dragCandidate=t:this._dragCandidate=null},t.DragSource.prototype.isDragAvailable=function(t){return null!=this._dragCandidate?this._dragCandidate.isDragAvailable(t):null},t.DragSource.prototype.getDragTransferable=function(t,e){return this._dragCandidate?(this._dragObj=this._dragCandidate,this._dragCoords={x:t,y:e},this._dragCandidate.getDragTransferable(t,e)):null},t.DragSource.prototype.getDragOverFeedback=function(t,e){this._context.getTooltipManager().hideTooltip();var n=this.getDragObject();return n&&n.getDragFeedback?n.getDragFeedback(t,e):null},t.DragSource.prototype.getDragContext=function(t,e){return this._dragObj&&this._dragObj.getDragContext?this._dragObj.getDragContext(t,e):null},t.DragSource.prototype.getDragObject=function(){return this._dragObj},t.DragSource.prototype.getDragCoords=function(){return this._dragCoords},t.DragSource.prototype.getDragOffset=function(e,n){var i=null,r=this.getDragOverFeedback(e,n);if(r){var o=t.DragAndDropUtils.getDragFeedbackBounds(r,this._context.getStage()),a=this.getDragObject();a&&a.afterDragOverFeedback&&a.afterDragOverFeedback(r),o&&(i={},i.x=e-o.x,i.y=n-o.y,i.x+=t.DragSource.DRAG_FEEDBACK_MARGIN,i.y+=t.DragSource.DRAG_FEEDBACK_MARGIN)}return i},t.DragSource.prototype.getPointerOffset=function(t,e){return{x:0,y:0}},t.DragSource.prototype.initiateDrag=function(){var e=this.getTouchManager();t.Agent.isTouchDevice()&&e&&e.cancelTouchHold()},t.DragSource.prototype.dragDropEnd=function(){this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},t.DragSource.prototype.setTouchManager=function(t){this._touchManager=t},t.DragSource.prototype.getTouchManager=function(){return this._touchManager},t.DropTarget=function(){},t.Obj.createSubclass(t.DropTarget,t.Obj),t.DropTarget.prototype.acceptDrag=function(t,e,n,i){return null},t.DropTarget.prototype.dragEnter=function(){},t.DropTarget.prototype.dragExit=function(){},t.DropTarget.prototype.getDropSite=function(t,e){return null},t.Button=function(t,e,n,i,r,o,a,s){this.Init(t,e,n,i,r,o,a,s)},t.Obj.createSubclass(t.Button,t.Container),t.Button.STATE_ENABLED=0,t.Button.STATE_OVER=1,t.Button.STATE_DOWN=2,t.Button.STATE_DISABLED=3,t.Button.NO_EVENT_LISTENERS=!0,t.Button.prototype.Init=function(e,n,i,r,o,a,s,l){t.Button.superclass.Init.call(this,e,null,a),this.setCallback(s,l),this._bDuringInit=!0,this.setUpState(n),this.setOverState(i),this.setDownState(r),o&&this.setDisabledState(o),this.setEnabled(!0),this.drawUpState(),this._tooltip=null,this._bToggleEnabled=!1,this._bToggled=!1,this._bDuringInit=!1},t.Button.prototype.isEnabled=function(){return this._enabled},t.Button.prototype.setEnabled=function(e){if(this._enabled!=e){this._enabled=e;var n=t.Agent.isTouchDevice()?t.TouchEvent.TOUCHSTART:t.MouseEvent.CLICK;e?(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.addEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.addEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.addEvtListener(n,this.OnClick,!1,this),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.removeEvtListener(n,this.OnClick,!1,this),this.setCursor(null)),this.initState()}},t.Button.prototype.OnMouseOver=function(t){this._bToggled?this.drawOverDownState():this.drawOverState()},t.Button.prototype.OnMouseOut=function(t){this._bToggled?this.drawDownState():this.drawUpState()},t.Button.prototype.OnMouseDown=function(t){this.drawDownState()},t.Button.prototype.OnMouseUp=function(e){this._bToggled?t.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():t.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()},t.Button.prototype.OnClick=function(e){this._bToggleEnabled&&(this._bToggled=!this._bToggled,this._bToggled?t.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():t.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()),this._callback&&(this._callback.call(this._callbackObj,e,this),e.stopPropagation(),e.preventDefault())},t.Button.prototype.drawUpState=function(){this._enableButton(this.upState,!0),this._enableButton(this.downState,!1),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawOverState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!1),this._enableButton(this.overState,!0),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawDownState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!0),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawDisabledState=function(){this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!0),this._enableButton(this.overDownState,!1)},t.Button.prototype.drawOverDownState=function(){this.overDownState?(this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!0)):this.drawDownState()},t.Button.prototype._enableButton=function(t,e){t&&t.setAlpha(e?1:0)},t.Button.prototype._enableMouseEvents=function(t,e){t.setMouseEnabled&&t.setMouseEnabled(e);for(var n=t.firstChild;null!=n;)this._enableMouseEvents(n,e),n=n.nextSibling},t.Button.prototype.setUpState=function(t){if(!this.upState||this.upState!=t){var e=!1;if(this.upState)e=this._isButtonEnabled(this.upState),this.removeChild(this.upState);else if(!this._bDuringInit){var n=!1,i=!1,r=!1;this.downState&&(n=this._isButtonEnabled(this.downState)),this.overState&&(i=this._isButtonEnabled(this.overState)),this.disabledState&&(r=this._isButtonEnabled(this.disabledState)),n||i||r||(e=!0)}t&&this.addChild(t),this.upState=t,this._enableButton(this.upState,e)}},t.Button.prototype.setDownState=function(t){if(!this.downState||this.downState!=t){var e=!1;this.downState&&(e=this._isButtonEnabled(this.downState),this.removeChild(this.downState)),t&&this.addChild(t),this.downState=t,this._enableButton(this.downState,e)}},t.Button.prototype.setOverState=function(t){if(!this.overState||this.overState!=t){var e=!1;this.overState&&(e=this._isButtonEnabled(this.overState),this.removeChild(this.overState)),t&&this.addChild(t),this.overState=t,this._enableButton(this.overState,e)}},t.Button.prototype.setDisabledState=function(t){if(!this.disabledState||this.disabledState==t){var e=!1;this.disabledState&&(e=this._isButtonEnabled(this.disabledState),this.removeChild(this.disabledState)),t&&this.addChild(t),this.disabledState=t,this._enableButton(this.disabledState,e)}},t.Button.prototype.setOverDownState=function(t){if(!this.overDownState||this.overDownState==t){var e=!1;this.overDownState&&(e=this._isButtonEnabled(this.overDownState),this.removeChild(this.overDownState)),t&&this.addChild(t),this.overDownState=t,this._enableButton(this.overDownState,e)}},t.Button.prototype.setCallback=function(t,e){this._callback=t,this._callbackObj=e},t.Button.prototype.setTooltip=function(t){this._tooltip=t,t&&(this.setAriaRole("button"),this.setAriaProperty("label",t))},t.Button.prototype.getTooltip=function(){return this._tooltip},t.Button.prototype.isClickEventPropagationStopped=function(){return!0},t.Button.prototype.initState=function(){this.isEnabled()?this.drawUpState():this.drawDisabledState()},t.Button.prototype.setSize=function(t,e){var n=this.upState;n&&(n.setWidth&&t&&n.setWidth(t),n.setHeight&&e&&n.setHeight(e));var i=this.downState;i&&(i.setWidth&&t&&i.setWidth(t),i.setHeight&&e&&i.setHeight(e));var r=this.overState;r&&(r.setWidth&&t&&r.setWidth(t),r.setHeight&&e&&r.setHeight(e));var o=this.disabledState;o&&(o.setWidth&&t&&o.setWidth(t),o.setHeight&&e&&o.setHeight(e))},t.Button.prototype.rightAlign=function(t,e,n){var i=t-e,r=this.upState;r&&t&&(n?r.setTranslateX(i):this._setChildX(r,i));var o=this.downState;o&&t&&(n?o.setTranslateX(i):this._setChildX(o,i));var a=this.overState;a&&t&&(n?a.setTranslateX(i):this._setChildX(a,i));var s=this.disabledState;s&&(n?s.setTranslateX(i):this._setChildX(s,i))},t.Button.prototype._setChildX=function(e,n){for(var i=0;i<e.getNumChildren();i++){var r=e.getChildAt(i);r instanceof t.Displayable&&r.setTranslateX(n)}},t.Button.prototype.setToggleEnabled=function(t){this._bToggleEnabled=t},t.Button.prototype.isToggleEnabled=function(){return this._bToggleEnabled},t.Button.prototype.setToggled=function(t){this._bToggleEnabled&&(this._bToggled=t,this._bToggled?this.drawDownState():this.drawUpState())},t.Button.prototype.isToggled=function(){return this._bToggled},t.Button.prototype._isButtonEnabled=function(t){var e=!1;return t&&(e=t.getAlpha()>0),e},t.Button.prototype.getUpState=function(){return this.upState},t.Button.prototype.getDownState=function(){return this.downState},t.Button.prototype.getOverState=function(){return this.overState},t.Button.prototype.showKeyboardFocusEffect=function(){this._keyboardFocusEffect||(this._keyboardFocusEffect=this.CreateKeyboardFocusEffect()),this._keyboardFocusEffect.show(),this._isShowingKeyboardFocusEffect=!0,this.getCtx().setActiveElement(this)},t.Button.prototype.hideKeyboardFocusEffect=function(){this._keyboardFocusEffect&&this._keyboardFocusEffect.hide(),this._isShowingKeyboardFocusEffect=!1},t.Button.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},t.Button.prototype.CreateKeyboardFocusEffect=function(){return new t.KeyboardFocusEffect(this.getCtx(),this,this.getDimensions(),null,null,(!0))},t.Button.prototype.handleKeyboardEvent=function(e){var n=e.keyCode;n!=t.KeyboardEvent.ENTER&&n!=t.KeyboardEvent.SPACE||this._callback&&(this._callback.call(this._callbackObj,e,this),e.stopPropagation(),e.preventDefault())},t.TransientButton=function(t,e,n,i,r,o,a){this.Init(t,e,n,i,r,o,a)},t.Obj.createSubclass(t.TransientButton,t.Button),t.TransientButton._DEFAULT_RADIUS=15.5,t.TransientButton.prototype.Init=function(e,n,i,r,o,a,s){t.TransientButton.superclass.Init.call(this,e,n,i,r,o,null,s,a);var l=e.getStage();l.addEvtListener(m.FOCUS,this._onFocus,!0,this),l.addEvtListener(m.BLUR,this._onBlur,!0,this),t.Agent.isTouchDevice()||(t.Agent.isPlatformIE()?(l.addEvtListener("mouseenter",this._onMouseOver,!1,this),l.addEvtListener("mouseleave",this._onMouseOut,!1,this)):(l.addEvtListener(t.MouseEvent.MOUSEOVER,this._onMouseOver,!1,this),l.addEvtListener(t.MouseEvent.MOUSEOUT,this._onMouseOut,!1,this)))},t.TransientButton.getStateFromURL=function(e,n,i,r,o,a){var s=t.TransientButton._DEFAULT_RADIUS,l=s/2,u=new t.Circle(e,s,s,s);u.setSolidFill(o),u.setSolidStroke(a);var h=new t.Image(e,n,l,l,i,r);
return u.addChild(h),u},t.TransientButton.prototype.show=function(){this.setAlpha(1)},t.TransientButton.prototype.hide=function(){this.setAlpha(0)},t.TransientButton.prototype._onFocus=function(t){this._isFocused=!0,this.show()},t.TransientButton.prototype._onBlur=function(t){this._isFocused=!1,this._isMouseOver||this.hide()},t.TransientButton.prototype._onMouseOver=function(t){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop(),this._isMouseOver=!0,this.show()},t.TransientButton.prototype._onMouseOut=function(e){this._mouseOutTimer||(this._mouseOutTimer=new t.Timer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start()},t.TransientButton.prototype._onMouseOutTimerEnd=function(){this._isMouseOver=!1,this._isFocused||this.hide()},t.TransientButton.prototype.OnMouseDown=function(e){t.TransientButton.superclass.OnMouseDown.call(this,e),e.stopPropagation()},t.TransientButton.prototype.OnMouseUp=function(e){t.TransientButton.superclass.OnMouseUp.call(this,e),e.stopPropagation()};var T=function(){};t.Obj.createSubclass(T,t.Obj),T.prototype.getDisplayables=function(){},T.prototype.getAriaLabel=function(){};var A=function(){};t.Obj.createSubclass(A,t.Obj),A.prototype.getTooltip=function(t,e,n){},A.prototype.getDatatip=function(t,e,n){},A.prototype.getDatatipColor=function(){};var x=function(){};t.Obj.createSubclass(x,t.Obj),x.prototype.isSelectable=function(){},x.prototype.isSelected=function(){},x.prototype.setSelected=function(t,e){},x.prototype.showHoverEffect=function(){},x.prototype.hideHoverEffect=function(){};var I=function(){};I.prototype.handleKeyboardEvent=function(t){},I.prototype.hideKeyboardFocusEffect=function(){};var O=function(){};t.Obj.createSubclass(O,t.Obj),O.prototype.getNextNavigable=function(t){},O.prototype.getTargetElem=function(){},O.prototype.getKeyboardBoundingBox=function(t){},O.prototype.showKeyboardFocusEffect=function(){},O.prototype.hideKeyboardFocusEffect=function(){},O.prototype.isShowingKeyboardFocusEffect=function(){},O.prototype.getContextMenuLocation=function(){},O.prototype.getKeyboardTooltipLocation=function(){};var M=function(){};t.Obj.createSubclass(M,t.Obj),M.prototype.getCategories=function(){},M.prototype.highlight=function(t,e){};var D=function(){};t.Obj.createSubclass(D,t.Obj),D.prototype.getContextMenuLocation=function(){};var P=function(){};t.Obj.createSubclass(P,t.Obj),P.prototype.getId=function(){},P.prototype.getShowPopupBehaviors=function(){},t.Automation=function(t){},t.Obj.createSubclass(t.Automation,t.Obj),t.Automation.TOOLTIP_SUBID="tooltip",t.Automation.prototype.getSubIdForDomElement=function(e){var n=t.Automation._findDisplayable(e);return!n||n instanceof Array?e&&this.IsTooltipElement(e)?t.Automation.TOOLTIP_SUBID:null:this.GetSubIdForDomElement(n)},t.Automation.prototype.GetSubIdForDomElement=function(t){return null},t.Automation.prototype.getDomElementForSubId=function(t){return null},t.Automation._findDisplayable=function(t){for(;t;){if(t._obj)return t._obj;t=t.parentNode}return null},t.Automation.prototype.GetTooltipElement=function(t,e){if(t){var n=t.getCtx().getTooltipManager(e).getTooltipElem();return"hidden"==n.style.visibility?null:n}return null},t.Automation.prototype.IsTooltipElement=function(e){var n=e.getAttribute("id");return!(!n||0!=n.indexOf(t.HtmlTooltipManager._TOOLTIP_DIV_ID))},t.CustomDatatipPeer=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.CustomDatatipPeer,t.Obj),t.CustomDatatipPeer.prototype.Init=function(t,e,n,i){this._tooltipManager=t,this._tooltipObj=e,this._datatipColor=n,this._dataContext=i},t.CustomDatatipPeer.prototype.getDatatip=function(t){return this._tooltipManager.getCustomTooltip(this._tooltipObj,this._dataContext)},t.CustomDatatipPeer.prototype.getDatatipColor=function(t){return this._datatipColor},t.SimpleObjPeer=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.SimpleObjPeer,t.Obj),t.SimpleObjPeer.prototype.Init=function(t,e,n,i){this._tooltip=t,this._datatip=e,this._datatipColor=n,this._params=i},t.SimpleObjPeer.prototype.setTooltip=function(t){this._tooltip=t},t.SimpleObjPeer.prototype.setDatatip=function(t){this._datatip=t},t.SimpleObjPeer.prototype.setDatatipColor=function(t){this._datatipColor=t},t.SimpleObjPeer.prototype.getParams=function(){return this._params},t.SimpleObjPeer.prototype.getTooltip=function(t){return this._tooltip},t.SimpleObjPeer.prototype.getDatatip=function(t){return this._datatip},t.SimpleObjPeer.prototype.getDatatipColor=function(t){return this._datatipColor},t.Agent=function(){},t.Obj.createSubclass(t.Agent,t.Obj),t.Agent.UNKNOWN_VERSION=-1,t.Agent.IE_PLATFORM="ie",t.Agent.GECKO_PLATFORM="gecko",t.Agent.WEBKIT_PLATFORM="webkit",t.Agent.UNKNOWN_PLATFORM="unknown",t.Agent.WINDOWS_OS="Windows",t.Agent.SOLARIS_OS="Solaris",t.Agent.MAC_OS="Mac",t.Agent.UNKNOWN_OS="Unknown",t.Agent.FOCUS_COLOR_DEFAULT="#0645AD",t.Agent.FOCUS_COLOR_IE="#090909",t.Agent.deferAriaCreation=function(){return!t.Agent.isTouchDevice()&&!t.Agent.isEnvironmentTest()},t.Agent.getDevicePixelRatio=function(){return t.Agent._initialize(),t.Agent._devicePixelRatio},t.Agent.getElementPosition=function(e){return t.Agent.isPlatformIE()?t.Agent._getElementPositionIE(e):t.Agent._getElementPositionDefault(e)},t.Agent.getPlatform=function(){return t.Agent._initialize(),t.Agent._platform},t.Agent.getOS=function(){return t.Agent._initialize(),t.Agent._os},t.Agent.getVersion=function(){return t.Agent._initialize(),t.Agent._version},t.Agent.isBrowserChrome=function(){return t.Agent._initialize(),t.Agent._bChrome},t.Agent.isBrowserSafari=function(){return t.Agent.isPlatformWebkit()&&!t.Agent.isBrowserChrome()},t.Agent.isPlatformGecko=function(){return t.Agent.getPlatform()==t.Agent.GECKO_PLATFORM},t.Agent.isPlatformIE=function(){return t.Agent.getPlatform()==t.Agent.IE_PLATFORM},t.Agent.isPlatformWebkit=function(){return t.Agent.getPlatform()==t.Agent.WEBKIT_PLATFORM},t.Agent.isRightToLeft=function(e){return t.Agent._initialize(),e&&null!=e.getReadingDirection()?"rtl"==e.getReadingDirection():t.Agent._bRtl},t.Agent.isTouchDevice=function(){return t.Agent._initialize(),t.Agent._bTouchDevice},t.Agent.setEnvironment=function(e){t.Agent._environment=e},t.Agent.isEnvironmentTest=function(){return"test"==t.Agent._environment},t.Agent.isEnvironmentBatik=function(){return"batik"==t.Agent._environment},t.Agent.isEnvironmentBrowser=function(){return!t.Agent.isEnvironmentTest()&&!t.Agent.isEnvironmentBatik()},t.Agent.setHighContrast=function(e){t.Agent._highContrast=e},t.Agent.isHighContrast=function(){return t.Agent._highContrast===!0},t.Agent.workaroundFirefoxRepaint=function(e){if(t.Agent.isPlatformGecko()){var n=e.getParent();if(n){var i=n.getChildIndex(e);n.removeChildAt(i),n.addChildAt(e,i)}}},t.Agent._initialize=function(){if(!t.Agent._bInitialized){var e=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null;t.Agent._os=t.Agent._determineOS(e),t.Agent._platform=t.Agent._determinePlatform(e),t.Agent._bChrome=e&&e.indexOf("chrome/")!=-1&&e.indexOf("edge")===-1,t.Agent._version=t.Agent._determineVersion(e,t.Agent._platform),t.Agent._bRtl=!(!document||!document.documentElement)&&"rtl"==document.documentElement.dir,t.Agent._bTouchDevice=t.Agent._platform==t.Agent.WEBKIT_PLATFORM&&e&&(e.indexOf("mobile")!=-1||e.indexOf("android")!=-1),t.Agent._devicePixelRatio=window&&null!=window.devicePixelRatio?window.devicePixelRatio:1,t.Agent._bInitialized=!0}},t.Agent._determineOS=function(e){if(e){if(e.indexOf("win")!=-1)return t.Agent.WINDOWS_OS;if(e.indexOf("mac")!=-1)return t.Agent.MAC_OS;if(e.indexOf("sunos")!=-1)return t.Agent.SOLARIS_OS}return t.Agent.UNKNOWN_OS},t.Agent._determinePlatform=function(e){if(e){if(e.indexOf("opera")!=-1)return t.Agent.UNKNOWN_PLATFORM;if(e.indexOf("trident")!=-1||e.indexOf("msie")!=-1||e.indexOf("edge")!=-1)return t.Agent.IE_PLATFORM;if(e.indexOf("applewebkit")!=-1||e.indexOf("safari")!=-1)return t.Agent.WEBKIT_PLATFORM;if(e.indexOf("gecko/")!=-1)return t.Agent.GECKO_PLATFORM}return t.Agent.UNKNOWN_PLATFORM},t.Agent._determineVersion=function(e,n){if(e){if(n==t.Agent.GECKO_PLATFORM)return t.Agent._parseFloatVersion(e,/rv:(\d+[.]\d+)/);if(n==t.Agent.IE_PLATFORM){var i=t.Agent._parseFloatVersion(e,/trident\/(\d+[.]\d+)/);if(i!=t.Agent.UNKNOWN_VERSION)return i+4;var r=t.Agent._parseFloatVersion(e,/edge\/(\d+[.]\d+)/);if(r!=t.Agent.UNKNOWN_VERSION)return r;var o=t.Agent._parseFloatVersion(e,/msie (\d+\.\d+);/);return o!=t.Agent.UNKNOWN_VERSION?o:t.Agent._parseFloatVersion(e,/msie (\d+\.\d+)b;/)}if(n==t.Agent.WEBKIT_PLATFORM)return t.Agent._bChrome?t.Agent._parseFloatVersion(e,/chrome\/(\d+([.]\d+)*)/):t.Agent._parseFloatVersion(e,/applewebkit\/(\d+([.]\d+)*)/)}return t.Agent.UNKNOWN_VERSION},t.Agent._parseFloatVersion=function(e,n){try{var i=e.match(n);return i&&i[1]?parseFloat(i[1]):t.Agent.UNKNOWN_VERSION}catch(r){return console.error("dvt.Agent._parseFloatVersion error: "),console.error(r),t.Agent.UNKNOWN_VERSION}},t.Agent._getElementPositionDefault=function(e){var n=e.getBoundingClientRect(),i=Math.round(n.top),r=n.left,o=e.ownerDocument.documentElement,a=e.ownerDocument.body;return r+=o.scrollLeft||a.scrollLeft,i+=o.scrollTop||a.scrollTop,new t.Point(r,i)},t.Agent._getElementPositionIE=function(e){var n=e.getBoundingClientRect(),i=n.top,r=n.left,o=e.ownerDocument.documentElement,a=o.scrollLeft;return r-=o.clientLeft-a,i-=o.clientTop-o.scrollTop,new t.Point(r,i)},t.Agent.getFocusColor=function(){if(t.Agent._initialize(),!t.Agent._focusColor){var e;if(t.Agent.isPlatformWebkit()&&!t.Agent.isEnvironmentTest()){var n=document.getElementsByTagName("body")[0],i=document.createElement("div");n.appendChild(i),i.style.outline="-webkit-focus-ring-color",e=window.getComputedStyle(i).getPropertyValue("outline-color"),n.removeChild(i)}else t.Agent.isPlatformIE()&&(e=t.Agent.FOCUS_COLOR_IE);t.Agent._focusColor=e?e:t.Agent.FOCUS_COLOR_DEFAULT}return t.Agent._focusColor},t.Bundle=function(){},t.Bundle._localizedStrings={},t.Bundle._defaultStrings={},t.Obj.createSubclass(t.Bundle,t.Obj),t.Bundle.SUBCOMPONENT_PREFIX="DvtSubcomponentBundle",t.Bundle.AFCOMPONENT_PREFIX="DvtAfComponentBundle",t.Bundle.UTIL_PREFIX="DvtUtilBundle",t.Bundle.CHART_PREFIX="DvtChartBundle",t.Bundle.GAUGE_PREFIX="DvtGaugeBundle",t.Bundle.TREEMAP_PREFIX="DvtTreemapBundle",t.Bundle.SUNBURST_PREFIX="DvtSunburstBundle",t.Bundle.NBOX_PREFIX="DvtNBoxBundle",t.Bundle.HIERARCHYVIEWER_PREFIX="DvtHierarchyViewerBundle",t.Bundle.ADF_DIAGRAM_PREFIX="DvtAdfDiagramBundle",t.Bundle.DIAGRAM_PREFIX="DvtDiagramBundle",t.Bundle.TAGCLOUD_PREFIX="DvtTagCloudBundle",t.Bundle.TIMELINE_PREFIX="DvtTimelineBundle",t.Bundle.addLocalizedStrings=function(e){for(var n in e)t.Bundle._localizedStrings[n]=e[n]},t.Bundle.addDefaultStrings=function(e,n){for(var i in n)t.Bundle._defaultStrings[e+"."+i]=n[i]},t.Bundle.format=function(t,e){return t.replace(/\{(\d+)\}/g,function(){return e[arguments[1]]})},t.Bundle.getTranslatedString=function(e,n,i){var r=e+"."+n,o=t.Bundle._localizedStrings[r];return o||(o=t.Bundle._defaultStrings[r]),o&&null!==i&&void 0!==i&&(o=i instanceof Array?t.Bundle.format(o,i):t.Bundle.format(o,[i])),o},t.Bundle.getTranslation=function(e,n,i,r,o){var a=e&&e.translations?e.translations[n]:null;if(!a){var s=i+"."+r;a=t.Bundle._localizedStrings[s],a||(a=t.Bundle._defaultStrings[s])}return a&&null!==o&&void 0!==o&&(a=o instanceof Array?t.Bundle.format(a,o):t.Bundle.format(a,[o])),a},t.ContextMenuHandler=function(t,e){this._context=t,this._menus=e},t.Obj.createSubclass(t.ContextMenuHandler,t.Obj),t.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU="bodyContextMenu",t.ContextMenuHandler.TYPE_CONTEXT_MENU="contextMenu",t.ContextMenuHandler.TYPE_MULTI_SELECT_CONTEXT_MENU="multiSelectContextMenu",t.ContextMenuHandler._ATTR_MENU_CONTAINER_TYPE="t",t.ContextMenuHandler._ATTR_MENU_CONTAINER_POPUP_ID="id",t.ContextMenuHandler.prototype.show=function(e,n){for(var i=0;i<this._menus.length;i++){var r=this._menus[i];if(n==r[t.ContextMenuHandler._ATTR_MENU_CONTAINER_TYPE]){var o=r[t.ContextMenuHandler._ATTR_MENU_CONTAINER_POPUP_ID];return t.EventFactory.newAdfContextMenuEvent(e.getNativeEvent(),o)}}return null};var w=function(e,n,i){this._context=e,this._callback=n,this._callbackObj=i,this._popupPosition=null,this._mouseTarget=null,this._behavior=null,this._hoverPopupShown=!1,this._hoverTimer=new t.Timer(e,500,this._onHoverDelay,this,1),this._overTimer=new t.Timer(e,500,this._onOverDelay,this,1)};t.Obj.createSubclass(w,t.Obj),w.prototype.processPopupHelper=function(e,n,i,r,o,a){var s=!1;if(e&&n&&n.length>0)for(var l=0;l<n.length;l++){var u=n[l];if(u&&t.ArrayUtils.getIndex(i,u.getTriggerType())!=-1){this.HidePopup(o),this._behavior=u;var h=this._createShowPopupEvent(e,u,r),c=this,d=function(){t.EventDispatcher.dispatchEvent(c._callback,c._callbackObj,c,h)};a?setTimeout(d,100):d(),s=!0}}return s},w.prototype.processMousePopup=function(e,n,i,r,o,a){if(e===this._mouseTarget)return!0;if(e&&n&&n.length>0)for(var s=0;s<n.length;s++){var l=n[s],u=l?l.getTriggerType():null;if(u==t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER&&(u=t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER),a==u)return this.HidePopup(o),this._mouseTarget=e,this._behavior=l,this._hoverDisplayable=r,this._popupPosition=i,a==t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER||a==t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER?l.getTriggerType()==t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER?this._hoverTimer.start():this._overTimer.start():this._onOverDelay(),!0}return!1},w.prototype.processMouseOut=function(e,n,i){var r=!1;n&&(r=n.length<1),this._mouseTarget&&this._behavior&&(e===this._mouseTarget||r)&&(n&&this._hoverDisplayable&&t.ArrayUtils.getIndex(n,this._hoverDisplayable)>-1||this.HidePopup(i))},w.prototype.HidePopup=function(e){if(this._hoverPopupShown){var n=t.EventFactory.newAdfHidePopupEvent(this._behavior.getPopupId(),e.getNativeEvent().relatedTarget);t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,n)}else this._hoverTimer.stop();this._mouseTarget=null,this._behavior=null,this._hoverPopupShown=!1,this._hoverDisplayable=null},w.prototype.processMouseMove=function(t){this._popupPosition=t},w.prototype._createShowPopupEvent=function(e,n,i){var r=n,o=n,a=r.getAlign()&&!r.getAlignId();a&&(o=new t.ShowPopupBehavior(r.getPopupId(),r.getTriggerType(),null,null));var s=e.getPopupBounds?e.getPopupBounds(o):null;if(a&&!s){var l=this._context.pageToStageCoords(i.x,i.y);s=new t.Rectangle(l.x,l.y-5,1,5)}else s&&(r=new t.ShowPopupBehavior(r.getPopupId(),r.getTriggerType(),null,r.getAlign()));var u=t.EventFactory.newAdfShowPopupEvent(r,s,null,r.getTriggerType());return t.EventManager._addContextInfo(e,u),u},w.prototype._onHoverDelay=function(){if(this._mouseTarget&&this._behavior){this._hoverPopupShown=!0;var e=this._createShowPopupEvent(this._mouseTarget,this._behavior,this._popupPosition);t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)}},w.prototype._onOverDelay=function(){if(this._mouseTarget&&this._behavior){var e=this._createShowPopupEvent(this._mouseTarget,this._behavior,this._popupPosition);t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)}},w.prototype.hasPopup=function(e,n){if(!e||!e.getShowPopupBehaviors)return!1;var i=e.getShowPopupBehaviors();if(i)for(var r=0;r<i.length;r++){var o=i[r];if(o&&t.ArrayUtils.getIndex(n,o.getTriggerType())!=-1)return!0}return!1},t.ClientBehaviorHandler=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.ClientBehaviorHandler,t.Obj),t.ClientBehaviorHandler.prototype.Init=function(t,e,n){this._context=t,this._callback=e,this._callbackObj=n},t.ClientBehaviorHandler.prototype.processClick=function(e,n){var i=!1;if(e&&n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r];if(o&&(o.getTriggerType()==t.ClientBehavior.TRIGGER_TYPE_ACTION||o.getTriggerType()==t.ClientBehavior.TRIGGER_TYPE_CLICK)){var a=this.CreateClientBehaviorEvent(e,o);t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,null,a),i=!0}}return i},t.ClientBehaviorHandler.prototype.CreateClientBehaviorEvent=function(e,n){var i=new t.ClientBehaviorEvent(n);return t.EventManager._addContextInfo(e,i),i},t.SelectionHandler=function(t){this.Init(t)},t.Obj.createSubclass(t.SelectionHandler,t.Obj),t.SelectionHandler.TYPE_SINGLE="s",t.SelectionHandler.TYPE_MULTIPLE="m",t.SelectionHandler.prototype.Init=function(e){this._selection=[],this._type=e?e:t.SelectionHandler.TYPE_SINGLE,this._hiddenSelectedIds=[]},t.SelectionHandler.prototype.getType=function(){return this._type},t.SelectionHandler.prototype.getSelectedCount=function(){return this._selection.length},t.SelectionHandler.prototype.getSelection=function(){return this._selection.slice(0)},t.SelectionHandler.prototype.getSelectedIds=function(){for(var t=[],e=0;e<this._selection.length;e++)t.push(this._selection[e].getId());return t.concat(this._hiddenSelectedIds)},t.SelectionHandler.prototype.processInitialSelections=function(e,n){if(this.clearSelection(!0),e&&n)for(var i=0;i<e.length;i++){for(var r=!0,o=0;o<n.length;o++){var a=n[o].getId();if(null!=a&&t.SelectionHandler._isEquals(e[i],a)&&n[o].isSelectable&&n[o].isSelectable()){this._addToSelection(n[o],!0,!0),r=!1;break}}r&&this._hiddenSelectedIds.push(e[i])}},t.SelectionHandler.prototype.processClick=function(e,n){if(e&&e.isUnrelatedToSelection&&e.isUnrelatedToSelection())return!1;var i=n&&this._type==t.SelectionHandler.TYPE_MULTIPLE,r=!1;return i?e&&e.isSelectable&&e.isSelectable()&&(r=e.isSelected()?this.removeFromSelection(e):this._addToSelection(e,!0)):r=e&&e.isSelectable&&e.isSelectable()?this._addToSelection(e,!1):this.clearSelection(),r},t.SelectionHandler.prototype.processGroupSelection=function(t,e){e||this.clearSelection();for(var n,i=0;i<t.length;i++)n=t[i],n&&n.isUnrelatedToSelection&&n.isUnrelatedToSelection()||this._addToSelection(n,!0)},t.SelectionHandler.prototype.processMouseOver=function(t){t&&t.isSelectable&&t.isSelectable()&&t.showHoverEffect&&t.showHoverEffect()},t.SelectionHandler.prototype.processMouseOut=function(t){t&&t.isSelectable&&t.isSelectable()&&t.hideHoverEffect&&t.hideHoverEffect()},t.SelectionHandler.prototype._addToSelection=function(t,e,n){return!(t.isSelected()||t.isSelectable&&!t.isSelectable())&&(e||this.clearSelection(n),t.setSelected(!0,n),this._selection.push(t),!0)},t.SelectionHandler.prototype.removeFromSelection=function(t){if(!t.isSelected())return!1;t.setSelected(!1);for(var e=0;e<this._selection.length;e++)if(this._selection[e]==t){this._selection.splice(e,1);break}return!0},t.SelectionHandler.prototype.clearSelection=function(t){if(this._selection.length<=0&&this._hiddenSelectedIds.length<=0)return!1;for(;this._selection.length>0;){var e=this._selection.pop();e.setSelected(!1,t)}return this._hiddenSelectedIds.length=0,!0},t.SelectionHandler._isEquals=function(t,e){return t==e||!(t instanceof String)&&(!(!t||!t.equals)&&t.equals(e))},t.KeyboardHandler=function(t){this.Init(t)},t.Obj.createSubclass(t.KeyboardHandler,t.Obj),t.KeyboardHandler._OPTIMAL_ANGLE1=15/180*Math.PI,t.KeyboardHandler._OPTIMAL_ANGLE2=40/180*Math.PI,t.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY1=2,t.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY2=6,t.KeyboardHandler.prototype.Init=function(t){this._eventManager=t},t.KeyboardHandler.prototype.processKeyDown=function(e){var n=this._eventManager.getFocus();if(n&&(this.isNavigationEvent(e)||this.isMultiSelectEvent(e))){t.EventManager.consumeEvent(e);var i=n.getNextNavigable(e);return i!=n&&(i&&this._showPopupHelper(i,[t.ShowPopupBehavior.TRIGGER_TYPE_FOCUS],e),this._showPopupHelper(n,[t.ShowPopupBehavior.TRIGGER_TYPE_BLUR],e)),i}return e.keyCode!=t.KeyboardEvent.TAB&&n&&this._showPopupHelper(n,[t.ShowPopupBehavior.TRIGGER_TYPE_KEY_DOWN],e),null},t.KeyboardHandler.prototype.processKeyUp=function(e,n){var i=this._eventManager.getFocus();i&&e.keyCode==t.KeyboardEvent.TAB?this._showPopupHelper(i,[t.ShowPopupBehavior.TRIGGER_TYPE_FOCUS],e):!i||this.isNavigationEvent(e)||this.isMultiSelectEvent(e)||this._showPopupHelper(i,n,e)},t.KeyboardHandler.getNextNavigable=function(e,n,i,r){var o=null,a=0,s=0,l=n.keyCode;if(!e)return!i||i.length<1?null:i[0];for(var u,h=e.getKeyboardBoundingBox(),c=0;c<i.length;c++){var d=i[c];e!==d&&(u=d.getKeyboardBoundingBox(),(r||t.KeyboardHandler._isInBounds(h,u,l))&&(s=t.KeyboardHandler._computeDelta(h,u,l),((l==t.KeyboardEvent.UP_ARROW||l==t.KeyboardEvent.LEFT_ARROW)&&s<0&&(!o||s>a)||(l==t.KeyboardEvent.DOWN_ARROW||l==t.KeyboardEvent.RIGHT_ARROW)&&s>0&&(!o||s<a))&&(o=d,a=s)))}return o?o:e},t.KeyboardHandler.prototype._showPopupHelper=function(t,e,n){var i=this._eventManager.getCtx(),r=t.getKeyboardBoundingBox(i.getStage()).getCenter(),o=i.stageToPageCoords(r.x,r.y),a=t.getShowPopupBehaviors?t.getShowPopupBehaviors():null;return this._eventManager.getPopupHandler().processPopupHelper(t,a,e,o,n)},t.KeyboardHandler.prototype.getDefaultNavigable=function(e){if(!e||e.length<=0)return null;for(var n,i,r=e[0],o=r.getKeyboardBoundingBox(),a=1;a<e.length;a++)n=e[a],i=n.getKeyboardBoundingBox(),((i.x==o.x&&i.y<o.y||i.x<o.x)&&!t.Agent.isRightToLeft(this._eventManager.getCtx())||(i.x+i.w==o.x+o.w&&i.y<o.y||i.x+i.w>o.x+o.w)&&t.Agent.isRightToLeft(this._eventManager.getCtx()))&&(r=n,o=r.getKeyboardBoundingBox());return r},t.KeyboardHandler.prototype.isNavigationEvent=function(e){var n=e.keyCode;switch(n){case t.KeyboardEvent.UP_ARROW:case t.KeyboardEvent.DOWN_ARROW:case t.KeyboardEvent.LEFT_ARROW:case t.KeyboardEvent.RIGHT_ARROW:return!0}return!1},t.KeyboardHandler.prototype.isSelectionEvent=function(t){return!1},t.KeyboardHandler.prototype.isMultiSelectEvent=function(t){return!1},t.KeyboardHandler.prototype.isContextMenuEvent=function(e){return e.keyCode==t.KeyboardEvent.M&&e.altKey&&e.ctrlKey},t.KeyboardHandler._isInBounds=function(e,n,i){if(i==t.KeyboardEvent.UP_ARROW||i==t.KeyboardEvent.DOWN_ARROW){var r=e.x,o=r+e.w,a=n.x,s=a+n.w;return!(r>=s||o<=a)}if(i==t.KeyboardEvent.LEFT_ARROW||i==t.KeyboardEvent.RIGHT_ARROW){var l=e.y,u=l+e.h,h=n.y,c=h+n.h;return!(l>=c||u<=h)}},t.KeyboardHandler._computeDelta=function(e,n,i){var r=0,o=e.getCenter().x,a=e.getCenter().y,s=n.getCenter().x,l=n.getCenter().y;return i==t.KeyboardEvent.UP_ARROW||i==t.KeyboardEvent.DOWN_ARROW?r=l-a:i!=t.KeyboardEvent.LEFT_ARROW&&i!=t.KeyboardEvent.RIGHT_ARROW||(r=s-o),r},t.KeyboardHandler.getNextAdjacentNavigable=function(e,n,i){var r=n.keyCode;if(!i)return null;if(!e)return i[0];for(var o=e,a=Number.MAX_VALUE,s=!1,l=0;l<i.length;l++){var u=i[l];if(u!==e&&t.KeyboardHandler._isValidDestination(u,e,r)){var h=t.KeyboardHandler._calcInContact(u,e,r);if(!s||h){var c=t.KeyboardHandler._calcDistanceAngleWeighted(u,e,r);(!s&&h||c<a&&(s&&h||!s))&&(a=c,o=u,s=h)}}}return o},t.KeyboardHandler._calcInContact=function(e,n,i){var r=e.getKeyboardBoundingBox(),o=n.getKeyboardBoundingBox();switch(i){case t.KeyboardEvent.UP_ARROW:return t.KeyboardHandler._isVerticallyAligned(r,o)&&(o.y<=r.y+r.h||t.KeyboardHandler._areEqualWithinTolerance(o.y,r.y+r.h));case t.KeyboardEvent.DOWN_ARROW:return t.KeyboardHandler._isVerticallyAligned(r,o)&&(r.y<=o.y+o.h||t.KeyboardHandler._areEqualWithinTolerance(r.y,o.y+o.h));case t.KeyboardEvent.RIGHT_ARROW:return t.KeyboardHandler._isHorizontallyAligned(r,o)&&(r.x<=o.x+o.w||t.KeyboardHandler._areEqualWithinTolerance(r.x,o.x+o.w));case t.KeyboardEvent.LEFT_ARROW:return t.KeyboardHandler._isHorizontallyAligned(r,o)&&(o.x<=r.x+r.w||t.KeyboardHandler._areEqualWithinTolerance(o.x,r.x+r.w))}return!1},t.KeyboardHandler._isVerticallyAligned=function(t,e){return t.x>=e.x&&t.x<=e.x+e.w||e.x>=t.x&&e.x<=t.x+t.w},t.KeyboardHandler._isHorizontallyAligned=function(t,e){return t.y>=e.y&&t.y<=e.y+e.h||e.y>=t.y&&e.y<=t.y+t.h},t.KeyboardHandler._calcDistanceAngleWeighted=function(e,n,i){var r=e.getKeyboardBoundingBox(),o=r.x+r.w/2,a=r.y+r.h/2,s=n.getKeyboardBoundingBox(),l=s.x+s.w/2,u=s.y+s.h/2,h=Math.abs(o-l),c=Math.abs(a-u),d=Math.atan2(c,h),p=Math.sqrt(h*h+c*c);return(d>t.KeyboardHandler._OPTIMAL_ANGLE1&&(i==t.KeyboardEvent.RIGHT_ARROW||i==t.KeyboardEvent.LEFT_ARROW)||d<t.Math.HALF_PI-t.KeyboardHandler._OPTIMAL_ANGLE1&&(i==t.KeyboardEvent.UP_ARROW||i==t.KeyboardEvent.DOWN_ARROW))&&(p*=d>t.KeyboardHandler._OPTIMAL_ANGLE2&&(i==t.KeyboardEvent.RIGHT_ARROW||i==t.KeyboardEvent.LEFT_ARROW)||d<t.Math.HALF_PI-t.KeyboardHandler._OPTIMAL_ANGLE2&&(i==t.KeyboardEvent.UP_ARROW||i==t.KeyboardEvent.DOWN_ARROW)?t.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY2:t.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY1),p},t.KeyboardHandler._isValidDestination=function(e,n,i){var r=e.getKeyboardBoundingBox(),o=n.getKeyboardBoundingBox();switch(i){case t.KeyboardEvent.UP_ARROW:return r.y<o.y||t.KeyboardHandler._areEqualWithinTolerance(r.y,o.y);case t.KeyboardEvent.DOWN_ARROW:return r.y>o.y||t.KeyboardHandler._areEqualWithinTolerance(r.y,o.y);case t.KeyboardEvent.RIGHT_ARROW:return r.x>o.x||t.KeyboardHandler._areEqualWithinTolerance(r.x,o.x);case t.KeyboardEvent.LEFT_ARROW:return r.x<o.x||t.KeyboardHandler._areEqualWithinTolerance(r.x,o.x)}return!0},t.KeyboardHandler._areEqualWithinTolerance=function(t,e){return Math.abs(t-e)<=1e-7},t.MarqueeHandler=function(t,e,n,i,r,o,a,s,l){this.Init(t,e,n,i,r,o,a,s,l)},t.Obj.createSubclass(t.MarqueeHandler,t.Obj),t.MarqueeHandler.prototype.Init=function(e,n,i,r,o,a,s,l,u){this._context=e.getCtx(),this._container=e,this._bounds=n,this._fill=r,this._stroke=o,this._allowHoriz=null==a||a,this._allowVert=null==s||s,this._horizBounds=l,this._vertBounds=u,this._glassPane=new t.Rect(this._context,i.x,i.y,i.w,i.h),this._glassPane.setInvisibleFill(),this._marqueeOn=!1,this._marqueeDrawn=!1,this._resizeHoriz=!1,this._resizeVert=!1},t.MarqueeHandler.prototype.processDragStart=function(e,n){if(!this._marqueeOn){if(this._origPt=this._container.stageToLocal(e),this._resizeHoriz=this._allowHoriz,this._resizeVert=this._allowVert,!this._bounds.containsPoint(this._origPt.x,this._origPt.y))if(this._vertBounds&&this._vertBounds.containsPoint(this._origPt.x,this._origPt.y))this._resizeHoriz=!1;else{if(!this._horizBounds||!this._horizBounds.containsPoint(this._origPt.x,this._origPt.y))return null;this._resizeVert=!1}return this._marqueeOn=!0,this._marquee=null,this._createMarqueeEvent(t.MarqueeEvent.SUBTYPE_START,n)}return null},t.MarqueeHandler.prototype.processDragMove=function(e,n){if(!this._marqueeOn)return null;this._marqueeDrawn||(this._container.addChild(this._glassPane),this._marquee=new t.Rect(this._context,this._bounds.x,this._bounds.y,this._bounds.w,this._bounds.h),this._resizeHoriz&&(this._marquee.setX(this._origPt.x),this._marquee.setWidth(0)),this._resizeVert&&(this._marquee.setY(this._origPt.y),this._marquee.setHeight(0)),this._marquee.setStroke(this._stroke),this._marquee.setFill(this._fill),this._marquee.setPixelHinting(!0),this._glassPane.addChild(this._marquee),this._marqueeDrawn=!0);var i=this._container.stageToLocal(e);return i.x=Math.max(i.x,this._bounds.x),i.x=Math.min(i.x,this._bounds.x+this._bounds.w),i.y=Math.max(i.y,this._bounds.y),i.y=Math.min(i.y,this._bounds.y+this._bounds.h),this._resizeHoriz&&(this._marquee.setWidth(Math.abs(i.x-this._origPt.x)),i.x<this._origPt.x?this._marquee.setX(i.x):this._marquee.setX(this._origPt.x)),this._resizeVert&&(this._marquee.setHeight(Math.abs(i.y-this._origPt.y)),i.y<this._origPt.y?this._marquee.setY(i.y):this._marquee.setY(this._origPt.y)),this._createMarqueeEvent(t.MarqueeEvent.SUBTYPE_MOVE,n)},t.MarqueeHandler.prototype.processDragEnd=function(e,n){return this._marqueeOn&&(this._marqueeOn=!1,this._marqueeDrawn)?(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,this._createMarqueeEvent(t.MarqueeEvent.SUBTYPE_END,n)):null},t.MarqueeHandler.prototype.cancelMarquee=function(){return!(!this._marqueeOn||(this._marqueeOn=!1,!this._marqueeDrawn))&&(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,!0)},t.MarqueeHandler.prototype._createMarqueeEvent=function(e,n){var i=null,r=null,o=null,a=null;return this._resizeHoriz&&(i=this._marquee?this._marquee.getX():this._origPt.x,o=this._marquee?this._marquee.getWidth():0),this._resizeVert&&(r=this._marquee?this._marquee.getY():this._origPt.y,a=this._marquee?this._marquee.getHeight():0),new t.MarqueeEvent(e,i,r,o,a,n)},t.MarqueeHandler.prototype.getCursor=function(t){var e=this._container.stageToLocal(t),n=this._bounds.containsPoint(e.x,e.y),i=this._vertBounds&&this._vertBounds.containsPoint(e.x,e.y),r=this._horizBounds&&this._horizBounds.containsPoint(e.x,e.y);return n||i||r?"crosshair":"inherit"},t.PanZoomHandler=function(t,e,n,i){this.Init(t,e,n,i)},t.Obj.createSubclass(t.PanZoomHandler,t.Obj),t.PanZoomHandler.prototype.Init=function(e,n,i,r){this._context=e.getCtx(),this._container=e,this._bounds=n,this._zoomRate=r,this._glassPane=new t.Rect(this._context,i.x,i.y,i.w,i.h),this._glassPane.setInvisibleFill(),this._panOn=!1,this._glassPaneDrawn=!1,this._pinchOn=!1},t.PanZoomHandler.prototype.processDragStart=function(e){return this._panOn?null:(this._origPt=this._container.stageToLocal(e),this._lastPt=this._origPt,this._bounds.containsPoint(this._origPt.x,this._origPt.y)?(this._panOn=!0,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PAN_START,0,0,0,0,0,0,0,0)):null)},t.PanZoomHandler.prototype.processDragMove=function(e){if(!this._panOn)return null;this._glassPaneDrawn||(this._container.addChild(this._glassPane),this._glassPaneDrawn=!0);var n=this._container.stageToLocal(e),i=n.x-this._lastPt.x,r=n.y-this._lastPt.y,o=n.x-this._origPt.x,a=n.y-this._origPt.y;return this._lastPt=n,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PAN_MOVE,(-i),(-i),(-r),(-r),(-o),(-o),(-a),(-a))},t.PanZoomHandler.prototype.processDragEnd=function(e){if(this._panOn&&(this._panOn=!1,this._glassPaneDrawn)){this._container.removeChild(this._glassPane),this._glassPaneDrawn=!1;var n=e?this._container.stageToLocal(e):this._lastPt,i=n.x-this._lastPt.x,r=n.y-this._lastPt.y,o=n.x-this._origPt.x,a=n.y-this._origPt.y;return this._lastPt=null,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PAN_END,(-i),(-i),(-r),(-r),(-o),(-o),(-a),(-a))}return null},t.PanZoomHandler.prototype.processMouseWheel=function(e,n){var i=this._container.stageToLocal(e);if(!this._bounds.containsPoint(i.x,i.y))return null;n*=this._zoomRate;var r=n*(i.x-this._bounds.x),o=-n*(this._bounds.x+this._bounds.w-i.x),a=n*(i.y-this._bounds.y),s=-n*(this._bounds.y+this._bounds.h-i.y);return new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_ZOOM,r,o,a,s,r,o,a,s)},t.PanZoomHandler.prototype.processPinchStart=function(e,n){return this._pinchOn?null:(this._origPt1=this._container.stageToLocal(e),this._origPt2=this._container.stageToLocal(n),this._lastPt1=this._origPt1,this._lastPt2=this._origPt2,this._bounds.containsPoint(this._origPt1.x,this._origPt1.y)&&this._bounds.containsPoint(this._origPt2.x,this._origPt2.y)?(this._pinchOn=!0,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PINCH_START,0,0,0,0,0,0,0,0)):null)},t.PanZoomHandler.prototype.processPinchMove=function(e,n){if(!this._pinchOn)return null;var i=this._container.stageToLocal(e),r=this._container.stageToLocal(n),o=this._computePinchDeltas(i,r,this._lastPt1,this._lastPt2),a=this._computePinchDeltas(i,r,this._origPt1,this._origPt2);return this._lastPt1=i,this._lastPt2=r,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PINCH_MOVE,o.dxMin,o.dxMax,o.dyMin,o.dyMax,a.dxMin,a.dxMax,a.dyMin,a.dyMax)},t.PanZoomHandler.prototype.processPinchEnd=function(){if(this._pinchOn){this._pinchOn=!1;var e=this._computePinchDeltas(this._lastPt1,this._lastPt2,this._origPt1,this._origPt2);return this._lastPt1=null,this._lastPt2=null,new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PINCH_END,0,0,0,0,e.dxMin,e.dxMax,e.dyMin,e.dyMax)}return null},t.PanZoomHandler.prototype._computePinchDeltas=function(t,e,n,i){var r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),a=Math.abs(n.x-i.x),s=Math.abs(n.y-i.y),l=r>o/2?a/r:1,u=o>r/2?s/o:1,h=(t.x+e.x)/2,c=(t.y+e.y)/2,d=(n.x+i.x)/2,p=(n.y+i.y)/2,g=h-d,f=c-p,_=(1-l)*(h-this._bounds.x),m=(l-1)*(this._bounds.x+this._bounds.w-h),v=(1-u)*(c-this._bounds.y),y=(u-1)*(this._bounds.y+this._bounds.h-c);
return _-=g,m-=g,v-=f,y-=f,{dxMin:_,dxMax:m,dyMin:v,dyMax:y}},t.PanZoomHandler.prototype.zoomBy=function(e){var n=(1/e-1)/2,i=-n*this._bounds.w,r=n*this._bounds.w,o=-n*this._bounds.h,a=n*this._bounds.h;return new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_ZOOM,i,r,o,a,i,r,o,a)},t.PanZoomHandler.prototype.panBy=function(e,n){var i=e*this._bounds.w*(t.Agent.isRightToLeft(this._context)?-1:1),r=n*this._bounds.h;return new t.PanZoomEvent(t.PanZoomEvent.SUBTYPE_PAN_END,i,i,r,r,i,i,r,r)},t.PanZoomHandler.prototype.setPanCursor=function(e,n){t.Agent.isPlatformIE()||(e&&(this._panUpCursor="url("+e+") 8 8, auto"),n&&(this._panDownCursor="url("+n+") 8 8, auto"))},t.PanZoomHandler.prototype.getCursor=function(t){return null==t||this.isWithinBounds(t)?this._panOn?this._panDownCursor?this._panDownCursor:"move":this._panUpCursor?this._panUpCursor:"move":"inherit"},t.PanZoomHandler.prototype.isWithinBounds=function(t){var e=this._container.stageToLocal(t);return this._bounds.containsPoint(e.x,e.y)},t.TooltipManager=function(){},t.Obj.createSubclass(t.TooltipManager,t.Obj),t.TooltipManager.prototype.showDatatip=function(t,e,n,i){},t.TooltipManager.prototype.showTooltip=function(t,e,n,i,r,o){},t.TooltipManager.prototype.hideTooltip=function(){},t.CategoryRolloverHandler=function(e,n){this._callback=e,this._callbackObj=n,this._source=n,this._bHighlightMode=!1,this._hoverDelayCallback=null,this._highlightModeTimeout=null,this._hoverDelay=t.CategoryRolloverHandler._HOVER_DELAY},t.Obj.createSubclass(t.CategoryRolloverHandler,t.Obj),t.CategoryRolloverHandler._HOVER_DELAY=50,t.CategoryRolloverHandler._HOVER_TIMEOUT=1e3,t.CategoryRolloverHandler._FADE_OUT_OPACITY=.35,t.CategoryRolloverHandler.prototype.processEvent=function(t,e,n,i,r){if(t&&e&&0!=e.length){this._hoverDelayCallback&&(clearTimeout(this._hoverDelayCallback),this._hoverDelayCallback=null);var o=t._highlightType;if("over"==o){var a=this._bHighlightMode?this._hoverDelay:n;this._hoverDelayCallback=setTimeout(this.GetRolloverCallback(t,e,i,r),a),this._highlightModeTimeout&&(clearInterval(this._highlightModeTimeout),this._highlightModeTimeout=null)}else"out"==o&&this._bHighlightMode&&(this._hoverDelayCallback=setTimeout(this.GetRolloutCallback(t,e,i,r),this._hoverDelay))}},t.CategoryRolloverHandler.prototype.GetRolloverCallback=function(e,n,i,r){var o=function(){this._bHighlightMode=!0,t.CategoryRolloverHandler.highlight(e.categories,n,i,r),this._callback&&this._callback.call(this._callbackObj,e,this._source)};return t.Obj.createCallback(this,o)},t.CategoryRolloverHandler.prototype.GetRolloutCallback=function(e,n,i,r){var o=function(){t.CategoryRolloverHandler.highlight(e.categories,n,i,r),this.SetHighlightModeTimeout(),this._callback&&this._callback.call(this._callbackObj,e,this._source)};return t.Obj.createCallback(this,o)},t.CategoryRolloverHandler.highlight=function(e,n,i,r){if(n)for(var o=r?r:t.CategoryRolloverHandler._FADE_OUT_OPACITY,a=0;a<n.length;a++){var s=n[a];if(s&&s.getCategories){var l=i?t.CategoryRolloverHandler._hasAnyCategory(s,e):t.CategoryRolloverHandler._hasAllCategories(s,e),u=e&&e.length>0&&!l;t.CategoryRolloverHandler._highlightObj(s,u,o)}}},t.CategoryRolloverHandler._highlightObj=function(e,n,i){var r=n?i:1;if(e.highlight)e.highlight(n,r);else{var o=e.getDisplayables();t.CategoryRolloverHandler._updateAlpha(o,r)}},t.CategoryRolloverHandler._updateAlpha=function(t,e){if(t)for(var n=0;n<t.length;n++)t[n].setAlpha(e)},t.CategoryRolloverHandler._hasAnyCategory=function(e,n){return!(!e||!e.getCategories)&&t.ArrayUtils.hasAnyItem(e.getCategories(),n)},t.CategoryRolloverHandler._hasAllCategories=function(e,n){return!(!e||!e.getCategories)&&t.ArrayUtils.hasAllItems(e.getCategories(),n)},t.CategoryRolloverHandler.prototype.SetHighlightMode=function(t){this._bHighlightMode=t},t.CategoryRolloverHandler.prototype.SetHighlightModeTimeout=function(){var e=t.Obj.createCallback(this,function(){this.SetHighlightMode(!1)});this._highlightModeTimeout=setTimeout(e,t.CategoryRolloverHandler._HOVER_TIMEOUT)},t.CategoryRolloverHandler.prototype.setHoverDelay=function(t){this._hoverDelay=t},t.EventManager=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.EventManager,t.Obj),t.EventManager.CLEAR_SELECTION_ACTION_TYPE="clearSelectionActionType",t.EventManager.TOUCH_RESPONSE_TOUCH_START="touchStart",t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD="touchHold",t.EventManager.TOUCH_RESPONSE_AUTO="auto",t.EventManager._TOUCH_RESPONSE_PADDING_CHECK=10,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY="tooltipDisplayed",t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY="currentTarget",t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY="popupDisplayed",t.EventManager.prototype.Init=function(e,n,i){this._context=e,this._callback=n,this._callbackObj=i,this._touchMap={},this._selectionHandler=null,this._marqueeHandler=null,this.PopupHandler=new w(e,n,i),this.ClientBehaviorHandler=this.CreateClientBehaviorHandler(e,n,i),this.KeyboardHandler=null,this.RolloverHandler=this.CreateCategoryRolloverHandler(n,i),this.setTooltipsEnabled(!0);var r=e.getStage().getId();r||(r="undefinedId"),this.CustomTooltipManager=this._context.getCustomTooltipManager(),this.CustomTooltipManager.addTooltipEventListener(v.TOOLTIP_CLOSED_TYPE,this.OnActionTooltipClosed,this),this.CustomTooltipManager.addTooltipEventListener(v.TOOLTIP_STARTED_TYPE,this.OnActionTooltipStarted,this),this.TouchManager=null,t.Agent.isTouchDevice()&&(this.TouchManager=new t.TouchManager("touchmanager",this._context)),this._focusedObj=null,this._shouldDisplayKeyboardFocus=!1,this._rolloverTypes=[],this._keyboardHandlers=[this],this._currentKeyboardHandlerIdx=-1,this._dndListeners={}},t.EventManager.prototype.getCtx=function(){return this._context},t.EventManager.prototype.associate=function(e,n,i){e&&(e._logicalObjects&&!i||(e._logicalObjects=[]),e._logicalObjects.push({logicalObject:n,eventManager:this}),!t.Agent.isEnvironmentBrowser()&&e.getImpl().setLogicalObj&&e.getImpl().setLogicalObj(n))},t.EventManager.prototype.addListeners=function(e){if(e&&(t.Agent.isTouchDevice()?(this.hideTooltip(),e.addEvtListener(t.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),e.addEvtListener(t.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),e.addEvtListener(t.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this._preOnComponentTouchHoverStart,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this._preOnComponentTouchHoverMove,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this._preOnComponentTouchHoverEnd,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this._preOnComponentTouchHoverOut,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this._preOnComponentTouchHoverOver,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,this._preOnComponentTouchClick,this),this.TouchManager.addTouchEventListener(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this._preOnComponentTouchDblClick,this)):(e.addEvtListener(t.MouseEvent.CLICK,this.PreOnClick,!1,this),e.addEvtListener(t.MouseEvent.DBLCLICK,this.PreOnDblClick,!1,this),e.addEvtListener("contextmenu",this.PreOnContextMenu,!1,this),e.addEvtListener(t.MouseEvent.MOUSEMOVE,this.PreOnMouseMove,!1,this),e.addEvtListener(t.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),e.addEvtListener(t.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),e.addEvtListener(t.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),e.addEvtListener(t.MouseEvent.MOUSEUP,this.PreOnMouseUp,!1,this),e.addEvtListener(t.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),e.addEvtListener(t.KeyboardEvent.KEYPRESS,this.OnKeyPress,!1,this),e.addEvtListener(t.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),e.addEvtListener(m.FOCUS,this.OnFocus,!1,this),e.addEvtListener(m.BLUR,this.OnBlur,!1,this)),this.isDndSupported())){var n=this.getCtx();this.setDragSource(new t.DragSource(n)),this._addDndListener("dragstart",this.OnDndDragStart),this._addDndListener("drag",this.OnDndDrag),this._addDndListener("dragend",this.OnDndDragEnd),this._addDndListener("dragenter",this.OnDndDragEnter),this._addDndListener("dragover",this.OnDndDragOver),this._addDndListener("dragleave",this.OnDndDragLeave),this._addDndListener("drop",this.OnDndDrop);var i=n.getContainer();for(var r in this._dndListeners)t.ToolkitUtils.addDomEventListener(i,r,this._dndListeners[r],!1);this._context.addDndEventManager(this)}},t.EventManager.prototype._addDndListener=function(e,n){var i=t.SvgDocumentUtils.createStaticCallback(this.getCtx(),n,this);this._dndListeners[e]=i},t.EventManager.prototype.removeListeners=function(e){if(e&&(this.hideTooltip(),t.Agent.isTouchDevice()?(e.removeEvtListener(t.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),e.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),e.removeEvtListener(t.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this._preOnComponentTouchHoverStart,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this._preOnComponentTouchHoverMove,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this._preOnComponentTouchHoverEnd,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this._preOnComponentTouchHoverOut,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this._preOnComponentTouchHoverOver,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,this._preOnComponentTouchClick,this),this.TouchManager.removeTouchEventListener(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this._preOnComponentTouchDblClick,this)):(e.removeEvtListener(t.MouseEvent.CLICK,this.PreOnClick,!1,this),e.removeEvtListener(t.MouseEvent.DBLCLICK,this.PreOnDblClick,!1,this),e.removeEvtListener("contextmenu",this.PreOnContextMenu,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEMOVE,this.PreOnMouseMove,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),e.removeEvtListener(t.MouseEvent.MOUSEUP,this.PreOnMouseUp,!1,this),e.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),e.removeEvtListener(t.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),e.removeEvtListener(t.KeyboardEvent.KEYPRESS,this.OnKeyPress,!1,this),e.removeEvtListener(m.FOCUS,this.OnFocus,!1,this),e.removeEvtListener(m.BLUR,this.OnBlur,!1,this)),this.isDndSupported())){var n=this.getCtx().getContainer();for(var i in this._dndListeners)t.ToolkitUtils.removeDomEventListener(n,i,this._dndListeners[i],!1);this._dndListeners={},this._context.removeDndEventManager(this)}},t.EventManager.prototype.destroy=function(){this.CustomTooltipManager&&(this.CustomTooltipManager.removeTooltipEventListener(v.TOOLTIP_CLOSED_TYPE,this.OnActionTooltipClosed,this),this.CustomTooltipManager.removeTooltipEventListener(v.TOOLTIP_STARTED_TYPE,this.OnActionTooltipStarted,this))},t.EventManager.prototype.PreEventBubble=function(t){this.TouchManager.preEventBubble(t)},t.EventManager.prototype.setSelectionHandler=function(t){this._selectionHandler=t},t.EventManager.prototype.getSelectionHandler=function(t){return this._selectionHandler},t.EventManager.prototype.getPopupHandler=function(){return this.PopupHandler},t.EventManager.prototype.setMarqueeHandler=function(t){this._marqueeHandler=t},t.EventManager.prototype.setDragSource=function(e){this.DragSource=e,t.Agent.isTouchDevice()&&this.DragSource.setTouchManager(this.TouchManager)},t.EventManager.prototype.setContextMenuHandler=function(t){this.ContextMenuHandler=t},t.EventManager.prototype.setKeyboardHandler=function(e){t.Agent.isTouchDevice()||(this.KeyboardHandler=e)},t.EventManager.prototype.getKeyboardHandler=function(){return this.KeyboardHandler},t.EventManager.prototype.setFocusObj=function(t){var e=this.getFocus();if(t!=e&&(this.setFocus(t),e&&e.hideKeyboardFocusEffect(),this.ShowKeyboardFocusByDefault()&&t.showKeyboardFocusEffect(),this._currentKeyboardHandlerIdx>-1&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length)){var n=this._keyboardHandlers[this._currentKeyboardHandlerIdx];n!=this&&n.hideKeyboardFocusEffect()}this.setCurrentKeyboardHandler(this)},t.EventManager.prototype.setFocus=function(t){this.KeyboardHandler&&(this._focusedObj=t)},t.EventManager.prototype.getFocus=function(){return this.KeyboardHandler?this._focusedObj:null},t.EventManager.prototype.setFocused=function(t){var e=this.getFocus();e&&this.KeyboardHandler&&(t?this._shouldDisplayKeyboardFocus&&this._currentKeyboardHandlerIdx>=0&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length&&this._keyboardHandlers[this._currentKeyboardHandlerIdx]===this&&e.showKeyboardFocusEffect():e.hideKeyboardFocusEffect()),t||(this._shouldDisplayKeyboardFocus=!1)},t.EventManager.prototype.ShowKeyboardFocusByDefault=function(){return!1},t.EventManager.prototype.setTooltipsEnabled=function(t){this._tooltipsEnabled=t},t.EventManager.prototype.getTooltipsEnabled=function(t){return this._tooltipsEnabled},t.EventManager.prototype.GetLogicalObject=function(t,e){var n=this.GetLogicalObjectAndDisplayable(t,e);return n?n.logicalObject:null},t.EventManager.prototype.GetLogicalObjectAndDisplayable=function(t,e){for(var n=t;n;){if(n._logicalObjects)for(var i=0;i<n._logicalObjects.length;i++){var r=n._logicalObjects[i];if(r.eventManager==this){var o={};return o.logicalObject=r.logicalObject,o.displayable=n,o}}n=e?null:n.getParent()}return null},t.EventManager.prototype._getShowPopupBehaviors=function(t){if(t&&t.getShowPopupBehaviors)return t.getShowPopupBehaviors()},t.EventManager.prototype._getClientBehaviors=function(t){if(t&&t.getClientBehaviors)return t.getClientBehaviors()},t.EventManager.prototype.GetContextMenuType=function(e){var n=this.getSelectionHandler(e),i=n?n.getSelection().length:0;return i<=0?t.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU:1==i?t.ContextMenuHandler.TYPE_CONTEXT_MENU:t.ContextMenuHandler.TYPE_MULTI_SELECT_CONTEXT_MENU},t.EventManager.prototype.GetTooltipColor=function(t,e,n){if(t&&t.getDatatipColor)return t.getDatatipColor()},t.EventManager.prototype.FireEvent=function(t,e){this._callback&&this._callback.call(this._callbackObj,t,e)},t.EventManager.prototype.fireSelectionEvent=function(e){var n=this.getSelectionHandler(e);if(n){var i=n.getSelectedIds(),r=t.EventFactory.newSelectionEvent(i);this._callback.call(this._callbackObj,r)}},t.EventManager.prototype.PreOnClick=function(e){if(this.IsDoubleClickable(e)){if(this._clickTimer&&this._clickTimer.isRunning()){var n=this._savedClickEvent;if(e.pageX==n.pageX&&e.pageY==n.pageY)return void this._savedClickCount++;this._clickTimer.stop(),this._onClickTimerEnd()}this._savedClickEvent=e,this._savedClickCount=1,this._clickTimer||(this._clickTimer=new t.Timer(this._context,250,this._onClickTimerEnd,this,1)),this._clickTimer.reset(),this._clickTimer.start()}else this._propagateEvent(t.MouseEvent.CLICK,e,this.OnClick)},t.EventManager.prototype._onClickTimerEnd=function(){var e=this._savedClickEvent;this._savedClickEvent=null,this._savedClickCount=0,e&&this._propagateEvent(t.MouseEvent.CLICK,e,this.OnClick)},t.EventManager.prototype.OnClick=function(e){var n=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));if(this.OnClickInternal(e),this.ProcessSelectionEventHelper(n,e.ctrlKey),this._shouldDisplayKeyboardFocus=!1,n){if(this.KeyboardHandler&&n.getNextNavigable){var i=n.getNextNavigable(e);this.setFocusObj(i)}var r=!1;if(this._hasEventInfo(e)&&(r=this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!r){var o=new t.Point(e.pageX,e.pageY);r=this.PopupHandler.processPopupHelper(n,this._getShowPopupBehaviors(n),[t.ShowPopupBehavior.TRIGGER_TYPE_ACTION,t.ShowPopupBehavior.TRIGGER_TYPE_CLICK],o,e),r&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}if(!r){var a=this._getClientBehaviors(n);a&&(r=this.ClientBehaviorHandler.processClick(n,a))}if(!r&&n.isCommandComponent&&n.isCommandComponent()){var e=t.EventFactory.newActionEvent("action",n.getId());t.EventManager._addContextInfo(n,e),this._callback.call(this._callbackObj,e)}}},t.EventManager.prototype.IsDoubleClickable=function(e){for(var n=e.target,i=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));n;){var r=this.GetLogicalObject(n,!0);if(r){if(r.isDoubleClickable&&r.isDoubleClickable()||this.PopupHandler.hasPopup(i,[t.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK]))return!0;if(!this.IsPropagationEnabled(t.MouseEvent.DBLCLICK,null,n))return!1}n=n.getParent()}return!1},t.EventManager.prototype.ProcessSelectionEventHelper=function(t,e){var n=this.getSelectionHandler(t);if(n){var i=n.processClick(t,e);i&&this.fireSelectionEvent(t)}},t.EventManager.prototype.PreOnDblClick=function(e){var n=this.IsDoubleClickable(e);(n&&2===this._savedClickCount||!n)&&this._propagateEvent(t.MouseEvent.DBLCLICK,e,this.OnDblClick),this._savedClickCount=0},t.EventManager.prototype.OnDblClick=function(e){var n=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));if(this._clickTimer&&this._clickTimer.isRunning())this._clickTimer.stop(),this._savedClickEvent=null;else if(t.Agent.isPlatformIE()&&t.Agent.getVersion()<11){if(!n)return;if(!(n.isDoubleClickable&&n.isDoubleClickable()||this.PopupHandler.hasPopup(n,[t.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK])))return void this.OnClick(e)}if(this.OnDblClickInternal(e),n){var i=!1;if(this._hasEventInfo(e)&&(i=this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!i){var r=new t.Point(e.pageX,e.pageY);i=this.PopupHandler.processPopupHelper(n,this._getShowPopupBehaviors(n),[t.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK],r,e),i&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}}},t.EventManager.prototype.PreOnContextMenu=function(t){this._propagateEvent("contextmenu",t,this.OnContextMenu)},t.EventManager.prototype.OnContextMenu=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e&&e.getNextNavigable&&this.setFocus(e),this._onContextMenuHelper(t,e)},t.EventManager.prototype._onContextMenuHelper=function(e,n){this.OnContextMenuInternal(e);var i=this._processActionPopup(this.GetCurrentTargetForEvent(e),new t.Point(e.pageX,e.pageY));if(i&&e.preventDefault(),n&&n.isSelectable&&n.isSelectable()&&this.ProcessSelectionEventHelper(n,e.ctrlKey),this.ContextMenuHandler){var r=this.GetContextMenuType(n);this.ProcessContextMenuHandler(e,r)}else this.ProcessContextMenuPopup(e,n)},t.EventManager.prototype.ProcessContextMenuHandler=function(t,e){var n=this.ContextMenuHandler.show(t,e);return!!n&&(this._context.getTooltipManager().hideTooltip(),this.PopupHandler.HidePopup(t),this._callback.call(this._callbackObj,n),!0)},t.EventManager.prototype.ProcessContextMenuPopup=function(e,n){var i=!1;if(this._hasEventInfo(e)&&(i=this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!i){var r=this._getShowPopupBehaviors(n);if(r){var o,a;if(t.Agent.isTouchDevice()){var s=e.touch;o=s.pageX,a=s.pageY}else o=e.pageX,a=e.pageY;var l=new t.Point(o,a);i=this.PopupHandler.processPopupHelper(n,r,[t.ShowPopupBehavior.TRIGGER_TYPE_CONTEXT_MENU],l,e)}i&&(this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),e.preventDefault())}},t.EventManager.prototype.OnKeyDown=function(e){this._bKeyDown=!0;var n,i,r=e.keyCode,o=!1;for(n=this._currentKeyboardHandlerIdx<0||this._currentKeyboardHandlerIdx>this._keyboardHandlers.length?r==t.KeyboardEvent.TAB&&e.shiftKey?this._keyboardHandlers.length-1:0:this._currentKeyboardHandlerIdx,i=r==t.KeyboardEvent.TAB&&e.shiftKey?-1:1,n;n>=0&&n<this._keyboardHandlers.length&&!o;n+=i){var a=this._keyboardHandlers[n];o=a===this?this.ProcessKeyboardEvent(e):a.handleKeyboardEvent(e),o&&(this._currentKeyboardHandlerIdx=n)}return o||e.keyCode!=t.KeyboardEvent.UP_ARROW&&e.keyCode!=t.KeyboardEvent.DOWN_ARROW&&e.keyCode!=t.KeyboardEvent.LEFT_ARROW&&e.keyCode!=t.KeyboardEvent.RIGHT_ARROW||t.EventManager.consumeEvent(e),o||r!=t.KeyboardEvent.TAB||(this._currentKeyboardHandlerIdx=-1),o},t.EventManager.prototype.handleKeyboardEvent=function(t){return this.OnKeyDown(t)},t.EventManager.prototype.hideKeyboardFocusEffect=function(){var t=this.getFocus();t&&t.isShowingKeyboardFocusEffect()&&t.hideKeyboardFocusEffect()},t.EventManager.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;this.hideTooltip();var n=this.getFocus(),i=null;if(e.keyCode==t.KeyboardEvent.TAB&&n){if(n.isShowingKeyboardFocusEffect()){this._bKeyDown=!1,n.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(e,n,!1);var r;return r=e.shiftKey?this._context.previousKeyboardFocus():this._context.nextKeyboardFocus(),!!r&&(r.FireListener(e,!1),t.EventManager.consumeEvent(e),!0)}return this.ShowFocusEffect(e,n),this.ProcessRolloverEvent(e,n,!0),t.EventManager.consumeEvent(e),!0}if(n&&this.KeyboardHandler.isContextMenuEvent(e)){var o;if(n.getContextMenuLocation)o=n.getContextMenuLocation();else{var a=n.getKeyboardBoundingBox();o=t.Agent.isRightToLeft(this._context)?new t.Point(a.x,a.y):new t.Point(a.x+a.w,a.y)}var s=t.DomEventFactory.generateMouseEventFromKeyboardEvent(e,this._context,t.MouseEvent.CLICK,this._context.getStage(),o.x,o.y);return s.ctrlKey=!1,this._onContextMenuHelper(s,n),!0}return i=this.KeyboardHandler.processKeyDown(e),!!i&&(this.setFocus(i),this._shouldDisplayKeyboardFocus=!0,n&&(n.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(e,n,!1)),this.KeyboardHandler.isSelectionEvent(e)?this.ProcessSelectionEventHelper(i,e.shiftKey):this.KeyboardHandler.isMultiSelectEvent(e)&&this.ProcessSelectionEventHelper(i,e.ctrlKey),this.ShowFocusEffect(e,i),this.ProcessRolloverEvent(e,i,!0),!0)},t.EventManager.prototype.ShowFocusEffect=function(t,e){e.showKeyboardFocusEffect();var n=e.getKeyboardTooltipLocation?e.getKeyboardTooltipLocation():e.getKeyboardBoundingBox(this.getCtx().getStage()).getCenter(),i=this.getCtx().stageToPageCoords(n.x,n.y);this.ProcessObjectTooltip(t,i.x,i.y,e,e.getTargetElem()),this.UpdateActiveElement(e)},t.EventManager.prototype.OnKeyUp=function(e){this._bKeyDown=!1,this._handleExternalKeyboardFocus===!0&&e.keyCode==t.KeyboardEvent.TAB&&(this._handleExternalKeyboardFocus=!1,this._callbackObj.dispatchDisplayableEvent(t.KeyboardEvent.KEYDOWN,e)),this.KeyboardHandler.processKeyUp(e,[t.ShowPopupBehavior.TRIGGER_TYPE_KEY_UP])},t.EventManager.prototype.OnKeyPress=function(e){this.KeyboardHandler.processKeyUp(e,[t.ShowPopupBehavior.TRIGGER_TYPE_KEY_PRESS])},t.EventManager.prototype.PreOnMouseMove=function(e){this._propagateEvent(t.MouseEvent.MOUSEMOVE,e,this.OnMouseMove)},t.EventManager.prototype.OnMouseMove=function(e){var n=e.pageX,i=e.pageY,r=this._context.pageToStageCoords(n,i);if(this._marqueeHandler){var o=this._marqueeHandler.processDragMove(r,e.ctrlKey);o&&this._callback.call(this._callbackObj,o)}var a=this.GetCurrentTargetForEvent(e),s=this.GetLogicalObject(a);if(s){this.ProcessObjectTooltip(e,n,i,s,a);var l=new t.Point(n,i);if(this.PopupHandler.processMouseMove(l),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var u=this.GetLogicalObjectAndDisplayable(a);u&&this.PopupHandler.processMousePopup(s,this._getShowPopupBehaviors(s),l,u.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}this.DragSource&&!e.dragSourceSet&&this.IsDragCandidate(s)&&(this.DragSource.setDragCandidate(s),e.dragSourceSet=!0)}},t.EventManager.prototype.PreOnMouseOver=function(e){this._propagateEvent(t.MouseEvent.MOUSEOVER,e,this.OnMouseOver),this._handlePreOverEvent(e)},t.EventManager.prototype._getDisplayableHierarchy=function(t,e,n){for(var i=[],r=t;r;){var o=!0;e&&(o=e.call(n,r)),o&&i.unshift(r),r=r.getParent()}return i},t.EventManager.prototype._getRolloverHierarchy=function(t){return this._getDisplayableHierarchy(t,this._isRolloverType,this)},t.EventManager.prototype._isRolloverType=function(t){var e=this.GetLogicalObject(t,!0);if(e)for(var n=0;n<this._rolloverTypes.length;n++)if(e instanceof this._rolloverTypes[n])return!0;return!1},t.EventManager.prototype.addRolloverType=function(t){this._rolloverTypes.push(t)},t.EventManager.prototype.removeRolloverType=function(e){var n=t.ArrayUtils.getIndex(this._rolloverTypes,e);n!=-1&&this._rolloverTypes.splice(n,1)},t.EventManager.prototype.OnRollOver=function(t){},t.EventManager.prototype.OnMouseOver=function(e){var n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObjectAndDisplayable(n),r=null;i&&(r=i.logicalObject);var o=new t.Point(e.pageX,e.pageY);if(r){var a=this.getSelectionHandler(r);a&&a.processMouseOver(r),this.ProcessRolloverEvent(e,r,!0),this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)||i&&this.PopupHandler.processMousePopup(r,this._getShowPopupBehaviors(r),o,i.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),this.UpdateActiveElement(r,n)}},t.EventManager.prototype.PreOnMouseOut=function(e){this._handlePreOutEvent(t.MouseEvent.MOUSEOUT,e,this.OnMouseOut)},t.EventManager.prototype.OnRollOut=function(t){},t.EventManager.prototype.OnMouseOut=function(e){var n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObject(n);if(i){var r=this.GetLogicalObject(e.relatedTarget);if(i!=r){var o=this.getSelectionHandler(i);if(o&&o.processMouseOut(i),this.ProcessRolloverEvent(e,i,!1),this.hideTooltip(),this.DragSource&&!e.dragSourceSet&&(this.DragSource.setDragCandidate(null),e.dragSourceSet=!0),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var a=new t.Point(e.pageX,e.pageY),s=this.GetLogicalObjectAndDisplayable(n);s&&this.PopupHandler.processMousePopup(i,this._getShowPopupBehaviors(i),a,s.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}}}},t.EventManager.prototype.PreOnMouseDown=function(e){this._propagateEvent(t.MouseEvent.MOUSEDOWN,e,this.OnMouseDown)},t.EventManager.prototype.OnMouseDown=function(e){var n=this.isInActionPopup();if(n&&this.CustomTooltipManager.closeActionTooltip(),this._marqueeHandler){var i=this._context.pageToStageCoords(e.pageX,e.pageY),r=this._marqueeHandler.processDragStart(i,e.ctrlKey);r&&this._callback.call(this._callbackObj,r)}var o=this.GetCurrentTargetForEvent(e),a=this.GetLogicalObject(o);if(this.DragSource&&!e.dragSourceSet&&this.IsDragCandidate(a)&&(this.DragSource.setDragCandidate(a),e.dragSourceSet=!0),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var s=new t.Point(e.pageX,e.pageY),l=this.GetLogicalObjectAndDisplayable(o);l&&this.PopupHandler.processMousePopup(a,this._getShowPopupBehaviors(a),s,l.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype.PreOnMouseUp=function(e){this._propagateEvent(t.MouseEvent.MOUSEUP,e,this.OnMouseUp)},t.EventManager.prototype.OnMouseUp=function(e){if(this._marqueeHandler){var n=this._context.pageToStageCoords(e.pageX,e.pageY),i=this._marqueeHandler.processDragEnd(n,e.ctrlKey);i&&this._callback.call(this._callbackObj,i)}var r=this.GetCurrentTargetForEvent(e),o=this.GetLogicalObject(r);if(!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var a=new t.Point(e.pageX,e.pageY),s=this.GetLogicalObjectAndDisplayable(r);s&&this.PopupHandler.processMousePopup(o,this._getShowPopupBehaviors(o),a,s.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype._processTouchTooltip=function(e){var n=this.TouchManager.getTooltipInfo(),i=n.touchIds,r=n.tooltipTarget;if(!(this.GetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||0!=i.length&&r))return void this.hideTooltip();var o=this.TouchManager.calcAveragePosition(i),a=this.GetLogicalObject(r);this.ProcessObjectTooltip(e,o.x,o.y,a,null)},t.EventManager.prototype.OnTouchStartBubble=function(e){if(this.PreEventBubble(e),e.isInitialTouch()&&(this._popupJustClosed=!1),this.DragSource){var n=this.GetLogicalObject(e.target);!e.dragSourceSet&&this.IsDragCandidate(n)&&(this.DragSource.setDragCandidate(n),e.dragSourceSet=!0)}var i=this.isInActionPopup();i&&(this.CustomTooltipManager.closeActionTooltip(),this.TouchManager.resetTouchHold()),this.HandleImmediateTouchStartInternal(e),this.TouchManager.fireLogicalEvents(e),this.TouchManager.postEventBubble(e),this._isTouchResponseTouchStart()?(this._touchResponseHandled=!0,this.TouchManager.processAssociatedTouchAttempt(e,t.EventManager.TOUCH_RESPONSE_TOUCH_START,this._saveTouchStart,this)):(this._touchResponseHandled=!1,this._processTouchTooltip(e))},t.EventManager.prototype.OnTouchMoveBubble=function(t){this.PreEventBubble(t),this.TouchManager&&(this._prevActionClear=!1,this.HandleImmediateTouchMoveInternal(t),this.TouchManager.fireLogicalEvents(t),this.TouchManager.postEventBubble(t),this._processTouchTooltip(t))},t.EventManager.prototype._handleTouchEndTimer=function(){for(var t=0;t<this._touchEndTimer.length;t++){var e=this._touchEndTimer[t];e.timer.stop();var n=e.event;this.TouchManager&&(this.HandleImmediateTouchEndInternal(n),this.TouchManager.fireLogicalEvents(n),this.TouchManager.postEventBubble(n))}this.DragSource&&!n.dragSourceSet&&(this.DragSource.setDragCandidate(null),n.dragSourceSet=!0),this._touchEndTimer=new Array},t.EventManager.prototype.OnTouchEndBubble=function(e){this.PreEventBubble(e);var n=new t.Timer(this._context,0,this._handleTouchEndTimer,this,1);this._touchEndTimer||(this._touchEndTimer=new Array),this._touchEndTimer.push({event:e,timer:n}),n.start()},t.EventManager.prototype.HandleImmediateTouchStartInternal=function(t){},t.EventManager.prototype.HandleImmediateTouchMoveInternal=function(t){},t.EventManager.prototype.HandleImmediateTouchEndInternal=function(t){},t.EventManager.prototype._preOnComponentTouchHoverStart=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,e,this.OnComponentTouchHoverStart)},t.EventManager.prototype.OnComponentTouchHoverStart=function(t){this.HandleTouchHoverStartInternal(t),this._touchResponseHandled||this.HandleTouchActionsStart(t)},t.EventManager.prototype._preOnComponentTouchHoverMove=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,e,this.OnComponentTouchHoverMove)},t.EventManager.prototype.OnComponentTouchHoverMove=function(t){this.HandleTouchHoverMoveInternal(t),this._touchResponseHandled||this.HandleTouchActionsMove(t)},t.EventManager.prototype._preOnComponentTouchHoverEnd=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,e,this.OnComponentTouchHoverEnd)},t.EventManager.prototype.OnComponentTouchHoverEnd=function(e){var n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObject(n);if(this.HandleTouchHoverEndInternal(e),this.ProcessTouchContextMenu(e,i),this._callbackObj instanceof t.BaseComponent){var r=this.getCtx().getStageAbsolutePosition(),o=e.touch.pageX,a=e.touch.pageY;o<=r.x+this._callbackObj.getWidth()&&o>=r.x&&a<=r.y+this._callbackObj.getHeight()&&a>=r.y&&this._callback.call(this._callbackObj,t.EventFactory.newTouchHoldReleaseEvent(e.getNativeEvent()))}this._touchResponseHandled||this.HandleTouchActionsEnd(e)},t.EventManager.prototype._preOnComponentTouchHoverOut=function(e){this._handlePreOutEvent(t.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,e,this.OnComponentTouchHoverOut)},t.EventManager.prototype.OnComponentTouchHoverOut=function(t){this.HandleTouchHoverOutInternal(t),this._touchResponseHandled||this.HandleTouchActionsOut(t)},t.EventManager.prototype._preOnComponentTouchHoverOver=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,e,this.OnComponentTouchHoverOver),
this._handlePreOverEvent(e)},t.EventManager.prototype.OnComponentTouchHoverOver=function(t){this.HandleTouchHoverOverInternal(t),this._touchResponseHandled||this.HandleTouchActionsOver(t)},t.EventManager.prototype._preOnComponentTouchDblClick=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,e,this.OnComponentTouchDblClick)},t.EventManager.prototype.OnComponentTouchDblClick=function(e){var n=this.GetCurrentTargetForEvent(e),i=e.touch,r=this.GetLogicalObject(n),o=new t.Point(i.pageX,i.pageY),a=!1;this._hasEventInfo(e)&&(a=this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),a||this.PopupHandler.processPopupHelper(r,this._getShowPopupBehaviors(r),[t.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK],o,e)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),this.HandleTouchDblClickInternal(e)},t.EventManager.prototype._preOnComponentTouchClick=function(e){this._propagateEvent(t.ComponentTouchEvent.TOUCH_CLICK_TYPE,e,this.OnComponentTouchClick)},t.EventManager.prototype.OnComponentTouchClick=function(e){var n=this.GetCurrentTargetForEvent(e),i=e.touch,r=this.GetLogicalObject(n),o=new t.Point(i.pageX,i.pageY),a=!1;if(this._hasEventInfo(e)&&(a=this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),a||this.PopupHandler.processPopupHelper(r,this._getShowPopupBehaviors(r),[t.ShowPopupBehavior.TRIGGER_TYPE_ACTION,t.ShowPopupBehavior.TRIGGER_TYPE_CLICK],o,e,!0)&&(this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),a=!0),!a){var s=this._getClientBehaviors(r);s&&this.ProcessClientBehaviorForTouch(r,s)}var l=this.HandleTouchClickInternal(e);if(!l&&(this._isTouchResponseTouchStart()||this._processTouchSelection(r),this._popupJustClosed||this._processTouchSelectionClear(r),this.CustomTooltipManager.displayActionPopup()&&(this.UpdateActionTooltipLaunchedFeedback(n,new t.Point(i.pageX,i.pageY)),this.CustomTooltipManager.startActionPopupAtPosition(i.pageX,i.pageY,n)),r&&!a&&r.isCommandComponent&&r.isCommandComponent())){var e=t.EventFactory.newActionEvent("action",r.getId());t.EventManager._addContextInfo(r,e),this._callback.call(this._callbackObj,e)}},t.EventManager.prototype._processTouchSelection=function(t){var e=!1,n=this.getSelectionHandler(t);n&&t&&t.isSelectable&&t.isSelectable()&&(e=n.processClick(t,!0),e&&this.fireSelectionEvent(t)),this._prevActionClear=!1},t.EventManager.prototype._processTouchSelectionClear=function(e){var n=!1,i=this.getSelectionHandler(e);if(i&&(!e||!e.isSelectable||!e.isSelectable())&&!this._prevActionClear){var r=!1;if(this.isClearMenuAllowed()){var o=i.getType();o==t.SelectionHandler.TYPE_MULTIPLE&&i.getSelectedCount()>1&&(r=!0)}r?this.addClearAllActionItem():(n=i.processClick(null,!1),n&&this.fireSelectionEvent(e))}},t.EventManager.prototype.OnActionTooltipClosed=function(e){var n=e.target;this._popupJustClosed=!0,this._isInActionPopup=!1;var i=this.CustomTooltipManager.getActionTooltip();i.containsMenuId(t.EventManager.CLEAR_SELECTION_ACTION_TYPE)&&(this._prevActionClear=!0),this.CustomTooltipManager.clearActionTooltip(),this.UpdateActionTooltipClosedFeedback(n)},t.EventManager.prototype.OnActionTooltipStarted=function(t){this._isInActionPopup=!0},t.EventManager.prototype._getTooltipInfo=function(t,e,n,i){var r=null,o=!1;return e&&e.getDatatip&&(r=e.getDatatip(t,n,i),r&&(o=!0)),!r&&e&&e.getTooltip&&(r=e.getTooltip(t,n,i)),{text:r,isDatatip:o}},t.EventManager.prototype._processShowTooltip=function(t,e,n,i){if(this.getTooltipsEnabled(e)){var r=this._context.pageToStageCoords(n,i),o=r.x,a=r.y,s=this._getTooltipInfo(t,e,o,a),l=s.isDatatip,u=s.text;if(u){this.CustomTooltipManager.clearActionTooltip();var h=this.GetTooltipColor(e,o,a),c=this._context.getTooltipManager();return l?c.showDatatip(n,i,u,h):c.showTooltip(n,i,u,null,!0,h),this.TooltipLaunched(u,h),!0}this.hideTooltip()}else this.hideTooltip();return!1},t.EventManager.prototype.hideTooltip=function(){var t=this._context.getTooltipManager();t&&t.hideTooltip(),this.TooltipHidden()},t.EventManager.prototype.ProcessTouchContextMenu=function(e,n){if(!this.ContextMenuHandler)return void this.ProcessContextMenuPopup(e,n);var i=this.GetContextMenuType(n),r=!1;return n&&n.isSelected&&n.isSelected()?r=!0:(n&&n.isSelectable&&n.isSelectable()||(i=t.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU),i==t.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU&&(r=!0)),!!r&&this.ProcessContextMenuHandler(e,i)},t.EventManager.prototype._processActionPopup=function(t,e){return this.CustomTooltipManager.displayActionPopup()?(this.SetupTouchTooltip(t),this.UpdateActionPopupShownFeedback(t),this.CustomTooltipManager.startActionPopupAtPosition(e.x,e.y,t),!0):(this.UpdateActionPopupHiddenFeedback(t),!1)},t.EventManager.prototype.TooltipLaunched=function(t,e){},t.EventManager.prototype.TooltipHidden=function(){},t.EventManager.prototype.SetupTouchTooltip=function(t){var e=this.GetLogicalObject(t),n=this.CustomTooltipManager.getActionTooltip(),i=n.getTooltipBorderColor();if(null==i){var r=this.GetTooltipColor(e);n.setTooltipBorderColor(r)}},t.EventManager.prototype.OnContextMenuInternal=function(t){},t.EventManager.prototype.OnClickInternal=function(t){},t.EventManager.prototype.OnDblClickInternal=function(t){},t.EventManager.prototype.HandleTouchHoverStartInternal=function(t){},t.EventManager.prototype.HandleTouchHoverMoveInternal=function(t){},t.EventManager.prototype.HandleTouchHoverEndInternal=function(t){},t.EventManager.prototype.HandleTouchHoverOverInternal=function(t){},t.EventManager.prototype.HandleTouchHoverOutInternal=function(t){},t.EventManager.prototype.HandleTouchClickInternal=function(t){return!1},t.EventManager.prototype.HandleTouchDblClickInternal=function(t){},t.EventManager.prototype.UpdateActionPopupShownFeedback=function(t){},t.EventManager.prototype.UpdateActionPopupHiddenFeedback=function(t){},t.EventManager.prototype.UpdateActionTooltipClosedFeedback=function(t){},t.EventManager.prototype.UpdateActionTooltipLaunchedFeedback=function(t,e){},t.EventManager.prototype.isInActionPopup=function(){return this._isInActionPopup},t.EventManager.prototype.GetClearSelectionText=function(){return t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"CLEAR_SELECTION")},t.EventManager.prototype.addClearAllActionItem=function(){this.addActionTooltipMenuItem(t.EventManager.CLEAR_SELECTION_ACTION_TYPE,this.GetClearSelectionText(),this._actionTooltipClearListener,this);var e=this.CustomTooltipManager.getActionTooltip();e&&e.setTooltipBorderColor(N.DEFAULT_BORDER_COLOR)},t.EventManager.prototype.isClearMenuAllowed=function(){return!0},t.EventManager.prototype.addActionTooltipMenuItem=function(t,e,n,i){var r=this.CustomTooltipManager.getActionTooltip();r.addMenuItem(new k(this._context,t,e,n,i))},t.EventManager.prototype.ContextMenuItemListener=function(t){var e=t.menuItem,n=e.getEvent();this._callback.call(this._callbackObj,n)},t.EventManager.prototype._actionTooltipClearListener=function(t){var e=t.target,n=this.GetLogicalObject(e),i=this.getSelectionHandler(n).processClick(null,!1);i&&this.fireSelectionEvent(n)},t.EventManager.prototype._actionTooltipSelectListener=function(t){var e=t.target,n=this.GetLogicalObject(e),i=this.getSelectionHandler(n).processClick(n,!0);i&&this.fireSelectionEvent(n)},t.EventManager.consumeEvent=function(t){t&&(t.preventDefault(),t.stopPropagation())},t.EventManager._addContextInfo=function(e,n){if(e.getContextCallback&&e.getContextCallbackObj){var i=e.getContextCallback(),r=e.getContextCallbackObj();i&&r&&i.call(r,n)}else n[t.BaseComponentEvent.CLIENT_ROW_KEY]=e.getId()},t.EventManager.prototype.IsPropagationEnabled=function(t,e,n){return!1},t.EventManager.prototype.GetCurrentTargetForEvent=function(e){var n=this.GetEventInfo(e,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY);return n?n:e.target},t.EventManager.prototype._propagateEvent=function(e,n,i){var r=this.GetLogicalObject(n.target);if(r){var o=n.target;try{for(;o;){var a=this.GetLogicalObject(o,!0);if(a&&(this.SetEventInfo(n,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,o),i.call(this,n),!this.IsPropagationEnabled(e,n,o)))return;o=o.getParent()}}finally{this.SetEventInfo(n,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null)}}else i.call(this,n)},t.EventManager.prototype.ConsumesClick=function(t){return t.isSelectable&&t.isSelectable()||t.isClickEventPropagationStopped&&t.isClickEventPropagationStopped()||this._hasClickPopup(t)||this._hasClickClientBehavior(t)},t.EventManager.prototype._hasClickPopup=function(e){return this.PopupHandler.hasPopup(e,[t.ShowPopupBehavior.TRIGGER_TYPE_ACTION,t.ShowPopupBehavior.TRIGGER_TYPE_CLICK])},t.EventManager.prototype.addComponentKeyboardHandler=function(t){t&&this._keyboardHandlers.push(t)},t.EventManager.prototype.addComponentKeyboardHandlerAt=function(t,e){e>this._keyboardHandlers.length||t&&(this._keyboardHandlers.splice(e,0,t),e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx++)},t.EventManager.prototype.removeComponentKeyboardHandler=function(t){if(t){var e=this._findHandler(t);e>-1&&(this._currentKeyboardHandlerIdx==e&&0==e?this._currentKeyboardHandlerIdx=0:e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx--,this._keyboardHandlers.splice(e,1))}},t.EventManager.prototype._findHandler=function(t){for(var e=-1,n=this._keyboardHandlers.length,i=0;i<n;i++)this._keyboardHandlers[i]===t&&(e=i);return e},t.EventManager.prototype.setCurrentKeyboardHandler=function(t){var e=this._findHandler(t);e>=0&&(this._currentKeyboardHandlerIdx=e)},t.EventManager.prototype._hasClickClientBehavior=function(e){var n=this._getClientBehaviors(e);if(n)for(var i=0;i<n.length;i++){var r=n[i];if(r&&(r.getTriggerType()==t.ClientBehavior.TRIGGER_TYPE_ACTION||r.getTriggerType()==t.ClientBehavior.TRIGGER_TYPE_CLICK))return!0}return!1},t.EventManager.prototype.CreateClientBehaviorHandler=function(e,n,i){return new t.ClientBehaviorHandler(e,n,i)},t.EventManager.prototype.ProcessClientBehaviorForTouch=function(t,e){return this.ClientBehaviorHandler.processClick(t,e)},t.EventManager.prototype.IsDragCandidate=function(t){return!0},t.EventManager._getActiveElementId=function(){var t="_dvtActiveElement";return t+Math.floor(1e9*Math.random())},t.EventManager.prototype.UpdateActiveElement=function(e,n){if(n||(n=e.getDisplayable?e.getDisplayable():e.getDisplayables?e.getDisplayables()[0]:e),n instanceof t.Displayable){if(e.getAriaLabel){var i=e.getAriaLabel();i&&n.setAriaProperty("label",i)}else for(;!n.getAriaRole()&&n.getParent();)n=n.getParent();n!=this.getCtx().getStage()&&this.getCtx().setActiveElement(n)}},t.EventManager.prototype._handlePreOverEvent=function(e){var n=this._getRolloverHierarchy(e.target),i=this._getRolloverHierarchy(e.relatedTarget);if(n.length>0){var r=n[n.length-1],o=0==i.length?null:i[i.length-1];if(r!=o)try{this.SetEventInfo(e,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,r),this.OnRollOver(e)}finally{this.SetEventInfo(e,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null)}}},t.EventManager.prototype._handlePreOutEvent=function(e,n,i){var r=this.GetLogicalObject(n.relatedTarget),o=n.target;try{var a=this._getRolloverHierarchy(n.target),s=this._getRolloverHierarchy(n.relatedTarget);if(a.length>0){var l=a[a.length-1],u=0==s.length?null:s[s.length-1];l!=u&&(this.SetEventInfo(n,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,l),this.OnRollOut(n))}var h=this.GetLogicalObject(o);if(h)for(this.PopupHandler.processMouseOut(h,this._getDisplayableHierarchy(n.relatedTarget),n);o;){var c=this.GetLogicalObject(o,!0);if(c){if(r===c)break;if(this.SetEventInfo(n,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,o),i.call(this,n),!this.IsPropagationEnabled(e,n,o))break}o=o.getParent()}else i.call(this,n)}finally{this.SetEventInfo(n,t.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null),n.relatedTarget instanceof t.Displayable||this._context.clearStageAbsolutePosition()}},t.EventManager.prototype.getTouchManager=function(){return this.TouchManager},t.EventManager.prototype.endDrag=function(){return null},t.EventManager.prototype._hasEventInfo=function(t){if(null==t)return!1;var e=t.getNativeEvent();return!!e._eventInfo},t.EventManager.prototype.GetEventInfo=function(t,e){if(!this._hasEventInfo(t)||null==e)return null;var n;if(this.StoreInfoByEventType(e)){var i=t.type?t.type:t.getType();n=t.getNativeEvent()._eventInfo[i]}else n=t.getNativeEvent()._eventInfo;return n?n[e]:null},t.EventManager.prototype.SetEventInfo=function(t,e,n){if(null!=t&&null!=e){var i=t.getNativeEvent();if(i._eventInfo||(i._eventInfo={}),this.StoreInfoByEventType(e)){var r=t.type?t.type:t.getType();i._eventInfo[r]||(i._eventInfo[r]={}),i._eventInfo[r][e]=n}else i._eventInfo[e]=n}},t.EventManager.prototype.StoreInfoByEventType=function(e){return e!=t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY},t.EventManager.prototype.ProcessObjectTooltip=function(e,n,i,r,o){this.GetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||this._processShowTooltip(o,r,n,i)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY,!0)},t.EventManager.prototype._resetExternalKeyboardFocus=function(){this._handleExternalKeyboardFocus=!1},t.EventManager.prototype.OnFocus=function(e){this._handleExternalKeyboardFocus=!1,this._bKeyDown||e.isPropagationStopped()||(this._handleExternalKeyboardFocus=!0,this._keyboardFocusTimer||(this._keyboardFocusTimer=new t.Timer(this._context,200,this._resetExternalKeyboardFocus,this,1)),this._keyboardFocusTimer.reset(),this._keyboardFocusTimer.start(),e.stopPropagation())},t.EventManager.prototype.OnBlur=function(t){this._bKeyDown=!1;var e=this.getFocus();e&&e.isShowingKeyboardFocusEffect()&&e.hideKeyboardFocusEffect()},t.EventManager.prototype.ProcessRolloverEvent=function(t,e,n){},t.EventManager.prototype.CreateCategoryRolloverHandler=function(e,n){return new t.CategoryRolloverHandler(e,n)},t.EventManager.prototype.GetTouchResponse=function(){return t.EventManager.TOUCH_RESPONSE_TOUCH_START},t.EventManager.prototype._isTouchResponseTouchStart=function(){var e=this.GetTouchResponse();if(e===t.EventManager.TOUCH_RESPONSE_TOUCH_START)return!0;if(e===t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD)return!1;for(var n=this.getCtx().getSvgDocument().parentElement.parentElement;n&&"HTML"!==n.nodeName;){var i=window.getComputedStyle(n);if("hidden"!==i.overflow&&(n.scrollWidth>n.clientWidth+t.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==i["overflow-x"]||n.scrollHeight>n.clientHeight+t.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==i["overflow-y"]))return!1;n=n.parentElement}return!0},t.EventManager.prototype._saveTouchStart=function(e,n){var i=this.TouchManager.getTouchIdsForObj(t.EventManager.TOUCH_RESPONSE_TOUCH_START);i.length<=1&&(this.TouchManager.saveProcessedTouch(n.identifier,t.TouchManager.HOVER_TOUCH_KEY,null,t.TouchManager.HOVER_TOUCH_KEY,t.TouchManager.HOVER_TOUCH_KEY,this.HandleTouchActionsMove,this.HandleTouchActionsEnd,this),this.HandleTouchActionsStart(e))},t.EventManager.prototype.HandleTouchActionsStart=function(e){var n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObject(n),r=e instanceof t.ComponentTouchEvent?e.touch:e.touches[0],o=r.pageX,a=r.pageY;if(e instanceof t.ComponentTouchEvent||(this._touchMap[r.identifier]||(this._touchMap[r.identifier]={}),this._touchMap[r.identifier][t.TouchManager.PREV_HOVER_OBJ]=null,i&&this.HandleTouchActionsOver(e),this._touchMap[r.identifier][t.TouchManager.PREV_HOVER_OBJ]=i),this._marqueeHandler){var s=this._context.pageToStageCoords(o,a),l=this._marqueeHandler.processDragStart(s);l&&(e.preventDefault(),this._callback.call(this._callbackObj,l))}if(i&&this.ProcessRolloverEvent(e,i,!0),this._processTouchTooltip(e),this._prevActionClear=!1,!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var u=new t.Point(o,a),n=this.GetCurrentTargetForEvent(e),h=this.GetLogicalObjectAndDisplayable(n);h&&this.PopupHandler.processMousePopup(i,this._getShowPopupBehaviors(i),u,h.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype.HandleTouchActionsMove=function(e){var n,i,r=e instanceof t.ComponentTouchEvent?e.touch:e.touches[0];if(e instanceof t.ComponentTouchEvent)n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObject(n);else{e.preventDefault(),n=t.SvgDocumentUtils.elementFromTouch(r),i=this.GetLogicalObject(n);var o=this._touchMap[r.identifier][t.TouchManager.PREV_HOVER_OBJ];if(o!=i){if(o){var a;o.getDisplayable?a=o.getDisplayable():o.getDisplayables&&(a=o.getDisplayables()[0]),a&&(e.target=a,this.HandleTouchActionsOut(e,r))}e.target=n,i&&this.HandleTouchActionsOver(e)}this._touchMap[r.identifier][t.TouchManager.PREV_HOVER_OBJ]=i}var s=r.pageX,l=r.pageY,u=this._context.pageToStageCoords(s,l);if(this._marqueeHandler){var h=this._marqueeHandler.processDragMove(u,e.ctrlKey);h&&(e.preventDefault(),this._callback.call(this._callbackObj,h))}i&&this.ProcessRolloverEvent(e,i,!0);var c=new t.Point(r.pageX,r.pageY);if(this.PopupHandler.processMouseMove(c),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var d=this.GetLogicalObjectAndDisplayable(n);d&&this.PopupHandler.processMousePopup(i,this._getShowPopupBehaviors(i),c,d.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype.HandleTouchActionsEnd=function(e,n){var i,r;if(e instanceof t.ComponentTouchEvent)i=this.GetCurrentTargetForEvent(e),r=this.GetLogicalObject(i),n=e.touch;else{e.preventDefault(),i=t.SvgDocumentUtils.elementFromTouch(n),r=this.GetLogicalObject(i);var o;r&&(r.getDisplayable?o=r.getDisplayable():r.getDisplayables&&(o=r.getDisplayables()[0])),o&&(e.target=o,this.HandleTouchActionsOut(e,n)),this._touchMap[n.identifier][t.TouchManager.PREV_HOVER_OBJ]=null}var a=n.pageX,s=n.pageY,l=this._context.pageToStageCoords(a,s);if(this._marqueeHandler){var u=this._marqueeHandler.processDragEnd(l,e.ctrlKey);u&&(e.preventDefault(),this._callback.call(this._callbackObj,u))}if(this._processTouchSelection(r),this._processActionPopup(i,new t.Point(a,s)),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var h=new t.Point(a,s),c=this.GetLogicalObjectAndDisplayable(i);c&&this.PopupHandler.processMousePopup(r,this._getShowPopupBehaviors(r),h,c.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype.HandleTouchActionsOver=function(e){var n=this.GetCurrentTargetForEvent(e),i=this.GetLogicalObject(n),r=e instanceof t.ComponentTouchEvent?e.touch:e.touches[0],o=new t.Point(r.pageX,r.pageY);i&&this.ProcessRolloverEvent(e,i,!0);var a=this.getSelectionHandler(i);if(a&&a.processMouseOver(i),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var s=this.GetLogicalObjectAndDisplayable(n);s&&this.PopupHandler.processMousePopup(i,this._getShowPopupBehaviors(i),o,s.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.prototype.HandleTouchActionsOut=function(e,n){var i=this.GetCurrentTargetForEvent(e),r=this.GetLogicalObject(i);e instanceof t.ComponentTouchEvent&&(n=e.touch),r&&this.ProcessRolloverEvent(e,r,!1);var o=this.getSelectionHandler(r);if(o&&o.processMouseOut(r),!this.GetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var a=new t.Point(n.pageX,n.pageY),s=this.GetLogicalObjectAndDisplayable(i);s&&this.PopupHandler.processMousePopup(r,this._getShowPopupBehaviors(r),a,s.displayable,e,t.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT)&&this.SetEventInfo(e,t.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},t.EventManager.getComponent=function(){return null},t.EventManager.DROP_OFFSET_X_DATA_TYPE="text/_dvtDropOffsetX",t.EventManager.DROP_OFFSET_Y_DATA_TYPE="text/_dvtDropOffsetY",t.EventManager.prototype.isDndSupported=function(){return!1},t.EventManager.prototype.OnDndDragStart=function(e){var n=t.ToolkitUtils.getJQueryEvent(e),i=n.dataTransfer;if(!(n.dataTransfer.types&&n.dataTransfer.types.length>0)){var r=this._context.pageToStageCoords(e.pageX,e.pageY),o=this.DragSource.getDragTransferable(r.x,r.y),a=this.GetDragSourceType(e);if(null==o||null==a)return void(this._context.isLastDndEventManager(this)&&e.preventDefault());this._context.getTooltipManager().hideTooltip();var s=this._getDragOptions(),l=s.dataTypes,u=s.dragStart;if(null==l&&!u)return void(this._context.isLastDndEventManager(this)&&e.preventDefault());var h=this.DragSource.getDragObject(),c=this.getSelectionHandler(h);if(c&&h.isSelected&&!h.isSelected()&&c.processClick(h,!1),h.hideHoverEffect&&h.hideHoverEffect(),null!=l){t.ArrayUtils.isArray(l)||(l=[l]);for(var d=this._getDragData(e),p=0;p<l.length;p++)i.setData(l[p],d)}var g=t.ToolkitUtils.getDragFeedback(this.DragSource.getDragOverFeedback(r.x,r.y),this._context.getStage()),f=g.svg,_=this.DragSource.getDragOffset(r.x,r.y);f.style.width=g.width+"px",f.style.height=g.height+"px",f.style.left=e.pageX-_.x+"px",f.style.top=e.pageY-_.y+"px",f.style.position="absolute",f.style.fontFamily=this._context.getDefaultFontFamily(),f.style.fontSize=this._context.getDefaultFontSize(),t.SvgDocumentUtils.disableMouseEvents(f),document.body.appendChild(f),t.Context.requestAnimationFrame(function(){document.body.removeChild(f)}),i.setDragImage(f,_.x,_.y);var m=this.GetDropOffset(e);if(m&&(i.setData(t.EventManager.DROP_OFFSET_X_DATA_TYPE,m.x),i.setData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE,m.y)),u){var v=this._getDragEventPayload(e);u(n,v)}}},t.EventManager.prototype.OnDndDrag=function(t){this._handleDragSourceEvent(t,"drag")},t.EventManager.prototype.OnDndDragEnd=function(t){this._handleDragSourceEvent(t,"dragEnd")},t.EventManager.prototype.GetDragSourceType=function(t){return null},t.EventManager.prototype.GetDragDataContexts=function(){return[]},t.EventManager.prototype.GetDropOffset=function(t){return null},t.EventManager.prototype._getDragOptions=function(t){var e=this.GetDragSourceType(t);return this.getComponent().getOptions().dnd.drag[e]},t.EventManager.prototype._getDragEventPayload=function(t){var e={},n=this.GetDragSourceType(t);return e[n]=this.GetDragDataContexts(),e},t.EventManager.prototype._getDragData=function(t){for(var e=this.GetDragDataContexts(),n=0;n<e.length;n++)e[n].component=void 0;return JSON.stringify(e)},t.EventManager.prototype._handleDragSourceEvent=function(e,n){var i=this.GetDragSourceType(e);if(null!=i){var r=this._getDragOptions(e)[n];if(r){var o=t.ToolkitUtils.getJQueryEvent(e);r(o)}}},t.EventManager.prototype.OnDndDragEnter=function(t){this._handleDropTargetEvent(t,"dragEnter",!0)},t.EventManager.prototype.OnDndDragOver=function(t){this._handleDropTargetEvent(t,"dragOver",!0)},t.EventManager.prototype.OnDndDragLeave=function(t){this._handleDropTargetEvent(t,"dragLeave",!1)},t.EventManager.prototype.OnDndDrop=function(t){this._handleDropTargetEvent(t,"drop",!1)},t.EventManager.prototype.GetDropTargetType=function(t){return null},t.EventManager.prototype.GetDropEventPayload=function(t){return null},t.EventManager.prototype.ShowDropEffect=function(t){},t.EventManager.prototype.ShowRejectedDropEffect=function(t){this.ClearDropEffect()},t.EventManager.prototype.ClearDropEffect=function(){},t.EventManager.prototype._getDropOptions=function(t){var e=this.GetDropTargetType(t);return this.getComponent().getOptions().dnd.drop[e]},t.EventManager.prototype._handleDropTargetEvent=function(t,e,n){var i=this._handleDropTargetEventHelper(t,e);i||t.preventDefault(),!i&&n?this.ShowDropEffect(t):i&&n?this.ShowRejectedDropEffect(t):this.ClearDropEffect()},t.EventManager.prototype._handleDropTargetEventHelper=function(e,n){var i=this.GetDropTargetType(e);if(null==i)return!0;var r=t.ToolkitUtils.getJQueryEvent(e),o=this._getDropOptions(e),a=o[n];if(a){var s=this.GetDropEventPayload(e),l=a(r,s);if(null!=l)return l}var u=o.dataTypes;if(null!=u){t.ArrayUtils.isArray(u)||(u=[u]);for(var h=0;h<u.length;h++)if(t.ArrayUtils.getIndex(r.dataTransfer.types,u[h])>=0)return!1}return!0};var R=function(t,e){this.Init(t,e)};t.Obj.createSubclass(R,t.Obj),R.prototype.Init=function(t,e){this._context=t,this._id=e,this._actionTooltip=new N(this._context,this._id+"ActionPopup")},R.prototype.GetRichTooltipManager=function(){if(!this._RichTooltipManager){var t=this._id+"Tooltip";this._RichTooltipManager=this._context.getImplFactory().newRichTooltipManager(t),this._RichTooltipManager.InitializeTooltipElem();var e=this._RichTooltipManager.GetStoredContext();if(e){var n=new L(e,this,null,null);n.addListeners(this._actionTooltip)}}return this._RichTooltipManager},R.prototype.clearActionTooltip=function(){this._actionTooltip&&this._actionTooltip.clearContent()},R.prototype.getActionTooltip=function(){return this._actionTooltip},R.prototype.hideTooltip=function(){this.clearActionTooltip(),this._RichTooltipManager&&this._RichTooltipManager.hideTooltip()},R.prototype.closeActionTooltip=function(){var t=new v(v.TOOLTIP_CLOSED_TYPE,this._actionPopupObj);this.FireListener(t),this._actionPopupObj=null,this.hideTooltip()},R.prototype.showDatatip=function(t,e,n,i){var r=this.getActionTooltip();n=R._formatTextString(n),r.setTooltipText(n),null!=i&&r.setTooltipBorderColor(i),this.GetRichTooltipManager().showRichElement(t,e,r,!0)},R.prototype.showTextAtPosition=function(t,e,n,i,r,o){var a=this.getActionTooltip();n=R._formatTextString(n),a.setTooltipText(n),null!=i&&a.setTooltipBorderColor(i),this.GetRichTooltipManager().showRichElement(t,e,a,r)},R.prototype.displayActionPopup=function(){var t=this.getActionTooltip();return!(!t||!t.hasMenuItems())},R.prototype.startActionPopupAtPosition=function(t,e,n,i){var r=this.getActionTooltip();if(r){this.GetRichTooltipManager().showRichElementAtPosition(t,e,r,!0,!1);var o=new v(v.TOOLTIP_STARTED_TYPE,n);this.FireListener(o),this._actionPopupObj=n}},R.prototype.addTooltipEventListener=function(t,e,n){var i=this._getListeners(t,!0);i.push(e),i.push(n)},R.prototype.removeTooltipEventListener=function(t,e,n){var i=this._getListeners(t,!1);if(null!==i)for(var r=0;r<i.length;r+=2)if(i[r]===e&&i[r+1]===n){i.splice(r,2);break}},R.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var n=t,i=this._listenerObj[n];return!i&&e&&(i=[],this._listenerObj[n]=i),i},R.prototype.FireListener=function(t){var e=this._getListeners(t.getType(),!1);if(e)for(var n=0;n<e.length;n+=2){var i=e[n+1];e[n].call(i,t)}},R._formatTextString=function(t){var e="";if(!t)return e;t=t.replace(/\n/g,"<br>");var n=t.split("<br>");if(n){for(var i=new Array,r=0;r<n.length;r++){var o=n[r];null!=o&&""!=o&&i.push(o)}for(var r=0;r<i.length;r++)e+=i[r],r<i.length-1&&(e+="\n")}return e};var L=function(t,e,n,i){this._customTooltipManager=e,this.Init(t,n,i)};t.Obj.createSubclass(L,t.EventManager),L.prototype.OnClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},L.prototype.HandleImmediateTouchStartInternal=function(t,e){t.blockTouchHold(),this._handleMenuClick(t.target)},L.prototype.HandleTouchClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},L.prototype._handleMenuClick=function(t){var e=this._customTooltipManager._actionPopupObj,n=t._menu;if(n){var i=!0;n instanceof U&&n._menuItem.isDisabled()&&(i=!1),i&&(this._customTooltipManager.closeActionTooltip(),n.FireActionTooltipItem(e))}};var N=function(t,e){this._Init(t,e)};t.Obj.createSubclass(N,t.Container),N.DEFAULT_BORDER_COLOR="gray",N.DEFAULT_BACKGROUND_COLOR="#ffffff",N.TOOLTIP_ONLY="tooltipOnly",N.MENU_ONLY="menuOnly",N.MENU_AND_TOOLTIP="menuAndTooltip",N.EMPTY="empty",N.MENU_PADDING_LEFT=21,N.MENU_PADDING_RIGHT=10,N.prototype._Init=function(e,n){this._context=e,this.getImpl()||this.setImpl(e.getImplFactory().newContainer("customTT")),N.superclass.Init.call(this,e),this._tooltipText=null,this._tooltipBorderColor=null,this._menuFontSize=11,this._tooltipFill=new t.SolidFill(N.DEFAULT_BACKGROUND_COLOR),this._fontSize=11,this._includePointer=!1,this._pointerLocation=new t.Point(0,0)},N.prototype.setIncludePointer=function(t){this._includePointer=t},N.prototype.getRootDisplayable=function(){return this},N.prototype.UpdateTooltipSize=function(t,e){this._displayWidth=t,this._displayHeight=e},N.prototype.getDisplayWidth=function(){return this._displayWidth},N.prototype.getDisplayHeight=function(){return this._displayHeight},N.prototype.clearContent=function(){this.clearMenuItems(),this.setTooltipBorderColor(null),this.setTooltipText(null)},N.prototype.setMenuFontSize=function(t){this._menuFontSize=t},N.prototype.setTooltipBorderColor=function(t){this._tooltipBorderColor=t},N.prototype.getTooltipBorderColor=function(){return this._tooltipBorderColor},N.prototype.setTooltipFill=function(t){this._tooltipFill=t},N.prototype.setTooltipText=function(t){this._tooltipText=t},N.prototype.getTooltipText=function(){return this._tooltipText},N.prototype.addMenuItem=function(t){this.getMenuItems().push(t)},N.prototype.hasMenuItems=function(){var t=this.getMenuItems();return t&&t.length>0},N.prototype.clearMenuItems=function(){this._menuItems&&(this._menuItems=[])},N.prototype.getMenuItems=function(){return this._menuItems||(this._menuItems=new Array),this._menuItems},N.prototype.containsMenuId=function(t){for(var e=this.getMenuItems(),n=0;n<e.length;n++){var i=e[n];if(i.getId()==t)return!0}return!1},N.prototype.getTooltipType=function(){var t=this.hasMenuItems();return t?N.MENU_ONLY:N.EMPTY},N.prototype.Render=function(){var e=this.getRootDisplayable();e.removeChildren();var n=this.getTooltipType();if(n!=N.EMPTY){var i=4,r=5,o=2;this._includePointer&&(o=3,i=10);var a=this.hasMenuItems(),s=i+o/2,l=0,u=0;n==N.TOOLTIP_ONLY?e.setAlpha(.9):e.setAlpha(1);var h=new Array,c=new Array;if(n==N.MENU_AND_TOOLTIP?l+=r:n==N.MENU_ONLY&&(l+=r/2),a)for(var d=this.getMenuItems(),p=0;p<d.length;p++){var g=d[p],f=new t.OutputText(this._context,g.getText(),0,0,null);f.alignBottom(),f.setFontSize(this._menuFontSize),g instanceof U&&g._menuItem.isDisabled()&&f.setAlpha(.5),f._menu=g;var _=f.measureDimensions();_.y=s+l;var m=_.w;c.push(_),u=Math.max(m+N.MENU_PADDING_LEFT+N.MENU_PADDING_RIGHT,u),f.setY(_.y),l+=_.h,p<d.length-1&&(l+=r),h.push(f),f.alignLeft(),f.alignTop()}n!=N.MENU_ONLY&&n!=N.MENU_AND_TOOLTIP||(l+=r/2);var v=u+2*i,y=v+o,S=s+l+i+o/2;this._cursorText&&this._cursorText.setTranslateX(i+o/2);var C=12,b=this._pointerLocation.x>y,E=-this._pointerLocation.x,T=this._pointerLocation.y;if(this._includePointer){S/2<C&&(C=S/3);var A=S+o;A=Math.max(T+o,A);var x;b?(this.UpdateTooltipSize(this._pointerLocation.x,A),x=o/2):(this.UpdateTooltipSize(y+E+o,A),x=o/2+E),e.setTranslate(x,o/2)}else this.UpdateTooltipSize(y+o,S+o),e.setTranslate(o/2,o/2);var I=new t.Rect(this._context,0,0,y,S);if(this._includePointer){var O=5,M=S/2;if(b){var D=new t.Point(0,0),P=new t.Point(y,0),w=new t.Point(y,M),R=new t.Point(this._pointerLocation.x,T),L=new t.Point(y,M+C),k=new t.Point(y,S),B=new t.Point(0,S),F=t.PathUtils.moveTo(D.x+O,D.y)+t.PathUtils.lineTo(P.x-O,P.y)+t.PathUtils.arcTo(O,O,Math.PI/2,1,P.x,P.y+O)+t.PathUtils.lineTo(w.x,w.y)+t.PathUtils.lineTo(R.x,R.y)+t.PathUtils.lineTo(L.x,L.y)+t.PathUtils.lineTo(k.x,k.y-O)+t.PathUtils.arcTo(O,O,Math.PI/2,1,k.x-O,k.y)+t.PathUtils.lineTo(B.x+O,B.y)+t.PathUtils.arcTo(O,O,Math.PI/2,1,B.x,B.y-O)+t.PathUtils.lineTo(0,O)+t.PathUtils.arcTo(O,O,Math.PI/2,1,O,0)+t.PathUtils.closePath();I=new t.Path(this._context,F,null)}else{var D=new t.Point(0,0),P=new t.Point(y,0),w=new t.Point(y,S),R=new t.Point(0,S),L=new t.Point(0,M+C),k=new t.Point((-E),T),B=new t.Point(0,M),F=t.PathUtils.moveTo(D.x+O,D.y)+t.PathUtils.lineTo(P.x-O,P.y)+t.PathUtils.arcTo(O,O,Math.PI/2,1,P.x,P.y+O)+t.PathUtils.lineTo(w.x,w.y-O)+t.PathUtils.arcTo(O,O,Math.PI/2,1,w.x-O,w.y)+t.PathUtils.lineTo(R.x+O,R.y)+t.PathUtils.arcTo(O,O,Math.PI/2,1,R.x,R.y-O)+t.PathUtils.lineTo(L.x,L.y)+t.PathUtils.lineTo(k.x,k.y)+t.PathUtils.lineTo(B.x,B.y)+t.PathUtils.lineTo(0,O)+t.PathUtils.arcTo(O,O,Math.PI/2,1,O,0)+t.PathUtils.closePath();I=new t.Path(this._context,F,null)}
}I.setSolidStroke("rgb(229,232,238)"),this._tooltipFill||(this._tooltipFill=new t.SolidFill(N.DEFAULT_BACKGROUND_COLOR)),I.setFill(this._tooltipFill),e.addChildAt(I,0);for(var H=.95*v,j=(y-H)/2,p=0;p<h.length;p++){var G=h[p];e.addChild(G);var m=c[p].w;if(G._menu){var V=new t.Rectangle(0,c[p].y-r/2,y,c[p].h+r),Y=new t.Rect(this._context,V.x,V.y,V.w,V.h);if(Y.setInvisibleFill(),Y._menu=G._menu,e.addChild(Y),p>0){var K=G._menu._menuItem,W=h[p-1];if(W._menu instanceof U&&K.hasSeparatorBefore()){var z=new t.SolidFill("gray",.5);this.renderDivider(e,j,c[p].y-r/2,H,z)}}}G.setTranslateX(N.MENU_PADDING_LEFT)}}},N.prototype.renderDivider=function(e,n,i,r,o){var a=new t.Rect(this._context,n,i,r,1);a.setFill(o),e.addChild(a)};var k=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(k,t.Obj),k.prototype.Init=function(t,e,n,i,r){this._context=t,this._id=e,this._text=n,this._listener=i,this._listenerObj=r},k.prototype.getId=function(){return this._id},k.prototype.getText=function(){return this._text},k.prototype.FireActionTooltipItem=function(e){if(this._listenerObj&&this._listener){var n=new Object;n.target=e,n.menuItem=this._menuItem,this._menuItemTimer=new t.Timer(this._context,1,this._handleMenuTimer,this),this._menuItemTimer.evt=n,this._menuItemTimer.start()}},k.prototype._handleMenuTimer=function(){this._menuItemTimer&&this._menuItemTimer.stop(),this._listener.call(this._listenerObj,this._menuItemTimer.evt)};var U=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(U,k),U.prototype.Init=function(t,e,n,i,r){U.superclass.Init.call(this,t,e,r.getText(),n,i),this._menuItem=r},t.XmlParser=function(t){this._impl||(this._impl=t.getImplFactory().newParser())},t.Obj.createSubclass(t.XmlParser,t.Obj),t.XmlParser.prototype.parse=function(t){return this._impl&&this._impl.parse?this._impl.parse(t):null},t.XmlNode=function(){},t.Obj.createSubclass(t.XmlNode,t.Obj),t.XmlNode.prototype.getAttr=function(t){return null},t.XmlNode.prototype.getChildNodes=function(){return new Array},t.XmlNode.prototype.getChild=function(t){var e=this.getChildNodes();return null!=e&&e.length>t?e[t]:null},t.XmlNode.prototype.getFirstChild=function(){return this.getChild(0)},t.XmlNode.prototype.getName=function(){return null},t.XmlNode.prototype.getAttributes=function(){return null},t.XmlNode.prototype.getAllChildNodes=function(){return new Array},t.XmlNode.prototype.getNodeValue=function(){return null},t.XmlNode.prototype.getTextContent=function(){return null},t.XmlNode.prototype.getElementsByTagName=function(t){return null},t.HtmlTooltipManager=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.HtmlTooltipManager,t.TooltipManager),t.HtmlTooltipManager._TOOLTIP_DIV_ID="_dvtTooltip",t.HtmlTooltipManager._SHOW_DELAY=500,t.HtmlTooltipManager._BORDER_COLOR="#9ba2b0",t.HtmlTooltipManager._FONT_COLOR="#383a47",t.HtmlTooltipManager._VIEWPORT_BUFFER=15,t.HtmlTooltipManager.prototype.Init=function(e,n){this._context=e,this._domElementId=n?n:t.HtmlTooltipManager._TOOLTIP_DIV_ID,this._isTooltip=!0},t.HtmlTooltipManager.prototype.showDatatip=function(t,e,n,i,r){null==r&&(r=!0),this._isTooltip=!1,this._showTextAtPosition(t,e,n,i,r,this._context.getDatatipStyleClass())},t.HtmlTooltipManager.prototype._showTextAtPosition=function(e,n,i,r,o,a){var s,l=this.getTooltipElem();if("string"==typeof i){for(;l.hasChildNodes();)l.removeChild(l.firstChild);i=i.replace(/(<|&#60;)/g,"&lt;"),i=i.replace(/(>|&#62;)/g,"&gt;"),i=t.HtmlTooltipManager._restoreTag(i,"b"),i=t.HtmlTooltipManager._restoreTag(i,"i"),i=t.HtmlTooltipManager._restoreTag(i,"table"),i=t.HtmlTooltipManager._restoreTag(i,"tr"),i=t.HtmlTooltipManager._restoreTag(i,"td"),i=i.replace(/\n/g,"<br>"),i=i.replace(/\\n/g,"<br>"),i=i.replace(/&#92;n/g,"<br>"),i=t.HtmlTooltipManager._restoreTag(i,"br"),s=document.createElement("span"),s.style.visibility="inherit",s.style.width=null,s.style.height=null,s.innerHTML=i}else 1!=i&&(s=i);this._isCustomClassName||(l.className=a),this._isCustomClassName=!1,r||(r=t.HtmlTooltipManager._BORDER_COLOR),this._isCustomBorderColor||(l.style.borderColor=r),this._isCustomBorderColor=!1,l.style.position="absolute",l.style.zIndex=2147483647,null!=s&&l.appendChild(s),this.PostElement(l,e,n,!0,o)},t.HtmlTooltipManager.prototype.PostElement=function(t,e,n,i,r){if(t.style["pointer-events"]=i?"none":"auto",t.style.width=null,t.style.height=null,t.style.left="0px",t.style.top="0px",r){var o=this._getOffsets(t);this.positionTip(e+o.x,n+o.y,e,n)}else this.positionTip(e,n,e,n);t.style.visibility="visible";var a=this._context.getTooltipAttachedCallback();a&&a(t)},t.HtmlTooltipManager.prototype.hideTooltip=function(){this.clearTooltip(),this._tooltipDisplayed=!1,this._timerIsRunning=!1;var e=document.getElementById(this._domElementId);e&&(e.style.visibility="hidden",e.style.overflow=null,e.style.width="0px",e.style.height="0px",t.Agent.isRightToLeft(this._context)?e.style.left=e.style.right:e.style.left="0px",e.style.top="0px")},t.HtmlTooltipManager.prototype.getTooltipElem=function(){var t=document.getElementById(this._domElementId);return t||(t=this.InitializeTooltipElem()),t},t.HtmlTooltipManager.prototype.InitializeTooltipElem=function(){var t=document.createElement("div");return t.id=this._domElementId,t.style.visibility="hidden",document.body.appendChild(t),this.InitContent(t),t},t.HtmlTooltipManager.prototype.InitContent=function(t){},t.HtmlTooltipManager.prototype.showTooltip=function(e,n,i,r,o,a){if(i&&0!=i.length&&(this._x=e,this._y=n,this._text=i,this._trackMouse=o,!this._timerIsRunning)){var s=document.createElement("span");s.className="OraDVTTooltipText",s.innerHTML=i,s.style.color=t.HtmlTooltipManager._FONT_COLOR,a||(a=t.HtmlTooltipManager._BORDER_COLOR);var l=this.getTooltipElem();l.style.borderColor=a,t.Agent.isTouchDevice()||this._tooltipDisplayed&&this._trackMouse?this._displayTooltip(this._x,this._y,this._text,this._borderColor):(this._timerIsRunning=!0,this._showTimerId=window.setTimeout(t.Obj.createCallback(this,this._handleShowTimer),t.HtmlTooltipManager._SHOW_DELAY))}},t.HtmlTooltipManager.prototype.clearTooltip=function(){this._showTimerId&&(window.clearTimeout(this._showTimerId),this._showTimerId=void 0,this._x=void 0,this._y=void 0,this._text=void 0,this._trackMouse=void 0),this._hideTimerId&&(window.clearTimeout(this._hideTimerId),this._hideTimerId=void 0)},t.HtmlTooltipManager.prototype._handleShowTimer=function(t){this._timerIsRunning=!1,this._displayTooltip(this._x,this._y,this._text,this._borderColor),this._tooltipDisplayed=!0},t.HtmlTooltipManager.prototype._displayTooltip=function(t,e,n,i){this._isTooltip=!0,this._showTextAtPosition(t,e,n,i,!0,this._context.getTooltipStyleClass())},t.HtmlTooltipManager.prototype._getOffsets=function(e){var n=this.getTooltipBounds(e);if(t.Agent.isTouchDevice())return new t.Point(0-n.w/2,-30-n.h);var i=-8-n.h,r=8;this._isTooltip&&(i=22,r=0);var o=t.Agent.isRightToLeft(this._context);return o&&(r=-r-n.w),new t.Point(r,i)},t.HtmlTooltipManager.prototype.getTooltipBounds=function(){var e=this.getTooltipElem();return e.style.height="auto",new t.Rectangle(parseInt(e.style.left),parseInt(e.style.top),e.offsetWidth,e.offsetHeight)},t.HtmlTooltipManager.prototype.positionTip=function(e,n){var i=this.getTooltipElem(),r=this.getTooltipBounds(),o=r.w,a=r.h,s=new t.Rectangle(window.pageXOffset+t.HtmlTooltipManager._VIEWPORT_BUFFER,window.pageYOffset+t.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerWidth-2*t.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerHeight-2*t.HtmlTooltipManager._VIEWPORT_BUFFER);o>s.w-2*t.HtmlTooltipManager._VIEWPORT_BUFFER&&(o=s.w-2*t.HtmlTooltipManager._VIEWPORT_BUFFER,i.style.width=o+"px");var l=e;l=Math.max(l,s.x+t.HtmlTooltipManager._VIEWPORT_BUFFER),l=Math.min(l,s.x+s.w-o-t.HtmlTooltipManager._VIEWPORT_BUFFER),Math.abs(s.x)>t.HtmlTooltipManager._VIEWPORT_BUFFER&&(i.style.width=Math.min(i.clientWidth,s.x+s.w-l)+"px",n+=a-i.offsetHeight,a=i.offsetHeight,i.style.overflow="hidden");var u=n;u=Math.min(u,s.y+s.h-a),u=Math.max(u,s.y),i.style.left=l+"px",i.style.top=u+"px"},t.HtmlTooltipManager.prototype.getCustomTooltip=function(t,e){for(var n=this.getTooltipElem();n.hasChildNodes();)n.removeChild(n.firstChild);e.parentElement=n,n.className="",n.style.borderColor="";var i=t(e);return n.className&&(this._isCustomClassName=!0),n.style.borderColor&&(this._isCustomBorderColor=!0),!(i||!n.hasChildNodes())||i},t.HtmlTooltipManager._restoreTag=function(t,e){var n=new RegExp("&lt;(/?)"+e+"([^&]*)(/?)&gt;","g");return t.replace(n,"<$1"+e+"$2$3>")},t.HtmlTooltipManager.createStartTag=function(t,e){return"<"+t+' style="'+e.toString()+'">'},t.HtmlKeyboardListenerUtils=function(){},t.Obj.createSubclass(t.HtmlKeyboardListenerUtils,t.Obj),t.HtmlKeyboardListenerUtils.ATTR_IGNORE_EVENTS_FROM_TARGET="_dvtIgnoreEventsFromTarget",t.HtmlKeyboardListenerUtils.getListener=function(e){return e?t.HtmlKeyboardListenerUtils._captureListener:t.HtmlKeyboardListenerUtils._bubbleListener},t.HtmlKeyboardListenerUtils._bubbleListener=function(e){t.HtmlKeyboardListenerUtils._commonListener.call(this,e,!1)},t.HtmlKeyboardListenerUtils._captureListener=function(e){t.HtmlKeyboardListenerUtils._commonListener.call(this,e,!0)},t.HtmlKeyboardListenerUtils._commonListener=function(e,n){if(!t.HtmlKeyboardListenerUtils._checkIgnoreTarget(e)){var i;if(this._currentObj){if("focus"==e.type)return void(this._focusEvent=e);var r=this._currentObj.getCtx();this._focusEvent&&(r.resetCurrentKeyboardFocus(e),i=t.DomEventFactory.newEvent(this._focusEvent,r),this._currentObj.FireListener(i,n),this._focusEvent=null),i=t.DomEventFactory.newEvent(e,r),this._currentObj.FireListener(i,n)}else if(this._obj&&this._obj instanceof Array){var o,a,s=this._obj.length;for(o=0;o<s;o++)a=this._obj[o],i=t.DomEventFactory.newEvent(e,a.getCtx()),a.FireListener(i,n)}}},t.HtmlKeyboardListenerUtils._checkIgnoreTarget=function(e){return!!(e&&e.target&&e.target[t.HtmlKeyboardListenerUtils.ATTR_IGNORE_EVENTS_FROM_TARGET])};var B=function(){this._parser=new DOMParser};t.Obj.createSubclass(B,t.Obj),B.prototype.parse=function(e){var n=this._parser.parseFromString(e,"text/xml"),i=n.documentElement;return new t.DomXmlNode(i)},t.DomXmlNode=function(t){this._node=t},t.Obj.createSubclass(t.DomXmlNode,t.XmlNode),t.DomXmlNode.prototype.getAttr=function(t){return this._node.getAttribute(t)},t.DomXmlNode.prototype.getChildNodes=function(){for(var e=new Array,n=this._node.firstChild;null!=n;)1==n.nodeType&&e.push(new t.DomXmlNode(n)),n=n.nextSibling;return e},t.DomXmlNode.prototype.getName=function(){return this._node.nodeName},t.DomXmlNode.prototype.getAttributes=function(){for(var t=[],e=this._node.attributes.length,n=0;n<e;n++){var i=this._node.attributes[n];i.name&&"undefined"!=typeof i.value&&null!=i.value&&t.push({name:i.name,value:i.value})}return t},t.DomXmlNode.prototype.getAllChildNodes=function(){for(var e=new Array,n=this._node.firstChild;null!=n;)e.push(new t.DomXmlNode(n)),n=n.nextSibling;return e},t.DomXmlNode.prototype.getNodeValue=function(){return this._node.nodeValue},t.DomXmlNode.prototype.getTextContent=function(){return this._node.textContent},t.DomXmlNode.prototype.getElementsByTagName=function(e){var n=[],i=this._node.getElementsByTagName(e);if(i)for(var r=0;r<i.length;r++)n.push(new t.DomXmlNode(i[r]));return n},t.EventFactory=new Object,t.Obj.createSubclass(t.EventFactory,t.Obj),t.EventFactory.newEvent=function(t,e){var n={type:t};return e&&(n.id=e),n},t.EventFactory.newOptionChangeEvent=function(e,n,i){var r=t.EventFactory.newEvent("optionChange");return r.key=e,r.value=n,r.optionMetadata=i,r},t.EventFactory.newAdfPropertyChangeEvent=function(e,n){var i=t.EventFactory.newEvent("adfPropertyChange");return i.properties={},null!=e&&(i.properties[e]=n),i},t.EventFactory.newAdfContextMenuEvent=function(e,n){var i=t.EventFactory.newEvent("adfContextMenu");return i.nativeEvent=e,i.menuId=n,i},t.EventFactory.newAdfHidePopupEvent=function(e,n){var i=t.EventFactory.newEvent("adfHidePopup");return i.popupId=e,i.relatedTarget=n,i},t.EventFactory.newAdfLogEvent=function(e,n){var i=t.EventFactory.newEvent("adfLog");return i.level=e,i.message=n,i},t.EventFactory.newAdfShowPopupEvent=function(e,n,i,r){var o=t.EventFactory.newEvent("adfShowPopup");return o.showPopupBehavior=e,o.launcherBounds=n,o.launcherId=i,o.triggerType=r,o},t.EventFactory.newActionEvent=function(e,n,i){var r=t.EventFactory.newEvent("action");return r.commandId=n,r.clientId=i,r.subType=e,r},t.EventFactory.newCategoryHideEvent=function(e,n){var i=t.EventFactory.newEvent("categoryHide");return i.category=e,i.hiddenCategories=n,i},t.EventFactory.newCategoryShowEvent=function(e,n){var i=t.EventFactory.newEvent("categoryShow");return i.category=e,i.hiddenCategories=n,i},t.EventFactory.newCategoryHighlightEvent=function(e,n){var i=t.EventFactory.newEvent("categoryHighlight");return i._highlightType=n?"over":"out",e=e||[],i.categories=e instanceof Array?e:[e],i},t.EventFactory.newDrillEvent=function(e){return t.EventFactory.newEvent("drill",e)},t.EventFactory.newReadyEvent=function(){return t.EventFactory.newEvent("ready")},t.EventFactory.newSelectionEvent=function(e){var n=t.EventFactory.newEvent("selection");return n.selection=e,n},t.EventFactory.newTouchHoldReleaseEvent=function(e){var n=t.EventFactory.newEvent("touchHoldRelease");return n.nativeEvent=e,n},t.EventFactory.newValueChangeEvent=function(e,n,i){var r=t.EventFactory.newEvent("valueChange");return r.oldValue=e,r.newValue=n,r.complete=i,r},t.EventFactory.newChartDrillEvent=function(e,n,i){var r=t.EventFactory.newDrillEvent(e);return r.series=n,r.group=i,r},t.EventFactory.newChartSelectionEvent=function(e,n,i,r,o,a,s,l,u,h){var c=t.EventFactory.newSelectionEvent(e);return c.complete=n,c.xMin=i,c.xMax=r,c.startGroup=o,c.endGroup=a,c.yMin=s,c.yMax=l,c.y2Min=u,c.y2Max=h,c},t.EventFactory.newChartViewportChangeEvent=function(e,n,i,r,o,a,s){var l=t.EventFactory.newEvent("viewportChange");return l.complete=e,l.xMin=n,l.xMax=i,l.startGroup=r,l.endGroup=o,l.yMin=a,l.yMax=s,l},t.EventFactory.newSunburstCollapseEvent=function(e){return t.EventFactory.newEvent("collapse",e)},t.EventFactory.newSunburstExpandEvent=function(e){return t.EventFactory.newEvent("expand",e)},t.EventFactory.newSunburstRotationEvent=function(e,n){var i=t.EventFactory.newEvent("rotation");return i.complete=n,i.startAngle=e%360,i},t.EventFactory.newThematicMapViewportChangeEvent=function(e,n,i){var r=t.EventFactory.newEvent("viewportChange");return r.panX=e,r.panY=n,r.zoom=i,r},t.EventFactory.newTimelineViewportChangeEvent=function(e,n,i){var r=t.EventFactory.newEvent("viewportChange");return r.viewportStart=e,r.viewportEnd=n,r.minorAxisScale=i,r},t.EventFactory.newGanttViewportChangeEvent=function(e,n,i,r){var o=t.EventFactory.newTimelineViewportChangeEvent(e,n,r);return o.majorAxisScale=i,o},t.EventFactory.newTreemapIsolateEvent=function(e){return t.EventFactory.newEvent("isolate",e)},t.ClientBehaviorEvent=function(e){this.Init(t.ClientBehaviorEvent.TYPE),this._clientBehavior=e},t.Obj.createSubclass(t.ClientBehaviorEvent,t.BaseComponentEvent),t.ClientBehaviorEvent.TYPE="clientBehavior",t.ClientBehaviorEvent.prototype.getClientBehavior=function(){return this._clientBehavior},t.EventDispatcher={},t.Obj.createSubclass(t.EventDispatcher,t.Obj),t.EventDispatcher.dispatchEvent=function(t,e,n,i){t&&t.call&&t.call(e,i,n)},t.ToolkitUtils={},t.Obj.createSubclass(t.ToolkitUtils,t.Obj),t.ToolkitUtils.SVG_NS="http://www.w3.org/2000/svg",t.ToolkitUtils.XLINK_NS="http://www.w3.org/1999/xlink",t.ToolkitUtils._IMAGE_URL_CACHE={},t.ToolkitUtils.createSvgDocument=function(e){var n=document.createElementNS(t.ToolkitUtils.SVG_NS,"svg");return null!=e&&t.ToolkitUtils.setAttrNullNS(n,"id",e),t.ToolkitUtils.setAttrNullNS(n,"width","100%"),t.ToolkitUtils.setAttrNullNS(n,"height","100%"),t.Agent.isPlatformIE()&&t.ToolkitUtils.setAttrNullNS(n,"focusable","false"),n},t.ToolkitUtils.getDragFeedback=function(e,n){e instanceof Array||(e=[e]);var i=t.DragAndDropUtils.getDragFeedbackBounds(e,n),r=t.ToolkitUtils._getDragFeedbackSVG(e,i),o=new Object;return o.width=i.w+2*t.DragSource.DRAG_FEEDBACK_MARGIN,o.height=i.h+2*t.DragSource.DRAG_FEEDBACK_MARGIN,r&&(o.svg=r),o},t.ToolkitUtils._getDragFeedbackSVG=function(e,n){var i=t.ToolkitUtils.createSvgDocument("dnd");t.ToolkitUtils.setAttrNullNS(i,"class","oj-drag");var r=t.DragSource.DRAG_FEEDBACK_MARGIN-n.x,o=t.DragSource.DRAG_FEEDBACK_MARGIN-n.y,a="translate("+r+","+o+")",s=t.SvgShapeUtils.createElement("g");t.ToolkitUtils.setAttrNullNS(s,"transform",a),t.ToolkitUtils.appendChildElem(i,s);for(var l=0;l<e.length;l++){var u=e[l],h=u.getImpl().getElem(),c=h.cloneNode(!0);t.ToolkitUtils.getAttrNullNS(c,"filter")&&t.ToolkitUtils.setAttrNullNS(c,"filter",null);var d=t.SvgShapeUtils.createElement("g");t.ToolkitUtils.appendChildElem(s,d);for(var p=u.getPathToStage(),g=null,f=1;f<p.length;f++)g?(g=g.clone(),g.concat(p[f].getMatrix())):g=p[f].getMatrix();if(g){var _="matrix("+g.getA()+","+g.getC()+","+g.getB()+","+g.getD()+","+g.getTx()+","+g.getTy()+")";t.ToolkitUtils.setAttrNullNS(d,"transform",_)}t.ToolkitUtils.appendChildElem(d,c)}return i},t.ToolkitUtils.addDomEventListener=function(t,e,n,i){t&&t.addEventListener&&t.addEventListener(e,n,i)},t.ToolkitUtils.removeDomEventListener=function(t,e,n,i){t&&t.removeEventListener&&t.removeEventListener(e,n,i)},t.ToolkitUtils.appendChildElem=function(t,e){return t.appendChild(e)},t.ToolkitUtils.getAttrNS=function(t,e,n){return t.getAttributeNS(e,n)},t.ToolkitUtils.getAttrNullNS=function(t,e){return t.getAttributeNS(null,e)},t.ToolkitUtils.hasAttrNS=function(t,e,n){return t.hasAttributeNS(e,n)},t.ToolkitUtils.hasAttrNullNS=function(e,n){return t.ToolkitUtils.hasAttrNS(e,null,n)},t.ToolkitUtils.setAttrNS=function(e,n,i,r,o){return null!=o&&r==o?void(t.ToolkitUtils.hasAttrNS(e,n,i)&&(t.Agent.isPlatformIE()&&t.Agent.getVersion()<=10||t.Agent.isBrowserChrome()&&!t.Agent.isEnvironmentTest()&&t.Agent.getVersion()>=34&&"text"==e.nodeName&&("x"==i||"y"==i)?e.setAttributeNS(n,i,r):t.ToolkitUtils.removeAttrNS(e,n,i))):void e.setAttributeNS(n,i,r)},t.ToolkitUtils.setAttrNullNS=function(e,n,i,r){t.ToolkitUtils.setAttrNS(e,null,n,i,r)},t.ToolkitUtils.removeAttrNS=function(e,n,i){t.ToolkitUtils.hasAttrNS(e,n,i)&&e.removeAttributeNS(n,i)},t.ToolkitUtils.removeAttrNullNS=function(e,n){t.ToolkitUtils.removeAttrNS(e,null,n)},t.ToolkitUtils.getLinkCallback=function(t,e){if(t||e){var n=function(){if(null==t)self.location=e;else{var n=window.open(e,t);n&&n.focus()}};return n}return null},t.ToolkitUtils.roundDecimal=function(e){return t.Agent.isEnvironmentTest()?Math.round(1e3*e)/1e3:e},t.ToolkitUtils.getUrlPathById=function(e){var n=t.Agent.isPlatformIE()?null!=document.querySelector("base"):document.URL!=document.baseURI,i=n?document.URL.split("#")[0]+"#":"#";return i+e},t.ToolkitUtils.getUrlById=function(e){return"url("+t.ToolkitUtils.getUrlPathById(e)+")"},t.ToolkitUtils.setSvgSize=function(e,n,i){var r=e.getSvgDocument();t.ToolkitUtils.setAttrNullNS(r,"width",n+"px"),t.ToolkitUtils.setAttrNullNS(r,"height",i+"px")},t.ToolkitUtils.getOuterDivSize=function(e){var n=e.getSvgDocument().parentNode,i=window.getComputedStyle(n);return new t.Dimension(parseFloat(i.width),parseFloat(i.height))},t.ToolkitUtils.getJQueryEvent=function(t){var e=t.getNativeEvent();if("undefined"!=typeof $){var n=$.event.fix(e);return n.dataTransfer=e.dataTransfer,n}return e},t.ToolkitUtils.getImageUrl=function(e,n){if("undefined"==typeof $||n.indexOf(".")!=-1)return n;var i=t.ToolkitUtils._IMAGE_URL_CACHE[n];if(null!=i)return i;var r=$(document.createElement("div"));r.attr("style","display:none;"),r.addClass(n);var o=$(e.getContainer());return o.append(r),i=r.css("background-image"),i=i&&i.indexOf("url(")!==-1?i.slice(i.indexOf("url(")+4,i.length-1).replace(/["']/g,""):n,r.remove(),t.ToolkitUtils._IMAGE_URL_CACHE[n]=i,i},t.Bundle.addDefaultStrings(t.Bundle.UTIL_PREFIX,{SCALING_SUFFIX_THOUSAND:"K",SCALING_SUFFIX_MILLION:"M",SCALING_SUFFIX_BILLION:"B",SCALING_SUFFIX_TRILLION:"T",SCALING_SUFFIX_QUADRILLION:"Q",NUMBER_FORMAT_DECIMAL_SEPARATOR:".",NUMBER_FORMAT_GROUPING_SEPARATOR:",",NUMBER_FORMAT_GROUPING_SIZE:3,MONTH_JANUARY:"January",MONTH_FEBRUARY:"February",MONTH_MARCH:"March",MONTH_APRIL:"April",MONTH_MAY:"May",MONTH_JUNE:"June",MONTH_JULY:"July",MONTH_AUGUST:"August",MONTH_SEPTEMBER:"September",MONTH_OCTOBER:"October",MONTH_NOVEMBER:"November",MONTH_DECEMBER:"December",MONTH_SHORT_JANUARY:"Jan",MONTH_SHORT_FEBRUARY:"Feb",MONTH_SHORT_MARCH:"Mar",MONTH_SHORT_APRIL:"Apr",MONTH_SHORT_MAY:"May",MONTH_SHORT_JUNE:"Jun",MONTH_SHORT_JULY:"Jul",MONTH_SHORT_AUGUST:"Aug",MONTH_SHORT_SEPTEMBER:"Sep",MONTH_SHORT_OCTOBER:"Oct",MONTH_SHORT_NOVEMBER:"Nov",MONTH_SHORT_DECEMBER:"Dec",DAY_MONDAY:"Monday",DAY_TUESDAY:"Tuesday",DAY_WEDNESDAY:"Wednesday",DAY_THURSDAY:"Thursday",DAY_FRIDAY:"Friday",DAY_SATURDAY:"Saturday",DAY_SUNDAY:"Sunday",DAY_SHORT_MONDAY:"Mon",DAY_SHORT_TUESDAY:"Tue",DAY_SHORT_WEDNESDAY:"Wed",DAY_SHORT_THURSDAY:"Thu",DAY_SHORT_FRIDAY:"Fri",DAY_SHORT_SATURDAY:"Sat",DAY_SHORT_SUNDAY:"Sun",TIME_AM:"AM",TIME_PM:"PM",DURATION_DAYS:"{0} days",DURATION_HOURS:"{0} hours",ROW_INFO:"Row {0}",TASK_INFO:"Start time is {0}, end time is {1}, duration is {2}",MILESTONE_INFO:"Time is {0}",INVALID_DATA:"Invalid data",NO_DATA:"No data to display",CLEAR_SELECTION:"Clear Selection",EXPAND:"Expand",COLLAPSE:"Collapse",DATA_VISUALIZATION:"Data Visualization",STATE_SELECTED:"Selected",STATE_UNSELECTED:"Unselected",STATE_MAXIMIZED:"Maximized",STATE_MINIMIZED:"Minimized",STATE_EXPANDED:"Expanded",STATE_COLLAPSED:"Collapsed",STATE_ISOLATED:"Isolated",STATE_HIDDEN:"Hidden",STATE_VISIBLE:"Visible",STATE_DRILLABLE:"Drillable",ARIA_LABEL_STATE_DELIMITER:", ",ARIA_LABEL_DESC_DELIMITER:". ",COLON_SEP_LIST:"{0}: {1}",COUNT_WITH_TOTAL:"{0} of {1}",ZOOM_IN:"Zoom In",ZOOM_OUT:"Zoom Out",CHART:"Chart",DIAGRAM:"Diagram",GANTT:"Gantt",GAUGE:"Gauge",HIERARCHY_VIEWER:"Hierarchy Viewer",LEGEND:"Legend",NBOX:"{0} Box",PICTOCHART:"Picture Chart",SUNBURST:"Sunburst",TAG_CLOUD:"Tag Cloud",THEMATIC_MAP:"Thematic Map",TIME_AXIS:"Time Axis",TIMELINE:"Timeline",TIMELINE_SERIES:"Series",TREEMAP:"Treemap"}),t.SvgDocumentUtils=function(){},t.Obj.createSubclass(t.SvgDocumentUtils,t.Obj),t.SvgDocumentUtils.elementFromPoint=function(t,e){for(var n=document.elementFromPoint(t,e);n;){if(n._obj&&n._obj.getObj&&n._obj.getObj())return n._obj.getObj();n=n.parentNode}return null},t.SvgDocumentUtils.elementFromTouch=function(t){return this.elementFromPoint(t.clientX,t.clientY)},t.SvgDocumentUtils.isFilterSupported=function(e){return!(t.Agent.isPlatformIE()&&t.Agent.getVersion()<10||t.Agent.isBrowserSafari()&&t.Agent.getVersion()<536||t.Agent.isTouchDevice()&&!t.Agent.isBrowserSafari())},t.SvgDocumentUtils.isEventAvailableOutsideClip=function(){return t.Agent.isBrowserSafari()},t.SvgDocumentUtils.isFilterStraightLineAdjustmentNeeded=function(){return t.Agent.isPlatformGecko()},t.SvgDocumentUtils.fixGeckoContainerForFilter=function(e){if(e&&t.Agent.isPlatformGecko()){var n=e.getImpl().getElem();if(n){var i=t.ToolkitUtils.getAttrNullNS(n,"transform");i||(i="matrix(1 0 0 1 0 0)"),t.ToolkitUtils.setAttrNullNS(n,"transform",i)}}},t.SvgDocumentUtils.cancelDomEvent=function(t){t&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1)},t.SvgDocumentUtils.addDragListeners=function(e,n,i,r,o,a){var s=t.Agent.isTouchDevice(),l=e.getCtx(),u=t.Agent.isEnvironmentBrowser()?document.body.style:{},h=function(e){n.call(o,e)&&(s?(document.addEventListener("touchmove",c,!0),document.addEventListener("touchend",d,!0)):(document.addEventListener("mousemove",c,!0),document.addEventListener("mouseup",d,!0),a&&document.addEventListener("click",p,!0)),t.SvgDocumentUtils._webkitUserSelect=u.webkitUserSelect,t.SvgDocumentUtils._mozUserSelect=u.MozUserSelect,u.webkitUserSelect="none",u.MozUserSelect="none")},c=t.SvgDocumentUtils.createStaticCallback(l,i,o),d=function(e){s?(document.removeEventListener("touchmove",c,!0),document.removeEventListener("touchend",d,!0)):(document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",d,!0),s||setTimeout(function(){document.removeEventListener("click",p,!0)},50)),u.webkitUserSelect=t.SvgDocumentUtils._webkitUserSelect,u.MozUserSelect=t.SvgDocumentUtils._mozUserSelect;var n=t.DomEventFactory.newEvent(e,l);r.call(o,n)},p=function(t){t.stopPropagation()};return s?e.addEvtListener(t.TouchEvent.TOUCHSTART,h):e.addEvtListener(t.MouseEvent.MOUSEDOWN,h),function(){s?(document.removeEventListener("touchmove",c,!0),document.removeEventListener("touchend",d,!0)):(document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",d,!0),document.removeEventListener("click",p,!0)),u.webkitUserSelect=t.SvgDocumentUtils._webkitUserSelect,u.MozUserSelect=t.SvgDocumentUtils._mozUserSelect}},t.SvgDocumentUtils.createStaticCallback=function(e,n,i){return function(r){var o=t.DomEventFactory.newEvent(r,e);n.call(i,o)}},t.SvgDocumentUtils.disableMouseEvents=function(e){if(e.style&&(e.style.pointerEvents="none"),e.childNodes)for(var n=0;n<e.childNodes.length;n++)t.SvgDocumentUtils.disableMouseEvents(e.childNodes[n])};var F={_cache:{}};t.Obj.createSubclass(F,t.Obj),F.addBubbleEventListener=function(e,n,i){return window.addEventListener?(t.ToolkitUtils.addDomEventListener(e,n,i,!1),!0):!!window.attachEvent&&(e.attachEvent("on"+n,i),!0)},F.loadImage=function(t,e){var n=this._cache[t];if(n){if(!n._image)return e&&e(n),n;F._addListenerToQueue(n._listeners,e)}else this.loadNewImage(t,e);return null},F.loadNewImage=function(t,e){var n=document.createElement("img"),i={_listeners:[],url:t,_image:n};e&&F._addListenerToQueue(i._listeners,e),this._cache[t]=i,F.addBubbleEventListener(n,"load",function(t){i.width=n.width,i.height=n.height,delete i._image;var e,r=i._listeners.length;for(e=0;e<r;e++)i._listeners[e]&&i._listeners[e](i);delete i._listeners}),n.src=t},F._addListenerToQueue=function(t,e){if(e){for(var n=0;n<t.length;n++)if(t[n]===e)return;t.push(e)}};var H=function(t,e){this.Init(t,e)};t.Obj.createSubclass(H,t.HtmlTooltipManager),H.prototype.Init=function(t,e){this._storedContexts=new Object,H.superclass.Init.call(this,t,e)},H.prototype.InitContent=function(e){e.innerHTML="";var n=new t.Context(e,"DvtCustomTooltip");this._storedContexts[this._domElementId]=n},H.prototype.GetStoredContext=function(){return this._storedContexts[this._domElementId]},H.prototype.showRichElement=function(t,e,n,i){this.showRichElementAtPosition(t,e,n,i,!1)},H.prototype.showRichElementAtPosition=function(e,n,i,r,o){var a=this.getTooltipElem();a.style.position="absolute",a.style.zIndex=2147483647;var s=this.GetStoredContext();if(s){var l=s.getStage();l.removeChildren();var u=i.getRootDisplayable();l.addChild(u),i&&i.Render&&i.Render();var h=l.getImpl().getSVGRoot();t.ToolkitUtils.setAttrNullNS(h,"width",i.getDisplayWidth()),t.ToolkitUtils.setAttrNullNS(h,"height",i.getDisplayHeight()),this.PostElement(a,e,n,o,r)}},H.prototype.hideTooltip=function(){H.superclass.hideTooltip.call(this);var t=this.GetStoredContext();if(t){var e=t.getStage();e.removeChildren()}};var j=function(t){this._context=t};t.Obj.createSubclass(j,t.Obj),j.prototype.newDefs=function(){return t.SvgShapeUtils.createElement("defs")},j.prototype.getImageLoader=function(){return t.Agent.isEnvironmentBrowser()?F:t.JavaImageLoader},j.prototype.getDocumentUtils=function(){return t.SvgDocumentUtils},j.prototype.newParser=function(){return t.Agent.isEnvironmentBrowser()?new B:new DvtJavaXmlParser},j.prototype.newTooltipManager=function(e){return new t.HtmlTooltipManager(this._context,e)},j.prototype.newRichTooltipManager=function(t){return new H(this._context,t)};var G=function(){this.Init()};t.Obj.createSubclass(G,t.Obj),G.prototype.Init=function(){this._regionPctRect=new t.Rectangle((-10),(-10),120,120),this._counter=0,this._resultIdsUnder=[],this._resultIdsOver=[]},G.prototype.getRegionPctRect=function(){return this._regionPctRect},G.prototype.getResultIdsUnder=function(){return this._resultIdsUnder},G.prototype.getResultIdsOver=function(){return this._resultIdsOver},G.prototype.createResultId=function(t){return t||(t="filtRes"),t+this._counter++};var V=function(){};t.Obj.createSubclass(V,t.Obj),V._counter=0,V.createFilter=function(e,n){for(var i=t.SvgShapeUtils.createElement("filter",V.CreateFilterId()),r=new G,o=0;o<e.length;o++){var a=e[o];a&&V.CreateFilterPrimitives(i,a,n,r)}var s=!1;if(n){var l=n.getElem().getBBox();if(l){var u=l.width,h=l.height;if(0==h||0==u){var c;n.getStroke&&(c=n.getStroke());var d=10;c&&(d=c.getWidth());var p=l.x,g=l.y;if(t.SvgDocumentUtils.isFilterStraightLineAdjustmentNeeded()&&n instanceof t.Polyline){var f=t.ArrayUtils.copy(n.getPoints());0==u&&(f[0]=f[0]+.01),0==h&&(f[1]=f[1]+.01);var _=t.SvgShapeUtils.convertPointsArray(f);t.ToolkitUtils.setAttrNullNS(n.getElem(),"points",_)}0==h&&(h=2*d,g-=d),0==u&&(u=2*d,p-=d),t.ToolkitUtils.setAttrNullNS(i,"x",p),t.ToolkitUtils.setAttrNullNS(i,"y",g),t.ToolkitUtils.setAttrNullNS(i,"width",u),t.ToolkitUtils.setAttrNullNS(i,"height",h),t.ToolkitUtils.setAttrNullNS(i,"filterUnits","userSpaceOnUse"),s=!0}}}s||(r.getRegionPctRect().x!=-10&&"Infinity"!=r.getRegionPctRect().x&&"-Infinity"!=r.getRegionPctRect().x&&t.ToolkitUtils.setAttrNullNS(i,"x",r.getRegionPctRect().x+"%"),r.getRegionPctRect().y!=-10&&"Infinity"!=r.getRegionPctRect().y&&"-Infinity"!=r.getRegionPctRect().y&&t.ToolkitUtils.setAttrNullNS(i,"y",r.getRegionPctRect().y+"%"),120!=r.getRegionPctRect().w&&"Infinity"!=r.getRegionPctRect().w&&"-Infinity"!=r.getRegionPctRect().w&&t.ToolkitUtils.setAttrNullNS(i,"width",r.getRegionPctRect().w+"%"),120!=r.getRegionPctRect().h&&"Infinity"!=r.getRegionPctRect().h&&"-Infinity"!=r.getRegionPctRect().h&&t.ToolkitUtils.setAttrNullNS(i,"height",r.getRegionPctRect().h+"%"));var m,v,y=r.getResultIdsUnder().length,S=r.getResultIdsOver().length,C=t.SvgShapeUtils.createElement("feMerge");if(y>0)for(v=0;v<y;v++)m=t.SvgShapeUtils.createElement("feMergeNode"),t.ToolkitUtils.setAttrNullNS(m,"in",r.getResultIdsUnder()[v]),t.ToolkitUtils.appendChildElem(C,m);if(m=t.SvgShapeUtils.createElement("feMergeNode"),t.ToolkitUtils.setAttrNullNS(m,"in","SourceGraphic"),t.ToolkitUtils.appendChildElem(C,m),S>0)for(v=0;v<S;v++)m=t.SvgShapeUtils.createElement("feMergeNode"),t.ToolkitUtils.setAttrNullNS(m,"in",r.getResultIdsOver()[v]),t.ToolkitUtils.appendChildElem(C,m);return t.ToolkitUtils.appendChildElem(i,C),i},V.CreateFilterPrimitives=function(e,n,i,r){return n instanceof t.Shadow&&z.createFilterPrimitives(e,n,i,r),null},V.CreateFilterId=function(){return"filt"+V._counter++};var Y=function(){};t.Obj.createSubclass(Y,t.Obj),Y.createElem=function(e,n){var i,r=e instanceof t.LinearGradientFill||e instanceof t.LinearGradientStroke,o=t.SvgShapeUtils.createElement(r?"linearGradient":"radialGradient",n),a=e.getColors(),s=e.getAlphas(),l=e.getStops(),u=e.getBounds(),h=a.length;for(i=0;i<h;i++){var c=t.SvgShapeUtils.createElement("stop");t.ToolkitUtils.setAttrNullNS(c,"offset",""+100*l[i]+"%");var d=a[i];if(d){var p=s[i];(t.Agent.isEnvironmentBatik()||t.Agent.isBrowserSafari())&&d.indexOf("rgba")!==-1?(t.ToolkitUtils.setAttrNullNS(c,"stop-color",t.ColorUtils.getRGB(d)),null!=p?t.ToolkitUtils.setAttrNullNS(c,"stop-opacity",t.ColorUtils.getAlpha(d)*p,1):t.ToolkitUtils.setAttrNullNS(c,"stop-opacity",t.ColorUtils.getAlpha(d),1)):(t.ToolkitUtils.setAttrNullNS(c,"stop-color",d),null!=p&&t.ToolkitUtils.setAttrNullNS(c,"stop-opacity",p,1))}t.ToolkitUtils.appendChildElem(o,c)}var g=!u||0==u[0]&&0==u[1]&&0==u[2]&&0==u[3];if(r){var f=e.getAngle(),_="0%",m="0%",v="100%",y="0%",S=!0;if(g)45===f?(m="100%",v="100%"):90===f?(m="100%",v="0%"):135===f?(_="100%",v="0%",y="100%"):270===f?(v="0%",y="100%"):0!==f&&(f=-f,t.ToolkitUtils.setAttrNullNS(o,"gradientTransform","rotate("+t.ToolkitUtils.roundDecimal(f)+" .5 .5)"),S=!1);else{t.ToolkitUtils.setAttrNullNS(o,"gradientUnits","userSpaceOnUse"),_="0",m="0.5",v="1",y="0.5";var C=u[2],b=u[3],E=u[0],T=u[1];f=-f;var A="rotate("+t.ToolkitUtils.roundDecimal(f)+" .5 .5)",x="scale("+t.ToolkitUtils.roundDecimal(C)+" "+t.ToolkitUtils.roundDecimal(b)+")",I="translate("+t.ToolkitUtils.roundDecimal(E)+" "+t.ToolkitUtils.roundDecimal(T)+")",O=x+" "+A;
0==E&&0==T||(O=I+" "+O),t.ToolkitUtils.setAttrNullNS(o,"gradientTransform",O)}S&&(t.ToolkitUtils.setAttrNullNS(o,"x1",_),t.ToolkitUtils.setAttrNullNS(o,"y1",m),t.ToolkitUtils.setAttrNullNS(o,"x2",v),t.ToolkitUtils.setAttrNullNS(o,"y2",y))}else g||(t.ToolkitUtils.setAttrNullNS(o,"gradientUnits","userSpaceOnUse"),t.ToolkitUtils.setAttrNullNS(o,"cx",e.getCx()),t.ToolkitUtils.setAttrNullNS(o,"cy",e.getCy()),t.ToolkitUtils.setAttrNullNS(o,"fx",e.getCx()),t.ToolkitUtils.setAttrNullNS(o,"fy",e.getCy()),t.ToolkitUtils.setAttrNullNS(o,"r",e.getRadius()));return o};var K=function(){};t.Obj.createSubclass(K,t.Obj),K.createElem=function(e,n){var i=t.SvgShapeUtils.createElement("pattern",n),r=t.SvgShapeUtils.createElement("image",n),o=e.getSrc(),a=e.getBound();e.getRepeat();return a&&(t.ToolkitUtils.setAttrNullNS(i,"x",a.x),t.ToolkitUtils.setAttrNullNS(i,"y",a.y),t.ToolkitUtils.setAttrNullNS(r,"x",a.x),t.ToolkitUtils.setAttrNullNS(r,"y",a.y),t.ToolkitUtils.setAttrNullNS(i,"width",a.w),t.ToolkitUtils.setAttrNullNS(i,"height",a.h),t.ToolkitUtils.setAttrNullNS(r,"width",a.w),t.ToolkitUtils.setAttrNullNS(r,"height",a.h),t.ToolkitUtils.setAttrNullNS(i,"patternUnits","userSpaceOnUse"),o&&t.ToolkitUtils.setAttrNS(r,t.Image.XLINK_NS,"xlink:href",o)),t.ToolkitUtils.appendChildElem(i,r),i};var W=function(){};t.Obj.createSubclass(W,t.Obj),W._SM_WIDTH=8,W._SM_HEIGHT=8,W._LG_WIDTH=16,W._LG_HEIGHT=16,W.createElem=function(e,n){var i,r,o=t.SvgShapeUtils.createElement("pattern",n),a=e.getPattern(),s=W.IsSmallPattern(a);s?(i=W._SM_WIDTH,r=W._SM_HEIGHT):(i=W._LG_WIDTH,r=W._LG_HEIGHT),t.ToolkitUtils.setAttrNullNS(o,"x",0),t.ToolkitUtils.setAttrNullNS(o,"y",0),t.ToolkitUtils.setAttrNullNS(o,"width",i),t.ToolkitUtils.setAttrNullNS(o,"height",r),t.ToolkitUtils.setAttrNullNS(o,"patternUnits","userSpaceOnUse");var l=e.getMatrix();if(l){var u="matrix("+l.getA()+","+l.getC()+","+l.getB()+","+l.getD()+","+l.getTx()+","+l.getTy()+")";t.ToolkitUtils.setAttrNullNS(o,"patternTransform",u)}return W.CreatePatternElems(e,o),o},W.IsSmallPattern=function(t){return"s"===t.charAt(0)},W.CreatePatternElems=function(e,n){var i,r,o,a,s,l,u,h=e.getPattern(),c=e.getColor(),d=t.ColorUtils.getRGB(c),p=t.ColorUtils.getAlpha(c),g=e.getBackgroundColor(),f=t.ColorUtils.getRGB(g),_=t.ColorUtils.getAlpha(g),m=W.IsSmallPattern(h);m?(i=W._SM_WIDTH,r=W._SM_HEIGHT,o=W._SM_WIDTH,a=W._SM_HEIGHT):(i=W._LG_WIDTH,r=W._LG_HEIGHT,o=W._LG_WIDTH,a=W._LG_HEIGHT),f&&_>0&&(u=t.SvgShapeUtils.createElement("rect"),t.ToolkitUtils.setAttrNullNS(u,"stroke",f),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",_),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"fill",f),t.ToolkitUtils.setAttrNullNS(u,"fill-opacity",_),t.ToolkitUtils.setAttrNullNS(u,"x",0),t.ToolkitUtils.setAttrNullNS(u,"y",0),t.ToolkitUtils.setAttrNullNS(u,"width",i),t.ToolkitUtils.setAttrNullNS(u,"height",r),t.ToolkitUtils.appendChildElem(n,u)),h===t.PatternFill.SM_DIAG_UP_LT||h===t.PatternFill.LG_DIAG_UP_LT?(u=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"stroke-linecap","square"),t.ToolkitUtils.setAttrNullNS(u,"d",t.PathUtils.moveTo(0,-a/2)+t.PathUtils.lineTo(3*o/2,a)+t.PathUtils.moveTo(-o/2,0)+t.PathUtils.lineTo(o/2,a)),t.ToolkitUtils.appendChildElem(n,u)):h===t.PatternFill.SM_DIAG_UP_RT||h===t.PatternFill.LG_DIAG_UP_RT?(u=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"stroke-linecap","square"),t.ToolkitUtils.setAttrNullNS(u,"d",t.PathUtils.moveTo(-o/2,a)+t.PathUtils.lineTo(o,-a/2)+t.PathUtils.moveTo(0,3*a/2)+t.PathUtils.lineTo(3*o/2,0)),t.ToolkitUtils.appendChildElem(n,u)):h===t.PatternFill.SM_CROSSHATCH||h===t.PatternFill.LG_CROSSHATCH?(u=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"d","M0,0L"+i+","+r+"M"+i+",0L0,"+r),t.ToolkitUtils.appendChildElem(n,u)):h===t.PatternFill.SM_CHECK||h===t.PatternFill.LG_CHECK?(s=o/2,l=a/2,u=t.SvgShapeUtils.createElement("path"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"fill",d),t.ToolkitUtils.setAttrNullNS(u,"fill-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"d","M"+s+",0L"+o+",0L"+o+","+l+"L"+s+","+l+"ZM0,"+l+"L"+s+","+l+"L"+s+","+a+"L0,"+a+"Z"),t.ToolkitUtils.appendChildElem(n,u)):h===t.PatternFill.SM_TRIANGLE_CHECK||h===t.PatternFill.LG_TRIANGLE_CHECK?(u=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"fill",d),t.ToolkitUtils.setAttrNullNS(u,"fill-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"points","0,"+r+" "+i+",0 "+i+","+r),t.ToolkitUtils.appendChildElem(n,u)):h!==t.PatternFill.SM_DIAMOND_CHECK&&h!==t.PatternFill.LG_DIAMOND_CHECK||(s=o/2,l=a/2,u=t.SvgShapeUtils.createElement("polygon"),t.ToolkitUtils.setAttrNullNS(u,"stroke",d),t.ToolkitUtils.setAttrNullNS(u,"stroke-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"stroke-width",1),t.ToolkitUtils.setAttrNullNS(u,"fill",d),t.ToolkitUtils.setAttrNullNS(u,"fill-opacity",p),t.ToolkitUtils.setAttrNullNS(u,"points","0,"+l+" "+s+",0 "+i+","+s+" "+s+","+r),t.ToolkitUtils.appendChildElem(n,u))};var z=function(){};return t.Obj.createSubclass(z,t.Obj),z.RADS_PER_DEGREE=Math.PI/180,z.createFilter=function(e,n){var i;if(!e.isLocked()){var r=new G;i=t.SvgShapeUtils.createElement("filter",e._Id),z.createFilterPrimitives(i,e,n,r);var o=t.SvgShapeUtils.createElement("feMerge"),a=t.SvgShapeUtils.createElement("feMergeNode");t.ToolkitUtils.setAttrNullNS(a,"in",r.getResultIdsUnder()[0]);var s=t.SvgShapeUtils.createElement("feMergeNode");t.ToolkitUtils.setAttrNullNS(s,"in","SourceGraphic"),t.ToolkitUtils.appendChildElem(i,o),t.ToolkitUtils.appendChildElem(o,a),t.ToolkitUtils.appendChildElem(o,s)}return i},z.createFilterPrimitives=function(t,e,n,i){e._bInner?z.CreateInnerFilterPrimitives(t,e,n,i):z.CreateOuterFilterPrimitives(t,e,n,i)},z.CreateOuterFilterPrimitives=function(e,n,i,r){var o=n._rgba,a=t.ColorUtils.getRed(o)/255,s=t.ColorUtils.getGreen(o)/255,l=t.ColorUtils.getBlue(o)/255,u=t.ColorUtils.getAlpha(o),h=n._strength,c=n._blurX,d=n._blurY,p=0,g=0;n._blurX>0&&(p=Math.max(n._blurX/3,1)),n._blurY>0&&(g=Math.max(n._blurY/3,1));var f=n._distance,_=n._angle,m=_*z.RADS_PER_DEGREE,v=Math.cos(m)*f,y=Math.sin(m)*f,S=i.getDimensions(i.getParent());if(S){var C=Math.abs(f),b=2*c,E=2*c,T=2*d,A=2*d;f>0?(b-=C,T-=C,E+=C,A+=C):f<0&&(b+=C,T+=C,E-=C,A-=C),b<0&&(b=0),T<0&&(T=0),E<0&&(E=0),A<0&&(A=0);var x=b/S.w*100,I=E/S.w*100,O=T/S.h*100,M=A/S.h*100;r.getRegionPctRect().x>-x&&(r.getRegionPctRect().x=-x),r.getRegionPctRect().y>-O&&(r.getRegionPctRect().y=-O),r.getRegionPctRect().w<100+x+I&&(r.getRegionPctRect().w=100+x+I),r.getRegionPctRect().h<100+O+M&&(r.getRegionPctRect().h=100+O+M)}if(i instanceof t.Polyline){var D=i.getStroke().getWidth();D>1&&(r.getRegionPctRect().h=r.getRegionPctRect().h+D,r.getRegionPctRect().y=r.getRegionPctRect().y-D)}var P=t.SvgShapeUtils.createElement("feColorMatrix");t.ToolkitUtils.setAttrNullNS(P,"in","SourceGraphic"),t.ToolkitUtils.setAttrNullNS(P,"type","matrix"),t.ToolkitUtils.setAttrNullNS(P,"values","0 0 0 "+a+" 0 0 0 0 "+s+" 0 0 0 0 "+l+" 0 0 0 0 "+u*h+" 0");var w=t.SvgShapeUtils.createElement("feGaussianBlur"),R=p;p!==g&&(R+=" "+g),t.ToolkitUtils.setAttrNullNS(w,"stdDeviation",R);var L=r.createResultId("blur");t.ToolkitUtils.setAttrNullNS(w,"result",L);var N=t.SvgShapeUtils.createElement("feOffset");t.ToolkitUtils.setAttrNullNS(N,"dx",v),t.ToolkitUtils.setAttrNullNS(N,"dy",y),t.ToolkitUtils.setAttrNullNS(N,"in",L);var k=r.createResultId("offset");t.ToolkitUtils.setAttrNullNS(N,"result",k),r.getResultIdsUnder().push(k),t.ToolkitUtils.appendChildElem(e,P),t.ToolkitUtils.appendChildElem(e,w),t.ToolkitUtils.appendChildElem(e,N)},z.CreateInnerFilterPrimitives=function(e,n,i,r){var o=n._rgba,a=t.ColorUtils.getRed(o)/255,s=t.ColorUtils.getGreen(o)/255,l=t.ColorUtils.getBlue(o)/255,u=t.ColorUtils.makeRGB(a,s,l),h=t.ColorUtils.getAlpha(o),c=(n._blurX,n._blurY,Math.max(n._blurX/2,1)),d=Math.max(n._blurY/2,1),p=n._distance,g=n._angle,f=n._strength,_=g*z.RADS_PER_DEGREE,m=Math.cos(_)*p,v=Math.sin(_)*p,y=t.SvgShapeUtils.createElement("feFlood");t.ToolkitUtils.setAttrNullNS(y,"in","SourceGraphic"),t.ToolkitUtils.setAttrNullNS(y,"flood-opacity",h),t.ToolkitUtils.setAttrNullNS(y,"flood-color",u);var S=r.createResultId("flood");t.ToolkitUtils.setAttrNullNS(y,"result",S);var C=t.SvgShapeUtils.createElement("feComposite");t.ToolkitUtils.setAttrNullNS(C,"operator","out"),t.ToolkitUtils.setAttrNullNS(C,"in",S),t.ToolkitUtils.setAttrNullNS(C,"in2","SourceGraphic");var b=t.SvgShapeUtils.createElement("feGaussianBlur"),E=c;c!==d&&(E+=" "+d),t.ToolkitUtils.setAttrNullNS(b,"stdDeviation",E);var T=r.createResultId("blur");t.ToolkitUtils.setAttrNullNS(b,"result",T);var A=t.SvgShapeUtils.createElement("feColorMatrix");t.ToolkitUtils.setAttrNullNS(A,"in",T),t.ToolkitUtils.setAttrNullNS(A,"type","matrix"),t.ToolkitUtils.setAttrNullNS(A,"values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 "+f+" 0");var x=r.createResultId("colMat");t.ToolkitUtils.setAttrNullNS(A,"result",x);var I=t.SvgShapeUtils.createElement("feOffset");t.ToolkitUtils.setAttrNullNS(I,"dx",m),t.ToolkitUtils.setAttrNullNS(I,"dy",v),t.ToolkitUtils.setAttrNullNS(I,"in",x);var O=r.createResultId("offset");t.ToolkitUtils.setAttrNullNS(I,"result",O);var M=t.SvgShapeUtils.createElement("feComposite");t.ToolkitUtils.setAttrNullNS(M,"operator","in"),t.ToolkitUtils.setAttrNullNS(M,"in",O),t.ToolkitUtils.setAttrNullNS(M,"in2","SourceGraphic");var D=r.createResultId("comp");t.ToolkitUtils.setAttrNullNS(M,"result",D),r.getResultIdsOver().push(D),t.ToolkitUtils.appendChildElem(e,y),t.ToolkitUtils.appendChildElem(e,C),t.ToolkitUtils.appendChildElem(e,b),t.ToolkitUtils.appendChildElem(e,A),t.ToolkitUtils.appendChildElem(e,I),t.ToolkitUtils.appendChildElem(e,M)},t.exportProperty(t,"Agent",t.Agent),t.exportProperty(t.Agent,"setEnvironment",t.Agent.setEnvironment),t.exportProperty(t.Agent,"setHighContrast",t.Agent.setHighContrast),t.exportProperty(t.Automation.prototype,"getDomElementForSubId",t.Automation.prototype.getDomElementForSubId),t.exportProperty(t.Automation.prototype,"getSubIdForDomElement",t.Automation.prototype.getSubIdForDomElement),t.exportProperty(t.BaseComponent.prototype,"applyOptions",t.BaseComponent.prototype.applyOptions),t.exportProperty(t.BaseComponent.prototype,"render",t.BaseComponent.prototype.render),t.exportProperty(t.BaseComponent.prototype,"highlight",t.BaseComponent.prototype.highlight),t.exportProperty(t.BaseComponent.prototype,"select",t.BaseComponent.prototype.select),t.exportProperty(t.BaseComponent.prototype,"getKeyboardFocus",t.BaseComponent.prototype.getKeyboardFocus),t.exportProperty(t,"Bundle",t.Bundle),t.exportProperty(t.Bundle,"addLocalizedStrings",t.Bundle.addLocalizedStrings),t.exportProperty(t,"Context",t.Context),t.exportProperty(t.Context,"resetCaches",t.Context.resetCaches),t.exportProperty(t.Context,"resetUniqueSeeds",t.Context.resetUniqueSeeds),t.exportProperty(t.Context.prototype,"getStage",t.Context.prototype.getStage),t.exportProperty(t.Context.prototype,"getSvgDocument",t.Context.prototype.getSvgDocument),t.exportProperty(t.Context.prototype,"hideTooltips",t.Context.prototype.hideTooltips),t.exportProperty(t.Context.prototype,"isReadyToRender",t.Context.prototype.isReadyToRender),t.exportProperty(t.Context.prototype,"setDatatipStyleClass",t.Context.prototype.setDatatipStyleClass),t.exportProperty(t.Context.prototype,"setLocaleHelpers",t.Context.prototype.setLocaleHelpers),t.exportProperty(t.Context.prototype,"setReadingDirection",t.Context.prototype.setReadingDirection),t.exportProperty(t.Context.prototype,"setOverlayAttachedCallback",t.Context.prototype.setOverlayAttachedCallback),t.exportProperty(t.Context.prototype,"setTooltipAttachedCallback",t.Context.prototype.setTooltipAttachedCallback),t.exportProperty(t.Context.prototype,"setTooltipStyleClass",t.Context.prototype.setTooltipStyleClass),t.exportProperty(t.Context.prototype,"setDefaultFontFamily",t.Context.prototype.setDefaultFontFamily),t.exportProperty(t.Context.prototype,"setDefaultFontSize",t.Context.prototype.setDefaultFontSize),t.exportProperty(t.Dimension.prototype,"getWidth",t.Dimension.prototype.getWidth),t.exportProperty(t.Dimension.prototype,"getHeight",t.Dimension.prototype.getHeight),t.exportProperty(t,"JsonUtils",t.JsonUtils),t.exportProperty(t.JsonUtils,"clone",t.JsonUtils.clone),t.exportProperty(t.JsonUtils,"merge",t.JsonUtils.merge),t.exportProperty(S.prototype,"addChild",S.prototype.addChild),t}()}),function(){function t(){function t(t,e,r){o[t]={deps:e.map(n),module:r,resolve:i}}function e(t,e){var n=r(t);e.apply(null,n)}function n(t){return 0===t.indexOf("./")?t.substr(2):t}function i(){if(!this._resolvedModule){var t=r(this.deps),e=this.module;this._resolvedModule="function"==typeof e?e.apply(null,t):e}return this._resolvedModule}function r(t){return t.map(function(t){var e=o[t];return e.resolve()})}var o={};return{define:t,require:e}}var e=t(),n=e.define,i=e.require;n("dataTransfer",[],function(){function t(t,e){function n(t){if("protected"!==f()){var e=o(t);return e&&d.hasOwnProperty(e)?d[e]:null}return""}function i(t,e){if("readwrite"===f()){var n=o(t);n&&(d[n]=e.toString())}}function r(t){if("readwrite"===f()){var e=o(t);e?d.hasOwnProperty(e)&&delete d[e]:d={}}}function o(t){return t?t.toString().toLowerCase():null}function a(e,n,i){t&&t(e,n,i)}function s(){var t=Object.keys(d);return t.item=function(e){return e>=0&&e<t.length?t[e]:null},t.contains=function(e){return t.indexOf(e)>=0},t}function l(){return p}function u(t){t=t.toLowerCase(),_.indexOf(t)>=0&&(p=t)}function h(){return g}function c(t){t=t.toLowerCase(),m.indexOf(t)>=0&&(g=t)}var d={},p="none",g="uninitialized",f=e||function(){return"readwrite"},_=["none","copy","link","move"],m=["uninitialized","none","copy","copylink","copymove","link","linkmove","move","all"];this.files={},this.items={},this.getData=n,this.setData=i,this.clearData=r,this.setDragImage=a,Object.defineProperty(this,"types",{get:s}),Object.defineProperty(this,"dropEffect",{get:l,set:u}),Object.defineProperty(this,"effectAllowed",{get:h,set:c})}return t}),n("dragImage",[],function(){function t(t,e,n){function i(t){var e=null!=t.parentNode,n=t.style.position,i=t.style.top;e||(t.style.position="fixed",t.style.top="10000px",document.body.appendChild(t));var r=t.cloneNode(!0);return r.id=t.id+"_dragimage",r.style.opacity=.7,r.style.position="fixed",r.style.width=t.offsetWidth+"px",r.style.height=t.offsetHeight+"px",e||(document.body.removeChild(t),t.style.position=n,t.style.top=i),r}function r(){document.body.appendChild(l),l.scrollLeft=c,l.scrollTop=d}function o(){document.body.removeChild(l),l=null}function a(t,e){l.style.left=t-u+c+"px",l.style.top=e-h+d+"px"}function s(t){l.style.visibility=t?"visible":"hidden"}var l=i(t),u=e,h=n,c=t.scrollLeft,d=t.scrollTop;this.start=r,this.end=o,this.move=a,this.show=s}return t}),n("eventDispatcher",[],function(){function t(t,n,i){var r=e(t,n,i);return!n.target.dispatchEvent(r)}function e(t,e,i){var r;if(window.Event&&"function"==typeof window.Event){var a={bubbles:s[t].bubbles,cancelable:s[t].cancelable};r=new window.Event(t,a)}else r=document.createEvent("Event"),r.initEvent(t,s[t].bubbles,s[t].cancelable);return r.view=document.defaultView,r.detail=0,o(r,e),r.getModifierState=function(t){return n(t,e)},r.dataTransfer=i,r}function n(t,e){return"Alt"===t?e.altKey:"Control"===t?e.ctrlKey:"Meta"===t?e.metaKey:"Shift"===t&&e.shiftKey}function i(t){return t?t:0}function r(t){return!!t&&t}function o(t,e){var n=e.target.getBoundingClientRect();t.screenX=i(e.screenX),t.screenY=i(e.screenY),t.clientX=i(e.clientX),t.clientY=i(e.clientY),t.offsetX=e.clientX-n.left,t.offsetY=e.clientY-n.top,t.pageX=i(e.pageX),t.pageY=i(e.pageY),t.altKey=r(e.altKey),t.ctrlKey=r(e.ctrlKey),t.metaKey=r(e.metaKey),t.shiftKey=r(e.shiftKey),t.button=i(e.button),t.buttons=i(e.buttons),t.relatedTarget=e.relatedTarget?e.relatedTarget:null}function a(t){return{screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,button:t.button,buttons:t.buttons}}var s={dragstart:{bubbles:!0,cancelable:!0},drag:{bubbles:!0,cancelable:!0},dragend:{bubbles:!0,cancelable:!1},dragenter:{bubbles:!0,cancelable:!0},dragover:{bubbles:!0,cancelable:!0},dragleave:{bubbles:!0,cancelable:!1},drop:{bubbles:!0,cancelable:!0}};return{dispatch:t,getMouseEventProps:a}}),n("autoScroller",[],function(){function t(t,n,i){for(var r=t;null!=r&&!e(r,n,i);)r=r.parentNode;return r}function e(t,e,o){if(!n(t))return!1;var a,s,l=t.scrollLeft,u=t.scrollTop;if(t===document.documentElement)l=l||document.body.scrollLeft,u=u||document.body.scrollTop;else{var h=t.getBoundingClientRect();e-=Math.round(h.left),o-=Math.round(h.top)}return a=i(t.clientWidth,t.scrollWidth,e,l),s=i(t.clientHeight,t.scrollHeight,o,u),!(!a&&!s)&&(r(t,l+a,u+s),!0)}function n(t){if(t===document.body)return!1;if(t===document.documentElement)return!0;if(1===t.nodeType){var e=window.getComputedStyle(t,null);return("auto"===e.overflow||"scroll"===e.overflow)&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)}return!1}function i(t,e,n,i){var r=12,o=15;if(n>t-r&&n<t){if(i+t<e)return o}else if(n>=0&&n<r&&i>0)return-Math.min(i,o);return 0}function r(t,e,n){t.scrollLeft=e,t.scrollTop=n,t===document.documentElement&&(document.body.scrollLeft=e,document.body.scrollTop=n)}return{checkAutoScroll:t}}),n("dragController",["./dataTransfer","./dragImage","./eventDispatcher","./autoScroller"],function(t,e,n,i){function r(){function r(e,n,i){var r=new t(d,o);return a("dragstart",e,i,r),u(r,n)?h(r,e,i):{dataTransfer:r}}function o(){return j}function a(t,e,i,r,o){return j=s(t),"dragstart"!==t&&(r.dropEffect=l(t,r.effectAllowed)),i||(i={}),i.target=e,i.relatedTarget=o,n.dispatch(t,i,r)}function s(t){return"dragstart"===t?"readwrite":"drop"===t?"readonly":"protected"}function l(t,e){var n;return n="drag"===t||"dragleave"===t?"none":"dragenter"===t||"dragover"===t?"none"===e?"none":"move"===e?"move":0===e.indexOf("link")?"link":"copy":Y}function u(t,e){return 0!==t.types.length&&(!e||e(t,U))}function h(t,e,n){return k=t,B=e,H=document.body.style.cursor,c(e,n),{dragStarted:!0,dataTransfer:t}}function c(t,e){if(null==U){var n=t.getBoundingClientRect(),i=e?e.clientX:n.left,r=e?e.clientY:n.top;d(t,i-n.left,r-n.top)}}function d(t,n,i){U&&(U.end(),U=null),t&&t.cloneNode&&(U=new e(t,n,i),U.start())}function p(t){if(t&&g()){if(U.show(!1),f(t))return M(t),!0;try{var e=_(t);m(e,t),v(e,t),C(e,t),I(e,t)}finally{U.show(!0)}}return!1}function g(){return null!=k}function f(t){return a("drag",B,t,k)}function _(t){var e=t.clientX,n=t.clientY;return e===G&&n===V?F:document.elementFromPoint(e,n)}function m(t,e){t!==F&&(t&&a("dragenter",t,e,k,F),F&&(A(F),a("dragleave",F,e,k,t)))}function v(t,e){if(t){var n=a("dragover",t,e,k);y(n)}}function y(t){if(t){var e=k.effectAllowed;Y="uninitialized"===e||"all"===e||e.indexOf(k.dropEffect)>=0?k.dropEffect:"none"}else Y=S(F)?"copy":"none"}function S(t){return t&&("TEXTAREA"===t.nodeName||"INPUT"===t.nodeName&&"text"===t.type)}function C(t,e){b(e),E(t),x(t,e)}function b(t){U.move(t.clientX,t.clientY)}function E(t){var e;e="none"===Y?"not-allowed":"copy"===Y?"copy":"link"===Y?"alias":"default",e!==document.body.style.cursor&&(document.body.style.cursor=e),T(t,e)}function T(t,e){t.style.cursor!==e&&(void 0===t._dndSavedCursor&&(t._dndSavedCursor=t.style.cursor),t.style.cursor=e)}function A(t){void 0!==t._dndSavedCursor&&(t.style.cursor=t._dndSavedCursor,delete t._dndSavedCursor)}function x(t,e){i.checkAutoScroll(t,e.clientX,e.clientY)&&(G=-1,V=-1)}function I(t,e){F=t,G=e.clientX,V=e.clientY}function O(t){D(t,!1)}function M(t){D(t,!0)}function D(t,e){if(g()){U.show(!1);var n=_(t);n&&(A(n),P(n,t,e),w(n,t,e)),a("dragend",B,t,k),N()}}function P(t,e,n){R(n)||a("dragleave",t,e,k)}function w(t,e,n){if(R(n)){var i=a("drop",t,e,k);i?Y=k.dropEffect:S(t)?L(t):Y="none"}}function R(t){return!t&&"none"!==Y}function L(t){var e=k.getData("text");if(e&&""!==e){var n=t.value,i=t.selectionEnd;t.value=n.substring(0,i)+e+n.substring(i)}}function N(){d(null,0,0),k=null,B=null,F=null,Y="none",document.body.style.cursor=H,H=null}var k,U,B,F,H,j,G=-1,V=-1,Y="none";this.start=r,this.drag=p,this.end=O,this.cancel=M}return r}),n("args",[],function(){function t(t,n){if(e(t,n),"string"!=typeof n)throw new Error("argument '"+t+"' must be a string")}function e(t,e){if(!e)throw new Error("required argument '"+t+"' not specified")}return{requiredString:t,required:e}}),n("glassPane",["./eventDispatcher"],function(t){function e(e,n){function i(t){h=t,document.body.addEventListener("mousemove",s,!0),document.body.addEventListener("mouseup",l,!0),u=window.setInterval(a,200)}function r(){u&&(window.clearInterval(u),u=null),document.body.removeEventListener("mousemove",s,!0),document.body.removeEventListener("mouseup",l,!0)}function o(){return h}function a(){var t=!1;try{t=e(h)}finally{}}function s(e){void 0===c&&(c=e.buttons),e.stopPropagation(),e.preventDefault(),h=t.getMouseEventProps(e),e.buttons!==c?n(h,!0):a()}function l(e){e.stopPropagation(),e.preventDefault(),h=t.getMouseEventProps(e),n(h,!1)}var u,h,c;this.start=i,this.end=r,this.getLastInputProps=o}return e}),n("desktopDragDriver",["./args","./glassPane","./eventDispatcher"],function(t,e,n){function i(i,r){function o(){var t=navigator.userAgent.toLowerCase();(t.indexOf("trident")>0||t.indexOf("edge")>0||t.indexOf("phantomjs")>0)&&r.addEventListener("dragstart",s,!0)}function a(){r.removeEventListener("dragstart",s,!0)}function s(t){var e,r=n.getMouseEventProps(t);t.stopPropagation(),a();try{e=i.start(t.target,l,r)}finally{o()}e.dragStarted?d(t,e,r):h(e.dataTransfer,t)}function l(t,e){return null!=e||u(t)}function u(t){var e=t.types;if(0===e.length)return!1;for(var n=0;n<e.length;n++){var i=e[n].toLowerCase();if("text"!==i&&"url"!==i)return!0}return!1}function h(t,e){c(t,e,"text"),c(t,e,"url")}function c(t,e,n){var i=t.getData(n);i&&e.dataTransfer.setData(n,i)}function d(t,e,n){t.preventDefault(),p(n)}function p(t){v=new e(f,_),v.start(t),document.body.addEventListener("keydown",m,!0)}function g(){v&&(v.end(),v=null),document.body.removeEventListener("keydown",m,!0)}function f(t){var e=i.drag(t);return e&&g(),e}function _(t,e){g(),e?i.cancel(t):i.end(t)}function m(t){if(t.stopPropagation(),t.preventDefault(),"Esc"===t.key||27===t.keyCode){var e=v.getLastInputProps();g(),i.cancel(e)}}t.required("controller",i);var v;this.install=o,this.remove=a}return i}),n("touchDragDriver",["./args"],function(t){function e(e,n){function i(){n.addEventListener("touchstart",o,!0)}function r(){n.removeEventListener("touchstart",o,!0)}function o(t){for(var e=t.target;e&&!e.draggable;)e=e.parentNode;e&&a(e)}function a(t){t.addEventListener("touchstart",l,!1),t.addEventListener("touchmove",u,!1),t.addEventListener("touchend",h,!1),t.addEventListener("touchcancel",c,!1)}function s(t){t.removeEventListener("touchstart",l,!1),t.removeEventListener("touchmove",u,!1),t.removeEventListener("touchend",h,!1),t.removeEventListener("touchcancel",c,!1)}function l(t){g=t.currentTarget,f=!1}function u(t){if(t.preventDefault(),t.stopPropagation(),!f){var n=e.start(g,null,p(t));if(!n.dragStarted)return void s(t.currentTarget);f=!0}var i=e.drag(p(t));i&&s(t.currentTarget)}function h(t){d(t,!1)}function c(t){d(t,!0)}function d(t,n){var i=t.currentTarget;n?e.cancel(p(t)):e.end(p(t)),g=null,f=!1,s(i)}function p(t){return{screenX:Math.round(t.changedTouches[0].screenX),screenY:Math.round(t.changedTouches[0].screenY),clientX:Math.round(t.changedTouches[0].clientX),clientY:Math.round(t.changedTouches[0].clientY),pageX:Math.round(t.changedTouches[0].pageX),pageY:Math.round(t.changedTouches[0].pageY),altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey}}t.required("controller",e);var g=null,f=!1;this.install=i,this.remove=r}return e}),n("bootstrap",["./dragController","./desktopDragDriver","./touchDragDriver"],function(t,e,n){function i(){if(!a()){var i=new t,o=[e,n];r(i,o)}}function r(t,e){for(var n=document.documentElement,i=0;i<e.length;i++){var r=e[i],o=new r(t,n);o.install(),s.push(o)}}function o(){s.forEach(function(t){t.remove()}),s=[]}function a(){return s.length>0}var s=[];return{init:i,destroy:o}}),i(["bootstrap"],function(t){t.init()})}(),define("ojdnd",function(){}),define("ojs/ojdvt-base",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(t,e,n,i,r){t.AttributeGroupHandler=function(t){this.Init(t)},t.Object.createSubclass(t.AttributeGroupHandler,t.Object,"oj.AttributeGroupHandler"),t.AttributeGroupHandler.prototype.Init=function(t){this._assignments={},this._valueIndex=0,this._matchRules={};for(var e in t)this.addMatchRule(e,t[e])},t.AttributeGroupHandler.prototype.getValueRamp=function(){return[]},t.AttributeGroupHandler.prototype.getValue=function(t){return this._matchRules[t]?this._matchRules[t]:(this._assignments[t]||(this._values||(this._values=this.getValueRamp().slice()),this._assignments[t]=this._values[this._valueIndex],this._valueIndex++,this._valueIndex==this._values.length&&(this._valueIndex=0)),this._assignments[t])},t.AttributeGroupHandler.prototype.getCategoryAssignments=function(){var t=[];for(var e in this._assignments)t.push({category:e,value:this._assignments[e]});return t},t.AttributeGroupHandler.prototype.addMatchRule=function(t,e){this._matchRules[t]=e},t.ShapeAttributeGroupHandler=function(t){this.Init(t)},t.Object.createSubclass(t.ShapeAttributeGroupHandler,t.AttributeGroupHandler,"oj.ShapeAttributeGroupHandler"),t.ShapeAttributeGroupHandler._attributeValues=["square","circle","diamond","plus","triangleDown","triangleUp","human"],t.ShapeAttributeGroupHandler.prototype.getValueRamp=function(){return t.ShapeAttributeGroupHandler._attributeValues};var o=function(t,e){this._path=e,this._root=t,this._delimiter="/"};o.prototype._resolveLeafObjectAndProperty=function(t,e,n,i){for(var r={};t&&e.indexOf(n)>-1;){var o=e.substring(0,e.indexOf(n));i&&void 0===t[o]&&(t[o]={}),t=t[o],e=e.substring(e.indexOf(n)+1,e.length)}return t&&(r.object=t,r.parameter=e),r},o.prototype._resolvePath=function(t){if(void 0===this._leaf){var e=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,t);this._leaf=e.object,this._param=e.parameter}},o.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},o.prototype.setValue=function(t,e){this._resolvePath(!0),!e&&this._leaf[this._param]||(this._leaf[this._param]=t)},t.ColorAttributeGroupHandler=function(n){if(this._attributeValues=[],e(document.body).hasClass("oj-hicontrast"))this._attributeValues=t.ColorAttributeGroupHandler._DEFAULT_COLORS.slice();else{if(!t.ColorAttributeGroupHandler._colors){t.ColorAttributeGroupHandler._colors=[];var i=e(document.createElement("div"));i.attr("style","display:none;"),i.attr("id","attrGps"),e(document.body).append(i);for(var r=0;r<t.ColorAttributeGroupHandler._STYLE_CLASSES.length;r++){var o=e(document.createElement("div"));o.addClass(t.ColorAttributeGroupHandler._STYLE_CLASSES[r]),i.append(o);var a=o.css("color");a&&t.ColorAttributeGroupHandler._colors.push(a)}i.remove()}t.ColorAttributeGroupHandler._colors.length>0?this._attributeValues=t.ColorAttributeGroupHandler._colors.slice():this._attributeValues=t.ColorAttributeGroupHandler._DEFAULT_COLORS.slice()}this.Init(n)},t.Object.createSubclass(t.ColorAttributeGroupHandler,t.AttributeGroupHandler,"oj.ColorAttributeGroupHandler"),t.ColorAttributeGroupHandler._DEFAULT_COLORS=["#267db3","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],t.ColorAttributeGroupHandler._STYLE_CLASSES=["oj-dvt-category1","oj-dvt-category2","oj-dvt-category3","oj-dvt-category4","oj-dvt-category5","oj-dvt-category6","oj-dvt-category7","oj-dvt-category8","oj-dvt-category9","oj-dvt-category10","oj-dvt-category11","oj-dvt-category12"],t.ColorAttributeGroupHandler._colors=null,t.ColorAttributeGroupHandler.prototype.getValueRamp=function(){return this._attributeValues};var a={CSS_TEXT_PROPERTIES:function(t){var e={};return t&&(t.hasClass("oj-gauge-metric-label")&&t.hasClass(t.parentNode,"oj-ledgauge")?(e["font-size"]=!0,e.color=!0):t.hasClass(t,"oj-chart-slice-label")?e.color=!0:t.hasClass("oj-treemap-node-header")&&(e["font-weight"]=!0)),a._buildTextCssPropertiesObject(t,e)},CSS_BACKGROUND_PROPERTIES:function(t,e,n,i){return a._buildCssBackgroundPropertiesObject(t)},CSS_URL:function(t){return a._parseUrl(t)}};a._INHERITED_FONT_COLOR="rgb(254, 0, 254)",a._INHERITED_FONT_FAMILY="Times",a._INHERITED_FONT_SIZE="1px",a._INHERITED_FONT_WEIGHT="1",a._INHERITED_FONT_STYLE="normal",a._FONT_SIZE_BUFFER=4,a._styleCache={},a.defaultStyleProcessor=function(t,e){return t.css(e)},a._parseUrl=function(t){var e=t.css("background-image");return e&&e.indexOf("url(")!==-1?e.slice(e.indexOf("url(")+4,e.length-1).replace(/"/g,""):e},a._buildCssBackgroundPropertiesObject=function(t){var e={};return t.css("border-top-color")&&(e["border-color"]=t.css("border-top-color")),t.css("border-width")&&t.css("border-style")&&"none"!=t.css("border-style")&&(e["border-width"]=t.css("border-width")),t.css("background-color")&&(e["background-color"]=t.css("background-color")),e},a._buildTextCssPropertiesObject=function(t,e){var n={},i=t.css("font-family");return i&&i!==a._INHERITED_FONT_FAMILY&&(n["font-family"]=i.replace(/"/g,"'")),i=t.css("font-size"),!i||i.indexOf("px")>-1&&parseFloat(i)<a._FONT_SIZE_BUFFER||e["font-size"]||(n["font-size"]=i),i=t.css("font-weight"),i&&i!==a._INHERITED_FONT_WEIGHT&&!e["font-weight"]&&(n["font-weight"]=i),i=t.css("color"),i&&i!==a._INHERITED_FONT_COLOR&&!e.color&&(n.color=i),i=t.css("font-style"),i&&i!==a._INHERITED_FONT_STYLE&&(n["font-style"]=i),n},a.processStyles=function(t,n,i,r){var o=e(document.createElement("div"));o.attr("style","display:none;"),t.append(o);for(var s="",l=0;l<i.length;l++)s=s+i[l]+" ";o.attr("class",s),e(document.body).append(o);var u=e(document.createElement("div"));u.css("font-size",a._INHERITED_FONT_SIZE),u.css("color",a._INHERITED_FONT_COLOR),u.css("font-weight",a._INHERITED_FONT_WEIGHT),u.css("font-style",a._INHERITED_FONT_STYLE),o.append(u);for(var h in r){var c=r[h];c instanceof Array||(c=[c]),a._processStyle(u,n,h,c)}o.remove()},a._processStyle=function(t,n,i,r){a._styleCache[i]||(a._styleCache[i]={});for(var s=null,l=0;l<r.length;l++){var u=r[l],h=u.property;if(h){var c=a._styleCache[i][h];if("undefined"==typeof c&&(s||(s=e(document.createElement("div")),s.addClass(i),t.append(s)),c=a._resolveStyle(s,h),a._styleCache[i][h]=c),null!=c){var d=new o(n,u.path),p=a[h];if(null!=p){var g=d.getValue();if("CSS_URL"!==h){var f="";if(null!=g){var _=a._getStyleString(g);for(var m in c)_.indexOf(m)===-1&&(f+=m+":"+c[m]+";");f+=_}else for(var m in c)f+=m+":"+c[m]+";";c=f}}d.setValue(c,null!=p)}}}},a._getStyleString=function(t){if(t instanceof Object){var e="";for(var n in t){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e+=i+":"+t[n]+";"}return e}return null!=t&&"string"==typeof t?t:""},a._resolveStyle=function(t,e){var n=a[e],i=n?n(t):a.defaultStyleProcessor(t,e);return null==i||"string"==typeof i&&""==i.replace(/^\s+/g,"")?null:i},t.__registerWidget("oj.dvtBaseComponent",e.oj.baseComponent,{_ComponentCreate:function(){this._super(),this._renderCount=0,
this._numDeferredObjs=0,this._optionsCopy=null;for(var n=this._GetComponentStyleClasses(),i=0;i<n.length;i++)this.element.addClass(n[i]);this._referenceDiv=e(document.createElement("div")),this._referenceDiv.attr("style","visibility:hidden;"),this.element.append(this._referenceDiv);var o=this.element[0].parentElement;o&&o._dvtcontext?this._context=o._dvtcontext:this._context=new r.Context(this.element[0],null,this._referenceDiv[0]),this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(t.Components.subtreeAttached),this._context.setOverlayAttachedCallback(t.Components.subtreeAttached),this._context.setTooltipStyleClass("oj-dvt-tooltip"),this._context.setDatatipStyleClass("oj-dvt-datatip"),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),e(document.body).hasClass("oj-hicontrast")&&r.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),this._context.getStage().addChild(this._component),r.requireJS!==!1&&(this._setLocaleHelpers(),this._processTranslations()),this._LoadResources(),this.options._environment="jet",this.options._widgetConstructor=t.Components.getWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),this.element.attr("tabIndex",0),"off"!=this.options.trackResize&&this._addResizeListener(),this._processOptions(),this._Render()},refresh:function(){this._super(),this._context.setReadingDirection(this._GetReadingDirection()),this._processTranslations(),this._Render()},getNodeBySubId:function(t){var e=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(e){var n=this._ConvertLocatorToSubId(t);return e.getDomElementForSubId(n)}},getSubIdByNode:function(t){var e=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(e){var n=e.getSubIdForDomElement(t);return n?this._ConvertSubIdToLocator(n):null}},_ConvertLocatorToSubId:function(t){return null},_ConvertSubIdToLocator:function(t){return null},_ProcessStyles:function(){a.processStyles(this.element,this.options,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var t={};return t["oj-dvt-no-data-message"]={path:"_statusMessageStyle",property:"CSS_TEXT_PROPERTIES"},t},_GetEventTypes:function(){return[]},_GetTranslationMap:function(){var e=this.options.translations,n={"DvtUtilBundle.CLEAR_SELECTION":e.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":e.labelAndValue,"DvtUtilBundle.INVALID_DATA":e.labelInvalidData,"DvtUtilBundle.NO_DATA":e.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":e.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":e.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":e.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":e.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":e.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":e.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":e.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":e.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":e.stateHidden,"DvtUtilBundle.STATE_VISIBLE":e.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":e.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":e.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":e.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":e.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":e.labelScalingSuffixQuadrillion},i=t.LocaleData.getMonthNames("abbreviated");return n["DvtUtilBundle.MONTH_SHORT_JANUARY"]=i[0],n["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=i[1],n["DvtUtilBundle.MONTH_SHORT_MARCH"]=i[2],n["DvtUtilBundle.MONTH_SHORT_APRIL"]=i[3],n["DvtUtilBundle.MONTH_SHORT_MAY"]=i[4],n["DvtUtilBundle.MONTH_SHORT_JUNE"]=i[5],n["DvtUtilBundle.MONTH_SHORT_JULY"]=i[6],n["DvtUtilBundle.MONTH_SHORT_AUGUST"]=i[7],n["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=i[8],n["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=i[9],n["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=i[10],n["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=i[11],n},_processTranslations:function(){var t=this._GetTranslationMap();r.Bundle.addLocalizedStrings(t)},_setLocaleHelpers:function(){var e={};e.numberConverterFactory=t.Validation.getDefaultConverterFactory("number"),e.dateToIsoConverter=function(e){return e instanceof Date?t.IntlConverterUtils.dateToLocalIso(e):e},e.isoToDateConverter=function(e){if("string"==typeof e){var n=t.IntlConverterUtils.isoToDate(e),i=n.toJSON()?t.IntlConverterUtils.dateToLocalIso(n):e;return t.IntlConverterUtils.isoToLocalDate(i)}return e},e.dateToIsoWithTimeZoneConverter=function(e){if(e instanceof Date){var n=-1*e.getTimezoneOffset(),i=n>=0?"+":"-",r=Math.floor(Math.abs(n)/60),o=Math.abs(n)%60,a=i+(2!==r.toString().length?"0"+r:r)+":"+(2!==o.toString().length?o+"0":o);return t.IntlConverterUtils.dateToLocalIso(e)+a}return e},this._context.setLocaleHelpers(e)},_destroy:function(){this._context.hideTooltips(),this._context=null;var t=this.element[0].parentElement;t&&t._dvtcontext&&(t._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this._removeResizeListener(),this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var e=this._GetComponentStyleClasses(),n=0;n<e.length;n++)this.element.removeClass(e[n]);this._super()},_setOptions:function(t,n){this._superApply(arguments);var i=this.options.trackResize;if("off"==i&&this._resizeListener?this._removeResizeListener():"off"==i||this._resizeListener||this._addResizeListener(),this._processOptions(),!this._bUserDrivenChange){var r=!1,o=this._GetEventTypes(),a=["highlightedCategories","selection","dataCursorPosition"];e.each(t,function(t,e){if(o.indexOf(t)<0&&a.indexOf(t)<0)return r=!0,!1}),r?this._Render():(void 0!==t.highlightedCategories&&this._component.highlight(t.highlightedCategories),void 0!==t.selection&&this._component.select(t.selection),void 0!==t.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(t.dataCursorPosition))}},_CreateDvtComponent:function(t,e,n){return null},_HandleEvent:function(t){var n=t.type;"selection"===n?this._UserOptionChange("selection",t.selection):"categoryHide"===n||"categoryShow"===n?this._UserOptionChange("hiddenCategories",t.hiddenCategories):"categoryHighlight"===n?this._UserOptionChange("highlightedCategories",t.categories):"optionChange"===n?this._UserOptionChange(t.key,t.value,t.optionMetadata):"touchHoldRelease"===n&&this.options.contextMenu?this._OpenContextMenu(e.Event(t.nativeEvent),"touch"):"ready"===n&&0===this._numDeferredObjs&&(this._promiseResolve&&this._promiseResolve(!0),this._ready=!0,this._promiseResolve=null,this._promise=null)},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),t.DomUtils.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(t.DomUtils.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(t,e){var n=this.element.width(),i=this.element.height();(null==this._width||null==this._height||Math.abs(n-this._width)+Math.abs(i-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){if(this._context.hideTooltips(),this._NotReady(),this._context.isReadyToRender()){if(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this.options._width=this._width,this.options._height=this._height,this.options._locale=t.Config.getLocale(),this.options.dnd&&this.element.attr("draggable",!0),this._ProcessStyles(),this._renderCount++,e)this._optionsCopy||this._renderComponent(null);else{var n=this._resolveDeferredData();0===n.length&&this._renderComponent(this.options)}this._renderNeeded=!1}else this._renderNeeded=!0},_NotifyShown:function(){this._super(),this._renderNeeded&&this._Render()},_NotifyAttached:function(){this._super(),this._renderNeeded&&this._Render()},_NotifyDetached:function(){this._super(),this._context.hideTooltips()},_NotifyHidden:function(){this._super(),this._context.hideTooltips()},_UserOptionChange:function(t,e,n){this._bUserDrivenChange=!0,this.option(t,e,{_context:{writeback:!0,optionMetadata:n,internalSet:!0}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(t,e,n){if("touch"!==n)if("keyboard"===n){var i=this.element[0].getBoundingClientRect(),r=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,o=r?"left+"+(r.left+.5*r.width-i.left)+" top+"+(r.top+.5*r.height-i.top):"center";this._OpenContextMenu(e,n,{position:{at:o}})}else this._super(t,e,n)},_GetDvtComponent:function(e){var n=t.Components.getWidgetConstructor(e)("instance");return n?n._component:null},_AddAutomationGetters:function(t){if(t){var e={};for(var n in t)this._addGetter(t,n,e);Object.defineProperties(t,e)}},_addGetter:function(t,e,n){var i="selected"==e?"is":"get",r=i+e.charAt(0).toUpperCase()+e.slice(1);n[r]={value:function(){return t[e]}}},_GetStringFromIndexPath:function(t){for(var e="",n=0;n<t.length;n++)e+="["+t[n]+"]";return e},_GetIndexPath:function(t){for(var e=[],n=0;t.indexOf("[",n)>0;){var i=t.indexOf("[",n)+1,r=t.indexOf("]",n);e.push(Number(t.substring(i,r))),n=r+1}return e},_GetFirstIndex:function(t){return Number(this._GetFirstBracketedString(t))},_GetFirstBracketedString:function(t){var e=t.indexOf("[")+1,n=t.indexOf("]");return t.substring(e,n)},_GetComponentDeferredDataPaths:function(){return{}},_resolveDeferredData:function(){this._optionsCopy=null;var t=this._GetComponentDeferredDataPaths();for(var e in t)for(var n=t[e],i=0;i<n.length;i++)if("root"===e){if(this._copyOptions(this.options,n[i]))break}else{var r=this.options[e];if(r)for(var o=0;o<r.length&&!this._copyOptions(r[o],n[i]);o++);}var a=[];if(this._numDeferredObjs=0,this._optionsCopy){var s=this;for(var e in t){var n=t[e];n.forEach(function(t){var n;if("root"===e)n=s._getPromise(s._optionsCopy,t),n&&a.push(n);else{var i=s._optionsCopy[e];if(i)for(var r=0;r<i.length;r++)n=s._getPromise(i[r],t),n&&a.push(n)}})}}return a},_copyOptions:function(t,e){if(!this._optionsCopy){var n=new o(t,e).getValue();n&&(n instanceof Function||n instanceof Promise)&&(this._optionsCopy=r.JsonUtils.clone(this.options))}return null!==this._optionsCopy},_getPromise:function(t,e){var n=new o(t,e),i=n.getValue();if(i instanceof Function&&(i=Promise.resolve(i(this._GetDataContext(t)))),i&&i instanceof Promise){this._numDeferredObjs++;var r=this._renderCount,a=this;return i.then(function(t){a._renderDeferredData(r,n,t)},function(t){a._renderDeferredData(r,n,[])}),i}return null},_renderDeferredData:function(t,e,n){t===this._renderCount&&(this._numDeferredObjs--,e.setValue(n,!0),0===this._numDeferredObjs&&(this._renderComponent(this._optionsCopy),this._optionsCopy=null))},_renderComponent:function(t){var e=this._IsFlowingLayoutSupported()&&this._resizeListener;e&&this._removeResizeListener(),this._component.render(t,this._width,this._height),e&&this._addResizeListener()},_GetDataContext:function(t){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var t=this;this._promise=new Promise(function(e){t._promiseResolve=e})}return this._promise},_NotReady:function(){this._ready=!1},_processOptions:function(){var t=this.options.tooltip;"function"==typeof t&&(this.options.tooltip={renderer:t})}},!0),function(){var e={properties:{trackResize:{type:"string"}},methods:{whenReady:{}},extension:{_widgetName:"dvtBaseComponent"}};t.Components.registerMetadata("dvtBaseComponent","baseComponent",e)}()}),define("ojs/internal-deps/dvt/DvtAxis",["./DvtToolkit"],function(t){return function(t){t.Axis=function(){},t.Obj.createSubclass(t.Axis,t.BaseComponent),t.Axis.newInstance=function(e,n,i){var r=new t.Axis;return r.Init(e,n,i),r},t.Axis.getDefaults=function(t){return(new i).getDefaults(t)},t.Axis.prototype.Init=function(e,n,a){t.Axis.superclass.Init.call(this,e,n,a),this.Defaults=new i,this.EventManager=new r(this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new o(this.EventManager,this)),this._bounds=null},t.Axis.MINIMUM_AXIS_BUFFER=10,t.Axis.prototype.SetOptions=function(t){t?this.Options="off"==t.rendered?t:this.Defaults.calcOptions(t):this.Options||(this.Options=this.GetDefaults())},t.Axis.prototype.getPreferredSize=function(t,e,n){return this.SetOptions(t),a.getPreferredSize(this,e,n)},t.Axis.prototype.render=function(e,n,i,r,o){this.getCache().clearCache(),this.SetOptions(e),this._navigablePeers=[],this.Width=n,this.Height=i,this.removeChildren(),r||(r=0),o||(o=0);var s=new t.Rectangle(r,o,n,i);a.render(this,s)},t.Axis.prototype.__registerObject=function(t){(null!=t.getDatatip()||null!=t.getAction()||t.isDrillable())&&this._navigablePeers.push(t)},t.Axis.prototype.__getKeyboardObjects=function(){return this._navigablePeers},t.Axis.prototype.isNavigable=function(){return this._navigablePeers.length>0},t.Axis.prototype.getKeyboardFocus=function(){return null!=this.EventManager?this.EventManager.getFocus():null},t.Axis.prototype.setKeyboardFocus=function(e,n){if(null!=this.EventManager){for(var i=this.__getKeyboardObjects(),r=e.getId(),o=!1,a=0;a<i.length;a++){var s=i[a].getId();if(r instanceof Array&&s instanceof Array&&t.ArrayUtils.equals(r,s)||r===s){this.EventManager.setFocusObj(i[a]),o=!0,n&&i[a].showKeyboardFocusEffect();break}}o||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(i));var l=this.getKeyboardFocus();if(l){var u=l.getDisplayable();u.setAriaProperty("label",l.getAriaLabel()),this.getCtx().setActiveElement(u)}}},t.Axis.prototype.processEvent=function(t,e){this===e&&this.dispatchEvent(t)},t.Axis.prototype.getInfo=function(){return this.Info},t.Axis.prototype.__setInfo=function(t){this.Info=t},t.Axis.prototype.getWidth=function(){return this.Width},t.Axis.prototype.getHeight=function(){return this.Height},t.Axis.prototype.__setBounds=function(t){this._bounds=t},t.Axis.prototype.__getBounds=function(){return this._bounds},t.Axis.prototype.getAutomation=function(){return new n(this)};var e={};t.Obj.createSubclass(e,t.Obj),e.TICK_LABEL="tickLabel",e.TITLE="title";var n=function(t){this._axis=t,this._options=this._axis.getOptions(),this._axisInfo=this._axis.getInfo()};t.Obj.createSubclass(n,t.Automation),n.prototype.GetSubIdForDomElement=function(n){var i=this._axis.getEventManager().GetLogicalObject(n);if(i&&i instanceof t.SimpleObjPeer){if(i.getParams().type==e.TITLE)return"title";if(this._options.groups){for(var r=i.getParams().level,o=this._axisInfo.getStartIndex(i.getParams().index,r),a="",s=0;s<=r;s++)for(var l=this._axisInfo.getLabels(this._axis.getCtx(),s),u=0;u<l.length;u++){var h=this._axisInfo.getLabelIndex(l[u]);this._axisInfo.getStartIndex(h,s)<=o&&this._axisInfo.getEndIndex(h,s)>=o&&(a+="["+this._axisInfo.getPosition(h,s)+"]")}if(a.length>0)return"item"+a}}return null},n.prototype.getDomElementForSubId=function(e){if("title"==e){var n=this._axisInfo.getTitle();if(n)return n.getElem()}else if(this._axisInfo instanceof t.GroupAxisInfo)for(var i=e.split("[").length-1,r=i-1,o=0,a=0,s=0;s<=r;s++){var l=e.indexOf("["),u=e.indexOf("]"),h=e.substring(l+1,u);e=e.substring(u+1);for(var c,d=this._axisInfo.getLabels(this._axis.getCtx(),s),p=0;p<d.length;p++)if(c=this._axisInfo.getLabelIndex(d[p]),this._axisInfo.getStartIndex(c,s)==a){o=c;break}for(var g=o;g<d.length;g++)if(c=this._axisInfo.getLabelIndex(d[g]),this._axisInfo.getPosition(c,s)==h){if(0==e.length)return d[g].getElem();a=this._axisInfo.getStartIndex(c,s);break}}return null};var i=function(){this.Init({skyros:i.VERSION_1,alta:i.SKIN_ALTA,next:i.SKIN_NEXT})};t.Obj.createSubclass(i,t.BaseComponentDefaults),i.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,layout:{titleGap:6}},i.SKIN_ALTA={axisLine:{lineColor:"#9E9E9E"},majorTick:{lineColor:"rgba(196,206,215,0.4)",baselineColor:"auto"},minorTick:{lineColor:"rgba(196,206,215,0.2)"},tickLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12)},i.VERSION_1={position:null,baselineScaling:"zero",axisLine:{lineColor:"#8A8DAC",lineWidth:1,rendered:"on"},majorTick:{lineColor:"rgba(138,141,172,0.4)",lineWidth:1,rendered:"auto",lineStyle:"solid"},minorTick:{lineColor:"rgba(138,141,172,0.20)",lineWidth:1,rendered:"off",lineStyle:"solid"},tickLabel:{scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #333333;"),rotation:"auto",rendered:"on"},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #737373;"),startGroupOffset:0,endGroupOffset:0,layout:{titleGap:4,radialLabelGap:5,insideLabelGapWidth:4,insideLabelGapHeight:2,hierarchicalLabelGapHeight:8,hierarchicalLabelGapWidth:15},_locale:"en-us"},i.getGapSize=function(e,n,i){var r=Math.min(t.TextUtils.getTextStringHeight(e,n.tickLabel.style)/14,1);return Math.ceil(i*r)};var r=function(t){this.Init(t.getCtx(),t.processEvent,t),this._axis=t};t.Obj.createSubclass(r,t.EventManager),r.getUIParams=function(t,e,n,i){return{type:t,id:e,index:n,level:i}},r.prototype.getComponent=function(){return this._axis},r.prototype.OnClick=function(t){r.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);if(e){var n=this.processActionEvent(e);n&&t.stopPropagation()}},r.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);if(e){var n=t.touchEvent,i=this.processActionEvent(e);i&&n&&n.preventDefault()}},r.prototype.processActionEvent=function(e){return e&&e.getAction&&e.getAction()?(this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()),this._axis),!0):!!(e instanceof s&&e.isDrillable())&&(this.FireEvent(t.EventFactory.newChartDrillEvent(e.getId(),null,e.getGroup()),this._axis),!0)},r.prototype.isDndSupported=function(){return!0},r.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof s&&null!=e.getGroup()?"groups":null},r.prototype.GetDragDataContexts=function(){var t=this.DragSource.getDragObject();return t instanceof s?[{id:t.getId(),group:t.getGroup(),label:t.getLabel().getTextString()}]:[]};var o=function(t,e){this.Init(t,e)};t.Obj.createSubclass(o,t.KeyboardHandler),o.prototype.Init=function(t,e){o.superclass.Init.call(this,t),this._axis=e},o.prototype.processKeyDown=function(e){var n=e.keyCode,i=this._eventManager.getFocus(),r=null;if(n==t.KeyboardEvent.TAB){i&&(t.EventManager.consumeEvent(e),r=i);var a=this._axis.__getKeyboardObjects();a.length>0&&(t.EventManager.consumeEvent(e),r=this.getDefaultNavigable(a))}else n==t.KeyboardEvent.ENTER?i&&(this._eventManager.processActionEvent(i),t.EventManager.consumeEvent(e)):r=o.superclass.processKeyDown.call(this,e);return r};var a=new Object;t.Obj.createSubclass(a,t.Obj),a._MAX_TITLE_LINE_WRAP=3,a.getPreferredSize=function(e,n,i){var r=a._createAxisInfo(e,new t.Rectangle(0,0,n,i)),o=e.getCtx(),s=e.getOptions(),l="top"==s.position||"bottom"==s.position;if("off"==s.rendered||n<=0||i<=0)return l?new t.Dimension(n,0):new t.Dimension(0,i);var u=a.getTitleHeight(o,s,.8*(l?n:i),.8*(l?i:n)),h=0!=u?u+a._getTitleGap(e):0;if("on"==s.tickLabel.rendered&&"inside"!=s.tickLabel.position)if(l){var c=t.TextUtils.getTextStringHeight(o,s.tickLabel.style);r instanceof t.DataAxisInfo?h+=c:r instanceof t.TimeAxisInfo?h+=null!=r.getLabels(o,1)?2*c:c:r instanceof t.GroupAxisInfo&&(h=a._getGroupAxisPreferredSize(e,r,h,i,l))}else if(r instanceof t.DataAxisInfo)h+=t.TextUtils.getMaxTextDimensions(r.getLabels(o)).w;else if(r instanceof t.TimeAxisInfo){var d=r.getLabels(o),p=t.TextUtils.getMaxTextDimensions(d).w,g=r.getLabels(o,1),f=null!=g?t.TextUtils.getMaxTextDimensions(g).w:0;h+=Math.max(p,f)}else r instanceof t.GroupAxisInfo&&(h=a._getGroupAxisPreferredSize(e,r,h,n,l));return l?new t.Dimension(n,Math.min(h,i)):new t.Dimension(Math.min(h,n),i)},a.render=function(t,e){var n=a._createAxisInfo(t,e),i=t.getOptions();"off"!=i.rendered&&(t.__setBounds(e.clone()),a._renderBackground(t,e),a._renderTitle(t,n,e),a._renderLabels(t,n,e))},a._createAxisInfo=function(e,n){var i=t.AxisInfo.newInstance(e.getCtx(),e.getOptions(),n);return e.__setInfo(i),i},a._getTitleGap=function(t){var e=t.getOptions();return i.getGapSize(t.getCtx(),e,e.layout.titleGap)},a._renderBackground=function(e,n){var i=e.getOptions();if(i.dnd){var r=i.dnd.drop;if(Object.keys(r.xAxis).length>0||Object.keys(r.yAxis).length>0||Object.keys(r.y2Axis).length>0){var o=i.position,a="top"==o||"bottom"==o,s=a?4:10,l=a?10:4,u=new t.Rect(e.getCtx(),n.x-l,n.y-s,n.w+2*l,n.h+2*s);u.setInvisibleFill(),e.addChild(u),e.getCache().putToCache("background",u)}}},a._renderTitle=function(n,i,o){var s=n.getOptions();if(s.title){var l=s.position;if("radial"!=l&&"tangential"!=l){var u="top"==s.position||"bottom"==s.position,h=u?o.w:o.h,c=u?o.h:o.w,d=s.titleStyle,p=a.isWrapEnabled(d),g=a._createText(n.getEventManager(),n,s.title,d,0,0,h,c,r.getUIParams(e.TITLE),p);if(g){var f=a._getTitleGap(n),_=(i.getStartOverflow()-i.getEndOverflow())/2,m=t.Agent.isRightToLeft(n.getCtx()),v=t.TextUtils.getTextHeight(g);g.alignCenter(),"top"==l?(g.setX(o.x+_+o.w/2),g.setY(o.y),o.y+=v+f,o.h-=v+f):"bottom"==l?(g.setX(o.x+_+o.w/2),g.setY(o.y+o.h-v),o.h-=v+f):"left"==l?(g.alignMiddle(),g.setRotation(m?Math.PI/2:3*Math.PI/2),g.setTranslate(o.x+v/2,o.y+o.h/2),o.x+=v+f,o.w-=v+f):"right"==l&&(g.alignMiddle(),g.setRotation(m?Math.PI/2:3*Math.PI/2),g.setTranslate(o.x+o.w-v/2,o.y+o.h/2),o.w-=v+f),i.setTitle(g)}}}},a._renderLabels=function(t,e,n){var i=t.getOptions();if("on"==i.tickLabel.rendered){var r=i.position;"top"==r||"bottom"==r?a._renderLabelsHoriz(t,e,n):"tangential"==r?a._renderLabelsTangent(t,e,n):a._renderLabelsVert(t,e,n),a._renderGroupSeparators(t,e,n)}},a._renderLabelsHoriz=function(n,o,a){var l=n.getCtx(),u=n.getOptions(),h=u.position,c="inside"==u.tickLabel.position,d=t.Agent.isRightToLeft(l),p=o instanceof t.GroupAxisInfo,g=p&&o.getNumLevels()>1,f=g?0:null,_=o.getLabels(l,f);for(E=g?i.getGapSize(l,u,u.layout.hierarchicalLabelGapHeight):0;_;){for(var m=0,v=0,y=0;y<_.length;y++){var S=_[y];if(null!=S){var C=S instanceof t.MultilineText||S instanceof t.BackgroundMultilineText;if(o.isLabelRotated(f)){var b=!C||C&&!S.isWrapEnabled();if(b&&!t.TextUtils.fitText(S,a.h,a.w,n))continue;d?S.alignLeft():S.alignRight(),g?(m=t.TextUtils.getTextWidth(S),S.setTranslateY(a.h-m),v=Math.max(v,m)):S.setTranslateY(a.y)}else{if(!c&&t.TextUtils.guessTextDimensions(S).h-1>a.h)continue;if(g&&"bottom"==h?S.setY(a.h):"bottom"==h?S.setY(a.y):S.setY(a.y+a.h),!g&&("bottom"==h&&!c||"top"==h&&c)?S.alignTop():g&&"top"==h?S.alignTop():S.alignBottom(),g)v=Math.max(v,t.TextUtils.guessTextDimensions(S).h);else if(c){var E=i.getGapSize(l,u,u.layout.insideLabelGapWidth);d?S.alignRight():S.alignLeft(),S.setX(S.getX()+E*(d?-1:1))}}var T=p?o.getLabelIndex(S):y,A=o.getDatatip(T,f),x=S.getUntruncatedTextString(),I=o.getAction(T,f),O=o.isDrillable(T,f),M=o.getGroup(T,f),D=r.getUIParams(e.TICK_LABEL,S.getTextString(),T,f);n.getEventManager().associate(S,new s(n,S,M,I,O,x,A,D)),g?o.setLastRenderedLevel(f):v=Math.max(v,t.TextUtils.guessTextDimensions(S).h),n.addChild(S)}}if(g){for(y=0;y<_.length;y++)if(S=_[y],null!=S){var P=o.isLabelRotated(f),w=f<o.getNumLevels()-1;!P&&w?(S.setY(a.h-v/2),S.alignMiddle()):S.setTranslateY(a.h-v)}a.y+=v+E,a.h-=v+E,f++,_=o.getLabels(n.getCtx(),f)}else a.y+=v,a.h-=v,_=null}if(o instanceof t.TimeAxisInfo){_=o.getLabels(n.getCtx());var R=o.getLabels(n.getCtx(),1),L=0;if(null!=R)for(y=0;y<R.length;y++)if(S=R[y],null!=S&&!(t.TextUtils.guessTextDimensions(S).h-1>a.h)){n.getEventManager().associate(S,new t.SimpleObjPeer(null,null,null,r.getUIParams(e.TICK_LABEL,S.getTextString())));var N=0,k=0,U=o.getOptions()._maxOverflowCoord,B=o.getOptions()._minOverflowCoord;if(null!=_[y]&&(L=_[y].measureDimensions().w/2,N=o._level1Overflow[y],k=o._level2Overflow[y]),0==N&&0==k){var F,H=S.getX();d?(F=H+L<=U?H+L:U,S.setX(F)):(F=H-L>=B?H-L:B,S.setX(F))}else N<0?S.setX(B):N>0&&S.setX(U);S.alignTop(),S.setY(a.y),n.addChild(S)}}},a._renderLabelsVert=function(n,o,a){var l,u,h,c=n.getOptions(),d=c.position,p=n.getCtx(),g=t.Agent.isRightToLeft(p),f=o instanceof t.DataAxisInfo,_="inside"==c.tickLabel.position,m=o instanceof t.GroupAxisInfo,v=m&&o.getNumLevels()>1,y=v?0:null;l=o.getLabels(n.getCtx(),y);var S=0;v?(u=i.getGapSize(p,c,c.layout.hierarchicalLabelGapWidth),h=t.TextUtils.getMaxTextDimensions(l).w):"radial"==d?(u=i.getGapSize(p,c,c.layout.radialLabelGap),S=a.x+a.w/2,g?S+=u+t.TextUtils.getMaxTextDimensions(l).w:S-=u):"left"==d?(S=a.x+a.w,f&&_&&(S+=t.TextUtils.getMaxTextDimensions(l).w)):(S=a.x,f&&!_&&(S+=t.TextUtils.getMaxTextDimensions(l).w));for(var C=function(u,C){var b=u instanceof t.MultilineText||u instanceof t.BackgroundMultilineText,E=!b||b&&!u.isWrapEnabled();if(!(v&&t.TextUtils.getMaxTextDimensions(l).w-1>a.w)&&(v||_||!E||t.TextUtils.fitText(u,a.w,a.h,n))){C=m?o.getLabelIndex(u):C;var T=o.getDatatip(C,y),A=u.getUntruncatedTextString(),x=o.getAction(C,y),I=o.isDrillable(C,y),O=o.getGroup(C,y),M=r.getUIParams(e.TICK_LABEL,u.getTextString(),C,y);if(n.getEventManager().associate(u,new s(n,u,O,x,I,A,T,M)),v)u.alignRight(),u.setX(g?a.w:a.x+h),o.setLastRenderedLevel(y);else if(u.setX(S),f||"right"!=d?u.alignRight():u.alignLeft(),_&&(u.alignBottom(),u.setY(u.getY()-i.getGapSize(p,c,c.layout.insideLabelGapHeight))),"radial"==d){var D=u.getY();u.setY(a.y+a.h/2-D);var P=u.getDimensions(),w=.15*P.h,R=t.PathUtils.roundedRectangle(P.x-w,P.y,P.w+2*w,P.h,2,2,2,2),L=new t.Path(n.getCtx(),R),N=u.getCSSStyle().getStyle(t.CSSStyle.BACKGROUND_COLOR),k=D+P.h/2>o.getEndCoord()&&"circle"==n.getOptions().polarGridShape?1:.3;N?L.setSolidFill(N):L.setSolidFill("#FFFFFF",k),n.addChild(L)}n.addChild(u)}};l;){for(var b=0;b<l.length;b++){var E=l[b];null!=E&&C(E,b)}if(!v)break;a.x+=h+u,a.w-=h+u,y++,l=o.getLabels(n.getCtx(),y),h=l?t.TextUtils.getMaxTextDimensions(l).w:null}if(o instanceof t.TimeAxisInfo){var T=o.getLabels(n.getCtx(),1);if(null!=T)for(b=0;b<T.length;b++)E=T[b],null!=E&&C(E,b)}},a._renderLabelsTangent=function(n,i,o){for(var a=i.getLabels(n.getCtx()),l=0;l<a.length;l++){var u=a[l];if(null!=u){var h=o.w/2-Math.abs(u.getX()),c=o.h/2-Math.abs(u.getY());if(t.TextUtils.fitText(u,h,c,n)){var d=i instanceof t.GroupAxisInfo?i.getLabelIndex(u):l,p=i.getDatatip(d),g=u.getUntruncatedTextString(),f=i.getAction(d),_=i.isDrillable(d),m=i.getGroup(d),v=r.getUIParams(e.TICK_LABEL,u.getTextString(),d);n.getEventManager().associate(u,new s(n,u,m,f,_,g,p,v)),u.setTranslateX(o.x+o.w/2),u.setTranslateY(o.y+o.h/2),n.addChild(u)}}}},a._createText=function(e,n,i,r,o,s,l,u,h,c){var d;return c?(d=new t.MultilineText(n.getCtx(),i,o,s),d.setMaxLines(a._MAX_TITLE_LINE_WRAP),d.wrapText(l,u,1)):d=new t.OutputText(n.getCtx(),i,o,s),d.setCSSStyle(r),t.TextUtils.fitText(d,l,u,n)?(e.associate(d,new t.SimpleObjPeer(d.getUntruncatedTextString(),null,null,h)),d):null},a._renderGroupSeparators=function(e,n,r){if(n instanceof t.GroupAxisInfo&&n.areSeparatorsRendered()){var o=n.getNumLevels();if(o<=1||n.getLastRenderedLevel()<=0)return;for(var s,l,u,h,c,d,p=e.getOptions(),g=p.position,f="top"==g||"bottom"==g,_=e.getCtx(),m=t.Agent.isRightToLeft(_),v=n.getSeparatorColor(),y=new t.SolidStroke(v,1,1),S=0,C=f?i.getGapSize(_,p,p.layout.hierarchicalLabelGapHeight):i.getGapSize(_,p,p.layout.hierarchicalLabelGapWidth),b=p.startGroupOffset,E=p.endGroupOffset,T=n.getLastRenderedLevel();T>=0;T--){var A=n.getLabels(e.getCtx(),T),x=t.TextUtils.getMaxTextDimensions(A),I=n.isLabelRotated(T),O=I||!f?x.w:x.h;if(0!=O){var M=!1,D=null;if(T<n.getLastRenderedLevel())for(var P=0;P<A.length;P++){var w=A[P];if(null!=w){var R=n.getLabelIndex(w),L=0==n.getLabelAt(R,T).length;if(!L){var N=L&&0==T&&(0==R||R==A.length-1),k=w&&null==A[R-1],U=w&&null==A[R+1],B=n.getStartIndex(R,T),F=n.getEndIndex(R,T);if(f){if(w){var H;H=w instanceof t.MultilineText||w instanceof t.BackgroundMultilineText?w.getYAlignCoord():w.getY(),s=n.getCoordAt(B-b),l=I?H+.5*S:H-O/2-.5*S-C,u=n.getCoordAt(F+E),h=I?H+O+S+2*C:H,L&&N||0!=M||null==s||a._addSeparatorLine(e,y,s,h,s,l),null==u||N||a._addSeparatorLine(e,y,u,h,u,l)}if(!L){if(w)var j=I?t.TextUtils.getTextHeight(w):t.TextUtils.getTextWidth(w);s=k&&0==D?n.getStartCoord():n.getBoundedCoordAt(B-b),k&&(k=!1);var G=n.getLabelAt(R+1,T);if(u=U&&G&&G.length>0?n.getEndCoord():n.getBoundedCoordAt(F+E),c=w?m?w.getX()+.5*j:w.getX()-.5*j:n.getBoundedCoordAt(F+E),d=w?m?w.getX()-.5*j:w.getX()+.5*j:n.getBoundedCoordAt(B-b),w)if(I)a._addSeparatorLine(e,y,s,h,u,h);else{var V=m?.5*-t.TextUtils.getTextHeight(w):.5*t.TextUtils.getTextHeight(w),Y=m?s>c-V:s<c-V,K=m?d+V>u:d+V<u;Y&&a._addSeparatorLine(e,y,s,h,c-V,h),K&&a._addSeparatorLine(e,y,d+V,h,u,h)}}}else w&&(s=m?w.getX()-O-.5*C:w.getX()+.5*C,l=n.getCoordAt(B-b),u=m?w.getX()+.5*C:w.getX()-O-.5*C,h=n.getCoordAt(F+E),(!L&&0==M||0==R&&L&&0!=T)&&null!=l&&a._addSeparatorLine(e,y,s,l,u,l),null==h||N||a._addSeparatorLine(e,y,u,h,s,h)),L||(l=k&&0==D?0:n.getBoundedCoordAt(B-b),k&&(k=!1),G=n.getLabelAt(R+1,T),h=U&&G&&G.length>0?n.getEndCoord():n.getBoundedCoordAt(F+E),w&&a._addSeparatorLine(e,y,u,l,u,h));M=!L&&null!=w,D=null!=w||null==w&&L}}}S=O}else S=O}}},a._addSeparatorLine=function(e,n,i,r,o,a){var s=new t.Line(e.getCtx(),i,r,o,a);s.setStroke(n),s.setPixelHinting(!0),e.addChild(s)},a._getGroupAxisPreferredSize=function(e,n,r,o,a){for(var s=e.getCtx(),l=e.getOptions(),u=n.getNumLevels(),h=a?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",c=u>1?i.getGapSize(s,l,l.layout[h]):0,d=0;d<u;d++){var p,g=n.getLabels(s,d);if(a){var f=t.TextUtils.getMaxTextDimensions(g);p=n.isLabelRotated(d)?f.w:f.h}else p=t.TextUtils.getMaxTextDimensions(g).w;if(!(r+p<=o)){0==d&&(r=o);break}r+=p+c}return 0!=d&&(r-=c),r},a.getTitleHeight=function(e,n,i,r){var o=0;if(n.title)if(a.isWrapEnabled(n.titleStyle)){var s=new t.MultilineText(e,n.title,0,0);s.setMaxLines(a._MAX_TITLE_LINE_WRAP),s.setCSSStyle(n.titleStyle),s.wrapText(i,r,1),o=s.getDimensions().h}else o=t.TextUtils.getTextStringHeight(e,n.titleStyle);return o},a.isWrapEnabled=function(e){var n=e.getStyle(t.CSSStyle.WHITE_SPACE);return"nowrap"!=n&&"noWrap"!=n},t.AxisInfo=function(){},t.Obj.createSubclass(t.AxisInfo,t.Obj),t.AxisInfo.newInstance=function(e,n,i){return n.timeAxisType&&"disabled"!=n.timeAxisType?new t.TimeAxisInfo(e,n,i):n._isGroupAxis?new t.GroupAxisInfo(e,n,i):new t.DataAxisInfo(e,n,i)},t.AxisInfo.prototype.Init=function(e,n,i){this._context=e,this.Position=n.position,this._radius=n._radius,this._title=null,"top"==this.Position||"bottom"==this.Position?(this.StartCoord=i.x,this.EndCoord=i.x+i.w):"left"==this.Position||"right"==this.Position?(this.StartCoord=i.y,this.EndCoord=i.y+i.h):"radial"==this.Position?(this.StartCoord=0,this.EndCoord=this._radius):"tangential"==this.Position&&(t.Agent.isRightToLeft(e)?(this.StartCoord=2*Math.PI,this.EndCoord=0):(this.StartCoord=0,this.EndCoord=2*Math.PI)),this.MinValue=null,this.MaxValue=null,this.GlobalMin=null,this.GlobalMax=null,this.DataMin=null,this.DataMax=null,this.MinViewportExtent=null,this.StartOverflow=0,this.EndOverflow=0,null==n.leftBuffer&&(n.leftBuffer=1/0),null==n.rightBuffer&&(n.rightBuffer=1/0),this.Options=n},t.AxisInfo.prototype.getCtx=function(){return this._context},t.AxisInfo.prototype.getOptions=function(){return this.Options},t.AxisInfo.prototype.getLabels=function(t,e){return null},t.AxisInfo.prototype.getTitle=function(){return this._title},t.AxisInfo.prototype.setTitle=function(t){this._title=t},t.AxisInfo.prototype.getMajorTickCoords=function(){return[]},t.AxisInfo.prototype.getMinorTickCoords=function(){return[]},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.getValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),n=Math.max(this.StartCoord,this.EndCoord);return t<e||t>n?null:this.getUnboundedValueAt(t);
},t.AxisInfo.prototype.getCoordAt=function(t){return null==t?null:t<this.MinValue||t>this.MaxValue?null:this.getUnboundedCoordAt(t)},t.AxisInfo.prototype.getBoundedValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),n=Math.max(this.StartCoord,this.EndCoord);return t<e?t=e:t>n&&(t=n),this.getUnboundedValueAt(t)},t.AxisInfo.prototype.getBoundedCoordAt=function(t){return null==t?null:(t<this.MinValue?t=this.MinValue:t>=this.MaxValue&&(t=this.MaxValue),this.getUnboundedCoordAt(t))},t.AxisInfo.prototype.getUnboundedValueAt=function(t){return null},t.AxisInfo.prototype.getUnboundedCoordAt=function(t){return null},t.AxisInfo.prototype.getDatatip=function(t,e){return null},t.AxisInfo.prototype.getLabelBackground=function(t,e){return null},t.AxisInfo.prototype.getAction=function(t){return null},t.AxisInfo.prototype.isDrillable=function(t){return null},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.isLabelRotated=function(){return!1},t.AxisInfo.prototype.CreateLabel=function(e,n,i,r,o){var a;if("tangential"==this.Position){var s=16/180*Math.PI,l=1/180*Math.PI,u=.5*this.getTickLabelHeight(),h=this._radius+u;(i<l||i>2*Math.PI-l)&&(h+=u);var c=Math.round(h*Math.sin(i)),d=Math.round(-h*Math.cos(i));a=r?new t.BackgroundOutputText(e,n,c,d,r):new t.OutputText(e,n,c,d),i<l||Math.abs(i-Math.PI)<l||i>2*Math.PI-l?a.alignCenter():i<Math.PI?a.alignLeft():a.alignRight(),Math.abs(i-Math.PI/2)<s||Math.abs(i-3*Math.PI/2)<s?a.alignMiddle():i<Math.PI/2||i>3*Math.PI/2?a.alignBottom():a.alignTop()}else o?a=r?new t.BackgroundMultilineText(e,n,i,i,r):new t.MultilineText(e,n,i,i):(a=r?new t.BackgroundOutputText(e,n,i,i,r):new t.OutputText(e,n,i,i),a.alignMiddle()),a.alignCenter();return(a instanceof t.OutputText||a instanceof t.MultilineText)&&a.setCSSStyle(this.Options.tickLabel.style),a},t.AxisInfo.prototype.IsOverlapping=function(e,n){if(!e||e.length<=0)return!1;for(var i,r,o,a,s="left"==this.Position||"right"==this.Position||"radial"==this.Position,l=t.Agent.isRightToLeft(this.getCtx()),u=this.GetTickLabelGapSize(),h=0;h<e.length;h+=n+1)if(null!=e[h])if(null!=i&&null!=r){if(s){if(o=e[h].y,a=e[h].y+e[h].h,o>=i&&o-u<r)return!0;if(o<i&&a+u>i)return!0}else{if(o=e[h].x,a=e[h].x+e[h].w,!l&&o-u<r)return!0;if(l&&a+u>i)return!0}i=o,r=a}else s?(i=e[h].y,r=e[h].y+e[h].h):(i=e[h].x,r=e[h].x+e[h].w);return!1},t.AxisInfo.prototype.IsOverlappingDims=function(t,e){if(!t||!e)return!1;var n=t.y,i=t.y+t.h,r=t.x,o=t.x+t.w,a=e.y,s=e.y+e.h,l=e.x,u=e.x+e.w,h=r<=l&&l<=o||r<=u&&u<=o||l<=r&&r<=u||l<=o&&o<=u,c=a>=n&&a<i||a<=n&&s>=n;return h&&c},t.AxisInfo.prototype.GetTickLabelGapSize=function(){var e=this.getTickLabelHeight(),n=this instanceof t.GroupAxisInfo?.24*e:.79*e,i=this instanceof t.GroupAxisInfo?.08*e:.28*e,r="left"==this.Position||"right"==this.Position||"radial"==this.Position;return r||this.isLabelRotated()?i:n},t.AxisInfo.prototype.getTickLabelHeight=function(){return t.TextUtils.getTextStringHeight(this.getCtx(),this.Options.tickLabel.style)},t.AxisInfo.prototype.SkipLabels=function(t,e){for(var n=0,i=this.IsOverlapping(e,n);i;)n++,i=this.IsOverlapping(e,n);if(n>0){for(var r=[],o=0;o<t.length;o+=n+1)r.push(t[o]);return r}return t},t.AxisInfo.prototype.SkipTangentialLabels=function(t,e){var n=[],i=t.length,r=null;if(i>1){for(var o,a=0;a<i;a++)e[a]&&(!o||o&&!this.IsOverlappingDims(o,e[a]))&&(r||(r=e[a]),n.push(t[a]),o=e[a]);return this.IsOverlappingDims(o,r)&&n.pop(),n}return t},t.AxisInfo.prototype.GetLabelDims=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];if(null==r)n.push(null);else{var o=r.measureDimensions(e);o.w&&o.h?n.push(o):n.push(null)}}return n},t.AxisInfo.prototype.GuessLabelDims=function(e,n,i,r){var o=[];"undefined"==typeof i&&(i=1);for(var a=0;a<e.length;a++){var s=e[a];if(null==s)o.push(null);else{n.addChild(s);var l=t.TextUtils.guessTextDimensions(s),u=l.w*i,h=l.h;n.removeChild(s);var c;c=this.isLabelRotated(r)?new t.Rectangle(s.getTranslateX()-h/2,s.getTranslateY()-u/2,h,u):new t.Rectangle(s.getX()-u/2,s.getY()-h/2,u,h),o.push(c)}}return o},t.AxisInfo.prototype.getMajorTickCount=function(){return null},t.AxisInfo.prototype.getMinorTickCount=function(){return null},t.AxisInfo.prototype.getMajorIncrement=function(){return null},t.AxisInfo.prototype.getMinorIncrement=function(){return null},t.AxisInfo.prototype.getGlobalMin=function(){return this.GlobalMin},t.AxisInfo.prototype.getGlobalMax=function(){return this.GlobalMax},t.AxisInfo.prototype.getViewportMin=function(){return this.MinValue},t.AxisInfo.prototype.getViewportMax=function(){return this.MaxValue},t.AxisInfo.prototype.getDataMin=function(){return this.DataMin},t.AxisInfo.prototype.getDataMax=function(){return this.DataMax},t.AxisInfo.prototype.getMinimumExtent=function(){return 0},t.AxisInfo.prototype.getStartCoord=function(){return this.StartCoord},t.AxisInfo.prototype.getEndCoord=function(){return this.EndCoord},t.AxisInfo.prototype.getStartOverflow=function(){return this.StartOverflow},t.AxisInfo.prototype.getEndOverflow=function(){return this.EndOverflow},t.AxisInfo.prototype.getGroupWidth=function(){return 0},t.AxisInfo.prototype.getGroup=function(t,e){return null},t.AxisInfo.prototype.linearToActual=function(t){return t},t.AxisInfo.prototype.actualToLinear=function(t){return t},t.DataAxisInfo=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.DataAxisInfo,t.AxisInfo),t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO=10,t.DataAxisInfo._MINOR_TICK_COUNT=2,t.DataAxisInfo._MAX_ZOOM_FACTOR=64,t.DataAxisInfo.prototype.Init=function(e,n,i){t.DataAxisInfo.superclass.Init.call(this,e,n,i),"top"==this.Position||"bottom"==this.Position?("off"!=n.tickLabel.rendered&&"off"!=n.rendered&&(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-n.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-n.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._minCoord=this.EndCoord-this.EndOverflow,this._maxCoord=this.StartCoord+this.StartOverflow):(this._minCoord=this.StartCoord+this.StartOverflow,this._maxCoord=this.EndCoord-this.EndOverflow)):"tangential"==this.Position||"radial"==this.Position?(this._minCoord=this.StartCoord,this._maxCoord=this.EndCoord):(this._minCoord=this.EndCoord,this._maxCoord=this.StartCoord),this.DataMin=n.dataMin,this.DataMax=n.dataMax,this._isLog="log"==n.scale&&this.DataMin>0&&this.DataMax>0,this._globalMin=this.actualToLinear(n.min),this._globalMax=this.actualToLinear(n.max),this._minValue=null==n.viewportMin?this._globalMin:this.actualToLinear(n.viewportMin),this._maxValue=null==n.viewportMax?this._globalMax:this.actualToLinear(n.viewportMax),this._dataMin=this.actualToLinear(this.DataMin),this._dataMax=this.actualToLinear(this.DataMax),this._majorIncrement=this.actualToLinear(n.step),this._minorIncrement=this.actualToLinear(n.minorStep),this._minMajorIncrement=this.actualToLinear(n.minStep),this._majorTickCount=n._majorTickCount,this._minorTickCount=n._minorTickCount,this._zeroBaseline=!this._isLog&&"zero"==n.baselineScaling,this._converter=null,null!=n.tickLabel&&(this._converter=n.tickLabel.converter),this._calcAxisExtents(),this.GlobalMin=this.linearToActual(this._globalMin),this.GlobalMax=this.linearToActual(this._globalMax),this.MinValue=this.linearToActual(this._minValue),this.MaxValue=this.linearToActual(this._maxValue)},t.DataAxisInfo.prototype.getMinLabel=function(){return this._zeroBaseline||"on"==this.Options._continuousExtent&&null==this.Options.min?Math.ceil(this._minValue/this._majorIncrement)*this._majorIncrement:Math.ceil((this._minValue-this._globalMin)/this._majorIncrement)*this._majorIncrement+this._globalMin},t.DataAxisInfo.prototype.getLabels=function(e,n){if(n&&n>0)return null;var i=[],r=[],o=e.getStage();if(this.Options.tickLabel&&this.Options.tickLabel.scaling){var a=this.Options.tickLabel.autoPrecision?this.Options.tickLabel.autoPrecision:"on";this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,this._minValue,this._maxValue,this._majorIncrement,this.Options.tickLabel.scaling,a)}for(var s=0;s<=this._majorTickCount;s++){var l=s*this._majorIncrement+this.getMinLabel();if(l>this._maxValue)break;var u=this._getUnboundedCoordAt(l);if(this.Options._skipHighestTick){if(l==this._maxValue)continue;if("tangential"!=this.Position&&Math.abs(u-this._maxCoord)<this.getTickLabelHeight())continue}var h;this._isLog?(l=this.linearToActual(l),this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,l,l,l,this.Options.tickLabel.scaling,a),h=this._formatValue(l)):h=this._formatValue(l);var c=this.CreateLabel(e,h,u);i.push(c)}return"tangential"!=this.Position&&(r=this.GetLabelDims(i,o),i=this.SkipLabels(i,r)),i},t.DataAxisInfo.prototype.getMajorTickCoords=function(){for(var t=[],e=0;e<=this._majorTickCount;e++){var n=e*this._majorIncrement+this.getMinLabel();if(n>this._maxValue)break;if(!this.Options._skipHighestTick||n!=this._maxValue){var i=this._getUnboundedCoordAt(n);t.push(i)}}return t},t.DataAxisInfo.prototype.getMinorTickCoords=function(){for(var e=[],n=-1;n<=this._majorTickCount;n++){var i=n*this._majorIncrement+this.getMinLabel();if(this._isLog&&1==this._majorIncrement&&1==this._minorIncrement)for(var r=2;r<=9;r++){var o=i+t.Math.log10(r);if(o>this._maxValue)break;o<this._minValue||(s=this._getUnboundedCoordAt(o),e.push(s))}else for(var r=1;r<this._minorTickCount;r++){var a=i+r*this._minorIncrement;if(a>this._maxValue)break;if(!(a<this._minValue)){var s=this._getUnboundedCoordAt(a);e.push(s)}}}return e},t.DataAxisInfo.prototype.getBaselineCoord=function(){return this._isLog?this._minCoord:this.getBoundedCoordAt(0)},t.DataAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._minCoord)/(this._maxCoord-this._minCoord),n=this._minValue+e*(this._maxValue-this._minValue);return this.linearToActual(n)},t.DataAxisInfo.prototype.getUnboundedCoordAt=function(t){return this._getUnboundedCoordAt(this.actualToLinear(t))},t.DataAxisInfo.prototype._getUnboundedCoordAt=function(t){if(null==t)return null;var e=(t-this._minValue)/(this._maxValue-this._minValue);return this._minCoord+e*(this._maxCoord-this._minCoord)},t.DataAxisInfo.prototype._formatValue=function(e){if(!this._converter||!this._converter.getAsString&&!this._converter.format){if(this._axisValueFormatter)return this._axisValueFormatter.format(e);var n=t.Math.log10(this._majorIncrement),i=Math.max(Math.ceil(-n),0);return e.toFixed(i)}return this._axisValueFormatter?this._axisValueFormatter.format(e,this._converter):this._converter.getAsString?this._converter.getAsString(e):this._converter.format?this._converter.format(e):void 0},t.DataAxisInfo.prototype._calcMajorMinorIncr=function(e){this._majorIncrement||(this._majorTickCount?this._majorIncrement=(this._maxValue-this._minValue)/this._majorTickCount:this._majorIncrement=Math.max(e,this._minMajorIncrement)),this._majorTickCount||(this._majorTickCount=(this._maxValue-this._minValue)/this._majorIncrement),this._minorTickCount||(this._minorIncrement?this._minorTickCount=this._majorIncrement/this._minorIncrement:this._isLog?this._minorTickCount=this._majorIncrement:this._minorTickCount=t.DataAxisInfo._MINOR_TICK_COUNT),this._minorIncrement||(this._minorIncrement=this._majorIncrement/this._minorTickCount)},t.DataAxisInfo.prototype._calcAxisExtents=function(){var e="on"==this.Options._continuousExtent;this._zeroBaseline&&(this._dataMin=Math.min(0,this._dataMin),this._dataMax=Math.max(0,this._dataMax));var n=this._calcAxisScale(null!=this._globalMin?this._globalMin:this._dataMin,null!=this._globalMax?this._globalMax:this._dataMax);if(this._dataMin==this._dataMax&&(0==this._dataMin?this._dataMax+=5*n:(this._dataMin-=2*n,this._dataMax+=2*n)),null==this._globalMin){if(this._zeroBaseline&&this._dataMin>=0)this._globalMin=0;else if(e)this._globalMin=this._dataMin-.1*(this._dataMax-this._dataMin);else if(this._zeroBaseline||null==this._globalMax)this._globalMin=(Math.ceil(this._dataMin/n)-1)*n;else for(this._globalMin=this._globalMax;this._globalMin>=this._dataMin;)this._globalMin-=n;this._dataMin>=0&&(this._globalMin=Math.max(this._globalMin,0))}if(null==this._globalMax){if(this._majorTickCount)this._globalMax=this._globalMin+this._majorTickCount*n;else if(this._zeroBaseline&&this._dataMax<=0)this._globalMax=0;else if(e)this._globalMax=this._dataMax+.1*(this._dataMax-this._dataMin);else if(this._zeroBaseline)this._globalMax=(Math.floor(this._dataMax/n)+1)*n;else for(this._globalMax=this._globalMin;this._globalMax<=this._dataMax;)this._globalMax+=n;this._dataMax<=0&&(this._globalMax=Math.min(this._globalMax,0))}this._globalMax==this._globalMin&&(this._globalMax=100,this._globalMin=0,n=(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO),null==this._minValue&&(this._minValue=this._globalMin),null==this._maxValue&&(this._maxValue=this._globalMax),this._minValue==this._globalMin&&this._maxValue==this._globalMax||(n=this._calcAxisScale(this._minValue,this._maxValue)),this._globalMin>this._minValue&&(this._globalMin=this._minValue),this._globalMax<this._maxValue&&(this._globalMax=this._maxValue),this._calcMajorMinorIncr(n)},t.DataAxisInfo.prototype._calcAxisScale=function(e,n){if(this._majorIncrement)return this._majorIncrement;var i=n-e;if(this._isLog)return Math.floor(i/8)+1;if(0==i)return 0==e?10:Math.pow(10,Math.floor(t.Math.log10(e))-1);if(this._majorTickCount){var r=i/this._majorTickCount,o=Math.pow(10,Math.ceil(t.Math.log10(r)-1)),a=r/o;return a=a>1&&a<=1.5?1.5:a>5?10:Math.ceil(a),a*o}var s=t.Math.log10(i),o=Math.pow(10,Math.ceil(s)-2),l=Math.round(i/o),u=1;return u=l>=10&&l<=14?2:l>=15&&l<=19?3:l>=20&&l<=24?4:l>=25&&l<=45?5:l>=46&&l<=80?10:20,u*o},t.DataAxisInfo.prototype.getMajorTickCount=function(){return this._majorTickCount},t.DataAxisInfo.prototype.getMinorTickCount=function(){return this._minorTickCount},t.DataAxisInfo.prototype.getMajorIncrement=function(){return this.linearToActual(this._majorIncrement)},t.DataAxisInfo.prototype.getMinorIncrement=function(){return this.linearToActual(this._minorIncrement)},t.DataAxisInfo.prototype.getMinimumExtent=function(){return(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_ZOOM_FACTOR},t.DataAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.DataAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow},t.DataAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._isLog?Math.pow(10,t):t},t.DataAxisInfo.prototype.actualToLinear=function(e){return null==e?null:this._isLog?e>0?t.Math.log10(e):null:e},t.GroupAxisInfo=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.GroupAxisInfo,t.AxisInfo),t.GroupAxisInfo._MAX_LINE_WRAP=3,t.GroupAxisInfo._ROTATE_THRESHOLD=12,t.GroupAxisInfo.prototype.Init=function(e,n,r){t.GroupAxisInfo.superclass.Init.call(this,e,n,r);var o=t.Agent.isRightToLeft(e),s="top"==this.Position||"bottom"==this.Position;if(s&&o){var l=this.StartCoord;this.StartCoord=this.EndCoord,this.EndCoord=l}this._levelsArray=[],this._groupCount=this._generateLevelsArray(n.groups,0,this._levelsArray,0),this._numLevels=this._levelsArray.length,this._areSeparatorsRendered="on"==n.groupSeparators.rendered,this._separatorColor=n.groupSeparators.color,this._lastRenderedLevel=null,this._drilling=n.drilling;var u=n.endGroupOffset>0?Number(n.endGroupOffset):0,h=n.startGroupOffset>0?Number(n.startGroupOffset):0;this.DataMin=0,this.DataMax=this._groupCount-1,this.GlobalMin=null==n.min?this.DataMin-h:n.min,this.GlobalMax=null==n.max?this.DataMax+u:n.max;var c=this.getGroupIndex(n.viewportStartGroup),d=this.getGroupIndex(n.viewportEndGroup);c!=-1&&(this.MinValue=c-h),d!=-1&&(this.MaxValue=d+u),null!=n.viewportMin&&(this.MinValue=n.viewportMin),null!=n.viewportMax&&(this.MaxValue=n.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._groupWidthRatios=n._groupWidthRatios,this._processGroupWidthRatios(),this._startBuffer=o?n.rightBuffer:n.leftBuffer,this._endBuffer=o?n.leftBuffer:n.rightBuffer,this._isLabelRotated=[];for(var p=0;p<this._numLevels;p++)this._isLabelRotated.push(!1);if(this._renderGridAtLabels=n._renderGridAtLabels,this._labels=null,this._maxSpace=s?r.h:r.w,"off"!=n.rendered){var g=a.getTitleHeight(e,n,s?r.w:r.h,s?r.h:r.w);this._maxSpace-=0!=g?g+i.getGapSize(e,n,n.layout.titleGap):0}this._maxLineWrap=t.GroupAxisInfo._MAX_LINE_WRAP},t.GroupAxisInfo.prototype._processGroupWidthRatios=function(){if(!this._groupWidthRatios||this._groupWidthRatios.length<2)return void(this._groupWidthRatios=null);for(var e,n,i=0,r=0;r<this._groupCount;r++)e=0==r?this.MinValue:Math.max(r-.5,this.MinValue),n=r==this._groupCount-1?this.MaxValue:Math.min(r+.5,this.MaxValue),n>e&&(i+=(n-e)*this._groupWidthRatios[r]);var o=this.EndCoord-this.StartCoord;this._groupWidths=t.ArrayUtils.map(this._groupWidthRatios,function(t){return t*o/i}),this._borderValues=[];for(var r=0;r<this._groupWidthRatios.length-1;r++)this._borderValues.push(r+.5);this._borderCoords=[];var a=Math.min(Math.max(Math.round(this.MinValue),0),this._borderValues.length-1);this._borderCoords[a]=this.StartCoord+(this._borderValues[a]-this.MinValue)*this._groupWidths[a];for(var r=a+1;r<this._borderValues.length;r++)this._borderCoords[r]=this._borderCoords[r-1]+this._groupWidths[r];for(var r=a-1;r>=0;r--)this._borderCoords[r]=this._borderCoords[r+1]-this._groupWidths[r+1]},t.GroupAxisInfo.prototype._rotateLabels=function(e,n,i,r){var o,s,l=this.getCtx(),u=t.Agent.isRightToLeft(l),h=this._numLevels>1;null==r&&(r=this._numLevels-1),this._isLabelRotated[r]=!0,h||this._setOverflow(i,i,e);for(var c=0;c<e.length;c++)if(o=e[c],null!=o){s=o.getX();var d=o instanceof t.MultilineText||o instanceof t.BackgroundMultilineText;if(d){var p=this.getGroupWidth()*(this.getEndIndex(c,r)-this.getStartIndex(c,r)+1);2*o.getLineHeight()<p&&this._maxSpace>0?o.wrapText(this._maxSpace,o.getLineHeight()*t.GroupAxisInfo._MAX_LINE_WRAP,1):o.setWrapEnabled(!1)}o.setX(0),o.setY(0),u?o.setRotation(Math.PI/2):o.setRotation(3*Math.PI/2),o.setTranslateX(s)}var g=this.GuessLabelDims(e,n,null,r);if(a.isWrapEnabled(this.Options.tickLabel.style)&&this._maxSpace>0){var f=this._sanitizeWrappedText(l,g,e,!0,h);f&&(g=this.GuessLabelDims(e,n,null,r))}return this.SkipLabels(e,g)},t.GroupAxisInfo.prototype._sanitizeWrappedText=function(e,n,r,o,a){for(var s=this._calculateMaxWrap(n,r,o),l=0,u=0;u<r.length;u++){var h=r[u];if(h){var c=h instanceof t.MultilineText||h instanceof t.BackgroundMultilineText;s&&c&&h.isWrapEnabled()&&h.wrapText(this._maxSpace,h.getLineHeight()*this._maxLineWrap,1),a&&(l=Math.max(l,t.TextUtils.getTextWidth(h))),h.alignMiddle()}}if(a){var d=o?this.Options.layout.hierarchicalLabelGapHeight:this.Options.layout.hierarchicalLabelGapWidth;this._maxSpace-=l+i.getGapSize(e,this.Options,d)}return s},t.GroupAxisInfo.prototype._calculateMaxWrap=function(e,n,i){for(var r=!1;this.IsOverlapping(e,0)&&this._maxLineWrap>1;){r=!0;for(var o=0;o<n.length;o++){var a=n[o];if((a instanceof t.MultilineText||a instanceof t.BackgroundMultilineText)&&a.getLineCount()==this._maxLineWrap){var s=a.getLineHeight();i?e[o].w-=s:(e[o].y+=.5*s,e[o].h-=s)}}this._maxLineWrap--}return r},t.GroupAxisInfo.prototype.isLabelRotated=function(t){return null==t&&(t=this._numLevels-1),this._isLabelRotated[t]},t.GroupAxisInfo.prototype._setOverflow=function(e,n,i){e=Math.max(e-this._startBuffer,0),n=Math.max(n-this._endBuffer,0);var r=t.Agent.isRightToLeft(this.getCtx());this.StartCoord+=(e-this.StartOverflow)*(r?-1:1),this.EndCoord-=(n-this.EndOverflow)*(r?-1:1),this._processGroupWidthRatios();for(var o=0;o<this._numLevels;o++){i=this._labels[o];for(var a=0;a<i.length;a++){var s=i[a];if(s){var l=this._getLabelCoord(o,this.getLabelIndex(s));s.setX(l)}}}this.StartOverflow=e,this.EndOverflow=n},t.GroupAxisInfo.prototype.getLabels=function(t,e){return null==e&&(e=this._numLevels-1),this._labels||this._generateLabels(t),this._labels[e]},t.GroupAxisInfo.prototype._getLabelCoord=function(t,e){var n=this.getStartIndex(e,t),i=this.getEndIndex(e,t);if(null==n||null==i)return null;n<this.MinValue&&i>this.MinValue&&(n=this.MinValue),i>this.MaxValue&&n<this.MaxValue&&(i=this.MaxValue);var r=i?n+(i-n)/2:n;return this.getCoordAt(r)},t.GroupAxisInfo.prototype._generateLabels=function(e){var n=[];this._labels=[];for(var r,o,s,l,u,h=e.getStage(),c="top"==this.Position||"bottom"==this.Position,d=t.Agent.isRightToLeft(e),p=this._numLevels>1,g=this.getGroupWidth(),f=this._maxSpace,_=c?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",m=p?i.getGapSize(e,this.Options,this.Options.layout[_]):0,v="auto"==this.Options.tickLabel.rotation&&c,y=!p&&v&&g<t.GroupAxisInfo._ROTATE_THRESHOLD,S=this.Options.tickLabel.style,C=a.isWrapEnabled(this.Options.tickLabel.style)&&"tangential"!=this.Position&&g>t.TextUtils.getTextStringHeight(e,S),b=0;b<this._numLevels;b++){for(var E=this._levelsArray[b],T=y?Math.max(1,Math.floor(t.GroupAxisInfo._ROTATE_THRESHOLD/(2*Math.max(1,g)))):1,A=0;A<E.length;A+=T)if(E[A]){if(r=this.getLabelAt(A,b),""==r||!r&&0!=r){n.push(null);continue}var x=this._getLabelCoord(b,A);if(null!=x){l=this.getLabelStyleAt(A,b);var I=!y&&C&&"number"!=typeof r&&r.indexOf(" ")>=0;u=this.CreateLabel(e,r,x,l,I);var O=g*(this.getEndIndex(A,b)-this.getStartIndex(A,b)+1),M=I&&this._isTextWrapNeeded(e,r,l,v,c?O:f);M&&f>0?c?u.wrapText(O,f,1,!0):u.wrapText(f,u.getLineHeight()*this._maxLineWrap,1,!1):I&&(!c||f<0)&&u.setWrapEnabled(!1),u._index=A,n.push(u),o||0!=b||(o=u),0==b&&(s=u)}else n.push(null)}else n.push(null);if(C&&p){for(var D=0,P=0;P<n.length;P++)if(n[P]){var w=n[P].measureDimensions();D=Math.max(D,c?w.h:w.w)}f-=D+m}this._labels.push(n),n=[]}n=this._labels[this._numLevels-1];var R=[];if(o){if("tangential"==this.Position)return R=this.GetLabelDims(n,h),void(this._labels[0]=this.SkipTangentialLabels(n,R));var L=o.measureDimensions();if(c){var N,k;if(null!=this.Options._startOverflow&&null!=this.Options._endOverflow)N=this.Options._startOverflow,k=this.Options._endOverflow;else{var U=s.measureDimensions();N=d?L.w+L.x-this.StartCoord:this.StartCoord-L.x,k=d?this.EndCoord-U.x:U.w+U.x-this.EndCoord}!y&&(N>this._startBuffer||k>this._endBuffer)&&this._setOverflow(N,k,n)}for(b=0;b<this._numLevels;b++)if(n=this._labels[b],y)this._labels[b]=this._rotateLabels(n,h,L.h/2,b);else{var B=this.GuessLabelDims(n,h,.3,b),F=this.GuessLabelDims(n,h,null,b);if(this.IsOverlapping(F,0)||(this._labels[b]=n),c)if(v){if(this.IsOverlapping(B,0))this._labels[b]=this._rotateLabels(n,h,L.h/2,b);else if(R=this.GetLabelDims(n,h),this.IsOverlapping(R,0))this._labels[b]=this._rotateLabels(n,h,L.h/2,b);else if(this._labels[b]=n,p){var H=0;for(P=0;P<R.length;P++)R[P]&&(H=Math.max(H,R[P].h));this._maxSpace-=H+m}}else R=this.GetLabelDims(n,h),this._labels[b]=this.SkipLabels(n,R);else{if(C){var j=this._sanitizeWrappedText(e,F,n,!1,p);j&&(F=this.GuessLabelDims(n,h,null,b))}this._labels[b]=this.SkipLabels(n,F)}}}},t.GroupAxisInfo.prototype.getMajorTickCoords=function(){for(var t,e=[],n="tangential"==this.Position?this.getGroupCount():this.getGroupCount()-1,i=0;i<this._levelsArray[0].length;i++)if(this._levelsArray[0][i]){var r=this.getStartIndex(i,0),o=this.getEndIndex(i,0);t=this._renderGridAtLabels?this.getCoordAt(r+.5*(o-r)):o+.5<n?this.getCoordAt(o+.5):null,null!=t&&e.push(t)}return e},t.GroupAxisInfo.prototype.getMinorTickCoords=function(){var t,e=[];if(!this._levelsArray[1])return e;for(var n=0;n<this._levelsArray[1].length;n++)if(this._levelsArray[1][n]){var i=this.getStartIndex(n,1),r=this.getEndIndex(n,1);t=this._renderGridAtLabels?this.getCoordAt(i+.5*(r-i)):r+.5<this.getGroupCount()-1?this.getCoordAt(r+.5):null,null!=t&&e.push(t)}return e},t.GroupAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderCoords.length,n=0;n<this._borderCoords.length;n++)if(t<=this._borderCoords[n]){e=n;break}return 0==e?this._borderValues[0]-(this._borderCoords[0]-t)/this._groupWidths[0]:this._borderValues[e-1]+(t-this._borderCoords[e-1])/this._groupWidths[e]}var i=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.MinValue+(t-this.StartCoord)/i},t.GroupAxisInfo.prototype.getUnboundedCoordAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderValues.length,n=0;n<this._borderValues.length;n++)if(t<=this._borderValues[n]){e=n;break}return 0==e?this._borderCoords[0]-this._groupWidths[0]*(this._borderValues[0]-t):this._borderCoords[e-1]+this._groupWidths[e]*(t-this._borderValues[e-1])}var i=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.StartCoord+(t-this.MinValue)*i},t.GroupAxisInfo.prototype.getLabelAt=function(t,e){if(null==e&&(e=this._numLevels-1),t=Math.round(t),t<0)return null;var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return n&&(n.name?n=n.name:null!=n.id&&(n="")),n},t.GroupAxisInfo.prototype.getGroupAt=function(t,e){if(null==e&&(e=this._numLevels-1),t=Math.round(t),t<0)return null;var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;if(n){if(n.id)return n.id;if(n.name||""==n.name)return n.name}return n},t.GroupAxisInfo.prototype.getLabelStyleAt=function(e,n){var i=this._getGroupAttribute(e,n,"labelStyle");if(i){var r=new t.CSSStyle(i);return r.getStyle("font-size")||r.setStyle("font-size",this.Options.tickLabel.style.getStyle("font-size")),r}return null},t.GroupAxisInfo.prototype.getDatatip=function(t,e){return this._getGroupAttribute(t,e,"shortDesc")},t.GroupAxisInfo.prototype.getAction=function(t,e){return this._getGroupAttribute(t,e,"action")},t.GroupAxisInfo.prototype.isDrillable=function(t,e){var n=this._getGroupAttribute(t,e,"drilling");return"on"==n||"off"!=n&&("on"==this._drilling||"groupsOnly"==this._drilling)},t.GroupAxisInfo.prototype.getGroup=function(t,e){if(t<0||t>this.getGroupCount()-1)return null;var n=[];null==e&&(e=this._numLevels-1);for(var i=this.getStartIndex(t,e),r=0;r<=e;r++)for(var o=this._levelsArray[r],a=0;a<o.length;a++)this.getStartIndex(a,r)<=i&&this.getEndIndex(a,r)>=i&&n.push(this.getGroupAt(a,r));return n.length>0?1==n.length?n[0]:n:null},t.GroupAxisInfo.prototype.getLabelBackground=function(e,n,i){null==i&&(i=this._numLevels-1);var r=e.getCSSStyle();if(r){var o=r.getStyle(t.CSSStyle.BACKGROUND_COLOR),a=r.getStyle(t.CSSStyle.BORDER_COLOR),s=r.getStyle(t.CSSStyle.BORDER_WIDTH),l=r.getStyle(t.CSSStyle.BORDER_RADIUS);if(null!=o||null!=a||null!=s||null!=l){var u=e.getDimensions(),h=.15*u.h;(t.Agent.isBrowserChrome()||t.Agent.isPlatformIE())&&e.getVertAlignment()===t.OutputText.V_ALIGN_BOTTOM&&(u.y+=u.h/2);var c=new t.Rect(n,u.x-h,u.y,u.w+2*h,u.h),d=new t.CSSStyle;return null!=o?d.setStyle(t.CSSStyle.BACKGROUND_COLOR,o):c.setInvisibleFill(),d.setStyle(t.CSSStyle.BORDER_COLOR,a),d.setStyle(t.CSSStyle.BORDER_WIDTH,s),d.setStyle(t.CSSStyle.BORDER_RADIUS,l),c.setCSSStyle(d),this._isLabelRotated[i]&&c.setMatrix(e.getMatrix()),c.setMouseEnabled(!1),c}return null}return null},t.GroupAxisInfo.prototype.getGroupIndex=function(e){if(null==e)return-1;for(var n=-1,i=0;i<this._groupCount;i++){var r=this.getGroup(i),o=e instanceof Array&&r instanceof Array?t.ArrayUtils.equals(e,r):e==r;if(o){n=i;break}}return n},t.GroupAxisInfo.prototype.getMinimumExtent=function(){return 1},t.GroupAxisInfo.prototype.getGroupWidth=function(){return Math.abs(this.EndCoord-this.StartCoord)/Math.abs(this.MaxValue-this.MinValue)},t.GroupAxisInfo.prototype.getGroupCount=function(){return this._groupCount},t.GroupAxisInfo.prototype.getNumLevels=function(){return this._numLevels},t.GroupAxisInfo.prototype._generateLevelsArray=function(t,e,n,i){for(var r=0;r<t.length;r++)if(n[e]||(n[e]=[]),n[e].push({item:t[r],start:i,end:i,position:r}),t[r]&&t[r].groups){var o=n[e].length-1,a=this._generateLevelsArray(t[r].groups,e+1,n,n[e][o].start);n[e][o].end=a-1,i=a}else i++;return i},t.GroupAxisInfo.prototype._getGroupAttribute=function(t,e,n){null==e&&(e=this._numLevels-1);var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return i?i[n]:null},t.GroupAxisInfo.prototype.areSeparatorsRendered=function(){return this._areSeparatorsRendered},t.GroupAxisInfo.prototype.getSeparatorColor=function(){return this._separatorColor},t.GroupAxisInfo.prototype.getStartIndex=function(t,e){null==e&&(e=this._numLevels-1);var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].start:null;return n},t.GroupAxisInfo.prototype.getEndIndex=function(t,e){null==e&&(e=this._numLevels-1);var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].end:null;return n},t.GroupAxisInfo.prototype.getPosition=function(t,e){null==e&&(e=this._numLevels-1);var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].position:null;return n},t.GroupAxisInfo.prototype.isRenderGridAtLabels=function(){return this._renderGridAtLabels},t.GroupAxisInfo.prototype.setLastRenderedLevel=function(t){this._lastRenderedLevel=t},t.GroupAxisInfo.prototype.getLastRenderedLevel=function(){return this._lastRenderedLevel},t.GroupAxisInfo.prototype.getLabelIndex=function(t){return t._index>=0?t._index:null},t.GroupAxisInfo.prototype.getMaxLineWrap=function(){return this._maxLineWrap},t.GroupAxisInfo.prototype._isTextWrapNeeded=function(e,n,i,r,o){var a=t.TextUtils.getTextStringWidth(e,n,i);return a>=o&&(a/this._maxLineWrap<o||!r)};var s=function(t,e,n,i,r,o,a,s){this.Init(t,e,n,i,r,o,a,s)};t.Obj.createSubclass(s,t.SimpleObjPeer),s.prototype.Init=function(e,n,i,r,o,a,l,u){s.superclass.Init.call(this,a,l,null,u),this._axis=e,this._label=n,this._group=i,this._action=r,this._drillable=o,(this._action||this._drillable)&&n.setCursor(t.SelectionEffectUtils.getSelectingCursor()),e.__registerObject(this)},s.prototype.getLabel=function(){return this._label},s.prototype.getId=function(){return this._group},s.prototype.getAction=function(){return this._action},s.prototype.isDrillable=function(){return this._drillable},s.prototype.getGroup=function(){return this._group},s.prototype.getNextNavigable=function(e){if(e.type==t.MouseEvent.CLICK)return this;var n=this._axis.__getKeyboardObjects();return t.KeyboardHandler.getNextNavigable(this,e,n)},s.prototype.getKeyboardBoundingBox=function(e){return this._label?this._label.getDimensions(e):new t.Rectangle(0,0,0,0)},s.prototype.getDisplayable=function(){return this._label},s.prototype.getTargetElem=function(){return this._label?this._label.getElem():null},s.prototype.showKeyboardFocusEffect=function(){if(this._isShowingKeyboardFocusEffect=!0,this._label){var e=this.getKeyboardBoundingBox();this._overlayRect=new t.Rect(this._axis.getCtx(),e.x,e.y,e.w,e.h),this._overlayRect.setSolidStroke(t.Agent.getFocusColor()),this._overlayRect.setInvisibleFill(),this._axis.addChild(this._overlayRect)}},s.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this._label&&(this._axis.removeChild(this._overlayRect),this._overlayRect=null)},s.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},s.prototype.getAriaLabel=function(){var e;return this.isDrillable()&&(e=[t.Bundle.getTranslation(this._axis.getOptions(),"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")]),null!=this.getDatatip()?t.Displayable.generateAriaLabel(this.getDatatip(),e):null!=e?t.Displayable.generateAriaLabel(this.getLabel().getTextString(),e):void 0},s.prototype.isDragAvailable=function(t){return!0},s.prototype.getDragTransferable=function(t,e){return[this.getId()]},s.prototype.getDragFeedback=function(t,e){return[this.getDisplayable()]},t.LinearScaleAxisValueFormatter=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)},t.Obj.createSubclass(t.LinearScaleAxisValueFormatter,t.Obj),t.LinearScaleAxisValueFormatter.SCALE_NONE="none",
t.LinearScaleAxisValueFormatter.SCALE_AUTO="auto",t.LinearScaleAxisValueFormatter.SCALE_THOUSAND="thousand",t.LinearScaleAxisValueFormatter.SCALE_MILLION="million",t.LinearScaleAxisValueFormatter.SCALE_BILLION="billion",t.LinearScaleAxisValueFormatter.SCALE_TRILLION="trillion",t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION="quadrillion",t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE=3,t.LinearScaleAxisValueFormatter.prototype.Init=function(t,e,n,i,r,o){this._context=t,this._scales={},this._scalesOrder=[],this._factorToScaleMapping={},this.InitScales(),this.InitFormatter(e,n,i,r,o)},t.LinearScaleAxisValueFormatter.prototype.InitScales=function(){var e=function(e,n,i){var r;i&&(r=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,i));var o={scaleFactor:n,localizedSuffix:r};this._scales[e]=o,this._scalesOrder.push(o),this._factorToScaleMapping[n]=o},n=t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE;e.call(this,t.LinearScaleAxisValueFormatter.SCALE_NONE,0*n),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_THOUSAND,1*n,"SCALING_SUFFIX_THOUSAND"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_MILLION,2*n,"SCALING_SUFFIX_MILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_BILLION,3*n,"SCALING_SUFFIX_BILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_TRILLION,4*n,"SCALING_SUFFIX_TRILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION,5*n,"SCALING_SUFFIX_QUADRILLION"),this._scalesOrder.sort(function(t,e){return t.scaleFactor<e.scaleFactor?-1:t.scaleFactor>e.scaleFactor?1:0})},t.LinearScaleAxisValueFormatter.prototype.InitFormatter=function(t,e,n,i,r){var o,a,s=!1,l=!1;if("off"!==r&&(l=!0),a=this._getScaleFactor(i),"number"!=typeof a&&(s=!0),s){var u=Math.max(Math.abs(t),Math.abs(e)),h=this._getPowerOfTen(u);a=this._findNearestLEScaleFactor(h)}if(l===!0)if(0==n&&t==e){var c=this._getPowerOfTen(e),d=a-c;o=d<=0?Math.max(d+3,0):Math.max(d,4)}else{var p=this._getPowerOfTen(n);o=Math.max(a-p,0)}this._useAutoPrecision=l,this._scaleFactor=a,this._decimalPlaces=o},t.LinearScaleAxisValueFormatter.prototype._findNearestLEScaleFactor=function(t){var e=0;if(t<=this._scalesOrder[0].scaleFactor)e=this._scalesOrder[0].scaleFactor;else if(t>=this._scalesOrder[this._scalesOrder.length-1].scaleFactor)e=this._scalesOrder[this._scalesOrder.length-1].scaleFactor;else for(var n=this._scalesOrder.length-1,i=n;i>=0;i--)if(this._scalesOrder[i].scaleFactor<=t){e=this._scalesOrder[i].scaleFactor;break}return e},t.LinearScaleAxisValueFormatter.prototype._getScaleFactor=function(e){e||(e=t.LinearScaleAxisValueFormatter.SCALE_AUTO);var n,i=this._scales[e];return i&&(n=i.scaleFactor),n},t.LinearScaleAxisValueFormatter.prototype.format=function(t,e){var n=parseFloat(t);if(isNaN(n))return t;var i;if(this._scaleFactor>0){for(var r=0;r<this._scaleFactor;r++)n/=10;i=this._factorToScaleMapping[this._scaleFactor].localizedSuffix}if(e&&e.getAsString)n=e.getAsString(n);else if(e&&e.format)n=e.format(n);else{var o=this._context.getNumberConverter({minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces});o&&o.format?n=o.format(n):this._useAutoPrecision&&!isNaN(parseFloat(n))&&(n=parseFloat(new Number(n).toFixed(this._decimalPlaces)),n=this._formatFraction(n))}return"string"==typeof i&&0!=t&&(n+=i),n},t.LinearScaleAxisValueFormatter.prototype._formatFraction=function(e){var n=e.toString();if(n.indexOf("e")!=-1)return n;var i=".";if(i=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"NUMBER_FORMAT_DECIMAL_SEPARATOR"),this._decimalPlaces>0){n.indexOf(".")==-1?n+=i:n=n.replace(".",i);for(var r=n.substring(n.indexOf(i)+1).length;r<this._decimalPlaces;)n+="0",r++}return n},t.LinearScaleAxisValueFormatter.prototype._getPowerOfTen=function(t){t=t>=0?t:-t;var e=0;if(t<1e-15)return 0;if(t==1/0)return Number.MAX_VALUE;if(t>=10)for(;t>=10;)e+=1,t/=10;else if(t<1)for(;t<1;)e-=1,t*=10;return e},t.TimeAxisInfo=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.TimeAxisInfo,t.AxisInfo),t.TimeAxisInfo.TIME_SECOND=1e3,t.TimeAxisInfo.TIME_MINUTE=60*t.TimeAxisInfo.TIME_SECOND,t.TimeAxisInfo.TIME_HOUR=60*t.TimeAxisInfo.TIME_MINUTE,t.TimeAxisInfo.TIME_DAY=24*t.TimeAxisInfo.TIME_HOUR,t.TimeAxisInfo.TIME_MONTH_MIN=28*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_MONTH_MAX=31*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MIN=365*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MAX=366*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.prototype.Init=function(e,n,i){t.TimeAxisInfo.superclass.Init.call(this,e,n,i),"top"==this.Position||"bottom"==this.Position?(n._isOverview||"on"!=n.tickLabel.rendered||(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-n.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-n.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._startCoord=this.EndCoord-this.EndOverflow,this._endCoord=this.StartCoord+this.StartOverflow):(this._startCoord=this.StartCoord+this.StartOverflow,this._endCoord=this.EndCoord-this.EndOverflow)):(this._startCoord=this.StartCoord,this._endCoord=this.EndCoord);var r=null!=n.tickLabel?n.tickLabel.converter:null;this._label1Converter=r&&r[0]?r[0]:r,this._label2Converter=r&&r[1]?r[1]:null,this._dateToIsoWithTimeZoneConverter=e.getLocaleHelpers().dateToIsoWithTimeZoneConverter,this._groups=n.groups;var o=n.timeAxisType;this._skipGaps="skipGaps"==o,this._mixedFrequency="mixedFrequency"==o,this.DataMin=n.dataMin,this.DataMax=n.dataMax,this._groups.length>1?this._averageInterval=(this.DataMax-this.DataMin)/(this._groups.length-1):this.DataMax-this.DataMin>0?this._averageInterval=this.DataMax-this.DataMin:this._averageInterval=6*t.TimeAxisInfo.TIME_MINUTE,this._step=n.step;var a=n.endGroupOffset>0?n.endGroupOffset*this._averageInterval:0,s=n.startGroupOffset>0?n.startGroupOffset*this._averageInterval:0;this.GlobalMin=null!=n.min?n.min:this.DataMin-s,this.GlobalMax=null!=n.max?n.max:this.DataMax+a,null!=n.viewportStartGroup&&(this.MinValue=n.viewportStartGroup-s),null!=n.viewportEndGroup&&(this.MaxValue=n.viewportEndGroup+a),null!=n.viewportMin&&(this.MinValue=n.viewportMin),null!=n.viewportMax&&(this.MaxValue=n.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._timeRange=this.MaxValue-this.MinValue,this._level1Labels=null,this._level2Labels=null,this._level1Coords=null,this._level2Coords=null,this._isOneLevel=!0,this._level1Overflow=[],this._level2Overflow=[],this._locale=n._locale.toLowerCase(),this._monthResources=[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JANUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_FEBRUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MARCH"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_APRIL"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MAY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JUNE"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JULY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_AUGUST"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_SEPTEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_OCTOBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_NOVEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_DECEMBER")]},t.TimeAxisInfo._getAMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"am";if("en-gb"==t)return"";switch(e){case"en":return"AM";case"ar":return"";case"el":return"";case"ko":return"";case"zh":return"";default:return""}},t.TimeAxisInfo._getPMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"pm";if("en-gb"==t)return"";switch(e){case"en":return"PM";case"ar":return"";case"el":return"";case"ko":return"";case"zh":return"";default:return""}},t.TimeAxisInfo._getAMPMBefore=function(t){var e=t.substring(0,2);return"ko"==e||"zh"==e},t.TimeAxisInfo._getDMYOrder=function(t){var e=t.substring(0,2);return"en-us"==t||"en-ph"==t?"MDY":"fa"==e||"hu"==e||"ja"==e||"ko"==e||"lt"==e||"mn"==e||"zh"==e?"YMD":"DMY"},t.TimeAxisInfo._getYearTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"":0==t.indexOf("ko")?"":""},t.TimeAxisInfo._getDayTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"":0==t.indexOf("ko")?"":""},t.TimeAxisInfo.prototype.formatLabel=function(e){var n=new Date(e),i=this._formatAxisLabel(n,null,!0);return null!=i[1]?"YMD"==t.TimeAxisInfo._getDMYOrder(this._locale)||this._timeRange<t.TimeAxisInfo.TIME_MONTH_MIN&&this._step<t.TimeAxisInfo.TIME_DAY?i[1]+" "+i[0]:i[0]+" "+i[1]:i[0]},t.TimeAxisInfo.prototype._formatAxisLabelWithConverter=function(t,e,n){if(n){var i=null,r=null;if(n.getAsString?(i=n.getAsString(t),r=n.getAsString(e)):n.format&&(i=n.format(this._dateToIsoWithTimeZoneConverter&&t?this._dateToIsoWithTimeZoneConverter(t):t),r=n.format(this._dateToIsoWithTimeZoneConverter&&e?this._dateToIsoWithTimeZoneConverter(e):e)),r!=i)return i}return null},t.TimeAxisInfo.prototype._formatAxisLabel=function(e,n,i){var r=null,o=null,a="left"==this.Position||"right"==this.Position;return this._label1Converter||this._label2Converter?(this._label1Converter&&(r=this._formatAxisLabelWithConverter(e,n,this._label1Converter)),this._label2Converter&&(o=this._formatAxisLabelWithConverter(e,n,this._label2Converter)),[r,o]):(this._step>=t.TimeAxisInfo.TIME_YEAR_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?r=this._formatDate(e,!1,!1,!0):this._step>=t.TimeAxisInfo.TIME_MONTH_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?(null!=n&&n.getMonth()==e.getMonth()||(r=this._formatDate(e,!1,!0,!1)),null!=n&&n.getYear()==e.getYear()||(o=this._formatDate(e,!1,!1,!0))):this._step>=t.TimeAxisInfo.TIME_DAY||this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?i?r=this._formatDate(e,!0,!0,!0):(null!=n&&n.getDate()==e.getDate()||(r=this._formatDate(e,!0,!1,!1)),null==n||n.getYear()!=e.getYear()?o=this._formatDate(e,!1,!0,!0):n.getMonth()!=e.getMonth()&&(o=this._formatDate(e,!1,!0,!1))):(this._step>=t.TimeAxisInfo.TIME_HOUR||this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?null!=n&&n.getHours()==e.getHours()||(r=this._formatTime(e,!1,!1)):this._step>=t.TimeAxisInfo.TIME_MINUTE||this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?null!=n&&n.getMinutes()==e.getMinutes()||(r=this._formatTime(e,!0,!1)):null!=n&&n.getSeconds()==e.getSeconds()||(r=this._formatTime(e,!0,!0)),a?null!=n&&n.getDate()==e.getDate()||(o=this._formatDate(e,!0,!0,!1)):null==n||n.getYear()!=e.getYear()?o=this._formatDate(e,!0,!0,!0):n.getMonth()!=e.getMonth()?o=this._formatDate(e,!0,!0,!1):n.getDate()!=e.getDate()&&(o=this._formatDate(e,!0,!1,!1))),[r,o])},t.TimeAxisInfo.prototype._formatDate=function(e,n,i,r){var o,a="th"==this._locale.substring(0,2)&&"jet"!=this.Options._environment?e.getFullYear()+543:e.getFullYear();o=this._monthResources&&this._monthResources.length>=12?this._monthResources[e.getMonth()]:e.toString().split(" ")[1];var s=e.getDate();a+=t.TimeAxisInfo._getYearTrailingCharacters(this._locale),s+=t.TimeAxisInfo._getDayTrailingCharacters(this._locale);for(var l=t.TimeAxisInfo._getDMYOrder(this._locale),u="",h=0;h<l.length;h++)n&&"D"==l[h]?u+=s+" ":i&&"M"==l[h]?u+=o+" ":r&&"Y"==l[h]&&(u+=a+" ");return u.length>0?u.slice(0,u.length-1):u},t.TimeAxisInfo.prototype._formatTime=function(e,n,i){var r,o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=t.TimeAxisInfo._getAMString(this._locale),u=t.TimeAxisInfo._getPMString(this._locale),h=t.TimeAxisInfo._getAMPMBefore(this._locale),c=""!=l&&""!=u,d="";return t.Agent.isRightToLeft(this.getCtx())&&(d=""),c?(o<12?(r=l,0==o&&(o=12)):(r=u,o>12&&(o-=12)),d+=o,(n||0!=a)&&(d+=":"+this._doubleDigit(a))):d+=this._doubleDigit(o)+":"+this._doubleDigit(a),i&&(d+=":"+this._doubleDigit(s)),c?h?r+" "+d:d+" "+r:d},t.TimeAxisInfo.prototype._doubleDigit=function(t){return t<10?"0"+t:""+t},t.TimeAxisInfo.prototype._getMixedFrequencyStep=function(){return this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?t.TimeAxisInfo.TIME_YEAR_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?t.TimeAxisInfo.TIME_MONTH_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?t.TimeAxisInfo.TIME_DAY:this._timeRange>=t.TimeAxisInfo.TIME_DAY?3*t.TimeAxisInfo.TIME_HOUR:this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?t.TimeAxisInfo.TIME_HOUR:this._timeRange>=t.TimeAxisInfo.TIME_HOUR?15*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=30*t.TimeAxisInfo.TIME_MINUTE?5*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=t.TimeAxisInfo.TIME_MINUTE?15*t.TimeAxisInfo.TIME_SECOND:this._timeRange>=30*t.TimeAxisInfo.TIME_SECOND?5*t.TimeAxisInfo.TIME_SECOND:t.TimeAxisInfo.TIME_SECOND},t.TimeAxisInfo._getLabelPositions=function(e,n,i){var r=new Date(e);r.setMonth(0,1),r.setHours(0,0,0,0);var o=r.getTime(),a=[];if(i>=t.TimeAxisInfo.TIME_YEAR_MIN&&i<=t.TimeAxisInfo.TIME_YEAR_MAX){for(;o<e;)o=t.TimeAxisInfo._addOneYear(o);for(;o<=n;)a.push(o),o=t.TimeAxisInfo._addOneYear(o)}else if(i>=t.TimeAxisInfo.TIME_MONTH_MIN&&i<=t.TimeAxisInfo.TIME_MONTH_MAX){for(;o<e;)o=t.TimeAxisInfo._addOneMonth(o);for(;o<=n;)a.push(o),o=t.TimeAxisInfo._addOneMonth(o)}else for(o+=Math.ceil((e-o)/i)*i;o<=n;)a.push(o),o+=i;return a},t.TimeAxisInfo._addOneYear=function(t){var e=new Date(t);return e.setFullYear(e.getFullYear()+1),e.getTime()},t.TimeAxisInfo._addOneMonth=function(t){var e=new Date(t);return e.setMonth(e.getMonth()+1),e.getTime()},t.TimeAxisInfo.prototype._generateLabels=function(e){var n=[],i=[],r=[],o=[],a=[],s=null,l=0,u=0,h=e.getStage(e),c=t.Agent.isRightToLeft(e),d="left"==this.Position||"right"==this.Position,p="off"!=this.Options.zoomAndScroll,g=!0,f=0;d&&t.Agent.isBrowserChrome()&&(f=.16*this.getTickLabelHeight());var _=[];if(null!=this._step)_=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else if(this._mixedFrequency)this._step=this._getMixedFrequencyStep(),_=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else{for(var m=0;m<this._groups.length;m++)this._groups[m]>=this.MinValue&&this._groups[m]<=this.MaxValue&&_.push(this._groups[m]);if(this._step=this._averageInterval,!this._skipGaps){var v=new t.OutputText(e,this._formatAxisLabel(new Date(_[0]))[0],0,0),y=d?t.TextUtils.guessTextDimensions(v).h:v.measureDimensions().w,S=(y+this.GetTickLabelGapSize())*(_.length-1),C=Math.abs(this._endCoord-this._startCoord);S>C&&(this._step=this._getMixedFrequencyStep(),_=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step))}}0==_.length&&(_=[this.MinValue]);for(var m=0;m<_.length;m++){var b=_[m],E=this.getCoordAt(b);if(null!=E){var T=new Date(b),A=this._formatAxisLabel(T,s),x=A[0],I=A[1];if(null!=x?(r.push({text:x,coord:null!=I?E+f:E}),o.push(E),l++):(r.push(null),o.push(null)),n.push(null),p&&g&&(E=this.MinValue?this.getCoordAt(this.MinValue):E),g=!1,null!=I){var O=this.CreateLabel(e,I,null!=I?E-f:E);a.push(E),d||(c?O.alignRight():O.alignLeft()),i.push(O),this._isOneLevel=!1,u++}else i.push(null),a.push(null);s=T}}if(l=this._skipLabelsUniform(r,n,h,!1,c),!p&&u>1&&l<1.5*u){n=i,i=null;for(var M=0;M<n.length;M++)null!=n[M]&&n[M].alignCenter();l=this._skipLabelsGreedy(n,this.GetLabelDims(n,h),!1,c)}else u=this._skipLabelsGreedy(i,this.GetLabelDims(i,h),!0,c),0==u&&(i=null);d&&null!=i&&this._skipVertLabels(n,i,h),this._level1Labels=n,this._level2Labels=i,this._level1Coords=o,this._level2Coords=a},t.TimeAxisInfo._isOverlapping=function(t,e,n,i,r){return n>=t&&n-r<e||n<t&&i+r>t},t.TimeAxisInfo.prototype._getLabelOverflow=function(t,e,n,i){var r=t-(n?i?e:0:.5*e);if(r<this.Options._minOverflowCoord)return Math.floor(r-this.Options._minOverflowCoord);var o=t+(n?i?0:e:.5*e);return o>this.Options._maxOverflowCoord?Math.ceil(o-this.Options._maxOverflowCoord):0},t.TimeAxisInfo.prototype._skipLabelsGreedy=function(e,n,i,r){if(!n||n.length<=0)return!1;for(var o,a,s,l,u,h="left"==this.Position||"right"==this.Position,c=this.getTickLabelHeight(),d=h?.08*c:.24*c,p=0,g=Math.abs(this._endCoord-this._startCoord),f=0;f<n.length;f++)if(this._level2Overflow.push(0),null!=e[f]){u=e[f];var _=t.TextUtils.getTextWidth(u);if(n[f].w>g)e[f]=null;else{var m=this._getLabelOverflow(u.getX(),_,i,r);this._level2Overflow[f]=m,0!=m&&(u.setX(u.getX()-m),n[f].x-=m)}}for(f=0;f<n.length;f++)null!=n[f]&&(h?(s=n[f].y,l=n[f].y+n[f].h):(s=n[f].x,l=n[f].x+n[f].w),null!=o&&null!=a&&t.TimeAxisInfo._isOverlapping(o,a,s,l,d)&&(e[f]=null),null!=e[f]&&(o=s,a=l,p++));return p},t.TimeAxisInfo.prototype._skipLabelsUniform=function(t,e,n,i){for(var r=[],o=[],a=Math.abs(this._endCoord-this._startCoord),s=0;s<t.length;s++)null!=t[s]&&(r.push(t[s]),o.push(null),this._level1Overflow.push(0));for(var l="left"==this.Position||"right"==this.Position,u=this,h=function(t){if(null==o[t])if(r[t].label=u.CreateLabel(n.getCtx(),r[t].text,r[t].coord),o[t]=r[t].label.measureDimensions(n),o[t].w>a)r[t].label=null,o[t].w=0,o[t].h=0;else{var e=u._getLabelOverflow(r[t].coord,o[t].w,!1,i);0!=e&&(r[t].coord-=e,o[t].x-=e,r[t].label.setX(r[t].label.getX()-e),u._level1Overflow[t]=e)}return l?o[t].h:o[t].w},c=(h(0)+this.GetTickLabelGapSize())*(r.length-1),d=a>0?Math.ceil(c/a)-1:0,p=!0;p;){for(var s=0;s<r.length;s++)s%(d+1)==0?(h(s),r[s].skipped=!1):r[s].skipped=!0;p=this.IsOverlapping(o,d),d++}for(var g=0,s=0;s<t.length;s++)null==t[s]||t[s].skipped||(e[s]=t[s].label,g++);return g},t.TimeAxisInfo.prototype._skipVertLabels=function(e,n,i){for(var r=.08*this.getTickLabelHeight(),o=function(e,n){return t.TimeAxisInfo._isOverlapping(e.y,e.y+e.h,n.y,n.y+n.h,r)},a=null,s=!1,l=0;l<e.length;l++)if(e[l]&&n[l]){if(e[l].alignTop(),n[l].alignBottom(),a&&o(a,n[l].measureDimensions())){s=!0;break}a=e[l].measureDimensions()}else if(e[l]||n[l]){var u=e[l]?e[l]:n[l];if(a&&o(a,u.measureDimensions())){s=!0;break}a=u.measureDimensions()}if(s){var h,c=null,d=null,p=null;for(l=0;l<e.length;l++)n[l]?(e[l]=null,n[l].alignMiddle(),h=n[l].measureDimensions(),d&&o(d,h)&&(e[c]=null),p=h):e[l]&&(h=e[l].measureDimensions(),p&&o(p,h)?e[l]=null:(d=h,c=l))}},t.TimeAxisInfo.prototype.getLabels=function(t,e){return e&&e>1?null:(this._level1Labels||this._generateLabels(t),1==e?this._level2Labels:this._level1Labels)},t.TimeAxisInfo.prototype.getMajorTickCoords=function(){var t=[];if(this._isOneLevel)for(var e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);else for(var e=1;e<this._level2Coords.length;e++)null!=this._level2Coords[e]&&t.push(this._level2Coords[e]);return t},t.TimeAxisInfo.prototype.getMinorTickCoords=function(){if(this._isOneLevel)return[];for(var t=[],e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);return t},t.TimeAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._startCoord)/(this._endCoord-this._startCoord);if(this._skipGaps){var n=this._timeToIndex(this.MinValue),i=this._timeToIndex(this.MaxValue);return this._indexToTime(n+e*(i-n))}return this.MinValue+e*(this.MaxValue-this.MinValue)},t.TimeAxisInfo.prototype.getUnboundedCoordAt=function(t){if(null==t)return null;var e;if(this._skipGaps){var n=this._timeToIndex(this.MinValue),i=this._timeToIndex(this.MaxValue),r=this._timeToIndex(t);e=(r-n)/(i-n)}else e=(t-this.MinValue)/(this.MaxValue-this.MinValue);return this._startCoord+e*(this._endCoord-this._startCoord)},t.TimeAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._skipGaps?this._indexToTime(t):t},t.TimeAxisInfo.prototype.actualToLinear=function(t){return null==t?null:this._skipGaps?this._timeToIndex(t):t},t.TimeAxisInfo.prototype._timeToIndex=function(t){for(var e=this._groups.length,n=0;n<this._groups.length;n++)if(t<=this._groups[n]){e=n;break}var i=e-1,r=void 0!==this._groups[i]?this._groups[i]:this._groups[0]-this._averageInterval,o=void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval;return i+(t-r)/(o-r)},t.TimeAxisInfo.prototype._indexToTime=function(t){var e=Math.min(Math.max(Math.ceil(t),0),this._groups.length),n=e-1,i=void 0!==this._groups[n]?this._groups[n]:this._groups[0]-this._averageInterval,r=void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval;return i+(t-n)*(r-i)},t.TimeAxisInfo.prototype.getGroupWidth=function(){return this._skipGaps?Math.abs(this.getUnboundedCoordAt(this._indexToTime(1))-this.getUnboundedCoordAt(this._indexToTime(0))):Math.abs(this.getUnboundedCoordAt(this.MinValue+this._averageInterval)-this.getUnboundedCoordAt(this.MinValue))},t.TimeAxisInfo.prototype.getMinimumExtent=function(){return this._skipGaps?1:this._mixedFrequency?Math.min((this.getGlobalMax()-this.getGlobalMin())/8,this._averageInterval):this._averageInterval},t.TimeAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.TimeAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow}}(t),t}),define("ojs/internal-deps/dvt/DvtLegend",["./DvtToolkit"],function(t){return function(t){t.Legend=function(){},t.Obj.createSubclass(t.Legend,t.BaseComponent),t.Legend.newInstance=function(e,n,i){var r=new t.Legend;return r.Init(e,n,i),r},t.Legend.getDefaults=function(t){return(new n).getDefaults(t)},t.Legend.prototype.Init=function(e,r,o){t.Legend.superclass.Init.call(this,e,r,o),this.setId("legend1000"+Math.floor(1e9*Math.random())),this.Defaults=new n,this.EventManager=new i(this),this.EventManager.addListeners(this),this._peers=[],this._navigablePeers=[],this._bounds=null,this._titles=[]},t.Legend.prototype.SetOptions=function(t){this.getOptionsCache().clearCache(),t?(this.Options=this.Defaults.calcOptions(t),this._transferVisibilityProperties(this.Options.sections)):this.Options||(this.Options=this.GetDefaults())},t.Legend.prototype.getPreferredSize=function(e,n,i){this.SetOptions(e),this.getOptions().isLayout=!0;var r=new t.Rectangle(0,0,n,i),o=a.render(this,r);return this.getOptions().isLayout=!1,new t.Dimension(o.w,o.h)},t.Legend.prototype.render=function(e,n,i){this.getCache().clearCache(),this.SetOptions(e),isNaN(n)||isNaN(i)||(this.Width=n,this.Height=i),this.getOptions().isLayout=!1,this.removeChildren(),this._peers=[],this._navigablePeers=[],this._bounds=null,this._titles=[],t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new r(this.EventManager,this)),this.UpdateAriaAttributes();var o=new t.Rectangle(0,0,this.Width,this.Height);this._contentDimensions=a.render(this,o);var s=this.getOptions().highlightedCategories;return s&&s.length>0&&this.highlight(s),this.RenderComplete(),this._contentDimensions},t.Legend.prototype.highlight=function(e){this.getOptions().highlightedCategories=e&&e.length>0?e.slice():null,t.CategoryRolloverHandler.highlight(e,this.__getObjects(),!0)},t.Legend.prototype.processEvent=function(t,e){var n=t.type;if("categoryHighlight"==n&&"dim"==this.getOptions().hoverBehavior){var i=this.__getObjects();this!=e&&this.highlight(t.categories);for(var r=0;r<i.length;r++)if(i[r].getId()==t.categories){this.container.scrollIntoView(i[r].getDisplayables()[0]);break}}this!=e&&"adfShowPopup"!=n&&"adfHidePopup"!=n||this.dispatchEvent(t)},t.Legend.prototype.__registerObject=function(e){if(e.getDisplayables()[0]instanceof t.Button)this._navigablePeers.push(e);else{var n=this.getOptions().hideAndShowBehavior;(null!=e.getDatatip()||null!=e.getAction()||e.isDrillable()||"none"!=n&&"off"!=n)&&this._navigablePeers.push(e),this._peers.push(e)}},t.Legend.prototype.__getObjects=function(){return this._peers},t.Legend.prototype.__getKeyboardObjects=function(){return this._navigablePeers},t.Legend.prototype.__setBounds=function(t){this._bounds=t.clone()},t.Legend.prototype.__getBounds=function(){return this._bounds},t.Legend.prototype.__registerTitle=function(t){this._titles.push(t)},t.Legend.prototype.__getTitles=function(){return this._titles},t.Legend.prototype.getAutomation=function(){return new e(this)},t.Legend.prototype.getKeyboardFocus=function(){return null!=this.EventManager?this.EventManager.getFocus():null},t.Legend.prototype.setKeyboardFocus=function(t,e){if(null!=this.EventManager){for(var n=this.__getKeyboardObjects(),i=0;i<n.length;i++)if(n[i].getId()==t.getId()){this.EventManager.setFocusObj(n[i]),e&&n[i].showKeyboardFocusEffect();break}var r=this.getKeyboardFocus();if(r){var o=r.getDisplayables()[0];o.setAriaProperty("label",r.getAriaLabel()),this.getCtx().setActiveElement(o)}}},t.Legend.prototype.getDimensions=function(e){var n=new t.Rectangle(0,0,this.Width,this.Height);return e&&e!==this?this.ConvertCoordSpaceRect(n,e):n},t.Legend.prototype.getContentDimensions=function(t){return t&&t!==this?this.ConvertCoordSpaceRect(this._contentDimensions,t):this._contentDimensions},t.Legend.prototype.GetComponentDescription=function(){return t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"LEGEND")},t.Legend.prototype._transferVisibilityProperties=function(e){if(e&&!(e.length<=0))for(var n=this.getOptions().hiddenCategories,i=0;i<e.length;i++){var r=e[i];r.sections&&(n=this._transferVisibilityProperties(r.sections));var o=r.items;if(o&&!(o.length<=0))for(var s=0;s<o.length;s++){var l=o[s],u=a.getItemCategory(l);"hidden"==l.categoryVisibility&&t.ArrayUtils.getIndex(n,u)<0&&n.push(u),l.categoryVisibility=null}}},t.Legend.prototype.UpdateAriaAttributes=function(){if(this.IsParentRoot()){var e=this.getOptions(),n=e.hideAndShowBehavior;("off"!=n&&"none"!=n||"dim"==e.hoverBehavior)&&(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.StringUtils.processAriaLabel(this.GetComponentDescription())])))}},t.Legend.prototype.isNavigable=function(){return this._navigablePeers.length>0},t.Legend.getItemCount=function(e){var n=e.getOptionsCache().getFromCache("itemsCount");if(null!=n)return n;n=0;for(var i=e.getOptions().sections,r=0;r<i.length;r++){var o=i[r];n+=t.Legend.getSectionItemsCount(o)}return e.getOptionsCache().putToCache("itemsCount",n),n},t.Legend.getSectionItemsCount=function(e){var n=0;if(e.items&&(n+=e.items.length),e.sections)for(var i=e.sections,r=0;r<i.length;r++)n+=t.Legend.getSectionItemsCount(i[r]);return n};var e=function(t){this._legend=t,this._options=this._legend.getOptions()};t.Obj.createSubclass(e,t.Automation),e.prototype.GetSubIdForDomElement=function(t){var e=this._legend.getEventManager().GetLogicalObject(t);if(e&&e instanceof o){var n=e.getData(),i=this._getIndicesFromItem(n,this._options);if(i)return"section"+i}return null},e.prototype._getIndicesFromItem=function(t,e){if(e.sections&&e.sections.length>0){for(var n=0;n<e.sections.length;n++){if(e.sections[n]==t)return"["+n+"]";var i=this._getIndicesFromItem(t,e.sections[n]);if(i)return"["+n+"]"+i}return null}if(e.items&&e.items.length>0){for(var r=0;r<e.items.length;r++)if(e.items[r]==t)return":item["+r+"]";return null}},e.prototype.getIndicesFromSeries=function(t,e){if(e.sections&&e.sections.length>0){for(var n=0;n<e.sections.length;n++){var i=this.getIndicesFromSeries(t,e.sections[n]);if(i)return"["+n+"]"+i}return null}if(e.items&&e.items.length>0){for(var r=0;r<e.items.length;r++)if(e.items[r].text==t.name)return":item["+r+"]";return null}},e.prototype.getLegendItem=function(t,e){var n=e.indexOf("["),i=e.indexOf("]");if(n>=0&&i>=0){var r=e.substring(n+1,i),o=e.indexOf(":");e=e.substring(i+1);var a=e.indexOf("["),s=e.indexOf("]");return a>=0&&s>=0?this.getLegendItem(t.sections[r],e):0==o?t.items[r]:t.sections[r]}},e.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._legend);for(var n=this.getLegendItem(this._options,e),i=this._legend.__getObjects(),r=0;r<i.length;r++){var o=i[r].getData();if(n==o)return i[r].getDisplayables()[0].getElem()}return null},e.prototype.getTitle=function(){return this._options.title},e.prototype.getItem=function(t){for(var e,n=t.shift(),i=this._options;void 0!=n;)t.length>0?i=i.sections[n]:e=i.items[n],n=t.shift();return e?{text:e.text?e.text:null}:null},e.prototype.getSection=function(t){for(var e,n=t.shift(),i=this._options;void 0!=n;)t.length>0?i=i.sections[n]:e=i.sections[n],n=t.shift();var r={title:e.title?e.title:null,items:e.items?this._generateItemObjects(e.items):null,sections:e.sections?this._generateSectionObjects(e.sections):null};return r},e.prototype._generateItemObjects=function(t){for(var e=[],n=0;n<t.length;n++)e.push({text:t[n].text});return e},e.prototype._generateSectionObjects=function(t){for(var e=[],n=0;n<t.length;n++)e.push({title:t[n].title?t[n].title:null,items:t[n].items?this._generateItemObjects(t[n].items):null,sections:t[n].sections?this._generateSectionObjects(t[n].sections):null});return e};var n=function(){this.Init({skyros:n.VERSION_1,alta:n.SKIN_ALTA,next:n.SKIN_NEXT})};t.Obj.createSubclass(n,t.BaseComponentDefaults),n.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,titleStyle:new t.CSSStyle("color: #737373;"),_sectionTitleStyle:new t.CSSStyle("color: #737373;"),layout:{titleGapWidth:17,titleGapHeight:9,symbolGapWidth:7,symbolGapHeight:4,rowGap:4,columnGap:10,sectionGapHeight:16,sectionGapWidth:24}},n.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,textStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11+"color: #333333;"),_sectionTitleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11+"color: #333333;")},n.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,orientation:"vertical",position:null,backgroundColor:null,borderColor:null,textStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #333333;"),titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b;"),titleHalign:"start",hiddenCategories:[],hideAndShowBehavior:"off",hoverBehavior:"none",hoverBehaviorDelay:200,scrolling:"asNeeded",halign:"start",valign:"top",drilling:"off",_color:"#a6acb1",_markerShape:"square",_lineWidth:3,layout:{outerGapWidth:3,outerGapHeight:3,titleGapWidth:8,titleGapHeight:3,symbolGapWidth:5,symbolGapHeight:4,rowGap:0,columnGap:8,sectionGapHeight:6,sectionGapWidth:15},isLayout:!1},n.getGapSize=function(e,n){var i=Math.min(t.TextUtils.getTextStringHeight(e.getCtx(),e.getOptions().textStyle)/14,1);return Math.ceil(n*i)},n.prototype.getNoCloneObject=function(t){return{sections:{items:{_dataContext:!0}}}};var i=function(t){this.Init(t.getCtx(),t.processEvent,t),this._legend=t};t.Obj.createSubclass(i,t.EventManager),i.prototype.OnClick=function(t){i.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);if(e){var n=this.processHideShowEvent(e),r=this.handleClick(e,t);(n||r)&&t.stopPropagation()}},i.prototype.OnMouseOver=function(e){i.superclass.OnMouseOver.call(this,e);var n=this.GetLogicalObject(e.target);if(n){var r=n instanceof t.SimpleObjPeer?n.getParams():null;if(r&&r.isCollapsible&&r.button){var o=r.button;o.drawOverState()}this.UpdateActiveElement(n)}},i.prototype.OnMouseOut=function(e){i.superclass.OnMouseOut.call(this,e);var n=this.GetLogicalObject(e.target);if(n){var r=n instanceof t.SimpleObjPeer?n.getParams():null;if(r&&r.isCollapsible&&r.button){var o=r.button;o.drawUpState()}}},i.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);if(e){var n=t.touchEvent,i=this.processHideShowEvent(e),r=this.handleClick(e,t);(i||r)&&n&&n.preventDefault()}},i.prototype.processHideShowEvent=function(e){var n=this._legend.getOptions().hideAndShowBehavior;if("none"==n||"off"==n)return!1;var i=e.getCategories?e.getCategories():null;if(!i||i.length<=0)return!1;
var r=e.getCategories()[0],o=this._legend.getOptions().hiddenCategories||[];o=o.slice();for(var s=e.getDisplayables(),l=0;l<s.length;l++){var u=s[l];u instanceof t.SimpleMarker?u.setHollow(e.getColor()):u instanceof t.Rect&&e.updateAriaLabel()}var h,c=i[0];return a.isCategoryHidden(r,this._legend)?(o.splice(t.ArrayUtils.getIndex(o,r),1),h=t.EventFactory.newCategoryShowEvent(c,o)):(o.push(r),h=t.EventFactory.newCategoryHideEvent(c,o)),this._legend.getOptions().hiddenCategories=o,this.FireEvent(h,this._legend),!0},i.prototype.handleClick=function(e,n){if(e&&e.getAction&&e.getAction())return this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()),this._legend),!0;if(e instanceof o&&e.isDrillable()){var i=e.getId();return this.FireEvent(t.EventFactory.newChartDrillEvent(i,i,null),this._legend),!0}var r=e instanceof t.SimpleObjPeer?e.getParams():null;return!(!r||!r.isCollapsible)&&(this.toggleSectionCollapse(n,r.id),!0)},i.prototype.ProcessRolloverEvent=function(e,n,i){var r=this._legend.getOptions();if(!("none"==r.hoverBehavior||n.getDisplayables&&n.getDisplayables()[0]instanceof t.Button)){var o=n.getCategories?n.getCategories():[];r.highlightedCategories=i?o.slice():null;var a=t.EventFactory.newCategoryHighlightEvent(r.highlightedCategories,i),s=t.StyleUtils.getTimeMilliseconds(r.hoverBehaviorDelay);this.RolloverHandler.processEvent(a,this._legend.__getObjects(),s,!0)}},i.prototype.onCollapseButtonClick=function(t,e){var n=e.getId();this.toggleSectionCollapse(t,n)},i.prototype.toggleSectionCollapse=function(e,n){for(var i=this._legend.getOptions(),r=0;r<n.length;r++)i=i.sections[n[r]];if(i.expanded="off"==i.expanded?"on":"off",e.type==t.MouseEvent.CLICK){var o=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));o.getNextNavigable&&this.setFocusObj(o.getNextNavigable(e))}var a=this._legend.getKeyboardFocus(),s=!!a&&a.isShowingKeyboardFocusEffect();this._legend.render(),a&&this._legend.setKeyboardFocus(a,s),this.hideTooltip();var l=this._legend.getContentDimensions();this.FireEvent(new t.ResizeEvent(l.w,l.h,l.x,l.y),this._legend)},i.prototype.GetTouchResponse=function(){return this._legend.getOptions()._isScrollingLegend?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:t.EventManager.TOUCH_RESPONSE_TOUCH_START},i.prototype.getComponent=function(){return this._legend},i.prototype.isDndSupported=function(){return!0},i.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof o&&null!=e.getData()._dataContext?"series":null},i.prototype.GetDragDataContexts=function(){var t=this.DragSource.getDragObject();return t instanceof o?[t.getData()._dataContext]:[]},i.prototype.GetDropTargetType=function(t){var e=this._legend.stageToLocal(this.getCtx().pageToStageCoords(t.pageX,t.pageY)),n=this._legend.__getBounds();return n.containsPoint(e.x,e.y)?"legend":null},i.prototype.GetDropEventPayload=function(t){return{}},i.prototype.ShowDropEffect=function(t){var e=this.GetDropTargetType(t);if("legend"==e){var n=this._legend.getOptions()._dropColor,i=this._legend.getCache().getFromCache("background");i&&i.setSolidFill(n)}},i.prototype.ClearDropEffect=function(){var t=this._legend.getCache().getFromCache("background");if(t){var e=this._legend.getOptions().backgroundColor;e?t.setSolidFill(e):t.setInvisibleFill()}};var r=function(t,e){this.Init(t,e)};t.Obj.createSubclass(r,t.KeyboardHandler),r.prototype.Init=function(t,e){r.superclass.Init.call(this,t),this._legend=e},r.prototype.processKeyDown=function(e){var n=e.keyCode,i=this._eventManager.getFocus(),o=i&&i.getDisplayables()[0]instanceof t.Button,a=null;if(null==i&&n==t.KeyboardEvent.TAB){var s=this._legend.__getKeyboardObjects();s.length>0&&(t.EventManager.consumeEvent(e),a=this.getDefaultNavigable(s))}else i&&(n==t.KeyboardEvent.TAB?(t.EventManager.consumeEvent(e),a=i):n==t.KeyboardEvent.ENTER||n==t.KeyboardEvent.SPACE?(n==t.KeyboardEvent.ENTER&&this._eventManager.handleClick(i,e),o?this._eventManager.onCollapseButtonClick(e,i.getDisplayables()[0]):this._eventManager.processHideShowEvent(i),t.EventManager.consumeEvent(e)):!o||n!=t.KeyboardEvent.LEFT_ARROW&&n!=t.KeyboardEvent.RIGHT_ARROW?a=r.superclass.processKeyDown.call(this,e):(this._eventManager.onCollapseButtonClick(e,i.getDisplayables()[0]),t.EventManager.consumeEvent(e)));return a&&this._legend.container.scrollIntoView(a.getDisplayables()[0]),a};var o=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(o,t.Obj),o.prototype.Init=function(e,n,i,r,o,s){if(this._legend=e,this._displayables=n,this._item=i,this._category=a.getItemCategory(this._item),this._id=this._category?this._category:i.title,this._action=i.action,this._drillable=s,this._spb=i._spb,this._tooltip=r,this._datatip=o,this._isShowingKeyboardFocusEffect=!1,this._action||this._drillable)for(var l=0;l<this._displayables.length;l++)this._displayables[l].setCursor(t.SelectionEffectUtils.getSelectingCursor())},o.associate=function(t,e,n,i,r,a){if(!t||!n)return null;var s=new o(e,t,n,i,r,a);e.__registerObject(s);for(var l=0;l<t.length;l++)e.getEventManager().associate(t[l],s);return s},o.prototype.getData=function(){return this._item},o.prototype.getColor=function(){return this._item.color},o.prototype.getId=function(){return this._id},o.prototype.getDisplayables=function(){return this._displayables},o.prototype.getCategories=function(t){return null!=this._category?[this._category]:null},o.prototype.getAction=function(){return this._action},o.prototype.isDrillable=function(){return this._drillable},o.prototype.getShowPopupBehaviors=function(){return this._spb},o.prototype.getAriaLabel=function(){var e=[],n=this._legend.getOptions(),i=this._legend.getOptions().hideAndShowBehavior,r=a.isCategoryHidden(this._category,this._legend),o=this.getData();return this._displayables[0]instanceof t.Button?(e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"off"==o.expanded?"STATE_COLLAPSED":"STATE_EXPANDED")),t.Displayable.generateAriaLabel(o.title,e)):("off"!=i&&"none"!=i&&e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,r?"STATE_HIDDEN":"STATE_VISIBLE")),this.isDrillable()&&e.push(t.Bundle.getTranslation(n,"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")),null!=o.shortDesc?t.Displayable.generateAriaLabel(o.shortDesc,e):e.length>0?t.Displayable.generateAriaLabel(o.text,e):null)},o.prototype.updateAriaLabel=function(){!t.Agent.deferAriaCreation()&&this._displayables[0]&&this._displayables[0].setAriaProperty("label",this.getAriaLabel())},o.prototype.getNextNavigable=function(e){if(e.type==t.MouseEvent.CLICK)return this;var n=this._legend.__getKeyboardObjects();return t.KeyboardHandler.getNextNavigable(this,e,n,!0)},o.prototype.getKeyboardBoundingBox=function(e){return this._displayables[0]?this._displayables[0].getDimensions(e):new t.Rectangle(0,0,0,0)},o.prototype.getTargetElem=function(){return this._displayables[0]?this._displayables[0].getElem():null},o.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this._displayables[0]&&(this._displayables[0]instanceof t.Button?this._displayables[0].drawOverState():this._displayables[0].setSolidStroke(t.Agent.getFocusColor()))},o.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this._displayables[0]&&(this._displayables[0]instanceof t.Button?this._displayables[0].drawUpState():this._displayables[0].setStroke(null))},o.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},o.prototype.getTooltip=function(t){return this._tooltip},o.prototype.getDatatip=function(t){return this._datatip},o.prototype.getDatatipColor=function(t){return this._item.color},o.prototype.isDragAvailable=function(t){return!0},o.prototype.getDragTransferable=function(t,e){return[this.getId()]},o.prototype.getDragFeedback=function(t,e){return this.getDisplayables()};var a=new Object;t.Obj.createSubclass(a,t.Obj),a._DEFAULT_LINE_WIDTH_WITH_MARKER=2,a._LINE_MARKER_SIZE_FACTOR=.6,a._DEFAULT_SYMBOL_SIZE=10,a._BUTTON_SIZE=12,a._FOCUS_GAP=2,a.render=function(e,i){var r=e.getOptions(),o=e.getCtx(),s=t.Agent.isRightToLeft(o);e.__setBounds(i),r.isLayout||a._renderBackground(e,i);var l=new t.SimpleScrollableContainer(o,i.w,i.h),u=new t.Container(o);l.getScrollingPane().addChild(u),e.addChild(l),e.container=l;var h=n.getGapSize(e,r.layout.outerGapWidth),c=n.getGapSize(e,r.layout.outerGapHeight);if(i.x+=h,i.y+=c,i.w-=2*h,i.h-=2*c,i.w<=0||i.h<=0)return new t.Dimension(0,0);var d=a._renderContents(e,u,new t.Rectangle(i.x,i.y,i.w,i.h));if(0==d.w||0==d.h)return new t.Dimension(0,0);l.prepareContentPane(),d.h>i.h?(d.h=i.h,r._isScrollingLegend=!0):r._isScrollingLegend=!1;var p=0,g=0,f=null!=r.hAlign?r.hAlign:r.halign;"center"==f?p=i.x-d.x+(i.w-d.w)/2:"end"==f&&(p=s?i.x-d.x:i.x-d.x+i.w-d.w);var _=null!=r.vAlign?r.vAlign:r.valign;"middle"==_?g=i.y-d.y+(i.h-d.h)/2:"bottom"==_&&(g=i.y-d.y+i.h-d.h);var m=new t.Rectangle(d.x+p-h,d.y+g-c,d.w+2*h,d.h+2*c);if(r.isLayout)return m;(p||g)&&u.setTranslate(p,g);for(var v=e.__getTitles(),y=0;y<v.length;y++)t.LayoutUtils.align(d,v[y].halign,v[y].text,v[y].text.measureDimensions().w);return m},a._renderContents=function(t,e,i){var r=t.getOptions();i=i.clone();var o=a._renderTitle(t,e,r.title,i,null,!0);if(o){var s=o.measureDimensions(),l=n.getGapSize(t,r.layout.titleGapHeight);i.y+=s.h+l,i.h-=Math.floor(s.h+l)}var u=a._renderSections(t,e,r.sections,i,[]);return o?s.getUnion(u):u},a._renderBackground=function(e,n){var i=e.getOptions(),r=i.backgroundColor,o=i.borderColor,a=i.dnd?i.dnd.drop.legend:{};if(r||o||Object.keys(a).length>0){var s=new t.Rect(e.getCtx(),n.x,n.y,n.w,n.h);r?s.setSolidFill(r):s.setInvisibleFill(),o&&(s.setSolidStroke(o),s.setPixelHinting(!0)),e.addChild(s),e.getCache().putToCache("background",s)}},a._renderTitle=function(e,n,i,r,o,a,s,l){var u=e.getOptions(),h=n.getCtx(),c=t.Agent.isRightToLeft(h);if(!i)return null;var d=new t.OutputText(h,i,r.x,r.y),p=u.titleStyle;if(o&&o.titleStyle?p=new t.CSSStyle(o.titleStyle):o&&u._sectionTitleStyle&&(p=u._sectionTitleStyle),d.setCSSStyle(p),t.TextUtils.fitText(d,r.w,1/0,n)){if(c&&d.setX(r.x+r.w-d.measureDimensions().w),u.isLayout)n.removeChild(d);else{var g={id:s,button:l};if(g.isCollapsible=o&&("on"==o.collapsible||1==o.collapsible),e.getEventManager().associate(d,new t.SimpleObjPeer(d.getUntruncatedTextString(),null,null,g)),a){var f=o&&o.titleHalign?o.titleHalign:u.titleHalign;e.__registerTitle({text:d,halign:f})}}return d}return null},a._renderSections=function(e,i,r,o,s){var l=e.getOptions();null==l.symbolWidth&&null==l.symbolHeight?(l.symbolWidth=a._DEFAULT_SYMBOL_SIZE,l.symbolHeight=a._DEFAULT_SYMBOL_SIZE):(null==l.symbolWidth?l.symbolWidth=l.symbolHeight:null==l.symbolHeight&&(l.symbolHeight=l.symbolWidth),l.symbolWidth=parseInt(l.symbolWidth),l.symbolHeight=parseInt(l.symbolHeight));for(var u,h=n.getGapSize(e,l.layout.sectionGapHeight),c=n.getGapSize(e,l.layout.titleGapHeight),d=n.getGapSize(e,l.layout.sectionGapWidth),p=a._getRowHeight(e),g="vertical"!=l.orientation,f=null,_=o.clone(),m=0;m<r.length;m++){var v=s.concat([m]),y="off"==r[m].expanded||0==r[m].expanded?c:h;g?(u=a._renderHorizontalSection(e,i,r[m],_,p),u.w>_.w?(_.w<o.w&&(o.y+=u.h+y,o.h-=u.h+y),u=u.w<=o.w?a._renderHorizontalSection(e,i,r[m],o,p):a._renderVerticalSection(e,i,r[m],o,p,v,!0),o.y+=u.h+y,o.h-=u.h+y,_=o.clone()):(_.w-=u.w+d,t.Agent.isRightToLeft(e.getCtx())||(_.x+=u.w+d))):(u=a._renderVerticalSection(e,i,r[m],o,p,v,!1),o.y+=u.h+y,o.h-=u.h+y),f=f?f.getUnion(u):u}return f},a._createButton=function(e,n,i,r,s,l,u,h,c,d,p){var g=a._createButtonImage(e,r,s+"Enabled",l,u),f=a._createButtonImage(e,r,s+"Over",l,u),_=a._createButtonImage(e,r,s+"Down",l,u),m=new t.Button(e,g,f,_,null,c,d,p),v=o.associate([m],n,i,h,null,!1);return m.setAriaRole("button"),v.updateAriaLabel(),m},a._createButtonImage=function(e,n,i,r,o){var s=t.Agent.isRightToLeft(e)?"RTL":"",l=n[i+s]?n[i+s]:n[i],u=new t.Image(e,l,r,o,a._BUTTON_SIZE,a._BUTTON_SIZE);return u.setInvisibleFill(),u},a._renderVerticalSection=function(e,i,r,o,s,l,u){if(r){var h=e.getOptions(),c=n.getGapSize(e,h.layout.symbolGapWidth),d=n.getGapSize(e,h.layout.rowGap),p=n.getGapSize(e,h.layout.columnGap),g=e.getCtx(),f=t.Agent.isRightToLeft(g),_=o.clone();"off"!=h.scrolling&&(_.h=1/0);var m,v,y="on"==r.collapsible||1==r.collapsible;if(y){var S=f?_.x+_.w-a._BUTTON_SIZE:_.x;if(!h.isLayout){var C="off"==r.expanded||0==r.expanded,b=C?"closed":"open",E=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,C?"EXPAND":"COLLAPSE",null),T=e.getEventManager();v=a._createButton(g,e,r,h._resources,b,S,_.y,E,l,T.onCollapseButtonClick,T),i.addChild(v)}m=new t.Rectangle(S,_.y,a._BUTTON_SIZE,a._BUTTON_SIZE);var A=n.getGapSize(e,h.layout.symbolGapWidth);f||(_.x+=a._BUTTON_SIZE+A),_.w-=a._BUTTON_SIZE+A}var x=a._renderTitle(e,i,r.title,_,r,!y&&l.length<=1,l,v),I=x?x.measureDimensions():new t.Rectangle(f?_.x+_.w:_.x,_.y,0,0),O=m?I.getUnion(m):I;if(!r.items&&!r.sections||"off"==r.expanded||0==r.expanded)return O;if(O.h>0){var M=n.getGapSize(e,h.layout.titleGapHeight);_.y+=O.h+M,_.h-=O.h+M}if(r.sections){var D=a._renderSections(e,i,r.sections,_,l);O=O.getUnion(D)}if(!r.items)return O;var P=a._calcColumns(e,_,s,r.items,u),w=P.numCols,R=P.numRows,L=P.width,N=_.y;if(0==R||0==w)return O;var k=R*(s+d)-d,U=Math.min(w*(L+p)-p,_.w),B=new t.Rectangle(f?_.x+_.w-U:_.x,_.y,U,k);if(O=O.getUnion(B),h.isLayout)return O;for(var F=L-h.symbolWidth-c,H=0,j=1,G=r.items.length,V=0;V<G;V++){var Y=r.items[V];if(a._createLegendItem(e,i,Y,_,F,s,V),_.y+=s+d,H++,H===R&&j!==w&&(_.y=N,_.w-=L+p,f||(_.x+=L+p),H=0,j++),H===R)break}return O}},a._renderHorizontalSection=function(e,i,r,o,s){if(r){var l=e.getOptions(),u=l.symbolWidth,h=n.getGapSize(e,l.layout.symbolGapWidth),c=n.getGapSize(e,l.layout.columnGap),d=n.getGapSize(e,l.layout.titleGapWidth),p=r.items.length,g=t.Agent.isRightToLeft(e.getCtx()),f=o.clone(),_=a._renderTitle(e,i,r.title,o,r,!1),m=_?_.measureDimensions():new t.Rectangle(g?o.x+o.w:o.x,o.y,0,0);if(!r.items)return m;m.w>0&&(f.w-=m.w+d,g||(f.x+=m.w+d));var v,y,S,C=[],b=o.w-f.w;for(S=0;S<p;S++)v=r.items[S],y=Math.ceil(t.TextUtils.getTextStringWidth(e.getCtx(),v.text,l.textStyle)),b+=y+u+h+c,C.push(y);p>0&&(b-=c);var E=new t.Rectangle(g?o.x+o.w-b:o.x,o.y,b,Math.max(s,m.h));if(l.isLayout||b>o.w)return i.removeChild(_),E;var T;for(S=0;S<p;S++)v=r.items[S],a._createLegendItem(e,i,v,f,C[S],s,S),T=C[S]+u+h,f.w-=T+c,g||(f.x+=T+c);return E}},a._calcColumns=function(e,i,r,o,a){for(var s=e.getOptions(),l=t.Legend.getItemCount(e)>100,u=0,h=0;h<o.length;h++){var c,d=o[h];if(l){var p=new t.OutputText(e.getCtx(),d.text);p.setCSSStyle(s.textStyle),c=t.TextUtils.guessTextDimensions(p).w}else c=t.TextUtils.getTextStringWidth(e.getCtx(),d.text,s.textStyle);c>u&&(u=c)}var g,f,_,m=s.symbolWidth,v=n.getGapSize(e,s.layout.symbolGapWidth),y=n.getGapSize(e,s.layout.rowGap),S=n.getGapSize(e,s.layout.columnGap),C=Math.ceil(m+v+u);a?(_=Math.min(Math.floor((i.w+S)/(C+S)),o.length),g=Math.min(Math.floor((i.h+y)/(r+y)),Math.ceil(o.length/_)),_=Math.ceil(o.length/g),g=Math.ceil(o.length/_)):i.h==1/0?(_=1,g=o.length):(g=Math.min(Math.floor((i.h+y)/(r+y)),o.length),_=Math.ceil(o.length/g),g=Math.ceil(o.length/_));var b=(i.w-S*(_-1))/_;return f=Math.min(C,b),f<m?{width:0,numCols:0,numRows:0}:{width:f,numCols:_,numRows:g}},a._getRowHeight=function(e){var i=e.getOptions(),r=new t.OutputText(e.getCtx(),"Test");r.setCSSStyle(i.textStyle),r.alignMiddle();var o=t.TextUtils.guessTextDimensions(r).h,a=i.symbolHeight+n.getGapSize(e,i.layout.symbolGapHeight);return Math.ceil(Math.max(o,a))},a._createLegendItem=function(e,i,r,s,l,u,h){var c,d=e.getOptions(),p=e.getCtx(),g=t.Agent.isRightToLeft(p),f=d.symbolWidth,_=n.getGapSize(e,d.layout.symbolGapWidth),m=g?s.x+s.w-f:s.x,v=g?s.x+s.w-f-_:s.x+f+_,y=a._createLegendSymbol(e,m,s.y,u,r,h),S=r.text;if(S){var C=d.textStyle;c=a._createLegendText(i,l,S,C),c&&(c.setX(v),t.TextUtils.centerTextVertically(c,s.y+u/2),g&&c.alignRight())}i.addChild(y);var b=new t.Rect(p,g?v-l-a._FOCUS_GAP:m-a._FOCUS_GAP,s.y-a._FOCUS_GAP,f+_+l+2*a._FOCUS_GAP,u+2*a._FOCUS_GAP);b.setInvisibleFill();var E=d.hideAndShowBehavior;"none"!=E&&"off"!=E&&b.setCursor("pointer"),i.addChild(b);var T=[b,y];null!=c&&T.push(c);var A=o.associate(T,e,r,null!=c?c.getUntruncatedTextString():null,r.shortDesc,a._isItemDrillable(e,r));a.isCategoryHidden(a.getItemCategory(r),e)&&(y.setHollow(A.getColor()),y.setStyle().setClassName()),("none"!=E&&"off"!=E||null!=r.shortDesc)&&(b.setAriaRole("img"),A.updateAriaLabel())},a._isItemDrillable=function(t,e){return"on"==e.drilling||"off"!=e.drilling&&"on"==t.getOptions().drilling},a._createLegendText=function(e,n,i,r){var o=new t.OutputText(e.getCtx(),i);return o.setCSSStyle(r),o=t.TextUtils.fitText(o,n,1/0,e)?o:null},a._createLegendSymbol=function(e,n,i,r,o,s){var l=e.getOptions(),u=e.getCtx(),h=null!=o.type?o.type:o.symbolType;o.markerShape||(o.markerShape=l._markerShape),o.color||(o.color=l._color),o.lineWidth||(o.lineWidth="lineWithMarker"==h?a._DEFAULT_LINE_WIDTH_WITH_MARKER:l._lineWidth);var c,d=l.symbolWidth,p=l.symbolHeight,g=i+r/2,f=n+d/2;if("line"==h)c=a._createLine(u,n,i,d,r,o);else if("lineWithMarker"==h)c=a._createLine(u,n,i,d,r,o),a.isCategoryHidden(a.getItemCategory(o),e)||c.addChild(a._createMarker(e,f,g,d*a._LINE_MARKER_SIZE_FACTOR,p*a._LINE_MARKER_SIZE_FACTOR,o));else if("image"==h)c=a._createImage(e,n,i,d,p,r,o);else if("_verticalBoxPlot"==h)p=Math.max(4*Math.round(p/4),4),c=new t.Container(u),c.addChild(a._createMarker(e,f,g+p/4,d,p/2,a._getBoxPlotOptions(o,"q2"))),c.addChild(a._createMarker(e,f,g-p/4,d,p/2,a._getBoxPlotOptions(o,"q3")));else if("_horizontalBoxPlot"==h){var _=t.Agent.isRightToLeft(u);d=Math.max(4*Math.round(d/4),4);var m=d/4*(_?1:-1);c=new t.Container(u),c.addChild(a._createMarker(e,f+m,g,d/2,p,a._getBoxPlotOptions(o,"q2"))),c.addChild(a._createMarker(e,f-m,g,d/2,p,a._getBoxPlotOptions(o,"q3")))}else c=a._createMarker(e,f,g,d,p,o);return c},a._createImage=function(e,n,i,r,o,a,s){var l=e.getCtx(),u=i+a/2,h=n+r/2;return new t.ImageMarker(l,h,u,r,o,null,s.source)},a._createMarker=function(e,n,i,r,o,a){var s,l=e.getCtx(),u=e.getOptions(),h=a.markerShape,c=a.markerColor?a.markerColor:a.color,d=a.markerStyle?a.markerStyle:a.style,p=a.markerClassName?a.markerClassName:a.className,g=a.pattern;if(g&&"none"!=g?(s=new t.SimpleMarker(l,h,u.skin,0,0,r,o,null,null,(!0)),s.setFill(new t.PatternFill(g,c,"#FFFFFF")),s.setTranslate(n,i)):(s=new t.SimpleMarker(l,h,u.skin,n,i,r,o,null,null,(!0)),s.setSolidFill(c)),a.borderColor){var f=a._borderWidth?a._borderWidth:1;s.setSolidStroke(a.borderColor,null,f)}return"square"!=h&&"rectangle"!=h||s.setPixelHinting(!0),s.setClassName(p).setStyle(d),s},a._createLine=function(e,n,i,r,o,a){var s=i+o/2,l=new t.Line(e,n,s,n+r,s),u=new t.SolidStroke(a.color,1,a.lineWidth),h=a.lineStyle;return"dashed"==h?u.setType(t.Stroke.convertTypeString(h),"4,2,4"):"dotted"==h&&u.setType(t.Stroke.convertTypeString(h),"2"),l.setClassName(a.className).setStyle(a.style),l.setStroke(u),l.setPixelHinting(!0),l},a._getBoxPlotOptions=function(t,e){return{markerShape:"rectangle",color:t._boxPlot[e+"Color"],pattern:t._boxPlot["_"+e+"Pattern"],className:t._boxPlot[e+"ClassName"],style:t._boxPlot[e+"Style"]}},a.getItemCategory=function(t){var e=null;return e=t.categories&&t.categories.length>0?t.categories[0]:t.id?t.id:t.text},a.isCategoryHidden=function(e,n){var i=n.getOptions().hiddenCategories;return!(!i||i.length<=0)&&t.ArrayUtils.getIndex(i,e)!==-1},t.exportProperty(t,"Legend",t.Legend),t.exportProperty(t.Legend,"newInstance",t.Legend.newInstance),t.exportProperty(t.Legend.prototype,"destroy",t.Legend.prototype.destroy),t.exportProperty(t.Legend.prototype,"getAutomation",t.Legend.prototype.getAutomation),t.exportProperty(t.Legend.prototype,"getPreferredSize",t.Legend.prototype.getPreferredSize),t.exportProperty(t.Legend.prototype,"highlight",t.Legend.prototype.highlight),t.exportProperty(t.Legend.prototype,"render",t.Legend.prototype.render),t.exportProperty(e.prototype,"getDomElementForSubId",e.prototype.getDomElementForSubId),t.exportProperty(e.prototype,"getItem",e.prototype.getItem),t.exportProperty(e.prototype,"getSection",e.prototype.getSection),t.exportProperty(e.prototype,"getTitle",e.prototype.getTitle)}(t),t}),define("ojs/internal-deps/dvt/DvtOverview",["./DvtToolkit"],function(t){return function(t){t.OverviewUtils=new Object,t.OverviewUtils.supportsTouch=function(){return t.Agent.isTouchDevice()},t.Obj.createSubclass(t.OverviewUtils,t.Obj),t.OverviewUtils.getDatePosition=function(t,e,n,i){var r=(n-t)*i,o=e-t;return 0==r||0==o?0:r/o},t.OverviewUtils.getPositionDate=function(t,e,n,i){var r=n*(e-t);return 0==r||0==i?t:r/i+t},t.Overview=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.Overview,t.Container),t.Overview.MIN_WINDOW_SIZE=10,t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE=40,t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE=20,t.Overview.HANDLE_PADDING_SIZE=20,t.Overview._DEFAULT_AXIS_LABEL_PADDING=5,t.Overview._DEFAULT_WINDOW_BORDER_WIDTH=1,t.Overview.prototype.Init=function(e,i,r){t.Overview.superclass.Init.call(this,e),this._callback=i,this._callbackObj=r,this.isFlashEnvironment()?this._lastChildIndex=7:this._lastChildIndex=6;var o=null!=this._callback||null!=this._callbackObj;o&&(this.EventManager=new n(this,e,i,r),this.EventManager.addListeners(this),t.OverviewUtils.supportsTouch()?(this.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.addEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.addEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.addEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.addEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this))),this._initPos=0},t.Overview.prototype.setViewportRange=function(t,e,n){null==n&&(n=this.Width);var i=this.getDatePosition(t),r=this.getDatePosition(e);if(!(i<this.getMinimumPosition()||r>this.getMaximumPosition())){var o=Math.max(r-i,this.getMinimumWindowSize());if(o>0&&i>=0&&r<=n){var a=this.getSlidingWindow();this.isHorizontalRTL()?this.setSlidingWindowPos(a,n-(i+o)):this.setSlidingWindowPos(a,i),this.setSlidingWindowSize(a,o),this.ScrollTimeAxis()}}},t.Overview.prototype.setInitialPosition=function(t){t>=this.getMinimumPosition()&&t<=this.getMaximumPosition()&&(this._initPos=t)},t.Overview.prototype.isFeatureOff=function(e){return null!=this._featuresOff&&t.ArrayUtils.getIndex(this._featuresOff,e)!=-1},t.Overview.prototype.isAnimationOnClick=function(){return!("off"===this._animationOnClick)},t.Overview.prototype.render=function(e,n,i){if(null==e){var r=this._start,o=this._end,a=this.getSlidingWindow(),s=this.getSlidingWindowPos(a);null!=a&&0!=s&&(this._renderStart=t.OverviewUtils.getPositionDate(r,o,s,this.Width)),this.removeChildren()}if(null!=n&&null!=i&&(this.Width=n,this.Height=i),e){var l=this.Parse(e);this._applyParsedProperties(l)}var u=null!=this._callback||null!=this._callbackObj;this.createBackground(n,i),u&&this.createSlidingWindow(n,i),this.updateTimeAxis(n,i),this.parseFilledTimeRanges(n,i),this.updateCurrentTime(n,i),this.parseDataXML(n,i),u&&(this.createBorderAroundSlidingWindow(n,i),this.isFlashEnvironment()&&(this._resizeArrow=this.createResizeArrow()),this.updateSlidingWindow(n,i)),null!=this._initialFocusTime&&(this._initPos=Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,this._initialFocusTime,this._width))),this._initPos>0&&this.longScrollToPos(this._initPos)},t.Overview.prototype.getParser=function(t){return new e(this)},t.Overview.prototype.Parse=function(t){var e=this.getParser(t);return e.parse(t)},t.Overview.prototype._applyParsedProperties=function(t){this._start=t.start,this._end=t.end,this._width=t.width,this._renderStart=t.renderStart,this._currentTime=t.currentTime,this._initialFocusTime=t.initialFocusTime,this._animationOnClick=t.animationOnClick,this._leftMargin=Math.max(0,t.leftMargin),this._rightMargin=Math.max(0,t.rightMargin),isNaN(this._leftMargin)&&(this._leftMargin=0),isNaN(this._rightMargin)&&(this._rightMargin=0),this._orientation=t.orientation,this._overviewPosition=t.overviewPosition,this._isRtl=t.isRtl,null!=t.featuresOff&&(this._featuresOff=t.featuresOff.split(" ")),null!=t.minimumWindowSize&&t.minimumWindowSize>0&&(this._minimumWindowSize=t.minimumWindowSize),this._borderStyles=t.borderStyles,this._timeAxisInfo=t.timeAxisInfo,null!=t.timeAxisInfo&&(this._ticks=this._timeAxisInfo.ticks),this._formattedTimeRanges=t.formattedTimeRanges,this._borderTopStyle=t.borderTopStyle,this._borderTopColor=t.borderTopColor,this._windowBackgroundColor=t.windowBackgroundColor,this._windowBackgroundAlpha=t.windowBackgroundAlpha,this._windowBorderTopStyle=t.windowBorderTopStyle,this._windowBorderRightStyle=t.windowBorderRightStyle,this._windowBorderBottomStyle=t.windowBorderBottomStyle,this._windowBorderLeftStyle=t.windowBorderLeftStyle,this._windowBorderTopColor=t.windowBorderTopColor,this._windowBorderRightColor=t.windowBorderRightColor,this._windowBorderBottomColor=t.windowBorderBottomColor,this._windowBorderLeftColor=t.windowBorderLeftColor,this._handleTextureColor=t.handleTextureColor,this._handleFillColor=t.handleFillColor,this._handleBackgroundImage=t.handleBackgroundImage,this._handleWidth=t.handleWidth,this._handleHeight=t.handleHeight,this._overviewBackgroundColor=t.overviewBackgroundColor,this._currentTimeIndicatorColor=t.currentTimeIndicatorColor,this._timeIndicatorColor=t.timeIndicatorColor,this._timeAxisBarColor=t.timeAxisBarColor,this._timeAxisBarOpacity=t.timeAxisBarOpacity,this._leftFilterPanelColor=t.leftFilterPanelColor,this._leftFilterPanelAlpha=t.leftFilterPanelAlpha,this._rightFilterPanelColor=t.rightFilterPanelColor,this._rightFilterPanelAlpha=t.rightFilterPanelAlpha},t.Overview.prototype.getDatePosition=function(e){return Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,e,this.getOverviewSize()))+this._leftMargin},t.Overview.prototype.getPositionDate=function(e){return t.OverviewUtils.getPositionDate(this._start,this._end,Math.max(0,e-this._leftMargin),this.getOverviewSize())},t.Overview.prototype.isRTL=function(){return"true"==this._isRtl},t.Overview.prototype.isHorizontalRTL=function(){return this.isRTL()&&!this.isVertical()},t.Overview.prototype.isVertical=function(){return"vertical"==this._orientation},t.Overview.prototype.isOverviewAbove=function(){return"above"==this._overviewPosition},t.Overview.prototype.setMargins=function(t,e){!isNaN(t)&&null!=t&&t>0&&(this._leftMargin=t),!isNaN(e)&&null!=e&&e>0&&(this._rightMargin=e)},t.Overview.prototype.getOverviewSize=function(){return this.isVertical()?this.Height-this._leftMargin-this._rightMargin:this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getMinimumPosition=function(){return this._leftMargin},t.Overview.prototype.getMaximumPosition=function(){return this.isVertical()?this.Height-this._rightMargin:this.Width-this._rightMargin},t.Overview.prototype.getMinimumWindowSize=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._start,this._end,this._start+this._minimumWindowSize,this.getOverviewSize()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getGrippySize=function(){return 10},t.Overview.prototype.getHandleStart=function(){return t.OverviewUtils.supportsTouch()?this.getHandleSize()/2:0},t.Overview.prototype.getHandleSize=function(){return t.OverviewUtils.supportsTouch()?30:10},t.Overview.prototype.isHandle=function(t){var e=t.getId();return"lh"==e||"rh"==e||"lhb"==e||"rhb"==e||"grpy"==e||"lbgrh"==e||"rbgrh"==e||null!=t.getParent()&&"grpy"==t.getParent().getId()},t.Overview.prototype.getTimeAxisWidth=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisWidth){var e=parseInt(this._timeAxisInfo.width,10);!isNaN(e)&&e<this.Width?this._timeAxisWidth=e:this._timeAxisWidth=t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE}return this._timeAxisWidth},t.Overview.prototype.getTimeAxisHeight=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisHeight){var e=parseInt(this._timeAxisInfo.height,10);!isNaN(e)&&e<this.Height?this._timeAxisHeight=e:this._timeAxisHeight=t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE}return this._timeAxisHeight},t.Overview.prototype.getPageX=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageX:null:e.pageX},t.Overview.prototype.getPageY=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageY:null:e.pageY},t.Overview.prototype.isLeftAndRightFilterRendered=function(){return!1},t.Overview.prototype.getSlidingWindow=function(){return this.getChildAt(1)},t.Overview.prototype.getLeftBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(3):null},t.Overview.prototype.getRightBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(4):null},t.Overview.prototype.getLeftBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(5):null},t.Overview.prototype.getRightBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(6):null},t.Overview.prototype.getLeftHandle=function(){var t=this._lastChildIndex;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightHandle=function(){var t=this._lastChildIndex-1;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getLeftTopBar=function(){var t=this._lastChildIndex-2;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightTopBar=function(){var t=this._lastChildIndex-3;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getBottomBar=function(){var t=this._lastChildIndex-4;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getTopBar=function(){var t=this._lastChildIndex-5;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.setLinePos=function(t,e,n){this.isVertical()?(e!=-1&&t.setY1(e),n!=-1&&t.setY2(n)):(e!=-1&&t.setX1(e),n!=-1&&t.setX2(n))},t.Overview.prototype.getLinePos1=function(t){return this.isVertical()?t.getY1():t.getX1()},t.Overview.prototype._findDrawable=function(t){var e=t.target;if(null!=e){var n=e.getId();if(null==n)return null;if("_border"==n.substr(n.length-7))return this.getChildAfter(e);if("tick"!=n.substr(0,4)&&"ltb"!=n&&"rtb"!=n&&"bb"!=n&&"tab"!=n)return e}return null},t.Overview.prototype.isMovable=function(t){return!("window"!=t.getId()&&"ftr"!=t.getId()&&"sta"!=t.getId()&&!this.isHandle(t))},t.Overview.prototype.isFlashEnvironment=function(){return window&&window.isFlashEnvironment},t.Overview.prototype.createBackground=function(e,n){var i=new t.Rect(this.getCtx(),0,0,e,n,"bg");return i.setSolidFill(this._overviewBackgroundColor),i.setPixelHinting(!0),this.addChild(i),i},t.Overview.prototype.createSlidingWindow=function(e,n){var i=this.isVertical();if(i)var r=new t.Rect(this.getCtx(),0,0,e,0,"window");else r=new t.Rect(this.getCtx(),0,0,0,n,"window");if(r.setSolidFill(this._windowBackgroundColor,this._windowBackgroundAlpha),r.setPixelHinting(!0),!this.isFeatureOff("zoom")){var o=this.getHandleSize(),a=this.getHandleStart(),s=this.getGrippySize();if(i){var l=(e-36)/2,u=t.PathUtils.moveTo(l,0)+t.PathUtils.quadTo(l+3,6,l+8,8)+t.PathUtils.lineTo(l+28,8)+t.PathUtils.quadTo(l+33,6,l+36,0);t.PathUtils.closePath();var h=t.PathUtils.moveTo(l,0)+t.PathUtils.quadTo(l+3,-6,l+8,-8)+t.PathUtils.lineTo(l+28,-8)+t.PathUtils.quadTo(l+33,-6,l+36,0);t.PathUtils.closePath();var c=new t.Rect(this.getCtx(),0,0,e,o,"lhb"),d=new t.Rect(this.getCtx(),0,0,e,o,"rhb"),p="row-resize";if(this._handleBackgroundImage)var g=this.createGrippyImage(e,s),f=this.createGrippyImage(e,s);else g=this.createGrippy(l),
f=this.createGrippy(l)}else{var _=(n-36)/2;u=t.PathUtils.moveTo(0,_)+t.PathUtils.quadTo(6,_+3,8,_+8)+t.PathUtils.lineTo(8,_+28)+t.PathUtils.quadTo(6,_+33,0,_+36),t.PathUtils.closePath(),h=t.PathUtils.moveTo(0,_)+t.PathUtils.quadTo(-6,_+3,-8,_+8)+t.PathUtils.lineTo(-8,_+28)+t.PathUtils.quadTo(-6,_+33,0,_+36),t.PathUtils.closePath(),c=new t.Rect(this.getCtx(),0-a,0,o,n,"lhb"),d=new t.Rect(this.getCtx(),a,0,o,n,"rhb"),p="col-resize",this._handleBackgroundImage?(g=this.createGrippyImage(s,n),f=this.createGrippyImage(s,n)):(g=this.createGrippy(_),f=this.createGrippy(_))}c.setSolidFill(this._windowBackgroundColor,0),d.setSolidFill(this._windowBackgroundColor,0),c.setPixelHinting(!0),d.setPixelHinting(!0);var m=new t.Path(this.getCtx(),u,"lh"),v=new t.Path(this.getCtx(),h,"rh");m.setSolidFill(this._handleFillColor),m.setSolidStroke(this._handleFillColor),v.setSolidFill(this._handleFillColor),v.setSolidStroke(this._handleFillColor),this._windowBackgroundColor==this._handleFillColor&&(m.setPixelHinting(!0),v.setPixelHinting(!0)),c.setCursor(p),d.setCursor(p),m.setCursor(p),v.setCursor(p),g.setCursor(p),f.setCursor(p),r.addChild(c),r.addChild(m),r.addChild(g),r.addChild(d),r.addChild(v),r.addChild(f)}if(r.setCursor("move"),this.addChild(r),i)if(this.isRTL())var y=new t.Line(this.getCtx(),this.getTimeAxisWidth(),0,this.getTimeAxisWidth(),n,"tab");else y=new t.Line(this.getCtx(),e-this.getTimeAxisWidth(),0,e-this.getTimeAxisWidth(),n,"tab");else y=this.isOverviewAbove()?new t.Line(this.getCtx(),0,this.getTimeAxisHeight(),e,this.getTimeAxisHeight(),"tab"):new t.Line(this.getCtx(),0,n-this.getTimeAxisHeight(),e,n-this.getTimeAxisHeight(),"tab");if(y.setSolidStroke(this._timeAxisBarColor,this._timeAxisBarOpacity),y.setPixelHinting(!0),this._timeAxisTopBar=y,this.addChild(y),this.isLeftAndRightFilterRendered()){if(i)var S=new t.Rect(this.getCtx(),0,0,e,0,"lbg"),C=new t.Rect(this.getCtx(),0,0,e,0,"rbg");else S=new t.Rect(this.getCtx(),0,0,0,n,"lbg"),C=new t.Rect(this.getCtx(),0,0,0,n,"rbg");if(S.setSolidFill(this._leftFilterPanelColor,this._leftFilterPanelAlpha),this.addChild(S),C.setSolidFill(this._rightFilterPanelColor,this._rightFilterPanelAlpha),this.addChild(C),t.OverviewUtils.supportsTouch()&&void 0!=a){var o=this.getHandleStart();if(i)var b=new t.Rect(this.getCtx(),0,0,e,a,"lbgrh"),E=new t.Rect(this.getCtx(),0,0,e,a,"rbgrh");else b=new t.Rect(this.getCtx(),0,0,a,n,"lbgrh"),E=new t.Rect(this.getCtx(),0,0,a,n,"rbgrh");b.setSolidFill(this._leftFilterPanelColor,0),this.addChild(b),E.setSolidFill(this._rightFilterPanelColor,0),this.addChild(E)}}},t.Overview.prototype.createGrippyImage=function(e,n){var i=(e-this._handleWidth)/2,r=(n-this._handleHeight)/2,o=new t.Image(this.getCtx(),this._handleBackgroundImage,i,r,this._handleWidth,this._handleHeight,"grpy");return o.setMouseEnabled(!1),o},t.Overview.prototype.createGrippy=function(e){var n=new t.Container(this.getCtx(),"grpy"),i=2,r=9,o=this._handleTextureColor;if(this.isVertical()){for(var a=8+e,s=3,l=0;l<r;l++){var u=new t.Line(this.getCtx(),a+l*i,s,a+l*i+1,s,"dot1"+l);u.setSolidStroke(o),n.addChild(u),s+=i,u=new t.Line(this.getCtx(),a+1+l*i,s,a+1+l*i+1,s,"dot2"+l),u.setSolidStroke(o),n.addChild(u),s+=i,u=new t.Line(this.getCtx(),a+l*i,s,a+l*i+1,s,"dot3"+l),u.setSolidStroke(o),n.addChild(u),s=3}u=new t.Line(this.getCtx(),a+r*i,s,a+r*i+1,s,"dot4"),u.setSolidStroke(o),n.addChild(u),s+=2*i,u=new t.Line(this.getCtx(),a+r*i,s,a+r*i+1,s,"dot5"),u.setSolidStroke(o),n.addChild(u)}else{for(a=3,s=8+e,l=0;l<r;l++)u=new t.Line(this.getCtx(),a,s+l*i,a,s+l*i+1,"dot1"+l),u.setSolidStroke(o),n.addChild(u),a+=i,u=new t.Line(this.getCtx(),a,s+1+l*i,a,s+1+l*i+1,"dot2"+l),u.setSolidStroke(o),n.addChild(u),a+=i,u=new t.Line(this.getCtx(),a,s+l*i,a,s+l*i+1,"dot3"+l),u.setSolidStroke(o),n.addChild(u),a=3;u=new t.Line(this.getCtx(),a,s+r*i,a,s+r*i+1,"dot4"),u.setSolidStroke(o),n.addChild(u),a+=2*i,u=new t.Line(this.getCtx(),a,s+r*i,a,s+r*i+1,"dot5"),u.setSolidStroke(o),n.addChild(u)}return n.setPixelHinting(!0),n},t.Overview.prototype.updateSlidingWindow=function(e,n){var i=this.isVertical(),r=this.getSlidingWindow(),o=this.getOverviewSize(),a=i?this.Height:this.Width,s=this._width,l=this._start,u=this._end,h=this._renderStart,c=t.OverviewUtils.getPositionDate(l,u,0,s),d=t.OverviewUtils.getPositionDate(l,u,a,s),p=this.getDatePosition(c),g=Math.min(a,this.getDatePosition(d)),f=this.getDatePosition(h),_=f,m=g-p;this.isHorizontalRTL()?this.setSlidingWindowPos(r,o-f-m):this.setSlidingWindowPos(r,_),this.setSlidingWindowSize(r,m),this.ScrollTimeAxis(),this._increment=this.calculateIncrement(o)},t.Overview.prototype.createBorderAroundSlidingWindow=function(e,n){var i=this.getSlidingWindow(),r=t.Overview._DEFAULT_WINDOW_BORDER_WIDTH/2;if(this.isVertical())var o=i.getY(),a=o+r,s=o+i.getHeight(),l=s-r,u=0,h=r,c=e,d=c-r,p=new t.Line(this.getCtx(),u,a,e,a,"lh"),g=new t.Line(this.getCtx(),u,l,e,l,"rh"),f=new t.Line(this.getCtx(),h,0,h,o,"ltb"),_=new t.Line(this.getCtx(),h,s,h,n,"rtb"),m=new t.Line(this.getCtx(),d,o,d,s,"bb"),v=new t.Line(this.getCtx(),h,o,h,s,"tb");else o=0,a=o+r,s=n,l=s-r,u=i.getX(),h=u+r,c=u+i.getWidth(),d=c-r,p=new t.Line(this.getCtx(),h,o,h,s,"lh"),g=new t.Line(this.getCtx(),d,o,d,s,"rh"),f=new t.Line(this.getCtx(),0,a,u+1,a,"ltb"),_=new t.Line(this.getCtx(),c-1,a,e,a,"rtb"),m=new t.Line(this.getCtx(),u,l,c,l,"bb"),v=new t.Line(this.getCtx(),u,a,c,a,"tb");p.setPixelHinting(!0),g.setPixelHinting(!0),f.setPixelHinting(!0),_.setPixelHinting(!0),m.setPixelHinting(!0),v.setPixelHinting(!0),"none"!=this._windowBorderLeftStyle&&p.setSolidStroke(this._windowBorderLeftColor),this.addChild(p),"none"!=this._windowBorderRightStyle&&g.setSolidStroke(this._windowBorderRightColor),this.addChild(g),"none"!=this._borderTopStyle&&this._borderTopColor&&(f.setSolidStroke(this._borderTopColor),_.setSolidStroke(this._borderTopColor)),this.addChild(f),this.addChild(_),"none"!=this._windowBorderBottomStyle&&m.setSolidStroke(this._windowBorderBottomColor),this.addChild(m),"none"!=this._windowBorderTopStyle&&v.setSolidStroke(this._windowBorderTopColor),this.addChild(v)},t.Overview.prototype.createResizeArrow=function(){if(this.isVertical())var e=t.PathUtils.moveTo(6,0)+t.PathUtils.lineTo(0,5)+t.PathUtils.lineTo(5,5)+t.PathUtils.lineTo(5,17)+t.PathUtils.lineTo(0,17)+t.PathUtils.lineTo(6,22)+t.PathUtils.lineTo(12,17)+t.PathUtils.lineTo(7,17)+t.PathUtils.lineTo(7,5)+t.PathUtils.lineTo(12,5)+t.PathUtils.closePath();else e=t.PathUtils.moveTo(5,0)+t.PathUtils.lineTo(0,6)+t.PathUtils.lineTo(5,12)+t.PathUtils.lineTo(5,7)+t.PathUtils.lineTo(17,7)+t.PathUtils.lineTo(17,12)+t.PathUtils.lineTo(22,6)+t.PathUtils.lineTo(17,0)+t.PathUtils.lineTo(17,4)+t.PathUtils.lineTo(5,4)+t.PathUtils.lineTo(5,0)+t.PathUtils.closePath();var n=new t.Path(this.getCtx(),e,"arr");return n.setSolidFill("#ffffff"),n.setSolidStroke("#000000"),n.setVisible(!1),this.addChild(n),n},t.Overview.prototype.setRectPos=function(t,e){this.isVertical()?t.setY(e):t.setX(e)},t.Overview.prototype.getRectPos=function(t){return this.isVertical()?t.getY():t.getX()},t.Overview.prototype.getRectSize=function(t){return this.isVertical()?t.getHeight():t.getWidth()},t.Overview.prototype.setRectSize=function(t,e){this.isVertical()?t.setHeight(e):t.setWidth(e)},t.Overview.prototype.getSlidingWindowPos=function(t){return this.isVertical()?t.getTranslateY():t.getTranslateX()},t.Overview.prototype.setSlidingWindowPos=function(e,n){if(n=Math.max(0,n),this.isVertical()?e.setTranslateY(n):e.setTranslateX(n),this.isLeftAndRightFilterRendered()){var i=this.getLeftBackground();i.setWidth(n);var r=n+this.getSlidingWindowSize(e),o=this.getRightBackground();if(o.setX(r),o.setWidth(Math.max(0,this.Width-r)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var a=this.getHandleStart(),s=this.getLeftBackgroundHandle();s.setX(n-a);var l=this.getRightBackgroundHandle();l.setX(r)}}},t.Overview.prototype.getSlidingWindowSize=function(t){return this.getRectSize(t)},t.Overview.prototype.setSlidingWindowSize=function(e,n){if(n=Math.max(this.getMinimumWindowSize(),n),n=Math.min(this.isVertical()?this.Height:this.Width,n),this.setRectSize(e,n),this.isLeftAndRightFilterRendered()){var i=this.getSlidingWindowPos(e)+n,r=this.getRightBackground();if(r.setX(i),r.setWidth(Math.max(0,this.Width-i)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var o=this.getRightBackgroundHandle();o.setX(i)}}if(!this.isFeatureOff("zoom")){var a=e.getChildAt(3),s=e.getChildAt(4),l=e.getChildAt(5);this.isVertical()?(s.setTranslateY(n),a.setTranslateY(n-this.getHandleSize()),l.setTranslateY(n-this.getGrippySize())):(s.setTranslateX(n),a.setTranslateX(n-this.getHandleSize()),l.setTranslateX(n-this.getGrippySize()))}},t.Overview.prototype.calculateIncrement=function(e){var n=this._width,i=this._start,r=this._end,o=t.OverviewUtils.getPositionDate(i,r,1,e),a=t.OverviewUtils.getPositionDate(i,r,2,e),s=t.OverviewUtils.getDatePosition(i,r,o,n),l=t.OverviewUtils.getDatePosition(i,r,a,n),u=l-s;return u},t.Overview.prototype.updateTimeAxis=function(e,n){if(null!=this._ticks)for(var i=this.isVertical(),r=this.getOverviewSize(),o=(this._start,this._end,0);o<this._ticks.length;o++){var a=this._ticks[o],s=parseInt(a.time,10),l=this.getDatePosition(s),u=a.label,h=0;if(o+1<this._ticks.length){var c=parseInt(this._ticks[o+1].time,10),d=this.getDatePosition(c);h=d-l}else h=r-l;this.isHorizontalRTL()&&(l=r-l),i&&(h=this.Width),h-=2*t.Overview._DEFAULT_AXIS_LABEL_PADDING,this.addTick(l,e,n,"tick"+o),this.addLabel(l,u,e,n,h,"label"+o)}},t.Overview.prototype.addTick=function(e,n,i,r){if(this.isVertical())var o=new t.Line(this.getCtx(),0,e,n,e,r);else o=new t.Line(this.getCtx(),e,0,e,i,r);var a=new t.SolidStroke(this._timeIndicatorColor);a.setStyle(t.Stroke.DASHED,3),o.setStroke(a),o.setPixelHinting(!0),this.addChild(o)},t.Overview.prototype.addLabel=function(e,n,i,r,o,a,s){if(s=s||new t.CSSStyle("font-weight:bold"),this.isVertical()){var l=new t.OutputText(this.getCtx(),n,4,e,a);if(l.setCSSStyle(s),this.isRTL()){this.addChild(l);var u=l.getDimensions();this.removeChild(l),l.setX(Math.max(4,this.Width-u.w-4))}}else{if(this.isOverviewAbove())var h=2;else h=r-this.getTimeAxisHeight()+2;var c=t.Overview._DEFAULT_AXIS_LABEL_PADDING;l=new t.OutputText(this.getCtx(),n,e+c,h,a),l.setCSSStyle(s),this.isHorizontalRTL()&&(this.addChild(l),u=l.getDimensions(),this.removeChild(l),l.setX(e-Math.min(u.w,o)-c))}t.TextUtils.fitText(l,o,1/0,this),l._rawText=l.getUntruncatedTextString()},t.Overview.prototype.updateCurrentTime=function(e,n){if(null!=this._currentTime&&!isNaN(this._currentTime)){var i=this.getDatePosition(this._currentTime);if(this.isVertical())var r=new t.Line(this.getCtx(),0,i,e,i,"ocd");else this.isRTL()&&(i=e-i),r=new t.Line(this.getCtx(),i,0,i,n,"ocd");r.setSolidStroke(this._currentTimeIndicatorColor),r.setPixelHinting(!0),this.addChild(r)}},t.Overview.prototype.parseFilledTimeRanges=function(t,e){if(null!=this._formattedTimeRanges)for(var n=this._start,i=this._end,r=0;r<this._formattedTimeRanges.length;r++){var o=this._formattedTimeRanges[r];this.addFilledTimeRange(o,n,i,t,e)}},t.Overview.prototype.addFilledTimeRange=function(e,n,i,r,o){var a=parseInt(e.rs,10),s=parseInt(e.re,10),l=e.c;if(null!=a&&null!=s){var u=this.getOverviewSize(),h=this.getDatePosition(a),c=this.getDatePosition(s),d=c-h;if(this.isHorizontalRTL()&&(h=u-h-d,c=u-c-d),this.isVertical())var p=new t.Rect(this.getCtx(),0,h,r-this.getTimeAxisWidth(),d,"ftr");else p=new t.Rect(this.getCtx(),h,this.isOverviewAbove()?this.getTimeAxisHeight():0,d,o-this.getTimeAxisHeight(),"ftr");null!=l&&p.setSolidFill(l,.4),p.setCursor("move"),p.setPixelHinting(!0),this.addChild(p)}},t.Overview.prototype.parseDataXML=function(t,e){},t.Overview.prototype.animateSlidingWindow=function(e,n){var i=this.getSlidingWindow(),r=i.getChildAt(3),o=i.getChildAt(4),a=i.getChildAt(5);if(void 0!=n||e!=this.getSlidingWindowPos(i)){var s=this.getLeftHandle(),l=this.getRightHandle(),u=this.getLeftTopBar(),h=this.getRightTopBar(),c=this.getBottomBar(),d=this.getTopBar();if(this.isVertical()){var p=i.getTranslateY,g=i.setTranslateY,f=i.getHeight,_=i.setHeight,m=s.getY1,v=s.setY1,y=s.getY2,S=s.setY2,C=l.getY1,b=l.setY1,E=l.getY2,T=l.setY2,A=u.getY2,x=u.setY2,I=h.getY1,O=h.setY1,M=c.getY1,D=c.setY1,P=c.getY2,w=c.setY2,R=d.getY1,L=d.setY1,N=d.getY2,k=d.setY2;if(null!=o&&null!=a)var U=o.getTranslateY,B=o.setTranslateY,F=a.getTranslateY,H=a.setTranslateY}else p=i.getTranslateX,g=i.setTranslateX,f=i.getWidth,_=i.setWidth,m=s.getX1,v=s.setX1,y=s.getX2,S=s.setX2,C=l.getX1,b=l.setX1,E=l.getX2,T=l.setX2,A=u.getX2,x=u.setX2,I=h.getX1,O=h.setX1,M=c.getX1,D=c.setX1,P=c.getX2,w=c.setX2,R=d.getX1,L=d.setX1,N=d.getX2,k=d.setX2,null!=o&&null!=a&&(U=o.getTranslateX,B=o.setTranslateX,F=a.getTranslateX,H=a.setTranslateX);var j=this.getMinimumPosition(),G=this.getMaximumPosition(),V=this.getSlidingWindowSize(i);e=void 0!=n?Math.max(j,Math.min(G-n,e)):Math.max(j,Math.min(G-V,e));var Y=this.isAnimationOnClick()?new t.Animator(this.getCtx(),.5,0,t.Easing.linear):null;if(this.animateProperty(Y,i,p,g,e),void 0!=n&&(this.animateProperty(Y,i,f,_,n),null!=o&&this.animateProperty(Y,o,U,B,n),null!=r&&this.animateProperty(Y,r,U,B,n-this.getHandleSize()),null!=a&&this.animateProperty(Y,a,F,H,n-this.getGrippySize())),this.animateProperty(Y,s,m,v,e),this.animateProperty(Y,s,y,S,e),void 0!=n?(this.animateProperty(Y,l,C,b,e+n),this.animateProperty(Y,l,E,T,e+n)):(this.animateProperty(Y,l,C,b,e+V),this.animateProperty(Y,l,E,T,e+V)),this.animateProperty(Y,u,A,x,e+1),void 0!=n?this.animateProperty(Y,h,I,O,e+n-1):this.animateProperty(Y,h,I,O,e+V-1),this.animateProperty(Y,c,M,D,e),this.animateProperty(Y,d,R,L,e),void 0!=n?(this.animateProperty(Y,c,P,w,e+n),this.animateProperty(Y,d,N,k,e+n)):(this.animateProperty(Y,c,P,w,e+V),this.animateProperty(Y,d,N,k,e+V)),this.isLeftAndRightFilterRendered()){var K=this.getLeftBackground(),W=K.getWidth,z=K.setWidth;this.animateProperty(Y,K,W,z,e);var X=e+V,q=this.getRightBackground(),Z=q.getWidth,$=q.setWidth,J=q.getX,Q=q.setX;if(this.isVertical())var tt=this.Height;else tt=this.Width;if(this.animateProperty(Y,q,Z,$,tt-X),this.animateProperty(Y,q,J,Q,X),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var et=this.getHandleStart(),nt=this.getLeftBackgroundHandle(),it=nt.getX,rt=nt.setX,ot=this.getRightBackgroundHandle(),at=ot.getX,st=ot.setX;this.animateProperty(Y,nt,it,rt,e-et),this.animateProperty(Y,ot,at,st,X)}}null!=Y&&Y.play()}},t.Overview.prototype.animateProperty=function(e,n,i,r,o){null!=e?e.addProp(t.Animator.TYPE_NUMBER,n,i,r,o):r.call(n,o)},t.Overview.prototype.HandleShapeMouseOver=function(e){var n=this._findDrawable(e);if(n&&"bg"!=n.getId()&&"ocd"!=n.getId()){if("label"==n.getId().substr(0,5)&&(n instanceof t.OutputText||n instanceof t.BackgroundOutputText))return void(n.isTruncated()&&this.getCtx().getTooltipManager().showDatatip(e.pageX,e.pageY,n._rawText,"#000000"));if(null!=this._resizeArrow&&this.isHandle(n)){var i=this.getCtx().pageToStageCoords(e.pageX,e.pageY);i=this.stageToLocal(i),this.isVertical()?this._resizeArrow.setTranslate(i.x+6,i.y-10):this._resizeArrow.setTranslate(i.x-6,i.y-20),this._resizeArrow.setVisible(!0)}return"window"==n.getId()||"ftr"==n.getId()||"arr"==n.getId()||this.isHandle(n)?void(this.isFlashEnvironment()&&this.setCursor("move")):n}},t.Overview.prototype.HandleShapeMouseOut=function(t){null==this._moveDrawable&&this.setCursor("default");var e=this._findDrawable(t);if(null!=e)return this.isHandle(e)&&null!=this._resizeArrow&&this._resizeArrow.setVisible(!1),e},t.Overview.prototype.HandleShapeClick=function(e,n,i){e.stopPropagation();var r=this._findDrawable(e);if(r&&"window"!=r.getId()&&!this.isHandle(r)){if("bg"==r.getId()||"label"==r.getId().substr(0,5)||"ocd"==r.getId()||"lbg"==r.getId()||"rbg"==r.getId()){void 0==n&&(n=e.pageX),void 0==i&&(i=e.pageY);var o=this.getCtx().pageToStageCoords(n,i);if(o=this.stageToLocal(o),this.isVertical())var a=o.y,s=this.Height;else a=o.x,s=this.Width;var l=this.getSlidingWindow(),u=a-this.getRectSize(l)/2;this.animateSlidingWindow(u),this.isHorizontalRTL()&&(a=this.Width-a);var h=this.getPositionDate(a),c=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_SCROLL_TIME);if(c.setTime(h),u=Math.max(0,Math.min(u,s-this.getRectSize(l))),this.isHorizontalRTL())var d=this.getPositionDate(this.Width-(u+this.getRectSize(l))),p=this.getPositionDate(this.Width-u);else d=this.getPositionDate(u),p=this.getPositionDate(u+this.getRectSize(l));return c.setNewStartTime(d),c.setNewEndTime(p),void this.dispatchEvent(c)}return r}},t.Overview.prototype.beginDragPan=function(e,n,i){var r=this._findDrawable(e);if(null!=r&&this.isMovable(r)){if("ftr"!=r.getId()&&"sta"!=r.getId()||(r=this.getSlidingWindow()),this._initX=n,this._initY=i,this.isHandle(r)){var o=this.getSlidingWindow();this.isHorizontalRTL()?(this._oldEndPos=this.Width-o.getX(),this._oldStartPos=this._oldEndPos-o.getWidth()):(this._oldStartPos=o.getX(),this._oldEndPos=this._oldStartPos+o.getWidth()),"grpy"==r.getParent().getId()&&(r=r.getParent());var a=r.getId();"grpy"==a&&(r=o.getChildBefore(r),a=r.getId()),"lh"!=a&&"rh"!=a||(r=o.getChildBefore(r),a=r.getId()),"lbgrh"==a&&(r=o.getChildAt(0)),"rbgrh"==a&&(r=o.getChildAt(o.getNumChildren()-3)),t.OverviewUtils.supportsTouch()||(this.isVertical()?(r.setY(0-t.Overview.HANDLE_PADDING_SIZE),r.setHeight(2*(r.getHeight()+t.Overview.HANDLE_PADDING_SIZE))):(r.setX(0-t.Overview.HANDLE_PADDING_SIZE),r.setWidth(2*(r.getWidth()+t.Overview.HANDLE_PADDING_SIZE)))),this.overrideCursors(r.getCursor())}this._moveDrawable=r;var s=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE);return this.dispatchEvent(s),!0}return!1},t.Overview.prototype.overrideCursors=function(t){var e=this.getSlidingWindow();if(null!=e&&e.setCursor(t),this.isLeftAndRightFilterRendered()){var n=this.getLeftBackground(),i=this.getRightBackground();null!=n&&null!=i&&(n.setCursor(t),i.setCursor(t))}},t.Overview.prototype.resetCursors=function(){var t=this.getSlidingWindow();if(null!=t&&t.setCursor("move"),this.isLeftAndRightFilterRendered()){var e=this.getLeftBackground(),n=this.getRightBackground();null!=e&&null!=n&&(e.setCursor("default"),n.setCursor("default"))}},t.Overview.prototype.endDragPan=function(){null!=this._moveDrawable&&1==this._isDragPanning&&("window"==this._moveDrawable.getId()?this.finishWindowDrag(0,0):this.isHandle(this._moveDrawable)&&(this.finishHandleDrag(0,0),t.OverviewUtils.supportsTouch()||(this.isVertical()?(this._moveDrawable.setY(0),this._moveDrawable.setHeight(this.getHandleSize())):(this._moveDrawable.setX(0),this._moveDrawable.setWidth(this.getHandleSize()))),this.resetCursors()),this._isDragPanning=!1,this._moveDrawable=null,this._initX=-1)},t.Overview.prototype.contDragPan=function(t,e,n){if(null!=this._moveDrawable&&this._initX!=-1){this._isDragPanning=!0;var i=e-this._initX,r=n-this._initY;this._initX=e,this._initY=n,"window"==this._moveDrawable.getId()?this.handleWindowDragPositioning(t,i,r):"lh"==this._moveDrawable.getId()||"lhb"==this._moveDrawable.getId()?this.handleLeftHandleDragPositioning(t,i,r):"rh"!=this._moveDrawable.getId()&&"rhb"!=this._moveDrawable.getId()||this.handleRightHandleDragPositioning(t,i,r)}},t.Overview.prototype.HandleTouchStart=function(t){var e=t.touches;this._touchStartX=e[0].pageX,this._touchStartY=e[0].pageY,2==e.length&&(t.preventDefault(),this._touchStartX2=e[1].pageX,this._touchStartY2=e[1].pageY,Math.abs(this._touchStartY-this._touchStartY2)<20?this._counter=0:(this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null))},t.Overview.prototype.HandleTouchMove=function(t){t.preventDefault();var e=t.touches;if(null!=this._touchStartX2&&null!=this._touchStartY2){if(this._counter<50)return void this._counter++;var n=e[1].pageX-this._touchStartX2;this.handleRightHandleDragPositioning(null,n,0),this._touchStartX2=e[1].pageX,this._counter=0}else{var i=Math.abs(this._touchStartX-e[0].pageX),r=Math.abs(this._touchStartY-e[0].pageY);(i>3||r>3)&&(this._touchStartX=null,this._touchStartY=null)}},t.Overview.prototype.HandleTouchEnd=function(t){null!=this._touchStartX2&&null!=this._touchStartY2?this.finishHandleDrag(0,0):null!=this._touchStartX&&null!=this._touchStartY&&this.HandleShapeClick(t,this._touchStartX,this._touchStartY),this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null},t.Overview.prototype.stopDragAction=function(){this.endDragPan()},t.Overview.prototype.HandleKeyDown=function(e){var n=e.keyCode;if(n===t.KeyboardEvent.LEFT_ARROW||n===t.KeyboardEvent.RIGHT_ARROW){var i=e.shiftKey?this.handleRightHandleDragPositioning:this.handleWindowDragPositioning,r=n===t.KeyboardEvent.LEFT_ARROW?-1:1;i.call(this,e,r,r)}},t.Overview.prototype.HandleKeyUp=function(e){var n=e.keyCode;if(n===t.KeyboardEvent.LEFT_ARROW||n===t.KeyboardEvent.RIGHT_ARROW){var i=e.shiftKey?this.finishHandleDrag:this.finishWindowDrag,r=n===t.KeyboardEvent.LEFT_ARROW?-1:1;i.call(this,r,r)}},t.Overview.prototype.ScrollToStart=function(){var t=this.getSlidingWindow(),e=this.Width;this.isHorizontalRTL()?this.setSlidingWindowPos(t,e-this.getSlidingWindowSize(t)):this.setSlidingWindowPos(t,0),this.ScrollTimeAxis()},t.Overview.prototype.ScrollToEnd=function(){var t=this.getSlidingWindow(),e=this.Width;this.isHorizontalRTL()?this.setSlidingWindowPos(t,0):this.setSlidingWindowPos(t,e-this.getSlidingWindowSize(t)),this.ScrollTimeAxis()},t.Overview.prototype.ScrollByAmount=function(t){var e=this.getSlidingWindow(),n=t/this._increment;if(this.isVertical())var i=this.Height-e.getHeight();else i=this.Width-e.getWidth(),this.isRTL()&&(n=0-n);this.setSlidingWindowPos(e,Math.min(i,this.getSlidingWindowPos(e)+n)),this.ScrollTimeAxis()},t.Overview.prototype.longScrollToPos=function(t){var e=t/this._increment;this.isHorizontalRTL()&&(e=0-e),this.animateSlidingWindow(e)},t.Overview.prototype.ScrollToPos=function(t){var e=this.getSlidingWindow(),n=t/this._increment;this.isHorizontalRTL()&&(n=0-n),this.setSlidingWindowPos(e,n),this.ScrollTimeAxis()},t.Overview.prototype.scrollToTime=function(e){var n=Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,e,this._width));this.longScrollToPos(n)},t.Overview.prototype.handleWindowDragPositioning=function(e,n,i){this.fireScrollEvent(t.OverviewEvent.SUBTYPE_SCROLL_POS,n,i)},t.Overview.prototype.finishWindowDrag=function(e,n){this.fireScrollEvent(t.OverviewEvent.SUBTYPE_SCROLL_END,e,n)},t.Overview.prototype.fireScrollEvent=function(e,n,i){var r=this.getSlidingWindow(),o=this.getSlidingWindowPos(r),a=this.getRectSize(r),s=this.getMinimumPosition(),l=this.getMaximumPosition();if(this.isVertical())var u=i;else u=n;if(o+u<=s)if(this.setSlidingWindowPos(r,s),this.isHorizontalRTL())var h=t.OverviewEvent.END_POS;else h=t.OverviewEvent.START_POS;else o+a+u>=l?(this.setSlidingWindowPos(r,l-a),h=this.isHorizontalRTL()?t.OverviewEvent.START_POS:t.OverviewEvent.END_POS):(this.setSlidingWindowPos(r,o+u),h=this.isHorizontalRTL()?(l-a-o-this._leftMargin)*this._increment:(o-this._leftMargin)*this._increment);this.ScrollTimeAxis();var c=new t.OverviewEvent(e);if(c.setPosition(h),this.isHorizontalRTL())var d=this.getPositionDate(this.Width-(o+this.getRectSize(r))),p=this.getPositionDate(this.Width-o);else d=this.getPositionDate(o),p=this.getPositionDate(o+this.getRectSize(r));c.setNewStartTime(d),c.setNewEndTime(p),this.dispatchEvent(c)},t.Overview.prototype.handleLeftHandleDragPositioning=function(t,e,n){this.handleLeftOrRightHandleDragPositioning(t,e,n,!0)},t.Overview.prototype.handleRightHandleDragPositioning=function(t,e,n){this.handleLeftOrRightHandleDragPositioning(t,e,n,!1)},t.Overview.prototype.handleLeftOrRightHandleDragPositioning=function(e,n,i,r){var o=this.getOverviewSize();if(this.isVertical())var a=i;else a=n;if(0!=a){var s=this.getSlidingWindow(),l=this.getSlidingWindowPos(s),u=this.getSlidingWindowSize(s);if(r){if(u-a<=this.getMinimumWindowSize())return;if(l+a<=this.getMinimumPosition())return;if(this.isVertical())var h=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y;else h=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x;if(h=this.stageToLocal(h),a>0&&h<=l)return;if(a<0&&h>=l)return;this.setSlidingWindowPos(s,l+a),this.setSlidingWindowSize(s,u-a)}else{if(u+a<=this.getMinimumWindowSize())return;if(l+u+a>=this.getMaximumPosition())return;if(h=this.isVertical()?this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y:this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x,h=this.stageToLocal(h),a>0&&h<=l+u)return;if(a<0&&h>=l+u)return;this.setSlidingWindowSize(s,u+a)}this.ScrollTimeAxis();var c=this.getPositionDate(this.getSlidingWindowSize(s)),d=o*(this._end-this._start)/(c-this._start);if(this.isRangeChangingSupported()){var p=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGING);if(p.setNewSize(d),p.setEndHandle(this.isHorizontalRTL()?r:!r),r?p.setExpand(a<0):p.setExpand(a>0),this.isHorizontalRTL())var g=this.getPositionDate(this.Width-(this.getSlidingWindowPos(s)+this.getRectSize(s))),f=this.getPositionDate(this.Width-this.getSlidingWindowPos(s));else g=this.getPositionDate(this.getSlidingWindowPos(s)),f=this.getPositionDate(this.getSlidingWindowPos(s)+this.getRectSize(s));p.setNewStartTime(g),p.setNewEndTime(f),this.dispatchEvent(p)}}},t.Overview.prototype.isRangeChangingSupported=function(){return!0},t.Overview.prototype.finishHandleDrag=function(e,n){var i=this._start,r=this._end,o=this._width,a=this.getOverviewSize(),s=this.getSlidingWindow(),l=this.getPositionDate(this.getRectSize(s)),u=a*(r-i)/(l-i),h=this.getPositionDate(this._oldStartPos),c=this.getPositionDate(this._oldEndPos);if(this.isHorizontalRTL())var d=this.getPositionDate(this.Width-(this.getSlidingWindowPos(s)+this.getRectSize(s))),p=this.getPositionDate(this.Width-this.getSlidingWindowPos(s));else d=this.getPositionDate(this.getSlidingWindowPos(s)),p=this.getPositionDate(this.getSlidingWindowPos(s)+this.getRectSize(s));var g=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGE);g.setOldSize(o),g.setNewSize(u),g.setOldStartTime(h),g.setOldEndTime(c),g.setNewStartTime(d),g.setNewEndTime(p),this.dispatchEvent(g)},t.Overview.prototype.ScrollTimeAxis=function(){var e=this.getSlidingWindow(),n=t.Overview._DEFAULT_WINDOW_BORDER_WIDTH/2,i=this.getSlidingWindowPos(e),r=i+n,o=i+this.getSlidingWindowSize(e),a=o-n,s=this.getLeftHandle(),l=this.getRightHandle(),u=this.getLeftTopBar(),h=this.getRightTopBar(),c=this.getBottomBar(),d=this.getTopBar();this.setLinePos(s,r,r),this.setLinePos(l,a,a),this.setLinePos(u,-1,i),this.setLinePos(h,this.getLinePos1(l),-1),this.setLinePos(c,this.getLinePos1(s),this.getLinePos1(l)),this.setLinePos(d,this.getLinePos1(s),this.getLinePos1(l))},t.Overview.prototype.dispatchEvent=function(e){t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)},t.Overview.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),t.OverviewUtils.supportsTouch()?(this.removeEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this)),t.Overview.superclass.destroy.call(this)};var e=function(t){this.Init(t)};t.Obj.createSubclass(e,t.Obj),e.prototype.Init=function(t){this._view=t},e.prototype.parse=function(t){var e=t,n=this.ParseRootAttributes(e);return n},e.prototype.ParseRootAttributes=function(e){var n=new Object;if(n.animationOnClick=e.animationOnClick,null!=e.startTime&&(n.start=e.startTime),null!=e.endTime&&(n.end=e.endTime),null==n.start&&(n.start=(new Date).getTime()),(null==n.end||n.end<=n.start)&&(n.end=n.start+864e5),null!=e.currentTime&&(n.currentTime=e.currentTime),null!=e.initialFocusTime&&(n.initialFocusTime=e.initialFocusTime),n.orientation="horizontal",null!=e.orientation&&(n.orientation=e.orientation),n.featuresOff=e.featuresOff,n.minimumWindowSize=e.minimumWindowSize,n.leftMargin=e.leftMargin,n.rightMargin=e.rightMargin,null!=e.viewportEndTime){var i=e.viewportEndTime,r=n.start;null!=e.viewportStartTime&&e.viewportStartTime<i&&(r=e.viewportStartTime),null!=e.viewportEndPos?n.width=this.calculateWidth(n.start,n.end,r,i,e.viewportEndPos):n.width=this.calculateWidth(n.start,n.end,r,i,this._view.Width),n.renderStart=r}else n.renderStart=n.start;return 0==n.width&&(n.width=1e3),n.overviewPosition="below",n.selectionMode="none",n.isRtl=t.Agent.isRightToLeft(this._view.getCtx()).toString(),null!=e.rtl&&(n.isRtl=e.rtl.toString()),n.handleFillColor="#FFFFFF",n.handleTextureColor="#B3C6DB",n.windowBackgroundColor="#FFFFFF",n.windowBackgroundAlpha=1,n.windowBorderTopStyle="solid",n.windowBorderRightStyle="solid",n.windowBorderBottomStyle="solid",n.windowBorderLeftStyle="solid",n.windowBorderTopColor="#4F4F4F",n.windowBorderRightColor="#4F4F4F",n.windowBorderBottomColor="#4F4F4F",n.windowBorderLeftColor="#4F4F4F",n.overviewBackgroundColor="#E6ECF3",n.currentTimeIndicatorColor="#C000D1",n.timeIndicatorColor="#BCC7D2",n.timeAxisBarColor="#e5e5e5",n.timeAxisBarOpacity=1,n.leftFilterPanelColor="#FFFFFF",n.leftFilterPanelAlpha=.7,n.rightFilterPanelColor="#FFFFFF",n.rightFilterPanelAlpha=.7,null!=e.style&&(null!=e.style.handleFillColor&&(n.handleFillColor=e.style.handleFillColor),null!=e.style.handleTextureColor&&(n.handleTextureColor=e.style.handleTextureColor),null!=e.style.handleBackgroundImage&&(n.handleBackgroundImage=e.style.handleBackgroundImage),null!=e.style.handleWidth&&(n.handleWidth=e.style.handleWidth),null!=e.style.handleHeight&&(n.handleHeight=e.style.handleHeight),null!=e.style.windowBackgroundColor&&(n.windowBackgroundColor=e.style.windowBackgroundColor),null!=e.style.windowBackgroundAlpha&&(n.windowBackgroundAlpha=e.style.windowBackgroundAlpha),null!=e.style.windowBorderTopStyle&&(n.windowBorderTopStyle=e.style.windowBorderTopStyle),null!=e.style.windowBorderRightStyle&&(n.windowBorderRightStyle=e.style.windowBorderRightStyle),null!=e.style.windowBorderBottomStyle&&(n.windowBorderBottomStyle=e.style.windowBorderBottomStyle),null!=e.style.windowBorderLeftStyle&&(n.windowBorderLeftStyle=e.style.windowBorderLeftStyle),null!=e.style.windowBorderTopColor&&(n.windowBorderTopColor=e.style.windowBorderTopColor),null!=e.style.windowBorderRightColor&&(n.windowBorderRightColor=e.style.windowBorderRightColor),null!=e.style.windowBorderBottomColor&&(n.windowBorderBottomColor=e.style.windowBorderBottomColor),null!=e.style.windowBorderLeftColor&&(n.windowBorderLeftColor=e.style.windowBorderLeftColor),null!=e.style.overviewBackgroundColor&&(n.overviewBackgroundColor=e.style.overviewBackgroundColor),null!=e.style.currentTimeIndicatorColor&&(n.currentTimeIndicatorColor=e.style.currentTimeIndicatorColor),null!=e.style.timeIndicatorColor&&(n.timeIndicatorColor=e.style.timeIndicatorColor),null!=e.style.leftFilterPanelColor&&(n.leftFilterPanelColor=e.style.leftFilterPanelColor),null!=e.style.leftFilterPanelAlpha&&(n.leftFilterPanelAlpha=e.style.leftFilterPanelAlpha),null!=e.style.rightFilterPanelColor&&(n.rightFilterPanelColor=e.style.rightFilterPanelColor),null!=e.style.rightFilterPanelAlpha&&(n.rightFilterPanelAlpha=e.style.rightFilterPanelAlpha)),n},e.prototype.calculateWidth=function(t,e,n,i,r){var o=r*(e-t),a=i-n;return 0==o||0==a?0:o/a},t.OverviewEvent=function(e){this.Init(t.OverviewEvent.TYPE),this._subtype=e},t.Obj.createSubclass(t.OverviewEvent,t.BaseComponentEvent),t.OverviewEvent.TYPE="overview",t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE="dropCallback",t.OverviewEvent.SUBTYPE_SCROLL_TIME="scrollTime",
t.OverviewEvent.SUBTYPE_SCROLL_POS="scrollPos",t.OverviewEvent.SUBTYPE_SCROLL_END="scrollEnd",t.OverviewEvent.SUBTYPE_RANGECHANGE="rangeChange",t.OverviewEvent.SUBTYPE_RANGECHANGING="rangeChanging",t.OverviewEvent.TIME_KEY="time",t.OverviewEvent.POS_KEY="pos",t.OverviewEvent.OLD_SIZE_KEY="oldSize",t.OverviewEvent.NEW_SIZE_KEY="newSize",t.OverviewEvent.OLD_START_TIME_KEY="oldStartTime",t.OverviewEvent.NEW_START_TIME_KEY="newStartTime",t.OverviewEvent.OLD_END_TIME_KEY="oldEndTime",t.OverviewEvent.NEW_END_TIME_KEY="newEndTime",t.OverviewEvent.EXPAND_KEY="expand",t.OverviewEvent.END_HANDLE_KEY="endHandle",t.OverviewEvent.START_POS=-1,t.OverviewEvent.END_POS=-2,t.OverviewEvent.prototype.getSubType=function(){return this._subtype},t.OverviewEvent.prototype.setTime=function(e){this.addParam(t.OverviewEvent.TIME_KEY,e)},t.OverviewEvent.prototype.getTime=function(){return this.getParamValue(t.OverviewEvent.TIME_KEY)},t.OverviewEvent.prototype.setOldSize=function(e){this.addParam(t.OverviewEvent.OLD_SIZE_KEY,e)},t.OverviewEvent.prototype.getOldSize=function(){return this.getParamValue(t.OverviewEvent.OLD_SIZE_KEY)},t.OverviewEvent.prototype.setNewSize=function(e){this.addParam(t.OverviewEvent.NEW_SIZE_KEY,e)},t.OverviewEvent.prototype.getNewSize=function(){return this.getParamValue(t.OverviewEvent.NEW_SIZE_KEY)},t.OverviewEvent.prototype.setOldStartTime=function(e){this.addParam(t.OverviewEvent.OLD_START_TIME_KEY,e)},t.OverviewEvent.prototype.getOldStartTime=function(){return this.getParamValue(t.OverviewEvent.OLD_START_TIME_KEY)},t.OverviewEvent.prototype.setNewStartTime=function(e){this.addParam(t.OverviewEvent.NEW_START_TIME_KEY,e)},t.OverviewEvent.prototype.getNewStartTime=function(){return this.getParamValue(t.OverviewEvent.NEW_START_TIME_KEY)},t.OverviewEvent.prototype.setOldEndTime=function(e){this.addParam(t.OverviewEvent.OLD_END_TIME_KEY,e)},t.OverviewEvent.prototype.getOldEndTime=function(){return this.getParamValue(t.OverviewEvent.OLD_END_TIME_KEY)},t.OverviewEvent.prototype.setNewEndTime=function(e){this.addParam(t.OverviewEvent.NEW_END_TIME_KEY,e)},t.OverviewEvent.prototype.getNewEndTime=function(){return this.getParamValue(t.OverviewEvent.NEW_END_TIME_KEY)},t.OverviewEvent.prototype.setExpand=function(e){this.addParam(t.OverviewEvent.EXPAND_KEY,e)},t.OverviewEvent.prototype.isExpand=function(){return this.getParamValue(t.OverviewEvent.EXPAND_KEY)},t.OverviewEvent.prototype.setEndHandle=function(e){this.addParam(t.OverviewEvent.END_HANDLE_KEY,e)},t.OverviewEvent.prototype.isEndHandle=function(){return this.getParamValue(t.OverviewEvent.END_HANDLE_KEY)},t.OverviewEvent.prototype.setPosition=function(e){this.addParam(t.OverviewEvent.POS_KEY,e)},t.OverviewEvent.prototype.getPosition=function(){return this.getParamValue(t.OverviewEvent.POS_KEY)};var n=function(t){this.Init(t.getCtx(),t.processEvent,t),this._overview=t};t.Obj.createSubclass(n,t.EventManager),n.prototype.addListeners=function(e){n.superclass.addListeners.call(this,e),t.SvgDocumentUtils.addDragListeners(this._overview,this._onDragStart,this._onDragMove,this._onDragEnd,this)},n.prototype._onDragStart=function(e){return t.Agent.isTouchDevice()?this._onTouchDragStart(e):this._onMouseDragStart(e)},n.prototype._onDragMove=function(e){return t.Agent.isTouchDevice()?this._onTouchDragMove(e):this._onMouseDragMove(e)},n.prototype._onDragEnd=function(e){return t.Agent.isTouchDevice()?this._onTouchDragEnd(e):this._onMouseDragEnd(e)},n.prototype._getRelativePosition=function(e,n){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new t.Point(e-this._stageAbsolutePosition.x,n-this._stageAbsolutePosition.y)},n.prototype._onMouseDragStart=function(e){if(e.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var n=this._getRelativePosition(e.pageX,e.pageY);t.EventManager.consumeEvent(e);var i=this.getCtx().getStage(),r=i.getSVGRoot().parentNode;return r.focus(),this._overview.beginDragPan(e,n.x,n.y)}return!1},n.prototype._onMouseDragMove=function(t){var e=this._getRelativePosition(t.pageX,t.pageY);return t.stopPropagation(),this._overview.contDragPan(t,e.x,e.y),!0},n.prototype._onMouseDragEnd=function(t){t.stopPropagation(),this._overview.endDragPan(),this._stageAbsolutePosition=null},n.prototype._onTouchDragStart=function(t){var e=t.touches;if(t.stopPropagation(),1==e.length){var n=this._getRelativePosition(e[0].pageX,e[0].pageY);return t.preventDefault(),this._overview.beginDragPan(t,n.x,n.y)}return!1},n.prototype._onTouchDragMove=function(t){var e=t.touches;if(1==e.length){var n=this._getRelativePosition(e[0].pageX,e[0].pageY);this._overview.contDragPan(t,n.x,n.y),t.preventDefault()}t.stopPropagation()},n.prototype._onTouchDragEnd=function(e){this._overview.endDragPan(),t.EventManager.consumeEvent(e),this._stageAbsolutePosition=null},t.exportProperty(t,"Overview",t.Overview),t.exportProperty(t.Overview.prototype,"render",t.Overview.prototype.render)}(t),t}),define("ojs/internal-deps/dvt/DvtChart",["./DvtToolkit","./DvtAxis","./DvtLegend","./DvtOverview"],function(t){return function(t){t.Chart=function(t,e,n){this.Init(t,e,n)},t.Obj.createSubclass(t.Chart,t.BaseComponent),t.Chart.newInstance=function(e,n,i){return new t.Chart(e,n,i)},t.Chart.getDefaults=function(t){return(new s).getDefaults(t)},t.Chart.prototype.Init=function(e,i,r){t.Chart.superclass.Init.call(this,e,i,r),this.Defaults=new s,this.EventManager=new n(this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager)),this.setId("chart1000"+Math.floor(1e9*Math.random())),this.legend=null,this.xAxis=null,this.yAxis=null,this.y2Axis=null,this.overview=null,this.xScrollbar=null,this.yScrollbar=null,this.dragButtons=null,this.pieChart=null,this.pieCenterDiv=null,this.Peers=[],this.SeriesStyleArray=[],this._numFrontObjs=0,this._numSelectedObjsInFront=0,this._dataLabels=null,this._rawOptions=null},t.Chart.prototype.GetComponentDescription=function(){var e=this.getOptions(),n=t.Bundle.getTranslation(e,"componentName",t.Bundle.UTIL_PREFIX,"CHART"),i="",r=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER");return e.title.text&&(i+=this.Options.title.text,e.subtitle.text&&(i+=r+this.Options.subtitle.text)),e.footnote.text&&(i=0==i.length?this.Options.footnote.text:i.concat(r,this.Options.footnote.text)),i.length>0?t.Bundle.getTranslation(e,"labelAndValue",t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[n,i]):n},t.Chart.prototype.SetOptions=function(e){e?(this._rawOptions=e,this.Options=this.Defaults.calcOptions(e),"horizontalBar"==this.Options.type&&(this.Options.type="bar",this.Options.orientation="horizontal"),this.getOptionsCache().clearCache(),F.processDataObject(this),(!t.Agent.isEnvironmentBrowser()||F.hasData(this)&&F.getSeriesCount(this)*F.getGroupCount(this)>5e3)&&(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults());var n=this.Options.selectionMode;"single"==n?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_SINGLE):"multiple"==n?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_MULTIPLE):this._selectionHandler=null,this.EventManager.setSelectionHandler(this._selectionHandler);var i=this.Options._spb;if(i){this._popupBehaviors={};for(var r in i)for(var o=i[r],a=0;a<o.length;a++){this._popupBehaviors[r]||(this._popupBehaviors[r]=[]);var s=o[a],l=s.popupId,u=s.triggerType,h=s.alignId,c=s.align;this._popupBehaviors[r].push(new t.ShowPopupBehavior(l,u,h,c))}}},t.Chart.prototype.render=function(e,n,i){this.getCache().clearCache();var r=this.getCtx(),o=this.Options?this.Options.animationOnDataChange:"none",a="none"!=o?new O(this):null,s=this.__cacheChartFocus();this._container&&this.__cleanUp(),this.SetOptions(e),isNaN(n)||isNaN(i)||(this.Width=n,this.Height=i);var l=new t.Container(r);this.addChild(l),J.render(this,l,new t.Rectangle(0,0,this.Width,this.Height)),W.isSpark(this)&&this.EventManager.removeListeners(this),this.StopAnimation();var u=V.getAnimationOnDisplay(this),h=V.getAnimationDuration(this),c=new t.Rectangle(0,0,this.Width,this.Height),d=!1;if(this._container){if("none"!=o&&e)if(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(r,o,this._container,l,c,h),this.Animation)d=!0;else if("auto"==o&&this.getPlotArea()){var p=this.__getPlotAreaSpace();this._delContainer=et.createClippedGroup(this,this._container,new t.Rectangle(0,0,p.w,p.h)),this.Animation=I.createAnimation(a,this,o,h,this._delContainer),this._delContainer.getNumChildren()>0&&this.getPlotArea().addChild(this._delContainer)}}else"none"!=u&&(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(r,u,l,c,h),this.Animation||"auto"!=u||(this.Animation=x.createAnimation(this,u,h)));this.Animation&&(this.EventManager.removeListeners(this),t.Playable.appendOnEnd(this.Animation,this._onAnimationEnd,this),this.Animation.play()),d?this._oldContainer=this._container:this._container&&(this.removeChild(this._container),this._container.destroy(),this._container=null),this._container=l,this._dataCursor=J.renderDataCursor(this),this.UpdateAriaAttributes(),this.__restoreChartFocus(s),this.Animation||this.RenderComplete()},t.Chart.prototype.__cleanUp=function(){this._dataCursor&&(this.removeChild(this._dataCursor),this._dataCursor=null),this.EventManager&&(this.EventManager.hideHoverFeedback(),this.EventManager.setPanZoomHandler(null),this.EventManager.setMarqueeZoomHandler(null),this.EventManager.setMarqueeSelectHandler(null),this.EventManager.panButton=null,this.EventManager.zoomButton=null,this.EventManager.selectButton=null),this.pieCenterDiv&&(this.getCtx().getContainer().removeChild(this.pieCenterDiv),this.pieCenterDiv=null),this.Peers=[],this.xScrollbar=null,this.yScrollbar=null,this.dragButtons&&(this.removeChild(this.dragButtons),this.dragButtons.destroy(),this.dragButtons=null),this._plotArea=null,this._areaContainer=null,this._dataLabels=null,this.getCache().clearCache()},t.Chart.prototype.__cleanUpAxisAndPlotArea=function(){this.EventManager.hideHoverFeedback(),this.Peers=[],this._container.removeChild(this.xAxis),this._container.removeChild(this.yAxis),this._container.removeChild(this.y2Axis),this._plotArea&&this._plotArea==this._panZoomTarget?this._plotArea.setVisible(!1):this._container.removeChild(this._plotArea),this._plotArea=null,this.getCache().clearCache()},t.Chart.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer.destroy(),this._oldContainer=null),this._delContainer&&this._delContainer.getNumChildren()>0&&this.getPlotArea().removeChild(this._delContainer),this._delContainer=null,this.AnimationStopped||this.RenderComplete(),this.EventManager.addListeners(this),this.Animation=null,this.AnimationStopped=!1},t.Chart.prototype.CreateKeyboardHandler=function(t){return new i(t,this)},t.Chart.prototype.getAutomation=function(){return new e(this)},t.Chart.prototype.getValuesAt=function(t,e){var n=this.__getPlotAreaSpace(),i=t-n.x,r=e-n.y,o=W.isPolar(this),a=W.isHorizontal(this);if(o){i-=n.w/2,r-=n.h/2;var s=Math.sqrt(i*i+r*r),l=Math.atan2(i,-r);return l<0&&(l+=2*Math.PI),{x:this.xAxis?this.xAxis.getValueAt(l):null,y:this.yAxis?this.yAxis.getValueAt(s):null}}return{x:this.xAxis?this.xAxis.getValueAt(a?r:i):null,y:this.yAxis?this.yAxis.getValueAt(a?i:r):null,y2:this.y2Axis?this.y2Axis.getValueAt(a?i:r):null}},t.Chart.prototype.filter=function(t,e){var n="out"==e?"hidden":"visible";H.setVisibility(this,t,n),this.render(this.Options)},t.Chart.prototype.highlight=function(e){this.getOptions().highlightedCategories=t.JsonUtils.clone(e),t.CategoryRolloverHandler.highlight(e,this.getObjects(),"any"==this.getOptions().highlightMatch),this.legend&&this.legend.highlight(e),this.pieChart&&this.pieChart.highlight(e),this.overview&&this.overview.getBackgroundChart().highlight(e)},t.Chart.prototype.select=function(e){var n=this.getOptions();n.selection=t.JsonUtils.clone(e);var i=F.getInitialSelection(this);H.setInitialSelection(this,i),this.pieChart&&this.pieChart.setInitialSelection()},t.Chart.prototype.positionDataCursor=function(e){var n=this.getEventManager().getDataCursorHandler();if(n){if(e){var i=this.xAxis&&null!=e.x?this.xAxis.getCoordAt(e.x):null,r=null;if(W.isBLAC(this)?this.yAxis&&null!=e.y?r=this.yAxis.getBoundedCoordAt(e.y):this.y2Axis&&null!=e.y2&&(r=this.yAxis.getBoundedCoordAt(e.y2)):r=this.yAxis&&null!=e.y?this.yAxis.getCoordAt(e.y):null,null!=i&&null!=r){var o=this.__getPlotAreaSpace(),a=et.convertAxisCoord(this,new t.Point(i,r),o);return void n.processMove(new t.Point(o.x+a.x,o.y+a.y),!0)}}n.processEnd(!0)}},t.Chart.prototype.processEvent=function(e,n){var i=e.type;if("categoryHide"==i||"categoryShow"==i)this.filter(e.category,"categoryHide"==i?"out":"in");else if("categoryHighlight"==i)this!=n&&this.highlight(e.categories),this.legend&&this.legend!=n&&this.legend.processEvent(e,n);else if("selection"==i)e=this._processSelectionEvent(e);else if(i==t.PanZoomEvent.TYPE)e=this._processPanZoomEvent(e);else if(i==t.MarqueeEvent.TYPE)e=this._processMarqueeEvent(e);else if(i==t.OverviewEvent.TYPE){var r=e.getSubType();if(r==t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE)return;var o=r==t.OverviewEvent.SUBTYPE_SCROLL_TIME||r==t.OverviewEvent.SUBTYPE_SCROLL_END||r==t.OverviewEvent.SUBTYPE_RANGECHANGE;e=this._processScrollbarEvent(e.getNewStartTime(),e.getNewEndTime(),o,n)}else i==t.SimpleScrollbarEvent.TYPE?e=this._processScrollbarEvent(e.getNewMin(),e.getNewMax(),e.getSubtype()==t.SimpleScrollbarEvent.SUBTYPE_END,n):"adfShowPopup"==i&&(e=this._processShowPopupEvent(e));if(e){if(i=e.type,"selection"==i){var a=this.getOptions(),s=a.selection,l=F.getCurrentSelection(this);e.complete&&(a.selection=l),s=s?s:[],l=l?l:[];var u,h,c={};for(u=0;u<s.length;u++)c[s[u].id]=!0;var d={};for(h=0;h<l.length;h++)d[l[h].id]=!0;var p={};for(h=0;h<l.length;h++){var g=l[h].id;c[g]||(p[g]=!0)}var f={};for(u=0;u<s.length;u++){var _=s[u].id;d[_]||(f[_]=!0)}e.addedSet=p,e.removedSet=f;for(var m=0;m<e.selection.length;m++)H.addEventData(this,e.selection[m]);e.component=this.getOptions()._widgetConstructor}else"drill"==i&&(H.addEventData(this,e),e.component=this.getOptions()._widgetConstructor);this.dispatchEvent(e)}},t.Chart.prototype._processSelectionEvent=function(e){var n=H.processIds(this,e.selection);return this._updateOverviewSelection(),t.EventFactory.newChartSelectionEvent(n,!0)},t.Chart.prototype._processPanZoomEvent=function(e){var n=e.getSubtype(),i=n==t.PanZoomEvent.SUBTYPE_PAN_END||n==t.PanZoomEvent.SUBTYPE_ZOOM||n==t.PanZoomEvent.SUBTYPE_PINCH_END,r=n==t.PanZoomEvent.SUBTYPE_PAN_START||n==t.PanZoomEvent.SUBTYPE_PINCH_START;t.Agent.isTouchDevice()&&r&&this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=this._plotArea);var o;return H.isLiveScroll(this)?(o=H.getAxisBoundsByDelta(this,e.dxMin,e.dxMax,e.dyMin,e.dyMax),r||(this._setViewport(o,i),this._setScrollbarViewport(o))):(o=H.getAxisBoundsByDelta(this,e.dxMinTotal,e.dxMaxTotal,e.dyMinTotal,e.dyMaxTotal),this._setScrollbarViewport(o),i&&this._setViewport(o,i)),i&&(J._setEventHandlers(this),this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=null)),W.isBLAC(this)?t.EventFactory.newChartViewportChangeEvent(i,o.xMin,o.xMax,o.startGroup,o.endGroup,null,null):t.EventFactory.newChartViewportChangeEvent(i,o.xMin,o.xMax,null,null,o.yMin,o.yMax)},t.Chart.prototype._processMarqueeEvent=function(e){var i,r=e.getSubtype(),o=this.EventManager;if(H.adjustBounds(e),o.getDragMode()==n.DRAG_MODE_SELECT){var a=o.getSelectionHandler();if(r==t.MarqueeEvent.SUBTYPE_START)this._initSelection=e.ctrlKey?a.getSelectedIds():[];else{var s=H.getBoundedObjects(this,e);a.processInitialSelections(this._initSelection,this.getChartObjPeers()),a.processGroupSelection(s,!0)}var l=H.getSelectedObjects(this,e,a);i=H.getAxisBounds(this,e,!1);var u=r==t.MarqueeEvent.SUBTYPE_END,h=t.EventFactory.newChartSelectionEvent(l,u,i.xMin,i.xMax,i.startGroup,i.endGroup,i.yMin,i.yMax,i.y2Min,i.y2Max);return r==t.MarqueeEvent.SUBTYPE_END&&this._updateOverviewSelection(),h}return o.getDragMode()==n.DRAG_MODE_ZOOM?r!=t.MarqueeEvent.SUBTYPE_END?null:(i=H.getAxisBounds(this,e,!0),this._setViewport(i,!0),this._setScrollbarViewport(i),J._setEventHandlers(this),W.isBLAC(this)?t.EventFactory.newChartViewportChangeEvent(!0,i.xMin,i.xMax,i.startGroup,i.endGroup,null,null):t.EventFactory.newChartViewportChangeEvent(!0,i.xMin,i.xMax,null,null,i.yMin,i.yMax)):null},t.Chart.prototype._processScrollbarEvent=function(e,n,i,r){var o=r==this.yScrollbar?this.yAxis:this.xAxis;if(e=o.linearToActual(e),n=o.linearToActual(n),(H.isLiveScroll(this)||i)&&(r==this.yScrollbar?this._setViewport({yMin:e,yMax:n},i):this._setViewport({xMin:e,xMax:n},i)),r==this.yScrollbar)return t.EventFactory.newChartViewportChangeEvent(i,null,null,null,null,e,n,null,null);var a=H.getAxisStartEndGroup(this.xAxis,e,n);return t.EventFactory.newChartViewportChangeEvent(i,e,n,a.startGroup,a.endGroup,null,null,null,null)},t.Chart.prototype._processShowPopupEvent=function(e){if("mouseHover"!=e.triggerType&&this.isSelectionSupported()&&this.getSelectionHandler().getSelectedCount()>0){var n=H.processIds(this,this.getSelectionHandler().getSelectedIds());e=t.EventFactory.newAdfShowPopupEvent(e.showPopupBehavior,e.launcherBounds,e.launcherId),e[t.BaseComponentEvent.CLIENT_ROW_KEY]=n}return e},t.Chart.prototype._updateOverviewSelection=function(){if(this.overview){var t=this.overview.getBackgroundChart();t.getOptions().selection=F.getCurrentSelection(this),t.render()}},t.Chart.prototype.changeOption=function(e,n,i){this.getOptions()[e]=n,this.dispatchEvent(t.EventFactory.newOptionChangeEvent(e,n,i))},t.Chart.prototype.registerObject=function(t){this.Peers.push(t)},t.Chart.prototype.getObjects=function(){return this.Peers},t.Chart.prototype.getChartObjPeers=function(){for(var t=[],e=0;e<this.Peers.length;e++)this.Peers[e]instanceof r&&t.push(this.Peers[e]);return t},t.Chart.prototype.getRefObjPeers=function(){for(var t=[],e=0;e<this.Peers.length;e++)this.Peers[e]instanceof o&&t.push(this.Peers[e]);return t},t.Chart.prototype.getObject=function(t,e){for(var n=0;n<this.Peers.length;n++)if(this.Peers[n]instanceof r&&this.Peers[n].getSeriesIndex()==t&&this.Peers[n].getGroupIndex()==e)return this.Peers[n];return null},t.Chart.prototype.getWidth=function(){return this.Width},t.Chart.prototype.getHeight=function(){return this.Height},t.Chart.prototype.getSeriesStyleArray=function(){return this.SeriesStyleArray},t.Chart.prototype.getPlotArea=function(){return this._plotArea},t.Chart.prototype.setPlotArea=function(t){this._plotArea=t},t.Chart.prototype.getType=function(){return this.getOptions().type},t.Chart.prototype.getSkin=function(){return this.getOptions().skin},t.Chart.prototype.getGapWidthRatio=function(){var t=this.getOptions();return null!==t.layout.gapWidthRatio?t.layout.gapWidthRatio:Math.min(this.Width/400,1)},t.Chart.prototype.getGapHeightRatio=function(){var t=this.getOptions();return null!==t.layout.gapHeightRatio?t.layout.gapHeightRatio:Math.min(this.Height/300,1)},t.Chart.prototype.getSelectionHandler=function(){return this._selectionHandler},t.Chart.prototype.isSelectionSupported=function(){return!!this._selectionHandler},t.Chart.prototype.getShowPopupBehaviors=function(t){return this._popupBehaviors?this._popupBehaviors[t]:null},t.Chart.prototype.bringToFrontOfSelection=function(t){var e=t.getParent();if(e){var n=e.getNumChildren();if(n-this._numFrontObjs>1){e.removeChild(t);var i=n-this._numFrontObjs-1;e.addChildAt(t,i)}}t.isSelected()&&t.isHoverEffectShown()||this._numSelectedObjsInFront++},t.Chart.prototype.pushToBackOfSelection=function(t){this._numSelectedObjsInFront>0&&this._numSelectedObjsInFront--;var e=t.getParent();if(e){var n=e.getNumChildren(),i=n-this._numFrontObjs-1-this._numSelectedObjsInFront;i>=0&&(e.removeChild(t),e.addChildAt(t,i))}},t.Chart.prototype.setNumFrontObjs=function(t){this._numFrontObjs=t},t.Chart.prototype.getShapesForViewSwitcher=function(t){var e={};if(this._currentMarkers&&this.Peers)for(var n=0;n<this._currentMarkers.length;n++){var i=this._currentMarkers[n];if(i)for(var r=0;r<i.length;r++){var o=i[r];if(o)for(var a=0;a<this.Peers.length;a++){var s=this.Peers[a],l=s.getDisplayables();if(l&&l.length>0&&l[0]==o){var u=s.getId();if(u){var h=u.getId();if(h){e[h]=o;break}}}}}}else this.pieChart&&(e=this.pieChart.getShapesForViewSwitcher(t));return e},t.Chart.prototype._setViewport=function(t,e){null!=t.xMax&&(this.Options.xAxis.viewportMax=t.xMax),null!=t.xMin&&(this.Options.xAxis.viewportMin=t.xMin),W.isBLAC(this)?(this.Options.xAxis.viewportStartGroup=null,this.Options.xAxis.viewportEndGroup=null,this.Options._initialZoomed=!1):(null!=t.yMax&&(this.Options.yAxis.viewportMax=t.yMax),null!=t.yMin&&(this.Options.yAxis.viewportMin=t.yMin)),this.Options._duringAnimation=!e,J.rerenderAxisAndPlotArea(this,this._container)},t.Chart.prototype._setScrollbarViewport=function(t){if(this.xAxis&&null!=t.xMin&&null!=t.xMax){var e=this.xAxis.actualToLinear(t.xMin),n=this.xAxis.actualToLinear(t.xMax);this.overview&&this.overview.setViewportRange(e,n),this.xScrollbar&&this.xScrollbar.setViewportRange(e,n)}if(this.yAxis&&null!=t.yMin&&null!=t.yMax){var i=this.yAxis.actualToLinear(t.yMin),r=this.yAxis.actualToLinear(t.yMax);this.yScrollbar&&this.yScrollbar.setViewportRange(i,r)}},t.Chart.prototype.__setAxisSpace=function(t){this._axisSpace=t;var e,n;B.isAxisRendered(this,"x")?(e=.8*t.w,n=t.h-4*B.getTickLabelHeight(this,"x")):B.isAxisRendered(this,"y")?(e=t.w,n=t.h-B.getTickLabelHeight(this,"y")):(e=t.w,n=t.h),this._radius=Math.min(e,n)/2},t.Chart.prototype.__getAxisSpace=function(){return this._axisSpace},t.Chart.prototype.__setPlotAreaSpace=function(t){this._plotAreaSpace=t},t.Chart.prototype.__getPlotAreaSpace=function(){return this._plotAreaSpace},t.Chart.prototype.__setAreaContainer=function(t){this._areaContainer=t},t.Chart.prototype.__getAreaContainer=function(){return this._areaContainer},t.Chart.prototype.getRadius=function(){return this._radius},t.Chart.prototype.showDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!0)},t.Chart.prototype.hideDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!1)},t.Chart.prototype.addDataLabel=function(t){this.getDataLabels().push(t)},t.Chart.prototype.getDataLabels=function(){return this._dataLabels||(this._dataLabels=[]),this._dataLabels},t.Chart.prototype.__cacheChartFocus=function(){var t=this.EventManager.getFocus();if(t)var e=t.isShowingKeyboardFocusEffect();if(this.xAxis){var n=this.xAxis.getKeyboardFocus();if(n)var i=n.isShowingKeyboardFocusEffect()}if(this.legend){var r=this.legend.getKeyboardFocus();if(r)var o=r.isShowingKeyboardFocusEffect()}return{chartFocus:t,chartShowingFocusEffect:e,axisFocus:n,axisShowingFocusEffect:i,legendFocus:r,legendShowingFocusEffect:o}},t.Chart.prototype.__restoreChartFocus=function(t){if(!W.isOverview(this)&&!W.isSpark(this)){var e=[this];if(this.xAxis&&this.xAxis.isNavigable()&&e.push(this.xAxis),this.legend&&this.legend.isNavigable()&&e.push(this.legend),this.getCtx().setKeyboardFocusArray(e),t.chartFocus){for(var n=H.getKeyboardNavigables(this),i=!1,r=0;r<n.length;r++){var o=n[r].getId();if(o instanceof a&&o.equals(t.chartFocus.getId())){this.EventManager.setFocusObj(n[r]),t.chartShowingFocusEffect&&n[r].showKeyboardFocusEffect(),i=!0;break}}i||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(n))}t.axisFocus&&(this.xAxis.setKeyboardFocus(t.axisFocus,t.axisShowingFocusEffect),t.axisShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.xAxis)),t.legendFocus&&(this.legend.setKeyboardFocus(t.legendFocus,t.legendShowingFocusEffect),t.legendShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.legend))}},t.Chart.prototype.getRawOptions=function(){return this._rawOptions},t.Chart.prototype.processActiveDataChanges=function(e){for(var n=t.JsonUtils.clone(this.Options),i=this.Options,r=0;r<e.length;r++)this._processActiveDataChange(e[r]);this.Options=n,this.render(i)},t.Chart.prototype._processActiveDataChange=function(t){var e=t.type;"u"==e?this._processActiveDataUpdate(t):"ia"==e||"ib"==e?this._processActiveDataInsert(t):"d"==e&&this._processActiveDataDelete(t)},t.Chart.prototype._processActiveDataUpdate=function(t){for(var e=t.data,n=0;n<e.length;n++){var i=this._findDataItemById(t.id,e[n]._id);if(i)for(var r in e[n])"_id"!=r&&(i.item[r]=e[n][r])}},t.Chart.prototype._processActiveDataInsert=function(e){for(var n=e.data,i=0;i<n.length;i++){this.clearCache();var r=e.insertId,o=n[i].group,a=n[i].series,s=F.getSeriesCount(this),l=F.getGroupCount(this),u=F.getSeriesIndex(this,a),h=F.getGroupIndex(this,o);if(u>=0&&h>=0){var c=F.getSeriesItem(this,u).items;c[h]={id:e.id},t.Chart._copyActiveDataProperties(n[i],c[h])}else if(h>=0){var d=new Array(l);d[h]={id:e.id},t.Chart._copyActiveDataProperties(n[i],d[h]),this.Options.series.push({name:a,items:d})}else{var p=this._findDataItemById(r);h=p?"ia"==e.type?p.groupIndex+1:p.groupIndex:0,u<0&&(this.Options.series.push({name:a,items:new Array(l)}),u=s,s++);for(var g=0;g<s;g++){var c=F.getSeriesItem(this,g).items;c.splice(h,0,{id:e.id}),g==u&&t.Chart._copyActiveDataProperties(n[i],c[h])}this.Options.groups.splice(h,0,o)}}},t.Chart.prototype._processActiveDataDelete=function(t){this.clearCache();var e=this._findDataItemById(t.id);if(e){var n;for(var i in e.item)e.item[i]=null;e.item._deleted=!0;for(var r=F.getSeriesCount(this),o=F.getGroupCount(this),a=!0,s=0;s<r;s++)if(n=F.getDataItem(this,s,e.groupIndex),n&&!n._deleted){a=!1;break}for(var l=!0,u=0;u<o;u++)if(n=F.getDataItem(this,e.seriesIndex,u),n&&!n._deleted){l=!1;break}if(a){for(var s=0;s<r;s++){var h=F.getSeriesItem(this,s).items;h.splice(e.groupIndex,1)}this.Options.groups.splice(e.groupIndex,1)}l&&this.Options.series.splice(e.seriesIndex,1),this._processActiveDataDelete(t)}},t.Chart._copyActiveDataProperties=function(t,e){for(var n in t)e[n]=t[n]},t.Chart.prototype._findDataItemById=function(t,e){if(null==t)return null;for(var n=F.getSeriesCount(this),i=F.getGroupCount(this),r=0;r<n;r++)for(var o=0;o<i;o++){var a=F.getDataItem(this,r,o);if(null!=a&&a.id===t&&(null==e||e===a._id))return{item:a,seriesIndex:r,groupIndex:o}}return null};var e=function(t){this._chart=t,this._options=this._chart.getOptions(),this._legend=this._chart.legend,this._xAxis=this._chart.xAxis,this._yAxis=this._chart.yAxis,this._y2Axis=this._chart.y2Axis,this._legendAutomation=this._legend?this._legend.getAutomation():null,this._xAxisAutomation=this._xAxis?this._xAxis.getAutomation():null,this._yAxisAutomation=this._yAxis?this._yAxis.getAutomation():null,this._y2AxisAutomation=this._y2Axis?this._y2Axis.getAutomation():null};t.Obj.createSubclass(e,t.Automation),e.prototype.GetSubIdForDomElement=function(t){var e=null;if(t.isDescendantOf(this._xAxis))return e=this._xAxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"xAxis"):null;if(t.isDescendantOf(this._yAxis))return e=this._yAxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"yAxis"):null;if(t.isDescendantOf(this._y2Axis))return e=this._y2AxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"y2Axis"):null;if(t.isDescendantOf(this._legend)){var n=this._legendAutomation.GetSubIdForDomElement(t);return n?this._convertLegendSubIdToChartSubId(n):null}var i=this._chart.getEventManager().GetLogicalObject(t);if(i&&"pie"==this._options.type)return"dataItem["+i.getSeriesIndex()+"]";if(i instanceof r){var a=i.getSeriesIndex(),s=i.getGroupIndex();if(null!=a&&s>=0&&("funnel"!=this._options.type||"pyramid"!=this._options.type))return"dataItem["+a+"]["+s+"]";if(null!=a&&s==nt._GROUP_INDEX&&("funnel"==this._options.type||"pyramid"==this._options.type))return"dataItem["+a+"]";if(null!=a&&(null==s||s<0))return"series["+a+"]"}else if(i instanceof o){var l=i.getAxisType(),u=i.getIndex();return l&&u>=0?l+":referenceObject["+u+"]":null}return null},e.prototype._convertLegendSubIdToChartSubId=function(t){var e=this._legend.getOptions(),n=this._legendAutomation.getLegendItem(e,t);if(n){for(var i=0;i<this._options.series.length;i++){var r=this._options.series[i];if(r.name==n.text)return"series["+i+"]"}return"legend:"+t}return null},e.prototype._convertAxisSubIdToChartSubId=function(t,e){if("title"==t&&e)return e+":"+t;var n=t.substring(t.indexOf("["));return n?"group"+n:null},e.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._chart,K.isDataCursorEnabled(this._chart)?C.TOOLTIP_ID:null);var n,i,r,o=e.indexOf("["),a=e.indexOf("]"),s=e.indexOf(":");if(o>0&&a>0||s>0){var l=s<0?e.substring(0,o):e.substring(0,s);if("group"==l)return this._xAxisAutomation.getDomElementForSubId(e);if("series"==l)return e=this._convertToLegendSubId(e),this._legendAutomation.getDomElementForSubId(e);if("legend"==e.substring(0,s))return e=e.substring(s+1),this._legendAutomation.getDomElementForSubId(e);var u=e.substring(o+1,a);if("xAxis"==l||"yAxis"==l||"y2Axis"==l){var h=e.substring(s+1);if("title"==h){if("xAxis"==l)return this._xAxisAutomation.getDomElementForSubId(h);if("yAxis"==l)return this._yAxisAutomation.getDomElementForSubId(h);if("y2Axis"==l)return this._y2AxisAutomation.getDomElementForSubId(h)}else if(n=h.indexOf("["),i=h.indexOf("]"),"referenceObject"==h.substring(0,n)){var c=h.substring(n+1,i);if(r=this._getRefObjPeer(c))return r.getDisplayables()[0].getElem()}}if("pie"==this._options.type){var d=this._chart.pieChart.getSliceDisplayable(u);if(d)return d.getElem()}var p;if("funnel"==this._options.type?p=nt._GROUP_INDEX:"pyramid"==this._options.type?p=it._GROUP_INDEX:(e=e.substring(a+1),n=e.indexOf("["),i=e.indexOf("]"),n>=0&&i>=0&&(p=e.substring(n+1,i))),r=this._getChartObjPeer(u,p))return r.getDisplayables()[0].getElem()}return null},e.prototype._getChartObjPeer=function(t,e){for(var n=this._chart.getChartObjPeers(),i=0;i<n.length;i++){var r=n[i].getSeriesIndex(),o=n[i].getGroupIndex();if(r==t&&o==e)return n[i]}return null},e.prototype._getRefObjPeer=function(t){for(var e=this._chart.getRefObjPeers(),n=0;n<e.length;n++)if(t==e[n].getIndex())return e[n];return null},e.prototype._convertToLegendSubId=function(t){var e=t.indexOf("["),n=t.indexOf("]"),i=t.substring(e+1,n),r=this._legend.getOptions(),o=this._options.series[i],a=this._legendAutomation.getIndicesFromSeries(o,r);return"section"+a},e.prototype.getDataItem=function(t,e){"pie"!=this._options.type&&"funnel"!=this._options.type&&"pyramid"!=this._options.type||(e=0);var n=F.getDataItem(this._chart,t,e);return n?{borderColor:V.getBorderColor(this._chart,t,e),color:V.getColor(this._chart,t,e),label:F.getDataLabel(this._chart,t,e),targetValue:F.getTargetValue(this._chart,t,e),tooltip:K.getDatatip(this._chart,t,e,null,!1),value:F.getValue(this._chart,t,e),open:n.open,close:n.close,high:F.getHighValue(this._chart,t,e),low:F.getLowValue(this._chart,t,e),volume:n.volume,x:F.getXValue(this._chart,t,e),y:n.y,z:n.z,min:n.min,max:n.max,group:F.getGroup(this._chart,e),series:F.getSeries(this._chart,t),selected:F.isDataSelected(this._chart,t,e)}:null},e.prototype.getGroup=function(t){return F.getGroup(this._chart,t)},e.prototype.getSeries=function(t){return this._options.series[t].name},e.prototype.getGroupCount=function(){return F.getGroupCount(this._chart)},e.prototype.getSeriesCount=function(){return this._options.series.length},e.prototype.getTitle=function(){return this._options.title.text},e.prototype.getLegend=function(){var e=this._legend.__getBounds(),n=this._legend.localToStage(new t.Point(e.x,e.y)),i={x:n.x,y:n.y,width:e.w,height:e.h},r={bounds:i,title:this._legend.getOptions().title};return r},e.prototype.getPlotArea=function(){var t=this._chart.__getPlotAreaSpace(),e={x:t.x,y:t.y,width:t.w,height:t.h},n={bounds:e};return n},e.prototype.getXAxis=function(){return this._getAxis("x");
},e.prototype.getYAxis=function(){return this._getAxis("y")},e.prototype.getY2Axis=function(){return this._getAxis("y2")},e.prototype._getAxis=function(e){var n="x"==e?this._xAxis:"y"==e?this._yAxis:this._y2Axis;if(n){var i=n.__getBounds(),r=n.localToStage(new t.Point(i.x,i.y)),o={x:r.x,y:r.y,width:i.w,height:i.h},a=this._chart,s=function(t,i){var r,o=n.getOptions(),s=o.position,l=B.getTickLabelGapSize(a,e),u=W.isStandaloneXAxis(a)||W.isStandaloneYAxis(a)||W.isStandaloneY2Axis(a)?2:0;return"top"==s||"bottom"==s?(r=n.getPreferredSize(o,t,i-l-u),r.h=Math.ceil(r.h+l+u)):(r=n.getPreferredSize(o,t-l-u,i),r.w=Math.ceil(r.w+l+u)),{width:r.w,height:r.h}},l={bounds:o,title:this._options[e+"Axis"].title,getPreferredSize:s};return l}return null},t.Automation.prototype.IsTooltipElement=function(e){var n=e.getAttribute("id");return!(!n||0!=n.indexOf(C.TOOLTIP_ID)&&0!=n.indexOf(t.HtmlTooltipManager._TOOLTIP_DIV_ID))},t.Bundle.addDefaultStrings(t.Bundle.CHART_PREFIX,{DEFAULT_GROUP_NAME:"Group {0}",LABEL_SERIES:"Series",LABEL_GROUP:"Group",LABEL_VALUE:"Value",LABEL_TARGET_VALUE:"Target",LABEL_X:"X",LABEL_Y:"Y",LABEL_Z:"Z",LABEL_PERCENTAGE:"Percentage",LABEL_MIN:"Min",LABEL_MAX:"Max",LABEL_HIGH:"High",LABEL_LOW:"Low",LABEL_OPEN:"Open",LABEL_CLOSE:"Close",LABEL_VOLUME:"Volume",LABEL_Q1:"Q1",LABEL_Q2:"Q2",LABEL_Q3:"Q3",LABEL_OTHER:"Other",MARQUEE_SELECT:"Marquee select",MARQUEE_ZOOM:"Marquee zoom",PAN:"Pan"});var n=function(e){n.superclass.Init.call(this,e.getCtx(),e.processEvent,e),this._chart=e,this._dragMode=null,this._dragButtonsVisible=t.Agent.isTouchDevice(),this.panButton=null,this.zoomButton=null,this.selectButton=null,this._dataCursorHandler=null,this._panZoomHandler=null,this._marqueeZoomHandler=null,this._marqueeSelectHandler=null,this._stageAbsolutePosition=null};t.Obj.createSubclass(n,t.EventManager),n.DRAG_MODE_PAN="pan",n.DRAG_MODE_ZOOM="zoom",n.DRAG_MODE_SELECT="select",n.DRAG_MODE_OFF="off",n.prototype.getComponent=function(){return this._chart},n.prototype.addListeners=function(e){t.SvgDocumentUtils.addDragListeners(this._chart,this._onDragStart,this._onDragMove,this._onDragEnd,this),n.superclass.addListeners.call(this,e),t.Agent.isTouchDevice()||e.addEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},n.prototype.removeListeners=function(e){n.superclass.removeListeners.call(this,e),t.Agent.isTouchDevice()||e.removeEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},n.prototype.getLogicalObject=function(t){return this.GetLogicalObject(t,!0)},n.prototype._getRelativePosition=function(e,n){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new t.Point(e-this._stageAbsolutePosition.x,n-this._stageAbsolutePosition.y)},n.prototype._getDragHandler=function(t){return t&&"user"==this._chart.getOptions().dragMode&&W.isBLAC(this._chart)&&(this._dragMode==n.DRAG_MODE_PAN||this._dragMode==n.DRAG_MODE_ZOOM)&&(this._panZoomHandler.isWithinBounds(t)?this._dragMode=n.DRAG_MODE_PAN:this._dragMode=n.DRAG_MODE_ZOOM),this._dragMode==n.DRAG_MODE_PAN?this._panZoomHandler:this._dragMode==n.DRAG_MODE_ZOOM?this._marqueeZoomHandler:this._dragMode==n.DRAG_MODE_SELECT?this._marqueeSelectHandler:null},n.prototype._onDragStart=function(e){return t.Agent.isTouchDevice()?this._onTouchDragStart(e):this._onMouseDragStart(e)},n.prototype._onDragMove=function(e){return t.Agent.isTouchDevice()?this._onTouchDragMove(e):this._onMouseDragMove(e)},n.prototype._onDragEnd=function(e){return t.Agent.isTouchDevice()?this._onTouchDragEnd(e):this._onMouseDragEnd(e)},n.prototype._onMouseDragStart=function(t){var e,n=this._getRelativePosition(t.pageX,t.pageY),i=this._getDragHandler(n),r=this.GetLogicalObject(this.GetCurrentTargetForEvent(t)),o=r&&r.isSelectable&&r.isSelectable();return!o&&0==t.button&&i&&(e=i.processDragStart(n,t.ctrlKey),e&&this._callback.call(this._callbackObj,e),this._chart.setCursor(i.getCursor(n)),this.setDragButtonsVisible(!1),this._chart!=this.getCtx().getCurrentKeyboardFocus()&&this.getCtx().setCurrentKeyboardFocus(this._chart)),!!e&&(this._dataCursorHandler&&this._dataCursorHandler.processEnd(),!0)},n.prototype._onMouseDragMove=function(t){var e,n=this._getRelativePosition(t.pageX,t.pageY),i=this._getDragHandler();i&&(e=i.processDragMove(n,t.ctrlKey),e&&(this._callback.call(this._callbackObj,e),this.setDragButtonsVisible(!1))),e&&t.stopPropagation()},n.prototype._onMouseDragEnd=function(t){var e,n=this._getRelativePosition(t.pageX,t.pageY),i=this._getDragHandler();if(i){e=i.processDragEnd(n,t.ctrlKey),e&&(this._callback.call(this._callbackObj,e),this.autoToggleZoomButton()),this._chart.setCursor(i.getCursor(n));var r=this._chart.__getAxisSpace();r&&this.setDragButtonsVisible(r.containsPoint(n.x,n.y))}this._stageAbsolutePosition=null},n.prototype.OnMouseMove=function(e){n.superclass.OnMouseMove.call(this,e);var i=this._getRelativePosition(e.pageX,e.pageY);this._dataCursorHandler&&(this.GetCurrentTargetForEvent(e)instanceof t.Button?this._dataCursorHandler.processEnd():this._dataCursorHandler.processMove(i));var r=this._getDragHandler(i);r?this._chart.setCursor(r.getCursor(i)):this._chart.setCursor("default")},n.prototype.OnMouseOut=function(t){n.superclass.OnMouseOut.call(this,t);var e=this._getRelativePosition(t.pageX,t.pageY),i=this._chart.__getAxisSpace();i&&this.setDragButtonsVisible(i.containsPoint(e.x,e.y)),this._dataCursorHandler&&this._dataCursorHandler.processOut(e),this._stageAbsolutePosition=null;var r=this.GetLogicalObject(t.target)},n.prototype.OnMouseWheel=function(t){if(H.isZoomable(this._chart)){var e=null!=t.wheelDelta?t.wheelDelta:0,n=this._getRelativePosition(t.pageX,t.pageY);if(this._panZoomHandler){var i=this._panZoomHandler.processMouseWheel(n,e);i&&(t.preventDefault(),t.stopPropagation(),this._callback.call(this._callbackObj,i),this._dataCursorHandler&&this._dataCursorHandler.processMove(n))}}},n.prototype.ShowFocusEffect=function(e,i){if(this._dataCursorHandler){var r=i.getDataPosition();if(r){var o=this._chart.__getPlotAreaSpace();this._dataCursorHandler.processMove(new t.Point(r.x+o.x,r.y+o.y))}}n.superclass.ShowFocusEffect.call(this,e,i)},n.prototype.OnBlur=function(t){this._dataCursorHandler&&this._dataCursorHandler.processEnd(),n.superclass.OnBlur.call(this,t)},n.prototype.OnClickInternal=function(t){var e=this.GetLogicalObject(t.target),n=this._getRelativePosition(t.pageX,t.pageY);this.SeriesFocusHandler&&this.SeriesFocusHandler.processSeriesFocus(n,e),e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},n.prototype.OnDblClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.isSelectable&&e.isSelectable()&&this.processDrillEvent(e)},n.prototype.HandleTouchHoverStartInternal=function(t){var e=this.GetLogicalObject(t.target);return this.TouchManager.setTooltipEnabled(t.touch.identifier,this.getTooltipsEnabled(e)),!1},n.prototype.HandleTouchHoverMoveInternal=function(t){var e=this.GetLogicalObject(t.target);return this.TouchManager.setTooltipEnabled(t.touch.identifier,this.getTooltipsEnabled(e)),!1},n.prototype.HandleTouchHoverEndInternal=function(t){var e=this.GetLogicalObject(t.target);e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},n.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},n.prototype.HandleTouchDblClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.isSelectable&&e.isSelectable()&&(t.preventDefault(),t.stopPropagation(),this.processDrillEvent(e))},n.prototype.processActionEvent=function(e){e&&e.getAction&&e.getAction()&&this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()))},n.prototype.processDrillEvent=function(e){if(e&&e.isDrillable&&e.isDrillable()){var n=e.getId();e instanceof r?this.FireEvent(t.EventFactory.newChartDrillEvent(n.getId?n.getId():n,e.getSeries(),e.getGroup())):e instanceof A&&this.FireEvent(t.EventFactory.newChartDrillEvent(n.getId(),n.getSeries(),n.getGroup()))}},n.prototype.ProcessRolloverEvent=function(e,n,i){var r=this._chart.getOptions();if("dim"==H.getHoverBehavior(this._chart)){var o=n.getCategories?n.getCategories():[];r.highlightedCategories=i?o.slice():null;var a=t.EventFactory.newCategoryHighlightEvent(r.highlightedCategories,i),s=V.getHoverBehaviorDelay(this._chart),l=this._chart.getObjects();this._chart.pieChart&&(l=l.concat(this._chart.pieChart.__getSlices())),this.RolloverHandler.processEvent(a,l,s,"any"==r.highlightMatch)}},n.prototype._onTouchDragStart=function(t){var e,n,i=t.touches;if(1==i.length){var r=this._getRelativePosition(i[0].pageX,i[0].pageY),o=this._getDragHandler();o?e=o.processDragStart(r,!0):this._dataCursorHandler&&(this._dataCursorHandler.processMove(r),n=!0)}else if(2==i.length&&this._panZoomHandler&&H.isZoomable(this._chart)){this.endDrag();var a=this._getRelativePosition(i[0].pageX,i[0].pageY),s=this._getRelativePosition(i[1].pageX,i[1].pageY);e=this._panZoomHandler.processPinchStart(a,s)}return e&&(this._callback.call(this._callbackObj,e),this.getCtx().getTooltipManager().hideTooltip()),!(!e&&!n)&&(t.preventDefault(),t.stopPropagation(),this.setDragButtonsVisible(!1),!0)},n.prototype._onTouchDragMove=function(t){var e,n,i=t.touches;if(1==i.length){var r=this._getRelativePosition(i[0].pageX,i[0].pageY),o=this._getDragHandler();o?e=o.processDragMove(r,!0):this._dataCursorHandler&&(this._dataCursorHandler.processMove(r),n=!0)}else if(2==i.length&&this._panZoomHandler&&H.isZoomable(this._chart)){var a=this._getRelativePosition(i[0].pageX,i[0].pageY),s=this._getRelativePosition(i[1].pageX,i[1].pageY);e=this._panZoomHandler.processPinchMove(a,s)}(e||n)&&t.preventDefault(),e&&(this._callback.call(this._callbackObj,e),this.getCtx().getTooltipManager().hideTooltip())},n.prototype._onTouchDragEnd=function(t){var e,n=this.endDrag();this._panZoomHandler&&H.isZoomable(this._chart)&&(e=this._panZoomHandler.processPinchEnd(),e&&this._callback.call(this._callbackObj,e)),(n||e)&&(t.preventDefault(),this.getCtx().getTooltipManager().hideTooltip()),this._stageAbsolutePosition=null,this.setDragButtonsVisible(!0)},n.prototype.endDrag=function(){var t,e=this._getDragHandler();return e&&(t=e.processDragEnd(null,!0),t&&this._callback.call(this._callbackObj,t)),this._dataCursorHandler&&this._dataCursorHandler.processEnd(),t&&this._callback.call(this._callbackObj,t),t},n.prototype.zoomBy=function(t){if(this._panZoomHandler&&H.isZoomable(this._chart)){var e=this._panZoomHandler.zoomBy(t);e&&this._callback.call(this._callbackObj,e)}},n.prototype.panBy=function(t,e){if(this._panZoomHandler&&H.isScrollable(this._chart)){var n=this._panZoomHandler.panBy(t,e);n&&this._callback.call(this._callbackObj,n)}},n.prototype.hideHoverFeedback=function(){this.hideTooltip(),this._dataCursorHandler&&this._dataCursorHandler.processEnd()},n.prototype.hideTooltip=function(){this._dataCursorHandler&&this._dataCursorHandler.isDataCursorShown()||n.superclass.hideTooltip.call(this)},n.prototype.getTooltipsEnabled=function(t){return(!this._dataCursorHandler||!(t instanceof r||t instanceof o||this._dataCursorHandler.isDataCursorShown()))&&n.superclass.getTooltipsEnabled.call(this)},n.prototype.getDataCursorHandler=function(){return this._dataCursorHandler},n.prototype.setDataCursorHandler=function(t){this._dataCursorHandler=t},n.prototype.setPanZoomHandler=function(t){this._panZoomHandler=t},n.prototype.setMarqueeZoomHandler=function(t){this._marqueeZoomHandler=t},n.prototype.setMarqueeSelectHandler=function(t){this._marqueeSelectHandler=t},n.prototype.cancelMarquee=function(t){this._dragMode==n.DRAG_MODE_ZOOM?this._marqueeZoomHandler.cancelMarquee()&&t.preventDefault():this._dragMode==n.DRAG_MODE_SELECT&&this._marqueeSelectHandler&&this._marqueeSelectHandler.cancelMarquee()&&this._chart.render()},n.prototype.getDragMode=function(){return this._dragMode},n.prototype.setDragMode=function(t){null==t?this._dragMode=this._getDefaultDragMode():this._dragMode=t,!this._chart.xAxis.isFullViewport()||this._chart.yAxis&&!this._chart.yAxis.isFullViewport()||this.autoToggleZoomButton()},n.prototype._getDefaultDragMode=function(){return t.Agent.isTouchDevice()?n.DRAG_MODE_OFF:H.isScrollable(this._chart)?n.DRAG_MODE_PAN:"multiple"==this._chart.getOptions().selectionMode?n.DRAG_MODE_SELECT:null},n.prototype.onZoomButtonClick=function(t){this.zoomButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(n.DRAG_MODE_ZOOM)):this.setDragMode(null)},n.prototype.onPanButtonClick=function(t){this.panButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(n.DRAG_MODE_PAN)):this.setDragMode(null)},n.prototype.onSelectButtonClick=function(t){this.selectButton.isToggled()?(this.zoomButton&&this.zoomButton.setToggled(!1),this.panButton&&this.panButton.setToggled(!1),this.setDragMode(n.DRAG_MODE_SELECT)):this.setDragMode(null)},n.prototype.setDragButtonsVisible=function(t){t&&!this._dragButtonsVisible?(this._chart.showDragButtons(),this._dragButtonsVisible=!0):!t&&this._dragButtonsVisible&&(this._chart.hideDragButtons(),this._dragButtonsVisible=!1)},n.prototype.areDragButtonsVisible=function(){return this._dragButtonsVisible},n.prototype.autoToggleZoomButton=function(){!t.Agent.isTouchDevice()&&this.zoomButton&&(this._chart.xAxis.isFullViewport()&&this._chart.yAxis.isFullViewport()?this._dragMode==n.DRAG_MODE_PAN&&(this.zoomButton.setToggled(!0),this.onZoomButtonClick(null)):this._dragMode==n.DRAG_MODE_ZOOM&&(this.zoomButton.setToggled(!1),this.onZoomButtonClick(null)))},n.prototype.GetTouchResponse=function(){return this._dragMode&&this._dragMode!=n.DRAG_MODE_OFF?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:this._chart.getOptions().touchResponse},n.prototype.isDndSupported=function(){return!0},n.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof r&&e.getSeriesIndex()>=0&&e.getGroupIndex()>=0||e instanceof A?"items":null},n.prototype.GetDragDataContexts=function(){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var t=this._chart.getSelectionHandler().getSelection(),e=[],n=0;n<t.length;n++){var i=F.getDataContext(this._chart,t[n].getSeriesIndex(),t[n].getGroupIndex(),t[n].getNestedDataItemIndex());e.push(i)}return e}var o=this.DragSource.getDragObject();return o instanceof r?[F.getDataContext(this._chart,o.getSeriesIndex(),o.getGroupIndex(),o.getNestedDataItemIndex())]:o instanceof A?[F.getDataContext(this._chart,o.getSeriesIndex(),0)]:null},n.prototype.GetDropOffset=function(e){var n=this.DragSource.getDragObject();if(n instanceof r){var i=n.getDataPosition();if(i){i=this._chart.getPlotArea().localToStage(i);var o=this._getRelativePosition(e.pageX,e.pageY);return new t.Point(i.x-o.x,i.y-o.y)}}return null},n.prototype.GetDropTargetType=function(t){var e=this._getRelativePosition(t.pageX,t.pageY),n=this._chart.__getPlotAreaSpace();return n.containsPoint(e.x,e.y)?"plotArea":B.isAxisRendered(this._chart,"x")&&B.axisContainsPoint(this._chart.xAxis,e)?"xAxis":B.isAxisRendered(this._chart,"y")&&B.axisContainsPoint(this._chart.yAxis,e)?"yAxis":B.isAxisRendered(this._chart,"y2")&&B.axisContainsPoint(this._chart.y2Axis,e)?"y2Axis":null},n.prototype.GetDropEventPayload=function(e){var n=e.getNativeEvent().dataTransfer,i=Number(n.getData(t.EventManager.DROP_OFFSET_X_DATA_TYPE))||0,r=Number(n.getData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE))||0,o=this._getRelativePosition(e.pageX,e.pageY);return this._chart.getValuesAt(o.x+i,o.y+r)},n.prototype.ShowDropEffect=function(t){var e=this.GetDropTargetType(t),n=this._chart.getOptions()._dropColor;if("plotArea"==e){var i=this._chart.getCache().getFromCache("plotAreaBackground");i&&i.setSolidFill(n)}else"xAxis"==e?this._chart.xAxis.getCache().getFromCache("background").setSolidFill(n):"yAxis"==e?this._chart.yAxis.getCache().getFromCache("background").setSolidFill(n):"y2Axis"==e&&this._chart.y2Axis.getCache().getFromCache("background").setSolidFill(n)},n.prototype.ClearDropEffect=function(){var t=this._chart.getCache().getFromCache("plotAreaBackground");if(t){var e=V.getBackgroundColor(this._chart);e?t.setSolidFill(e):t.setInvisibleFill()}var n=function(t){if(t){var e=t.getCache().getFromCache("background");e&&e.setInvisibleFill()}};n(this._chart.xAxis),n(this._chart.yAxis),n(this._chart.y2Axis)};var i=function(t,e){this.Init(t,e)};t.Obj.createSubclass(i,t.KeyboardHandler),i.prototype.Init=function(t,e){i.superclass.Init.call(this,t),this._chart=e},i.prototype.isSelectionEvent=function(t){return this.isNavigationEvent(t)&&!t.ctrlKey},i.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey},i.prototype.processKeyDown=function(e){var n=e.keyCode;if(n==t.KeyboardEvent.TAB){var r=this._eventManager.getFocus();if(r)return t.EventManager.consumeEvent(e),r;var o=H.getKeyboardNavigables(this._chart);if(o.length>0)return t.EventManager.consumeEvent(e),this.getDefaultNavigable(o)}else if(n==t.KeyboardEvent.ENTER){var r=this._eventManager.getFocus();if(r)return this._eventManager.processActionEvent(r),this._eventManager.processDrillEvent(r),t.EventManager.consumeEvent(e),r}else n==t.KeyboardEvent.ESCAPE?this._eventManager.cancelMarquee(e):n==t.KeyboardEvent.PAGE_UP?((e.ctrlKey||e.shiftKey||W.isBLAC(this._chart))&&W.isVertical(this._chart)?this._eventManager.panBy(-.25,0):this._eventManager.panBy(0,-.25),t.EventManager.consumeEvent(e)):n==t.KeyboardEvent.PAGE_DOWN?((e.ctrlKey||e.shiftKey||W.isBLAC(this._chart))&&W.isVertical(this._chart)?this._eventManager.panBy(.25,0):this._eventManager.panBy(0,.25),t.EventManager.consumeEvent(e)):t.KeyboardEvent.isEquals(e)||t.KeyboardEvent.isPlus(e)?this._eventManager.zoomBy(1.5):(t.KeyboardEvent.isMinus(e)||t.KeyboardEvent.isUnderscore(e))&&this._eventManager.zoomBy(1/1.5);return i.superclass.processKeyDown.call(this,e)},i.prototype.getDefaultNavigable=function(t){if(!t||t.length<=0)return null;for(var e,n,i,r,o=W.isPie(this._chart),a=0;a<t.length;a++)r=t[a],!e||r.getSeriesIndex()<n?(e=r,n=r.getSeriesIndex(),o||(i=r.getGroupIndex())):!o&&r.getGroupIndex()<i&&(e=r,n=r.getSeriesIndex(),i=r.getGroupIndex());return e};var r=function(t,e,n,i,r,o){this.Init(t,e,n,i,r,o)};t.Obj.createSubclass(r,t.Obj),r.prototype.Init=function(e,n,i,r,o,a){if(this._chart=e,this._displayables=n,this._seriesIndex=null!=i&&i>=0?i:-1,this._groupIndex=null!=r&&r>=0?r:-1,this._itemIndex=null!=o&&o>=0?o:-1,this._dataPos=a,this._isSelected=!1,this._isShowingKeyboardFocusEffect=!1,this._series=F.getSeries(e,i),this._group=F.getGroup(e,r),this._categories=F.getCategories(e,i,r,o),this._itemIndex!=-1)this._dataItemId=F.getNestedDataItemId(e,i,r,o),this._drillable=H.isDataItemDrillable(e,i,r,o);else if(this._groupIndex!=-1){var s=F.getDataItem(e,i,r);s&&(this._dataItemId=F.getDataItemId(e,i,r),this._action=s.action,this._drillable=H.isDataItemDrillable(e,i,r),this._stampId=s._id)}else{var l=F.getSeriesItem(e,i);l&&(this._action=l.action,this._drillable=H.isSeriesDrillable(e,i),this._stampId=l._id)}if(this._action||this._drillable)for(var u=0;u<this._displayables.length;u++)this._displayables[u].setCursor(t.SelectionEffectUtils.getSelectingCursor());for(var h=0;h<n.length;h++){var c=n[h];c instanceof _||c.setAriaRole("img"),this._updateAriaLabel(c)}},r.associate=function(t,e,n,i,o,a){if(t){var s=new r(e,[t],n,i,o,a);e.registerObject(s),e.getEventManager().associate(t,s)}},r.prototype.getId=function(){return this._seriesIndex>=0&&this._groupIndex>=0?new a(this._dataItemId,this.getSeries(),this.getGroup()):this._seriesIndex>=0?this.getSeries():null},r.prototype.getDataItemId=function(){return this._dataItemId},r.prototype.getNestedDataItemIndex=function(){return this._itemIndex},r.prototype.getSeries=function(){return this._series},r.prototype.getSeriesIndex=function(){return this._seriesIndex},r.prototype.getGroup=function(){return this._group},r.prototype.getGroupIndex=function(){return this._groupIndex},r.prototype.getAction=function(){return this._action},r.prototype.isDrillable=function(){return this._drillable},r.prototype.isDoubleClickable=function(){return this.isSelectable()&&this.isDrillable()},r.prototype.getChart=function(){return this._chart},r.prototype.getSeriesType=function(){return V.getSeriesType(this._chart,this._seriesIndex)},r.prototype.getSeriesItem=function(){return F.getSeriesItem(this._chart,this._seriesIndex)},r.prototype.getDatatip=function(t){return K.getDatatip(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex,!0)},r.prototype.getDatatipColor=function(){return K.getDatatipColor(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex)},r.prototype.isSelectable=function(){return V.isSelectable(this.getChart(),this.getSeriesIndex(),this.getGroupIndex())},r.prototype.isSelected=function(){return this._isSelected},r.prototype.setSelected=function(t){this._isSelected=t;for(var e=0;e<this._displayables.length;e++)this._displayables[e].setSelected&&(this._displayables[e].setSelected(t),this._updateAriaLabel(this._displayables[e]))},r.prototype.showHoverEffect=function(){for(var t=0;t<this._displayables.length;t++)this._displayables[t].showHoverEffect&&this._displayables[t].showHoverEffect()},r.prototype.hideHoverEffect=function(){for(var t=0;t<this._displayables.length;t++)this._displayables[t].hideHoverEffect&&this._displayables[t].hideHoverEffect()},r.prototype.getShowPopupBehaviors=function(){return this._chart.getShowPopupBehaviors(this._stampId)},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getAriaLabel=function(){var e=[],n=this.getChart().getOptions();this.isSelectable()&&e.push(t.Bundle.getTranslation(n,this.isSelected()?"stateSelected":"stateUnselected",t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),this.isDrillable()&&e.push(t.Bundle.getTranslation(n,"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE"));var i=K.getDatatip(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex,!1);return null==i&&this._groupIndex<0&&e.length>0&&(i=F.getSeriesLabel(this._chart,this._seriesIndex)),t.Displayable.generateAriaLabel(i,e)},r.prototype._updateAriaLabel=function(e){t.Agent.deferAriaCreation()||e.setAriaProperty("label",this.getAriaLabel())},r.prototype.getCategories=function(t){return this._categories},r.prototype.getDataPosition=function(){return this._dataPos},r.prototype.getNextNavigable=function(e){var n,i;if(n=e.keyCode,e.type==t.MouseEvent.CLICK)return this;if(n==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;for(var r=this._chart,o=r.getChartObjPeers(),a=[],s=0;s<o.length;s++)o[s].isNavigable()&&a.push(o[s]);var l=e.keyCode==t.KeyboardEvent.UP_ARROW||e.keyCode==t.KeyboardEvent.DOWN_ARROW,u=W.isHorizontal(r),h=t.Agent.isRightToLeft(r.getCtx());return W.isScatterBubble(r)||W.isBoxPlot(r)&&(l&&!u||!l&&u)?i=t.KeyboardHandler.getNextAdjacentNavigable(this,e,a):W.isLineArea(r)||W.isStacked(r)||W.isPolar(r)?i=this._findNextNavigable(e):W.isFunnel(r)&&l?(h&&!u?e.keyCode=e.keyCode==t.KeyboardEvent.UP_ARROW?t.KeyboardEvent.RIGHT_ARROW:t.KeyboardEvent.LEFT_ARROW:e.keyCode=e.keyCode-1,i=t.KeyboardHandler.getNextNavigable(this,e,a)):W.isPyramid(r)&&!l?(h?e.keyCode=e.keyCode==t.KeyboardEvent.RIGHT_ARROW?t.KeyboardEvent.DOWN_ARROW:t.KeyboardEvent.UP_ARROW:e.keyCode=e.keyCode==t.KeyboardEvent.RIGHT_ARROW?t.KeyboardEvent.UP_ARROW:t.KeyboardEvent.DOWN_ARROW,i=t.KeyboardHandler.getNextNavigable(this,e,a)):i=t.KeyboardHandler.getNextNavigable(this,e,a,!0),i},r.prototype.getKeyboardBoundingBox=function(e){return this._displayables[0]?this._displayables[0].getDimensions(e):new t.Rectangle(0,0,0,0)},r.prototype.getTargetElem=function(){return this._displayables[0]?this._displayables[0].getElem():null},r.prototype.showKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect())},r.prototype.hideKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect())},r.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},r.prototype.isNavigable=function(){return this.getGroupIndex()!=-1&&this.getSeriesIndex()!=-1},r.prototype._findNextNavigable=function(e){var n,i,r=e.keyCode,o=this._chart,a=o.getCtx(),s=this.getSeriesIndex(),l=this.getGroupIndex(),u=F.getGroupCount(o),h=W.isHorizontal(o),c=W.isPolar(o),d=t.Agent.isRightToLeft(a),p=h?d?r==t.KeyboardEvent.LEFT_ARROW:r==t.KeyboardEvent.RIGHT_ARROW:r==t.KeyboardEvent.UP_ARROW,g=h?d?r==t.KeyboardEvent.RIGHT_ARROW:r==t.KeyboardEvent.LEFT_ARROW:r==t.KeyboardEvent.DOWN_ARROW,f=h?r==t.KeyboardEvent.UP_ARROW:d?r==t.KeyboardEvent.RIGHT_ARROW:r==t.KeyboardEvent.LEFT_ARROW,_=h?r==t.KeyboardEvent.DOWN_ARROW:d?r==t.KeyboardEvent.LEFT_ARROW:r==t.KeyboardEvent.RIGHT_ARROW;if(p)i=l,n=this._findNextUpSeries(o,s,l);else if(g)i=l,n=this._findNextDownSeries(o,s,l);else if(_){n=s,i=l;do i++,c&&i>=u&&(i=0);while(null==o.getObject(n,i)&&i<u)}else if(f){n=s,i=l;do i--,c&&i<0&&(i=u-1);while(null==o.getObject(n,i)&&i>-1)}var m=o.getObject(n,i);return m&&m.isNavigable()?m:this},r.prototype._findNextUpSeries=function(t,e,n){for(var i=F.getSeriesCount(t),r=F.getCumulativeValue(t,e,n),o=null,a=null,s=0;s<i;s++)if(V.isSeriesRendered(t,s)){var l=F.getCumulativeValue(t,s,n);(l>r||l==r&&s>e)&&(null!==o&&l<o||null==o)&&(o=l,a=s)}return a},r.prototype._findNextDownSeries=function(t,e,n){for(var i=F.getSeriesCount(t),r=F.getCumulativeValue(t,e,n),o=null,a=null,s=i-1;s>=0;s--)if(V.isSeriesRendered(t,s)){var l=F.getCumulativeValue(t,s,n);(l<r||l==r&&s<e)&&(null!==o&&l>o||null==o)&&(o=l,a=s)}return a},r.prototype.isDragAvailable=function(t){return!0},r.prototype.getDragTransferable=function(t,e){return[this.getId()]},r.prototype.getDragFeedback=function(t,e){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var n=this._chart.getSelectionHandler().getSelection(),i=[],r=0;r<n.length;r++)i=i.concat(n[r].getDisplayables());return i}return this._displayables};var o=function(t,e,n,i,r){this.Init(t,e,n,i,r)};t.Obj.createSubclass(o,t.Obj),o.prototype.Init=function(t,e,n,i,r){this._chart=t,this._displayables=e,this._refObj=n,this._categories=j.getRefObjCategories(this._refObj),this._index=i,this._axisType=r;for(var o=0;o<e.length;o++){var a=e[o];a.setAriaRole("img"),a.setAriaProperty("label",n.shortDesc)}},o.prototype.getCategories=function(){return this._categories},o.prototype.getDisplayables=function(){return this._displayables},o.prototype.getIndex=function(){return this._index},o.prototype.getAxisType=function(){return this._axisType},o.prototype.getDatatip=function(t){return K.getRefObjTooltip(this._chart,this._refObj,this._axisType,this._index)},o.prototype.getDatatipColor=function(){return j.getColor(this._refObj)};var a=function(t,e,n){this.id=t,this.series=e,this.group=n};t.Obj.createSubclass(a,t.Obj),a.prototype.getId=function(){return this.id},a.prototype.getSeries=function(){return this.series},a.prototype.getGroup=function(){return this.group},a.prototype.equals=function(t){return t instanceof a&&(null!=this.id||null!=t.id?F.isEqualId(this.id,t.id):F.isEqualId(this.series,t.series)&&F.isEqualId(this.group,t.group))};var s=function(){this.Init({skyros:s.VERSION_1,alta:s.SKIN_ALTA,next:s.SKIN_NEXT})};t.Obj.createSubclass(s,t.BaseComponentDefaults),s.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,styleDefaults:{dataItemGaps:"auto",markerSize:10,marqueeColor:"rgba(255,255,255,0.4)",marqueeBorderColor:"#0572ce"},yAxis:{axisLine:{rendered:"auto"}},y2Axis:{axisLine:{rendered:"auto"}},layout:{titlePlotAreaGap:16,footnoteGap:10,legendGapWidth:15,legendGapHeight:10,tickLabelGapHeight:8,tickLabelGapWidth:9}},s.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,title:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_13+"color: #252525;")},subtitle:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA+"color: #252525;")},footnote:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11)},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_13+"color: #252525;"),pieCenter:{labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},styleDefaults:{seriesEffect:"color",colors:t.CSSStyle.COLORS_ALTA,dataLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),stackLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD),stockRisingColor:"#6b6f74",stockFallingColor:"#ED6647"}},s.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,emptyText:null,type:"bar",stack:"off",stackLabel:"off",orientation:"vertical",polarGridShape:"circle",selectionMode:"none",hideAndShowBehavior:"none",hoverBehavior:"none",zoomAndScroll:"off",zoomDirection:"auto",initialZooming:"none",dragMode:"user",sorting:"off",otherThreshold:0,animationOnDataChange:"none",animationOnDisplay:"none",__sparkBarSpacing:"subpixel",__spark:!1,dataCursor:"auto",dataCursorBehavior:"auto",drilling:"off",highlightMatch:"all",series:[],groups:[],title:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b; font-weight: bold"),halign:"start"},subtitle:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b;")},footnote:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 10px; color: #333333;"),halign:"start"},titleSeparator:{upperColor:"#74779A",lowerColor:"#FFFFFF",rendered:"off"},touchResponse:"auto",_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b; font-weight: bold"),_dropColor:"#D9F4FA",xAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33},yAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33},y2Axis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",maxSize:.33,alignTickMarks:"on"},zAxis:{},pieCenter:{labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS)},plotArea:{backgroundColor:null},legend:{position:"auto",rendered:"auto",maxSize:.3,layout:{gapRatio:1},seriesSection:{},referenceObjectSection:{},sections:[]},overview:{rendered:"off"},dnd:{drag:{items:{},series:{},groups:{}},drop:{plotArea:{},xAxis:{},yAxis:{},y2Axis:{},legend:{}}},styleDefaults:{colors:t.CSSStyle.COLORS_SKYROS,borderColor:"auto",borderWidth:"auto",patterns:["smallDiagonalRight","smallChecker","smallDiagonalLeft","smallTriangle","smallCrosshatch","smallDiamond","largeDiagonalRight","largeChecker","largeDiagonalLeft","largeTriangle","largeCrosshatch","largeDiamond"],shapes:["square","circle","diamond","plus","triangleDown","triangleUp"],seriesEffect:"gradient",threeDEffect:"off",selectionEffect:"highlight",animationDuration:1e3,animationIndicators:"all",animationUpColor:"#0099FF",animationDownColor:"#FF3300",lineStyle:"solid",lineType:"auto",markerDisplayed:"auto",markerColor:null,markerShape:"auto",markerSize:8,marqueeColor:"rgba(255,255,255,0.5)",marqueeBorderColor:"rgba(0,0,0,0.2)",pieFeelerColor:"#BAC5D6",pieInnerRadius:0,selectedInnerColor:"#ffffff",selectedOuterColor:"#5a5a5a",sliceLabelType:"percent",otherColor:"#4b4b4b",stockRisingColor:"#006666",stockFallingColor:"#CC3300",stockRangeColor:"#B8B8B8",dataItemGaps:"0%",dataLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+t.BaseComponentDefaults.FONT_SIZE_11),dataLabelPosition:"auto",funnelBackgroundColor:"#EDEDED",x1Format:{},y1Format:{},y2Format:{},zFormat:{},_defaultSliceLabelColor:"#333333",_scrollbarHeight:3,_scrollbarTrackColor:"#F0F0F0",_scrollbarHandleColor:"#9E9E9E",hoverBehaviorDelay:200,dataCursor:{markerSize:8,markerDisplayed:"on",lineColor:"#5a5a5a",lineWidth:2,lineStyle:"solid"},groupSeparators:{rendered:"on",color:"rgba(138,141,172,0.4)"},padding:"auto",_tooltipStyle:new t.CSSStyle("border-collapse: separate; border-spacing: 2px; overflow: hidden; display: block;"),
tooltipLabelStyle:new t.CSSStyle("color: #666666; padding: 0px 2px; white-space: nowrap;"),tooltipValueStyle:new t.CSSStyle("color: #333333; padding: 0px 2px;"),stackLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+t.BaseComponentDefaults.FONT_SIZE_11),boxPlot:{whiskerStyle:{},whiskerEndStyle:{strokeWidth:2},whiskerEndLength:9,medianStyle:{strokeWidth:3}}},layout:{gapWidthRatio:null,gapHeightRatio:null,outerGapWidth:10,outerGapHeight:8,titleSubtitleGapWidth:14,titleSubtitleGapHeight:4,titleSeparatorGap:6,titlePlotAreaGap:10,footnoteGap:7,verticalAxisGap:6,legendGapWidth:10,legendGapHeight:10,tickLabelGapHeight:5,tickLabelGapWidth:7},_locale:"en-us",_resources:{}},s.getGapWidth=function(t,e){return Math.ceil(e*t.getGapWidthRatio())},s.getGapHeight=function(t,e){return Math.ceil(e*t.getGapHeightRatio())},s.isSkyrosSkin=function(e){return e.getSkin()==t.CSSStyle.SKIN_SKYROS},s.isPostAltaSkin=function(e){return e.getSkin()!=t.CSSStyle.SKIN_SKYROS&&e.getSkin()!=t.CSSStyle.SKIN_ALTA},s.prototype.getNoCloneObject=function(t){return{}};var l=function(t,e){this.Init(t,e)};t.Obj.createSubclass(l,t.Obj),l.prototype.Init=function(t,e){this._context=t.getCtx(),this._dataCursorShown=!1,this._dataCursor=e,this._chart=t},l.prototype.processMove=function(t,e){var n=this._chart.__getPlotAreaSpace();return n&&n.containsPoint(t.x,t.y)?(this._showDataCursor(n,t.x,t.y,e),!0):(this._removeDataCursor(e),!1)},l.prototype.processEnd=function(t){this._removeDataCursor(t)},l.prototype.processOut=function(t,e){var n=this._chart.__getPlotAreaSpace();n&&!n.containsPoint(t.x,t.y)&&this._removeDataCursor(e)},l.prototype._showDataCursor=function(t,e,n,i){if(this._context.isOffscreen())return void this._removeDataCursor(i);var r=this._dataCursor,o=this._getClosestMatch(e,n);if(null==o)return void this._removeDataCursor(i);var a=o.matchRegion.getCenter(),s=e,l=n;r.getBehavior()==C.BEHAVIOR_SNAP&&(r.isHorizontal()?l=Math.min(Math.max(a.y,t.y),t.y+t.h):s=Math.min(Math.max(a.x,t.x),t.x+t.w));var u=o.logicalObject,h=K.getDatatip(this._chart,u.getSeriesIndex(),u.getGroupIndex(),u.getNestedDataItemIndex(),!0);if(null==h)return void r.setVisible(!1);r.setVisible(!0);var c=K.getDatatipColor(this._chart,u.getSeriesIndex(),u.getGroupIndex(),u.getNestedDataItemIndex()),d=r.isHorizontal()?l:s;if(r.render(t,a.x,a.y,d,h,c),this._dataCursorShown=!0,!i){var p=this._chart.getValuesAt(e,n);this._chart.changeOption("dataCursorPosition",p)}},l.prototype._removeDataCursor=function(t){this._dataCursor.getVisible()&&this._dataCursor.setVisible(!1),this._context.getTooltipManager(C.TOOLTIP_ID).hideTooltip(),this._dataCursorShown=!1,t||this._chart.changeOption("dataCursorPosition",null)},l.prototype.isDataCursorShown=function(){return this._dataCursorShown},l._getClosestMatchSecondDirection=function(t,e,n,i){for(var r=null,o=1/0,a=0;a<t.length;a++){var s=t[a],l=e?s.matchRegion.x:s.matchRegion.y,u=e?s.matchRegion.x+s.matchRegion.w:s.matchRegion.y+s.matchRegion.h,h=e?n:i,c=(l+u)/2,d=Math.round(Math.abs(c-h));d<o&&(o=d,r=s)}return r},l._getClosestMatchesFirstDirection=function(t,e,n,i){for(var r=1/0,o=new Array,a=0;a<t.length;a++){var s=t[a],l=e?s.matchRegion.y:s.matchRegion.x,u=e?s.matchRegion.y+s.matchRegion.h:s.matchRegion.x+s.matchRegion.w,h=e?i:n,c=(l+u)/2,d=Math.round(Math.abs(c-h));d<=r&&(d<r&&(o=new Array),o.push(s),r=d)}return o},l.prototype._findMatches=function(){var t=this._context.getStage(),e=this._chart.getEventManager(),n=[];if(!this._chart._currentMarkers)return null;for(var i=0;i<this._chart._currentMarkers.length;i++)for(var r=this._chart._currentMarkers[i],o=r.length,a=0;a<o;a++){var s=r[a],l=e.GetLogicalObject(s),u=s.getDimensionsSelf?s.getDimensionsSelf(t):s.getDimensions(t),h={matchRegion:u,logicalObject:l};n.push(h)}return n},l.prototype._getClosestMatch=function(t,e){var n=W.isHorizontal(this._chart),i=W.isLineArea(this._chart)&&!B.isMixedFrequency(this._chart),r=this._findMatches(),o=l._getClosestMatchesFirstDirection(r,n,t,e);if(!W.isScatterBubble(this._chart)){for(var a=1/0,s=-(1/0),u=null,h=0;h<o.length;h++){var c=o[h];a=Math.min(a,n?c.matchRegion.y:c.matchRegion.x),s=Math.max(s,n?c.matchRegion.y+c.matchRegion.h:c.matchRegion.x+c.matchRegion.w),u=c.logicalObject.getGroupIndex()}for(var h=0;h<r.length;h++){var d=r[h],p=d.logicalObject.getGroupIndex();if(i)u==p&&o.push(d);else{var g=n?d.matchRegion.y:d.matchRegion.x,f=n?d.matchRegion.y+d.matchRegion.h:d.matchRegion.x+d.matchRegion.w,_=(g+f)/2;s>=_&&a<=_&&o.push(d)}}}return l._getClosestMatchSecondDirection(o,n,t,e)};var u=function(t,e,n,i,r,o,a,s,l,u){this.Init(t,null,u),this.setWedgeParams(e,n,i,r,o,a,s,l)};t.Obj.createSubclass(u,t.Path),u._OUTER_BORDER_WIDTH=2,u._OUTER_BORDER_WIDTH_HOVER=1.25,u._INNER_BORDER_WIDTH=1,u.prototype.Init=function(t,e,n){u.superclass.Init.call(this,t,e,n)},u.prototype.setWedgeParams=function(t,e,n,i,r,o,a,s){this._cx=t,this._cy=e,this._rx=n,this._ry=i,this._sa=r,this._ae=o,this._gap=a,this._ir=s;var l=this._makeWedgePath(0);this.setCmds(l)},u.prototype._makeWedgePath=function(e){var n,i=Math.max(this._rx-e,0),r=Math.max(this._ry-e,0),o=360==this._ae||i<e?0:this._gap+2*e,a=this._ir?this._ir+e:0,s=360==this._ae?t.Math.degreesToRads(359.99):t.Math.degreesToRads(this._ae),l=t.Math.degreesToRads(this._sa),u=o/2,h=u<i?Math.asin(u/i):0,c=-s/2-l,d=Math.min(5*u,s>0?Math.abs(u/Math.sin(s/2)):0),p=0==i?d:d*r/i,g=this._cx+Math.cos(c)*d,f=this._cy+Math.sin(c)*p,_=this._cx+Math.cos(-h-l)*i,m=this._cy+Math.sin(-h-l)*r,v=this._cx+Math.cos(-l-s+h)*i,y=this._cy+Math.sin(-l-s+h)*r;if(a>0){var S=u<a?Math.asin(u/a):0,C=this._cx+Math.cos(-S-l)*a,b=this._cy+Math.sin(-S-l)*a,E=this._cx+Math.cos(-l-s+S)*a,T=this._cy+Math.sin(-l-s+S)*a;360==this._ae?(n=t.PathUtils.moveTo(v,y),n+=t.PathUtils.arcTo(i,r,s,1,_,m),n+=t.PathUtils.lineTo(v,y),n+=t.PathUtils.moveTo(C,b),n+=t.PathUtils.arcTo(a,a,s,0,E,T)):(n=t.PathUtils.moveTo(E,T),n+=t.PathUtils.lineTo(v,y),n+=t.PathUtils.arcTo(i,r,s,1,_,m),n+=t.PathUtils.lineTo(C,b),n+=t.PathUtils.arcTo(a,a,s,0,E,T))}else 360==this._ae?(n=t.PathUtils.moveTo(v,y),n+=t.PathUtils.arcTo(i,r,s,1,_,m)):(n=t.PathUtils.moveTo(g,f),n+=t.PathUtils.lineTo(v,y),n+=t.PathUtils.arcTo(i,r,s,1,_,m));return n+=t.PathUtils.closePath()},u.prototype._initializeSelectionEffects=function(){var e=this.isSelected()?u._OUTER_BORDER_WIDTH:u._OUTER_BORDER_WIDTH_HOVER,n=this._makeWedgePath(e),i=this._makeWedgePath(e+u._INNER_BORDER_WIDTH);return this.OuterChild?(this.OuterChild.setCmds(n),void this.InnerChild.setCmds(i)):(this.OuterChild=new t.Path(this.getCtx(),n),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=new t.Path(this.getCtx(),i),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),void this.addChild(this.InnerChild))},u.prototype._showNestedBorders=function(t,e){this._initializeSelectionEffects(),e?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setSolidFill(e),this.OuterChild.setClassName().setStyle(),this.InnerChild.setFill(this._fill),this.InnerChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle)):t?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setFill(this._fill),this.OuterChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle()):(this.setFill(this._fill),this.setStroke(this._shapeStroke),this.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.OuterChild.setInvisibleFill(),this.OuterChild.setClassName().setStyle(),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle())},u.prototype.setStyleProperties=function(e,n,i,r,o,a,s){this._fill=e,this._shapeStroke=n,this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(i),this._innerColor=r,this._outerColor=o,this._shapeClassName=a,this._shapeStyle=s,this.setStyle(s).setClassName(a),this.setFill(e),n&&this.setStroke(n)},u.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this._showNestedBorders(this._hoverColor,this._innerColor)},u.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders()},u.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},u.prototype.UpdateSelectionEffect=function(){};var h=function(t,e,n){this._x1=Math.min(e[0],e[4]),this._x2=Math.max(e[0],e[4]),this._y1=Math.min(e[1],e[5]),this._y2=Math.max(e[1],e[5]),this.Init(t,[this._x1,this._y1,this._x2,this._y1,this._x2,this._y2,this._x1,this._y2],n)};t.Obj.createSubclass(h,t.Polygon),h.OUTER_BORDER_WIDTH=2,h.OUTER_BORDER_WIDTH_HOVER=1.25,h.INNER_BORDER_WIDTH=1,h.prototype.setStyleProperties=function(e,n,i,r,o,a,s){this._fill=e,this._borderStroke=n,this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(i),this._innerColor=r,this._outerColor=o,this._shapeClassName=a,this._shapeStyle=s,this.setStyle(s).setClassName(a),this.setFill(e),n&&this.setStroke(n)},h.prototype.setAnimationParams=function(t){this._x1=Math.min(t[0],t[4]),this._x2=Math.max(t[0],t[4]),this._y1=Math.min(t[1],t[5]),this._y2=Math.max(t[1],t[5]),this.setPoints(t),this._initializeSelectionEffects()},h.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this._showNestedBorders(this._hoverColor,this._innerColor))},h.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},h.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},h.prototype.UpdateSelectionEffect=function(){},h.prototype.getPrimaryFill=function(){return this._fill},h.prototype._initializeSelectionEffects=function(){var e=this.isSelected()?h.OUTER_BORDER_WIDTH:h.OUTER_BORDER_WIDTH_HOVER,n=this._createPointsArray(e),i=this._createPointsArray(e+h.INNER_BORDER_WIDTH);return this.OuterChild?(this.OuterChild.setPoints(n),void this.InnerChild.setPoints(i)):(this.OuterChild=new t.Polygon(this.getCtx(),n),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=new t.Polygon(this.getCtx(),i),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),void this.addChild(this.InnerChild))},h.prototype._showNestedBorders=function(t,e){this._initializeSelectionEffects(),e?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setSolidFill(e),this.OuterChild.setClassName().setStyle(),this.InnerChild.setFill(this._fill),this.InnerChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle)):t?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setFill(this._fill),this.OuterChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle()):(this.setFill(this._fill),this.setStroke(this._borderStroke),this.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.OuterChild.setInvisibleFill(),this.OuterChild.setClassName().setStyle(),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle())},h.prototype._createPointsArray=function(t){var e=this._x1+t,n=this._x2-t,i=this._y1+t,r=this._y2-t;return[e,i,n,i,n,r,e,r]};var c=function(t,e,n){this.Init(t,e,n)};t.Obj.createSubclass(c,t.Axis),c.prototype.axisToPlotArea=function(t){if("tangential"==this.getOptions().position)return t;if(null==t)return null;var e=t-this.getLeftOverflow();return Math.round(10*e)/10},c.prototype.plotAreaToAxis=function(t,e){if("tangential"==this.getOptions().position)return t;if(null==t)return null;var n=t+this.getLeftOverflow();return e===!1?n:Math.round(n)},c.prototype.linearToActual=function(t){return this.Info.linearToActual(t)},c.prototype.actualToLinear=function(t){return this.Info.actualToLinear(t)},c.prototype.getValueAt=function(t){return this.Info.getValueAt(this.plotAreaToAxis(t))},c.prototype.getCoordAt=function(t){return this.axisToPlotArea(this.Info.getCoordAt(t))},c.prototype.getBoundedValueAt=function(t){return this.Info.getBoundedValueAt(this.plotAreaToAxis(t))},c.prototype.getBoundedCoordAt=function(t){return this.axisToPlotArea(this.Info.getBoundedCoordAt(t))},c.prototype.getUnboundedValueAt=function(t){return this.Info.getUnboundedValueAt(this.plotAreaToAxis(t))},c.prototype.getUnboundedCoordAt=function(t){return this.axisToPlotArea(this.Info.getUnboundedCoordAt(t))},c.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())},c.prototype.getPosition=function(){return this.getOptions().position},c.prototype.isGroupAxis=function(){return this.Info instanceof t.GroupAxisInfo},c.prototype.isTimeAxis=function(){return this.Info instanceof t.TimeAxisInfo},c.prototype.isDataAxis=function(){return this.Info instanceof t.DataAxisInfo},c.prototype.getMajorTickCoords=function(){for(var t=this.Info?this.Info.getMajorTickCoords():[],e=0;e<t.length;e++)t[e]=this.axisToPlotArea(t[e]);return t},c.prototype.getMinorTickCoords=function(){for(var t=this.Info?this.Info.getMinorTickCoords():[],e=0;e<t.length;e++)t[e]=this.axisToPlotArea(t[e]);return t},c.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())},c.prototype.getLinearGlobalMin=function(){return this.actualToLinear(this.Info.getGlobalMin())},c.prototype.getLinearGlobalMax=function(){return this.actualToLinear(this.Info.getGlobalMax())},c.prototype.getLinearViewportMin=function(){return this.actualToLinear(this.Info.getViewportMin())},c.prototype.getLinearViewportMax=function(){return this.actualToLinear(this.Info.getViewportMax())},c.prototype.getUnboundedLinearValueAt=function(t){return this.Info.actualToLinear(this.getUnboundedValueAt(t))},c.prototype.isFullViewport=function(){return this.Info.getViewportMin()==this.Info.getGlobalMin()&&this.Info.getViewportMax()==this.Info.getGlobalMax()},c.prototype.getLeftOverflow=function(){return t.Agent.isRightToLeft(this.getCtx())?this.Info.getEndOverflow():this.Info.getStartOverflow()},c.prototype.getRightOverflow=function(){return t.Agent.isRightToLeft(this.getCtx())?this.Info.getStartOverflow():this.Info.getEndOverflow()},c.prototype.getLength=function(){return Math.abs(this.Info.getStartCoord()-this.Info.getEndCoord())},c.prototype.getMinCoord=function(){return this.axisToPlotArea(Math.min(this.Info.getStartCoord(),this.Info.getEndCoord()))},c.prototype.getMaxCoord=function(){return this.axisToPlotArea(Math.max(this.Info.getStartCoord(),this.Info.getEndCoord()))};var d=function(t,e,n,i,r,o){this.Init(t.getCtx()),this._bHoriz=W.isHorizontal(t),this._bStacked=W.isStacked(t),this._barGapRatio=V.getBarGapRatio(t),this._dataItemGaps=V.getDataItemGaps(t),this._axisCoord=e,this._setBarCoords(n,i,r,o,!0)};t.Obj.createSubclass(d,h),d._INDICATOR_OFFSET=8,d._MIN_BAR_WIDTH_FOR_GAPS=5,d._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING=15,d._MIN_BAR_LENGTH_FOR_GAPS=5,d._MAX_GAP_SIZE=2,d.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isSelected()?(this._tempX1=this._x1,this._tempX2=this._x2,this._tempBaselineCoord=this._baselineCoord,this._x1=this._origX1,this._x2=this._origX2,this._baselineCoord=this._origBaselineCoord,this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:this._outerColor,this._innerColor)):(this._x1=this._tempX1,this._x2=this._tempX2,this._baselineCoord=this._tempBaselineCoord,this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:null)))},d.prototype.getAnimationParams=function(t){return t?this._bHoriz?[this._x2,this._x1,this._baselineCoord,this._endCoord]:[this._x1,this._x2,this._endCoord,this._baselineCoord]:[this._baselineCoord,this._endCoord,this._x1,this._x2]},d.prototype.setAnimationParams=function(t,e){if(this._setBarCoords(t[0],t[1],t[2],t[3],!1),e){var n=this.getIndicatorPosition();e.setTranslate(n.x,n.y),e.setAlpha(1),e.getParent().addChild(e)}},d.prototype.getDisplayAnimation=function(e){var n=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,this._x1,this._x2]);var i=new t.CustomAnimation(this.getCtx(),this,e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,n),i},d.prototype.getDeleteAnimation=function(e){var n=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],i=new t.CustomAnimation(this.getCtx(),this,e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,n),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),i},d.prototype.getInsertAnimation=function(e){this.setAlpha(0);var n=this.getDisplayAnimation(e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),n},d.prototype.getIndicatorPosition=function(){var e,n,i=(this._x1+this._x2)/2;if(this._bStacked){var r=(this._endCoord+this._baselineCoord)/2;e=this._bHoriz?r:i,n=this._bHoriz?i:r}else{var o=this._endCoord>=this._baselineCoord?this._endCoord+d._INDICATOR_OFFSET:this._endCoord-d._INDICATOR_OFFSET;e=this._bHoriz?o:i,n=this._bHoriz?i:o}return new t.Point(e,n)},d.prototype._setBarCoords=function(e,n,i,r,o){this._baselineCoord=e,this._endCoord=n,this._x1=i,this._x2=r;var a=this._x2-this._x1;if(a<1&&(this._x1=Math.floor(this._x1),this._x2=this._x1+1,a=1),this._origX1=this._x1,this._origX2=this._x2,this._origBaselineCoord=this._baselineCoord,this._dataItemGaps>0&&o&&!this.isSelected()){var s=Math.ceil(d._MAX_GAP_SIZE*this._dataItemGaps),l=Math.abs(this._baselineCoord-this._endCoord),u=this._axisCoord==this._baselineCoord;l>=d._MIN_BAR_LENGTH_FOR_GAPS&&this._bStacked&&!u&&(this._baselineCoord+=this._endCoord>this._baselineCoord?s:-s),a>=d._MIN_BAR_WIDTH_FOR_GAPS&&(1==t.Agent.getDevicePixelRatio()&&this._barGapRatio>0&&a>d._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING?(t.Agent.isPlatformGecko()||this.setPixelHinting(!0),this._x1=Math.round(this._x1),this._x2=Math.round(this._x2),this._origX1=this._x1,this._origX2=this._x2,this._x2-=s):(this._x1+=s/2,this._x2-=s/2))}var c=this._createPointsArray();this.setPoints(c),this.OuterChild&&this.OuterChild.setPoints(this._createPointsArray(h.OUTER_BORDER_WIDTH)),this.InnerChild&&this.InnerChild.setPoints(this._createPointsArray(h.OUTER_BORDER_WIDTH+h.INNER_BORDER_WIDTH))},d.prototype._createPointsArray=function(t){var e=this._baselineCoord,n=this._endCoord,i=this._x1,r=this._x2;if(t>0){if(Math.abs(i-r)<2*t||Math.abs(e-n)<2*t)return[];i+=t,r-=t,n<e?(e-=t,n+=t):(e+=t,n-=t)}return this._bHoriz?[n,i,n,r,e,r,e,i]:[i,n,r,n,r,e,i,e]},d.prototype.getBoundingBox=function(){var e=Math.min(this._x2,this._x1),n=Math.min(this._endCoord,this._baselineCoord),i=Math.abs(this._x2-this._x1),r=Math.abs(this._endCoord-this._baselineCoord);return this._bHoriz?new t.Rectangle(n,e,r,i):new t.Rectangle(e,n,i,r)},d.prototype.getDimensionsSelf=function(t){return this.ConvertCoordSpaceRect(this.getBoundingBox(),t)};var p=function(e,n,i,r,o,a,s,l,u){this.Init(e.getCtx()),this._chart=e,this._bHoriz=W.isHorizontal(e),this._styleOptions=u,this._innerColor=V.getSelectedInnerColor(this._chart),this._outerColor=V.getSelectedOuterColor(this._chart),this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(this._styleOptions._color);var h=n-i/2,c=n+i/2;V.getDataItemGaps(e)>0&&i>d._MIN_BAR_WIDTH_FOR_GAPS&&c--,this._render(h,c,r,o,a,s,l)};t.Obj.createSubclass(p,t.Shape),p.prototype._render=function(e,n,i,r,o,a,s){this._cleanUp();var l=this.getCtx();this._x1=Math.round(e),this._x2=Math.round(n),this._low=Math.round(i),this._q1=Math.round(r),this._q2=Math.round(o),this._q3=Math.round(a),this._high=Math.round(s);var u=n-e,h=V.getSizeInPixels(this._styleOptions.whiskerEndLength,u);h=Math.min(u,h),h=2*Math.floor((h-1)/2)+1;var c,d,p,g=t.Agent.getOS()==t.Agent.MAC_OS;t.Agent.isBrowserSafari()||t.Agent.isBrowserChrome()&&g||t.Agent.isPlatformGecko()&&!g?(c=Math.ceil((e+n)/2),d=c-Math.ceil(h/2),p=c+Math.floor(h/2)):(c=Math.floor((e+n)/2),d=c-Math.floor(h/2),p=c+Math.ceil(h/2),(this._bHoriz&&t.Agent.isPlatformGecko()||t.Agent.isPlatformIE())&&p--),this._drawLine(c,this._low,c,this._high,"whisker"),this._drawLine(d,this._low,p,this._low,"whiskerEnd"),this._drawLine(d,this._high,p,this._high,"whiskerEnd"),this._q2Box=new t.Polygon(l,this._createQ2PointsArray(0));var f=G.getRectangleFill(this._chart,this._styleOptions.q2Color,this._styleOptions._q2Pattern,u);this._q2Box.setFill(f),this._applyCustomStyle(this._q2Box,"q2"),this.addChild(this._q2Box),this._q3Box=new t.Polygon(l,this._createQ3PointsArray(0));var _=G.getRectangleFill(this._chart,this._styleOptions.q3Color,this._styleOptions._q3Pattern,u);this._q3Box.setFill(_),this._applyCustomStyle(this._q3Box,"q3"),this.addChild(this._q3Box),this._drawMedianLine(0),this._borderColor=this._styleOptions.borderColor,this._borderColor&&(this._borderWidth=this._styleOptions.borderWidth,this._drawBorders(this._borderColor,this._borderWidth)),this.IsSelected&&(this.IsSelected=!1,this.setSelected(!0))},p.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this.isSelected()?this._drawBorders(this._hoverColor,h.OUTER_BORDER_WIDTH,this._innerColor,h.INNER_BORDER_WIDTH):this._drawBorders(this._hoverColor,h.OUTER_BORDER_WIDTH_HOVER,this._innerColor,h.INNER_BORDER_WIDTH))},p.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?this._drawBorders(this._outerColor,h.OUTER_BORDER_WIDTH,this._innerColor,h.INNER_BORDER_WIDTH):this._drawBorders(this._borderColor,this._borderWidth))},p.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?t?this._drawBorders(this._hoverColor,h.OUTER_BORDER_WIDTH,this._innerColor,h.INNER_BORDER_WIDTH):this._drawBorders(this._hoverColor,h.OUTER_BORDER_WIDTH_HOVER,this._innerColor,h.INNER_BORDER_WIDTH):t?this._drawBorders(this._outerColor,h.OUTER_BORDER_WIDTH,this._innerColor,h.INNER_BORDER_WIDTH):this._drawBorders(this._borderColor,this._borderWidth))},p.prototype.UpdateSelectionEffect=function(){},p.prototype.getDisplayAnimation=function(t){return this.getInsertAnimation(t)},p.prototype.getDeleteAnimation=function(e){var n=new t.CustomAnimation(this.getCtx(),this,e),i=[this._x1,this._x2,this._q2,this._q2,this._q2,this._q2,this._q2];return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,i),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),n},p.prototype.getInsertAnimation=function(e){var n=new t.CustomAnimation(this.getCtx(),this,e),i=this._getAnimationParams();return this._setAnimationParams([this._x1,this._x2,this._q2,this._q2,this._q2,this._q2,this._q2]),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,i),this.setAlpha(0),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),n},p.prototype.getUpdateAnimation=function(e,n){var i=new t.CustomAnimation(this.getCtx(),this,e),r=this._getQ2Fill();this._setQ2Fill(n._getQ2Fill()),i.getAnimator().addProp(t.Animator.TYPE_FILL,this,this._getQ2Fill,this._setQ2Fill,r);var o=this._getQ3Fill();this._setQ3Fill(n._getQ3Fill()),i.getAnimator().addProp(t.Animator.TYPE_FILL,this,this._getQ3Fill,this._setQ3Fill,o);var a=this._getAnimationParams();return this._setAnimationParams(n._getAnimationParams()),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,a),i},p.prototype._getAnimationParams=function(){return[this._x1,this._x2,this._low,this._q1,this._q2,this._q3,this._high]},p.prototype._setAnimationParams=function(t){this._render(t[0],t[1],t[2],t[3],t[4],t[5],t[6])},p.prototype._getQ2Fill=function(){return new t.SolidFill(this._styleOptions.q2Color)},p.prototype._setQ2Fill=function(t){this._styleOptions.q2Color=t.getColor()},p.prototype._getQ3Fill=function(){return new t.SolidFill(this._styleOptions.q3Color)},p.prototype._setQ3Fill=function(t){this._styleOptions.q3Color=t.getColor()},p.prototype._drawLine=function(e,n,i,r,o){var a=this._bHoriz?new t.Line(this.getCtx(),n,e,r,i):new t.Line(this.getCtx(),e,n,i,r);return this._applyCustomStyle(a,o),a.setPixelHinting(!0),this.addChild(a),a},p.prototype._drawMedianLine=function(e){if(!this._medianLine){var n=new t.Line(this.getCtx(),0,0,0,0);this._applyCustomStyle(n,"median"),n.setPixelHinting(!0),this.addChild(n),this._medianLine=n}var i=this._x1+e,r=this._x2-e,o=this._q2;this._bHoriz?(this._medianLine.setX1(o),this._medianLine.setX2(o),this._medianLine.setY1(i),this._medianLine.setY2(r)):(this._medianLine.setY1(o),this._medianLine.setY2(o),this._medianLine.setX1(i),this._medianLine.setX2(r))},p.prototype._drawBorders=function(e,n,i,r){if(!this._outerBorderShape){var o=this.getChildIndex(this._q2Box);this._innerBorderShape=new t.Polygon(this.getCtx()),this._innerBorderShape.setInvisibleFill(),this.addChildAt(this._innerBorderShape,o),this._outerBorderShape=new t.Polygon(this.getCtx()),this._outerBorderShape.setInvisibleFill(),this.addChildAt(this._outerBorderShape,o)}var a=0;n?(this._outerBorderShape.setPoints(this._createBoxPointsArray(0)),this._outerBorderShape.setSolidFill(e),a+=n,r?(this._innerBorderShape.setPoints(this._createBoxPointsArray(n)),this._innerBorderShape.setSolidFill(i),a+=r):this._innerBorderShape.setInvisibleFill()):(this._outerBorderShape.setInvisibleFill(),this._innerBorderShape.setInvisibleFill()),this._q2Box.setPoints(this._createQ2PointsArray(a)),this._q3Box.setPoints(this._createQ3PointsArray(a)),this._drawMedianLine(a)},p.prototype._createBoxPointsArray=function(t){var e,n,i=this._x1+t,r=this._x2-t;return this._q1<this._q3?(e=this._q1+t,n=this._q3-t):(e=this._q1-t,n=this._q3+t),this._createPointsArray(i,r,e,n)},p.prototype._createQ3PointsArray=function(t){var e,n=this._x1+t,i=this._x2-t,r=this._q2;return e=this._q2<this._q3?this._q3-t:this._q3+t,this._createPointsArray(n,i,r,e)},p.prototype._createQ2PointsArray=function(t){var e,n=this._x1+t,i=this._x2-t,r=this._q2;return e=this._q2<this._q1?this._q1-t:this._q1+t,this._createPointsArray(n,i,e,r)},p.prototype._createPointsArray=function(t,e,n,i){return this._bHoriz?[n,t,n,e,i,e,i,t]:[t,n,e,n,e,i,t,i]},p.prototype._applyCustomStyle=function(t,e){t.setStyle(this._styleOptions[e+"Style"],!0),t.setClassName(this._styleOptions[e+"ClassName"],!0)},p.prototype._cleanUp=function(){this.removeChildren(),this._q2Box=null,this._q3Box=null,this._medianLine=null,this._outerBorderShape=null,this._innerBorderShape=null};var g=function(t,e,n,i,r,o,a){this.Init(t),n=Math.max(2*Math.round(n/2),1);var s=Math.min(2*Math.ceil(g._BAR_WIDTH*n/2),n),l=Math.round(e)-n/2,u=l+n;if(null!=o&&null!=a){var c=Math.round(e)-s/2,d=c+s;this._rangeShape=new h(t,[c,o,d,o,d,a,c,a]),this.addChild(this._rangeShape)}this._changeShape=new h(t,[l,i,u,i,u,r,l,r]),this.addChild(this._changeShape),this.setPixelHinting(!0)};t.Obj.createSubclass(g,t.Container),g._BAR_WIDTH=.3,g.prototype.setChangeStyle=function(t,e,n,i,r){this._changeShape.setStyleProperties(t,e,n,i,r)},g.prototype.setRangeStyle=function(t,e,n,i){this._rangeShape&&this._rangeShape.setStyleProperties(t,e,n,null,i)},g.prototype.setSelected=function(t){this._changeShape.setSelected(t),this._rangeShape&&this._rangeShape.setSelected(t)},g.prototype.showHoverEffect=function(){this._changeShape.showHoverEffect(),this._rangeShape&&this._rangeShape.showHoverEffect()},g.prototype.hideHoverEffect=function(){this._changeShape.hideHoverEffect(),this._rangeShape&&this._rangeShape.hideHoverEffect()},g.prototype.getDisplayAnimation=function(e){var n=new t.CustomAnimation(this.getCtx(),this,e),i=this._changeShape.getPoints();if(this._changeShape.setPoints(g._getInitialPoints(i)),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,i),this._rangeShape){var r=this._rangeShape.getPoints();this._rangeShape.setPoints(g._getInitialPoints(r)),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,r)}return n},g.prototype.getDeleteAnimation=function(e){var n=new t.CustomAnimation(this.getCtx(),this,e),i=g._getInitialPoints(this._changeShape.getPoints());if(n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,i),this._rangeShape){var r=g._getInitialPoints(this._rangeShape.getPoints());n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,r)}return n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),n},g.prototype.getInsertAnimation=function(e){this.setAlpha(0);var n=this.getDisplayAnimation(e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),n},g.prototype.getUpdateAnimation=function(e,n){var i=new t.CustomAnimation(this.getCtx(),this,e),r=this._changeShape.getPoints();this._changeShape.setPoints(n._changeShape.getPoints()),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,r);var o=n._changeShape.isSelected()||this._changeShape.isSelected(),a=n._changeShape.getPrimaryFill().clone(),s=this._changeShape.getPrimaryFill();if(o||(this._changeShape.setFill(a),i.getAnimator().addProp(t.Animator.TYPE_FILL,this._changeShape,this._changeShape.getFill,this._changeShape.setFill,s)),this._rangeShape&&n._rangeShape){var l=this._rangeShape.getPoints();this._rangeShape.setPoints(n._rangeShape.getPoints()),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,l)}return i},g.prototype.UpdateSelectionEffect=function(){},g._getInitialPoints=function(t){var e=t[0],n=t[2],i=t[1],r=t[5],o=(i+r)/2;return[e,o,n,o,n,o,e,o]};var f=function(t,e,n,i,r,o){this.x=t,this.y1=e,this.y2=n,this.groupIndex=i,this.group=r,this.filtered=o};t.Obj.createSubclass(f,t.Obj),f.prototype.isUpstep=function(t){return Math.abs(this.y2-t)>Math.abs(this.y1-t)},f.prototype.clone=function(){return new f(this.x,this.y1,this.y2,this.groupIndex,this.group,this.filtered)};var _=function(t,e,n,i,r,o,a,s,l,u,h,c){this.Init(t.getCtx()),this._chart=t,this._bArea=e,this._availSpace=n,this._baseline=i,this._style=r,this._className=o,this._fill=a,this._stroke=s,this._type=l,this._baseType=h?h:l,this._indicatorMap={},this.setCoords(u,c)};t.Obj.createSubclass(_,t.Container),_._INDICATOR_OFFSET=8,_.prototype.setCoords=function(t,e){this._arCoord=t,e&&(this._arBaseCoord=e),this.removeChildren(),this._bArea?this._renderAreas():this._renderLines(),this._positionIndicators()},_.prototype.getCoords=function(){return this._arCoord},_.prototype.getBaseCoords=function(){return this._arBaseCoord},_.prototype.getBaseline=function(){return this._baseline},_.prototype.isArea=function(){return this._bArea},_.prototype._getPointArrays=function(e,n){var i=[],r=[];i.push(r),e=_._convertToPointCoords(e);var o,a=W.isPolar(this._chart),s="centeredStepped"==n||"centeredSegmented"==n,l=s||"stepped"==n||"segmented"==n,u=V.getGroupWidth(this._chart),h=t.Agent.isRightToLeft(this.getCtx())&&W.isVertical(this._chart)?-1:1;a&&(o=e[e.length-1]);for(var c,d,p,g,f=!1,m=0;m<e.length;m++)null!=e[m]?(c=e[m],p=e[m]._isY2,d=s?c.x-u/2*h:c.x,
p&&(f&&l&&(d+=u*h),f=!f),"curved"==n&&p&&r.push(null,null),o&&l&&this._pushCoord(r,d,o.y),this._bArea||"segmented"!=n&&"centeredSegmented"!=n||(r=[],i.push(r)),this._pushCoord(r,d,c.y),o=c):(B.isMixedFrequency(this._chart)||l&&!a&&o&&!p&&(g=s?o.x+.5*u*h:o.x+u*h,this._pushCoord(r,g,o.y)),"jet"!=this._chart.getOptions()._environment&&B.isMixedFrequency(this._chart)||(r=[],i.push(r),o=null));if(l&&!a&&o&&!p&&(g=s?o.x+.5*u*h:o.x+u*h,this._pushCoord(r,g,o.y)),a&&i.length>1){var v=i.pop();i[0]=v.concat(i[0])}return i},_.prototype._pushCoord=function(e,n,i){var r=et.convertAxisCoord(this._chart,new t.Point(n,i),this._availSpace);e.push(Math.round(10*r.x)/10,Math.round(10*r.y)/10)},_.prototype._isRing=function(){if(!W.isPolar(this._chart)||!B.hasGroupAxis(this._chart)||this._arCoord.length<F.getGroupCount(this._chart))return!1;for(var t=0;t<this._arCoord.length;t++)if(null==this._arCoord[t].x)return!1;return!0},_.prototype._getSplineType=function(){return W.isScatterBubble(this._chart)?t.PathUtils.SPLINE_TYPE_CARDINAL:W.isPolar(this._chart)?this._isRing()?t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED:t.PathUtils.SPLINE_TYPE_CARDINAL:W.isHorizontal(this._chart)?t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL:t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL},_.prototype._renderLines=function(){for(var e,n=this._getPointArrays(this._arCoord,this._type),i=0;i<n.length;i++){var r=n[i];if(r&&r.length>1){if("curved"==this._type){var o=_._getCurvedPathCommands(r,!1,this._getSplineType());e=new t.Path(this.getCtx(),o),e.setFill(null)}else this._isRing()?(e=new t.Polygon(this.getCtx(),r),e.setFill(null)):e=new t.Polyline(this.getCtx(),r);e.setStroke(this._stroke),e.setClassName(this._className).setStyle(this._style),this.addChild(e)}}},_.prototype._renderAreas=function(){var e=this._arCoord,n=this._arBaseCoord;!W.isPolar(this._chart)&&e.length>0&&n.length>0&&(e=e.slice(0),n=n.slice(0),null!=e[0].x&&null!=n[0].x&&(_._removeAreaEdge(e,0,this._baseline),_._removeAreaEdge(n,0,this._baseline),n[0].x=e[0].x),null!=e[e.length-1].x&&null!=n[n.length-1].x&&(_._removeAreaEdge(e,e.length-1,this._baseline),_._removeAreaEdge(n,n.length-1,this._baseline),n[n.length-1].x=e[e.length-1].x));var i=this._getPointArrays(e,this._type),r=this._getPointArrays(n,this._baseType);if(i.length==r.length)for(var o,a=0;a<i.length;a++){var s=i[a],l=r[a];if(!(s.length<2)){var u="curved"==this._type,h="curved"==this._baseType;this._isRing()&&(u||s.push(s[0],s[1]),l.length>=2&&!h&&l.push(l[0],l[1]));for(var c=[],d=0;d<l.length;d+=2)c.unshift(l[d],l[d+1]);if(u||h){var p=this._getSplineType(),g=u?_._getCurvedPathCommands(s,!1,p):t.PathUtils.polyline(s,!1);g+=h?_._getCurvedPathCommands(c,!0,p):t.PathUtils.polyline(c,!0),g+=t.PathUtils.closePath(),o=new t.Path(this.getCtx(),g)}else{var f=c.concat(s);o=new t.Polygon(this.getCtx(),f)}o.setFill(this._fill),o.setClassName(this._className).setStyle(this._style),this._stroke&&o.setStroke(this._stroke),this.addChild(o)}}},_.prototype._positionIndicators=function(){for(var e,n,i,r,o,a=0;a<this._arCoord.length;a++)o=this._arCoord[a],e=this._indicatorMap[o.groupIndex],e&&e.indicator&&(r=(o.isUpstep(this._baseline)?o.y2:o.y1)+_._INDICATOR_OFFSET*(e.direction==N.DIR_UP?-1:1),i=et.convertAxisCoord(this._chart,new t.Point(o.x,r),this._availSpace),n=e.indicator,n.setTranslate(i.x,i.y),n.setAlpha(1),n.getParent().addChild(n))},_.prototype.getAnimationParams=function(t){return _._coordsToAnimationParams(this._arCoord,t?t._arCoord:null,this._baseline)},_.prototype.setAnimationParams=function(t){var e=_._animationParamsToCoords(t);this.setCoords(e)},_.prototype.getBaseAnimationParams=function(t){return _._coordsToAnimationParams(this._arBaseCoord,t?t._arBaseCoord:null,this._baseline)},_.prototype.setBaseAnimationParams=function(t){this._arBaseCoord=_._animationParamsToCoords(t)},_.prototype.getCommonGroupIndices=function(t){for(var e=[],n=0;n<this._arCoord.length;n++)if(!this._arCoord[n].filtered&&null!=this._arCoord[n].x)for(var i=0;i<t._arCoord.length;i++)if(!t._arCoord[i].filtered&&null!=t._arCoord[i].x&&this._arCoord[n].group==t._arCoord[i].group){e.push(this._arCoord[n].groupIndex);break}return e},_.prototype.addIndicator=function(t,e,n){n.setAlpha(0),this._indicatorMap[t]={direction:e,indicator:n}},_.prototype.removeIndicators=function(){for(var t in this._indicatorMap){var e=this._indicatorMap[t].indicator;e&&e.getParent().removeChild(e)}this._indicatorMap={}},_._convertToPointCoords=function(e){for(var n=[],i=0;i<e.length;i++)if(!e[i].filtered)if(null==e[i].x)n.push(null);else if(n.push(new t.Point(e[i].x,e[i].y1)),e[i].y1!=e[i].y2){var r=new t.Point(e[i].x,e[i].y2);r._isY2=!0,n.push(r)}return n},_._coordsToAnimationParams=function(e,n,i){if(n&&n.length>0)if(e&&e.length>0){e=e.slice(0);for(var r,o,a,s=_._coordsToGroups(n),l=_._coordsToGroups(e),u=e.length,h=s.length-1;h>=0;h--)r=s[h],o=t.ArrayUtils.getIndex(l,r),o==-1?(0==u?(a=e[0].clone(),e[0]=e[0].clone(),_._removeCoordJump(a,e[0],i)):(a=e[u-1].clone(),e[u-1]=e[u-1].clone(),_._removeCoordJump(e[u-1],a,i)),a.groupIndex=-1,e.splice(u,0,a)):u=o}else{e=[];for(var h=0;h<n.length;h++)e.push(new f(n[h].x,i,i))}for(var c=[],d=0;d<e.length;d++)e[d].filtered||(null==e[d].x?(c.push(1/0),c.push(1/0),c.push(1/0)):(c.push(e[d].x),c.push(e[d].y1),c.push(e[d].y2)),c.push(e[d].groupIndex));return c},_._animationParamsToCoords=function(t){for(var e=[],n=0;n<t.length;n+=4)t[n]==1/0||isNaN(t[n])?e.push(new f(null,null,null,t[n+3])):e.push(new f(t[n],t[n+1],t[n+2],t[n+3]));return e},_._coordsToGroups=function(t){for(var e=[],n=0;n<t.length;n++)t[n].filtered||e.push(t[n].group);return e},_._removeCoordJump=function(t,e,n){t.isUpstep(n)?e.y1=e.y2:t.y2=t.y1},_._getCurvedPathCommands=function(e,n,i){var r=[],o=[];r.push(o);for(var a=0;a<e.length;a+=2)null==e[a]?(o=[],r.push(o)):o.push(e[a],e[a+1]);if(i==t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED&&r.length>1){var s=r.pop();r[0]=s.concat(r[0]),i=t.PathUtils.SPLINE_TYPE_CARDINAL}for(var l="",a=0;a<r.length;a++)o=r[a],l+=t.PathUtils.curveThroughPoints(o,n,i),n=!0;return l},_._removeAreaEdge=function(t,e,n){var i=t[e].clone();i.isUpstep(n)?i.y1=i.y2:i.y2=i.y1,t[e]=i};var m=function(t,e,n,i,r,o){this.Init(t,e,null,n,i,r,r,null,null,!0),o&&this.setStroke(m.DEFAULT_STROKE)};t.Obj.createSubclass(m,t.SimpleMarker),m.DEFAULT_STROKE=new t.SolidStroke("none"),m.SELECTED_FILL=new t.SolidFill("#FFFFFF"),m.SELECTED_STROKE=new t.SolidStroke("#5A5A5A",1,1.5),m.prototype.setDataColor=function(e){this._dataColor=e,this._hoverStroke=new t.SolidStroke(e,1,1.5)},m.prototype.getDataColor=function(){return this._dataColor},m.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this.setStroke(this._hoverStroke)},m.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.setStroke(this.isSelected()?m.SELECTED_STROKE:m.DEFAULT_STROKE)},m.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isSelected()?(this.setFill(m.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:m.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:m.DEFAULT_STROKE)))},m.prototype.UpdateSelectionEffect=function(){};var v=function(t){this.Init(t.getCtx(),t.processEvent,t),this._parentChart=t,this._chart=t.overview?t.overview.getBackgroundChart():null,this._id=t.getId()+"_overview"};t.Obj.createSubclass(v,t.Overview),v.prototype._renderChart=function(e,n,i){this._chartContainer=new t.Container(this.getCtx()),this.addChild(this._chartContainer);var r={legend:{rendered:"off",size:null},xAxis:{viewportMin:null,viewportMax:null,viewportStartGroup:null,viewportEndGroup:null,axisLine:{rendered:"off"},size:null,maxSize:.5,title:null},yAxis:{rendered:"off",size:null},y2Axis:{rendered:"off",size:null},splitDualY:"off",title:{text:null},subtitle:{text:null},footnote:{text:null},titleSeparator:{rendered:"off"},styleDefaults:{animationIndicators:"none"},layout:{outerGapWidth:0,outerGapHeight:0},_isOverview:!0};e=t.JsonUtils.merge(r,e),B.hasGroupAxis(this._parentChart)&&(e.xAxis.tickLabel.rendered="off"),W.isStock(this._parentChart)&&e.series&&e.series[0]&&(e.series=[e.series[0]],e.series[0].type="lineWithArea");var o=this._parentChart.getOptions().overview.content;e=t.JsonUtils.merge(o,e),e.zoomAndScroll="off",this._chart||(this._chart=t.Chart.newInstance(this.getCtx()),this._chart.setId(this._id)),this._chartContainer.addChild(this._chart),this._chart.render(e,n,i);var a=new t.Rect(this.getCtx(),0,0,n,i);return a.setInvisibleFill(),this._chartContainer.addChild(a),this._chart.getEventManager().setKeyboardHandler(null),this._chart.__getPlotAreaSpace().h},v.prototype.createBackground=function(t,e){},v.prototype.render=function(t,e,n){t.style={overviewBackgroundColor:"rgba(0,0,0,0)",windowBackgroundColor:"rgba(0,0,0,0)",windowBorderTopColor:"#333333",windowBorderRightColor:"#333333",windowBorderBottomColor:"#333333",windowBorderLeftColor:"#333333",leftFilterPanelColor:"rgba(5,65,135,0.1)",rightFilterPanelColor:"rgba(5,65,135,0.1)",handleBackgroundImage:t.chart._resources.overviewGrippy,handleWidth:3,handleHeight:15,handleFillColor:"rgba(0,0,0,0)"},t.animationOnClick="off";var i=this._renderChart(t.chart,e,n);v.superclass.render.call(this,t,e,i)},v.prototype.destroy=function(){v.superclass.destroy.call(this),this._parentChart=null,this._chart=null},v.prototype.getBackgroundChart=function(){return this._chart},v.prototype.isLeftAndRightFilterRendered=function(){return!0},v.prototype.HandleKeyDown=function(t){},v.prototype.HandleKeyUp=function(t){};var y=function(t,e,n,i,r,o,a){this.Init(t.getCtx()),this._axisCoord=e,this._availSpace=a.clone(),this._bbox=null,this._dataItemGaps=V.getDataItemGaps(t)*y._MAX_DATA_ITEM_GAP,this._setBarCoords(n,i,r,o)};t.Obj.createSubclass(y,u),y._MIN_BAR_LENGTH_FOR_GAPS=4,y._MAX_DATA_ITEM_GAP=3,y.prototype.getAnimationParams=function(){return[this._baselineCoord,this._endCoord,this._x1,this._x2]},y.prototype.setAnimationParams=function(t,e){this._setBarCoords(t[0],t[1],t[2],t[3])},y.prototype.getPrimaryFill=function(){return this.getFill()},y.prototype.getDisplayAnimation=function(e){var n=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,0,0]);var i=new t.CustomAnimation(this.getCtx(),this,e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,n),i},y.prototype.getDeleteAnimation=function(e){var n=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],i=new t.CustomAnimation(this.getCtx(),this,e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,n),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),i},y.prototype.getInsertAnimation=function(e){this.setAlpha(0);var n=this.getAnimationParams();this.setAnimationParams([this._baselineCoord,this._baselineCoord,this._x1,this._x2]);var i=new t.CustomAnimation(this.getCtx(),this,e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,n),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),i},y.prototype._setBarCoords=function(e,n,i,r){var o=this._availSpace.x+this._availSpace.w/2,a=this._availSpace.y+this._availSpace.h/2,s=Math.max(n,e),l=Math.abs(n-e)>=y._MIN_BAR_LENGTH_FOR_GAPS&&this._axisCoord!=e?Math.min(n,e)+this._dataItemGaps:Math.min(n,e),u=360-t.Math.radsToDegrees(Math.max(i,r))+90,h=t.Math.radsToDegrees(Math.abs(r-i));this.setWedgeParams(o,a,s,s,u,h,this._dataItemGaps,l);var c=et.polarToCartesian(e,i,this._availSpace),d=et.polarToCartesian(e,r,this._availSpace),p=et.polarToCartesian(n,i,this._availSpace),g=et.polarToCartesian(n,r,this._availSpace),f=Math.min(c.x,d.x,p.x,g.x),_=Math.max(c.x,d.x,p.x,g.x),m=Math.min(c.y,d.y,p.y,g.y),v=Math.max(c.y,d.y,p.y,g.y);this._bbox=new t.Rectangle(f,m,_-f,v-m),this._baselineCoord=e,this._endCoord=n,this._x1=i,this._x2=r},y.prototype.getBoundingBox=function(){return this._bbox};var S=function(t,e,n,i,r,o,a){this.Init(t),this._markerSize=o,this._isInvisible=a,this._drawPath(e,n,i,r)};t.Obj.createSubclass(S,t.Path),S.prototype._drawPath=function(e,n,i,r){var o=Math.atan2(r-n,i-e),a=this._markerSize/2,s=Math.PI/8,l=t.PathUtils.moveTo(e+a*Math.cos(o+s),n+a*Math.sin(o+s))+t.PathUtils.arcTo(a,a,2*(Math.PI-s),1,e+a*Math.cos(o-s),n+a*Math.sin(o-s))+t.PathUtils.lineTo(i-a*Math.cos(o+s),r-a*Math.sin(o+s))+t.PathUtils.arcTo(a,a,2*(Math.PI-s),1,i-a*Math.cos(o-s),r-a*Math.sin(o-s))+t.PathUtils.closePath();this.setCmds(l),this._x1=e,this._y1=n,this._x2=i,this._y2=r},S.prototype.setStyleProperties=function(e,n,i,r,o){this._dataColor=i;var a=t.SelectionEffectUtils.getHoverBorderColor(i);this._isInvisible?(this.setInvisibleFill(),this._hoverStroke=new t.SolidStroke(a,1,1.5)):(this.setFill(e),this.setStroke(n),this.setHoverStroke(new t.SolidStroke(r,1,1),new t.SolidStroke(a,1,3.5)),this.setSelectedStroke(new t.SolidStroke(r,1,1.5),new t.SolidStroke(o,1,4.5)),this.setSelectedHoverStroke(new t.SolidStroke(r,1,1.5),new t.SolidStroke(a,1,4.5)))},S.prototype.getDataColor=function(){return this._dataColor},S.prototype.showHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!0,this.setStroke(this._hoverStroke)):S.superclass.showHoverEffect.call(this)},S.prototype.hideHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!1,this.setStroke(this.isSelected()?m.SELECTED_STROKE:m.DEFAULT_STROKE)):S.superclass.hideHoverEffect.call(this)},S.prototype.setSelected=function(t){if(this._isInvisible){if(this.IsSelected==t)return;this.IsSelected=t,this.isSelected()?(this.setFill(m.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:m.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:m.DEFAULT_STROKE))}else S.superclass.setSelected.call(this,t)},S.prototype.UpdateSelectionEffect=function(){this._isInvisible||S.superclass.UpdateSelectionEffect.call(this)},S.prototype.getAnimationParams=function(){return[this._x1,this._y1,this._x2,this._y2]},S.prototype.setAnimationParams=function(t){this._drawPath(t[0],t[1],t[2],t[3])},S.prototype.isInvisible=function(){return this._isInvisible},S.prototype.getBoundingBox=function(){return this.getBoundingBox1().getUnion(this.getBoundingBox2())},S.prototype.getBoundingBox1=function(){return new t.Rectangle(this._x1-this._markerSize/2,this._y1-this._markerSize/2,this._markerSize,this._markerSize)},S.prototype.getBoundingBox2=function(){return new t.Rectangle(this._x2-this._markerSize/2,this._y2-this._markerSize/2,this._markerSize,this._markerSize)};var C=function(t,e,n){this.Init(t,e,n)};t.Obj.createSubclass(C,t.Container),C.BEHAVIOR_SNAP="SNAP",C.BEHAVIOR_SMOOTH="SMOOTH",C.BEHAVIOR_AUTO="AUTO",C.TOOLTIP_ID="_dvtDataCursor",C.prototype.Init=function(e,n,i){C.superclass.Init.call(this,e),this._bHoriz=i,this._options=n,this.setMouseEnabled(!1),this.setVisible(!1);var r=n.lineWidth,o=n.lineColor,a=t.Stroke.convertTypeString(n.lineStyle),s=new t.SolidStroke(o,1,r);if(s.setStyle(a),this._cursorLine=new t.Line(this.getCtx(),0,0,0,0,"dcLine"),this._cursorLine.setStroke(s),this.addChild(this._cursorLine),"off"!=n.markerDisplayed){this._marker=new t.Container(this._context),this._marker.setMouseEnabled(!1),this.addChild(this._marker);var l=n.markerSize,u=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l+4*r,l+4*r);u.setSolidFill(o),this._marker.addChild(u);var h=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l+2*r,l+2*r);h.setSolidFill("white"),this._marker.addChild(h),this._markerInnerCircle=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l,l),this._marker.addChild(this._markerInnerCircle)}},C.prototype.render=function(e,n,i,r,o,a){var s,l=this.isHorizontal(),u=t.Agent.isRightToLeft(this.getCtx());if(null!=o&&""!=o){var h=this.getCtx().getStageAbsolutePosition(),c=this.getCtx().getTooltipManager(C.TOOLTIP_ID);c.showDatatip(n+h.x,i+h.y,o,a,!1),s=c.getTooltipBounds();var d,p,g=this._options.markerSize+4*this._options.lineWidth;l?(d=u?e.x-.75*s.w:e.x+e.w-s.w/4,p=r-s.h/2,!u&&d-n<g?d=n+g:u&&n-(d+s.w)<g&&(d=n-g-s.w)):(d=r-s.w/2,p=e.y-.75*s.h,i-(p+s.h)<g&&(p=i-g-s.h)),c.positionTip(d+h.x,p+h.y),s=c.getTooltipBounds(),s.x-=h.x,s.y-=h.y}if(l?(this._cursorLine.setTranslateY(r),u?(this._cursorLine.setX1(s?s.x+s.w-1:e.x),this._cursorLine.setX2(e.x+e.w)):(this._cursorLine.setX1(e.x),this._cursorLine.setX2(s?s.x+1:e.x+e.w))):(this._cursorLine.setTranslateX(r),this._cursorLine.setY1(s?s.y+s.h-1:e.y),this._cursorLine.setY2(e.y+e.h)),this._marker){this._marker.setTranslate(n,i);var f=this._options.markerColor;this._markerInnerCircle.setSolidFill(f?f:a),t.Agent.workaroundFirefoxRepaint(this._marker)}},C.prototype.isHorizontal=function(){return this._bHoriz},C.prototype.getBehavior=function(){return this._behavior?this._behavior:C.BEHAVIOR_AUTO},C.prototype.setBehavior=function(t){this._behavior=t};var b=function(t,e,n,i,r,o,a,s,l){this.Init(t,e,n,i,r,o,a,s,l)};t.Obj.createSubclass(b,t.Path),b.prototype.Init=function(e,n,i,r,o,a,s,l,u){b.superclass.Init.call(this,e.getCtx()),this._chart=e;var h=e.getOptions().styleDefaults;this._seriesIndex=n,this._numDrawnSeries=i,this._funnelWidth=r,this._funnelHeight=o,this._startPercent=a,this._valuePercent=s,this._fillPercent=l,this._3dRatio="on"==h.threeDEffect?1:0,this._gap=u;var c=this._getPath();this._dataColor=V.getColor(this._chart,this._seriesIndex,0),this._backgroundColor=h.backgroundColor?h.backgroundColor:h.funnelBackgroundColor,this.setCmds(c.slice),c.bar&&(this._bar=new t.Path(this.getCtx(),c.bar),this.addChild(this._bar),this._bar.setMouseEnabled(!1)),this._setColorProperties(c.sliceBounds),this._label=this._getSliceLabel(c.sliceBounds,c.barBounds),null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))},b._FUNNEL_3D_WIDTH_RATIO=.08,b._FUNNEL_ANGLE_2D=36,b._FUNNEL_RATIO=1/3,b._BORDER_COLOR="#FFFFFF",b._MIN_CHARS_DATA_LABEL=3,b._LINE_FRACTION=2/3,b._AREA_FRACTION=.41,b._HEIGHT_FRACTION=.28,b._LINE_FRACTION_2=.4,b._AREA_FRACTION_2=.8,b._HEIGHT_FRACTION_2=.7,b.prototype._getPath=function(){var e=t.Agent.isRightToLeft(this.getCtx()),n=F.getSeriesCount(this._chart),i=(this._numDrawnSeries+1)*this._gap,r=t.Math.degreesToRads(b._FUNNEL_ANGLE_2D-2*this._3dRatio),o=this._funnelWidth-n*this._gap,a=o/Math.sin(t.Math.degreesToRads(b._FUNNEL_ANGLE_2D)),s=this._funnelHeight/Math.sin(r),l=this._3dRatio*this._funnelWidth/this._funnelHeight*b._FUNNEL_3D_WIDTH_RATIO;l<1e-5&&(l=0);var u,h,c,d,p,g,f,_,m,v,y,S,C=this._funnelHeight,E=this._funnelHeight*b._FUNNEL_RATIO;this._startPercent<b._AREA_FRACTION?(u=this._startPercent,c=C,p=this._funnelHeight*b._LINE_FRACTION,f=b._AREA_FRACTION,m=o*b._HEIGHT_FRACTION,y=o*(1-b._HEIGHT_FRACTION)):this._startPercent<b._AREA_FRACTION_2?(u=this._startPercent-b._AREA_FRACTION,c=this._funnelHeight*b._LINE_FRACTION,p=this._funnelHeight*b._LINE_FRACTION_2,f=b._AREA_FRACTION_2-b._AREA_FRACTION,m=o*(b._HEIGHT_FRACTION_2-b._HEIGHT_FRACTION),y=o*(1-b._HEIGHT_FRACTION_2)):(u=this._startPercent-b._AREA_FRACTION_2,c=this._funnelHeight*b._LINE_FRACTION_2,p=E,f=1-b._AREA_FRACTION_2,m=o*(1-b._HEIGHT_FRACTION_2),y=0),this._startPercent+this._valuePercent<b._AREA_FRACTION?(d=C,g=this._funnelHeight*b._LINE_FRACTION,h=this._startPercent+this._valuePercent,_=b._AREA_FRACTION,v=o*b._HEIGHT_FRACTION,S=o*(1-b._HEIGHT_FRACTION)):this._startPercent+this._valuePercent<b._AREA_FRACTION_2?(d=this._funnelHeight*b._LINE_FRACTION,g=this._funnelHeight*b._LINE_FRACTION_2,h=this._startPercent+this._valuePercent-b._AREA_FRACTION,_=b._AREA_FRACTION_2-b._AREA_FRACTION,v=o*(b._HEIGHT_FRACTION_2-b._HEIGHT_FRACTION),S=o*(1-b._HEIGHT_FRACTION_2)):(d=this._funnelHeight*b._LINE_FRACTION_2,g=E,h=this._startPercent+this._valuePercent-b._AREA_FRACTION_2,_=1-b._AREA_FRACTION_2,v=o*(1-b._HEIGHT_FRACTION_2),S=0);var T,A,x,I=Math.sqrt((f-u)/f*c*c+u/f*p*p),O=Math.sqrt((_-h)/_*d*d+h/_*g*g),M=.98*Math.asin(((I-p)*m/(c-p)+y)/a),D=.98*Math.asin(((O-g)*v/(d-g)+S)/a),P=(1+b._FUNNEL_RATIO)/2*this._funnelHeight+s,w=(1-b._FUNNEL_RATIO)/2*this._funnelHeight-s;e?(T=[a*Math.sin(M)+i,P-s*Math.cos(M),a*Math.sin(D)+i,P-s*Math.cos(D),a*Math.sin(D)+i,w+s*Math.cos(D),a*Math.sin(M)+i,w+s*Math.cos(M)],A=0,x=1):(T=[this._funnelWidth-i-a*Math.sin(M),P-s*Math.cos(M),this._funnelWidth-i-a*Math.sin(D),P-s*Math.cos(D),this._funnelWidth-i-a*Math.sin(D),w+s*Math.cos(D),this._funnelWidth-i-a*Math.sin(M),w+s*Math.cos(M)],A=1,x=0);var R=t.PathUtils.moveTo(T[0],T[1]),L=null;R+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,Math.PI,x,T[6],T[7]),R+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,Math.PI,x,T[0],T[1]),R+=t.PathUtils.arcTo(a,s,r,A,T[2],T[3]),R+=t.PathUtils.arcTo(l*(T[3]-T[5])/2,(T[3]-T[5])/2,Math.PI,x,T[4],T[5]),R+=t.PathUtils.arcTo(a,s,r,A,T[6],T[7]);var N=new t.Rectangle(Math.min(T[0],T[2]),T[5],Math.abs(T[0]-T[2]),Math.abs(T[3]-T[5]));if(null!=this._fillPercent){var k=Math.max(Math.min(this._fillPercent,1),0),U=e?-k*Math.PI:k*Math.PI;L=t.PathUtils.moveTo(T[0],T[1]),L+=t.PathUtils.arcTo(a,s,r,A,T[2],T[3]),L+=t.PathUtils.arcTo(l*(T[3]-T[5])/2,(T[3]-T[5])/2,U,x,T[2]+l*(T[3]-T[5])/2*Math.sin(U),(T[5]+T[3])/2+(T[3]-T[5])/2*Math.cos(U)),L+=this._fillPercent>.95?t.PathUtils.arcTo(a,s,r,A,T[6],T[1]+k*(T[7]-T[1])):this._fillPercent<.05?t.PathUtils.arcTo(a,s,r,x,T[6],T[1]+k*(T[7]-T[1])):t.PathUtils.lineTo(T[6]+l*(T[1]-T[7])/2*Math.sin(U),(T[7]+T[1])/2+(T[1]-T[7])/2*Math.cos(U)),L+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,U,A,T[0],T[1]),L+=t.PathUtils.closePath();var B=new t.Rectangle(Math.min(T[0],T[2]),T[5]+Math.abs(T[3]-T[5])*(1-k),Math.abs(T[0]-T[2]),Math.abs(T[3]-T[5])*k)}return{slice:R,bar:L,sliceBounds:N,barBounds:L?B:N}},b.prototype._getSliceLabel=function(e,n){var i=F.getDataLabel(this._chart,this._seriesIndex,0);if(i||(i=F.getSeriesLabel(this._chart,this._seriesIndex)),i&&"none"!=V.getDataLabelPosition(this._chart,this._seriesIndex,0)){var r=new t.MultilineText(this.getCtx(),i,0,0),o=null!=V.getPattern(this._chart,this._seriesIndex,0),a=[this._chart.getOptions().styleDefaults.dataLabelStyle,new t.CSSStyle(this._chart.getOptions().styleDefaults.sliceLabelStyle),new t.CSSStyle(F.getDataItem(this._chart,this._seriesIndex,0).labelStyle)],s=t.CSSStyle.mergeStyles(a);if(r.setCSSStyle(s),t.TextUtils.fitText(r,e.h-this._3dRatio*(.8-this._valuePercent)*50,e.w,this,b._MIN_CHARS_DATA_LABEL)){var l=r.measureDimensions(),u=this._getLabelPosition(e);if(o){var h=.15*l.h,c=t.Agent.isRightToLeft(this.getCtx())?.5:-.5,d=t.PathUtils.roundedRectangle(l.x-h,l.y,l.w+2*h,l.h,2,2,2,2),p=new t.Path(this.getCtx(),d);p.setSolidFill("#FFFFFF",.9),u.translate(c*l.h,-c*l.w),p.setMatrix(u),this.addChild(p)}var g=o?"#000000":n.containsPoint(e.x,e.y+(e.h-l.w)/2)?t.ColorUtils.getContrastingTextColor(this._dataColor):t.ColorUtils.getContrastingTextColor(this._backgroundColor);return s.getStyle("color")&&!t.Agent.isHighContrast()||r.setCSSStyle(s.setStyle("color",g)),r.setMatrix(this._getLabelPosition(e)),r.alignCenter(),r.alignMiddle(),r}}},b.prototype._getLabelPosition=function(e){var n=this._3dRatio*(e.h*this._funnelWidth/this._funnelHeight*b._FUNNEL_3D_WIDTH_RATIO/2),i=new t.Matrix;return t.Agent.isRightToLeft(this.getCtx())?(i.rotate(Math.PI/2),i.translate(e.x+e.w/2-n,e.y+e.h/2)):(i.rotate(3*Math.PI/2),i.translate(e.x+e.w/2+n,e.y+e.h/2)),i},b.prototype._setColorProperties=function(e){var n=G.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._dataColor,e),i=V.getBorderColor(this._chart,this._seriesIndex,0);null==i&&this._3dRatio>0&&(i=b._BORDER_COLOR);var r=V.getBorderWidth(this._chart,this._seriesIndex,0),o=t.SelectionEffectUtils.getHoverBorderColor(this._dataColor),a=G.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._backgroundColor,e,!0);this._bar?(this.setFill(a),this._bar.setFill(n),this._bar.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._bar.setClassName(V.getClassName(this._chart,this._seriesIndex,0))):(this.setFill(n),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0))),i&&this.setSolidStroke(i,null,r),this.OriginalStroke=this.getStroke();var s=null!=this._bar?this._bar:this;if(s.setHoverStroke(new t.SolidStroke(o,1,2)),this._chart.isSelectionSupported()){var l=V.getSelectedInnerColor(this._chart),u=V.getSelectedOuterColor(this._chart)?V.getSelectedOuterColor(this._chart):this._dataColor;s.setSelectedStroke(new t.SolidStroke(l,1,1.5),new t.SolidStroke(u,1,4.5)),s.setSelectedHoverStroke(new t.SolidStroke(l,1,1.5),new t.SolidStroke(o,1,4.5)),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())}},b.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this._fillPercent,this.getAlpha(),this._3dRatio]},b.prototype.setAnimationParams=function(t){this._startPercent=t[0],this._valuePercent=t[1],this._fillPercent=null!=this._fillPercent?t[2]:null,this.setAlpha(t[3]),this._3dRatio=t[4];var e=this._getPath();this.setCmds(e.slice),e.bar&&this._bar&&this._bar.setCmds(e.bar),this._label&&this._label.setMatrix(this._getLabelPosition(e.sliceBounds))},b.prototype.setSelected=function(t){if(null!=this._bar){if(this.IsSelected==t)return;this.IsSelected=t,this._bar.setSelected(t)}else b.superclass.setSelected.call(this,t);var e=this.getDimensions(),n=null!=this._bar?this._bar:this,i=3,r=e.w;t?(n.setScaleX((r-i)/r),n.setTranslateX(Math.ceil(i/2)+i/r*e.x)):(n.setScaleX(1),n.setTranslateX(0))},b.prototype.showHoverEffect=function(){null!=this._bar?this._bar.showHoverEffect():b.superclass.showHoverEffect.call(this)},b.prototype.hideHoverEffect=function(){null!=this._bar?this._bar.hideHoverEffect():b.superclass.hideHoverEffect.call(this)},b.prototype.copyShape=function(){return new b(this._chart,this._seriesIndex,this._numDrawnSeries,this._funnelWidth,this._funnelHeight,this._startPercent,this._valuePercent,this._fillPercent,this._gap)};var E=function(t,e,n,i,r,o,a,s){this.Init(t,e,n,i,r,o,a,s)};t.Obj.createSubclass(E,t.Path),E.prototype.Init=function(e,n,i,r,o,a,s,l){E.superclass.Init.call(this,e.getCtx()),this._chart=e;var u=e.getOptions().styleDefaults;this._seriesIndex=n,this._numDrawnSeries=i,this._pyramidWidth=r,this._pyramidHeight=o,this._startPercent=a,this._valuePercent=s,this._3dRatio="on"==u.threeDEffect?1:0,this._gap=l;var h=this._getPath();this._dataColor=V.getColor(this._chart,this._seriesIndex,0),this._3dRatio>0?(this.setCmds(h.threeDPathTop),this._threeDPathSide=new t.Path(this.getCtx(),h.threeDPathSide),this._mainFace=new t.Path(this.getCtx(),h.slice),this.addChild(this._threeDPathSide),this.addChild(this._mainFace)):this.setCmds(h.slice),this._setColorProperties(h.sliceBounds),this._label=this._getSliceLabel(h.sliceBounds),null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))},E._BORDER_COLOR="#FFFFFF",E._MIN_CHARS_DATA_LABEL=3,E._TOP_SLICE_LABEL_OFFSET=.4,E._3D_WIDTH_FACTOR=.2,E.prototype._getPath=function(){var e,n,i,r,o=t.Agent.isRightToLeft(this.getCtx()),a=F.getSeriesCount(this._chart),s=(a-this._numDrawnSeries)*this._gap,l=this._3dRatio*E._3D_WIDTH_FACTOR*.98*this._pyramidWidth,u=Math.sqrt(Math.pow(this._pyramidHeight-(a-1)*this._gap,2)*(1-this._startPercent)),h=this._startPercent+this._valuePercent>=1?0:Math.sqrt(Math.pow(this._pyramidHeight-(a-1)*this._gap,2)*(1-this._startPercent-this._valuePercent)),c=.98*(1-this._3dRatio*E._3D_WIDTH_FACTOR)*this._pyramidWidth*(h/this._pyramidHeight),d=0==this._numDrawnSeries?u:u-this._gap,p=.98*(1-this._3dRatio*E._3D_WIDTH_FACTOR)*this._pyramidWidth*(d/this._pyramidHeight);o?(n=[this._pyramidWidth-.5*this._pyramidWidth+l/2-c/2,s+h],r=[this._pyramidWidth-.5*this._pyramidWidth+l/2-p/2,s+u],i=[this._pyramidWidth-.5*this._pyramidWidth+l/2+p/2,s+u],e=[this._pyramidWidth-.5*this._pyramidWidth+l/2+c/2,s+h]):(e=[.5*this._pyramidWidth-l/2-c/2,s+h],i=[.5*this._pyramidWidth-l/2-p/2,s+u],r=[.5*this._pyramidWidth-l/2+p/2,s+u],n=[.5*this._pyramidWidth-l/2+c/2,s+h]);var g,f;if("on"==this._chart.getOptions().styleDefaults.threeDEffect){var _=this._3dRatio*E._3D_WIDTH_FACTOR*p*Math.sqrt(2)/2,m=this._3dRatio*E._3D_WIDTH_FACTOR*c*Math.sqrt(2)/2;g=t.PathUtils.moveTo(n[0],n[1]),g+=t.PathUtils.lineTo(n[0]+(o?-1:1)*Math.max(m,1),n[1]-Math.max(m,.5)),g+=t.PathUtils.lineTo(e[0]+(o?-1:1)*Math.max(m,1),e[1]-Math.max(m,.5)),g+=t.PathUtils.lineTo(e[0],e[1]),g+=t.PathUtils.closePath(),f=t.PathUtils.moveTo(n[0],n[1]),f+=t.PathUtils.lineTo(n[0]+(o?-1:1)*Math.max(m,1),n[1]-Math.max(m,.5)),f+=t.PathUtils.lineTo(r[0]+(o?-1:1)*_,r[1]-_),f+=t.PathUtils.lineTo(r[0],r[1]),f+=t.PathUtils.closePath()}var v=t.PathUtils.moveTo(n[0],n[1]);v+=t.PathUtils.lineTo(r[0],r[1]),v+=t.PathUtils.lineTo(i[0],i[1]),v+=t.PathUtils.lineTo(e[0],e[1]),v+=t.PathUtils.closePath();var y=a==this._numDrawnSeries+1,S=y?Math.abs(e[1]-i[1])/2:Math.abs(e[1]-i[1]),C=y?p/2:Math.abs(n[0]-e[0]),b=Math.min(e[1],i[1])+(y?E._TOP_SLICE_LABEL_OFFSET*(u-h):0),T=y?i[0]+(o?-1:1)*p/4:e[0],A=new t.Rectangle(T,b,C,S);return{slice:v,sliceBounds:A,threeDPathTop:g,threeDPathSide:f}},E.prototype._getSliceLabel=function(e){var n=F.getDataLabel(this._chart,this._seriesIndex,0);if(n||(n=F.getSeriesLabel(this._chart,this._seriesIndex)),n&&"none"!=V.getDataLabelPosition(this._chart,this._seriesIndex,0)){var i=new t.MultilineText(this.getCtx(),n,0,0),r=null!=V.getPattern(this._chart,this._seriesIndex,0),o=[this._chart.getOptions().styleDefaults.dataLabelStyle,new t.CSSStyle(this._chart.getOptions().styleDefaults.sliceLabelStyle),new t.CSSStyle(F.getDataItem(this._chart,this._seriesIndex,0).labelStyle)],a=t.CSSStyle.mergeStyles(o);if(i.setCSSStyle(a),t.TextUtils.fitText(i,e.w,e.h,this,E._MIN_CHARS_DATA_LABEL)){var s=i.measureDimensions(),l=this._getLabelPosition(e);if(r){var u=.15*s.h,h=t.PathUtils.roundedRectangle(s.x-u,s.y,s.w+2*u,s.h,2,2,2,2),c=new t.Path(this.getCtx(),h);c.setSolidFill("#FFFFFF",.9),l.translate(-.5*s.w,-.5*s.h),c.setMatrix(l),this.addChild(c)}var d=r?"#000000":e.containsPoint(e.x+(e.w-s.w)/2,e.y)?t.ColorUtils.getContrastingTextColor(this._dataColor):t.ColorUtils.getContrastingTextColor(null);return a.getStyle("color")&&!t.Agent.isHighContrast()||i.setCSSStyle(a.setStyle("color",d)),i.setMatrix(this._getLabelPosition(e)),i.alignCenter(),i.alignMiddle(),i}}},E.prototype._getLabelPosition=function(e){var n=new t.Matrix;return t.Agent.isRightToLeft(this.getCtx())?n.translate(e.x-e.w/2,e.y+e.h/2):n.translate(e.x+e.w/2,e.y+e.h/2),n},E.prototype._setColorProperties=function(e){var n=G.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._dataColor,e),i=V.getBorderColor(this._chart,this._seriesIndex,0);null==i&&this._3dRatio>0&&(i=E._BORDER_COLOR);var r=V.getBorderWidth(this._chart,this._seriesIndex,0),o=t.SelectionEffectUtils.getHoverBorderColor(this._dataColor);if(this._3dRatio>0){var a=!n.getPattern&&!n.getAlphas;this._mainFace.setFill(n),this._mainFace.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._mainFace.setClassName(V.getClassName(this._chart,this._seriesIndex,0)),this._threeDPathSide.setFill(a?new t.SolidFill(t.ColorUtils.getDarker(n.getColor(),.3)):n),this._threeDPathSide.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._threeDPathSide.setClassName(V.getClassName(this._chart,this._seriesIndex,0)),this.setFill(a?new t.SolidFill(t.ColorUtils.getDarker(n.getColor(),.3)):n),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0))}else this.setFill(n),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0));if(i&&(this.setSolidStroke(i,null,r),this._3dRatio>0&&(this._threeDPathSide.setSolidStroke(i,null,r),this._mainFace.setSolidStroke(i,null,r))),this.OriginalStroke=this.getStroke(),this.setHoverStroke(new t.SolidStroke(o,1,2)),this._3dRatio>0&&(this._threeDPathSide.setHoverStroke(new t.SolidStroke(o,1,2)),this._mainFace.setHoverStroke(new t.SolidStroke(o,1,2))),this._chart.isSelectionSupported()){var s=V.getSelectedInnerColor(this._chart),l=V.getSelectedOuterColor(this._chart)?V.getSelectedOuterColor(this._chart):this._dataColor;
this._3dRatio>0?(this._mainFace.setSelectedStroke(new t.SolidStroke(s,1,1.5),new t.SolidStroke(l,1,4.5)),this._mainFace.setSelectedHoverStroke(new t.SolidStroke(s,1,1.5),new t.SolidStroke(o,1,4.5)),this._mainFace.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this._threeDPathSide.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())):(this.setSelectedStroke(new t.SolidStroke(s,1,1.5),new t.SolidStroke(l,1,4.5)),this.setSelectedHoverStroke(new t.SolidStroke(s,1,1.5),new t.SolidStroke(o,1,4.5)),this.setCursor(t.SelectionEffectUtils.getSelectingCursor()))}},E.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this.getAlpha(),this._3dRatio]},E.prototype.setAnimationParams=function(t){this._startPercent=t[0],this._valuePercent=t[1],this.setAlpha(t[2]),this._3dRatio=t[3];var e=this._getPath();this._threeDPathSide&&this._mainFace?(this.setCmds(e.threeDPathTop),this._threeDPathSide.setCmds(e.threeDPathSide),this._mainFace.setCmds(e.slice)):this.setCmds(e.slice),this._label&&this._label.setMatrix(this._getLabelPosition(e.sliceBounds))},E.prototype.setSelected=function(t){if(this._3dRatio>0)if(this._mainFace.setSelected(t),t){var e=this.getDimensions(),n=3,i=5,r=e.w,o=e.h,a=(r-n)/r,s=(o-i)/o;this._mainFace.setScaleX(a),this._mainFace.setScaleY(s),this._mainFace.setTranslateX(Math.ceil(n/2)+n/r*e.x),this._mainFace.setTranslateY(Math.ceil(i/2)+i/o*e.y)}else this._mainFace.setScaleX(1),this._mainFace.setScaleY(1),this._mainFace.setTranslateX(0),this._mainFace.setTranslateY(0);else E.superclass.setSelected.call(this,t)},E.prototype.showHoverEffect=function(){E.superclass.showHoverEffect.call(this),this._3dRatio>0&&(this._threeDPathSide.showHoverEffect(),this._mainFace.showHoverEffect())},E.prototype.hideHoverEffect=function(){E.superclass.hideHoverEffect.call(this),this._3dRatio>0&&(this._threeDPathSide.hideHoverEffect(),this._mainFace.hideHoverEffect())},E.prototype.copyShape=function(){return new E(this._chart,this._seriesIndex,this._numDrawnSeries,this._pyramidWidth,this._pyramidHeight,this._startPercent,this._valuePercent,this._gap)},E.prototype.getPrimaryFill=function(){return this._mainFace?this._mainFace.getFill():this.getFill()};var T=function(t,e,n,i){this.Init(t,e,n,i)};T._THREED_TILT=.59,T._THREED_DEPTH=.1,T._RADIUS=.45,T._RADIUS_LABELS=.38,t.Obj.createSubclass(T,t.Container),T.prototype.Init=function(e,n,i,r){T.superclass.Init.call(this,e.getCtx()),this.chart=e,this._options=e.getOptions(),this._frame=n.clone(),e.pieChart=this;for(var o=this.getLabelPosition(),a=F.getSeriesCount(e),s=0;s<a;s++){var l=F.getDataItem(e,s,0);!l||"center"!=o&&"none"!=o||"outsideSlice"!=l.labelPosition||(o="outsideSlice")}this._center=new t.Point(n.x+Math.floor(n.w/2),n.y+Math.floor(n.h/2));var u="center"==o||"none"==o?T._RADIUS:T._RADIUS_LABELS;this._radiusX=Math.floor(Math.min(n.w,n.h)*u),this._radiusY=this._radiusX,this._depth=0,this._anchorOffset=90,this.is3D()&&(this._depth=n.h*T._THREED_DEPTH,this._center.y-=Math.floor(this._depth/2),this._radiusY*=T._THREED_TILT),this._slices=this._createSlices(),this._shapesContainer=new t.Container(this.getCtx()),this._numFrontObjs=0,this._numSelectedObjsInFront=0},T.prototype.getOptions=function(){return this._options},T.prototype.highlight=function(e){t.CategoryRolloverHandler.highlight(e,this._slices,"any"==this.getOptions().highlightMatch)},T.prototype._createSlices=function(){for(var e,n,i=[],r=X.getRenderedSeriesIndices(this.chart),o=X.getOtherValue(this.chart),a=0;a<r.length;a++)n=r[a],V.isDataItemRendered(this.chart,n)&&(e=new A(this,n),e.getValue()<=0||i.push(e));var s=V.getHiddenCategories(this.chart),l=t.ArrayUtils.getIndex(s,X.OTHER_SLICE_SERIES_ID)>=0;if(o>0&&!l){var u=new A(this);"ascending"==this.chart.getOptions().sorting?i.unshift(u):i.push(u)}return t.Agent.isRightToLeft(this.getCtx())&&i.reverse(),i},T.prototype.setInitialSelection=function(){var t=this.chart.getSelectionHandler();if(t){for(var e=F.getInitialSelection(this.chart),n=[],i=0;i<e.length;i++)for(var r=0;r<this._slices.length;r++){var o=this._slices[r].getId();o&&(e[i].id&&o.getId()==e[i].id||o.getSeries()==e[i].series&&o.getGroup()==e[i].group)&&n.push(o)}if(X.isOtherSliceSelected(this.chart,e)){var a=X.getOtherSliceId(this.chart);n.push(a)}t.processInitialSelections(n,this._slices)}},T.prototype.render=function(){var e;if(!this.contains(this._shapesContainer)&&(this._shapesContainer||(this._shapesContainer=new t.Container(this.getCtx())),this.addChild(this._shapesContainer),!this.is3D()&&this.getSkin()==t.CSSStyle.SKIN_SKYROS)){var n=t.ColorUtils.makeRGBA(78,87,101,.45);e=new t.Shadow(n,4,7,7,54,2,3,(!1),(!1),(!1))}T._layoutSlices(this._slices,this._anchorOffset);for(var i=0;i<this._slices.length;i++)this._slices[i].preRender();var r=T._orderSlicesForRendering(this._slices);this._duringDisplayAnim||($.createPieCenter(this),$.layoutLabelsAndFeelers(this));for(var i=0;i<r.length;i++)r[i].render(this._duringDisplayAnim);t.Agent.isPlatformWebkit()||e&&this._shapesContainer.addDrawEffect(e),this.setInitialSelection(),this.highlight(V.getHighlightedCategories(this.chart))},T.prototype.getTotalValue=function(){for(var t=0,e=0;e<this._slices.length;e++){var n=this._slices[e].getValue();n>=0&&(t+=n)}return t},T._layoutSlices=function(t,e){var n,i,r,o=0,a=t?t.length:0;e>360&&(e-=360),e<0&&(e+=360);var s=0,l=0;a>0&&(l=t[0].getPieChart().getTotalValue());for(var n=0;n<a;n++){i=t[n];var u=i.getValue();s=u==l?100:0==l?0:Math.min(u/l*100,99.99),o=3.6*s,r=e-o,r<0&&(r+=360),i.setAngleStart(r),i.setAngleExtent(o),e=i.getAngleStart()}},T._orderSlicesForRendering=function(t){for(var e,n,i,r,o,a,s=[],l=t?t.length:0,u=-1,e=0;e<l;e++)if(n=t[e],i=n.getAngleStart(),r=n.getAngleExtent(),o=i+r,o>360&&(o-=360),o<0&&(o+=360),90==o||i<90&&o>90){u=e,a=o-90;break}for(var h=[],e=u;e<l;e++)h.push(t[e]);for(var e=0;e<u;e++)h.push(t[e]);for(var c=0,d=0,p=180+a,e=0;e<l;e++)if(n=h[e]){if(c+n.getAngleExtent()>p){d=e;break}s.push(n),c+=n.getAngleExtent()}for(var e=l-1;e>=d;e--)n=h[e],n&&s.push(n);return s},T.prototype.is3D=function(){return"on"==this._options.styleDefaults.threeDEffect},T.prototype.__calcMaxExplodeDistance=function(){var t=.5/T._RADIUS-1;return this._radiusX*t},T.prototype.getAnimationDuration=function(){return V.getAnimationDuration(this.chart)},T.prototype.getDisplayAnimation=function(){this._duringDisplayAnim=!0;var e=new t.DataAnimationHandler(this.getCtx(),this),n=this.getAnimationDuration(),i=A.createFillerSlice(this,this.getTotalValue());this._slices.push(i);var r=new t.CustomAnimation(this.getCtx(),i,n);r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.GetAnimationParams,i.SetAnimationParams,i.getDeletedAnimationParams()),r.setOnEnd(i._removeDeletedSlice,i),e.add(r,0);for(var o=0;o<this._slices.length-1;o++)this._slices[o].animateInsert(e);var a=new t.CustomAnimation(this.getCtx(),this,n);a.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams()),e.add(a,0);for(var s=[],o=0;o<this._slices.length;o++)s=s.concat(this._slices[o].getLabelAndFeeler());var l=new t.AnimFadeIn(this._context,s,n);e.add(l,0),this._setAnimationParams();var u=e.getAnimation(!0);return u.setOnEnd(this._onEnd,this),u},T.prototype._onEnd=function(){this._duringDisplayAnim=!1,this._setAnimationParams()},T.prototype.getCenter=function(){return this._center},T.prototype.getInnerRadius=function(){return this.is3D()?0:this._options.styleDefaults.pieInnerRadius*Math.min(this._radiusX,this._radiusY)*.95},T.prototype.__getFrame=function(){return this._frame},T.prototype.getRadiusX=function(){return this._radiusX},T.prototype.getRadiusY=function(){return this._radiusY},T.prototype.getDepth=function(){return this._depth},T.prototype.getSliceDisplayable=function(t){var e=X.getSliceBySeriesIndex(this.chart,t);return e?e.getTopDisplayable():null},T.prototype.__getShapesContainer=function(){return this._shapesContainer},T.prototype.__getSlices=function(){return this._slices},T.prototype.animateUpdate=function(e,n){var i=new t.DataAnimationHandler(this.getCtx(),this);i.constructAnimation(n.__getSlices(),this.__getSlices());var r=i.getAnimation(!0),o=new t.CustomAnimation(this.getCtx(),this,this.getAnimationDuration());o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());var a=new t.ParallelPlayable(this.getCtx(),r,o);a.setOnEnd(this._setAnimationParams,this),e.add(a,0),this._setAnimationParams([n.getDepth(),n.getRadiusY(),n.getCenter().y])},T.prototype.animateInsert=function(t){},T.prototype.animateDelete=function(t,e){},T.prototype._getAnimationParams=function(){return[this._depth,this._radiusY,this._center.y]},T.prototype._setAnimationParams=function(t){this.removeChildren(),this._shapesContainer&&this._shapesContainer.destroy(),this._shapesContainer=null,t&&(this._depth=t[0],this._radiusY=t[1],this._center.y=t[2]),this.render()},T.prototype.bringToFrontOfSelection=function(t){var e=t.getPieChart()._shapesContainer;if(e){var n=e.getNumChildren();if(n-this._numFrontObjs>1){e.removeChild(t._topSurface[0]);var i=n-this._numFrontObjs-1;e.addChildAt(t._topSurface[0],i)}}},T.prototype.pushToBackOfSelection=function(t){for(var e=this._slices.length,n=0,i=0;i<e;i++)this._slices[i].isSelected()&&n++;this._numSelectedObjsInFront=n;var r=t.getPieChart()._shapesContainer;if(r){var o=r.getNumChildren(),a=o-this._numFrontObjs-1-this._numSelectedObjsInFront;a>=0&&(r.removeChild(t._topSurface[0]),r.addChildAt(t._topSurface[0],a))}},T.prototype.setNumFrontObjs=function(t){this._numFrontObjs=t},T.prototype.getShapesForViewSwitcher=function(t){var e={};if(this._slices)for(var n=0;n<this._slices.length;n++){var i=this._slices[n];if(i){var r=i.getId();if(r){var o=r.getId();if(o&&i._topSurface&&i._topSurface.length>0){var a=i._topSurface[0];e[o]=a}}}}return e},T.prototype.getLabelPosition=function(){var t=this._options.styleDefaults.sliceLabelPosition;return t||(t=this._options.styleDefaults.dataLabelPosition),T.parseLabelPosition(t)},T.prototype.getSeriesLabelPosition=function(t){var e=this.getLabelPosition(),n=F.getDataItem(this.chart,t,0);return n&&n.labelPosition&&(e=n.labelPosition),T.parseLabelPosition(e)},T.parseLabelPosition=function(t){return"center"==t||"inside"==t?"center":"outsideSlice"==t||"outside"==t?"outsideSlice":"none"==t?"none":"auto"},T.prototype.getSkin=function(){return this._options.skin};var A=function(t,e){this.Init(t,e)};t.Obj.createSubclass(A,t.Obj),A.prototype.Init=function(e,n){this._pieChart=e,this._chart=e.chart,this._angleStart=0,this._angleExtent=0,this._topSurface=null,this._leftSurface=null,this._rightSurface=null,this._crustSurface=null,this._explodeOffsetX=0,this._explodeOffsetY=0,this._sliceLabel=null,this._sliceLabelString=null,this._hasFeeler=!1,this._feelerRad=null,this._feelerHoriz=null,this._outsideFeelerStart=null,this._outsideFeelerMid=null,this._outsideFeelerEnd=null,this._selected=!1,this._selecting=!1,this._centerX=this._pieChart.getCenter().x,this._centerY=this._pieChart.getCenter().y,this._radiusX=this._pieChart.getRadiusX(),this._radiusY=this._pieChart.getRadiusY(),this._depth=this._pieChart.getDepth();var i=this._chart.getOptions();if(null!=n){var r=F.getDataItem(this._chart,n,0);this._value=F.getValue(this._chart,n,0),this._explode=X.getSliceExplode(this._chart,n),this._fillColor=V.getColor(this._chart,n,0),this._fillPattern=V.getPattern(this._chart,n,0),this._strokeColor=V.getBorderColor(this._chart,n),this._borderWidth=V.getBorderWidth(this._chart,n),this._customLabel=r.label,this._seriesLabel=F.getSeries(this._chart,n),this._action=r.action,this._drillable=H.isDataItemDrillable(this._chart,n,0),this._showPopupBehaviors=this._chart.getShowPopupBehaviors(r._id),this._id=X.getSliceId(this._chart,n),this._seriesIndex=n,this._categories=F.getCategories(this._chart,n,0)}else this._value=X.getOtherValue(this._chart),this._explode=0,this._fillColor=i.styleDefaults.otherColor,this._fillPattern=null,this._strokeColor=i.styleDefaults.borderColor,this._borderWidth=i.styleDefaults.borderWidth,this._customLabel=null,this._seriesLabel=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null),this._action=null,this._drillable=!1,this._showPopupBehaviors=X.getOtherSliceShowPopupBehaviors(this._chart),this._id=X.getOtherSliceId(this._chart)},A.prototype.getPieChart=function(){return this._pieChart},A.prototype.render=function(e){for(var n=A._sortPieSurfaces(this._topSurface,this._leftSurface,this._rightSurface,this._crustSurface,this._angleStart,this._angleExtent),i=n.length,r=0;r<i;r++)for(var o=n[r],a=o.length,s=0;s<a;s++){var l=this._pieChart.__getShapesContainer();l.addChild(o[s]),o[s].render&&o[s].render()}if(this._sliceLabel&&(this._pieChart.addChild(this._sliceLabel),q.associate(this,[this._sliceLabel]),e?(this._pieChart.addChild(this._feelerRad),this._pieChart.addChild(this._feelerHoriz)):this._renderOutsideFeeler()),this._explodeSlice(),this._action||this._drillable||this._pieChart.chart.isSelectionSupported())for(var u=this.getDisplayables(),r=0;r<u.length;r++)u[r].setCursor(t.SelectionEffectUtils.getSelectingCursor());var h=this.getTopDisplayable();h&&(h.setAriaRole("img"),this._updateAriaLabel())},A.prototype._feelerFromPts=function(e,n){var i=new t.Line(this._pieChart.getCtx(),e.x,e.y,n.x,n.y),r=this._pieChart.getOptions().styleDefaults.pieFeelerColor,o=new t.SolidStroke(r);return i.setStroke(o),this._pieChart.addChild(i),i},A.prototype._renderOutsideFeeler=function(){if(this._hasFeeler){var t=this._feelerFromPts(this._outsideFeelerStart,this._outsideFeelerMid),e=this._feelerFromPts(this._outsideFeelerMid,this._outsideFeelerEnd);this._feelerRad=t,this._feelerHoriz=e}},A.prototype.preRender=function(){var e,n=this._bFillerSlice?"color":V.getSeriesEffect(this._chart),i=this.getFillColor(),r=this.getFillPattern();if("pattern"==n||null!=r)e=new t.PatternFill(r,i),n="pattern";else if("gradient"==n){var o=this._pieChart.getSkin(),a=o==t.CSSStyle.SKIN_SKYROS?297:270,s=this._pieChart.is3D()?"3D":"2D",l=q.getGradientColors(t.ColorUtils.getRGB(i),s,o),u=q.getGradientAlphas(t.ColorUtils.getAlpha(i),s),h=q.getGradientRatios(s,o),c=[Math.floor(this._centerX-this._radiusX),Math.floor(this._centerY-this._radiusY),Math.ceil(2*this._radiusX),Math.ceil(2*this._radiusY)];e=new t.LinearGradientFill(a,l,u,h,c)}else e=new t.SolidFill(i);if(this._topSurface=q.createTopSurface(this,e),this._depth>0||this._radiusX!=this._radiusY){var d="gradient"==n,p=new t.SolidFill(t.ColorUtils.getDarker(i,.4)),g=d?q.generateLateralGradientFill(this,q.SIDE):p,f=d?q.generateLateralGradientFill(this,q.CRUST):p;this._leftSurface=q.createLateralSurface(this,q.SURFACE_LEFT,g),this._rightSurface=q.createLateralSurface(this,q.SURFACE_RIGHT,g),this._crustSurface=q.createLateralSurface(this,q.SURFACE_CRUST,f)}},A._sortPieSurfaces=function(t,e,n,i,r,o){var a=[];return e&&n&&i&&(r<=270&&r+o>270?(a.push(e),a.push(n),a.push(i)):r>270||r+o<=90?(a.push(e),a.push(i),a.push(n)):(a.push(n),a.push(i),a.push(e))),a.push(t),a},A.oppositeDirection=function(t,e,n){var i=t-e>0,r=t-n>0;return i!=r},A.prototype._explodeSlice=function(){if(0!=this._explode){var e=this._angleExtent,n=this._angleStart,i=n+e/2,r=(360-i)*t.Math.RADS_PER_DEGREE,o=this._pieChart.is3D()?T._THREED_TILT:1,a=this._explode*this._pieChart.__calcMaxExplodeDistance();this._explodeOffsetX=Math.cos(r)*a,this._explodeOffsetY=Math.sin(r)*o*a,t.Agent.isPlatformWebkit()&&(this._explodeOffsetX=Math.round(this._explodeOffsetX),this._explodeOffsetY=Math.round(this._explodeOffsetY))}else this._explodeOffsetX=0,this._explodeOffsetY=0;if(this._topSurface){var s=this._pieChart.is3D()&&this._topSurface[0].getSelectionOffset?this._topSurface[0].getSelectionOffset():[];A._translateShapes(this._topSurface,s[0]?s[0]+this._explodeOffsetX:this._explodeOffsetX,s[1]?s[1]+this._explodeOffsetY:this._explodeOffsetY)}if(this._rightSurface&&A._translateShapes(this._rightSurface,this._explodeOffsetX,this._explodeOffsetY),this._leftSurface&&A._translateShapes(this._leftSurface,this._explodeOffsetX,this._explodeOffsetY),this._crustSurface&&A._translateShapes(this._crustSurface,this._explodeOffsetX,this._explodeOffsetY),this._hasFeeler){var l=this._outsideFeelerStart.x,u=this._outsideFeelerStart.y,h=l+this._explodeOffsetX,c=u+this._explodeOffsetY;this._feelerRad.setX1(h),this._feelerRad.setY1(c);var d=this._outsideFeelerMid.x,p=this._outsideFeelerMid.y;A.oppositeDirection(d,l,h)?(this._feelerRad.setX2(h),this._feelerHoriz.setX1(h)):(this._feelerRad.setX2(d),this._feelerHoriz.setX1(d)),A.oppositeDirection(p,u,c)?(this._feelerRad.setY2(c),this._feelerHoriz.setY1(c)):(this._feelerRad.setY2(p),this._feelerHoriz.setY1(p))}this._sliceLabel&&!this._hasFeeler&&this._sliceLabel.setTranslate(this._explodeOffsetX,this._explodeOffsetY)},A._translateShapes=function(t,e,n){if(t)for(var i=t.length,r=0;r<i;r++){var o=t[r];o.setTranslate(e,n)}},A.prototype.getRadiusX=function(){return this._radiusX},A.prototype.getRadiusY=function(){return this._radiusY},A.prototype.getCenter=function(){return new t.Point(this._centerX,this._centerY)},A.prototype.getDepth=function(){return this._depth},A.prototype.getAngleExtent=function(){return this._angleExtent},A.prototype.setAngleExtent=function(t){this._angleExtent=t},A.prototype.getAngleStart=function(){return this._angleStart},A.prototype.setAngleStart=function(t){this._angleStart=t},A.prototype.__getExplodeOffsetX=function(){return this._explodeOffsetX},A.prototype.__getExplodeOffsetY=function(){return this._explodeOffsetY},A.prototype.setOutsideFeelerPoints=function(t,e,n){this._outsideFeelerStart=t,this._outsideFeelerMid=e,this._outsideFeelerEnd=n,this._hasFeeler=!0},A.prototype.setNoOutsideFeeler=function(){this._outsideFeelerStart=null,this._outsideFeelerMid=null,this._outsideFeelerEnd=null,this._hasFeeler=!1},A.prototype.getLabelAndFeeler=function(){var t=[];return this._sliceLabel&&t.push(this._sliceLabel),this._feelerRad&&t.push(this._feelerRad),this._feelerHoriz&&t.push(this._feelerHoriz),t},A.prototype.getSliceLabel=function(){return this._sliceLabel},A.prototype.setSliceLabel=function(t){this._sliceLabel=t},A.prototype.getSliceLabelString=function(){return this._sliceLabelString},A.prototype.setSliceLabelString=function(t){this._sliceLabelString=t},A.prototype.getTopSurface=function(){return this._topSurface},A.prototype.getValue=function(){return this._value},A.prototype.getId=function(){return this._id},A.prototype.getSeriesIndex=function(){return this._seriesIndex},A.containsRect=function(t,e){return e.contains(t.x,t.y)&&e.contains(t.x+t.w,t.y)&&e.contains(t.x+t.w,t.y+t.h)&&e.contains(t.x,t.y+t.h)},A._shapeIsSelectable=function(t){return t instanceof u},A.prototype.contains=function(t,e){for(var n=this._pieChart.getInnerRadius(),i=this._pieChart.getCenter(),r=(t-i.x)/this._radiusX,o=(e-i.y)/this._radiusY,a=-Math.atan2(o,r)*(180/Math.PI);a<this._angleStart;)a+=360;for(;a-this._angleStart>=360;)a-=360;var s=Math.pow(r,2)+Math.pow(o,2),l=Math.sqrt(s)>n/this._radiusX&&s<=1,u=a<=this._angleStart+this._angleExtent;return l&&u},A.prototype.GetAnimationParams=function(){var e=t.ColorUtils.getRed(this._fillColor),n=t.ColorUtils.getGreen(this._fillColor),i=t.ColorUtils.getBlue(this._fillColor),r=t.ColorUtils.getAlpha(this._fillColor);return[this._value,this._radiusX,this._radiusY,this._explode,this._centerX,this._centerY,this._depth,e,n,i,r]},A.prototype.SetAnimationParams=function(e){this._value=e[0],this._radiusX=e[1],this._radiusY=e[2],this._explode=e[3],this._centerX=e[4],this._centerY=e[5],this._depth=e[6];var n=Math.round(e[7]),i=Math.round(e[8]),r=Math.round(e[9]),o=Math.round(e[10]);this._fillColor=t.ColorUtils.makeRGBA(n,i,r,o)},A.prototype.getDeletedAnimationParams=function(){var t=this.GetAnimationParams();return t[0]=0,t[1]=this.getInnerRadius(),t[2]=this.getInnerRadius(),t[3]=0,t},A.prototype.animateUpdate=function(e,n){var i=n.GetAnimationParams(),r=this.GetAnimationParams();if(!t.ArrayUtils.equals(i,r)){var o=new t.CustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,r),e.add(o,0),this.SetAnimationParams(i)}},A.prototype.animateInsert=function(e){var n=new t.CustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.GetAnimationParams()),e.add(n,0),this.SetAnimationParams(this.getDeletedAnimationParams())},A.prototype.animateDelete=function(e,n){var i=n.__getSlices(),r=this.getPieChart().__getSlices(),o=t.ArrayUtils.getIndex(r,this),a=o-1;if(a>=0){for(var s=r[a].getId(),l=0;l<i.length;l++)if(i[l].getId().equals(s)){i.splice(l+1,0,this);break}}else i.splice(0,0,this);this._pieChart=n;var u=new t.CustomAnimation(n.getCtx(),this,this.getPieChart().getAnimationDuration());u.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.getDeletedAnimationParams()),u.setOnEnd(this._removeDeletedSlice,this),e.add(u,0)},A.prototype._removeDeletedSlice=function(){var e=this.getPieChart().__getSlices(),n=t.ArrayUtils.getIndex(e,this);n>=0&&e.splice(n,1)},A.prototype.getDisplayables=function(){var t=new Array;return this._topSurface&&(t=t.concat(this._topSurface)),this._leftSurface&&(t=t.concat(this._leftSurface)),this._rightSurface&&(t=t.concat(this._rightSurface)),this._crustSurface&&(t=t.concat(this._crustSurface)),this._sliceLabel&&t.push(this._sliceLabel),this._feelerRad&&t.push(this._feelerRad),this._feelerHoriz&&t.push(this._feelerHoriz),t},A.prototype.getAriaLabel=function(){var e;e=null==this._seriesIndex?K.getOtherSliceDatatip(this._chart,this._value,!1):K.getDatatip(this._chart,this._seriesIndex,0,null,!1);var n=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_PERCENTAGE",null),i=$.generateSliceLabelString(this,"percent");e+="; "+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[n,i]);var r=[];return this.isSelectable()&&r.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),H.isDataItemDrillable(this._chart,this._seriesIndex,this._groupIndex)&&r.push(t.Bundle.getTranslation(this._pieChart.getOptions(),"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")),t.Displayable.generateAriaLabel(e,r)},A.prototype._updateAriaLabel=function(){var e=this.getTopDisplayable();e&&!t.Agent.deferAriaCreation()&&e.setAriaProperty("label",this.getAriaLabel())},A.prototype.getTopDisplayable=function(){return this._topSurface&&this._topSurface.length>0?this._topSurface[0]:null},A.prototype.isSelectable=function(){return this._chart.isSelectionSupported()},A.prototype.isSelected=function(){return this._selected},A.prototype.setSelected=function(e,n){if(this._selected=e,this._selected?this._pieChart.bringToFrontOfSelection(this):this._selecting||this._pieChart.pushToBackOfSelection(this),V.isSelectionHighlighted(this._chart))for(var i=this.getDisplayables(),r=0;r<i.length;r++)A._shapeIsSelectable(i[r])&&i[r].setSelected(e);if(V.isSelectionExploded(this._chart)){var o=e?1:0;if(n||"none"==V.getAnimationOnDataChange(this._chart))this.setExplode(o);else{var a=new t.CustomAnimation(this._pieChart.getCtx(),this,this._pieChart.getAnimationDuration()/2);a.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getExplode,this.setExplode,o),a.play()}}this._updateAriaLabel()},A.prototype.showHoverEffect=function(){this._selecting=!0,this._pieChart.bringToFrontOfSelection(this);for(var t=this.getDisplayables(),e=0;e<t.length;e++)A._shapeIsSelectable(t[e])&&t[e].showHoverEffect()},A.prototype.hideHoverEffect=function(){this._selecting=!1,this._selected||this._pieChart.pushToBackOfSelection(this);for(var t=this.getDisplayables(),e=0;e<t.length;e++)A._shapeIsSelectable(t[e])&&t[e].hideHoverEffect()},A.prototype.getDatatip=function(t,e,n){return t==this._sliceLabel&&this._sliceLabel&&this._sliceLabel.isTruncated()?this.getSliceLabelString():this.getTooltip()},A.prototype.getDatatipColor=function(){return this.getFillColor()},A.prototype.getCategories=function(){return this._categories&&this._categories.length>0?this._categories:[this.getId().getSeries()]},A.prototype.getNextNavigable=function(e){var n=e.keyCode;if(e.type==t.MouseEvent.CLICK)return this;if(n==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;var i=t.Agent.isRightToLeft(this._chart.getCtx()),r=this._pieChart.__getSlices(),o=t.ArrayUtils.getIndex(r,this),a=null;return n==t.KeyboardEvent.RIGHT_ARROW||n==t.KeyboardEvent.DOWN_ARROW&&!i||n==t.KeyboardEvent.UP_ARROW&&i?a=o<r.length-1?r[o+1]:r[0]:(n==t.KeyboardEvent.LEFT_ARROW||n==t.KeyboardEvent.DOWN_ARROW&&i||n==t.KeyboardEvent.UP_ARROW&&!i)&&(a=0==o?r[r.length-1]:r[o-1]),a},A.prototype.getKeyboardBoundingBox=function(e){var n=this.getDisplayables();return n[0]?n[0].getDimensions(e):new t.Rectangle(0,0,0,0)},A.prototype.getTargetElem=function(){var t=this.getDisplayables();return t[0]?t[0].getElem():null},A.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect()},A.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect()},A.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},A.prototype.isDragAvailable=function(t){return!0},A.prototype.getDragTransferable=function(t,e){return[this.getId()]},A.prototype.getDragFeedback=function(t,e){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var n=this._chart.getSelectionHandler().getSelection(),i=[],r=0;r<n.length;r++)i=i.concat(n[r].getDisplayables());return i}return this.getDisplayables()},A.prototype.getExplode=function(){return this._explode},A.prototype.setExplode=function(t){this._explode=t,this._explodeSlice()},A.prototype.getCustomLabel=function(){return this._customLabel},A.prototype.getSeriesLabel=function(){return this._seriesLabel},A.prototype.getFillColor=function(){return this._fillColor},A.prototype.getFillPattern=function(){return this._fillPattern},A.prototype.getStrokeColor=function(){return this._strokeColor},A.prototype.getBorderWidth=function(){return this._borderWidth},A.prototype.getSliceGaps=function(){return 0==this._depth?3*V.getDataItemGaps(this._chart):0},A.prototype.getInnerRadius=function(){return this._pieChart.getInnerRadius()},A.prototype.getTooltip=function(){return null==this._seriesIndex?K.getOtherSliceDatatip(this._chart,this._value,!0):K.getDatatip(this._chart,this._seriesIndex,0,null,!0)},A.prototype.getAction=function(){return this._action},A.prototype.isDrillable=function(){return this._drillable},A.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors},A.createFillerSlice=function(t,e){var n=new A(t);return n._value=e,n._bFillerSlice=!0,n._centerX=t.getCenter().x,n._centerY=t.getCenter().y,n._fillColor="rgba(255,255,255,0)",n._strokeColor="rgba(255,255,255,0)",n._id=new a(null,null,null),n},A.prototype.getSeriesIndex=function(){return this._seriesIndex};var x=function(){};t.Obj.createSubclass(x,t.Obj),x.createAnimation=function(e,n,i){var r=[];if(W.isBLAC(e))x._animBarLineArea(e,i,r);else if(W.isScatterBubble(e)||W.isFunnel(e)||W.isPyramid(e))x._animBubbleScatterFunnelPyramid(e,i,r);else if(W.isPie(e)&&e.pieChart)return e.pieChart.getDisplayAnimation();return r.length>0?new t.ParallelPlayable(e.getCtx(),r):null},x._animBarLineArea=function(e,n,i){var r=e.getChartObjPeers(),o=r?r.length:0;if(o)for(var a,s,l,u=0;u<o;u++){s=r[u],a=s.getDisplayables()[0];var h=s.getSeriesType();if(l=null,a instanceof d||a instanceof y||a instanceof g||a instanceof p)l=a.getDisplayAnimation(n);else if(a instanceof _)l="line"==h?x._getLinePlayable(e,a,n):x._getAreaPlayable(e,a,n);else if(a instanceof t.SimpleMarker||a instanceof S){if(a instanceof m&&!a.isSelected())continue;l=new t.AnimFadeIn(e.getCtx(),a,n-.8,.8)}l&&i.push(l)}},x._animBubbleScatterFunnelPyramid=function(e,n,i){var r=e.getObjects(),o=r?r.length:0;if(o)for(var a,s,l,u=0;u<o;u++)s=r[u],a=s.getDisplayables()[0],a instanceof t.SimpleMarker?l=new t.AnimPopIn(e.getCtx(),a,(!0),n):(a instanceof b||a instanceof E)&&(l=x._getFunnelPyramidPlayable(e,a,n)),l&&i.push(l)},x._getAreaPlayable=function(e,n,i){var r,o=e.getCtx(),a=n.getBaseline();if(n.isArea()){for(var s=n.getBaseCoords(),l=n.getBaseAnimationParams(),u=l.slice(0),h=0;h<l.length;h++)h%4!=1&&h%4!=2||(l[h]=a);n.setBaseAnimationParams(l),r=new t.CustomAnimation(o,n,i),r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getBaseAnimationParams,n.setBaseAnimationParams,u)}for(var c=n.getCoords(),d=n.getAnimationParams(),p=d.slice(0),h=0;h<d.length;h++)h%4!=1&&h%4!=2||(d[h]=a);n.setAnimationParams(d);var g=new t.CustomAnimation(o,n,i);g.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,p);var f=new t.ParallelPlayable(e.getCtx(),r,g);return f.setOnEnd(function(){n.setCoords(c,s)}),f},x._getFunnelPyramidPlayable=function(e,n,i){var r=e.getCtx(),o=n.getAnimationParams(),a=o.slice(0),s=o.slice(0);o[0]=0,W.isFunnel(e)&&(o[2]=0,a[2]=0),n.setAnimationParams(o);var l=new t.CustomAnimation(r,n,i/2);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,a);var u=new t.CustomAnimation(r,n,i/2);return u.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,s),new t.SequentialPlayable(r,[l,u])},x._getLinePlayable=function(e,n,i){var r=n.getCoords(),o=n.getAnimationParams(),a=o.slice(0);x._getMeanPoints(o),n.setAnimationParams(o);var s=new t.CustomAnimation(e.getCtx(),n,i);return s.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,a),s.setOnEnd(function(){n.setCoords(r)}),s},x._getMeanPoints=function(t){var e,n=0,i=Number.MAX_VALUE,r=Number.MIN_VALUE,o=t.length;for(e=0;e<o;e++){var a=t[e];e%4!=0&&e%4!=3&&a!=1/0&&(a<i&&(i=a),a>r&&(r=a),n+=a)}for(o>8?(n-=2*i,n-=2*r,n/=o/2-4):n/=o/2,e=0;e<o;e++)e%4!=1&&e%4!=2||(t[e]=n)};var I=function(){};t.Obj.createSubclass(I,t.Obj),I.createAnimation=function(e,n,i,r,o){if(!I._canAnimate(e,n))return null;var a=n.getCtx(),s=[],l=[];W.isPie(n)?(s.push(e.pieChart),l.push(n.pieChart)):I._buildAnimLists(a,s,e,l,n,r);var u,h=new t.DataAnimationHandler(a,o);h.constructAnimation(s,l),h.getNumPlayables()>0&&(u=h.getAnimation(!0));var c=n.getDataLabels();if(u&&c.length>0){for(var d=0;d<c.length;d++)c[d].setAlpha(0);u=new t.SequentialPlayable(a,u,new t.AnimFadeIn(a,c,r/4))}return u},I._buildAnimLists=function(e,n,i,r,o,a){var s,l,u,h,c,f=i.getChartObjPeers(),v=n;for(s=0;s<2;s++){for(l=0;l<f.length;l++){if(u=f[l],h=u.getDisplayables()[0],c=null,h instanceof b)c=new k(u,a);else if(h instanceof E)c=new U(u,a);else if(h instanceof d||h instanceof y)c=new D(u,a);else if(h instanceof _)c=new w(u,a);else if(h instanceof t.SimpleMarker){if(h instanceof m&&!h.isSelected())continue;c=new R(u,a)}else if(h instanceof S){if(h.isInvisible()&&!h.isSelected())continue;c=new L(u,a)}else h instanceof g?c=new M(u,a):h instanceof p&&(c=new P(u,a));c&&(v.push(c),c.setOldChart(i))}v=r,f=o.getChartObjPeers()}},I._canAnimate=function(t,e){return W.isPie(t)&&W.isPie(e)?t&&e:W.isPolar(t)==W.isPolar(e)&&(!(!W.isBLAC(t)||!W.isBLAC(e))||(!(!W.isScatterBubble(t)||!W.isScatterBubble(e))||t.getType()==e.getType()))};var O=function(e){this.Options=e.Options,this.Peers=e.Peers,this.SeriesStyleArray=e.SeriesStyleArray,this.Cache=e.Cache,this.pieChart=e.pieChart,this._optionsCache=new t.BaseComponentCache,this._cache=new t.BaseComponentCache};t.Obj.createSubclass(O,t.Chart),O.prototype.getCache=function(){return this._cache},O.prototype.getOptionsCache=function(){return this._optionsCache};var M=function(t,e){this.Init(t,e)};t.Obj.createSubclass(M,t.Obj),M.prototype.animateUpdate=function(t,e){var n=e._shape;this._shape&&this._shape.getUpdateAnimation&&t.add(this._shape.getUpdateAnimation(this._updateDuration,n),1);
},M.prototype.animateInsert=function(e){if(this._shape&&this._shape.getInsertAnimation)e.add(this._shape.getInsertAnimation(this._insertDuration),2);else{var n=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(n,0)}},M.prototype.animateDelete=function(e,n){if(n.addChild(this._shape),this._shape&&this._shape.getDeleteAnimation)e.add(this._shape.getDeleteAnimation(this._deleteDuration),0);else{var i=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(i,0)}},M.prototype.getId=function(){return this._animId},M.prototype.Init=function(t,e){this._peer=t,this._updateDuration=.75*e,this._insertDuration=.5*e,this._deleteDuration=.5*e,this._shape=t.getDisplayables()[0],this._animId=t.getSeries()+"/"+t.getGroup()},M.prototype.setOldChart=function(t){this._oldChart=t};var D=function(t,e){this.Init(t,e)};t.Obj.createSubclass(D,M),D.prototype.Init=function(t,e){D.superclass.Init.call(this,t,e),this._indicator=null,this._animId+="/bar"},D.prototype.animateInsert=function(t){var e=this._shape.getInsertAnimation(this._insertDuration);t.add(e,2)},D.prototype.animateDelete=function(t,e){e.addChild(this._shape);var n=this._shape.getDeleteAnimation(this._deleteDuration);t.add(n,0)},D.prototype.animateUpdate=function(e,n){var i=this._oldChart,r=this._peer.getChart(),o=W.isHorizontal(i)!=W.isHorizontal(r),a=n._getAnimationParams(o),s=this._getAnimationParams(),l=n._shape.isSelected()||this._shape.isSelected(),u=n._shape.getPrimaryFill().clone(),h=this._shape.getPrimaryFill();if(!t.ArrayUtils.equals(a,s)||!u.equals(h)){var c=this._peer.getSeriesIndex(),d=n._peer.getSeriesIndex(),p=this._peer.getGroupIndex(),g=n._peer.getGroupIndex();"none"!==V.getAnimationIndicators(r)&&(this._indicator=N.makeIndicator(i,d,g,r,c,p)),this._setAnimationParams(a),l||this._shape.setFill(u);var f=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);f.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,s),l||f.getAnimator().addProp(t.Animator.TYPE_FILL,this._shape,this._shape.getFill,this._shape.setFill,h),this._indicator&&(f.setOnEnd(this._onEndAnimation,this),this._indicator.setAlpha(0)),e.add(f,1)}},D.prototype._getAnimationParams=function(t){return this._shape.getAnimationParams(t)},D.prototype._setAnimationParams=function(t){this._shape.setAnimationParams(t,this._indicator)},D.prototype._onEndAnimation=function(){this._indicator.getParent().removeChild(this._indicator),this._indicator=null};var P=function(t,e){this.Init(t,e)};t.Obj.createSubclass(P,M),P.prototype.Init=function(t,e){P.superclass.Init.call(this,t,e),this._animId+="/boxAndWhisker"};var w=function(t,e){this.Init(t,e)};t.Obj.createSubclass(w,M),w.prototype.animateUpdate=function(e,n){this._baseCoords=this._shape.getBaseCoords(),this._coords=this._shape.getCoords();var i,r=this._shape.isArea(),o=this._oldChart,a=this._chart,s=this._peer.getSeriesIndex(),l=n._peer.getSeriesIndex(),u=this._shape.getCommonGroupIndices(n._shape),h=n._shape.getCommonGroupIndices(this._shape);if(r){var c=n._getBaseAnimationParams(this._shape),d=this._getBaseAnimationParams(n._shape);w._matchGroupIndices(c,d),t.ArrayUtils.equals(c,d)||(this._setBaseAnimationParams(c),i=new t.CustomAnimation(this._context,this,this._updateDuration),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getBaseAnimationParams,this._setBaseAnimationParams,d))}var p,g=n._getAnimationParams(this._shape),f=this._getAnimationParams(n._shape);if(w._matchGroupIndices(g,f),t.ArrayUtils.equals(g,f)||(this._setAnimationParams(g),p=new t.CustomAnimation(this._context,this,this._updateDuration),p.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,f)),"none"!==V.getAnimationIndicators(a)&&(!r||"lineWithArea"!=this._peer.getSeriesType()))for(var _,m,v=0;v<u.length;v++)_=N.getDirection(o,l,h[v],a,s,u[v]),m=N.makeIndicator(o,l,h[v],a,s,u[v]),m&&this._shape.addIndicator(u[v],_,m);if(i||p){var y=new t.ParallelPlayable(this._context,i,p);y.setOnEnd(this._onAnimationEnd,this),e.add(y,1)}},w.prototype.animateInsert=function(e){this._shape.setAlpha(0);var n=new t.AnimFadeIn(this._context,this._shape,this._insertDuration);e.add(n,2)},w.prototype.animateDelete=function(e,n){var i,r=V.getSeriesType(this._oldChart,this._peer.getSeriesIndex());if("area"==r){var o=this._chart.__getAreaContainer();if(this._deletedAreas=this._shape.getParent().getParent(),!o)return;o.addChild(this._deletedAreas),i=new t.AnimFadeOut(this._context,this._deletedAreas,this._deleteDuration),i.setOnEnd(this._removeDeletedAreas,this),e.add(i,0)}else n.addChild(this._shape),i=new t.AnimFadeOut(this._context,this._shape,this._deleteDuration),e.add(i,0)},w.prototype._removeDeletedAreas=function(){var t=this._chart.__getAreaContainer();t&&t.removeChild(this._deletedAreas)},w.prototype._getAnimationParams=function(t){return this._shape.getAnimationParams(t)},w.prototype._setAnimationParams=function(t){this._shape.setAnimationParams(t)},w.prototype._getBaseAnimationParams=function(t){return this._shape.getBaseAnimationParams(t)},w.prototype._setBaseAnimationParams=function(t){this._shape.setBaseAnimationParams(t)},w.prototype._onAnimationEnd=function(){this._shape.removeIndicators(),this._shape.setCoords(this._coords,this._baseCoords)},w._matchGroupIndices=function(t,e){for(var n=3;n<t.length;n+=4)t[n]=e[n]},w.prototype.Init=function(t,e){w.superclass.Init.call(this,t,e),this._context=this._shape.getCtx(),this._chart=this._peer.getChart(),this._animId+="/"+(this._shape.isArea()?"area":"line")};var R=function(t,e){this.Init(t,e)};t.Obj.createSubclass(R,M),R.prototype.animateUpdate=function(e,n){var i=n._shape.getCenterDimensions(),r=this._shape.getCenterDimensions();if(!r.equals(i)){this._shape.setCenterDimensions(i);var o=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);o.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this._shape,this._shape.getCenterDimensions,this._shape.setCenterDimensions,r);var a=this._peer.getChart();if(this.isValueChange(n)&&"none"!=V.getAnimationIndicators(a)&&W.isScatterBubble(a)){var s=n._shape;s.setSolidFill("#FFFF2B",.9),s.setCenterDimensions(i),this._peer.getChart().getPlotArea().addChild(s),o.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,s,s.getCenterDimensions,s.setCenterDimensions,r),o.getAnimator().addProp(t.Animator.TYPE_NUMBER,s,s.getAlpha,s.setAlpha,0),this._overlay=s,o.setOnEnd(this._onEndAnimation,this)}e.add(o,1)}},R.prototype.animateInsert=function(e){this._shape.setAlpha(0);var n=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(n,2)},R.prototype.animateDelete=function(e,n){n.addChild(this._shape);var i=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(i,0)},R.prototype.isValueChange=function(t){var e=!1;if(t){var n=t._peer.getSeriesIndex(),i=t._peer.getGroupIndex(),r=this._peer.getSeriesIndex(),o=this._peer.getGroupIndex(),a=t._oldChart.getOptions(),s=this._peer.getChart().getOptions(),l=a.series[n].items[i].x,u=a.series[n].items[i].y,h=a.series[n].items[i].z,c=s.series[r].items[o].x,d=s.series[r].items[o].y,p=s.series[r].items[o].z;e=c!==l||d!==u||p!==h}return e},R.prototype._onEndAnimation=function(){this._overlay&&(this._peer.getChart().getPlotArea().removeChild(this._overlay),this._overlay=null)},R.prototype.Init=function(t,e){R.superclass.Init.call(this,t,e),this._animId+="/marker"};var L=function(t,e){this.Init(t,e)};t.Obj.createSubclass(L,M),L.prototype.Init=function(t,e){L.superclass.Init.call(this,t,e),this._animId+="/rangeMarker"},L.prototype.animateInsert=function(e){this._shape.setAlpha(0);var n=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(n,2)},L.prototype.animateDelete=function(e,n){n.addChild(this._shape);var i=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(i,0)},L.prototype.animateUpdate=function(e,n){var i=n._shape.getAnimationParams(),r=this._shape.getAnimationParams();this._shape.setAnimationParams(i);var o=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._shape,this._shape.getAnimationParams,this._shape.setAnimationParams,r),e.add(o,1)};var N=new Object;t.Obj.createSubclass(N,t.Obj),N.DIR_UP=0,N.DIR_DOWN=1,N.DIR_NOCHANGE=2,N.makeIndicator=function(t,e,n,i,r,o){if(W.isPolar(i))return null;var a=N.getDirection(t,e,n,i,r,o);if(a==N.DIR_NOCHANGE)return null;var s=a===N.DIR_DOWN,l=s?V.getAnimationDownColor(i):V.getAnimationUpColor(i),u=N._drawIndicator(i.getCtx(),s,W.isHorizontal(i),l);return i.getPlotArea().addChild(u),u},N.getDirection=function(t,e,n,i,r,o){var a=F.getValue(t,e,n),s=F.getValue(i,r,o);return null==s||null==a||s==a?N.DIR_NOCHANGE:s>a?N.DIR_UP:N.DIR_DOWN},N._drawIndicator=function(e,n,i,r){var o;if(i){var a=t.Agent.isRightToLeft(e)?!n:n;o=a?"M3.5,-5L3.5,5L-3.5,0L3.5,-5":"M-3.5,-5L-3.5,5L3.5,0L-3.5,-5"}else o=n?"M-5,-3.5L5,-3.5L0,3.5L-5,-3.5Z":"M-5,3.5L5,3.5L0,-3.5L-5,3.5Z";var s=new t.Path(e,o);return s.setSolidFill(r),s};var k=function(t,e){this.Init(t,e)};t.Obj.createSubclass(k,M),k.prototype.animateUpdate=function(e,n){var i=this._shape,r=n._shape.getAnimationParams(),o=i.getAnimationParams(),a=n._shape.getFill().clone(),s=this._shape.getFill();if(!t.ArrayUtils.equals(r,o)||!a.equals(s)){i.setAnimationParams(r),this._shape.setFill(a);var l=new t.CustomAnimation(i.getCtx(),this,this._updateDuration);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,o),l.getAnimator().addProp(t.Animator.TYPE_FILL,this._shape,this._shape.getFill,this._shape.setFill,s),this._indicator&&l.setOnEnd(this._onEndAnimation,this),e.add(l,1)}},k.prototype.animateInsert=function(e){var n=this._shape,i=n.getAnimationParams(),r=i.slice(0);r[0]+=r[1]/2,r[1]=0,r[3]=0,n.setAnimationParams(r);var o=new t.CustomAnimation(n.getCtx(),this,this._insertDuration);o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,i),e.add(o,2)},k.prototype.animateDelete=function(e,n){var i=this._shape;n.setClipPath(null),n.addChild(i);var r=i.getAnimationParams(),o=r.slice(0);o[0]+=r[1]/2,o[1]=0,o[3]=0;var a=new t.CustomAnimation(i.getCtx(),this,this._deleteDuration);a.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,o),e.add(a,0)},k.prototype.Init=function(t,e){k.superclass.Init.call(this,t,e),this._animId+="/funnel"};var U=function(t,e){this.Init(t,e)};t.Obj.createSubclass(U,M),U.prototype.animateUpdate=function(e,n){var i=this._shape,r=n._shape.getAnimationParams(),o=i.getAnimationParams(),a=n._shape.getPrimaryFill(),s=this._shape.getPrimaryFill();if(!t.ArrayUtils.equals(r,o)||!a.equals(s)){i.setAnimationParams(r),this._shape.setFill(a);var l=new t.CustomAnimation(i.getCtx(),this,this._updateDuration);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,o),l.getAnimator().addProp(t.Animator.TYPE_FILL,i,i.getFill,i.setFill,s),e.add(l,1)}},U.prototype.animateInsert=function(e){var n=this._shape,i=n.getAnimationParams(),r=i.slice(0);r[1]=0,r[2]=0,n.setAnimationParams(r);var o=new t.CustomAnimation(n.getCtx(),this,this._insertDuration);o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,i),e.add(o,2)},U.prototype.animateDelete=function(e,n){var i=this._shape;n.setClipPath(null),n.addChild(i);var r=i.getAnimationParams(),o=r.slice(0);o[1]=0,o[2]=0;var a=new t.CustomAnimation(i.getCtx(),this,this._deleteDuration);a.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,o),e.add(a,0)},U.prototype.Init=function(t,e){U.superclass.Init.call(this,t,e),this._animId+="/pyramid"};var B=new Object;t.Obj.createSubclass(B,t.Obj),B.getXAxisPosition=function(e){return W.isPolar(e)?"tangential":W.isHorizontal(e)?t.Agent.isRightToLeft(e.getCtx())?"right":"left":"bottom"},B.getBaselineScaling=function(t,e){var n=e+"Axis",i=t.getOptions()[n].baselineScaling;return!i||"zero"!=i&&"min"!=i?W.isStock(t)?"min":"zero":i},B.getYAxisPosition=function(e){var n=e.getOptions().yAxis.position;return W.isPolar(e)?"radial":W.isHorizontal(e)?!n||"top"!=n&&"bottom"!=n?"bottom":n:(W.isStock(e)&&(n=n?n:"end"),t.Agent.isRightToLeft(e.getCtx())?n&&"end"==n?"left":"right":n&&"end"==n?"right":"left")},B.getY2AxisPosition=function(e){var n=e.getOptions().y2Axis.position;return W.isHorizontal(e)?!n||"top"!=n&&"bottom"!=n?"top":n:t.Agent.isRightToLeft(e.getCtx())?n&&"start"==n?"right":"left":n&&"start"==n?"left":"right"},B.hasTimeAxis=function(t){return W.isBLAC(t)&&"disabled"!=B.getTimeAxisType(t)},B.hasGroupAxis=function(t){return W.isBLAC(t)&&"disabled"==B.getTimeAxisType(t)},B.getTimeAxisType=function(t){var e=t.getOptions().timeAxisType;return e&&"auto"!=e&&W.isBLAC(t)&&!W.isPolar(t)?e:W.isStock(t)?"skipGaps":"disabled"},B.isMixedFrequency=function(t){return"mixedFrequency"==B.getTimeAxisType(t)},B.getAxisOffset=function(t){var e="axisOffset",n=t.getCache().getFromCache(e);if(null!=n)return n;var i=t.getOptions().styleDefaults.groupSeparators;if(B.hasGroupAxis(t)&&F.getNumLevels(t)>1&&"on"==i.rendered)n=.5;else if(W.hasBarSeries(t)||W.hasCenteredSeries(t)||W.hasCandlestickSeries(t)||W.hasBoxPlotSeries(t)||W.isBLAC(t)&&1==F.getGroupCount(t))n=.5;else if(!s.isPostAltaSkin(t)||W.isSpark(t)||H.isScrollable(t)||W.isOverview(t))n=0;else{var r=W.isHorizontal(t)?.2:.5;n=r-r/Math.sqrt(F.getGroupCount(t))}return t.getCache().putToCache(e,n),n},B.isGridShifted=function(t){if(!W.isBLAC(t))return!1;for(var e=F.getSeriesCount(t),n=0;n<e;n++)if(V.isSeriesRendered(t,n)){var i=V.getSeriesType(t,n),r=V.getLineType(t,n);if("bar"!=i&&"centeredSegmented"!=r&&"centeredStepped"!=r)return!1}return!0},B.isGridPolygonal=function(t){return!(!W.isBLAC(t)||W.hasBarSeries(t))&&"polygon"==t.getOptions().polarGridShape},B.isAxisRendered=function(t,e){if("y"==e&&W.hasY2DataOnly(t))return!1;if("y2"==e&&!W.hasY2Data(t))return!1;var n=t.getOptions(),i=n[e+"Axis"];return"off"!=i.rendered&&!("off"==i.tickLabel.rendered&&!i.title)},B.isAxisLineRendered=function(t,e){var n=t.getOptions()[e+"Axis"];return"off"!=n.rendered&&"off"!=n.axisLine.rendered&&!("auto"==n.axisLine.rendered&&"x"!=e&&W.isBLAC(t)&&!W.isPolar(t))},B.isMajorTickRendered=function(t,e){var n=t.getOptions()[e+"Axis"];return"off"!=n.rendered&&"off"!=n.majorTick.rendered&&!("auto"==n.majorTick.rendered&&"x"==e&&W.isBLAC(t)&&!W.isPolar(t))},B.isMinorTickRendered=function(t,e){var n=t.getOptions()[e+"Axis"];return"off"!=n.rendered&&"off"!=n.minorTick.rendered&&("on"==n.minorTick.rendered||B.isLog(t,e))},B.isLog=function(t,e){var n=t.getOptions()[e+"Axis"];return"log"==n.scale},B.getTickLabelHeight=function(e,n){var i=e.getOptions(),r=i[n+"Axis"],o=r.tickLabel.style;return o instanceof t.CSSStyle||(o=new t.CSSStyle(o)),o.mergeUnder(t.Axis.getDefaults(i.skin).tickLabel.style),t.TextUtils.getTextStringHeight(e.getCtx(),o)},B.getTickLabelGapSize=function(t,e){if(B.isTickLabelInside(t,e))return 0;var n=t.getOptions(),i=W.isHorizontal(t),r=B.getGapScalingFactor(t,e),o=Math.ceil(n.layout.tickLabelGapWidth*r),a=Math.ceil(n.layout.tickLabelGapHeight*r);return"x"==e?i?o:a:i?a:o},B.getGapScalingFactor=function(t,e){return B.isAxisRendered(t,e)?B.getTickLabelHeight(t,e)/14:0},B.isTickLabelInside=function(t,e){return!(W.isPolar(t)||W.isScatterBubble(t)||W.isBLAC(t)&&"x"==e)&&"inside"==t.getOptions()[e+"Axis"].tickLabel.position},B.getXAxisViewportMinMax=function(t,e){var n=t.getOptions().xAxis,i=B.hasGroupAxis(t),r=B.getAxisOffset(t);if(e)var o=B.getXAxisGlobalMinMax(t);var a=null;null!=n.viewportMin?a=n.viewportMin:null!=n.viewportStartGroup?a=i?F.getGroupIndex(t,n.viewportStartGroup)-r:n.viewportStartGroup:e&&(a=o.min);var s=null;return null!=n.viewportMax?s=n.viewportMax:null!=n.viewportEndGroup?s=i?F.getGroupIndex(t,n.viewportEndGroup)+r:n.viewportEndGroup:e&&(s=o.max),{min:a,max:s}},B.getXAxisGlobalMinMax=function(t){var e=t.getOptions().xAxis,n=B.hasGroupAxis(t),i=B.getAxisOffset(t);if(!n)var r=F.getMinMaxValue(t,"x");var o=null;o=null!=e.min?e.min:n?0-i:r.min;var a=null;return a=null!=e.max?e.max:n?F.getGroupCount(t)-1+i:r.max,{min:o,max:a}},B.applyInitialZooming=function(t,e){var n=t.getOptions(),i=n.xAxis,r=n.initialZooming;if(W.isBLAC(t)&&"off"!=n.zoomAndScroll&&"none"!=r){n._initialZoomed&&("last"==r?i.viewportMin=null:i.viewportMax=null);var o=B.getXAxisViewportMinMax(t,!1),a=o.min,s=o.max;if(!("last"==r&&null!=a||"first"==r&&null!=s)){var l=W.isHorizontal(t)?e.h:e.w,u=Math.floor(l/(2*B.getTickLabelHeight(t,"x")))+B.getAxisOffset(t),h=F.getGroupCount(t)-1;if(!(h<=u)){var c,d;if(B.hasGroupAxis(t))c=0,d=h;else{var p=F.getMinMaxValue(t,"x");c=p.min,d=p.max}var g=u/h*(d-c);"last"==n.initialZooming?(null==s&&(s=d),i.viewportMin=Math.max(s-g,c)):(null==a&&(a=c),i.viewportMax=Math.min(a+g,d)),n._initialZoomed=!0}}}},B.getGroupWidthRatios=function(e){if(!W.hasBarSeries(e)&&!W.hasCandlestickSeries(e)&&!W.hasBoxPlotSeries(e))return null;var n=e.getOptions(),i=V.getBarGapRatio(e);if(i>=1)return n._averageGroupZ=1/0,null;n._averageGroupZ=0;for(var r,o,a,s=F.getGroupCount(e),l=W.isSplitDualY(e),u=F.getStackCategories(e,"bar"),h=e.getOptionsCache().getFromCache("_hasVaryingBarWidth"),c=[],d=0;d<s;d++){if(r=0,o=0,h){for(a=0;a<u.y.length;a++)r+=F.getBarCategoryZ(e,u.y[a],d,!1);for(a=0;a<u.y2.length;a++)o+=F.getBarCategoryZ(e,u.y2[a],d,!0)}else r=u.y.length,o=u.y2.length;c.push(l?Math.max(r,o):r+o)}var p=t.ArrayUtils.reduce(c,function(t,e){return t+e}),g=p*i/(1-i),f=t.ArrayUtils.map(c,function(t){return t+g/s});return n._averageGroupZ=(p+g)/s,f},B.isYAdjustmentNeeded=function(t){var e=t.getOptions().styleDefaults.dataLabelPosition,n=V.isStackLabelRendered(t);return!(!W.hasBarSeries(t)||"outsideBarEdge"!=e&&!n)},B.axisContainsPoint=function(t,e){if(!t)return!1;var n=t.getOptions().position,i="top"==n||"bottom"==n,r=i?4:10,o=i?10:4,a=t.__getBounds().clone();a.x-=o,a.y-=r,a.w+=2*o,a.h+=2*r;var s=t.stageToLocal(e);return a.containsPoint(s.x,s.y)};var F=new Object;t.Obj.createSubclass(F,t.Obj),F.hasData=function(t){var e=t.getOptions();if(!e||!e.series||e.series.length<1)return!1;for(var n=1,i=F.getSeriesCount(t),r=0;r<i;r++){var o=F.getSeriesItem(t,r);if(o&&o.items&&o.items.length>=n)return!0}return!1},F.hasInvalidData=function(t){return!F.hasData(t)||F.hasInvalidTimeData(t)},F.hasInvalidTimeData=function(t){if(W.isFunnel(t)||W.isPie(t)||W.isPyramid(t))return!1;var e=t.getOptions(),n=F.getGroupCount(t);if(!e||!e.series||e.series.length<1)return!0;if(n<1)return!0;var i,r,o=F.getSeriesCount(t);if(B.isMixedFrequency(t))for(i=0;i<o;i++)for(r=0;r<n;r++){var a=F.getDataItem(t,i,r);if(a&&(null==a.x||isNaN(a.x)))return!0}else if(B.hasTimeAxis(t))for(r=0;r<n;r++){var s=F.getGroup(t,r);if(null==s||isNaN(s))return!0}return!1},F.hasSeriesData=function(t,e){var n=F.getSeriesItem(t,e),i=n.items;if(i)for(var r=0;r<i.length;r++)if(null!=i[r])return!0;return!1},F.processDataObject=function(e){if(F.hasData(e)){var n=e.getOptions(),i=e.getOptionsCache(),r=F.getSeriesCount(e);W.isValidType(e)||(n.type="bar");var o=W.isStock(e);o&&(i.putToCache("_hasVolume",!1),r>1&&(n.series=n.series.slice(0,1),r=1));var a=W.isBLAC(e);i.putToCache("_hasVaryingBarWidth",!1),i.putToCache("dataMarkerSizeSet",!1),i.putToCache("dataMarkerDisplayedSet",!1);var s=B.isMixedFrequency(e),l=r>100;i.putToCache("hasLargeSeriesCount",l),i.putToCache("hasY2Assignment",!1);for(var u=0,h=e.getSeriesStyleArray(),c=0;c<r;c++){var d=F.getSeries(e,c);!l&&null!=d&&t.ArrayUtils.getIndex(h,d)<0&&h.push(d);var p=F.getSeriesItem(e,c);if(p.items&&p.items.length>u&&(u=p.items.length),"hidden"==p.visibility){var g=V.getHiddenCategories(e);t.ArrayUtils.getIndex(g,d)<0&&g.push(d)}if(p.visibility=null,"on"==p.assignedToY2&&i.putToCache("hasY2Assignment",!0),p&&p.items)for(var f,_=p.items,m=0;m<_.length;m++)_[m]&&(f=_[m],"object"!=typeof f?f=Number(f):(!s&&f.x&&(f.x=Number(f.x)),f.y&&(f.y=Number(f.y)),f.z&&(f.z=Number(f.z),a&&1!=f.z&&i.putToCache("_hasVaryingBarWidth",!0)),f.value&&(f.value=Number(f.value)),f.targetValue&&(f.targetValue=Number(f.targetValue)),f.open&&(f.open=Number(f.open)),f.close&&(f.close=Number(f.close)),f.low&&(f.low=Number(f.low)),f.high&&(f.high=Number(f.high)),f.volume&&(f.volume=Number(f.volume),i.putToCache("_hasVolume",!0)),f.markerSize&&i.putToCache("dataMarkerSizeSet",!0),f.markerDisplayed&&i.putToCache("dataMarkerDisplayedSet",!0)),_[m]=f)}if(o&&F.hasVolumeSeries(e)&&!W.isOverview(e)){var v=t.JsonUtils.clone(F.getSeriesItem(e,0));v.assignedToY2="on",i.putToCache("hasY2Assignment",!0),v.type="bar",v.categories=F.getCategories(e,0),v.id="_volume",v._selectable="off",v.items=[];for(var y=0;y<p.items.length;y++){var S={};S.color=V.getStockVolumeColor(e,0,y),S.x=p.items[y].x,S.value=p.items[y].volume,v.items.push(S)}n.series.push(v)}for(var C=j.getRefObjs(e),c=0;c<C.length;c++){var _=C[c].items;if(_)for(var m=0;m<_.length;m++){var f=_[m];f&&("object"!=typeof f?_[m]=Number(f):(!B.isMixedFrequency(e)&&f.x&&(f.x=Number(f.x)),f.max&&(f.max=Number(f.max)),f.min&&(f.min=Number(f.min)),f.value&&(f.value=Number(f.value))))}}n.groups||(n.groups=new Array);for(var b=F.getGroupCount(e),c=0;c<u-b;c++){var E=t.Bundle.getTranslation(n,"labelDefaultGroupName",t.Bundle.CHART_PREFIX,"DEFAULT_GROUP_NAME",n.groups.length+1);n.groups.push(E)}e.getOptionsCache().putToCache("groupsArray",null),F._processTimeAxis(e);var T=n.sorting;if(T="on"==T?"descending":"ascending"!=T&&"descending"!=T?"off":T,W.isBLAC(e)&&B.hasGroupAxis(e)&&"off"!=T&&1==F.getNumLevels(e)){for(var A=F.getGroups(e),x={},m=0;m<A.length;m++){for(var I=0,c=0;c<=r;c++)if(V.isSeriesRendered(e,c)&&!F.isAssignedToY2(e,c)){var O=F.getValue(e,c,m);I+=null==O||isNaN(O)?0:O}x[A[m]]={index:m,total:I,group:n.groups[m]}}"ascending"==T?A.sort(function(t,e){return x[t].total-x[e].total}):A.sort(function(t,e){return x[e].total-x[t].total});for(var c=0;c<r;c++){for(var M=[],m=0;m<A.length;m++)M.push(F.getDataItem(e,c,x[A[m]].index));n.series[c].items=M}for(var D=[],m=0;m<A.length;m++)D.push(x[A[m]].group);n.groups=D,e.getOptionsCache().putToCache("groupsArray",null),e.getOptionsCache().putToCache("value",null)}F._sanitizeAxis(n.xAxis),F._sanitizeAxis(n.yAxis),F._sanitizeAxis(n.y2Axis)}},F._sanitizeAxis=function(t){t.min==t.max&&(t.min=null,t.max=null)},F._sanitizeDateTime=function(t,e){var n=null,i=t.getLocaleHelpers().isoToDateConverter;if(i){try{n=i(e)}catch(r){n=null}n=null!=n&&n.getTime?n.getTime():null}return null==n&&(n=Date.parse(e)),isNaN(n)&&(n=Number(e)),n},F._processTimeAxis=function(t){var e,n,i=t.getCtx(),r=t.getOptions(),o=F.getSeriesCount(t),a=F.getGroupCount(t);if(B.isMixedFrequency(t))for(e=0;e<o;e++)for(n=0;n<a;n++){var s=F.getDataItem(t,e,n);null!=s&&"string"==typeof s.x&&null!=s.x&&(s.x=F._sanitizeDateTime(i,s.x))}else if(B.hasTimeAxis(t)){for(n=0;n<a;n++){var l=F.getGroup(t,n);null!=l&&(r.groups[n]=F._sanitizeDateTime(i,l))}t.getOptionsCache().putToCache("groupsArray",null)}if(B.hasTimeAxis(t)){var u=r.xAxis;null!=u.dataMin&&(u.dataMin=F._sanitizeDateTime(i,u.dataMin)),null!=u.dataMax&&(u.dataMax=F._sanitizeDateTime(i,u.dataMax)),null!=u.min&&(u.min=F._sanitizeDateTime(i,u.min)),null!=u.max&&(u.max=F._sanitizeDateTime(i,u.max)),null!=u.viewportMin&&(u.viewportMin=F._sanitizeDateTime(i,u.viewportMin)),null!=u.viewportMax&&(u.viewportMax=F._sanitizeDateTime(i,u.viewportMax)),null!=u.viewportStartGroup&&(u.viewportStartGroup=F._sanitizeDateTime(i,u.viewportStartGroup)),null!=u.viewportEndGroup&&(u.viewportEndGroup=F._sanitizeDateTime(i,u.viewportEndGroup));for(var h=j.getRefObjs(t),c=0;c<h.length;c++){var d=h[c].items;if(d)for(var p=0;p<d.length;p++)d[p]&&null!=d[p].x&&(d[p].x=F._sanitizeDateTime(i,d[p].x))}}},F.isEqualId=function(e,n){return null!=e&&null!=n&&(e==n||!!(t.ArrayUtils.isArray(e)&&t.ArrayUtils.isArray(n)&&t.ArrayUtils.equals(e,n)))},F.getSeriesCount=function(t){return t.getOptions().series.length},F.getY2SeriesCount=function(t,e,n){for(var i=0,r=F.getSeriesCount(t),o=0;o<r;o++)e&&V.getSeriesType(t,o)!=e||(n||V.isSeriesRendered(t,o))&&F.isAssignedToY2(t,o)&&i++;return i},F.getSeries=function(t,e){var n=F.getSeriesItem(t,e);return n?n.id?n.id:n.name||""==n.name?n.name:String(e):null},F.getSeriesLabel=function(t,e){var n=F.getSeriesItem(t,e);return n&&(n.name||""==n.name)?n.name:null},F.getSeriesIndex=function(t,e){for(var n=F.getSeriesCount(t),i=0;i<n;i++){var r=F.getSeries(t,i);if(r==e)return i}return-1},F.getSeriesStyleIndex=function(e,n){if(e.getOptionsCache().getFromCache("hasLargeSeriesCount"))return n;var i=F.getSeries(e,n);return i?t.ArrayUtils.getIndex(e.getSeriesStyleArray(),i):n},F.getSeriesItem=function(t,e){if(isNaN(e)||null==e||e<0)return null;var n=t.getOptions();return n.series&&n.series.length>e?n.series[e]:void 0},F.getDataItem=function(t,e,n){if(isNaN(n)||null==n||n<0)return null;var i=F.getSeriesItem(t,e);return i&&i.items&&i.items.length>n?i.items[n]:null},F.getDataItemId=function(t,e,n){var i=F.getDataItem(t,e,n);return i?null!=i.id?i.id:F.getSeries(t,e)+"; "+F.getGroup(t,n):null},F.getNestedDataItem=function(t,e,n,i){if(isNaN(i)||null==i||i<0)return null;var r=F.getDataItem(t,e,n);return r&&r.items&&r.items.length>i?r.items[i]:null},F.getNestedDataItemCount=function(t,e,n){var i=F.getDataItem(t,e,n);return i&&i.items?i.items.length:0},F.getNestedDataItemId=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);return r?null!=r.id?r.id:F.getDataItemId(t,e,n)+"; "+String(i):null},F.getNestedDataItemIndex=function(t,e,n,i){for(var r=F.getNestedDataItemCount(t,e,n),o=0;o<r;o++){var a=F.getNestedDataItemId(t,e,n,o);if(F.isEqualId(a,i))return o}return-1},F.getGroupCount=function(t){return F._getGroupsArray(t).length},F.getGroup=function(t,e){if(null!=e&&e>=0&&e<F.getGroupCount(t)){var n=F._getGroupsArray(t)[e];if(n)return n.id?n.id:n.name||""==n.name?n.name:String(e)}return null},F.getGroupIndex=function(e,n){for(var i=F.getGroups(e),r=0;r<i.length;r++)if(n instanceof Array&&i[r]instanceof Array?t.ArrayUtils.equals(n,i[r]):n==i[r])return r;return-1},F.getGroupLabel=function(t,e){if(e>=0&&e<F.getGroupCount(t)){var n=F._getGroupsArray(t)[e];if(n)return n.name?n.name:null!=n.id?"":n}return null},F.getGroups=function(t){for(var e=F.getGroupCount(t),n=[],i=0;i<e;i++)n.push(F.getGroup(t,i));return n},F._getGroupsArray=function(t){var e=t.getOptions(),n="groupsArray",i=t.getOptionsCache().getFromCache(n);if(!i){i=[],e.groups&&(i=F._getNestedGroups(e.groups,i));for(var r=0;r<i.length;r++)1==i[r].id.length&&(i[r].id=i[r].id[0],i[r].name=i[r].name[0]);t.getOptionsCache().putToCache(n,i)}return i},F._getNestedGroups=function(t,e){if(t){for(var n=0;n<t.length;n++){var i=t[n],r=null,o=null;if(null!=i&&(r=i.id?i.id:i.name?i.name:i,o=i.name?i.name:i),"object"==typeof r&&(r=null),"object"==typeof o&&(o=null),i&&i.groups){var a=F._getNestedGroups(i.groups,[]);a||(a=[{id:[],name:[]}]);for(var s=0;s<a.length;s++)a[s].id.unshift(r),a[s].name.unshift(o);e=e.concat(a)}else e.push({id:[r],name:[o]})}return e}},F.getNumLevels=function(e){for(var n=F._getGroupsArray(e),i=0,r=0;r<n.length;r++){var o=n[r];if(o&&o.id){var a=t.ArrayUtils.isArray(o.id)?o.id.length:1;i=Math.max(i,a)}}return i},F.getValue=function(t,e,n,i){var r,o="value",a=!isNaN(i)&&null!=i&&i>=0;if(!a&&(r=t.getOptionsCache().getFromCachedMap2D(o,e,n),void 0!==r))return r;var s=a?F.getNestedDataItem(t,e,n,i):F.getDataItem(t,e,n);return r=null,null!=s&&("object"!=typeof s?r=s:W.isStock(t)&&null!=s.close?r=s.close:null!=s.value?r=s.value:null!=s.y&&(r=s.y)),r=r||(0===r?0:null),a||t.getOptionsCache().putToCachedMap2D(o,e,n,r),r},F.getCumulativeValue=function(t,e,n,i){if(!W.isStacked(t))return F.getValue(t,e,n);var r=i?"cumValueH":"cumValue",o=t.getCache().getFromCachedMap2D(r,e,n);if(void 0!==o)return o;var a=V.getSeriesType(t,e),s=F.isAssignedToY2(t,e),l=F.getValue(t,e,n),u=F.getStackCategory(t,e),h="bar"==a?l<0:F.isSeriesNegative(t,e);o=0;for(var c=e;c>=0;c--)if((i||V.isDataItemRendered(t,c,n))&&a==V.getSeriesType(t,c)&&s==F.isAssignedToY2(t,c)&&F.getStackCategory(t,c)==u){var d=F.getValue(t,c,n),p="bar"==a?d<0:F.isSeriesNegative(t,c);if(h&&p||!h&&!p){var g=t.getCache().getFromCachedMap2D(r,c,n);if(void 0!==g){o=l+(g||0);break}o+=null==d||isNaN(d)?0:d}}return t.getCache().putToCachedMap2D(r,e,n,o),o},F.getLowValue=function(t,e,n){var i=F.getDataItem(t,e,n);return null==i?null:"candlestick"==V.getSeriesType(t,e)?null==i.low&&null!=i.close?null!=i.open?Math.min(i.close,i.open):i.close:i.low:null!=i.low&&null==i.close?i.low:null},F.getHighValue=function(t,e,n){var i=F.getDataItem(t,e,n);return null==i?null:"candlestick"==V.getSeriesType(t,e)?null==i.high?null!=i.open?Math.max(i.close,i.open):i.close:i.high:null!=i.high&&null==i.close?i.high:null},F.getXValue=function(t,e,n){if(B.hasGroupAxis(t))return n;var i=F.getDataItem(t,e,n);if(null==i)return null;var r=i.x;return null!=r?r:F.getGroupLabel(t,n)},F.getTargetValue=function(t,e){var n=F.getDataItem(t,e,0);return null==n||"object"!=typeof n?null:n.targetValue},F.getZValue=function(t,e,n,i){var r=F.getDataItem(t,e,n);return null==r||"object"!=typeof r?i:null!=r.z?r.z:i},F.isStockValueRising=function(t,e,n){var i=F.getDataItem(t,e,n);return!i||i.open<=i.close},F.getCategories=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);if(r&&r.categories)return r.categories;var o=F.getDataItem(t,e,n);if(o&&o.categories)return o.categories;var a=F.getSeriesItem(t,e);if(a&&a.categories)return a.categories;var s=F.getSeries(t,e);return s?[s]:[]},F.isXValInViewport=function(t,e){if(isNaN(e)||null==e)return!1;var n=B.getXAxisViewportMinMax(t,!0);return!(null!=n.min&&e<n.min||null!=n.max&&e>n.max)},F.isXInViewport=function(t,e,n){var i="isXInViewport",r=t.getCache().getFromCachedMap2D(i,e,n);if(null==r){var o=F.getXValue(t,e,n);r=F.isXValInViewport(t,o),t.getCache().putToCachedMap2D(i,e,n,r)}return r},F.isRefObjInViewport=function(t,e,n){var i=j.getXValue(t,e,n),r="isRefObjInViewport",o=t.getCache().getFromCachedMap2D(r,i);if(null==o){var a=j.getXValue(t,e,n-1),s=j.getXValue(t,e,n+1);o=F.isXValInViewport(t,i)||F.isXValInViewport(t,a)||F.isXValInViewport(t,s),t.getCache().putToCachedMap2D(r,i,o)}return o},F.isBLACItemInViewport=function(t,e,n){return!!V.isDataItemRendered(t,e,n)&&(F.isXInViewport(t,e,n)||F.isXInViewport(t,e,n-1)||F.isXInViewport(t,e,n+1))},F.getViewportGroupCount=function(t){var e=B.getXAxisViewportMinMax(t,!0),n=B.getXAxisGlobalMinMax(t),i=(e.max-e.min)/(n.max-n.min);return isNaN(i)?1:i*F.getGroupCount(t)},F._computeYAlongLine=function(e,n,i,r,o,a){e&&(i=t.Math.log10(i),o=t.Math.log10(o));var s=i+(o-i)*(a-n)/(r-n);return e?Math.pow(10,s):s},F._getViewportEdgeYValues=function(t,e){var n=F.getSeriesItem(t,e),i=n.items;if(!i)return{min:null,max:null};for(var r,o,a,s,l,u,h="withoutRescale"==H.getHideAndShowBehavior(t),c=B.getXAxisViewportMinMax(t,!0),d=c.min,p=c.max,g=B.isLog(t,F.isAssignedToY2(t,e)?"y2":"y"),f=0;f<i.length;f++)(h||V.isDataItemRendered(t,e,f))&&(r=F.getXValue(t,e,f),o=F.getCumulativeValue(t,e,f,h),null!=a&&(null!=d&&d>a&&d<r&&(l=F._computeYAlongLine(g,a,s,r,o,d)),null!=p&&p>a&&p<r&&(u=F._computeYAlongLine(g,a,s,r,o,p))),a=r,s=o);return{min:l,max:u}},F.getMinMaxValue=function(t,e,n){var i=e+(n?"MinMaxDO":"MinMax"),r=t.getCache().getFromCache(i);if(r)return r;var o=t.getOptions()[e+"Axis"];if(null!=o.dataMax&&null!=o.dataMin&&n)return r={min:o.dataMin,max:o.dataMax},t.getCache().putToCache(i,r),r;var a="z"!=e&&B.isLog(t,e),s="y2"==e;s&&(e="y");for(var l="y"==e,u=!n&&l&&W.isBLAC(t),h="withoutRescale"==H.getHideAndShowBehavior(t)||"x"==e&&B.hasTimeAxis(t),c=-(1/0),d=1/0,p=F.getSeriesCount(t),g=0;g<p;g++){var f=F.getSeriesItem(t,g),_=V.getSeriesType(t,g),m=l&&(V.isRangeSeries(t,g)||"candlestick"==_||"boxPlot"==_);if(h||V.isSeriesRendered(t,g)){var v=F.isAssignedToY2(t,g);if(!l||s==v){var y=f.items;if(y){for(var S=0;S<y.length;S++)if(h||V.isDataItemRendered(t,g,S)){"object"!=typeof y[S]&&(y[S]={y:y[S]});var C=y[S],b=null;if(l?m||(b=F.getCumulativeValue(t,g,S,h)):"x"==e&&B.hasTimeAxis(t)&&!B.isMixedFrequency(t)?(b=F.getGroupLabel(t,S),
null!=C&&(C.x=b)):null!=C&&(b=C[e]),!("z"==e&&b<=0)&&(!u||F.isXInViewport(t,g,S))){if(!(m||null==b||"number"!=typeof b||a&&b<=0)){var E=0;W.isBubble(t)&&!n&&"z"!=e&&(E=z.getBubbleAxisRadius(t,e,C.markerSize)),c=Math.max(c,a?b*Math.pow(10,E):b+E),d=Math.min(d,a?b/Math.pow(10,E):b-E)}if(m){var T=F.getHighValue(t,g,S),A=F.getLowValue(t,g,S);a&&(T<=0||A<=0)||(c=Math.max(c,T,A),d=Math.min(d,T,A))}}}if(u){var x=F._getViewportEdgeYValues(t,g);null!=x.min&&(d=Math.min(d,x.min),c=Math.max(c,x.min)),null!=x.max&&(d=Math.min(d,x.max),c=Math.max(c,x.max))}}}}}var I=null;if("x"==e?I=j.getAxisRefObjs(t,"x"):s?I=j.getAxisRefObjs(t,"y2"):l&&(I=j.getAxisRefObjs(t,"y")),null!=I)for(var O=0;O<I.length;O++){var M=I[O],D=M.items,P="withRescale"==H.getHideAndShowBehavior(t)&&"hidden"==M.visibility;if(!P)if(D&&!P){for(var w=0;w<D.length;w++)if(null!=D[w]&&(!u||F.isRefObjInViewport(t,D,w))){var A=j.getLowValue(D[w]),T=j.getHighValue(D[w]),R=isNaN(D[w])?D[w].value:D[w];null!=A&&isFinite(A)&&(d=Math.min(d,A),c=Math.max(c,A)),null!=T&&isFinite(T)&&(d=Math.min(d,T),c=Math.max(c,T)),null!=R&&isFinite(R)&&(d=Math.min(d,R),c=Math.max(c,R))}}else{var A=j.getLowValue(M),T=j.getHighValue(M),R=M.value;null!=A&&isFinite(A)&&(d=Math.min(d,A),c=Math.max(c,A)),null!=T&&isFinite(T)&&(d=Math.min(d,T),c=Math.max(c,T)),null!=R&&isFinite(R)&&(d=Math.min(d,R),c=Math.max(c,R))}}return r={min:d,max:c},t.getCache().putToCache(i,r),r},F.isAssignedToY2=function(t,e){if(!t.getOptionsCache().getFromCache("hasY2Assignment"))return!1;var n=F.getSeriesItem(t,e);return!(!n||"on"!=n.assignedToY2||!W.isDualY(t))},F.getInitialSelection=function(e){var n=e.getOptions().selection;n||(n=[]);for(var i=e.getChartObjPeers(),r=0;r<n.length;r++){var o;if("string"==typeof n[r]||t.ArrayUtils.isArray(n[r])?(o=n[r],n[r]={id:o}):o=n[r].id,!(null==o||n[r].series&&n[r].group))for(var a=0;a<i.length;a++){var s=i[a];if(F.isEqualId(o,s.getDataItemId())){n[r].series=s.getSeries(),n[r].group=s.getGroup();break}}}return n},F.getCurrentSelection=function(t){var e=[],n=t.getSelectionHandler();if(n)for(var i=n.getSelectedIds(),r=0;r<i.length;r++){var o=i[r];e.push({series:o.getSeries(),group:o.getGroup(),id:o.getId()})}return e},F.hasVolumeSeries=function(t){var e=t.getOptionsCache().getFromCache("_hasVolume");return!!e&&e},F.isDataSelected=function(t,e,n,i){var r=!isNaN(i)&&null!=i&&i>=0,o=r?F.getNestedDataItemId(t,e,n,i):F.getDataItemId(t,e,n),a=F.getSeries(t,e),s=F.getGroup(t,n),l=t.getOptions().selection;l||(l=[]);for(var u=0;u<l.length;u++){if(F.isEqualId(o,l[u])||F.isEqualId(o,l[u].id))return!0;if(null==l[u].id&&F.isEqualId(a,l[u].series)&&F.isEqualId(s,l[u].group))return!0}return!1},F.getDataLabel=function(t,e,n,i,r,o){var a,s=F.getDefaultDataLabel(t,e,n,i,r,o),l=t.getOptions().dataLabel;if(l&&!o){var u=F.getDataContext(t,e,n,i);if(u.label=s,a=l(u),"number"==typeof a){var h=K.getValueFormat(t,"label");a=K.formatValue(t.getCtx(),h,a)}}return a?a:s},F.getDefaultDataLabel=function(t,e,n,i,r,o){var a;if(o)a=F.getCumulativeValue(t,e,n);else{var s=!isNaN(i)&&null!=i&&i>=0,l=s?F.getNestedDataItem(t,e,n,i):F.getDataItem(t,e,n);if(!l)return null;a=l.label,"low"==r?a=a instanceof Array?a[0]:a:"high"==r&&(a=a instanceof Array?a[1]:null)}if(null!=a){if("number"==typeof a){var u,h,c,d=F.isAssignedToY2(t,e),p=d&&t.y2Axis?t.y2Axis:t.yAxis;if(p){var g=p.getInfo();u=g.getGlobalMin(),h=g.getGlobalMax(),c=g.getMajorIncrement()}var f=K.getValueFormat(t,"label");return K.formatValue(t.getCtx(),f,a,u,h,c)}return a}return null},F.getStackCategory=function(t,e){var n="stackCategory",i=t.getCache().getFromCachedMap(n,e);return"undefined"!=typeof i?i:(i=W.isStacked(t)?F.getSeriesItem(t,e).stackCategory||null:F.getSeries(t,e)||null,t.getCache().putToCachedMap(n,e,i),i)},F.getStackCategories=function(t,e,n){var i=[],r=[],o={},a={},s="stackCategories",l=t.getCache().getFromCachedMap2D(s,e,n);if(l)return l;for(var u=F.getSeriesCount(t),h=0;h<u;h++)if(V.isSeriesRendered(t,h)||n){if(e){var c=V.getSeriesType(t,h);if("candlestick"!=c&&"boxPlot"!=c||(c="bar"),e!=c)continue}var d=F.getStackCategory(t,h);F.isAssignedToY2(t,h)?a[d]||(r.push(d),a[d]=!0):o[d]||(i.push(d),o[d]=!0)}return l={y:i,y2:r},t.getCache().putToCachedMap2D(s,e,n,l),l},F.getBarCategoryZ=function(t,e,n,i){for(var r=0,o=0;o<F.getSeriesCount(t);o++){var a=V.getSeriesType(t,o);if(("bar"==a||"candlestick"==a||"boxPlot"==a)&&F.getStackCategory(t,o)==e&&V.isSeriesRendered(t,o)){var s=F.isAssignedToY2(t,o);(i&&s||!i&&!s)&&(r=Math.max(r,F.getZValue(t,o,n,1)))}}return r},F.getBarInfo=function(e,n,i,r){var o,a,s=W.isHorizontal(e),l=W.isStacked(e),u=t.Agent.isRightToLeft(e.getCtx()),h=e.xAxis,c=V.isRangeSeries(e,n),d=V.getBarCategoryOffsetMap(e,i,l),p=F.getXValue(e,n,i),g=h.getUnboundedCoordAt(p),f=F.isAssignedToY2(e,n),_=f?e.y2Axis:e.yAxis,m=_.getBaselineCoord();if(c){var v=F.getLowValue(e,n,i),y=F.getHighValue(e,n,i);if(null==v||isNaN(v)||null==y||isNaN(y))return null;if(o=_.getBoundedCoordAt(v),a=_.getBoundedCoordAt(y),o==a&&null==_.getCoordAt(v))return null}else{var S=F.getValue(e,n,i),C=F.getCumulativeValue(e,n,i);if(null==S||isNaN(S))return null;if(o=_.getBoundedCoordAt(C),a=l?_.getBoundedCoordAt(C-S):m,o==a&&null==_.getCoordAt(C))return null}var b=F.getStackCategory(e,n),E=V.getBarWidth(e,n,i),T=l?V.getBarStackWidth(e,b,i,f):E;if("pixel"==V.getBarSpacing(e)&&t.Agent.isPlatformGecko()){var A=E/(1-V.getBarGapRatio(e));E>1&&A-E<2&&(E--,T=E)}var x=d[f?"y2":"y"][b]+.5*(T-E),I=u&&!s?g-x-E:g+x,O=I+E,M=(I+O)/2,D=c?(o+a)/2:o,P=et.convertAxisCoord(e,new t.Point(M,D),r);return{x1:I,x2:O,axisCoord:m,baseCoord:a,yCoord:o,dataPos:P,barWidth:E}},F.getMarkerPosition=function(e,n,i,r,o){var a,s,l=e.xAxis,u=F.isAssignedToY2(e,n)?e.y2Axis:e.yAxis,h=W.isPolar(e),c=V.isRangeSeries(e,n),d=!isNaN(r)&&null!=r&&r>=0,p=F.getXValue(e,n,i),g=d?F.getValue(e,n,i,r):F.getCumulativeValue(e,n,i);if(W.isBubble(e)){if(h&&g<u.getInfo().getViewportMin())return null;a=h?l.getCoordAt(p):l.getUnboundedCoordAt(p),s=u.getUnboundedCoordAt(g)}else if(c){var f=u.getCoordAt(F.getLowValue(e,n,i)),_=u.getCoordAt(F.getHighValue(e,n,i));a=l.getCoordAt(F.getXValue(e,n,i)),s=(f+_)/2}else a=l.getCoordAt(p),s=u.getCoordAt(g);if(null==a||null==s)return null;var m=et.convertAxisCoord(e,new t.Point(a,s),o);return m},F.getScatterBubbleMarkerPosition=function(e,n,i){var r=e.xAxis,o=e.yAxis,a=F.getXValue(e,n,i),s=F.getValue(e,n,i),l=r.getCoordAt(a),u=o.getCoordAt(s);return null==l||null==u?null:new t.Point(l,u)},F.isSeriesNegative=function(t,e){var n=t.getOptionsCache().getFromCachedMap("isSeriesNegative",e);if(null!=n)return n;for(var i=F.getGroupCount(t),r=0;r<i;r++){var o=F.getValue(t,e,r);if(o>0){n=!1;break}}return n=!0,t.getOptionsCache().putToCachedMap("isSeriesNegative",e,n),n},F.getDataContext=function(e,n,i,r){var o,a=F.getSeriesItem(e,n),s=F.getDataItem(e,n,i),l=F.getNestedDataItem(e,n,i,r),u=e.getRawOptions(),h=W.isPie(e)&&(null==n||n<0),c=e.getOptions();if(h){var d=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null);o={id:d,series:d,value:X.getOtherValue(e),color:c.styleDefaults.otherColor}}else if(l){var p=u.series[n].items[i];o={id:F.getNestedDataItemId(e,n,i,r),data:[p,p.items[r]],value:F.getValue(e,n,i,r),y:F.getValue(e,n,i,r),color:V.getMarkerColor(e,n,i,r)}}else s?o={id:F.getDataItemId(e,n,i),data:u.series[n].items[i],value:F.getValue(e,n,i),targetValue:F.getTargetValue(e,n,i),x:F.getXValue(e,n,i),y:F.getValue(e,n,i),z:F.getZValue(e,n,i),low:F.getLowValue(e,n,i),high:F.getHighValue(e,n,i),open:s.open,close:s.close,volume:s.volume,color:V.getColor(e,n,i)}:a&&(o={id:F.getSeries(e,n),color:V.getColor(e,n)});return o&&(o.component=c._widgetConstructor,(h||l||s)&&(o.group=F.getGroup(e,i),o.groupData=F._getGroupsDataArray(e)[i]),!h&&(l||s||a)&&(o.series=F.getSeries(e,n),o.seriesData=u.series[n]),W.isPie(e)&&e.pieChart&&(o.totalValue=e.pieChart.getTotalValue())),o||{}},F._getGroupsDataArray=function(t){var e="groupsDataArray",n=t.getOptionsCache().getFromCache(e);if(!n){var i=t.getRawOptions();n=F._getNestedGroupsData(i.groups),t.getOptionsCache().putToCache(e,n)}return n},F._getNestedGroupsData=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i.groups){for(var r=F._getNestedGroupsData(i.groups),o=0;o<r.length;o++)r[o].unshift(i);e=e.concat(r)}else e.push([i])}return e},F.isOutermostBar=function(t,e,n){for(var i=F.getStackCategory(t,e),r=F.getValue(t,e,n)<0,o=F.getSeriesCount(t),a=e+1;a<o;a++)if(i==F.getStackCategory(t,a)&&r==F.getValue(t,a,n)<0&&"bar"==V.getSeriesType(t,a)&&F.isBLACItemInViewport(t,a,n))return!1;return!0};var H=new Object;t.Obj.createSubclass(H,t.Obj),H.getHideAndShowBehavior=function(t){return t.getOptions().hideAndShowBehavior},H.getHoverBehavior=function(t){return t.getOptions().hoverBehavior},H.setVisibility=function(e,n,i){var r=j.getRefObj(e,n);null!=r&&(r.visibility=i);var o=V.getHiddenCategories(e),a=t.ArrayUtils.getIndex(o,n);"hidden"==i&&a<0?o.push(n):"visible"==i&&a>=0&&o.splice(a,1);var s=e.getOptions();if(s&&s.legend&&s.legend.sections){for(var l=0;l<s.legend.sections.length;l++){var u=s.legend.sections[l];if(u&&u.items)for(var h=0;h<u.items.length;h++)u.items[h].id==n&&(u.items[h].categoryVisibility=i)}return!0}return!1},H.isScrollable=function(t){return!!W.isScrollSupported(t)&&"off"!=t.getOptions().zoomAndScroll},H.isZoomable=function(t){if(!W.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"live"==e||"delayed"==e},H.getZoomDirection=function(t){return W.isScatterBubble(t)?t.getOptions().zoomDirection:"auto"},H.isLiveScroll=function(t){if(!W.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"live"==e||"liveScrollOnly"==e},H.isDelayedScroll=function(t){if(!W.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"delayed"==e||"delayedScrollOnly"==e},H.processIds=function(t,e){for(var n=[],i=0;i<e.length;i++){var r=e[i];if(r.getSeries()==X.OTHER_SLICE_SERIES_ID){var o=X.getOtherSliceIds(t);n=n.concat(o)}else n.push(r)}return n},H.adjustBounds=function(t){null!=t.x&&(t.x-=1),null!=t.w&&(t.w+=2),null!=t.y&&(t.y-=1),null!=t.h&&(t.h+=2)},H.getSelectedObjects=function(t,e,n){if(!t.getCache().getFromCache("dataFiltered"))return n.getSelectedIds();var i=[],r="dataPositions",o=t.getCache().getFromCache(r);if(!o){o=[];for(var s=0;s<F.getSeriesCount(t);s++)for(var l=0;l<F.getGroupCount(t);l++){var u;u="bar"==V.getSeriesType(t,s)?F.getBarInfo(t,s,l).dataPos:F.getMarkerPosition(t,s,l),u&&(u=t.getPlotArea().localToStage(u),o.push({seriesIndex:s,groupIndex:l,pos:u}))}t.getCache().putToCache(r,o)}for(var h=0;h<o.length;h++){var u=o[h].pos;if(u){var c=null==e.x||u.x>=e.x&&u.x<=e.x+e.w,d=null==e.y||u.y>=e.y&&u.y<=e.y+e.h;c&&d&&i.push(new a(null,F.getSeries(t,o[h].seriesIndex),F.getGroup(t,o[h].groupIndex)))}}return i},H.getBoundedObjects=function(t,e){for(var n=t.getChartObjPeers(),i=[],r=0;r<n.length;r++){var o=n[r],a=o.getDataPosition();if(a){a=t.getPlotArea().localToStage(a);var s=null==e.x||a.x>=e.x&&a.x<=e.x+e.w,l=null==e.y||a.y>=e.y&&a.y<=e.y+e.h;s&&l&&i.push(o)}}return i},H.getAxisBounds=function(e,n,i){var r=e.getPlotArea(),o=r.stageToLocal(new t.Point(n.x,n.y)),a=r.stageToLocal(new t.Point(n.x+n.w,n.y+n.h));null==n.x&&(o.x=null,a.x=null),null==n.y&&(o.y=null,a.y=null);var s=H._convertToAxisCoord(e,o.x,a.x,o.y,a.y),l={},u={},h={},c={};return e.xAxis&&(l=H._getAxisMinMax(e.xAxis,s.xMin,s.xMax,i),c=H.getAxisStartEndGroup(e.xAxis,l.min,l.max)),e.yAxis&&(u=H._getAxisMinMax(e.yAxis,s.yMin,s.yMax,i)),e.y2Axis&&(h=H._getAxisMinMax(e.y2Axis,s.yMin,s.yMax,i)),{xMin:l.min,xMax:l.max,yMin:u.min,yMax:u.max,y2Min:h.min,y2Max:h.max,startGroup:c.startGroup,endGroup:c.endGroup}},H._getAxisMinMax=function(t,e,n,i){if(null==e||null==n)return{min:null,max:null};var r=t.getUnboundedLinearValueAt(e),o=t.getUnboundedLinearValueAt(n);if(i){var a=t.getInfo().getMinimumExtent();if(o-r<a){var s=(o+r)/2;o=s+a/2,r=s-a/2}return H._limitToGlobal(t,r,o)}return H._getActualMinMax(t,r,o)},H.getAxisBoundsByDelta=function(t,e,n,i,r){var o=H._convertToAxisCoord(t,e,n,i,r),a=H.getZoomDirection(t),s={},l={},u={},h={};return t.xAxis&&"y"!=a&&(s=H._getAxisMinMaxByDelta(t.xAxis,o.xMin,o.xMax),h=H.getAxisStartEndGroup(t.xAxis,s.min,s.max)),t.yAxis&&"x"!=a&&(l=H._getAxisMinMaxByDelta(t.yAxis,o.yMin,o.yMax)),t.y2Axis&&(u=H._getAxisMinMaxByDelta(t.y2Axis,o.yMin,o.yMax)),{xMin:s.min,xMax:s.max,yMin:l.min,yMax:l.max,y2Min:u.min,y2Max:u.max,startGroup:h.startGroup,endGroup:h.endGroup}},H._getAxisMinMaxByDelta=function(t,e,n){var i=t.getLinearViewportMin(),r=t.getLinearViewportMax();if(n==e&&t.isFullViewport())return H._getActualMinMax(t,i,r);var o=t.getUnboundedLinearValueAt(e)-t.getUnboundedLinearValueAt(0),a=t.getUnboundedLinearValueAt(n)-t.getUnboundedLinearValueAt(0),s=1,l=r+a-(i+o),u=t.getInfo().getMinimumExtent();return e!=n&&l<u&&(s=(r-i-u)/(o-a)),i+=o*s,r+=a*s,H._limitToGlobal(t,i,r)},H._convertToAxisCoord=function(e,n,i,r,o){var a={},s=t.Agent.isRightToLeft(e.getCtx());return W.isHorizontal(e)?(a.xMin=r,a.xMax=o,a.yMin=s?i:n,a.yMax=s?n:i):(a.xMin=s?i:n,a.xMax=s?n:i,a.yMin=o,a.yMax=r),a},H._limitToGlobal=function(t,e,n){var i=t.getLinearGlobalMin(),r=t.getLinearGlobalMax();return n-e>=r-i?(e=i,n=r):e<i?(n+=i-e,e=i):n>r&&(e-=n-r,n=r),H._getActualMinMax(t,e,n)},H._getActualMinMax=function(t,e,n){return{min:t.linearToActual(e),max:t.linearToActual(n)}},H.getAxisStartEndGroup=function(t,e,n){if(t.isGroupAxis()&&null!=e&&null!=n){var i=Math.ceil(e),r=Math.floor(n);if(r>=i){var o=t.getInfo().getGroup(i),a=t.getInfo().getGroup(r);return{startGroup:o,endGroup:a}}}return{startGroup:null,endGroup:null}},H.setInitialSelection=function(t,e){var n=t.getSelectionHandler();if(n){for(var i=t.getChartObjPeers(),r=[],o=0;o<e.length;o++)for(var a=0;a<i.length;a++){var s=i[a];if(s.isSelectable()){var l=F.isEqualId(s.getDataItemId(),e[o].id),u=F.isEqualId(s.getSeries(),e[o].series),h=F.isEqualId(s.getGroup(),e[o].group);(l||null==e[o].id&&u&&h)&&r.push(s.getId())}}n.processInitialSelections(r,i)}},H.getKeyboardNavigables=function(t){var e=[];if(W.isPie(t))for(var n=t.pieChart.__getSlices(),i=0;i<n.length;i++)V.isSeriesRendered(t,n[i].getSeriesIndex())&&e.push(n[i]);else for(var r=t.getChartObjPeers(),i=0;i<r.length;i++)r[i].isNavigable()&&e.push(r[i]);return e},H.isSeriesDrillable=function(t,e){var n=F.getSeriesItem(t,e),i=null!=n?n.drilling:"inherit";return"on"==i||"off"!=i&&(i=t.getOptions().drilling,"on"==i||"seriesOnly"==i)},H.isDataItemDrillable=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);r||(r=F.getDataItem(t,e,n));var o=null!=r?r.drilling:"inherit";return"on"==o||"off"!=o&&(o=t.getOptions().drilling,"on"==o)},H.addEventData=function(t,e){var n=F.getSeriesIndex(t,e.series),i=F.getGroupIndex(t,e.group),r=F.getNestedDataItemIndex(t,n,i,e.id),o=F.getDataContext(t,n,i,r);o&&(e.data=o.data,e.seriesData=o.seriesData,e.groupData=o.groupData)};var j=new Object;t.Obj.createSubclass(j,t.Obj),j.getRefObjs=function(t){var e=j.getAxisRefObjs(t,"x"),n=j.getAxisRefObjs(t,"y"),i=j.getAxisRefObjs(t,"y2");return e.concat(n,i)},j.getAxisRefObjs=function(t,e){var n=t.getOptions();return n&&n[e+"Axis"]&&n[e+"Axis"].referenceObjects?n[e+"Axis"].referenceObjects:[]},j.getType=function(t){return"area"==t.type?"area":"line"},j.getLocation=function(t){return"front"==t.location?"front":"back"},j.getColor=function(t){return t.color?t.color:"#333333"},j.getLineWidth=function(t){return t.lineWidth?t.lineWidth:1},j.getLineType=function(t){return t.lineType?t.lineType:"straight"},j.isObjectRendered=function(e,n){var i=V.getHiddenCategories(e);if(i.length>0){var r=j.getRefObjCategories(n);if(r&&t.ArrayUtils.hasAnyItem(i,r))return!1}return!("hidden"==n.visibility)},j.getId=function(t){return null!=t.id?t.id:t.text},j.getRefObjCategories=function(t){return t.categories?t.categories:[j.getId(t)]},j.getRefObj=function(t,e){for(var n=j.getRefObjs(t),i=0;i<n.length;i++)if(j.getId(n[i])==e)return n[i]},j.getLowValue=function(t){return null==t?null:null!=t.min?t.min:t.low},j.getHighValue=function(t){return null==t?null:null!=t.max?t.max:t.high},j.getXValue=function(t,e,n){return e[n]&&null!=e[n].x?e[n].x:B.hasTimeAxis(t)&&!B.isMixedFrequency(t)?F.getGroupLabel(t,n):n};var G=new Object;t.Obj.createSubclass(G,t.Obj),G.getBarFill=function(t,e,n,i){var r=V.getColor(t,e,n),o=V.getPattern(t,e,n);return G.getRectangleFill(t,r,o,i)},G.getRectangleFill=function(e,n,i,r){var o=V.getSeriesEffect(e);if(i)return new t.PatternFill(i,n);if("gradient"==o&&r>3){var a,s,l=W.isHorizontal(e)?270:0;return G._useAltaGradients(e)?(a=[t.ColorUtils.adjustHSL(n,0,-.09,.04),t.ColorUtils.adjustHSL(n,0,-.04,-.05)],s=[0,1]):(a=[t.ColorUtils.getBrighter(n,.15),t.ColorUtils.getBrighter(n,.45),t.ColorUtils.getBrighter(n,.25),n,t.ColorUtils.getBrighter(n,.15),t.ColorUtils.getDarker(n,.1)],s=[0,.15,.3,.65,.85,1]),new t.LinearGradientFill(l,a,null,s)}return new t.SolidFill(n)},G.getAreaFill=function(e,n){var i,r="lineWithArea"==V.getSeriesType(e,n),o=F.getSeriesItem(e,n);o&&o.areaColor?i=o.areaColor:(i=V.getColor(e,n),r&&(i=t.ColorUtils.setAlpha(i,.2)));var a=V.getPattern(e,n),s=V.getSeriesEffect(e);if(a)return new t.PatternFill(a,i);if("gradient"==s){var l,u,h=W.isHorizontal(e)?180:270;if(r){var c=t.ColorUtils.getAlpha(i);l=[t.ColorUtils.setAlpha(i,Math.min(c+.2,1)),t.ColorUtils.setAlpha(i,Math.max(c-.15,0))],u=[0,1]}else G._useAltaGradients(e)?(l=[t.ColorUtils.adjustHSL(i,0,-.09,.04),t.ColorUtils.adjustHSL(i,0,-.04,-.05)],u=[0,1]):W.isSpark(e)?(l=[t.ColorUtils.getDarker(i,.5),i,t.ColorUtils.getBrighter(i,.5)],u=[0,.5,1]):(l=[t.ColorUtils.getBrighter(i,.5),i,t.ColorUtils.getDarker(i,.3)],u=[0,.5,1]);return new t.LinearGradientFill(h,l,null,u)}return new t.SolidFill(i)},G.getMarkerFill=function(e,n,i,r){var o=V.getMarkerColor(e,n,i,r),a=V.getPattern(e,n,i,r);if(a)return new t.PatternFill(a,o);if(W.isBubble(e)){var s=V.getSeriesEffect(e);if("gradient"==s){if(G._useAltaGradients(e)){var l=[t.ColorUtils.adjustHSL(o,0,-.09,.04),t.ColorUtils.adjustHSL(o,0,-.04,-.05)],u=[0,1];return new t.LinearGradientFill(270,l,null,u)}var h=V.getMarkerShape(e,n,i,r);if("human"==h){var c=[t.ColorUtils.getBrighter(o,.2),t.ColorUtils.getBrighter(o,.1),o,t.ColorUtils.getDarker(o,.2)],d=[0,.3,.7,1];return new t.LinearGradientFill(315,c,null,d)}var p=[t.ColorUtils.getBrighter(o,.15),o,t.ColorUtils.getDarker(o,.1),t.ColorUtils.getDarker(o,.2)],g=[0,.5,.75,1];return new t.RadialGradientFill(p,null,g)}}return new t.SolidFill(o)},G.getFunnelPyramidSliceFill=function(e,n,i,r,o){var a=V.getPattern(e,n,0),s=V.getSeriesEffect(e);if(a&&!o){var l=new t.PatternFill(a,i);return("vertical"==e.getOptions().orientation||W.isPyramid(e))&&(t.Agent.isRightToLeft(e.getCtx())?l.setMatrix(new t.Matrix(0,(-1),1,0)):l.setMatrix(new t.Matrix(0,1,(-1),0))),l}if("gradient"==s){var u,h,c=W.isPyramid(e)?180:90;return"on"==e.getOptions().styleDefaults.threeDEffect?(u=[t.ColorUtils.adjustHSL(i,0,0,-.1),t.ColorUtils.adjustHSL(i,0,0,.12),i],h=[0,.65,1]):(u=[t.ColorUtils.adjustHSL(i,0,-.09,.04),t.ColorUtils.adjustHSL(i,0,-.04,-.05)],h=[0,1]),new t.LinearGradientFill(c,u,null,h,[r.x,r.y,r.w,r.h])}return new t.SolidFill(i)},G._useAltaGradients=function(t){return!s.isSkyrosSkin(t)};var V=new Object;t.Obj.createSubclass(V,t.Obj),V._SERIES_TYPE_RAMP=["bar","line","area"],V.getSeriesType=function(t,e){var n="seriesType",i=t.getOptionsCache().getFromCachedMap(n,e);if(i)return i;if(!W.isBLAC(t))return t.getOptionsCache().putToCachedMap(n,e,"auto"),"auto";var r=F.getSeriesItem(t,e);if(i=r?r.type:null,W.isStock(t)||"candlestick"!=i||(i="auto"),!i||"auto"==i)if(W.isBar(t))i="bar";else if(W.isLine(t))i="line";else if(W.isArea(t))i="area";else if(W.isLineWithArea(t))i="lineWithArea";else if(W.isStock(t))i="candlestick";else if(W.isBoxPlot(t))i="boxPlot";else if(W.isCombo(t)){var o=F.getSeriesStyleIndex(t,e),a=o%V._SERIES_TYPE_RAMP.length;i=V._SERIES_TYPE_RAMP[a]}return t.getOptionsCache().putToCachedMap(n,e,i),i},V.isRangeSeries=function(t,e){var n="isRange",i=t.getOptionsCache().getFromCachedMap(n,e);if(null!=i)return i;i=!1;var r=V.getSeriesType(t,e);if("bar"==r||"area"==r)for(var o=0;o<F.getGroupCount(t);o++)if(null!=F.getLowValue(t,e,o)||null!=F.getHighValue(t,e,o)){i=!0;break}return t.getOptionsCache().putToCachedMap(n,e,i),i},V.getSeriesEffect=function(t){var e=t.getOptions();return e.styleDefaults.seriesEffect},V.getColor=function(t,e,n){var i=F.getDataItem(t,e,n);if(i&&i.color)return i.color;var r=F.getSeriesItem(t,e);if(r&&r.color)return r.color;var o=V.getSeriesType(t,e);if("candlestick"==o)return V.getStockItemColor(t,e,n);var a=t.getOptions(),s=a.styleDefaults.colors,l=F.getSeriesStyleIndex(t,e),u=l%s.length;return s[u]},V.getStockItemColor=function(t,e,n){var i=t.getOptions();return F.isStockValueRising(t,e,n)?i.styleDefaults.stockRisingColor:i.styleDefaults.stockFallingColor},V.getStockVolumeColor=function(t,e,n){var i=F.getDataItem(t,e,n);if(i&&i.color)return i.color;var r=t.getOptions();return r.styleDefaults.stockVolumeColor?r.styleDefaults.stockVolumeColor:V.getStockItemColor(t,e,n)},V.getSplitterPosition=function(t){var e=t.getOptions(),n=e.splitterPosition;return null!=n?n:W.isStock(t)?.8:.5},V.getPattern=function(e,n,i,r){var o=F.getNestedDataItem(e,n,i,r);if(o&&o.pattern&&"auto"!=o.pattern)return o.pattern;var a=F.getDataItem(e,n,i);if(a&&a.pattern&&"auto"!=a.pattern)return a.pattern;var s=V.getSeriesType(e,n);if(("line"==s||"area"==s)&&null!=i)return null;var l=F.getSeriesItem(e,n);if(l&&l.pattern&&"auto"!=l.pattern)return l.pattern;if("pattern"==V.getSeriesEffect(e)){if(W.isStock&&"candlestick"==V.getSeriesType(e,n)){var u=F.isStockValueRising(e,n,i),h=t.Agent.isRightToLeft(e.getCtx());return u?h?"smallDiagonalLeft":"smallDiagonalRight":h?"smallDiagonalRight":"smallDiagonalLeft"}var c=e.getOptions(),d=c.styleDefaults.patterns,p=F.getSeriesStyleIndex(e,n),g=p%d.length;return d[g]}return null},V.getMarkerBorderColor=function(e,n,i,r){var o=V.getBorderColor(e,n,i,r);if(o)return o;if(V.getDataItemGaps(e)>0&&"lineWithArea"!=V.getSeriesType(e,n))return V.getBackgroundColor(e,!0);if(W.isBubble(e)&&!s.isSkyrosSkin(e)&&"gradient"!=V.getSeriesEffect(e)){var a=V.getMarkerColor(e,n,i);if(a)return t.ColorUtils.adjustHSL(a,0,.15,-.25)}return null},V.getBorderColor=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);if(r&&r.borderColor)return r.borderColor;var o=F.getDataItem(t,e,n);if(o&&o.borderColor)return o.borderColor;var a=F.getSeriesItem(t,e);if(a&&a.borderColor)return a.borderColor;var s=t.getOptions(),l=s.styleDefaults;return"auto"!=l.borderColor?l.borderColor:null},V.getBorderWidth=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);if(r&&null!=r.borderWidth)return r.borderWidth;var o=F.getDataItem(t,e,n);if(o&&null!=o.borderWidth)return o.borderWidth;var a=F.getSeriesItem(t,e);if(a&&null!=a.borderWidth)return a.borderWidth;var s=t.getOptions().styleDefaults;return"auto"!=s.borderWidth?s.borderWidth:W.isScatterBubble(t)||W.isLineArea(t)?1.25:1},V.getMarkerColor=function(t,e,n,i){if(!V.isMarkerDisplayed(t,e,n,i))return V.getColor(t,e,n);var r=F.getNestedDataItem(t,e,n,i);if(r&&r.color)return r.color;var o=F.getDataItem(t,e,n);if(o&&o.color)return o.color;var a=F.getSeriesItem(t,e);if(a&&a.markerColor)return a.markerColor;var s=t.getOptions(),l=s.styleDefaults.markerColor;return l?l:V.getColor(t,e,n)},V.getMarkerShape=function(t,e,n,i){var r=t.getOptions(),o=r.styleDefaults.markerShape,a=F.getSeriesItem(t,e);a&&a.markerShape&&(o=a.markerShape);var s=F.getDataItem(t,e,n);s&&s.markerShape&&(o=s.markerShape);var l=F.getNestedDataItem(t,e,n,i);if(l&&l.markerShape&&(o=l.markerShape),"auto"==o)if(W.isBubble(t)||"boxPlot"==V.getSeriesType(t,e)||V.isRangeSeries(t,e))o="circle";else{var u=F.getSeriesStyleIndex(t,e),h=r.styleDefaults.shapes,c=u%h.length;o=h[c]}return o},V.getMarkerSize=function(t,e,n,i){var r,o=F.getNestedDataItem(t,e,n,i);if(o&&null!=o.markerSize)r=Number(o.markerSize);else{var a=F.getDataItem(t,e,n);if(a&&null!=a.markerSize)r=Number(a.markerSize);else{var s=F.getSeriesItem(t,e);r=s&&null!=s.markerSize?Number(s.markerSize):Number(t.getOptions().styleDefaults.markerSize)}}return W.isOverview(t)&&(r=Math.ceil(.6*r)),r},V.isMarkerDisplayed=function(t,e,n,i){var r,o=F.getNestedDataItem(t,e,n,i);if(o&&null!=o.markerDisplayed)r=o.markerDisplayed;else{var a=F.getDataItem(t,e,n);if(a&&null!=a.markerDisplayed)r=a.markerDisplayed;else{var s=F.getSeriesItem(t,e);r=s&&null!=s.markerDisplayed?s.markerDisplayed:t.getOptions().styleDefaults.markerDisplayed}}return"on"==r||"off"!=r&&(W.isScatterBubble(t)||"boxPlot"==V.getSeriesType(t,e)||"none"==V.getLineType(t,e))},V.getImageSource=function(t,e,n,i,r){var o=F.getNestedDataItem(t,e,n,i);if(o&&o[r])return o[r];var a=F.getDataItem(t,e,n);if(a&&a[r])return a[r];var s=F.getSeriesItem(t,e);return s&&s[r]?s[r]:void 0},V.getLineWidth=function(t,e){var n,i=F.getSeriesItem(t,e),r=t.getOptions();return n=i&&i.lineWidth?i.lineWidth:r.styleDefaults.lineWidth?r.styleDefaults.lineWidth:"lineWithArea"==V.getSeriesType(t,e)?2:3,W.isOverview(t)&&(n=Math.ceil(.6*n)),n},V.getLineStyle=function(t,e){var n=F.getSeriesItem(t,e);if(n&&n.lineStyle)return n.lineStyle;var i=t.getOptions();return i.styleDefaults.lineStyle},V.getLineType=function(t,e){var n,i=F.getSeriesItem(t,e);return n=i&&i.lineType?i.lineType:t.getOptions().styleDefaults.lineType,"auto"==n&&(n=W.isScatterBubble(t)?"none":"straight"),(W.isPolar(t)||W.isScatterBubble(t))&&("centeredSegmented"==n&&(n="segmented"),"centeredStepped"==n&&(n="stepped")),n},V.getBarSpacing=function(t){var e=t.getOptions();return e.__sparkBarSpacing},V.getBarGapRatio=function(t){var e="barGapRatio",n=t.getCache().getFromCache(e);if(n)return n;if(n=t.getOptions().styleDefaults.barGapRatio,"string"==typeof n&&"%"==n.slice(-1)&&(n=Number(n.slice(0,-1))/100),null!=n&&!isNaN(n))return n;var i=F.getStackCategories(t,"bar"),r=i.y.length,o=i.y2.length,a=W.isSplitDualY(t)?Math.max(r,o):r+o;return n=W.isPolar(t)?1==a?0:.25:1==a?.37+.26/F.getViewportGroupCount(t):.25,t.getCache().putToCache(e,n),n},V.getMaxBarWidth=function(t){var e=t.getOptions().styleDefaults.maxBarWidth;return null==e||W.isPolar(t)?1/0:e},V.getBarWidth=function(t,e,n){var i=F.getZValue(t,e,n,1)/t.getOptions()._averageGroupZ;return Math.min(i*V.getGroupWidth(t),V.getMaxBarWidth(t))},V.getBarStackWidth=function(t,e,n,i){var r=i?"y2BarStackWidth":"yBarStackWidth",o=t.getCache().getFromCachedMap2D(r,e,n);if(o)return o;var a=F.getBarCategoryZ(t,e,n,i)/t.getOptions()._averageGroupZ;return o=Math.min(a*V.getGroupWidth(t),V.getMaxBarWidth(t)),t.getCache().putToCachedMap2D(r,e,n,o),o},V.getBarCategoryOffsetMap=function(t,e,n){var i="barCategoryOffsetMap",r=t.getCache().getFromCachedMap2D(i,e,n);if(r)return r;var o,a,s=F.getStackCategories(t,"bar"),l=B.isMixedFrequency(t),u=W.isSplitDualY(t),h={},c={},d=0,p=0;if(n){for(a=0;a<s.y.length;a++)o=V.getBarStackWidth(t,s.y[a],e,!1),l?h[s.y[a]]=-.5*o:(h[s.y[a]]=d,d+=o);for(u||(p=d),a=0;a<s.y2.length;a++)o=V.getBarStackWidth(t,s.y2[a],e,!0),l?c[s.y2[a]]=-.5*o:(c[s.y2[a]]=p,p+=o);u||(d=p)}else for(var a=0;a<F.getSeriesCount(t);a++){var g=V.getSeriesType(t,a);if(("bar"==g||"candlestick"==g||"boxPlot"==g)&&V.isSeriesRendered(t,a)){var f=F.isAssignedToY2(t,a),_=F.getStackCategory(t,a);o=V.getBarWidth(t,a,e),f?l?c[_]=-.5*o:(c[_]=p,p+=o):l?h[_]=-.5*o:(h[_]=d,d+=o)}}for(var _ in h)h[_]-=u||n?d/2:(d+p)/2;for(var _ in c)c[_]-=u||n?p/2:(d+p)/2-d;return r={y:h,y2:c},t.getCache().putToCachedMap2D(i,e,n,r),r},V.getDataItemGaps=function(t){var e=t.getOptions();if(W.isFunnel(t)&&"on"==e.styleDefaults.funnelSliceGaps)return 1;if(null!=e.styleDefaults.sliceGaps)return e.styleDefaults.sliceGaps;var n=e.styleDefaults.dataItemGaps;"auto"==n&&(n="on"==e.styleDefaults.threeDEffect?"0%":"50%");var i=n&&n.indexOf?n.indexOf("%"):-1;return i>=0?(n=n.substring(0,i),n/100):0},V.isSelectable=function(t,e,n){var i=F.getSeriesItem(t,e);return(!i||"off"!=i._selectable)&&(t.isSelectionSupported()&&null!=e&&e>=0&&null!=n&&n>=0)},V.isSeriesRendered=function(e,n){var i=V.getHiddenCategories(e);return!(i.length>0&&t.ArrayUtils.hasAnyItem(i,F.getCategories(e,n)))},V.isDataItemRendered=function(e,n,i,r){if(!V.isSeriesRendered(e,n))return!1;var o=V.getHiddenCategories(e);if(o.length>0){if((W.isPie(e)||W.isFunnel(e)||W.isPyramid(e))&&(i=0),t.ArrayUtils.hasAnyItem(o,F.getCategories(e,n,i)))return!1;if(t.ArrayUtils.hasAnyItem(o,F.getCategories(e,n,i,r)))return!1}return!0},V.getAnimationOnDisplay=function(t){return t.getOptions().animationOnDisplay},V.getAnimationOnDataChange=function(t){return t.getOptions().animationOnDataChange},V.getAnimationDuration=function(e){return t.StyleUtils.getTimeMilliseconds(e.getOptions().styleDefaults.animationDuration)/1e3},V.getAnimationIndicators=function(t){return t.getOptions().styleDefaults.animationIndicators},V.getAnimationUpColor=function(t){return t.getOptions().styleDefaults.animationUpColor},V.getAnimationDownColor=function(t){return t.getOptions().styleDefaults.animationDownColor},V.getHiddenCategories=function(t){var e=t.getOptions();return e.hiddenCategories||(e.hiddenCategories=[]),e.hiddenCategories},V.getHighlightedCategories=function(t){var e=t.getOptions();return e.highlightedCategories||(e.highlightedCategories=[]),e.highlightedCategories},V.getSelectedInnerColor=function(t){return t.getOptions().styleDefaults.selectedInnerColor},V.getSelectedOuterColor=function(t){return t.getOptions().styleDefaults.selectedOuterColor},V.isSelectionHighlighted=function(t){var e=t.getOptions().styleDefaults.selectionEffect;return"highlight"==e||"highlightAndExplode"==e},V.isSelectionExploded=function(t){var e=t.getOptions().styleDefaults.selectionEffect;return"explode"==e||"highlightAndExplode"==e},V.getDataLabelStyle=function(e,n,i,r,o,a,s){var l,u=[];!o||"bar"!=V.getSeriesType(e,n)&&!W.isBubble(e)||"center"!=a&&"inBottom"!=a&&"inTop"!=a&&"inRight"!=a&&"inLeft"!=a?u.push(new t.CSSStyle("color: #333333;")):(l=null!=V.getPattern(e,n,i,r)?"#000000":t.ColorUtils.getContrastingTextColor(o),u.push(new t.CSSStyle("color: "+l+";"))),u.push(V._parseLowHighArray(e.getOptions().styleDefaults.dataLabelStyle,s));var h=F.getDataItem(e,n,i);h&&u.push(new t.CSSStyle(V._parseLowHighArray(h.labelStyle,s)));var c=F.getNestedDataItem(e,n,i,r);return c&&u.push(new t.CSSStyle(V._parseLowHighArray(c.labelStyle,s))),l&&t.Agent.isHighContrast()&&u.push(new t.CSSStyle("color: "+l+";")),t.CSSStyle.mergeStyles(u)},V.getDataLabelPosition=function(e,n,i,r,o,a){var s,l=F.getNestedDataItem(e,n,i,r),u=F.getDataItem(e,n,i);if(a)s="outsideBarEdge";else if(s=l&&l.labelPosition?l.labelPosition:u.labelPosition,s||(s=e.getOptions().styleDefaults.dataLabelPosition),s=V._parseLowHighArray(s,o),"none"==s)return"none";var h=t.Agent.isRightToLeft(e.getCtx()),c=W.isHorizontal(e),d=W.isPolar(e);if(W.isFunnel(e)||W.isPyramid(e))return"center";if("bar"==V.getSeriesType(e,n)){if("center"==s||d)return"center";var p=W.isStacked(e);if("insideBarEdge"!=s){if(p&&!a)return"center";"outsideBarEdge"!=s&&(s="insideBarEdge")}if("insideBarEdge"==s&&!p){var g,f=e.getOptions().styleDefaults.dataLabelStyle;if(c){var _=F.getDataLabel(e,n,i,r,o);g=t.TextUtils.getTextStringWidth(e.getCtx(),_,f)}else g=t.TextUtils.getTextStringHeight(e.getCtx(),f);var m=F.getBarInfo(e,n,i),v=Math.abs(m.baseCoord-m.yCoord);v<=g&&(s="outsideBarEdge")}var y;return y="low"==o?u.low<=u.high:"high"==o?u.high<u.low:F.getValue(e,n,i,r)<0,"outsideBarEdge"==s?c?!y&&!h||y&&h?"right":"left":y?"bottom":"top":c?!y&&!h||y&&h?"inRight":"inLeft":y?"inBottom":"inTop"}if("center"==s)return"center";if("belowMarker"==s)return"bottom";if("aboveMarker"==s)return"top";if("afterMarker"!=s&&"beforeMarker"!=s){if(W.isBubble(e))return"center";if("low"!=o||d)if("high"!=o||d)s="afterMarker";else{if(!c)return"top";s="afterMarker"}else{if(!c)return"bottom";s="beforeMarker"}}return!h&&"afterMarker"==s||h&&"beforeMarker"==s?"right":"left"},V._parseLowHighArray=function(t,e){return t instanceof Array?"high"==e?t[1]:t[0]:t},V.isOverviewRendered=function(t){var e=t.getOptions();return W.isOverviewSupported(t)&&"off"!=e.overview.rendered},V.getOverviewHeight=function(t){var e=t.getOptions(),n=e.overview.height;
return null==n&&(n=B.hasTimeAxis(t)?.25:.2),V.getSizeInPixels(n,t.getHeight())},V.getSizeInPixels=function(t,e){if("string"==typeof t){if("%"==t.slice(-1))return e*Number(t.slice(0,-1))/100;if("px"==t.slice(-2))return Number(t.slice(0,-2));t=Number(t)}return"number"==typeof t?t<=1?e*t:t:0},V.getBackgroundColor=function(t,e){var n=t.getOptions();return n.plotArea.backgroundColor?n.plotArea.backgroundColor:e?"#FFFFFF":null},V.getHoverBehaviorDelay=function(e){var n=e.getOptions().styleDefaults.hoverBehaviorDelay;return n?(n=t.StyleUtils.getTimeMilliseconds(n),W.isScatterBubble(e)||W.isLine(e)?.75*n:1.25*n):0},V.optimizeMarkerStroke=function(t){return W.isScatterBubble(t)||W.isBoxPlot(t)},V.getGroupWidth=function(t){var e="groupWidth",n=t.getCache().getFromCache(e);return null==n&&(n=t.xAxis.getInfo().getGroupWidth(),t.getCache().putToCache(e,n)),n},V.isStackLabelRendered=function(t){var e=t.getOptions();return!(!W.isStacked(t)||"on"!=e.stackLabel)},V.optimizeMarkerFill=function(t){return W.isLineArea(t)},V.getClassName=function(t,e,n){var i=F.getDataItem(t,e,n);if(i&&i.className)return i.className;var r=F.getSeriesItem(t,e);return r&&r.className?r.className:null},V.getAreaClassName=function(t,e){var n=F.getSeriesItem(t,e);return n&&n.areaClassName?n.areaClassName:n&&n.className?n.className:null},V.getMarkerClassName=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);if(r&&r.className)return r.className;var o=F.getDataItem(t,e,n);if(o&&o.className)return o.className;var a=F.getSeriesItem(t,e);return a&&a.markerClassName?a.markerClassName:W.isScatterBubble(t)&&a&&a.className?a.className:null},V.getStyle=function(t,e,n){var i=F.getDataItem(t,e,n);if(i&&i.style)return i.style;var r=F.getSeriesItem(t,e);return r&&r.style?r.style:null},V.getAreaStyle=function(t,e){var n=F.getSeriesItem(t,e);return n&&n.areaStyle?n.areaStyle:n&&n.style?n.style:null},V.getMarkerStyle=function(t,e,n,i){var r=F.getNestedDataItem(t,e,n,i);if(r&&r.style)return r.style;var o=F.getDataItem(t,e,n);if(o&&o.style)return o.style;var a=F.getSeriesItem(t,e);return a&&a.markerStyle?a.markerStyle:W.isScatterBubble(t)&&a&&a.style?a.style:null},V.getBoxPlotStyleOptions=function(e,n,i){var r=F.getDataItem(e,n,i),o=r&&r.boxPlot?r.boxPlot:{},a=F.getSeriesItem(e,n),s=a&&a.boxPlot?a.boxPlot:{},l=e.getOptions().styleDefaults,u=l.boxPlot,h=t.JsonUtils.merge(o,t.JsonUtils.merge(s,u)),c=V.getColor(e,n,i);h._color=c;var d=t.ColorUtils.getBrighter(c,.8);if(h.q2Color||(h.q2Color=d),h.q3Color||(h.q3Color=d),"pattern"==V.getSeriesEffect(e)){var p=V.getPattern(e,n,i);h._q2Pattern=p,h._q3Pattern=p}var g=V.getBorderColor(e,n,i);h.borderColor=g?g:c,h.borderWidth=V.getBorderWidth(e,n,i);var f=t.ColorUtils.getDarker(c,.1);return h.whiskerStyle.stroke||h.whiskerClassName||(h.whiskerStyle.stroke=f),h.whiskerEndStyle.stroke||h.whiskerEndClassName||(h.whiskerEndStyle.stroke=f),h.medianStyle.stroke||h.medianClassName||(h.medianStyle.stroke=f),h};var Y=new Object;t.Obj.createSubclass(Y,t.Obj),Y.createText=function(e,n,i,r,o,a,s,l){var u=new t.OutputText(n.getCtx(),i,o,a);return u.setCSSStyle(r),t.TextUtils.fitText(u,s,l,n)?(e.associate(u,new t.SimpleObjPeer(u.getUntruncatedTextString())),u):null},Y.areTitlesRendered=function(t){var e=t.getOptions();return e.title.text||e.subtitle.text||e.footnote.text};var K=new Object;t.Obj.createSubclass(K,t.Obj),K.getDatatipColor=function(t,e,n,i){return W.isStock(t)?V.getColor(t,0,n):null!=i&&i>=0?V.getMarkerColor(t,e,n,i):V.getColor(t,e,n)},K.getDatatip=function(t,e,n,i,r){if(W.isSpark(t)||W.isOverview(t))return null;if(e<0||n<0)return null;var o=F.getDataItem(t,e,n),a=t.getOptions().tooltip,s=a?a.renderer:null;if(r&&s){var l=t.getCtx().getTooltipManager(K.isDataCursorEnabled(t)?C.TOOLTIP_ID:null),u=F.getDataContext(t,e,n,i);if(W.isPie(t)){var h=X.getSliceBySeriesIndex(t,e);u.label=h.getSliceLabelString()}else u.label=F.getDataLabel(t,e,n,i);return l.getCustomTooltip(s,u)}if(o&&null!=o.shortDesc)return o.shortDesc;var c="";return W.isStock(t)?c+=K.getStockDatatip(t,0,n,r):(c=K._addSeriesDatatip(c,t,e,n,r),c=K._addGroupDatatip(c,t,e,n,r),c=K._addValueDatatip(c,t,e,n,i,r)),K._processDatatip(c,t,r)},K.getOtherSliceDatatip=function(e,n,i){var r=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null),o=e.getOptions().tooltip,a=o?o.renderer:null;if(i&&a){var s=X.getSliceBySeriesIndex(e,null),l=F.getDataContext(e,null,0);return l.label=s.getSliceLabelString(),e.getCtx().getTooltipManager().getCustomTooltip(a,l)}var u="";return u=K._addDatatipRow(u,e,"series","SERIES",r,i),u=K._addGroupDatatip(u,e,0,0,i),u=K._addDatatipRow(u,e,"value","VALUE",n,i),K._processDatatip(u,e,i)},K._processDatatip=function(e,n,i){return""==e?null:i?t.HtmlTooltipManager.createStartTag("table",n.getOptions().styleDefaults._tooltipStyle)+e+"</table>":e},K.getRefObjTooltip=function(t,e,n,i){var r=t.getOptions().tooltip,o=r?r.renderer:null;if(o&&null!=e.id){var a=t.getCtx().getTooltipManager(K.isDataCursorEnabled(t)?C.TOOLTIP_ID:null),s={id:j.getId(e),label:e.text,data:t.getRawOptions()[n].referenceObjects[i],value:e.value,low:j.getLowValue(e),high:j.getHighValue(e),color:j.getColor(e)};return a.getCustomTooltip(o,s)}return e.shortDesc},K.getStockDatatip=function(t,e,n,i){var r=F.getDataItem(t,e,n),o=K._addGroupDatatip("",t,e,n,i);return r&&(o=K._addDatatipRow(o,t,"open","OPEN",r.open,i),o=K._addDatatipRow(o,t,"close","CLOSE",r.close,i),o=K._addDatatipRow(o,t,"high","HIGH",r.high,i),o=K._addDatatipRow(o,t,"low","LOW",r.low,i),o=K._addDatatipRow(o,t,"volume","VOLUME",r.volume,i)),o},K._addSeriesDatatip=function(t,e,n,i,r){var o=F.getSeriesLabel(e,n);return K._addDatatipRow(t,e,"series","SERIES",o,r)},K._addGroupDatatip=function(e,n,i,r,o){var a;if(B.hasTimeAxis(n)){var s=K.getValueFormat(n,"group"),l=F.getXValue(n,i,r);a=K.formatDateValue(s,new Date(l)),null==a&&(a=n.xAxis.getInfo().formatLabel(l))}else a=F.getGroupLabel(n,r);var u=F.getNumLevels(n),h="GROUP";if(1!=u&&t.ArrayUtils.isArray(a))for(var c=u-1;c>=0;c--)e=K._addDatatipRow(e,n,"group",h,a[c],o,c),a[c]&&(h=null);else e=K._addDatatipRow(e,n,"group",h,a,o);return e},K._addValueDatatip=function(t,e,n,i,r,o){var a=F.getValue(e,n,i,r),s=F.getXValue(e,n,i),l=F.getZValue(e,n,i),u=F.getLowValue(e,n,i),h=F.getHighValue(e,n,i),c=null!=r&&r>=0;if(W.isScatterBubble(e))t=K._addDatatipRow(t,e,"x","X",s,o),t=K._addDatatipRow(t,e,"y","Y",a,o),W.isBubble(e)&&(t=K._addDatatipRow(t,e,"z","Z",l,o));else if(W.isPie(e)||W.isPyramid(e))t=K._addDatatipRow(t,e,"value","VALUE",a,o);else if(W.isFunnel(e)){t=K._addDatatipRow(t,e,"value","VALUE",a,o);var d=F.getTargetValue(e,n);null!=d&&(t=K._addDatatipRow(t,e,"targetValue","TARGET_VALUE",d,o))}else if("boxPlot"!=V.getSeriesType(e,n)||c){if(W.isBLAC(e)){var p=F.isAssignedToY2(e,n)?"y2":"y";null==u&&null==h||c?null==l||c?t=K._addDatatipRow(t,e,p,"VALUE",a,o):(t=K._addDatatipRow(t,e,p,"Y",a,o),t=K._addDatatipRow(t,e,"z","Z",l,o)):(t=K._addDatatipRow(t,e,"high","HIGH",h,o),t=K._addDatatipRow(t,e,"low","LOW",u,o),null!=l&&(t=K._addDatatipRow(t,e,"z","Z",l,o)))}}else{var g=F.getDataItem(e,n,i);t=K._addDatatipRow(t,e,"high","HIGH",h,o),t=K._addDatatipRow(t,e,"q3","Q3",g.q3,o),t=K._addDatatipRow(t,e,"q2","Q2",g.q2,o),t=K._addDatatipRow(t,e,"q1","Q1",g.q1,o),t=K._addDatatipRow(t,e,"low","LOW",u,o),null!=l&&(t=K._addDatatipRow(t,e,"z","Z",l,o))}return t},K._addDatatipRow=function(e,n,i,r,o,a,s){if(null==o||""===o)return e;var l=n.getOptions().styleDefaults,u=K.getValueFormat(n,i),h=u.tooltipDisplay;if(h&&"auto"!=h||("series"==i&&"none"==l.seriesTooltipType||"group"==i&&("none"==l.groupTooltipType||W.isPie(n)||W.isFunnel(n))||"series"!=i&&"group"!=i&&"label"!=i&&"none"==l.valueTooltipType)&&(h="off"),"off"==h)return e;var c;if("string"==typeof u.tooltipLabel?c=u.tooltipLabel:t.ArrayUtils.isArray(u.tooltipLabel)&&(c=u.tooltipLabel[s?s:0]),null==c&&(c=null==r?"":"GROUP"==r&&B.hasTimeAxis(n)?t.Bundle.getTranslation(n.getOptions(),"labelDate",t.Bundle.CHART_PREFIX,"LABEL_GROUP"):t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_"+r,"")),"series"!=i&&"group"!=i&&(o=K.formatValue(n.getCtx(),u,o)),a){var d=t.Agent.isRightToLeft(n.getCtx());return l.tooltipLabelStyle.setStyle(t.CSSStyle.TEXT_ALIGN,d?"left":"right"),l.tooltipValueStyle.setStyle(t.CSSStyle.TEXT_ALIGN,d?"right":"left"),e+"<tr>"+t.HtmlTooltipManager.createStartTag("td",l.tooltipLabelStyle)+c+"</td>"+t.HtmlTooltipManager.createStartTag("td",l.tooltipValueStyle)+o+"</td></tr>"}return e.length>0&&(e+="<br>"),e+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[c,o])},K.getValueFormat=function(t,e){var n=t.getOptions().valueFormats;if(!n)return{};for(var i=0;i<n.length;i++)if(n[i].type==e)return n[i];return"group"==e&&B.hasTimeAxis(t)?K.getValueFormat(t,"x"):"y"!=e&&"y2"!=e&&"min"!=e&&"max"!=e||!W.isBLAC(t)?{}:K.getValueFormat(t,"value")},K.formatValue=function(e,n,i,r,o,a){var s,l="auto",u="on";n.scaling&&(l=n.scaling),n.autoPrecision&&(u=n.autoPrecision),n.converter&&(s=n.converter),r=null!=r?r:i,o=null!=o?o:i,a=null!=a?a:0;var h=new t.LinearScaleAxisValueFormatter(e,r,o,a,l,u);return s&&(s.getAsString||s.format)?h.format(i,s):h.format(i)},K.formatDateValue=function(t,e){var n=t.converter;return n?n.getAsString?n.getAsString(e):n.format?n.format(e):null:null},K.isDataCursorEnabled=function(e){if(W.isPie(e)||W.isFunnel(e)||W.isPolar(e)||W.isPyramid(e))return!1;var n=e.getOptions();return"on"==n.dataCursor||"off"!=n.dataCursor&&(t.Agent.isTouchDevice()&&W.isLineArea(e))},K.getDataCursorBehavior=function(t){var e=t.getOptions().dataCursorBehavior;return"snap"==e?C.BEHAVIOR_SNAP:"smooth"==e?C.BEHAVIOR_SMOOTH:W.isLineArea(t)?C.BEHAVIOR_SMOOTH:C.BEHAVIOR_SNAP};var W=new Object;t.Obj.createSubclass(W,t.Obj),W._SUPPORTED_TYPES=["bar","line","area","lineWithArea","combo","pie","bubble","scatter","funnel","pyramid","stock","boxPlot"],W.isValidType=function(e){return t.ArrayUtils.getIndex(W._SUPPORTED_TYPES,e.getType())>=0},W.isSpark=function(t){return t.getOptions().__spark},W.isOverview=function(t){return t.getOptions()._isOverview},W.isVertical=function(t){return!W.isHorizontal(t)&&!W.isPolar(t)},W.isHorizontal=function(t){return"horizontal"==t.getOptions().orientation&&!W.isPolar(t)&&!W.isStock(t)&&(W.isBLAC(t)||W.isFunnel(t))},W.isPolar=function(t){return"polar"==t.getOptions().coordinateSystem&&!W.isStock(t)&&!W.isBoxPlot(t)},W.isStacked=function(t){var e=t.getOptions();return"on"==e.stack&&!B.isMixedFrequency(t)&&W.isBLAC(t)},W.isCombo=function(t){return"combo"==t.getType()},W.isBar=function(t){return"bar"==t.getType()},W.isLine=function(t){return"line"==t.getType()},W.isLineWithArea=function(t){return"lineWithArea"==t.getType()},W.isArea=function(t){return"area"==t.getType()},W.isStock=function(t){return"stock"==t.getType()},W.isBoxPlot=function(t){return"boxPlot"==t.getType()},W.isScatter=function(t){return"scatter"==t.getType()},W.isBubble=function(t){return"bubble"==t.getType()},W.isPie=function(t){return"pie"==t.getType()},W.isFunnel=function(t){return"funnel"==t.getType()},W.isPyramid=function(t){return"pyramid"==t.getType()},W.isDualY=function(t){return!(!W.hasAxes(t)||W.isScatterBubble(t)||W.isPolar(t))},W.isSplitDualY=function(t){return!(!W.isStock(t)||!F.hasVolumeSeries(t)||W.isOverview(t))||"on"==t.getOptions().splitDualY&&W.hasY2Data(t)&&!W.hasY2DataOnly(t)},W.isBLAC=function(t){var e=t.getType();return"bar"==e||"line"==e||"area"==e||"lineWithArea"==e||"combo"==e||"stock"==e||"boxPlot"==e},W.isScatterBubble=function(t){var e=t.getType();return"scatter"==e||"bubble"==e},W.isLineArea=function(t){var e=t.getType();return"line"==e||"area"==e||"lineWithArea"==e},W.isScrollSupported=function(t){return!(W.isPie(t)||W.isFunnel(t)||W.isPolar(t)||W.isPyramid(t))},W.isOverviewSupported=function(t){return W.isBLAC(t)&&W.isVertical(t)},W.isHorizScrollbarSupported=function(t){var e=H.getZoomDirection(t);return!W.isPolar(t)&&(W.isBLAC(t)&&W.isVertical(t)||W.isScatterBubble(t)&&"y"!=e)},W.isVertScrollbarSupported=function(t){var e=H.getZoomDirection(t);return!W.isPolar(t)&&(W.isBLAC(t)&&W.isHorizontal(t)||W.isScatterBubble(t)&&"x"!=e)},W.hasAxes=function(t){return!("pie"==t.getType()||"funnel"==t.getType()||"pyramid"==t.getType())},W.hasY2DataOnly=function(t){return!!W.isDualY(t)&&F.getY2SeriesCount(t,null,!0)==F.getSeriesCount(t)},W.hasY2Data=function(t,e){return!!W.isDualY(t)&&F.getY2SeriesCount(t,null,!0)>0},W.hasY2BarData=function(t){return W.hasY2Data(t,"bar")},W.hasBarSeries=function(t){return W._hasSeriesType(t,"bar")},W.hasLineSeries=function(t){return W._hasSeriesType(t,"line")},W.hasAreaSeries=function(t){return W._hasSeriesType(t,"area")},W.hasLineWithAreaSeries=function(t){return W._hasSeriesType(t,"lineWithArea")},W.hasCandlestickSeries=function(t){return W._hasSeriesType(t,"candlestick")},W.hasBoxPlotSeries=function(t){return W._hasSeriesType(t,"boxPlot")},W._hasSeriesType=function(t,e){if(W.isBLAC(t))for(var n=F.getSeriesCount(t),i=0;i<n;i++)if(V.isSeriesRendered(t,i)&&V.getSeriesType(t,i)==e)return!0;return!1},W.hasCenteredSeries=function(t){if(!W.isBLAC(t))return!1;for(var e=F.getSeriesCount(t),n=0;n<e;n++)if(V.isSeriesRendered(t,n)&&"bar"!=V.getSeriesType(t,n)){var i=V.getLineType(t,n);if("centeredSegmented"==i||"centeredStepped"==i)return!0}return!1},W.hasUncenteredSeries=function(t){if(!W.isBLAC(t))return!1;for(var e=F.getSeriesCount(t),n=0;n<e;n++)if(V.isSeriesRendered(t,n)&&"bar"!=V.getSeriesType(t,n)){var i=V.getLineType(t,n);if("segmented"==i||"stepped"==i)return!0}return!1},W.isStandalonePlotArea=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!B.isAxisRendered(t,"x")&&(!B.isAxisRendered(t,"y")&&!B.isAxisRendered(t,"y2"))))},W.isStandaloneXAxis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&("off"==e.plotArea.rendered&&(!B.isAxisRendered(t,"y")&&!B.isAxisRendered(t,"y2"))))},W.isStandaloneYAxis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!B.isAxisRendered(t,"x")&&("off"==e.plotArea.rendered&&!B.isAxisRendered(t,"y2"))))},W.isStandaloneY2Axis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!B.isAxisRendered(t,"x")&&(!B.isAxisRendered(t,"y")&&"off"==e.plotArea.rendered)))};var z=new Object;t.Obj.createSubclass(z,t.Obj),z._MIN_BUBBLE_SIZE=6,z._MAX_BUBBLE_SIZE_RATIO=.5,z.calcBubbleSizes=function(e,n){for(var i=F.getMinMaxValue(e,"z"),r=i.min,o=i.max,a=z._MIN_BUBBLE_SIZE,s=z._MAX_BUBBLE_SIZE_RATIO*Math.min(n.w,n.h),l=F.getSeriesCount(e),u="withoutRescale"==H.getHideAndShowBehavior(e),h=0;h<l;h++)if(u||V.isSeriesRendered(e,h))for(var c=F.getSeriesItem(e,h),d=c.items?c.items.length:0,p=0;p<d;p++){var g=c.items[p];if(g){var f=t.LayoutUtils.getBubbleSize(g.z,r,o,a,s);g.markerSize=f}}var _,m;W.isPolar(e)?(_=1/0,m=e.getRadius()):(_=n.w-2.4*B.getTickLabelHeight(e,"y"),m=n.h-1.6*B.getTickLabelHeight(e,"x")),_-=.5*s,m-=.5*s;var v=e.getCache(),y=z._getAxisValueRange(e,"x");v.putToCache("_xAxisBubbleRatio",y/_);var S=z._getAxisValueRange(e,"y");v.putToCache("_yAxisBubbleRatio",S/m)},z.getBubbleAxisRadius=function(t,e,n){if(!n)return 0;var i="x"==e?"_xAxisBubbleRatio":"_yAxisBubbleRatio",r=t.getCache().getFromCache(i);return n/2*r},z._getAxisValueRange=function(e,n){var i=e.getOptions()[n+"Axis"],r=B.isLog(e,n),o=!r&&"zero"==B.getBaselineScaling(e,n),a=F.getMinMaxValue(e,n,!0),s=i.min;null==s&&(s=o?Math.min(0,a.min):a.min);var l=i.max;return null==l&&(l=o?Math.max(0,a.max):a.max),r&&l>0&&s>0?l==s?6:t.Math.log10(l/s):l==s?60:l-s},z.sortMarkers=function(t){t.sort(z._compareSize)},z.sortMarkerInfos=function(t){t.sort(z._compareInfoSize)},z._compareSize=function(t,e){return e.getSize()-t.getSize()},z._compareInfoSize=function(t,e){return e.size-t.size},z.checkPixelMap=function(t,e,n,i){var r=i/2,o=Math.max(Math.floor(e-r),0),a=Math.max(Math.floor(n-r),0),s=Math.max(Math.ceil(e+r),0),l=Math.max(Math.ceil(n+r),0);return t.isObscured(o,a,s,l)},z.updatePixelMap=function(t,e,n,i,r){var o=.4*i,a=Math.max(Math.round(e-o),0),s=Math.max(Math.round(e+o),0),l=Math.max(Math.round(n-o),0),u=Math.max(Math.round(n+o),0);t.obscure(a,l,s,u,r)};var X=new Object;t.Obj.createSubclass(X,t.Obj),X.OTHER_SLICE_SERIES_ID="_dvtOther",X.getSliceId=function(t,e){var n=F.getDataItem(t,e,0),i=n?n.id:null,r=F.getSeries(t,e),o=F.getGroup(t,0);return new a(i,r,o)},X.getOtherSliceId=function(t){var e=F.getGroup(t,0);return new a(null,X.OTHER_SLICE_SERIES_ID,e)},X.getRenderedSeriesIndices=function(t){return X._getSeriesIndicesArrays(t).rendered},X.hasOtherSeries=function(t){return X._getSeriesIndicesArrays(t).other.length>0},X.getOtherValue=function(t){for(var e=X._getSeriesIndicesArrays(t).other,n=0,i=0;i<e.length;i++){var r=e[i];if(V.isSeriesRendered(t,r)){var o=F.getValue(t,r,0);o>0&&(n+=o)}}return n},X.getOtherSliceIds=function(t){for(var e=X._getSeriesIndicesArrays(t).other,n=[],i=0;i<e.length;i++){var r=e[i];n.push(X.getSliceId(t,r))}return n},X.isOtherSliceSelected=function(t,e){for(var n=X.getOtherSliceIds(t),i=0;i<n.length;i++){for(var r=n[i],o=!1,a=0;a<e.length;a++)if(e[a].id&&r.getId()===e[a].id||r.getSeries()===e[a].series&&r.getGroup()===e[a].group){o=!0;break}if(!o)return!1}return!0},X._getSeriesIndicesArrays=function(t){for(var e=[],n=[],i=F.getSeriesCount(t),r=t.getOptions(),o=r.otherThreshold*X.getTotalValue(t),a=0;a<i;a++){var s=F.getValue(t,a,0);o>0&&s<o?n.push(a):e.push(a)}return"ascending"==r.sorting?e.sort(function(e,n){return F.getValue(t,e,0)-F.getValue(t,n,0)}):"on"!=r.sorting&&"descending"!=r.sorting||e.sort(function(e,n){return F.getValue(t,n,0)-F.getValue(t,e,0)}),{rendered:e,other:n}},X.getTotalValue=function(t){for(var e=F.getSeriesCount(t),n=0,i=0;i<e;i++){var r=F.getValue(t,i,0);r>0&&(n+=r)}return n},X.getSliceExplode=function(t,e){var n=F.getSeriesItem(t,e);return n&&n.pieSliceExplode?n.pieSliceExplode:0},X.getOtherSliceShowPopupBehaviors=function(t){var e=X.getOtherSliceIds(t);if(e&&e.length>=1){var n=e[0],i=F.getSeriesIndex(t,n.getSeries()),r=F.getDataItem(t,i,0)._id;return t.getShowPopupBehaviors(r)}},X.getSliceBySeriesIndex=function(t,e){for(var n=t.pieChart.__getSlices(),i=0;i<n.length;i++)if(n[i].getSeriesIndex()==e)return n[i];return null};var q=function(){};t.Obj.createSubclass(q,t.Obj),q.TWOD="2D",q.THREED="3D",q.CRUST="CRUST",q.SIDE="SIDE",q.BORDER="BORDER",q.SURFACE_CRUST=0,q.SURFACE_LEFT=1,q.SURFACE_RIGHT=2,q.SURFACE_TOP=3,q.reflectAngleOverYAxis=function(e,n,i,r,o){var a=t.Math.degreesToRads(360-e),s=Math.cos(a),l=Math.sin(a);return{x:n+s*r,y:i+l*o}},q.getGradientColors=function(e,n,i){if(i&&i!=t.CSSStyle.SKIN_SKYROS){if(n==q.TWOD||n==q.THREED)return[t.ColorUtils.adjustHSL(e,0,-.04,-.05),t.ColorUtils.adjustHSL(e,0,-.09,.04)];if(n==q.CRUST)return[t.ColorUtils.adjustHSL(e,0,-.04,-.05),t.ColorUtils.adjustHSL(e,0,0,-.14)];if(n==q.SIDE)return[t.ColorUtils.adjustHSL(e,0,-.1,.06),t.ColorUtils.adjustHSL(e,0,-.04,-.05)]}else{if(n==q.TWOD){var r=[];return r[0]=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.1)),r[1]=r[0],r[2]=t.ColorUtils.getRGB(t.ColorUtils.getDarker(e,.1)),r}if(n==q.BORDER)return["#FFFFFF","#000000","#000000"];var o=t.ColorUtils.getRGB(t.ColorUtils.getDarker(e,.12)),a=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.05)),s=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.15)),l=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.35));if(n==q.CRUST)return[o,s,l,o];if("SIDE"==n)return[o,l];if("3D"==n)return[l,s,o,a,l]}},q.getGradientAlphas=function(t,e){var n=null==t||isNaN(t)||0==t?1:t;return e==q.TWOD?[n,n,n]:e==q.BORDER?[n/1.59375,n/5.3125,n/(255/96)]:e==q.THREED?[n,n,n,n,n]:e==q.CRUST?[n,n,n,n]:e==q.SIDE?[n,n]:void 0},q.getGradientRatios=function(e,n){return n&&n!=t.CSSStyle.SKIN_SKYROS?[0,1]:e==q.TWOD?[.2,.5,1]:e==q.BORDER?[0,.5,1]:e==q.THREED?[0,.29,.55,.84,1]:e==q.CRUST?[0,.43,.91,1]:e==q.SIDE?[0,1]:void 0},q.createTopSurface=function(e,n){var i=e.getPieChart(),r=i.getCtx(),o=e.getCenter(),a=e.getInnerRadius(),s=i.is3D()||e.getSliceGaps()>Math.sin(t.Math.degreesToRads(e.getAngleExtent()))*e._radiusX+1?null:e.getSliceGaps(),l=new u(r,o.x,o.y,e._radiusX,e._radiusY,e.getAngleStart(),e.getAngleExtent(),s,a),h=V.getSelectedInnerColor(i.chart),c=V.getSelectedOuterColor(i.chart),d=new t.SolidStroke(e.getStrokeColor(),null,e.getBorderWidth()),p=e.getSeriesIndex(),g=V.getClassName(i.chart,p,0),f=V.getStyle(i.chart,p,0);l.setStyleProperties(n,d,e.getFillColor(),h,c,g,f);var _=[l];if(!e.getStrokeColor()&&i.getSkin()==t.CSSStyle.SKIN_SKYROS&&i.is3D()&&e.getDepth()>0&&"gradient"==V.getSeriesEffect(i.chart)&&(e.getAngleStart()>=180||e.getAngleStart()+e.getAngleExtent()>=180||360==e.getAngleExtent())){var m=q._createGradientPieBorder(e,n);m.setTranslate(e.__getExplodeOffsetX(),e.__getExplodeOffsetY()),_.push(m)}return q.associate(e,_),_},q.associate=function(t,e){if(e)for(var n=0;n<e.length;n++)t.getPieChart().chart.getEventManager().associate(e[n],t)},q._createGradientPieBorder=function(e,n){var i=q.BORDER,r=q.getGradientColors(null,i),o=q.getGradientAlphas(null,i),a=q.getGradientRatios(i),s=n.getBounds(),l=120,u=new t.LinearGradientStroke(l,r,o,a,s);u.setWidth(1);var h=e.getAngleStart(),c=e.getAngleExtent(),d=h<180?180-h:0,p=d>0?180:h,g=c-d;p+g>360&&(g=360-p);var f=e.getPieChart(),_=e.getCenter(),m=new t.Arc(f.getCtx(),_.x,_.y,f.getRadiusX(),f.getRadiusY(),p,g,t.Arc.OPEN);return m.setStroke(u),m},q.createLateralSurface=function(e,n,i){if(0==e.getAngleExtent())return[];var r=t.ColorUtils.getAlpha(e.getFillColor()),o=[];if(r>0)if(n==q.SURFACE_LEFT||n==q.SURFACE_RIGHT)o.push(q._generateLateralShape(e,n,null,i));else if(n==q.SURFACE_CRUST)for(var a=q._createCrustPathCommands(e),s=a.length,l=0;l<s;l++)o.push(q._generateLateralShape(e,n,a[l],i));return q.associate(e,o),o},q.generateLateralGradientFill=function(e,n){var i=e.getPieChart(),r=i.getSkin(),o=n==q.CRUST?e.getDepth():0,a=r==t.CSSStyle.SKIN_SKYROS?0:270,s=q.getGradientColors(t.ColorUtils.getRGB(e.getFillColor()),n,r),l=q.getGradientAlphas(t.ColorUtils.getAlpha(e.getFillColor()),n),u=q.getGradientRatios(n,r),h=null;return r==t.CSSStyle.SKIN_SKYROS&&(h=[Math.floor(e.getCenter().x-i.getRadiusX()),Math.floor(e.getCenter().y-i.getRadiusY())+o,Math.ceil(2*i.getRadiusX()),Math.ceil(2*i.getRadiusY())]),new t.LinearGradientFill(a,s,l,u,h)},q._generateLateralShape=function(e,n,i,r){var o=e.getPieChart(),a=o.getCtx();if(n==q.SURFACE_LEFT||n==q.SURFACE_RIGHT){for(var s=e.getAngleStart(),l=e.getAngleExtent(),u=e.getCenter().x,h=e.getCenter().y,c=e._radiusX,d=e._radiusY,p=e.getDepth(),g=n==q.SURFACE_LEFT?q.reflectAngleOverYAxis(s+l,u,h,c,d):q.reflectAngleOverYAxis(s,u,h,c,d),f=q._generateInnerPoints(u,h,g.x,g.y,p),_=[],m=0;m<f.length;m++)_.push(f[m].x,f[m].y);var v=new t.Polygon(a,_);return v.setFill(r),e.getStrokeColor()&&v.setSolidStroke(e.getStrokeColor()),v}if(i){var y=new t.Path(a,null);return y.setCmds(i),y.setTranslate(e.__getExplodeOffsetX(),e.__getExplodeOffsetY()),y.setFill(r),e.getStrokeColor()&&y.setSolidStroke(e.getStrokeColor()),y}return null},q._createCrustPathCommands=function(t){var e=t.getAngleStart(),n=t.getAngleExtent(),i=e+n,r=t.getCenter().x,o=t.getCenter().y,a=t._radiusX,s=t._radiusY,l=t.getDepth(),u=[];return e<180&&i>360?(u.push(q._makeOuterPath(r,o,a,s,l,e,180-e)),u.push(q._makeOuterPath(r,o,a,s,l,360,i-360)),u.push(q._makeOuterPath(r,o,a,s,l,180,180))):i>360?(u.push(q._makeOuterPath(r,o,a,s,l,e,360-e)),u.push(q._makeOuterPath(r,o,a,s,l,360,i-360))):e<180&&i>180?(u.push(q._makeOuterPath(r,o,a,s,l,e,180-e)),u.push(q._makeOuterPath(r,o,a,s,l,180,i-180))):u.push(q._makeOuterPath(r,o,a,s,l,e,n)),u},q._makeOuterPath=function(e,n,i,r,o,a,s){var l=t.Math.degreesToRads(s),u=-(t.Math.degreesToRads(a)+l),h=q.reflectAngleOverYAxis(a,e,n,i,r),c=e+Math.cos(u)*i,d=n+Math.sin(u)*r,p=t.PathUtils.moveTo(h.x,h.y);return p+=t.PathUtils.arcTo(i,r,l,0,c,d),p+=t.PathUtils.lineTo(c,d+o),p+=t.PathUtils.arcTo(i,r,l,1,h.x,h.y+o),p+=t.PathUtils.lineTo(h.x,h.y)},q._generateInnerPoints=function(t,e,n,i,r){var o=[];return o.push({x:t,y:e}),o.push({x:n,y:i}),o.push({x:n,y:i+r}),o.push({x:t,y:e+r}),o};var Z=function(){this._init()};t.Obj.createSubclass(Z,t.Obj),Z.prototype._init=function(){this._sliceLabel=null,this._slice=null,this._angle=-1,this._position=-1,this._width=-1,this._height=-1,this._x=-1,this._y=-1,this._initialNumLines=-1,this._hasFeeler=!1,this._maxY=-1,this._minY=-1},Z.prototype.getAngle=function(){return this._angle},Z.prototype.setAngle=function(t){this._angle=t},Z.prototype.getHeight=function(){return this._height},Z.prototype.setHeight=function(t){this._height=t},Z.prototype.getInitialNumLines=function(){return this._initialNumLines},Z.prototype.setInitialNumLines=function(t){this._initialNumLines=t},Z.prototype.getMaxY=function(){return this._maxY},Z.prototype.setMaxY=function(t){this._maxY=t},Z.prototype.getMinY=function(){return this._minY},Z.prototype.setMinY=function(t){this._minY=t},Z.prototype.boundY=function(t){return this._minY<=this._maxY&&(t=Math.max(t,this._minY),t=Math.min(t,this._maxY)),t},Z.prototype.hasFeeler=function(){return this._hasFeeler},Z.prototype.setHasFeeler=function(t){this._hasFeeler=t},Z.prototype.getPosition=function(){return this._position},Z.prototype.setPosition=function(t){this._position=t},Z.prototype.getSlice=function(){return this._slice},Z.prototype.setSlice=function(t){this._slice=t},Z.prototype.getSliceLabel=function(){return this._sliceLabel},Z.prototype.setSliceLabel=function(t){this._sliceLabel=t},Z.prototype.getWidth=function(){return this._width},Z.prototype.setWidth=function(t){this._width=t},Z.prototype.getX=function(){return this._x},Z.prototype.setX=function(t){this._x=t},Z.prototype.getY=function(){return this._y},Z.prototype.setY=function(t){this._y=t};var $=function(){};t.Obj.createSubclass($,t.Obj),$._MAX_LINES_PER_LABEL=3,$._COLLISION_MARGIN=1,$._LEFT_SIDE_LABELS=1,$._RIGHT_SIDE_LABELS=2,$._OUTSIDE_LABEL_DISTANCE=1.04,$._FEELER_RAD_MINSIZE=.1,$._FEELER_HORIZ_MINSIZE=.1,$._LABEL_TO_FEELER_OFFSET=.5,$._LABEL_TO_FEELER_DISTANCE=3,$._NO_COLLISION=0,$._HALF_COLLISION=1,$._ALL_COLLISION=2,$.layoutLabelsAndFeelers=function(t){var e=t.getLabelPosition();$._layoutInsideLabels(t,"auto"==e),$._layoutOutsideLabelsAndFeelers(t)},$._layoutInsideLabels=function(e,n){for(var i=e.__getSlices(),r=0;r<i.length;r++){var o=i[r],a=e.getSeriesLabelPosition(o.getSeriesIndex());if("none"!=a&&"outsideSlice"!=a&&!$._skipSliceLabel(e,o)){var s=o.getAngleStart()+o.getAngleExtent()/2,l=o.getInnerRadius(),u=o.getCenter(),h=0,c=0,d=$._createLabel(o,!0);if(1==i.length)h=u.x,c=u.y;else{var p=Math.max(.45,.65-.45*l/Math.max(o.getRadiusY(),.001)),g=q.reflectAngleOverYAxis(s,u.x,u.y,l+(o.getRadiusX()-l)*p,l+(o.getRadiusY()-l)*p);h=g.x,c=g.y}d.setX(h),d.setY(c),d.alignMiddle(),d.alignCenter();for(var f=t.TextUtils.guessTextDimensions(d),_=h,m=h,v=c-f.h/2,y=c+f.h/2;o.contains(_,v)&&o.contains(_,y);)_--;for(;o.contains(m,v)&&o.contains(m,y);)m++;_=Math.ceil(_+3),m=Math.floor(m-3);var S=2*Math.min(h-_,m-h);if(S<f.w&&(d.setX((_+m)/2),S=m-_),n&&"center"!=a){var C=d.getDimensions().w;C<S?o.setSliceLabel(d):o.setSliceLabel(null)}else{var b=e.getCtx().getStage(),E=$._isTextLabel(e,o)?null:d.getTextString().length;t.TextUtils.fitText(d,S,f.h,b,E)&&(b.removeChild(d),o.setSliceLabel(d))}null!=o.getSliceLabel()&&o.setNoOutsideFeeler()}}},$._layoutOutsideLabelsAndFeelers=function(t){var e=[],n=[],i=$._generateInitialLayout(t);e=i[0],n=i[1];var r=$._refineInitialLayout(t,e,$._LEFT_SIDE_LABELS),o=$._refineInitialLayout(t,n,$._RIGHT_SIDE_LABELS);r==$._HALF_COLLISION&&o!=$._NO_COLLISION&&$._columnLabels(t,e,!0,!0,!0),r!=$._NO_COLLISION&&o==$._HALF_COLLISION&&$._columnLabels(t,n,!1,!0,!0),$._setLabelsAndFeelers(t,e,$._LEFT_SIDE_LABELS),$._setLabelsAndFeelers(t,n,$._RIGHT_SIDE_LABELS)},$._createLabel=function(e,n){var i=e.getPieChart(),r=i.getCtx(),o=n?new t.OutputText(r):new t.MultilineText(r),a=i.getOptions().styleDefaults,s=[a.dataLabelStyle,new t.CSSStyle(a.sliceLabelStyle)],l=F.getDataItem(i.chart,e.getSeriesIndex(),0);l&&s.push(new t.CSSStyle(l.labelStyle));var u=t.CSSStyle.mergeStyles(s),h=null!=u.getStyle("color");if(!n||h&&!t.Agent.isHighContrast())h||u.setStyle("color",a._defaultSliceLabelColor);else{var c=t.ColorUtils.getContrastingTextColor(e.getFillColor());u.setStyle("color",c)}o.setCSSStyle(u);var d=$.generateSliceLabelString(e,a.sliceLabelType);return o.setTextString(d),e.setSliceLabelString(d),o},$.createPieCenter=function(e){var n=e.getOptions(),i=e.getCtx(),r=$.getPieCenterOptions(n),o=r.label,a=r.renderer,s=e.getLabelPosition(),l=n.tooltip,u=l?l.renderer:null,h=e.getCenter(),c=e.getInnerRadius();if(o||a){var d=e.getRadiusX();c=c>0?c:"outsideSlice"==s?.9*d:.5*d;var p=c*Math.sqrt(2);if(o){var g=new t.MultilineText(i),f=r.labelStyle;if(g.setCSSStyle(f),"number"==typeof o&&(o=K.formatValue(i,r,o,o,o,0)),g.setTextString(o),t.TextUtils.fitText(g,p,p,e)){var _=g.getDimensions();g.setY(h.y-_.h/2),g.setX(h.x),g.alignCenter(),g.isTruncated()&&!u&&e.chart.getEventManager().associate(g,new t.SimpleObjPeer(g.getTextString())),e.addChild(g)}}if(u){var m=new t.Circle(i,h.x,h.y,c);m.setInvisibleFill(),e.addChild(m);var v=e.getCtx().getTooltipManager();e.chart.getEventManager().associate(m,new t.CustomDatatipPeer(v,u,"#4b4b4b",{component:n._widgetConstructor,label:o}))}if(a){var y={outerBounds:{x:h.x-c,y:h.y-c,width:2*c,height:2*c},innerBounds:{x:h.x-p/2,y:h.y-p/2,width:p,height:p},label:o,component:n._widgetConstructor},S=i.getContainer(),C=e.chart.pieCenterDiv;C&&S.removeChild(C);var b=a(y);if(!b)return;var E=i.createOverlayDiv();E.appendChild(b),e.chart.pieCenterDiv=E,S.appendChild(E);var T=i.getOverlayAttachedCallback();T&&T(E)}}},$.generateSliceLabelString=function(t,e){var n,i=$.getDefaultSliceLabelString(t,e),r=t.getPieChart().getOptions().dataLabel;if(r){var o=F.getDataContext(t._chart,t.getSeriesIndex(),0);if(o.label=i,n=r(o),"number"==typeof n){var a=K.getValueFormat(t.getPieChart().chart,"label");n=K.formatValue(t.getPieChart().getCtx(),a,n)}}return n?n:i},$.getDefaultSliceLabelString=function(t,e){var n=t.getPieChart(),i=t.getCustomLabel(),r=K.getValueFormat(n.chart,"label");if(null!=i)return"number"==typeof i?K.formatValue(n.getCtx(),r,i):i;var o=t.getValue(),a=n.getTotalValue(),s=0==a?0:o/a,l=s<.01?3:s<.1?2:s<1?1:0;2*n.getRadiusX()<150&&(l=Math.max(l-1,0));var u=n.getCtx().getNumberConverter({style:"percent",maximumFractionDigits:l,minimumFractionDigits:l}),h="";u&&u.getAsString?h=u.getAsString(s):u&&u.format?h=u.format(s):(s*=100,h=K.formatValue(n.getCtx(),{},s,null,null,100==s?1:Math.pow(10,-1*l))+"%");var c=K.formatValue(n.getCtx(),r,o),d=t.getSeriesLabel();return"percent"==e?h:"number"==e?c:"text"==e?d:"textAndPercent"==e?d+", "+h:null},$._refineInitialLayout=function(t,e,n){if(e&&e.length>0){for(var i,r=t.__getFrame().y,o=!1,a=!1,s=!1,l=0,u=!1,h=u,c=!1,d=n==$._LEFT_SIDE_LABELS,p=0;p<e.length;p++)i=e[p],h=u,i.getPosition()>90&&(u=!0),l=i.getY()+i.getHeight(),c=r-i.getY()>$._COLLISION_MARGIN,c&&(u?u&&!h?a=!0:s=!0:o=!0),l>r&&(r=l);return o&&s||a?($._columnLabels(t,e,d,!0,!0),$._ALL_COLLISION):o?($._columnLabels(t,e,d,!0,!1),$._HALF_COLLISION):s?($._columnLabels(t,e,d,!1,!0),$._HALF_COLLISION):$._NO_COLLISION}},$._setLabelsAndFeelers=function(t,e,n){if(!(null==e||e.length<=0)){var i,r,o,a,s,l=n==$._LEFT_SIDE_LABELS,u=t.__getFrame(),h=1/0;for(i=0;i<e.length;i++)if(a=e[i],r=a.getSlice(),a.hasFeeler()){s=$._calculateFeeler(a,r,l);var c=$.getMaxLabelWidth(t,a.getX(),l);if(a.getWidth()-s>=c||0==a.getWidth()){a.setHasFeeler(!1);continue}h=Math.min(h,s)}else r.setNoOutsideFeeler();for(i=0;i<e.length;i++)a=e[i],r=a.getSlice(),o=a.getSliceLabel(),a.hasFeeler()&&(l?a.setX(a.getX()+h):a.setX(a.getX()-h),$._calculateFeeler(a,r,l),o.setMaxLines(1)),o.setY(a.getY()),o.setX(a.getX()),a.getY()<u.y||a.getY()+a.getHeight()>u.y+u.h?(r.setSliceLabel(null),r.setNoOutsideFeeler()):($._truncateSliceLabel(t,r,a,l),0==a.getWidth()||0==a.getHeight()?(r.setSliceLabel(null),r.setNoOutsideFeeler()):r.setSliceLabel(o))}},$._calculateFeeler=function(e,n,i){var r,o=e.getX(),a=e.getY()+e.getHeight()*$._LABEL_TO_FEELER_OFFSET,s=$._FEELER_HORIZ_MINSIZE*n.getRadiusX();i?(o+=$._LABEL_TO_FEELER_DISTANCE,
r=o+s):(o-=$._LABEL_TO_FEELER_DISTANCE,r=o-s);var l={x:0,y:0},u={x:r,y:a},h={x:o,y:a},c=e.getAngle(),d=$._adjustForDepth(c,n.getDepth());l=q.reflectAngleOverYAxis(c,n.getCenter().x,n.getCenter().y+d,n.getRadiusX(),n.getRadiusY());var p=t.Math.degreesToRads(e.getPosition()),g=Math.abs(Math.atan2(u.x-l.x,l.y-u.y)),f=(l.y-u.y)*Math.tan(p);return(p>Math.PI/2&&g>Math.PI/2&&g<p||p<Math.PI/2&&g<Math.PI/2&&g>p)&&(i?u.x=l.x-f:u.x=l.x+f),n.setOutsideFeelerPoints(l,u,h),Math.abs(h.x-u.x)-s},$._adjustForDepth=function(t,e){var n=0,i=189,r=351;return t>i&&t<r&&(n=e),n},$._getMiddleLabel=function(t){for(var e=91,n=-1,i=0;i<t.length;i++){var r=t[i].getPosition();Math.abs(r-90)<e&&(e=Math.abs(r-90),n=i)}return n},$._setOptimalLabelPosition=function(e,n,i,r){n.setX(i);var o=e.getRadiusY()*(1+$._FEELER_RAD_MINSIZE),a=t.Math.degreesToRads(n.getPosition()),s=o*Math.cos(a),l=$._adjustForDepth(n.getAngle(),e.getDepth()),u=e.getCenter().y-s-n.getHeight()*$._LABEL_TO_FEELER_OFFSET+l;n.setY(n.boundY(u))},$._getRadFeelerAngle=function(t,e,n){var i=t.getSlice(),r=i.getCenter(),o=t.getAngle(),a=$._adjustForDepth(o,i.getDepth()),s=q.reflectAngleOverYAxis(o,r.x,r.y+a,i.getRadiusX(),i.getRadiusY());return Math.atan2(Math.abs(e-s.x),s.y-n)},$._columnLabels=function(e,n,i,r,o){var a,s,l,u,h=e.__getFrame(),c=h.y,d=h.y+h.h,p=0,g=e.getCenter().x,f=e.getRadiusX()*(1+$._FEELER_RAD_MINSIZE+$._FEELER_HORIZ_MINSIZE);for(i?(g-=f,u=g+e.getRadiusX()*$._FEELER_HORIZ_MINSIZE):(g+=f,u=g-e.getRadiusX()*$._FEELER_HORIZ_MINSIZE),a=0;a<n.length;a++)s=n[a],p=t.Math.degreesToRads(s.getPosition()),l=$._getRadFeelerAngle(s,u,c),l-p>.45*Math.PI||$._skipSliceLabel(e,s.getSlice())?(n.splice(a,1),a--):(n[a].setMinY(c),c+=n[a].getHeight());for(a=n.length-1;a>=0;a--)s=n[a],p=t.Math.degreesToRads(s.getPosition()),l=$._getRadFeelerAngle(s,u,d),p-l>.45*Math.PI||$._skipSliceLabel(e,s.getSlice())?n.splice(a,1):(d-=n[a].getHeight(),n[a].setMaxY(d));if(0!=n.length){var _=$._getMiddleLabel(n),m=n[_];r&&!o&&m.getMinY()+m.getHeight()>e.getCenter().y&&(o=!0),o&&!r&&m.getMaxY()<e.getCenter().y&&(r=!0);var v=m.getPosition();(o&&r||v>90&&o||v<=90&&r)&&($._setOptimalLabelPosition(e,m,g,i),m.setHasFeeler(!0));var y,S,C=m.getY(),b=m.getY()+m.getHeight();if(r)for(a=_-1;a>=0;a--)s=n[a],S=s.getHeight(),$._setOptimalLabelPosition(e,s,g,i),s.setHasFeeler(!0),y=s.getY(),y+S<C?C=y:C-=S,s.setY(C);if(o)for(a=_+1;a<n.length;a++)s=n[a],S=s.getHeight(),$._setOptimalLabelPosition(e,s,g,i),s.setHasFeeler(!0),y=s.getY(),y>b?b=y+S:b+=S,s.setY(b-S)}},$._truncateSliceLabel=function(t,e,n,i){var r,o=n.getSliceLabel(),a=o.getCSSStyle(),s=0,l=t.getNumChildren(),u=!1;t.contains(o)||(t.addChild(o),u=!0),o.setCSSStyle(a);var h=e.getSliceLabelString();return o.setTextString(h),u&&t.removeChildAt(l),s=$.getMaxLabelWidth(t,n.getX(),i),r=$._getTextDimension(t,e,o,s,n.getInitialNumLines()),n.setWidth(r.x),n.getHeight()!=r.y&&(n.setHeight(r.y),!0)},$._generateInitialLayout=function(t){for(var e=new Array(2),n=[],i=[],r=t.__getSlices(),o=t.__getFrame(),a=0;a<r.length;a++){var s=r[a],l=t.getSeriesLabelPosition(s.getSeriesIndex());if(null==s.getSliceLabel()&&"none"!=l&&"center"!=l&&!$._skipSliceLabel(t,s)){var u=$._createLabel(s,!1),h=s.getAngleStart()+s.getAngleExtent()/2;h>360&&(h-=360),h<0&&(h+=360);var c=q.reflectAngleOverYAxis(h,t.getCenter().x,t.getCenter().y,t.getRadiusX()*$._OUTSIDE_LABEL_DISTANCE,t.getRadiusY()*$._OUTSIDE_LABEL_DISTANCE),d=h>=90&&h<270,p=$.getMaxLabelWidth(t,c.x,d),g=$._getTextDimension(t,s,u,p,$._MAX_LINES_PER_LABEL),f=15;h<180-f&&h>f?c.y-=1*g.y:h<f||h>360-f?(c.y-=.5*g.y,c.x+=.2*g.y):h>180-f&&h<180+f&&(c.y-=.5*g.y,c.x-=.2*g.y);var _=$._adjustForDepth(h,t.getDepth());if(c.y+=_,1==r.length&&(c.x-=g.x/2),!(c.y<o.y||c.y+g.y>o.y+o.h)){var m;h>=90&&h<270?(u.alignRight(),m=h-90,$._createLabelInfo(s,u,h,m,g,c,n)):(m=h<=90?Math.abs(90-h):180-(h-270),$._createLabelInfo(s,u,h,m,g,c,i))}}}return e[0]=n,e[1]=i,e},$._createLabelInfo=function(t,e,n,i,r,o,a){for(var s,l=-1,u=e,h=0;h<a.length;h++)if(s=a[h],s.getPosition()>i){l=h;break}l==-1&&(l=a.length),s=new Z,s.setPosition(i),s.setAngle(n),s.setSliceLabel(u),s.setSlice(t),s.setWidth(r.x),s.setHeight(r.y),s.setX(o.x),s.setY(o.y),a.splice(l,0,s)},$._getTextDimension=function(e,n,i,r,o){i.setMaxLines(o);var a=$._isTextLabel(e,n)?null:i.getTextString().length;if(t.TextUtils.fitText(i,r,1/0,e,a)){e.addChild(i);var s=i.getDimensions();return e.removeChild(i),{x:s.w,y:s.h}}return{x:0,y:0}},$._isTextLabel=function(t,e){var n=e.getCustomLabel(),i=null!=t.getOptions().dataLabel;return t.getOptions().styleDefaults.sliceLabelType.indexOf("text")!=-1||null!=n&&"number"!=typeof n||i},$.getMaxLabelWidth=function(t,e,n){var i=t.__getFrame();return n?e-i.x:i.x+i.w-e},$.getPieCenterOptions=function(e){var n=t.JsonUtils.clone(e.pieCenter),i=e.pieCenterLabel;if(i){var r=i.style,o=i.text;o&&(n.label=o),r&&(n.labelStyle=new t.CSSStyle(r))}return n},$._skipSliceLabel=function(t,e){return e.getAngleExtent()<3&&F.getSeriesCount(t.chart)>120};var J=new Object;t.Obj.createSubclass(J,t.Obj),J._BUTTON_SIZE=16,J._BUTTON_PADDING=5,J._BUTTON_CORNER_DIST=4,J._BUTTON_OPACITY=.8,J._MOUSE_WHEEL_ZOOM_RATE_SLOW=.05,J._MOUSE_WHEEL_ZOOM_RATE_FAST=.2,J.render=function(t,e,n){if(J._renderBackground(t,e,n),F.hasInvalidData(t))J.renderEmptyText(t,e,n);else{W.isOverview(t)||(t.getOptions()._maxOverflowCoord=n.x+n.w,t.getOptions()._minOverflowCoord=n.x),J._addOuterGaps(t,n);var i=n.clone();J._renderTitles(t,e,n),J._adjustAvailSpace(n),tt.render(t,e,n),J._adjustAvailSpace(n);var r=J._prerenderHorizScrollbar(t,e,n),o=J._prerenderVertScrollbar(t,e,n);J._adjustAvailSpace(n),t.__setAxisSpace(n.clone()),Q.render(t,e,n),J._adjustAvailSpace(n),J._positionLegend(t.legend,n),t.__setPlotAreaSpace(n.clone()),J._setEventHandlers(t),J._renderScrollbars(t,r,o),J._updateTitles(t,e,i,n),J._renderPlotArea(t,e,n),W.isPolar(t)&&e.addChild(t.yAxis),J._renderDragButtons(t,e)}},J._setEventHandlers=function(e){var n=e.getOptions(),i=e.getEventManager();if(W.hasAxes(e)&&!W.isOverview(e)){var r,o,a=new t.Rectangle(0,0,e.getWidth(),e.getHeight()),s=e.__getPlotAreaSpace(),l=e.__getAxisSpace(),u=new t.Rectangle(s.x,l.y,s.w,l.h),h=new t.Rectangle(l.x,s.y,l.w,s.h),c=new t.SolidFill(n.styleDefaults.marqueeColor),d=new t.SolidStroke(n.styleDefaults.marqueeBorderColor);if(H.isScrollable(e)){var p=H.isDelayedScroll(e)?J._MOUSE_WHEEL_ZOOM_RATE_FAST:J._MOUSE_WHEEL_ZOOM_RATE_SLOW;if(o=new t.PanZoomHandler(e,s,a,p),o.setPanCursor(n._resources.panCursorUp,n._resources.panCursorDown),i.setPanZoomHandler(o),H.isZoomable(e)){var g=H.getZoomDirection(e);r=W.isHorizontal(e)||"y"==g?new t.MarqueeHandler(e,s,a,c,d,(!1),(!0),null,h):W.isBLAC(e)||"x"==g?new t.MarqueeHandler(e,s,a,c,d,(!0),(!1),u,null):new t.MarqueeHandler(e,s,a,c,d,(!0),(!0),u,h),i.setMarqueeZoomHandler(r)}}"multiple"==n.selectionMode&&(r=new t.MarqueeHandler(e,s,a,c,d,(!0),(!0),u,h),i.setMarqueeSelectHandler(r))}},J.rerenderAxisAndPlotArea=function(t,e){if(!F.hasInvalidData(t)){var n=t.__getAxisSpace().clone(),i=t.getSelectionHandler();if(i)var r=i.getSelectedIds();var o=t.__cacheChartFocus();t.__cleanUpAxisAndPlotArea(),Q.render(t,e,n),J._adjustAvailSpace(n),t.__setPlotAreaSpace(n.clone()),J._renderPlotArea(t,e,n),i&&i.processInitialSelections(r,t.getChartObjPeers()),t.getEventManager().autoToggleZoomButton(),J.positionDragButtons(t),t.highlight(V.getHighlightedCategories(t)),t.__restoreChartFocus(o)}},J._renderBackground=function(e,n,i){var r=new t.Rect(e.getCtx(),i.x,i.y,i.w,i.h);r.setInvisibleFill(),n.addChild(r)},J._addOuterGaps=function(t,e){var n=t.getOptions(),i=s.getGapWidth(t,n.layout.outerGapWidth),r=s.getGapHeight(t,n.layout.outerGapHeight);("none"==n.styleDefaults.padding||W.isStandalonePlotArea(t)||W.isStandaloneXAxis(t)||W.isStandaloneYAxis(t)||W.isStandaloneY2Axis(t))&&(i=Math.min(i,1),r=Math.min(r,1)),e.x+=i,e.w-=2*i,e.y+=r,e.h-=2*r},J._renderTitles=function(e,n,i){var r=e.getOptions();if(r.title.text){var o,a,l=Y.createText(e.getEventManager(),n,r.title.text,r.title.style,i.x,i.y,i.w,i.h),u=null!=r.title.hAlign?r.title.hAlign:r.title.halign,h="plotArea"==u.substring(0,8);if(l?(a=l.getDimensions(),o=a.h,l.setAriaProperty("hidden",null)):(o=0,a=new t.Rectangle(0,0,0,0)),r.subtitle.text){var c=new t.OutputText(e.getCtx(),r.subtitle.text,i.x,i.y);if(c){c.setCSSStyle(r.subtitle.style),n.addChild(c);var d=c.measureDimensions(),p=s.getGapWidth(e,r.layout.titleSubtitleGapWidth),g=a.w+p+d.w;if(g>i.w||h)p=s.getGapHeight(e,r.layout.titleSubtitleGapHeight),c.setY(i.y+o+p),t.TextUtils.fitText(c,i.w,i.h,n)&&(d=c.measureDimensions(),o+=d.h+p,t.Agent.isRightToLeft(e.getCtx())&&(c&&c.setX(i.w-d.w),l&&l.setX(i.w-a.w)));else{var f=a.h-d.h;c.setY(f+i.y),l&&(t.LayoutUtils.align(i,u,l,g),t.Agent.isRightToLeft(e.getCtx())?(c.setX(l.getX()),l&&l.setX(l.getX()+d.w+p)):c.setX(l.getX()+g-d.w))}c.setAriaProperty("hidden",null),e.getEventManager().associate(c,new t.SimpleObjPeer(c.getUntruncatedTextString()))}}else t.LayoutUtils.align(i,u,l,a.w);h&&(e.getCache().putToCache("title",l),e.getCache().putToCache("subtitle",c));var _="on"==r.titleSeparator.rendered?r.layout.titleSeparatorGap:r.layout.titlePlotAreaGap;if(i.y+=o+s.getGapHeight(e,_),i.h-=o+s.getGapHeight(e,_),"on"==r.titleSeparator.rendered){var m=new t.Line(e.getCtx(),i.x,i.y,i.x+i.w,i.y),v=new t.Line(e.getCtx(),i.x,i.y+1,i.x+i.w,i.y+1);m.setSolidStroke(r.titleSeparator.upperColor),v.setSolidStroke(r.titleSeparator.lowerColor),n.addChild(m),n.addChild(v);var y=2+s.getGapHeight(e,r.layout.titlePlotAreaGap);i.y+=y,i.h-=y}}if(r.footnote.text){var S=Y.createText(e.getEventManager(),n,r.footnote.text,r.footnote.style,i.x,0,i.w,i.h),C=null!=r.footnote.hAlign?r.footnote.hAlign:r.footnote.halign,b="plotArea"==C.substring(0,8);if(S){var E=S.getDimensions();S.setY(i.y+i.h-E.h),i.h-=E.h+s.getGapHeight(e,r.layout.footnoteGap),t.LayoutUtils.align(i,C,S,E.w),S.setAriaProperty("hidden",null)}b&&e.getCache().putToCache("footnote",S)}},J._updateTitles=function(t,e,n,i){var r=t.getOptions(),o=null!=r.title.hAlign?r.title.hAlign:r.title.halign,a=null!=r.footnote.hAlign?r.footnote.hAlign:r.footnote.halign,s=r.title.text&&"plotArea"==o.substring(0,8),l=r.footnote.text&&"plotArea"==a.substring(0,8);if(n.x=i.x,n.w=i.w,s){var u,h=t.getCache().getFromCache("title"),c=t.getCache().getFromCache("subtitle"),d=h.getDimensions();J._alignTextToPlotArea(e,n,o,h,d.w),c&&(u=c.getDimensions(),J._alignTextToPlotArea(e,n,o,c,u.w))}if(l){var p=t.getCache().getFromCache("footnote"),g=p.getDimensions();J._alignTextToPlotArea(e,n,a,p,g.w)}},J._alignTextToPlotArea=function(e,n,i,r,o){t.TextUtils.fitText(r,n.w,n.h,e)&&("plotAreaStart"==i?t.LayoutUtils.align(n,"start",r,o):"plotAreaCenter"==i?t.LayoutUtils.align(n,"center",r,o):"plotAreaEnd"==i&&t.LayoutUtils.align(n,"end",r,o))},J._renderPlotArea=function(e,n,i){if(W.hasAxes(e)){var r=new t.Container(e.getCtx());r.setTranslate(i.x,i.y),n.addChild(r),e.setPlotArea(r);var o=new t.Rectangle(0,0,i.w,i.h);et.render(e,r,o)}else if(W.isPie(e)){var a=new T(e,i);a.__getSlices().length>0?(n.addChild(a),e.setPlotArea(a),a.render()):J.renderEmptyText(e,n,i)}else W.isFunnel(e)?nt.render(e,n,i):W.isPyramid(e)&&it.render(e,n,i);i.w=0,i.h=0},J.renderEmptyText=function(e,n,i){var r=e.getOptions();if(F.hasInvalidTimeData(e)&&F.hasData(e))var o=t.Bundle.getTranslation(r,"labelInvalidData",t.Bundle.UTIL_PREFIX,"INVALID_DATA");else o=r.emptyText,o||(o=t.Bundle.getTranslation(r,"labelNoData",t.Bundle.UTIL_PREFIX,"NO_DATA"));t.TextUtils.renderEmptyText(n,o,new t.Rectangle(i.x,i.y,i.w,i.h),e.getEventManager(),r._statusMessageStyle)},J._prerenderHorizScrollbar=function(e,n,i){var r=i.w,o=0;return H.isScrollable(e)&&W.isHorizScrollbarSupported(e)?V.isOverviewRendered(e)?(o=Math.min(V.getOverviewHeight(e),i.h),o>0&&(e.overview=new v(e),n.addChild(e.overview),t.LayoutUtils.position(i,"bottom",e.overview,r,o,10))):(o=e.getOptions().styleDefaults._scrollbarHeight,e.xScrollbar=new t.SimpleScrollbar(e.getCtx(),e.processEvent,e),n.addChild(e.xScrollbar),t.LayoutUtils.position(i,"bottom",e.xScrollbar,r,o,8),e.overview=null):e.overview=null,new t.Dimension(r,o)},J._prerenderVertScrollbar=function(e,n,i){var r=0,o=i.h;if(H.isScrollable(e)&&W.isVertScrollbarSupported(e)){r=e.getOptions().styleDefaults._scrollbarHeight;var a=new t.SimpleScrollbar(e.getCtx(),e.processEvent,e);n.addChild(a),t.LayoutUtils.position(i,t.Agent.isRightToLeft(e.getCtx())?"right":"left",a,r,o,8),W.isHorizontal(e)?e.xScrollbar=a:e.yScrollbar=a}return new t.Dimension(r,o)},J._renderScrollbars=function(e,n,i){var r=e.getOptions(),o={color:r.styleDefaults._scrollbarHandleColor,backgroundColor:r.styleDefaults._scrollbarTrackColor},a=e.__getPlotAreaSpace();if(e.xScrollbar&&(o.min=e.xAxis.getLinearGlobalMin(),o.max=e.xAxis.getLinearGlobalMax(),W.isHorizontal(e)?(o.isHorizontal=!1,o.isReversed=!1,e.xScrollbar.setTranslateY(a.y),e.xScrollbar.render(o,i.w,a.h)):(o.isHorizontal=!0,o.isReversed=t.Agent.isRightToLeft(e.getCtx()),e.xScrollbar.setTranslateX(a.x),e.xScrollbar.render(o,a.w,n.h)),e.xScrollbar.setViewportRange(e.xAxis.getLinearViewportMin(),e.xAxis.getLinearViewportMax())),e.yScrollbar&&(o.min=e.yAxis.getLinearGlobalMin(),o.max=e.yAxis.getLinearGlobalMax(),o.isHorizontal=!1,o.isReversed=!0,e.yScrollbar.setTranslateY(a.y),e.yScrollbar.render(o,i.w,a.h),e.yScrollbar.setViewportRange(e.yAxis.getLinearViewportMin(),e.yAxis.getLinearViewportMax())),e.overview){var s={startTime:e.xAxis.getLinearGlobalMin(),endTime:e.xAxis.getLinearGlobalMax(),viewportStartTime:e.xAxis.getLinearViewportMin(),viewportEndTime:e.xAxis.getLinearViewportMax(),minimumWindowSize:e.xAxis.getInfo().getMinimumExtent(),chart:t.JsonUtils.clone(r)};H.isZoomable(e)||(s.featuresOff="zoom"),s.chart._minOverflowCoord=r._minOverflowCoord-a.x,s.chart._maxOverflowCoord=r._maxOverflowCoord-a.x,e.overview.setTranslateX(a.x),e.overview.render(s,a.w,n.h),e.overview.setViewportRange(e.xAxis.getLinearViewportMin(),e.xAxis.getLinearViewportMax())}},J._positionLegend=function(t,e){if(t){var n=t.getDimensions(),i=t.getOptions().orientation;"vertical"==i&&n.h<=e.h?t.setTranslateY(Math.round(e.y+e.h/2-n.h/2)):"horizontal"==i&&n.w<=e.w&&t.setTranslateX(Math.round(e.x+e.w/2-n.w/2))}},J._renderDragButtons=function(e,i){if(W.hasAxes(e)&&!W.isOverview(e)){var r=e.getOptions(),o=e.getEventManager(),a=r.dragMode;if("user"!=a)return void("pan"==a?o.setDragMode(n.DRAG_MODE_PAN):"zoom"==a?o.setDragMode(n.DRAG_MODE_ZOOM):"select"==a?o.setDragMode(n.DRAG_MODE_SELECT):o.setDragMode(n.DRAG_MODE_OFF));var s=t.Agent.isTouchDevice(),l=H.isScrollable(e);e.dragButtons=new t.Container(e.getCtx());var u,h,c=r._resources;"multiple"==r.selectionMode&&(s||l)&&(h=l&&(s||H.isZoomable(e))?"end":"solo",o.selectButton=J._createDragButton(e,e.dragButtons,c.selectUp,c.selectDown,o.onSelectButtonClick,o,h),u=t.Bundle.getTranslation(r,"tooltipSelect",t.Bundle.CHART_PREFIX,"MARQUEE_SELECT"),o.selectButton.setTooltip(u),o.associate(o.selectButton,o.selectButton)),l&&(h=null==o.selectButton?"solo":"start",s?(o.panButton=J._createDragButton(e,e.dragButtons,c.panUp,c.panDown,o.onPanButtonClick,o,h),u=t.Bundle.getTranslation(r,"tooltipPan",t.Bundle.CHART_PREFIX,"PAN"),o.panButton.setTooltip(u),o.associate(o.panButton,o.panButton)):H.isZoomable(e)&&W.isScatterBubble(e)&&(o.zoomButton=J._createDragButton(e,e.dragButtons,c.zoomUp,c.zoomDown,o.onZoomButtonClick,o,h),u=t.Bundle.getTranslation(r,"tooltipZoom",t.Bundle.CHART_PREFIX,"MARQUEE_ZOOM"),o.zoomButton.setTooltip(u),o.associate(o.zoomButton,o.zoomButton))),J.positionDragButtons(e),o.setDragMode(null),e.dragButtons.getNumChildren()>0&&(e.addChild(e.dragButtons),s?l&&(o.panButton.setToggled(!0),o.onPanButtonClick(null)):e.hideDragButtons(),e.dragButtons.setCursor("default"))}},J._positionDragButton=function(e,n,i){var r;t.Agent.isRightToLeft(e.getCtx())?(r=i.x+J._BUTTON_PADDING,i.x+=J._BUTTON_SIZE+2*J._BUTTON_PADDING):r=i.x+i.w-J._BUTTON_SIZE-J._BUTTON_PADDING,i.w-=J._BUTTON_SIZE+2*J._BUTTON_PADDING,n.setTranslate(r,i.y+J._BUTTON_PADDING)},J.positionDragButtons=function(t){var e=t.__getPlotAreaSpace().clone();e.x+=J._BUTTON_CORNER_DIST,e.w-=2*J._BUTTON_CORNER_DIST,e.y+=J._BUTTON_CORNER_DIST;var n=t.getEventManager();n.selectButton&&J._positionDragButton(t,n.selectButton,e),n.panButton&&J._positionDragButton(t,n.panButton,e),n.zoomButton&&J._positionDragButton(t,n.zoomButton,e)},J._createDragButtonBackground=function(e,n){var i=2,r=2,o=t.Agent.isRightToLeft(e);"start"==n?o?i=0:r=0:"end"==n&&(o?r=0:i=0);var a=i,s=r,l=-J._BUTTON_PADDING,u=J._BUTTON_SIZE+2*J._BUTTON_PADDING,h=t.PathUtils.roundedRectangle(l,l,u,u,a,r,s,i),c=new t.Path(e,h);return t.Agent.getDevicePixelRatio()>1?(c.setSolidStroke("#D8DEE3",1,1),c.setPixelHinting(!0)):c.setSolidStroke("#B8BDC1",1,1),c},J._createDragButton=function(e,n,i,r,o,a,s){var l=e.getCtx(),u=J._createDragButtonBackground(l,s);u.setSolidFill("#FFFFFF",J._BUTTON_OPACITY),u.addChild(new t.Image(l,i,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var h=J._createDragButtonBackground(l,s);h.setSolidFill("#E2E3E4",J._BUTTON_OPACITY),h.addChild(new t.Image(l,i,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var c=J._createDragButtonBackground(l,s);c.setFill(new t.LinearGradientFill(90,["#0527CE","#0586F0"],[J._BUTTON_OPACITY,J._BUTTON_OPACITY])),c.addChild(new t.Image(l,r,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var d=J._createDragButtonBackground(l,s);d.setSolidFill("#0586F0",J._BUTTON_OPACITY),d.addChild(new t.Image(l,r,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var p=new t.Button(l,u,h,c,null,null,o,a);if(p.setOverDownState(d),p.setToggleEnabled(!0),n.addChild(p),p.addEvtListener(t.MouseEvent.MOUSEDOWN,function(t){t.stopPropagation()}),t.Agent.isTouchDevice()){var g,f=t.Agent.isRightToLeft(l),_=2*J._BUTTON_PADDING;g="solo"==s?new t.Rect(l,(-_),(-_),J._BUTTON_SIZE+2*_,J._BUTTON_SIZE+2*_):"start"==s&&!f||"end"==s&&f?new t.Rect(l,(-_),(-_),J._BUTTON_SIZE+1.5*_,J._BUTTON_SIZE+2*_):new t.Rect(l,-.5*_,(-_),J._BUTTON_SIZE+1.5*_,J._BUTTON_SIZE+2*_),g.setInvisibleFill(),p.addChild(g)}return p},J._adjustAvailSpace=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y),t.w=Math.round(t.w),t.h=Math.round(t.h)},J.renderDataCursor=function(t){var e=null,n=t.getOptions(),i=t.getEventManager();if(K.isDataCursorEnabled(t)){e=new C(t.getCtx(),n.styleDefaults.dataCursor,W.isHorizontal(t)),e.setBehavior(K.getDataCursorBehavior(t)),t.addChild(e);var r=new l(t,e);i.setDataCursorHandler(r),t.positionDataCursor(n.dataCursorPosition)}else i.setDataCursorHandler(null);return e};var Q=new Object;t.Obj.createSubclass(Q,t.Obj),Q.render=function(t,e,n){W.hasAxes(t)&&(B.applyInitialZooming(t,n),W.isBubble(t)&&z.calcBubbleSizes(t,n),W.isPolar(t)?Q._renderPolar(t,e,n):Q._renderCartesian(t,e,n))},Q._renderCartesian=function(e,n,i){var r=e.getOptions(),o=W.isHorizontal(e),a=W.isSplitDualY(e),s=i.clone(),l=B.getYAxisPosition(e),u=B.getY2AxisPosition(e);Q._addAxisGaps(e,i),a&&l==u&&(r.yAxis._skipHighestTick=o,r.y2Axis._skipHighestTick=!o);var h=Q._createYAxis(e,n,i,s),c=Q._createY2Axis(e,n,i,s),d=!a&&"on"==r.y2Axis.alignTickMarks&&null==r.y2Axis.step;d&&h&&c&&(Q._alignYAxes(h,c),o||(c.dim=Q._getPreferredSize(e,c.axis,e.y2Axis,c.options,"y2",i,s)));var p=B.getTickLabelGapSize(e,"y"),g=B.getTickLabelGapSize(e,"y2");if(a&&l==u){var f;o?(f=Math.max(h.dim.h+p,c.dim.h+g),h.dim.h=f-p,c.dim.h=f-g):(f=Math.max(h.dim.w+p,c.dim.w+g),h.dim.w=f-p,c.dim.w=f-g),Q._positionAxis(i.clone(),h,p),Q._positionAxis(i,c,g)}else Q._positionAxis(i,h,p),Q._positionAxis(i,c,g);var _=F.getGroupCount(e);if("pixel"==V.getBarSpacing(e)&&W.isBar(e)&&i.w>_){var m=Math.floor(i.w/_)*_;i.x+=(i.w-m)/2,i.w=m}var v=Q._createXAxis(e,n,i,s);v.axis.render(v.options,v.dim.w,v.dim.h),Q._positionAxis(i,v,B.getTickLabelGapSize(e,"x"));var y=V.getSplitterPosition(e),S=t.Agent.isRightToLeft(e.getCtx()),C=Q._getSplitAvailSpace(i,y,o,o&&S),b=Q._getSplitAvailSpace(i,1-y,o,!o||!S);o?(h&&(h.axis.setTranslateX(i.x),a?h.axis.render(h.options,C.w,h.dim.h,C.x,0):h.axis.render(h.options,i.w,h.dim.h)),d&&h&&c&&Q._alignYAxes(h,c),c&&(c.axis.setTranslateX(i.x),a?c.axis.render(c.options,b.w,c.dim.h,b.x,0):c.axis.render(c.options,i.w,c.dim.h)),Q._setOverflow(i,h,v)):(h&&(a?h.axis.render(h.options,h.dim.w,C.h,0,C.y):h.axis.render(h.options,h.dim.w,i.h)),d&&h&&c&&Q._alignYAxes(h,c),c&&(a?c.axis.render(c.options,c.dim.w,b.h,0,b.y):c.axis.render(c.options,c.dim.w,i.h)),Q._setOverflow(i,v,h,c)),Q._storeAxes(e,v,h,c)},Q._renderPolar=function(t,e,n){var i=Q._createXAxis(t,e,n,n);i.axis.setTranslateX(n.x),i.axis.setTranslateY(n.y),i.axis.render(i.options,n.w,n.h);var r=Q._createYAxis(t,e,n,n);r.axis.setTranslateX(n.x),r.axis.setTranslateY(n.y),r.axis.render(r.options,n.w,n.h),Q._storeAxes(t,i,r)},Q._createXAxis=function(e,n,i,r){var o=e.getOptions(),a=B.getXAxisPosition(e),s=t.JsonUtils.clone(o.xAxis);s.position=a,s.isStandalone=W.isStandaloneXAxis(e),s.groupSeparators=o.styleDefaults.groupSeparators,Q._addCommonAxisAttributes(s,"x",e),s.groups=o.groups,s._groupWidthRatios=B.getGroupWidthRatios(e),s.timeAxisType=B.getTimeAxisType(e),s._environment=o._environment,s._locale=o._locale,s.drilling=o.drilling,s._isGroupAxis=B.hasGroupAxis(e);var l="top"==a||"bottom"==a,u=B.isGridShifted(e);if("tangential"==a&&B.hasGroupAxis(e))u?(s.startGroupOffset=.5,s.endGroupOffset=.5):s.endGroupOffset=1;else{var h=B.getAxisOffset(e);if(s.startGroupOffset=h,s.endGroupOffset=h,W.hasUncenteredSeries(e)&&(s.endGroupOffset+=1),!H.isScrollable(e)&&!W.isOverview(e)){var d=F.getGroupCount(e);B.isAxisRendered(e,"y")&&B.isTickLabelInside(e,"y")&&(s[(l?"start":"end")+"GroupOffset"]+=.04*d),B.isAxisRendered(e,"y2")&&B.isTickLabelInside(e,"y2")&&(s[(l?"end":"start")+"GroupOffset"]+=.04*d)}}s.leftBuffer=l?i.x-r.x:0,s.rightBuffer=l?r.w+r.x-(i.w+i.x):0,s._renderGridAtLabels=!u||B.hasTimeAxis(e);var p=new c(e.getCtx(),e.processEvent,e);n.addChild(p);var g=Q._getPreferredSize(e,p,e.xAxis,s,"x",i,r);return s._minOverflowCoord=o._minOverflowCoord-i.x,s._maxOverflowCoord=o._maxOverflowCoord-i.x,{axis:p,options:s,dim:g}},Q._createYAxis=function(e,n,i,r){var o=e.getOptions();if(W.hasY2DataOnly(e))return null;var a=t.JsonUtils.clone(o.yAxis);a.position=B.getYAxisPosition(e),a.isStandalone=W.isStandaloneYAxis(e),Q._addCommonAxisAttributes(a,"y",e),Q._addCommonYAxisAttributes(a,e);var s=new c(e.getCtx(),e.processEvent,e);n.addChild(s);var l=Q._getPreferredSize(e,s,e.yAxis,a,"y",i,r);return Q._adjustYAxisForLabels(s,a,e,"y"),o.yAxis.min=a.min,o.yAxis.max=a.max,{axis:s,options:a,dim:l}},Q._createY2Axis=function(e,n,i,r){var o=e.getOptions();if(W.hasY2Data(e)){var a=t.JsonUtils.clone(o.y2Axis);a.position=B.getY2AxisPosition(e),a.isStandalone=W.isStandaloneY2Axis(e),Q._addCommonAxisAttributes(a,"y2",e),Q._addCommonYAxisAttributes(a,e);var s=new c(e.getCtx(),e.processEvent,e);n.addChild(s);var l=Q._getPreferredSize(e,s,e.y2Axis,a,"y2",i,r);return Q._adjustYAxisForLabels(s,a,e,"y2"),o.y2Axis.min=a.min,o.y2Axis.max=a.max,{axis:s,options:a,dim:l}}},Q._addCommonAxisAttributes=function(t,e,n){var i=n.getOptions();if(t.skin=i.skin,t.tickLabel.position=B.isTickLabelInside(n,e)?"inside":"outside",t.baselineScaling=B.getBaselineScaling(n,e),(B.isTickLabelInside(n,e)||"tangential"==t.position)&&(t._skipHighestTick=!0),t.zoomAndScroll=W.isPolar(n)?"off":i.zoomAndScroll,t._isOverview=W.isOverview(n),"x"!=e||!B.hasGroupAxis(n)){var r=F.getMinMaxValue(n,e);t.dataMin=null!=t.dataMin?t.dataMin:r.min,t.dataMax=null!=t.dataMax?t.dataMax:r.max}W.isPolar(n)&&(t.polarGridShape=B.isGridPolygonal(n)?"polygon":"circle",t._radius=n.getRadius()),t.dnd=i.dnd},Q._addCommonYAxisAttributes=function(e,n){if(e.timeAxisType="disabled",H.isLiveScroll(n)&&W.isBLAC(n)&&!W.isPolar(n)&&(e._continuousExtent="on"),e.isStandalone)e.leftBuffer=0,e.rightBuffer=0;else if(W.isSplitDualY(n))e.leftBuffer=1/0,e.rightBuffer=1/0;else{var i=t.Agent.isRightToLeft(n.getCtx());e.leftBuffer=i?0:t.Axis.MINIMUM_AXIS_BUFFER,e.rightBuffer=i?t.Axis.MINIMUM_AXIS_BUFFER:0}},Q._adjustYAxisForLabels=function(e,n,i,r){var o=i.getOptions();if(B.isYAdjustmentNeeded(i)){var a=o.styleDefaults.dataLabelStyle,s=o.styleDefaults.stackLabelStyle,l=e.getInfo(),u=V.isStackLabelRendered(i),h=t.TextUtils.getTextStringHeight(i.getCtx(),u?s:a),c=0;if("log"==n.scale){var d=e.getUnboundedValueAt(e.getUnboundedCoordAt(l.getDataMax())-h);c=d-l.getDataMax()}else{var p=1;W.isSplitDualY(i)&&(p="y"==r?V.getSplitterPosition(i):1-V.getSplitterPosition(i));var g=Math.abs(l.getEndCoord()-l.getStartCoord())*p;c=Math.abs(l.getViewportMax()-l.getViewportMin())/g*h}W.isHorizontal(i)&&(c*=4),l.getDataMin()-l.getGlobalMin()<c&&l.getDataMin()<0&&(n.dataMin-=c),l.getGlobalMax()-l.getDataMax()<c&&l.getDataMax()>0&&(n.dataMax+=c)}},Q._getPreferredSize=function(e,n,i,r,o,a,s){var l=r.isStandalone,u=r.position,h="top"==u||"bottom"==u,c=B.getTickLabelGapSize(e,o),d=r.maxSize,p=r.size,g=a.w,f=a.h;if("radial"==u||"tangential"==u)g=0,f=0;else if("off"==r.rendered)h?f=0:g=0;else if(l)h?f=a.h-c:g=a.w-c;else if(null!=p)h?f=V.getSizeInPixels(p,s.h)-c:g=V.getSizeInPixels(p,s.w)-c;else{if(!e.getOptions()._duringAnimation)return h?n.getPreferredSize(r,a.w,V.getSizeInPixels(d,s.h)-c):n.getPreferredSize(r,V.getSizeInPixels(d,s.w)-c,a.h);if(h){var _=t.Agent.isRightToLeft(e.getCtx());r._startOverflow=_?i.getRightOverflow():i.getLeftOverflow(),r._endOverflow=_?i.getLeftOverflow():i.getRightOverflow(),f=i.getHeight()}else g=i.getWidth()}return B.isYAdjustmentNeeded(e)&&n.getPreferredSize(r,g,f),new t.Dimension(g,f)},Q._addAxisGaps=function(t,e){var n=W.isHorizontal(t),i=B.getYAxisPosition(t),r=B.getY2AxisPosition(t),o=B.isAxisRendered(t,"x"),a=B.isAxisRendered(t,"y"),s=B.isAxisRendered(t,"y2"),l=t.getOptions().layout.verticalAxisGap;l*=n?B.getGapScalingFactor(t,"x"):Math.max(B.getGapScalingFactor(t,"y"),B.getGapScalingFactor(t,"y2")),l=Math.ceil(l),(!n||"top"==i&&a||"top"==r&&s)&&n||(e.y+=l,e.h-=l),(!n||"bottom"==i&&a||"bottom"==r&&s)&&(n||o)||(e.h-=l)},Q._positionAxis=function(e,n,i){n&&t.LayoutUtils.position(e,n.options.position,n.axis,n.dim.w,n.dim.h,i)},Q._alignYAxes=function(t,e){var n=t.axis.getInfo();if(n){var i=n.getMajorTickCount(),r=n.getMinorTickCount(),o=e.options;o._majorTickCount=i,o._minorTickCount=r}},Q._getSplitAvailSpace=function(t,e,n,i){var r=t.clone();return n?(r.w=t.w*e,r.x=i?t.w*(1-e):0):(r.h=t.h*e,r.y=i?t.h*(1-e):0),r},Q._setOverflow=function(t,e,n,i){if(e){var r=e.axis.getLeftOverflow(),o=e.axis.getRightOverflow();t.x+=r,t.w-=r+o,n&&n.axis.setTranslateX(n.axis.getTranslateX()+("left"==n.options.position?r:-o)),i&&i.axis.setTranslateX(i.axis.getTranslateX()+("left"==i.options.position?r:-o))}},Q._storeAxes=function(t,e,n,i){t.xAxis&&(t.xAxis.destroy(),t.removeChild(t.xAxis)),t.yAxis&&(t.yAxis.destroy(),t.removeChild(t.yAxis)),t.y2Axis&&(t.y2Axis.destroy(),t.removeChild(t.y2Axis)),t.xAxis=e.axis,t.yAxis=n?n.axis:null,t.y2Axis=i?i.axis:null};var tt=new Object;t.Obj.createSubclass(tt,t.Obj),tt._DEFAULT_LINE_WIDTH_WITH_MARKER=2,tt.render=function(e,n,i){var r=e.getOptions(),o=r.legend.position;if(!("off"==r.legend.rendered||"auto"==r.legend.rendered&&e.getOptionsCache().getFromCache("hasLargeSeriesCount"))){var a=t.JsonUtils.clone(r.legend);delete a.position,a.skin=r.skin,a.hideAndShowBehavior=H.getHideAndShowBehavior(e),a.hoverBehavior=H.getHoverBehavior(e),a.hoverBehaviorDelay=V.getHoverBehaviorDelay(e),a.hiddenCategories=V.getHiddenCategories(e),a.highlightedCategories=V.getHighlightedCategories(e),a.dnd=r.dnd,a._dropColor=r._dropColor,"auto"==o&&(o=i.w>=i.h?"end":"bottom");var l="top"==o||"bottom"==o;if(a.orientation=l?"horizontal":"vertical","start"==o&&(a.halign="end"),"start"!=o&&"end"!=o||(a.valign="middle"),"top"==o&&(a.valign="bottom"),"top"!=o&&"bottom"!=o||(a.halign="center"),tt._addLegendData(e,a),0!=a.sections.length){var u=t.Legend.newInstance(e.getCtx(),e.processEvent,e);null!=e.getId()&&u.setId(e.getId()+"legend"),n.addChild(u);var h;if(null!=a.size)h=l?new t.Dimension(i.w,V.getSizeInPixels(a.size,i.h)):new t.Dimension(V.getSizeInPixels(a.size,i.w),i.h);else{var c=l?i.w:V.getSizeInPixels(a.maxSize,i.w),d=l?V.getSizeInPixels(a.maxSize,i.h):i.h;h=u.getPreferredSize(a,c,d)}u.render(a,h.w,h.h);var p=l?s.getGapHeight(e,r.layout.legendGapHeight):s.getGapWidth(e,r.layout.legendGapWidth);t.LayoutUtils.position(i,o,u,h.w,h.h,p);var g=u.__getBounds(),f=u.localToStage(new t.Point(g.x,g.y));if(!W.isOverview(e)){var _=t.Agent.isRightToLeft(e.getCtx());"end"==o?_?r._minOverflowCoord=f.x+g.w+p/2:r._maxOverflowCoord=f.x-p/2:"start"==o&&(_?r._maxOverflowCoord=f.x-p/2:r._minOverflowCoord=f.x+g.w+p/2)}e.legend&&(e.legend.destroy(),n.removeChild(e.legend)),e.legend=u}}},tt._addLegendData=function(t,e){var n=tt._getSeriesItems(t,"vertical"==e.orientation);if(n.length>0){var i=e.seriesSection;i.items=n,e.sections.unshift(i),delete e.seriesSection}var r=tt._getRefObjItems(t);if(r.length>0){var o=e.referenceObjectSection;o.items=r,e.referenceObjectTitle&&(o.title=e.referenceObjectTitle),e.sections.push(o),delete e.referenceObjectSection}},tt._getSeriesItems=function(e,n){var i,r,o=[];if("pie"==e.getType()||"pyramid"==e.getType()||"funnel"==e.getType()){var a=X.getRenderedSeriesIndices(e);"pyramid"==e.getType()&&n&&(a=a.reverse());for(var s=0;s<a.length;s++){r=a[s];var l=F.getValue(e,r,0);l>=0&&null!=l&&(i=tt._createLegendItem(e,r),i&&o.push(i))}X.hasOtherSeries(e)&&(i={id:X.OTHER_SLICE_SERIES_ID,text:t.Bundle.getTranslation(e.getOptions(),"labelOther",t.Bundle.CHART_PREFIX,"LABEL_OTHER"),categoryVisibility:t.ArrayUtils.getIndex(V.getHiddenCategories(e),X.OTHER_SLICE_SERIES_ID)>=0?"hidden":"visible",symbolType:"marker",color:e.getOptions().styleDefaults.otherColor,borderColor:e.getOptions().styleDefaults.borderColor},o.push(i))}else{var u={},h={},c=F.getSeriesCount(e);for(r=0;r<c;r++)if(i=tt._createLegendItem(e,r)){var d=F.getStackCategory(e,r);F.isAssignedToY2(e,r)?h[d]?h[d].push(i):h[d]=[i]:u[d]?u[d].push(i):u[d]=[i]}var p=F.getStackCategories(e,null,!0),g=W.isStacked(e)&&W.isVertical(e)&&n;o=tt._getSeriesItemsForAxis(u,p.y,g,o),o=tt._getSeriesItemsForAxis(h,p.y2,g,o)}return o},tt._getSeriesItemsForAxis=function(t,e,n,i){for(var r,o=0;o<e.length;o++)r=t[e[o]],r&&(i=n?i.concat(r.reverse()):i.concat(r));return i},tt._createLegendItem=function(e,n){var i=F.getSeriesItem(e,n),r=e.getType(),o=V.getSeriesType(e,n),a=V.getLineType(e,n),s=i.displayInLegend;if(!i||"off"==s)return null;if("on"!=s&&(W.isFunnel(e)||W.isPyramid(e)||W.isStock(e)))return null;if("on"!=s&&!F.hasSeriesData(e,n))return null;var l=F.getSeriesLabel(e,n);if("on"!=s&&(!l||t.StringUtils.trim(l).length<=0))return null;var u={id:F.getSeries(e,n),text:l,categories:F.getCategories(e,n),categoryVisibility:V.isSeriesRendered(e,n)?"visible":"hidden",_dataContext:F.getDataContext(e,n,-1)};if("line"==o||"lineWithArea"==o||"scatter"==r||"bubble"==r)if(u.lineStyle=V.getLineStyle(e,n),u.lineWidth=V.getLineWidth(e,n),V.isMarkerDisplayed(e,n)){var h=V.getImageSource(e,n,null,null,"source");h?(u.symbolType="image",u.source=h):(u.symbolType="none"==a?"marker":"lineWithMarker","lineWithMarker"==u.symbolType&&(u.lineWidth=Math.min(tt._DEFAULT_LINE_WIDTH_WITH_MARKER,u.lineWidth)),u.markerShape=V.getMarkerShape(e,n),u.markerColor=V.getMarkerColor(e,n))}else u.symbolType="line";else if("boxPlot"==o){var c=V.getBoxPlotStyleOptions(e,n);c.q2Color!=c.q3Color?(u.symbolType=W.isHorizontal(e)?"_horizontalBoxPlot":"_verticalBoxPlot",u._boxPlot=c):u.symbolType="marker"}else u.symbolType="marker","none"==V.getLineType(e,n)&&(u.markerShape=V.getMarkerShape(e,n));return u.color=V.getColor(e,n),u.borderColor=V.getBorderColor(e,n),u.pattern=V.getPattern(e,n),u.style="area"==o?V.getAreaStyle(e,n):V.getStyle(e,n),u.className="area"==o?V.getAreaClassName(e,n):V.getClassName(e,n),u.markerStyle=V.getMarkerStyle(e,n),u.markerClassName=V.getMarkerClassName(e,n),u.action=i.action,u._spb=e.getShowPopupBehaviors(i._id),u.drilling=H.isSeriesDrillable(e,n)?"on":"off",u.shortDesc=i.shortDesc,u},tt._getRefObjItems=function(t){var e=j.getRefObjs(t);if(e.length<=0)return[];for(var n=[],i=0;i<e.length;i++){var r=e[i];if(r&&"on"==r.displayInLegend&&r.text){var o=j.getType(r);n.push({symbolType:"area"==o?"square":"line",text:r.text,color:j.getColor(r),lineStyle:r.lineStyle,
lineWidth:j.getLineWidth(r),categories:j.getRefObjCategories(r),categoryVisibility:j.isObjectRendered(t,r)?"visible":"hidden",shortDesc:r.shortDesc,style:r.style,className:r.className})}}return n};var et=new Object;t.Obj.createSubclass(et,t.Obj),et._MIN_TOUCH_MARKER_SIZE=16,et._MARKER_DATA_LABEL_GAP=4,et._MIN_CHARS_DATA_LABEL=3,et._FILTER_THRESHOLD_SCATTER_BUBBLE=1e4,et.render=function(t,e,n){"off"==t.getOptions().plotArea.rendered?et._renderAxisLines(t,e,n):n.w>0&&n.h>0&&(t._currentMarkers=new Array,t._currentAreas=new Array,et._renderBackgroundObjects(t,e,n),et._renderTicks(t,e,n),et._renderForegroundObjects(t,e,n))},et._renderBackgroundObjects=function(e,n,i){var r=e.getOptions(),o=et._getBackgroundShape(e,i),a=V.getBackgroundColor(e);if(a?o.setSolidFill(a):o.setInvisibleFill(),n.addChild(o),e.getCache().putToCache("plotAreaBackground",o),r.xAxis.referenceObjects||r.yAxis.referenceObjects||r.y2Axis.referenceObjects){var s=et.createClippedGroup(e,n,i);rt.renderBackgroundObjects(e,s,i)}if(W.isBLAC(e)){var l=new t.Container(e.getCtx());n.addChild(l),e.__setAreaContainer(l),W.hasAreaSeries(e)&&et._renderAreas(e,l,i,!1)}},et._getBackgroundShape=function(e,n){var i,r=e.getCtx();if(W.isPolar(e)){var o=n.x+n.w/2,a=n.y+n.h/2;if(B.isGridPolygonal(e)){var s=t.PolygonUtils.getRegularPolygonPoints(o,a,F.getGroupCount(e),e.getRadius(),0);i=new t.Polygon(r,s)}else i=new t.Circle(r,o,a,e.getRadius())}else i=new t.Rect(r,n.x,n.y,n.w,n.h);return i},et._renderTicks=function(t,e,n){t.xAxis&&B.isMinorTickRendered(t,"x")&&et._renderMinorTicks(t,e,t.xAxis,n),t.yAxis&&B.isMinorTickRendered(t,"y")&&et._renderMinorTicks(t,e,t.yAxis,n),t.y2Axis&&B.isMinorTickRendered(t,"y2")&&et._renderMinorTicks(t,e,t.y2Axis,n),t.xAxis&&B.isMajorTickRendered(t,"x")&&et._renderMajorTicks(t,e,t.xAxis,n),t.yAxis&&B.isMajorTickRendered(t,"y")&&et._renderMajorTicks(t,e,t.yAxis,n),t.y2Axis&&B.isMajorTickRendered(t,"y2")&&et._renderMajorTicks(t,e,t.y2Axis,n)},et._renderAxisLines=function(t,e,n){t.xAxis&&t.yAxis&&B.isAxisLineRendered(t,"x")&&et._renderAxisLine(t,e,t.xAxis,t.yAxis,n),t.xAxis&&t.y2Axis&&B.isAxisLineRendered(t,"x")&&(t.yAxis&&!W.isSplitDualY(t)||et._renderAxisLine(t,e,t.xAxis,t.y2Axis,n)),t.yAxis&&t.xAxis&&B.isAxisLineRendered(t,"y")&&et._renderAxisLine(t,e,t.yAxis,t.xAxis,n),t.y2Axis&&t.xAxis&&B.isAxisLineRendered(t,"y2")&&et._renderAxisLine(t,e,t.y2Axis,t.xAxis,n)},et._renderMajorTicks=function(t,e,n,i){et._renderGridlines(t,e,n.getOptions().majorTick,n.getPosition(),n.getMajorTickCoords(),n.getBaselineCoord(),i)},et._renderMinorTicks=function(t,e,n,i){et._renderGridlines(t,e,n.getOptions().minorTick,n.getPosition(),n.getMinorTickCoords(),null,i)},et._renderAxisLine=function(t,e,n,i,r){var o=n.getOptions(),a=o.position,s="bottom"==a||"right"==a||"tangential"==a?i.getMaxCoord():i.getMinCoord();et._renderGridlines(t,e,o.axisLine,i.getPosition(),[s],null,r)},et._renderGridlines=function(e,n,i,r,o,a,s){var l=i.lineColor,u=new t.SolidStroke(l,1,i.lineWidth);i.lineStyle&&u.setStyle(t.Stroke.convertTypeString(i.lineStyle));var h=u.clone();if("inherit"!=i.baselineColor){var c;c="auto"==i.baselineColor?t.ColorUtils.getDarker(l,.6):i.baselineColor,h.setColor(c)}h.setWidth(null!=i.baselineWidth?i.baselineWidth:i.lineWidth),h.setStyle(t.Stroke.convertTypeString(i.baselineStyle?i.baselineStyle:i.lineStyle));for(var d=0;d<o.length;d++){var p=null!=a&&o[d]==a?h:u;et._renderGridline(e,n,r,o[d],p,s)}},et._renderGridline=function(e,n,i,r,o,a){var s,l=n.getCtx(),u=!t.Agent.isTouchDevice()||t.Agent.getDevicePixelRatio()>1;if("radial"==i){if(B.isGridPolygonal(e)){var h=t.PolygonUtils.getRegularPolygonPoints(0,0,F.getGroupCount(e),r,0);s=new t.Polygon(l,h)}else s=new t.Circle(l,0,0,r);s.setInvisibleFill(),s.setTranslate(a.x+a.w/2,a.y+a.h/2)}else"tangential"==i?(s=new t.Line(l,0,0,e.getRadius()*Math.sin(r),-e.getRadius()*Math.cos(r)),r%Math.PI/2<.01&&u&&s.setPixelHinting(!0),s.setTranslate(a.x+a.w/2,a.y+a.h/2)):(s="top"==i||"bottom"==i?new t.Line(l,r,a.y,r,a.y+a.h):new t.Line(l,a.x,r,a.x+a.w,r),u&&s.setPixelHinting(!0));s.setStroke(o),s.setMouseEnabled(!1),n.addChild(s)},et._renderForegroundObjects=function(t,e,n){var i=t.getOptions(),r=et.createClippedGroup(t,e,n);et._renderAxisLines(t,e,n);var o=i.plotArea.borderColor,a=i.plotArea.borderWidth;if(o&&0!=a){var s=et._getBackgroundShape(t,n);s.setInvisibleFill(),s.setSolidStroke(o,null,a),s.setMouseEnabled(!1),e.addChild(s)}W.isBLAC(t)?(W.hasLineWithAreaSeries(t)&&et._renderAreas(t,e,n,!0),W.hasBarSeries(t)&&et._renderBars(t,r,n),W.hasCandlestickSeries(t)&&et._renderStock(t,r,n),W.hasBoxPlotSeries(t)&&et._renderBoxPlot(t,r,n),W.hasLineSeries(t)&&et._renderLines(t,e,r,n)):W.isScatterBubble(t)&&et._renderScatterBubble(t,e,r,!0,n),(i.xAxis.referenceObjects||i.yAxis.referenceObjects||i.y2Axis.referenceObjects)&&(r=et.createClippedGroup(t,e,n),rt.renderForegroundObjects(t,r,n));var l=F.getInitialSelection(t);H.setInitialSelection(t,l),t.highlight(V.getHighlightedCategories(t))},et._renderDataLabel=function(e,n,i,r,o,a,s,l,u){if(!W.isOverview(e)){var h=F.getDataLabel(e,r,o,a,l,u);if(null!=h){var c=V.getDataLabelPosition(e,r,o,a,l,u);if("none"!=c){var d=new t.OutputText(e.getCtx(),h,0,0);d.setMouseEnabled(!1);var p=u?e.getOptions().styleDefaults.stackLabelStyle:V.getDataLabelStyle(e,r,o,a,s,c,l);d.setCSSStyle(p),d.setY(i.y+i.h/2),d.setX(i.x+i.w/2),d.alignCenter(),d.alignMiddle();var g=d.measureDimensions();if("left"==c)d.setX(i.x-g.w/2-et._MARKER_DATA_LABEL_GAP);else if("right"==c)d.setX(i.x+i.w+g.w/2+et._MARKER_DATA_LABEL_GAP);else if("top"==c)d.setY(i.y-g.h/2);else if("bottom"==c)d.setY(i.y+i.h+g.h/2+et._MARKER_DATA_LABEL_GAP/2);else{if("bar"==V.getSeriesType(e,r)){if(g.w>i.w||g.h>i.h)return;"inLeft"==c?d.setX(i.x+g.w/2+et._MARKER_DATA_LABEL_GAP):"inRight"==c?d.setX(i.x+i.w-g.w/2-et._MARKER_DATA_LABEL_GAP):"inTop"==c?d.setY(i.y+g.h/2+et._MARKER_DATA_LABEL_GAP):"inBottom"==c&&d.setY(i.y+i.h-g.h/2-et._MARKER_DATA_LABEL_GAP/2)}else if(W.isBubble(e)){i.x+=et._MARKER_DATA_LABEL_GAP,i.y+=et._MARKER_DATA_LABEL_GAP,i.h-=2*et._MARKER_DATA_LABEL_GAP,i.w-=2*et._MARKER_DATA_LABEL_GAP;var f=d.getOptimalFontSize(i);if(d.setFontSize(f),!t.TextUtils.fitText(d,i.w,i.h,n,et._MIN_CHARS_DATA_LABEL))return}var _=null!=V.getPattern(e,r,o);if(_){g=d.getDimensions();var m=.15*g.h,v=t.PathUtils.roundedRectangle(g.x-m,g.y,g.w+2*m,g.h,2,2,2,2),y=new t.Path(e.getCtx(),v);y.setSolidFill("#FFFFFF",.9),n.addChild(y)}}if(W.isBar(e)){var S,C=d.getDimensions(),b=!1,E=e.getPlotArea().getDimensions();if("left"==c&&C.x<0)b=!0,S=i.x-et._MARKER_DATA_LABEL_GAP;else if("right"==c&&C.x+C.w>E.w+et._MARKER_DATA_LABEL_GAP)b=!0,S=E.w-i.w-et._MARKER_DATA_LABEL_GAP;else{if("top"==c&&C.y<0)return;if("bottom"==c&&C.y+C.h>E.y+E.h+et._MARKER_DATA_LABEL_GAP)return}if(b){if(!isNaN(h))return;if(!t.TextUtils.fitText(d,S,i.h,n,1))return;g=d.measureDimensions(),"left"==c?d.setX(i.x-g.w/2-et._MARKER_DATA_LABEL_GAP):"right"==c&&d.setX(i.x+i.w+g.w/2+et._MARKER_DATA_LABEL_GAP)}}V.optimizeMarkerStroke(e)&&d.setSolidStroke("none"),n.addChild(d),e.addDataLabel(d)}}}},et._renderDataLabelForMarker=function(e,n,i){var r=e.getEventManager().getLogicalObject(i),o=r.getSeriesIndex(),a=r.getGroupIndex(),s=r.getNestedDataItemIndex();if(i instanceof t.SimpleMarker){var l=new t.Rectangle(i.getCx()-i.getWidth()/2,i.getCy()-i.getHeight()/2,i.getWidth(),i.getHeight());et._renderDataLabel(e,n,l,o,a,s,i.getDataColor())}else i instanceof S&&(et._renderDataLabel(e,n,i.getBoundingBox1(),o,a,s,i.getDataColor(),"low"),et._renderDataLabel(e,n,i.getBoundingBox2(),o,a,s,i.getDataColor(),"high"))},et._renderScatterBubble=function(e,n,i,r,o){var a,s=et._filterScatterBubble(e,r,o),l=F.getSeriesCount(e);for(a=0;a<l;a++)"none"!=V.getLineType(e,a)&&et._renderLinesForSeries(e,i,a,o);var u=V.getMarkerBorderColor(e),h=V.getBorderWidth(e),c=new t.SolidStroke(u,null,h),d=[];if(s)for(var p=V.optimizeMarkerStroke(e),g=p?c.getColor():null,f=p?c.getWidth():null,_=0;_<s.length;_++){var m=s[_],v=et._createMarker(e,m,g,f);d.push(v)}else{for(a=0;a<l;a++){var y=et._getMarkersForSeries(e,a,o,c);d=d.concat(y)}r&&z.sortMarkers(d)}W.isBubble(e)?et._addMarkersToContainer(e,i,d,c):et._addMarkersToContainer(e,n,d,c)},et._renderMarkersForSeries=function(e,n,i,r){var o,a=V.getMarkerBorderColor(e,i),s=V.getBorderWidth(e,i),l=new t.SolidStroke(a,null,s);o=V.isRangeSeries(e,i)?et._getRangeMarkersForSeries(e,i,r):et._getMarkersForSeries(e,i,r,l),et._addMarkersToContainer(e,n,o,l)},et._addMarkersToContainer=function(e,n,i,r){var o=n,a=V.optimizeMarkerStroke(e),s=V.optimizeMarkerFill(e);(a||s)&&(o=new t.Container(e.getCtx()),a?o.setStroke(r):o.setInvisibleFill(),n.addChild(o));for(var l=0;l<i.length;l++)o.addChild(i[l]),et._renderDataLabelForMarker(e,o,i[l]);e._currentMarkers.push(i)},et._getMarkerInfo=function(e,n,i,r,o){var a=e.getOptions(),s=F.getValue(e,n,i,r);if(null==s||isNaN(s))return null;if(et._isDataItemFiltered(e,n,i))return null;var l=F.getGroupCount(e),u=V.isMarkerDisplayed(e,n,i,r);if(!u&&(null==r||r<0))if("jet"!=a._environment&&B.isMixedFrequency(e))l<2&&(u=!0);else{var h=l-1,c=W.isPolar(e),d=c&&h>0&&0==i?h:i-1,p=c&&h>0&&i==h?0:i+1,g=F.getValue(e,n,d),f=F.getValue(e,n,p);null!=g&&!isNaN(g)||null!=f&&!isNaN(f)||(u=!0)}if(!u){if(W.isSpark(e))return null;if((a._duringAnimation||W.isOverview(e))&&!F.isDataSelected(e,n,i,r))return null}if(!V.isDataItemRendered(e,n,i,r))return!1;var _=!0,m=F.getMarkerPosition(e,n,i,r,o),v=V.getMarkerSize(e,n,i,r);return o&&m&&v&&(_=o.intersects(new t.Rectangle(m.x-v/2,m.y-v/2,v,v))),m&&_?{seriesIndex:n,groupIndex:i,itemIndex:r,x:m.x,y:m.y,size:v,markerDisplayed:u}:null},et._getScatterBubbleMarkerInfo=function(t,e,n,i){if(!V.isDataItemRendered(t,e,n))return!1;var r=F.getScatterBubbleMarkerPosition(t,e,n);if(!r)return null;var o=V.getMarkerSize(t,e,n);return o?{seriesIndex:e,groupIndex:n,x:r.x,y:r.y,size:o}:null},et._getMarkersForSeries=function(t,e,n,i){if(!V.isSeriesRendered(t,e))return[];for(var r=V.optimizeMarkerStroke(t),o=r?i.getColor():null,a=r?i.getWidth():null,s=[],l=F.getGroupCount(t),u=0;u<l;u++){var h=et._getMarkerInfo(t,e,u,null,n);if(h){var c=et._createMarker(t,h,o,a);null!=c&&s.push(c)}}return s},et._createMarker=function(e,n,i,o){var a,s=t.Agent.isTouchDevice(),l=e.getCtx(),u=V.optimizeMarkerStroke(e),h=V.optimizeMarkerFill(e),c=n.seriesIndex,d=n.groupIndex,p=n.itemIndex,g=V.getMarkerColor(e,c,d,p),f=V.getMarkerShape(e,c,d,p),_=n.markerDisplayed;if(null==_&&(_=V.isMarkerDisplayed(e,c,d,p)),_){var v=V.getImageSource(e,c,d,p,"source");if(v){var y=V.getImageSource(e,c,d,p,"sourceSelected"),S=V.getImageSource(e,c,d,p,"sourceHover"),C=V.getImageSource(e,c,d,p,"sourceHoverSelected");a=new t.ImageMarker(l,n.x,n.y,n.size,n.size,null,v,y,S,C)}else{a=new t.SimpleMarker(l,f,e.getSkin(),n.x,n.y,n.size,n.size,null,null,(!0)),a.setFill(G.getMarkerFill(e,c,d,p));var b=V.getMarkerBorderColor(e,c,d,p),E=V.getBorderWidth(e,c,d,p);b==i&&E==o||a.setSolidStroke(b,null,E),a.setDataColor(g,!0);var T=t.SelectionEffectUtils.getHoverBorderColor(g),A=V.getSelectedInnerColor(e),x=V.getSelectedOuterColor(e);a.setHoverStroke(new t.SolidStroke(A,1,1),new t.SolidStroke(T,1,3.5)),a.setSelectedStroke(new t.SolidStroke(A,1,1.5),new t.SolidStroke(x,1,4.5)),a.setSelectedHoverStroke(new t.SolidStroke(A,1,1.5),new t.SolidStroke(T,1,4.5)),a.setClassName(V.getMarkerClassName(e,c,d,p)),a.setStyle(V.getMarkerStyle(e,c,d,p))}V.isSelectable(e,c,d)&&a.setCursor(t.SelectionEffectUtils.getSelectingCursor()),s&&n.size<et._MIN_TOUCH_MARKER_SIZE&&et._addMarkerHitArea(a,n.x,n.y,u)}else V.isSelectable(e,c,d)?(a=new m(l,f,n.x,n.y,n.size,u),a.setCursor(t.SelectionEffectUtils.getSelectingCursor()),s&&et._addMarkerHitArea(a,n.x,n.y,u)):(s&&(n.size=et._MIN_TOUCH_MARKER_SIZE),a=new m(l,t.SimpleMarker.SQUARE,n.x,n.y,n.size,u)),null!=a&&(h||a.setInvisibleFill(),a.setDataColor(g));return null!=a&&r.associate(a,e,c,d,p,n),a},et._addMarkerHitArea=function(e,n,i,r){var o=new t.Rect(e.getCtx(),n-et._MIN_TOUCH_MARKER_SIZE/2,i-et._MIN_TOUCH_MARKER_SIZE/2,et._MIN_TOUCH_MARKER_SIZE,et._MIN_TOUCH_MARKER_SIZE);r&&o.setSolidStroke("none"),o.setInvisibleFill(),e.addChild(o)},et._getRangeMarkersForSeries=function(e,n,i){if(!V.isSeriesRendered(e,n))return[];for(var o=t.Agent.isTouchDevice(),a=e.getCtx(),s=e.xAxis,l=F.isAssignedToY2(e,n)?e.y2Axis:e.yAxis,u=e.getOptions(),h=F.getGroupCount(e),c=[],d=0;d<h;d++)if(!et._isDataItemFiltered(e,n,d)&&V.isDataItemRendered(e,n,d)){var p=s.getCoordAt(F.getXValue(e,n,d)),g=l.getUnboundedCoordAt(F.getLowValue(e,n,d)),f=l.getUnboundedCoordAt(F.getHighValue(e,n,d));if(null!=p&&null!=g&&null!=f){var _=V.isMarkerDisplayed(e,n,d);if(!_){var m=h-1,v=W.isPolar(e),y=v&&m>0&&0==d?m:d-1,C=v&&m>0&&d==m?0:d+1,b=F.getLowValue(e,n,y),E=F.getHighValue(e,n,y),T=F.getLowValue(e,n,C),A=F.getHighValue(e,n,y);null==b&&null==E&&null==T&&null==A&&(_=!0)}if(!(u._duringAnimation||W.isOverview(e)||W.isSpark(e))||_||F.isDataSelected(e,n,d)){var x=et.convertAxisCoord(e,new t.Point(p,g),i),I=et.convertAxisCoord(e,new t.Point(p,f),i),O=new t.Point((x.x+I.x)/2,(x.y+I.y)/2),M=V.getMarkerSize(e,n,d),D=new S(a,x.x,x.y,I.x,I.y,M,(!_)),P=G.getMarkerFill(e,n,d),w=V.getMarkerBorderColor(e,n,d),R=V.getBorderWidth(e,n,d),L=new t.SolidStroke(w,null,R),N=V.getMarkerColor(e,n,d),k=V.getSelectedInnerColor(e),U=V.getSelectedOuterColor(e);D.setStyleProperties(P,L,N,k,U),V.isSelectable(e,n,d)&&D.setCursor(t.SelectionEffectUtils.getSelectingCursor());var B=new t.Line(a,x.x,x.y,I.x,I.y);B.setSolidStroke("rgba(0,0,0,0)",null,o?Math.max(M,et._MIN_TOUCH_MARKER_SIZE):M),D.addChild(B),c.push(D),r.associate(D,e,n,d,null,O)}}}return c},et._renderBars=function(e,n,i){for(var o=W.isHorizontal(e),a=W.isPolar(e),s=W.isStock(e),l="pixel"==V.getBarSpacing(e),u=t.Agent.isRightToLeft(e.getCtx()),h=V.isStackLabelRendered(e),c=W.isStacked(e),p=0;p<F.getGroupCount(e);p++)for(var g=0;g<F.getSeriesCount(e);g++)if(F.isBLACItemInViewport(e,g,p)&&"bar"==V.getSeriesType(e,g)){var f=F.getBarInfo(e,g,p,i);if(null!=f){var _=f.yCoord,m=f.baseCoord,v=f.axisCoord,S=f.x1,C=f.x2,b=f.barWidth,E=!1;Math.abs(_-m)<1&&(V.isRangeSeries(e,g)?_--:c&&!F.isOutermostBar(e,g,p)||(E=!0,_=_>m||o&&!u&&_==m?m+3:m-3));var T;T=a?new y(e,v,m,_,S,C,i):new d(e,v,m,_,S,C),n.addChild(T),V.isSelectable(e,g,p)&&T.setCursor(t.SelectionEffectUtils.getSelectingCursor());var A,x=null;if(E)A=t.SolidFill.invisibleFill();else{A=G.getBarFill(e,g,p,b);var I=V.getBorderColor(e,g,p),O=V.getBorderWidth(e,g,p);I&&(x=new t.SolidStroke(I,null,O))}var M=V.getColor(e,g,p),D=V.getSelectedInnerColor(e),P=V.getSelectedOuterColor(e),w=V.getClassName(e,g,p),R=V.getStyle(e,g,p);T.setStyleProperties(A,x,M,D,P,w,R),l&&T.setPixelHinting(!0),r.associate(T,e,g,p,null,f.dataPos),V.isRangeSeries(e,g)?(et._renderDataLabel(e,n,T.getBoundingBox(),g,p,null,M,"low"),et._renderDataLabel(e,n,T.getBoundingBox(),g,p,null,M,"high")):et._renderDataLabel(e,n,T.getBoundingBox(),g,p,null,M);var L=new Array;L.push(T),s&&0!=g||e._currentMarkers.push(L),h&&F.isOutermostBar(e,g,p)&&et._renderDataLabel(e,n,T.getBoundingBox(),g,p,null,null,null,!0)}}},et._renderStock=function(e,n,i){var o=e.getOptions(),a=e.xAxis,s=e.yAxis;if("candlestick"==V.getSeriesType(e,0))for(var l=0;l<F.getGroupCount(e);l++)if(F.isBLACItemInViewport(e,0,l)){var u,h,c,d=F.getXValue(e,0,l),p=F.getDataItem(e,0,l),f=null;p&&(u=p.open,h=p.close,c=p.low,f=p.high);var _=null!=c&&null!=f;if(null!=u&&null!=h){var m,v=a.getUnboundedCoordAt(d),y=V.getBarWidth(e,0,l),S=s.getBoundedCoordAt(u),C=s.getBoundedCoordAt(h),b=null;_&&(m=s.getBoundedCoordAt(c),b=s.getBoundedCoordAt(f));var E=new g(e.getCtx(),v,y,S,C,m,b);n.addChild(E),V.isSelectable(e,0,l)&&E.setCursor(t.SelectionEffectUtils.getSelectingCursor());var T=G.getBarFill(e,0,l,y),A=null,x=V.getBorderColor(e,0,l),I=V.getBorderWidth(e,0,l);x?A=new t.SolidStroke(x,null,I):T instanceof t.PatternFill&&(A=new t.SolidStroke(T.getColor(),null,I));var O=V.getColor(e,0,l),M=V.getSelectedInnerColor(e),D=V.getSelectedOuterColor(e),P=o.styleDefaults.stockRangeColor;E.setChangeStyle(T,A,O,M,D),E.setRangeStyle(new t.SolidFill(P),A,P,D);var w=new t.Point(v,(S+C)/2);r.associate(E,e,0,l,null,w);var R=new Array;R.push(E._changeShape),e._currentMarkers.push(R)}}},et._renderBoxPlot=function(e,n,i){for(var o=e.xAxis,a=0;a<F.getGroupCount(e);a++)for(var s=0;s<F.getSeriesCount(e);s++)if(F.isBLACItemInViewport(e,s,a)&&"boxPlot"==V.getSeriesType(e,s)){var l,u,h,c,d=F.getXValue(e,s,a),g=F.getDataItem(e,s,a),f=null;if(g&&(l=g.low,u=g.q1,h=g.q2,c=g.q3,f=g.high),null!=l&&null!=u&&null!=h&&null!=c&&null!=f){var _=V.getBarWidth(e,s,a),m=V.getBarCategoryOffsetMap(e,a,!1),v=F.isAssignedToY2(e,s),y=F.getStackCategory(e,s),S=m[v?"y2":"y"][y]+_/2;t.Agent.isRightToLeft(e.getCtx())&&W.isVertical(e)&&(S*=-1);var C=o.getUnboundedCoordAt(d)+S,b=v?e.y2Axis:e.yAxis,E=b.getBoundedCoordAt(l),T=b.getBoundedCoordAt(u),A=b.getBoundedCoordAt(h),x=b.getBoundedCoordAt(c),I=b.getBoundedCoordAt(f),O=V.getBoxPlotStyleOptions(e,s,a),M=new p(e,C,_,E,T,A,x,I,O);n.addChild(M),V.isSelectable(e,s,a)&&M.setCursor(t.SelectionEffectUtils.getSelectingCursor());var D=et.convertAxisCoord(e,new t.Point(C,A),i);r.associate(M,e,s,a,null,D),et._renderBoxPlotMarkers(e,n,s,a,i,C),e._currentMarkers.push([M._medianLine])}}},et._renderBoxPlotMarkers=function(e,n,i,r,o,a){for(var s=V.getMarkerBorderColor(e,i,r),l=V.getBorderWidth(e,i,r),u=new t.SolidStroke(s,null,l),h=[],c=F.getNestedDataItemCount(e,i,r),d=0;d<c;d++){var p=et._getMarkerInfo(e,i,r,d,o);if(p){W.isHorizontal(e)?p.y=a:p.x=a;var g=et._createMarker(e,p,s,l);null!=g&&h.push(g)}}et._addMarkersToContainer(e,n,h,u)},et._renderLines=function(t,e,n,i){var r,o=[],a=F.getSeriesCount(t);for(r=0;r<a;r++)V.isSeriesRendered(t,r)&&"line"==V.getSeriesType(t,r)&&o.push(r);for(var s=0;s<o.length;s++)r=o[s],"none"!=V.getLineType(t,r)&&(W.isPolar(t)||et._filterPointsForSeries(t,r),et._renderLinesForSeries(t,n,r,i));for(s=0;s<o.length;s++)et._renderMarkersForSeries(t,e,o[s],i)},et._renderAreas=function(t,e,n,i){for(var r=F.getSeriesCount(t),o=i?"lineWithArea":"area",a=[],s=[],l=0;l<r;l++)V.isSeriesRendered(t,l)&&V.getSeriesType(t,l)==o&&(F.isAssignedToY2(t,l)?s.push(l):a.push(l));a.length>0&&et._renderAreasForAxis(t,e,a,t.yAxis.getBaselineCoord(),n,i),s.length>0&&et._renderAreasForAxis(t,e,s,t.y2Axis.getBaselineCoord(),n,i)},et._renderAreasForAxis=function(e,n,i,o,a,s){for(var l=W.isStacked(e),u=W.isPolar(e),h=et.createClippedGroup(e,n,a),c={},d={},p={},g={},m=[],v=F.getGroupCount(e),y=0;y<v;y++)m.push(new f(null,o,o,y,F.getGroup(e,y),(!0)));for(var S=0;S<i.length;S++){var C=i[S],b=F.getStackCategory(e,C),E=F.isSeriesNegative(e,C),T=c[b],A=d[b],x=p[b],I=g[b];if("none"!=V.getLineType(e,C)){var O=G.getAreaFill(e,C),M=V.getBorderColor(e,C),D=V.getBorderWidth(e,C),P=V.getAreaClassName(e,C),w=V.getAreaStyle(e,C),R=M?new t.SolidStroke(M,null,D):null,L=V.getLineType(e,C);u||et._filterPointsForSeries(e,C);var N,k,U,B=V.isRangeSeries(e,C);B?(N=et._getCoordsForSeries(e,C,a,"high"),k=et._getCoordsForSeries(e,C,a,"low"),U=L):E?(N=et._getAreaCoordsForSeries(e,C,a,x?x:m),k=x?x:[],U=I):(N=et._getAreaCoordsForSeries(e,C,a,T?T:m),k=T?T:[],U=A);var H=new _(e,(!0),a,o,w,P,O,R,L,N,U,k);h.addChild(H),e._currentAreas.push(H),r.associate(H,e,C),E?(p[b]=N,g[b]=L):(c[b]=N,d[b]=L),l||((s||V.getDataItemGaps(e)>0&&!M)&&et._renderLinesForSeries(e,h,C,a,!s),s||et._renderMarkersForSeries(e,n,C,a),S+1<i.length&&(h=et.createClippedGroup(e,n,a)))}else et._renderMarkersForSeries(e,n,C,a)}for(S=0;S<i.length;S++)if(C=i[S],"none"!=V.getLineType(e,C)){var j=V.getBorderColor(e,C)||V.getBorderColor(e,C+1);l&&(s||V.getDataItemGaps(e)>0&&!j)&&et._renderLinesForSeries(e,h,C,a,!s),(l||s)&&et._renderMarkersForSeries(e,n,C,a)}},et._getAreaCoordsForSeries=function(t,e,n,i){for(var r=et._getCoordsForSeries(t,e,n),o=[],a=0;a<i.length;a++)o.push(i[a].clone());for(var s=r.length-1,l=W.isPolar(t),a=0;a<r.length;a++)if(null!=r[a].x){var u=o[r[a].groupIndex],h=l&&0==a?s:a-1,c=l&&a==s?0:a+1;h>=0&&null!=r[h].x&&(u.y1=r[a].y1),c<=s&&null!=r[c].x&&(u.y2=r[a].y2),u.x=r[a].x,u.filtered=u.y1==u.y2&&r[a].filtered}return o},et._renderLinesForSeries=function(e,n,i,o,a){var s;if(a){var l=2.5*V.getDataItemGaps(e);s=new t.SolidStroke(V.getBackgroundColor(e,!0),1,l)}else{var u=V.getColor(e,i),h=V.getLineWidth(e,i),c=t.Stroke.convertTypeString(V.getLineStyle(e,i));s=new t.SolidStroke(u,1,h),s.setStyle(c)}var d=F.isAssignedToY2(e,i)?e.y2Axis.getBaselineCoord():e.yAxis.getBaselineCoord(),p=V.getLineType(e,i),g=V.getClassName(e,i),f=V.getStyle(e,i),m=function(t){var a=et._getCoordsForSeries(e,i,o,t),l=new _(e,(!1),o,d,f,g,null,s,p,a);n.addChild(l),r.associate(l,e,i)},v=V.isRangeSeries(e,i);v?(m("high"),m("low")):m("value")},et._filterScatterBubble=function(e,n,i){var r=F.getSeriesCount(e),o=F.getGroupCount(e);if(r*o<et._FILTER_THRESHOLD_SCATTER_BUBBLE)return null;for(var a,s=[],l=0;l<r;l++)if(V.isSeriesRendered(e,l))for(var u=0;u<o;u++)a=et._getScatterBubbleMarkerInfo(e,l,u,i),null!=a&&s.push(a);if(s.length<et._FILTER_THRESHOLD_SCATTER_BUBBLE)return null;n&&z.sortMarkerInfos(s);for(var h=new t.PixelMap(25,new t.PixelMap(5,new t.PixelMap)),c=[],d=s.length,p=d-1;p>=0;p--){a=s[p];var g=z.checkPixelMap(h,a.x,a.y,a.size);if(!g){var f=V.getColor(e,a.seriesIndex,a.groupIndex),_=V.isMarkerDisplayed(e,l,u),m=_?t.ColorUtils.getAlpha(f):0;m>0&&(z.updatePixelMap(h,a.x,a.y,a.size,m),c.push(a))}}return e.getCache().putToCache("dataFiltered",!0),c.reverse(),c},et._filterPointsForSeries=function(t,e){var n=t.__getPlotAreaSpace().w,i=F.getSeriesItem(t,e).items,r=t.xAxis.getInfo(),o=(r.getDataMax()-r.getDataMin())/(r.getViewportMax()-r.getViewportMin()),a=Math.round(2*(i.length/o)/n);if(a<=2)for(var s=0;s<i.length;s++)d=i[s],d&&(d._filtered=!1);else{for(var l,u,h,c,d,p,g=!1,s=0;s<i.length;s+=a){l=-1,u=-(1/0),h=-1,c=1/0;for(var f=s;f<Math.min(s+a,i.length);f++)p=F.getValue(t,e,f),d=i[f],null!=p&&null!=d&&(p>u&&(l=f,u=p),p<c&&(h=f,c=p),d._filtered=!0,g=!0);for(var f=s;f<Math.min(s+a,i.length);f++)d=i[f],null!=d&&(f!=l&&f!=h||(d._filtered=!1))}t.getCache().putToCache("dataFiltered",g)}},et._isDataItemFiltered=function(t,e,n){var i=F.getDataItem(t,e,n);return!(!i||!i._filtered)},et._getCoordsForSeries=function(t,e,n,i){var r=t.xAxis,o=t.yAxis;F.isAssignedToY2(t,e)&&(o=t.y2Axis);for(var a=[],s=0;s<F.getGroupCount(t);s++){var l=F.getGroup(t,s),u=F.getValue(t,e,s),h=F.getXValue(t,e,s),c=null;if("low"==i?c=F.getLowValue(t,e,s):"high"==i?c=F.getHighValue(t,e,s):null!=u&&(c=F.getCumulativeValue(t,e,s)),null!=c&&!isNaN(c)&&F.isBLACItemInViewport(t,e,s)){W.isPolar(t)&&(c=Math.max(c,o.getInfo().getViewportMin()));var d=r.getUnboundedCoordAt(h),p=o.getUnboundedCoordAt(c);if(null!=d&&null!=p){var g=new f(d,p,p,s,l,et._isDataItemFiltered(t,e,s));a.push(g)}else a.push(new f(null,null,null,s,l,(!1)))}else a.push(new f(null,null,null,s,l,(!1)))}return a},et.createClippedGroup=function(e,n,i){var r=new t.Container(n.getCtx());n.addChild(r);var o=new t.ClipPath(e.getId()),a=et._extendClipGroup(e);if(W.isPolar(e)){var s=i.x+i.w/2,l=i.y+i.h/2;if(B.isGridPolygonal(e)){var u=t.PolygonUtils.getRegularPolygonPoints(s,l,F.getGroupCount(e),e.getRadius(),0);o.addPolygon(u)}else o.addCircle(s,l,e.getRadius())}else W.isHorizontal(e)?o.addRect(i.x-a,i.y,i.w+2*a,i.h):o.addRect(i.x,i.y-a,i.w,i.h+2*a);return r.setClipPath(o),r},et.polarToCartesian=function(e,n,i){var r=i.x+i.w/2+e*Math.sin(n),o=i.y+i.h/2-e*Math.cos(n);return new t.Point(r,o)},et.convertAxisCoord=function(e,n,i){if(W.isPolar(e)){var r=et.polarToCartesian(n.y,n.x,i);return new t.Point(r.x,r.y)}return W.isHorizontal(e)?new t.Point(n.y,n.x):new t.Point(n.x,n.y)},et._extendClipGroup=function(t){var e=W.hasLineSeries(t)||W.hasLineWithAreaSeries(t);if(e){var n=V.getLineWidth(t),i=function(t){var e=t.getInfo(),i=e.getCoordAt(e.getGlobalMax()),r=e.getCoordAt(e.getDataMax()),o=e.getCoordAt(e.getGlobalMin()),a=e.getCoordAt(e.getDataMin());return null!=i&&null!=r&&r-i<=n/2||null!=o&&null!=a&&o-a<=n/2};if(t.yAxis&&i(t.yAxis)||t.y2Axis&&i(t.y2Axis))return Math.ceil(n/2)}return 0};var nt=new Object;t.Obj.createSubclass(nt,t.Obj),nt._DEFAULT_3D_GAP_RATIO=1/36,nt._DEFAULT_2D_GAP_RATIO=1/70,nt._MAX_WIDTH_FOR_GAPS=.25,nt._GROUP_INDEX=0,nt.render=function(e,n,i){var r=new t.Container(e.getCtx());r.setTranslate(i.x,i.y),n.addChild(r),e.setPlotArea(r);var o;if("horizontal"==e.getOptions().orientation)o=new t.Rectangle(0,0,i.w,i.h);else{var a=new t.Matrix,s=t.Agent.isRightToLeft(e.getCtx())?-1:1;a.translate(-i.h/2,-i.w/2),a.rotate(s*Math.PI/2),a.translate(i.x+i.w/2,i.y+i.h/2),o=new t.Rectangle(0,0,i.h,i.w),r.setMatrix(a)}nt._renderFunnelSlices(e,r,o)||J.renderEmptyText(e,n,i);var l=F.getInitialSelection(e);H.setInitialSelection(e,l),e.highlight(V.getHighlightedCategories(e))},nt._renderFunnelSlices=function(t,e,n){for(var i=t.getOptions(),o=F.getSeriesCount(t),a=V.getDataItemGaps(t),s=("on"==i.styleDefaults.threeDEffect?nt._DEFAULT_3D_GAP_RATIO:nt._DEFAULT_2D_GAP_RATIO)*n.w,l=Math.min(nt._MAX_WIDTH_FOR_GAPS*n.w/(o-1),s),u=a*l,h=0,c=0,d=0,p=0;p<o;p++)if(V.isDataItemRendered(t,p)){var g=F.getTargetValue(t,p);null==g&&(g=F.getValue(t,p,nt._GROUP_INDEX)),g<=0||(h+=g)}if(0==h)return!1;for(var p=o-1;p>=0;p--)if(V.isDataItemRendered(t,p)){var g=F.getValue(t,p,nt._GROUP_INDEX),f=F.getTargetValue(t,p);if(!(g<=0&&null==f||null!=f&&f<=0)){var _;null!=f?(d+=f/h,_=new b(t,p,c,n.w,n.h,1-d,f/h,g/f,u)):(d+=g/h,_=new b(t,p,c,n.w,n.h,1-d,g/h,null,u)),c++,e.addChild(_),r.associate(_,t,p,nt._GROUP_INDEX)}}return!0};var it=new Object;t.Obj.createSubclass(it,t.Obj),it._DEFAULT_GAP_RATIO=1/70,it._MAX_HEIGHT_FOR_GAPS=.25,it._GROUP_INDEX=0,it.render=function(e,n,i){var r=new t.Container(e.getCtx());r.setTranslate(i.x,i.y),n.addChild(r),e.setPlotArea(r);var o=new t.Rectangle(0,0,i.w,i.h);it._renderPyramidSlices(e,r,o)||J.renderEmptyText(e,n,i);var a=F.getInitialSelection(e);H.setInitialSelection(e,a),e.highlight(V.getHighlightedCategories(e))},it._renderPyramidSlices=function(t,e,n){for(var i=F.getSeriesCount(t),o=V.getDataItemGaps(t),a=it._DEFAULT_GAP_RATIO*n.h,s=Math.min(it._MAX_HEIGHT_FOR_GAPS*n.h/(i-1),a),l=o*s,u=0,h=0,c=0,d=0;d<i;d++)if(V.isDataItemRendered(t,d)){var p=F.getValue(t,d,it._GROUP_INDEX);p<=0||(u+=p)}if(0==u)return!1;for(var d=0;d<i;d++)if(V.isDataItemRendered(t,d)){var p=F.getValue(t,d,it._GROUP_INDEX);if(!(p<=0)){var g=new E(t,d,h,n.w,n.h,c,p/u,l);c+=p/u,h++,e.addChild(g),r.associate(g,t,d,it._GROUP_INDEX)}}return!0};var rt=new Object;t.Obj.createSubclass(rt,t.Obj),rt.renderBackgroundObjects=function(t,e,n){rt._renderObjects(t,e,n,"back")},rt.renderForegroundObjects=function(t,e,n){rt._renderObjects(t,e,n,"front")},rt._renderObjects=function(t,e,n,i){rt._renderObjectsForAxis(t,e,n,i,t.xAxis,j.getAxisRefObjs(t,"x")),rt._renderObjectsForAxis(t,e,n,i,t.yAxis,j.getAxisRefObjs(t,"y")),rt._renderObjectsForAxis(t,e,n,i,t.y2Axis,j.getAxisRefObjs(t,"y2"))},rt._renderObjectsForAxis=function(t,e,n,i,r,a){if(a&&r)for(var s=0;s<a.length;s++){var l=a[s];if(j.isObjectRendered(t,l)&&l&&j.getLocation(l)==i){var u,h=j.getType(l);if("area"==h?u=rt._createReferenceArea(l,t,n,r):"line"==h&&(u=rt._createReferenceLine(l,t,n,r)),null!=u){var c=r==t.xAxis?"xAxis":r==t.yAxis?"yAxis":"y2Axis",d=new o(t,[u],l,s,c);t.registerObject(d),t.getEventManager().associate(u,d),e.addChild(u)}}}},rt._createReferenceArea=function(e,n,i,r){var o,a=n.getCtx(),s=r.getPosition(),l="top"==s||"bottom"==s,u="radial"==s,h=j.getColor(e),c=j.getLineType(e),d=e.style,p=e.className;if(null==e.items||r!=n.yAxis&&r!=n.y2Axis){var g=j.getLowValue(e),m=j.getHighValue(e);null!=g&&g!=-(1/0)||(g=r.getInfo().getGlobalMin()),null!=m&&m!=1/0||(m=r.getInfo().getGlobalMax());var v=rt._getAxisCoord(n,r,g),y=rt._getAxisCoord(n,r,m);if(W.isPolar(n)){var S,C=i.x+i.w/2,b=i.y+i.h/2;if(u)if(B.isGridPolygonal(n)){var E=F.getGroupCount(n),T=t.PolygonUtils.getRegularPolygonPoints(C,b,E,y,0,1),A=t.PolygonUtils.getRegularPolygonPoints(C,b,E,v,0,0);S=t.PathUtils.polyline(T)+t.PathUtils.polyline(A)+t.PathUtils.closePath()}else S=t.PathUtils.moveTo(C,b-y)+t.PathUtils.arcTo(y,y,Math.PI,1,C,b+y)+t.PathUtils.arcTo(y,y,Math.PI,1,C,b-y)+t.PathUtils.moveTo(C,b-v)+t.PathUtils.arcTo(v,v,Math.PI,0,C,b+v)+t.PathUtils.arcTo(v,v,Math.PI,0,C,b-v)+t.PathUtils.closePath();else{var x=n.getRadius(),I=et.polarToCartesian(x,v,i),O=et.polarToCartesian(x,y,i);S=t.PathUtils.moveTo(C,b)+t.PathUtils.lineTo(I.x,I.y)+t.PathUtils.arcTo(x,x,y-v,t.Agent.isRightToLeft(a)?0:1,O.x,O.y)+t.PathUtils.lineTo(O.x,O.y)+t.PathUtils.closePath()}o=new t.Path(a,S)}else{var M;M=l?[v,0,y,0,y,i.h,v,i.h]:[0,v,0,y,i.w,y,i.w,v],o=new t.Polygon(a,M)}o.setSolidFill(h),o.setStyle(d).setClassName(p)}else{var D=e.items,P=[],w=[];if(n.xAxis.isGroupAxis())for(;D.length<F.getGroupCount(n);)D.push(null);for(var R=0;R<D.length;R++){var L=D[R],N=j.getLowValue(L),k=j.getHighValue(L);if(null!=N&&null!=k){var U=r.getUnboundedCoordAt(N),H=r.getUnboundedCoordAt(k),G=n.xAxis.getUnboundedCoordAt(j.getXValue(n,D,R));P.push(new f(G,H,H)),w.push(new f(G,U,U))}else P.push(new f),w.push(new f)}o=new _(n,(!0),i,null,d,p,new t.SolidFill(h),null,c,P,c,w)}return o},rt._createReferenceLine=function(e,n,i,r){var o=r.getPosition(),a="top"==o||"bottom"==o,s="radial"==o,l="tangential"==o,u=j.getLineWidth(e),h=j.getLineType(e),c=j.getColor(e),d=new t.SolidStroke(c,1,u),p=e.style,g=e.className;e.lineStyle&&d.setStyle(t.Stroke.convertTypeString(e.lineStyle));var m,v=n.getCtx();if(null==e.items||r!=n.yAxis&&r!=n.y2Axis){if(!e.value)return null;var y=rt._getAxisCoord(n,r,e.value);if(null==y||y==1/0||y==-(1/0))return null;var S=i.x+i.w/2,C=i.y+i.h/2;if(s){if(B.isGridPolygonal(n)){var b=t.PolygonUtils.getRegularPolygonPoints(S,C,F.getGroupCount(n),y,0);m=new t.Polygon(v,b)}else m=new t.Circle(v,S,C,y);m.setFill(null)}else if(l){var E=et.polarToCartesian(n.getRadius(),y,i);m=new t.Line(v,S,C,E.x,E.y)}else m=a?new t.Line(v,y,0,y,i.h):new t.Line(v,0,y,i.w,y),m.setPixelHinting(!0);m.setStroke(d),m.setStyle(p).setClassName(g)}else{var T=e.items,A=[],b=[];if(A.push(b),n.xAxis.isGroupAxis())for(;T.length<F.getGroupCount(n);)T.push(null);for(var x=[],I=0;I<T.length;I++){var O=T[I],M=null;if(null!=O&&("object"!=typeof O?M=O:null!=O.value&&(M=O.value)),null!=M){var D=r.getUnboundedCoordAt(M),P=n.xAxis.getUnboundedCoordAt(j.getXValue(n,T,I));x.push(new f(P,D,D))}else x.push(new f)}m=new _(n,(!1),i,null,p,g,null,d,h,x)}return m},rt._getAxisCoord=function(t,e,n){if(e.isGroupAxis()){var i=F.getGroupIndex(t,n);if(i>=0)return e.getUnboundedCoordAt(i)}return isNaN(n)?null:e.getUnboundedCoordAt(n)},t.SparkChart=function(){},t.Obj.createSubclass(t.SparkChart,t.BaseComponent),t.SparkChart.newInstance=function(e,n,i){var r=new t.SparkChart;return r.Init(e,n,i),r},t.SparkChart.getDefaults=function(t){return(new at).getDefaults(t)},t.SparkChart.prototype.Init=function(e,n,i){t.SparkChart.superclass.Init.call(this,e,n,i),this.Defaults=new at,this.EventManager=new st(this),this.EventManager.addListeners(this),this._chart=t.Chart.newInstance(e,this._onRenderEnd,this),this.addChild(this._chart),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new t.KeyboardHandler(this.EventManager,this)),this._tooltipMask=new t.Rect(e),this.addChild(this._tooltipMask),this.setId("sparkChart1000"+Math.floor(1e9*Math.random()))},t.SparkChart.prototype.SetOptions=function(e){e?(this.Options=this.Defaults.calcOptions(e),t.Agent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults())},t.SparkChart.prototype.setId=function(e){t.SparkChart.superclass.setId.call(this,e),this._chart&&this._chart.setId(e+"chart")},t.SparkChart.prototype.render=function(e,n,i){this.SetOptions(e),isNaN(n)||isNaN(i)||(this.Width=n,this.Height=i),this._eventReceived=!1,this._isDoneRendering=!1,lt.render(this,this.Width,this.Height);var r=this.Options.shortDesc;this._tooltipMask.setWidth(this.Width),this._tooltipMask.setHeight(this.Height),this._tooltipMask.setInvisibleFill();var o=this.Options.tooltip,a=o?o.renderer:null,s=this.Options.color;if(a){var l={component:this.Options._widgetConstructor,color:s};this._peer=new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),a,s,l),
this.EventManager.associate(this._tooltipMask,this._peer)}else r?(this._peer=new t.SimpleObjPeer(null,r,s),this.EventManager.associate(this._tooltipMask,this._peer)):this._peer=null;this.Options._selectingCursor&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.UpdateAriaAttributes(),this._eventReceived&&this.RenderComplete(),this._isDoneRendering=!0},t.SparkChart.prototype._onRenderEnd=function(t){this._eventReceived=!0,"ready"==t.type&&this._isDoneRendering&&this.RenderComplete()},t.SparkChart.prototype.__getChart=function(){return this._chart},t.SparkChart.prototype.getAutomation=function(){return new ot(this)},t.SparkChart.prototype.GetComponentDescription=function(){return t.Bundle.getTranslation(this.getOptions(),"componentName",t.Bundle.UTIL_PREFIX,"CHART")},t.SparkChart.prototype.UpdateAriaAttributes=function(){var e=t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),this.Options.shortDesc?[this.Options.shortDesc]:null);this.IsParentRoot()?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),e]))):(this.setAriaRole("img"),this.setAriaProperty("label",e))},t.SparkChart.prototype.__getLogicalObject=function(){return this._peer};var ot=function(t){this._sparkChart=t};t.Obj.createSubclass(ot,t.Automation),ot.prototype.getDataItem=function(t){var e=this._sparkChart.__getChart(),n=e.getAutomation().getDataItem(0,t);return n?{borderColor:n.borderColor,color:n.color,date:n.x,low:n.low,high:n.high,value:null==n.low||null==n.high?n.value:n.high-n.low}:null};var at=function(){this.Init({skyros:at.VERSION_1,alta:at.SKIN_ALTA})};t.Obj.createSubclass(at,t.BaseComponentDefaults),at.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,color:"#267db3"},at.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,type:"line",animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,color:"#666699",firstColor:null,lastColor:null,highColor:null,lowColor:null,visualEffects:"auto",baselineScaling:"min",barSpacing:"auto",lineWidth:1,lineStyle:"solid",lineType:"straight",markerSize:5,markerShape:"auto",barGapRatio:.25,_statusMessageStyle:new t.CSSStyle("font-size: 12px; color: #404259;")};var st=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._sparkChart=t};t.Obj.createSubclass(st,t.EventManager),st.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;if(e.keyCode==t.KeyboardEvent.TAB){var n=this._sparkChart.getCtx().getStageAbsolutePosition();this.ProcessObjectTooltip(e,n.x,n.y,this._sparkChart.__getLogicalObject(),this._sparkChart)}return!1},st.prototype.OnBlur=function(t){st.superclass.OnBlur.call(this,t),this.hideTooltip()};var lt=new Object;t.Obj.createSubclass(lt,t.Obj),lt.render=function(t,e,n){var i=t.__getChart(),r=lt._convertOptionsObj(t),o=t.getOptions();if("area"==o.type||"line"==o.type||"lineWithArea"==o.type){var a=lt._getDataItems(t),s=!1;if(o.firstColor||o.lastColor||o.highColor||o.lowColor)s=!0;else for(var l=0;l<a.length;l++)if(a[l]&&"on"==a[l].markerDisplayed){s=!0;break}if(s&&a.length>0||"none"==o.lineType){var u=o.markerSize/2;e-=2*u,n-=2*u,i.setTranslate(u,u)}}i.render(r,e,n)},lt._getDataItems=function(t){var e=t.getOptions();return e&&e.items?e.items:[]},lt._convertOptionsObj=function(e){var n=e.getOptions(),i={styleDefaults:{},xAxis:{},yAxis:{},groups:[]};i.translations=n.translations;for(var r="floatingBar"==n.type,o=[],a=-1,s=-1,l=-(1/0),u=1/0,h=lt._getDataItems(e),c=0;c<h.length;c++){var d=h[c],p={};d instanceof Object?(r?(p.low=d.floatValue,p.high=d.floatValue+d.value):(p.value=d.value,p.low=d.low,p.high=d.high),d.date&&(i.timeAxisType="enabled",i.groups.push(d.date)),"on"==d.markerDisplayed&&(p.markerDisplayed="on"),d.color&&(p.color=d.color),d.borderColor&&(p.borderColor=d.borderColor),d.markerShape&&(p.markerShape=d.markerShape),d.markerSize&&(p.markerSize=d.markerSize),d.className&&(p.className=d.className),d.style&&(p.style=d.style)):p.value=d,o.push(p);var g=null!=p.value?p.value:Math.max(p.low,p.high);l<g&&(l=g,a=c);var f=null!=p.value?p.value:Math.min(p.low,p.high);u>f&&(u=f,s=c)}n.highColor&&a>=0&&(o[a].markerDisplayed="on",o[a].color||(o[a].color=n.highColor)),n.lowColor&&s>=0&&(o[s].markerDisplayed="on",o[s].color||(o[s].color=n.lowColor)),n.firstColor&&o.length>0&&(o[0].markerDisplayed="on",o[0].color||(o[0].color=n.firstColor)),n.lastColor&&o.length>0&&(o[o.length-1].markerDisplayed="on",o[o.length-1].color||(o[o.length-1].color=n.lastColor)),i.series=[{items:o,areaColor:n.areaColor,className:n.className,style:n.style,areaClassName:n.areaClassName,areaStyle:n.areaStyle}],n.referenceObjects&&(i.yAxis.referenceObjects=n.referenceObjects),i.__spark=!0;var _=n.barSpacing;"auto"==_&&(_=t.Agent.getDevicePixelRatio()>1?"subpixel":"pixel"),i.__sparkBarSpacing=_,i.type=r?"bar":n.type,i.animationOnDataChange=n.animationOnDataChange,i.animationOnDisplay=n.animationOnDisplay,i.emptyText=n.emptyText,i.styleDefaults.colors=[n.color],i.styleDefaults.animationDuration=n.animationDuration,i.styleDefaults.animationIndicators="none",i.styleDefaults.lineWidth=n.lineWidth,i.styleDefaults.lineStyle=n.lineStyle,i.styleDefaults.lineType=n.lineType,i.styleDefaults.markerSize=n.markerSize,i.styleDefaults.markerShape=n.markerShape,i.styleDefaults.barGapRatio=n.barGapRatio,i.styleDefaults.dataItemGaps="0%",i.xAxis.rendered="off",i.yAxis.rendered="off";var m="zero"==n.baselineScaling,v=l!=u?.1*(l-u):.1*Math.abs(l);return i.yAxis.min=m&&u>=0?0:u-v,i.yAxis.max=m&&l<=0?0:l+v,"none"==n.visualEffects||"area"!=n.type&&"lineWithArea"!=n.type?i.styleDefaults.seriesEffect="color":i.styleDefaults.seriesEffect="gradient",i.layout={gapWidthRatio:0,gapHeightRatio:0},i.legend={rendered:"off"},i._statusMessageStyle=n._statusMessageStyle,i},t.exportProperty(t,"Chart",t.Chart),t.exportProperty(t.Chart,"newInstance",t.Chart.newInstance),t.exportProperty(t.Chart.prototype,"destroy",t.Chart.prototype.destroy),t.exportProperty(t.Chart.prototype,"getAutomation",t.Chart.prototype.getAutomation),t.exportProperty(t.Chart.prototype,"getDefaults",t.Chart.prototype.getDefaults),t.exportProperty(t.Chart.prototype,"getValuesAt",t.Chart.prototype.getValuesAt),t.exportProperty(t.Chart.prototype,"highlight",t.Chart.prototype.highlight),t.exportProperty(t.Chart.prototype,"positionDataCursor",t.Chart.prototype.positionDataCursor),t.exportProperty(t.Chart.prototype,"render",t.Chart.prototype.render),t.exportProperty(t.Chart.prototype,"select",t.Chart.prototype.select),t.exportProperty(e.prototype,"getDomElementForSubId",e.prototype.getDomElementForSubId),t.exportProperty(e.prototype,"getDataItem",e.prototype.getDataItem),t.exportProperty(e.prototype,"getGroup",e.prototype.getGroup),t.exportProperty(e.prototype,"getSeries",e.prototype.getSeries),t.exportProperty(e.prototype,"getGroupCount",e.prototype.getGroupCount),t.exportProperty(e.prototype,"getSeriesCount",e.prototype.getSeriesCount),t.exportProperty(e.prototype,"getTitle",e.prototype.getTitle),t.exportProperty(e.prototype,"getLegend",e.prototype.getLegend),t.exportProperty(e.prototype,"getPlotArea",e.prototype.getPlotArea),t.exportProperty(e.prototype,"getXAxis",e.prototype.getXAxis),t.exportProperty(e.prototype,"getYAxis",e.prototype.getYAxis),t.exportProperty(e.prototype,"getY2Axis",e.prototype.getY2Axis),t.exportProperty(a.prototype,"getId",a.prototype.getId),t.exportProperty(a.prototype,"getSeries",a.prototype.getSeries),t.exportProperty(a.prototype,"getGroup",a.prototype.getGroup),t.exportProperty(t,"SparkChart",t.SparkChart),t.exportProperty(t.SparkChart,"newInstance",t.SparkChart.newInstance),t.exportProperty(t.SparkChart.prototype,"destroy",t.SparkChart.prototype.destroy),t.exportProperty(t.SparkChart.prototype,"getAutomation",t.SparkChart.prototype.getAutomation),t.exportProperty(t.SparkChart.prototype,"getDefaults",t.SparkChart.prototype.getDefaults),t.exportProperty(t.SparkChart.prototype,"render",t.SparkChart.prototype.render),t.exportProperty(ot.prototype,"getDataItem",ot.prototype.getDataItem)}(t),t}),define("ojs/ojchart",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtChart"],function(t,e,n,i,r){t.__registerWidget("oj.ojSparkChart",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{},_CreateDvtComponent:function(t,e,n){return this._focusable({element:this.element,applyHighlight:!0}),r.SparkChart.newInstance(t,e,n)},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-sparkchart"),t},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtUtilBundle.CHART"]=t.componentName,e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getDataItem:function(e){var n=this._component.getAutomation();return new t.SparkChartDataItem(n.getDataItem(e))},_GetComponentDeferredDataPaths:function(){return{root:["items"]}}}),t.SparkChartDataItem=function(t){this._data=t},t.SparkChartDataItem.prototype.getBorderColor=function(){return this._data?this._data.borderColor:null},t.SparkChartDataItem.prototype.getColor=function(){return this._data?this._data.color:null},t.SparkChartDataItem.prototype.getDate=function(){return this._data?this._data.date:null},t.SparkChartDataItem.prototype.getFloatValue=function(){return this.getLow()},t.SparkChartDataItem.prototype.getLow=function(){return this._data?this._data.low:null},t.SparkChartDataItem.prototype.getHigh=function(){return this._data?this._data.high:null},t.SparkChartDataItem.prototype.getValue=function(){return this._data?this._data.value:null},t.__registerWidget("oj.ojChart",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{categoryFilter:null,categoryHighlight:null,optionChange:null,selectInput:null,viewportChange:null,viewportChangeInput:null,drill:null},_CreateDvtComponent:function(t,e,n){return r.Chart.newInstance(t,e,n)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-chart-item"==e?e="dataItem["+t.seriesIndex+"]["+t.itemIndex+"]":"oj-chart-group"==e?e="group"+this._GetStringFromIndexPath(t.indexPath):"oj-chart-series"==e?e="series["+t.index+"]":"oj-chart-axis-title"==e?e=t.axis+":title":"oj-chart-reference-object"==e?e=t.axis+":referenceObject["+t.index+"]":"oj-legend-section"==e?e="legend:section"+this._GetStringFromIndexPath(t.indexPath):"oj-legend-item"==e?(e="legend:section"+this._GetStringFromIndexPath(t.sectionIndexPath),e+=":item["+t.itemIndex+"]"):"oj-chart-tooltip"==e&&(e="tooltip"),e},_ConvertSubIdToLocator:function(t){var e={};if(0==t.indexOf("dataItem")){var n=this._GetIndexPath(t);e.subId="oj-chart-item",e.seriesIndex=n[0],e.itemIndex=n[1]}else if(0==t.indexOf("group"))e.subId="oj-chart-group",e.indexPath=this._GetIndexPath(t);else if(0==t.indexOf("series"))e.subId="oj-chart-series",e.index=this._GetFirstIndex(t);else if(t.indexOf("Axis:title")>0)e.subId="oj-chart-axis-title",e.axis=t.substring(0,t.indexOf(":"));else if(t.indexOf("Axis:referenceObject")>0)e.subId="oj-chart-reference-object",e.axis=t.substring(0,t.indexOf(":")),e.index=this._GetFirstIndex(t);else if(0==t.indexOf("legend"))if(t.indexOf(":item")>0){var i=t.indexOf(":item"),r=t.substring(0,i),o=t.substring(i);e.subId="oj-legend-item",e.sectionIndexPath=this._GetIndexPath(r),e.itemIndex=this._GetFirstIndex(o)}else 0==t.indexOf("section")&&(e.subId="oj-legend-section",e.indexPath=this._GetIndexPath(t));else"tooltip"==t&&(e.subId="oj-chart-tooltip");return e},_ProcessStyles:function(){if(this._super(),this.options.styleDefaults||(this.options.styleDefaults={}),!this.options.styleDefaults.colors){var e=new t.ColorAttributeGroupHandler;this.options.styleDefaults.colors=e.getValueRamp()}},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-chart"),t},_GetChildStyleClasses:function(){var t=this._super();return t["oj-chart-data-label"]={path:"styleDefaults/dataLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-stack-label"]={path:"styleDefaults/stackLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-footnote"]={path:"footnote/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-pie-center-label"]={path:"pieCenter/labelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-slice-label"]={path:"styleDefaults/sliceLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-subtitle"]={path:"subtitle/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-stock-falling"]={path:"styleDefaults/stockFallingColor",property:"background-color"},t["oj-chart-stock-range"]={path:"styleDefaults/stockRangeColor",property:"background-color"},t["oj-chart-stock-rising"]={path:"styleDefaults/stockRisingColor",property:"background-color"},t["oj-chart-tooltip-label"]={path:"styleDefaults/tooltipLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-title"]={path:"title/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-xaxis-tick-label"]={path:"xAxis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-xaxis-title"]={path:"xAxis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-yaxis-tick-label"]={path:"yAxis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-yaxis-title"]={path:"yAxis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-y2axis-tick-label"]={path:"y2Axis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-y2axis-title"]={path:"y2Axis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend"]={path:"legend/textStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend-title"]={path:"legend/titleStyle",property:"CSS_TEXT_PROPERTIES"},t},_GetEventTypes:function(){return["categoryFilter","categoryHighlight","drill","optionChange","selectInput","viewportChange","viewportChangeInput"]},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtChartBundle.DEFAULT_GROUP_NAME"]=t.labelDefaultGroupName,e["DvtChartBundle.LABEL_SERIES"]=t.labelSeries,e["DvtChartBundle.LABEL_GROUP"]=t.labelGroup,e["DvtChartBundle.LABEL_VALUE"]=t.labelValue,e["DvtChartBundle.LABEL_TARGET_VALUE"]=t.labelTargetValue,e["DvtChartBundle.LABEL_X"]=t.labelX,e["DvtChartBundle.LABEL_Y"]=t.labelY,e["DvtChartBundle.LABEL_Z"]=t.labelZ,e["DvtChartBundle.LABEL_PERCENTAGE"]=t.labelPercentage,e["DvtChartBundle.LABEL_LOW"]=t.labelLow,e["DvtChartBundle.LABEL_HIGH"]=t.labelHigh,e["DvtChartBundle.LABEL_OPEN"]=t.labelOpen,e["DvtChartBundle.LABEL_CLOSE"]=t.labelClose,e["DvtChartBundle.LABEL_VOLUME"]=t.labelVolume,e["DvtChartBundle.LABEL_Q1"]=t.labelQ1,e["DvtChartBundle.LABEL_Q2"]=t.labelQ2,e["DvtChartBundle.LABEL_Q3"]=t.labelQ3,e["DvtChartBundle.LABEL_MIN"]=t.labelMin,e["DvtChartBundle.LABEL_MAX"]=t.labelMax,e["DvtChartBundle.LABEL_OTHER"]=t.labelOther,e["DvtChartBundle.PAN"]=t.tooltipPan,e["DvtChartBundle.MARQUEE_SELECT"]=t.tooltipSelect,e["DvtChartBundle.MARQUEE_ZOOM"]=t.tooltipZoom,e["DvtUtilBundle.CHART"]=t.componentName,e},_HandleEvent:function(t){var e=t.type;if("selection"===e){var n=t.selection;if(n){for(var i=[],r=[],o=0;o<n.length;o++){var a={id:n[o].id,series:n[o].series,group:n[o].group},s={data:n[o].data,seriesData:n[o].seriesData,groupData:n[o].groupData};i.push(a),r.push(s)}var l={endGroup:t.endGroup,startGroup:t.startGroup,xMax:t.xMax,xMin:t.xMin,yMax:t.yMax,yMin:t.yMin,y2Max:t.y2Max,y2Min:t.y2Min,component:t.component,selectionData:r};t.complete?this._UserOptionChange("selection",i,l):(l.items=i,this._trigger("selectInput",null,l))}}else if("categoryHide"===e||"categoryShow"===e){var u="categoryHide"===e?"out":"in";this._trigger("categoryFilter",null,{category:t.category,type:u}),this._UserOptionChange("hiddenCategories",t.hiddenCategories)}else if("categoryHighlight"===e){var h=t.categories&&t.categories.length>0?"on":"off";this._trigger("categoryHighlight",null,{categories:t.categories,type:h}),this._UserOptionChange("highlightedCategories",t.categories)}else if("viewportChange"===e){var c={endGroup:t.endGroup,startGroup:t.startGroup,xMax:t.xMax,xMin:t.xMin,yMax:t.yMax,yMin:t.yMin};t.complete&&(this.options.xAxis||(this.options.xAxis={}),this.options.yAxis||(this.options.yAxis={}),this.options.xAxis.viewportStartGroup=null,this.options.xAxis.viewportEndGroup=null,null!=t.xMin&&null!=t.xMax&&(this.options.xAxis.viewportMin=t.xMin,this.options.xAxis.viewportMax=t.xMax),null!=t.yMin&&null!=t.yMax&&(this.options.yAxis.viewportMin=t.yMin,this.options.yAxis.viewportMax=t.yMax)),this._trigger(t.complete?"viewportChange":"viewportChangeInput",null,c)}else"drill"===e?this._trigger("drill",null,{id:t.id,series:t.series,group:t.group,data:t.data,seriesData:t.seriesData,groupData:t.groupData,component:t.component}):this._super(t)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overviewGrippy=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/drag_horizontal.png"),e.panCursorDown=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur"),e.panUp="oj-chart-pan-icon",e.panUpHover="oj-chart-pan-icon oj-hover",e.panDown="oj-chart-pan-icon oj-active",e.panDownHover="oj-chart-pan-icon oj-hover oj-active",e.selectUp="oj-chart-select-icon",e.selectUpHover="oj-chart-select-icon oj-hover",e.selectDown="oj-chart-select-icon oj-active",e.selectDownHover="oj-chart-select-icon oj-hover oj-active",e.zoomUp="oj-chart-zoom-icon",e.zoomUpHover="oj-chart-zoom-icon oj-hover",e.zoomDown="oj-chart-zoom-icon oj-active",e.zoomDownHover="oj-chart-zoom-icon oj-hover oj-active"},getTitle:function(){var t=this._component.getAutomation();return t.getTitle()},getGroup:function(t){var e=this._component.getAutomation();return e.getGroup(t)},getSeries:function(t){var e=this._component.getAutomation();return e.getSeries(t)},getGroupCount:function(){var t=this._component.getAutomation();return t.getGroupCount()},getSeriesCount:function(){var t=this._component.getAutomation();return t.getSeriesCount()},getDataItem:function(t,e){var n=this._component.getAutomation().getDataItem(t,e);return this._AddAutomationGetters(n),n},getLegend:function(){var t=this._component.getAutomation().getLegend();return this._AddAutomationGetters(t),t},getPlotArea:function(){var t=this._component.getAutomation().getPlotArea();return this._AddAutomationGetters(t),t},getXAxis:function(){var t=this._component.getAutomation().getXAxis();return this._AddAutomationGetters(t),t},getYAxis:function(){var t=this._component.getAutomation().getYAxis();return this._AddAutomationGetters(t),t},getY2Axis:function(){var t=this._component.getAutomation().getY2Axis();return this._AddAutomationGetters(t),t},getValuesAt:function(t,e){return this._component.getValuesAt(t,e)},getContextByNode:function(t){var e=this.getSubIdByNode(t);return e&&"oj-chart-tooltip"!==e.subId?e:null},_GetComponentDeferredDataPaths:function(){return{root:["groups","series"]}}}),function(){var e={properties:{animationOnDataChange:{type:"string"},animationOnDisplay:{type:"string"},coordinateSystem:{type:"string"},dataCursor:{type:"string"},dataCursorBehavior:{type:"string"},dataCursorPosition:{type:"object"},dataLabel:{},dnd:{type:"object"},dragMode:{type:"string"},drilling:{type:"string"},footnote:{type:"object"},groups:{type:"Array<object>|Array<string>"},hiddenCategories:{type:"Array<string>"},hideAndShowBehavior:{type:"string"},highlightedCategories:{type:"Array<string>"},highlightMatch:{type:"string"},hoverBehavior:{type:"string"},initialZooming:{type:"string"},legend:{type:"object"},orientation:{type:"string"},otherThreshold:{type:"number"},overview:{type:"object"},pieCenter:{type:"object"},pieCenterLabel:{type:"object"},plotArea:{type:"object"},polarGridShape:{type:"string"},selection:{type:"Array<string>|Array<object>"},selectionMode:{type:"string"},series:{type:"Array<object>"},sorting:{type:"string"},splitDualY:{type:"string"},splitterPosition:{type:"number"},stack:{type:"string"},stackLabel:{type:"string"},styleDefaults:{type:"object"},subtitle:{type:"object"},timeAxisType:{type:"string"},title:{type:"object"},tooltip:{type:"object"},touchResponse:{type:"string"},type:{type:"string"},valueFormats:{type:"Array<object>"},xAxis:{type:"object"},y2Axis:{type:"object"},yAxis:{type:"object"},zoomAndScroll:{type:"string"},zoomDirection:{type:"string"}},methods:{getContextByNode:{},getDataItem:{},getGroup:{},getGroupCount:{},getLegend:{},getPlotArea:{},getSeries:{},getSeriesCount:{},getTitle:{},getValuesAt:{},getXAxis:{},getY2Axis:{},getYAxis:{}},extension:{_widgetName:"ojChart"}};t.Components.registerMetadata("ojChart","dvtBaseComponent",e),t.Components.register("oj-chart",t.Components.getMetadata("ojChart"))}(),function(){var e={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string"},animationOnDisplay:{type:"string"},areaClassName:{type:"string"},areaColor:{type:"string"},areaStyle:{type:"object"},barGapRatio:{type:"number"},baselineScaling:{type:"string"},className:{type:"string"},color:{type:"string"},firstColor:{type:"string"},highColor:{type:"string"},items:{type:"Array<object>|Array<number>"},lastColor:{type:"string"},lineStyle:{type:"string"},lineType:{type:"string"},lineWidth:{type:"number"},lowColor:{type:"string"},markerShape:{type:"string"},markerSize:{type:"number"},referenceObjects:{type:"Array<object>"},style:{type:"object"},tooltip:{type:"object"},type:{type:"string"},visualEffects:{type:"string"}},methods:{getDataItem:{}},extension:{_widgetName:"ojSparkChart"}};t.Components.registerMetadata("ojSparkChart","dvtBaseComponent",e),t.Components.register("oj-spark-chart",t.Components.getMetadata("ojSparkChart"))}()}),define("ojs/ojtoolbar",["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(t,e){!function(){t.__registerWidget("oj.ojToolbar",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{chroming:"half"},_InitOptions:function(e,n){this._super(e,n),"disabled"in n&&t.Logger.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.")},_ComponentCreate:function(){this._super(),this.element.attr(t.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-toolbar oj-component").attr("role","toolbar"),this._setup(!0)},_NotifyContextMenuGesture:function(t,e,n){var i=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(e,n,{launcher:i,position:{of:"keyboard"===n?i.ojButton("widget"):e}})},_setOption:function(e,n){return"disabled"===e?void t.Logger.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.  Ignoring the call."):(this._superApply(arguments),void("chroming"===e&&(this.$buttonsets.ojButtonset("refresh"),this.$topLevelButtons.ojButton("refresh"))))},refresh:function(){this._super(),this._setup(!1)},_setup:function(t){var n=this;this.isRtl="rtl"===this._GetReadingDirection(),this.$buttons=this.element.find(":oj-button").unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){n._handleKeyDown(t,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){e(this).ojButton("option","disabled")||n._setTabStop(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){n._setTabStop(e(this))}),this.$buttonsets=this.element.find(":oj-buttonset").ojButtonset("refresh"),this.$topLevelButtons=this.$buttons.not(this.$buttonsets.find(":oj-button")).ojButton("refresh"),this.$enabledButtons=this.$buttons.filter(function(t){return!e(this).ojButton("option","disabled")}),this._initTabindexes(t)},_initTabindexes:function(t){var n=e(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1");var i;i=t||!n.is(this.$enabledButtons)?this.$enabledButtons.first():n,this._setTabStop(i)},_mapToTabbable:function(t){var e=this.$enabledButtons;return t.map(function(t,i){if("radio"!=i.type||i.checked||""==i.name)return i;var r=n(i,e).filter(":checked");return r.length?r[0]:i})},_setTabStop:function(t){t=this._mapToTabbable(t);var n=t[0],i=this._lastTabStop;n!==i&&(e(i).attr("tabindex","-1"),t.attr("tabindex","0"),this._lastTabStop=n)},_handleKeyDown:function(t,n){switch(t.which){case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.preventDefault();var i=this.$enabledButtons,r=i.length;if(r<2)break;var o=i.index(n),a=t.which==e.ui.keyCode.RIGHT^this.isRtl?1:-1,s=(o+a+r)%r;i.eq(s).focus();break;case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:"radio"==n.attr("type")&&t.preventDefault()}},_destroy:function(){this.element.removeClass("oj-toolbar oj-component").removeAttr(t.Components._OJ_CONTAINER_ATTR).removeAttr("role"),this.$buttons.attr("tabindex","0"),this.$buttonsets.ojButtonset("refresh"),this.$topLevelButtons.ojButton("refresh")}});var n=function(t,e){var n,i=t.name;if(i){i=i.replace(/'/g,"\\'");var r=":radio[name='"+i+"']:oj-button";n=e.filter(r)}else n=e.filter(t).filter(":oj-button");return n}}(),t.Components.setDefaultOptions({ojToolbar:{chroming:t.Components.createDynamicPropertyGetter(function(e){return(t.ThemeUtils.parseJSONFromFontFamily("oj-toolbar-option-defaults")||{}).chroming})}}),function(){var e={properties:{chroming:{type:"string"},disabled:{}},methods:{destroy:{},refresh:{},widget:{}},extension:{_widgetName:"ojToolbar"}};t.Components.registerMetadata("ojToolbar","baseComponent",e),t.Components.register("oj-toolbar",t.Components.getMetadata("ojToolbar"))}()}),define("views/chart",["knockout","ojs/ojchart","ojs/ojtoolbar","ojs/ojbutton"],function(t){function e(e){this.acts=e,this.type=t.observable("bar"),this.stack=t.observable("off"),this.orientation=t.observable("horizontal"),this.series=t.computed(n,this),this.votesConverter=t.observable(r),this.typeOptions=[{id:"bar",label:"bar",value:"bar",icon:"oj-icon demo-bar-unstack"},{id:"pie",label:"pie",value:"pie",icon:"oj-icon demo-bar-stack"}],this.stackOptions=[{id:"unstacked",label:"unstacked",value:"off",icon:"oj-icon demo-bar-unstack"},{id:"stacked",label:"stacked",value:"on",icon:"oj-icon demo-bar-stack"}],this.orientationOptions=[{id:"vertical",label:"vertical",value:"vertical",icon:"oj-icon demo-bar-vert"},{id:"horizontal",label:"horizontal",value:"horizontal",icon:"oj-icon demo-bar-horiz"}]}function n(){return"pie"===this.type()?this.acts.map(function(t){return{name:t.name,items:[{value:t.numberOfVotes,label:t.numberOfVotes}]}}):this.acts.map(function(t){return{name:t.name,items:[t.numberOfVotes]}})}var i=oj.Validation.converterFactory("number"),r=i.createConverter({minimumFractionDigits:0,maximumFractionDigits:0});return e}),define("ojs/ojfilmstrip",["ojs/ojcore","jquery","ojs/ojcomponentcore","promise"],function(t,e){t.FilmStripPagingModel=function(){this.Init()},t.Object.createSubclass(t.FilmStripPagingModel,t.EventSource,"oj.FilmStripPagingModel"),t.FilmStripPagingModel.prototype.Init=function(){t.FilmStripPagingModel.superclass.Init.call(this),this._page=-1,this._totalSize=0,this._pageSize=-1},t.FilmStripPagingModel.prototype.setTotalSize=function(t){this._totalSize=t},t.FilmStripPagingModel.prototype.getPageSize=function(){return this._pageSize},t.FilmStripPagingModel.prototype.getPage=function(){return this._page},t.FilmStripPagingModel.prototype.setPage=function(t,e){t=parseInt(t,10);try{var n=this.getPageCount(),i=this._page,r=this._pageSize,o=r;if(e&&e.pageSize&&(o=e.pageSize),0===this._totalSize&&o===-1)return Promise.resolve();var a=Math.ceil(this._totalSize/o);if(t<0||t>a-1)throw new Error("JET FilmStrip: Invalid 'page' set: "+t);var s=!1;if(t!=i||o!=r){var l=this.handleEvent("beforePage",{page:t,previousPage:i});if(l===!1)return Promise.reject();s=!0}this._page=t,this._pageSize=o;var u=this.getPageCount(),h=this;return new Promise(function(e,r){n!=u&&h.handleEvent("pageCount",{pageCount:u,previousPageCount:n}),s&&h.handleEvent("page",{page:t,previousPage:i}),e(null)})}catch(c){return Promise.reject(c)}},t.FilmStripPagingModel.prototype.getStartItemIndex=function(){return this._page===-1&&this._pageSize===-1?-1:this._page*this._pageSize},t.FilmStripPagingModel.prototype.getEndItemIndex=function(){return Math.min(this.getStartItemIndex()+this._pageSize,this._totalSize)-1},t.FilmStripPagingModel.prototype.getPageCount=function(){return Math.ceil(this._totalSize/this._pageSize)},t.FilmStripPagingModel.prototype.totalSize=function(){return this._totalSize},t.FilmStripPagingModel.prototype.totalSizeConfidence=function(){return"actual"},function(){t.__registerWidget("oj.ojFilmStrip",e.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{maxItemsPerPage:0,orientation:"horizontal",currentItem:0,arrowPlacement:"adjacent",arrowVisibility:"auto"},_ComponentCreate:function(){this._super();var e=this.element;e.addClass("oj-filmstrip oj-component").attr("tabindex",0).attr("role","region"),e.uniqueId();var i=this.options;if(i.disabled&&t.Logger.warn(tt),i.orientation!==m&&i.orientation!==q)throw new Error(c+i.orientation);if(i.arrowPlacement!==n&&i.arrowPlacement!==K)throw new Error(d+i.arrowPlacement);if(i.arrowVisibility!==Z&&i.arrowVisibility!==f&&i.arrowVisibility!==v&&i.arrowVisibility!==r)throw new Error(p+i.arrowVisibility);this.touchEventNamespace=this.eventNamespace+"Touch",this.mouseEventNamespace=this.eventNamespace+"Mouse",this.keyEventNamespace=this.eventNamespace+"Key",this.navArrowHoverableEventNamespace=this.eventNamespace+"NavArrowHoverable",this._setup(!0)},refresh:function(){this._super(),this._setup(!1)},getItemsPerPage:function(){return this._itemsPerPage},getPagingModel:function(){return this._pagingModel},_NotifyShown:function(){this._super(),this._needsSetup&&this._setup(this._needsSetup[0])},_NotifyAttached:function(){this._super(),this._needsSetup&&this._setup(this._needsSetup[0])},_setup:function(n){var i=this;if(n&&!this._pagingModel&&(this._pagingModel=new t.FilmStripPagingModel),n&&!this._filterNestedFilmStripsFunc&&(this._filterNestedFilmStripsFunc=function(t,n){return e(n).closest(".oj-filmstrip")[0]===i.element[0]}),!this._canCalculateSizes()){var r=!1;return this._needsSetup&&(r=this._needsSetup[0]),void(this._needsSetup=[n||r])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=t.DomUtils.isTouchSupported();var o=this.element;n?(this._itemsPerPage=0,this._handlePageFunc=function(t){i._handlePage(t)},this._componentSize=0,this._itemSize=-1,this._handleTransitionEndFunc=function(t){i._handleTransitionEnd()},this._handleResizeFunc=function(t,e){i._handleResize()},this._bTouchSupported&&(this._handleTouchStartFunc=function(t){i._handleTouchStart(t)},this._handleTouchMoveFunc=function(t){i._handleTouchMove(t)},this._handleTouchEndFunc=function(t){i._handleTouchEnd(t)},this._addTouchListeners()),this._handleMouseDownFunc=function(t){i._handleMouseDown(t)},this._handleMouseMoveFunc=function(t){i._handleMouseMove(t)},this._handleMouseUpFunc=function(t){i._handleMouseUp(t)},this._addMouseListeners(),this._handleKeyDownFunc=function(t){i._handleKeyDown(t)},this._addKeyListeners()):this._destroyInternal();for(var a=o.children(),s=0;s<a.length;s++)t.Components.subtreeDetached(a[s]);var l=this._pagingModel;if(n&&l.on("page",this._handlePageFunc),l.setTotalSize(a.length),this._wrapChildren(),a.length>0){this._adjustSizes();for(var s=0;s<a.length;s++)t.Components.subtreeAttached(a[s]);t.DomUtils.addResizeListener(o[0],this._handleResizeFunc)}},_destroy:function(){this._bTouchSupported&&(this._removeTouchListeners(),this._handleTouchStartFunc=null,this._handleTouchMoveFunc=null,this._handleTouchEndFunc=null),this._removeMouseListeners(),this._handleMouseDownFunc=null,this._handleMouseMoveFunc=null,this._handleMouseUpFunc=null,this._removeKeyListeners(),this._handleKeyDownFunc=null,this._destroyInternal(),this._pagingModel.off("page",this._handlePageFunc),this._handlePageFunc=null,this._pagingModel=null,this._handleResizeFunc=null,this._handleTransitionEndFunc=null,
this._filterNestedFilmStripsFunc=null;var t=this.element;t.removeClass("oj-filmstrip oj-component "+O).removeAttr("tabindex role"),t.removeUniqueId(),this._super()},_destroyInternal:function(){var e=this.element;t.DomUtils.removeResizeListener(e[0],this._handleResizeFunc),this._itemSize=-1,this._queuedHandleResize&&(clearTimeout(this._queuedHandleResize),this._queuedHandleResize=null);for(var n=this._getItems(),i=0;i<n.length;i++)t.Components.subtreeDetached(n[i]);this._clearCalculatedSizes();var r=this._getItemContainers();r.unwrap(),this._unwrapChildren();for(var i=0;i<n.length;i++)t.Components.subtreeAttached(n[i])},_setOption:function(e,i,o){var a=this.options,s=!1,l=-1,u=this._pagingModel,g=u.getPage();switch(e){case"disabled":t.Logger.warn(tt);break;case"orientation":if(i!==m&&i!==q)throw new Error(c+i);s=a.orientation!=i;break;case"maxItemsPerPage":s=a.maxItemsPerPage!=i;break;case"arrowPlacement":if(i!==n&&i!==K)throw new Error(d+i);s=a.arrowPlacement!=i;break;case"arrowVisibility":if(i!==Z&&i!==f&&i!==v&&i!==r)throw new Error(p+i);s=a.arrowVisibility!=i;break;case y:if(a.currentItem!=i&&(l=this._findPage(i),l<0||l>=u.getPageCount()))throw new Error(h+i)}switch(this._super(e,i,o),e){case y:l>-1&&l!=g&&u.setPage(l)}s&&this._setup(!1)},_handleResize:function(){if(this._bHandlingResize){if(!this._queuedHandleResize){var t=this;this._queuedHandleResize=setTimeout(function(){t._queuedHandleResize=null,t._handleResize()},0)}}else this._bHandlingResize=!0,this._adjustSizes(!0),this._bHandlingResize=!1},_isHorizontal:function(){var t=this.options;return t.orientation!==q},_getCssPositionAttr:function(){var t=this._isHorizontal();return t?this._bRTL?"right":"left":"top"},_getCssSizeAttr:function(){var t=this._isHorizontal();return t?"width":"height"},_canCalculateSizes:function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.width="10px",e.height="10px";var n=this.element[0];n.appendChild(t);var i=!1;try{i=t.offsetWidth>0&&t.offsetHeight>0}catch(r){}return n.removeChild(t),i},_wrapChildren:function(){var t=this.element,e=this._isHorizontal(),i=t.children();i.addClass(M).wrap("<div class='"+I+" "+D+"'></div>");var r=this._getCssPositionAttr(),o=t.children().wrapAll("<div class='"+I+" "+w+"' style='"+r+": 0px;'></div>").parent();this._pagesWrapper=o;var a=this.options;a.arrowVisibility!==f&&a.arrowPlacement===n&&(this._contentWrapper=o.wrap("<div class='"+I+" oj-filmstrip-content-container'></div>").parent()),t.addClass(I),e||t.addClass(G),a.arrowVisibility!==f&&i.length>0&&(this._prevButton=this._createPrevNavArrow(),this._nextButton=this._createNextNavArrow(),this._navArrowsShownOnHover()&&this._setupNavArrowsHoverable())},_unwrapChildren:function(){var t=this.element,e=this._getItems();this._tearDownNavArrowsHoverable(),this._prevButton&&(this._UnregisterChildNode(this._prevButton),this._prevButton=null),this._nextButton&&(this._UnregisterChildNode(this._nextButton),this._nextButton=null);var n=t.children(W+A);n&&n.remove(),e.removeClass(M).unwrap().unwrap(),this._pagesWrapper=null,this._contentWrapper&&(e.unwrap(),this._contentWrapper=null),t.removeClass(I+" "+G)},_setupNavArrowsHoverable:function(){var t=this.element;t.on("mouseenter"+this.navArrowHoverableEventNamespace,function(t){e(t.currentTarget).hasClass("oj-disabled")||e(t.currentTarget).addClass(O)}).on("mouseleave"+this.navArrowHoverableEventNamespace,function(t){e(t.currentTarget).removeClass(O)})},_tearDownNavArrowsHoverable:function(){var t=this.element;t.off(this.navArrowHoverableEventNamespace)},_navArrowsShownOnHover:function(){var t=this.options,e=t.arrowVisibility;return e===v||e===r&&t.arrowPlacement===K},_hasPrevPage:function(){var t=this._pagingModel;return t.getPage()>0},_hasNextPage:function(){var t=this._pagingModel;return t.getPage()<t.getPageCount()-1},_prevPage:function(){if(this._hasPrevPage()){var t=this._pagingModel;t.setPage(t.getPage()-1)}},_nextPage:function(){if(this._hasNextPage()){var t=this._pagingModel;t.setPage(t.getPage()+1)}},_displayNavigationArrow:function(t,e){var i=this.options,r=i.arrowPlacement;r===n?e.css("visibility",t?"":f):e.parent().css("display",t?"":C)},_updateNavigationArrowsDisplay:function(){var t=this.options,e=t.arrowVisibility;if(e!==f){var n=this._pagingModel,i=n.getPage(),r=n.getPageCount();this._displayNavigationArrow(0!==i,this._prevButton),this._displayNavigationArrow(i!==r-1,this._nextButton)}},_createPrevNavArrow:function(){var t=this.element,e=this._isHorizontal(),n=e?V:Y,i=this._createNavigationArrowContainer(n),r=this.options,o=r.arrowPlacement;o===K?t.append(i):t.prepend(i);var a=it(this.getTranslatedString("labelAccArrowPreviousPage")),s=it(this.getTranslatedString("tipArrowPreviousPage")),l=this._createNavigationArrow(i,n,a,s),u=this;return l.on("click",function(){u._prevPage()}),l},_createNextNavArrow:function(){var t=this.element,e=this._isHorizontal(),n=e?E:b,i=this._createNavigationArrowContainer(n);t.append(i);var r=it(this.getTranslatedString("labelAccArrowNextPage")),o=it(this.getTranslatedString("tipArrowNextPage")),a=this._createNavigationArrow(i,n,r,o),s=this;return a.on("click",function(){s._nextPage()}),a},_createNavigationArrowContainer:function(t){var n=e(document.createElement("div"));n.addClass(A+" "+t);var i=this.options,r=i.arrowPlacement;return r===K&&(n.addClass("oj-filmstrip-arrow-container-overlay"),this._navArrowsShownOnHover()&&n.addClass(x)),n},_createNavigationArrow:function(t,e,i,r){var o="<div class='"+T+" oj-default oj-enabled "+e+"' role='button' tabindex='-1'";o+="><span class='oj-filmstrip-arrow-icon "+e+" oj-component-icon'></span></div>",t.append(o);var a=this.element,s=a.attr("id"),l=t.children(W+T).eq(0);l.uniqueId();var u=l.attr("id");i&&l.attr("aria-label",i),r&&l.attr("title",r),l.attr("aria-labelledby",u+" "+s),this._AddHoverable(l),this._AddActiveable(l);var h=this.options,c=h.arrowPlacement;return c===n&&this._navArrowsShownOnHover()&&l.addClass(x),l},_getItemContainers:function(){var t=this._pagesWrapper,e=t.find(W+D).filter(this._filterNestedFilmStripsFunc);return e},_getItems:function(){var t=this._pagesWrapper,e=t.find(W+M).filter(this._filterNestedFilmStripsFunc);return e},_getPages:function(){var t=this._pagesWrapper,e=t.children(W+P);return e},_clearCalculatedSizes:function(){var t=this._pagesWrapper,e=this._getPages();e.css(g,u).css(J,u);var n=this._getItemContainers();n.css(g,u).css(J,u),t.css(this._getCssSizeAttr(),u)},_adjustSizes:function(r){this._clearCalculatedSizes();var a=this.options,s=this._isHorizontal(),l=a.maxItemsPerPage,h=l<1,c=this.element,d=this._getItemContainers();if(this._itemSize<0){var p=this._getItemIndex(a.currentItem),_=e(d[p]),m=_.children(W+M);m.css(o,u),t.Components.subtreeShown(m[0]),this._itemSize=s?_.width():_.height()}var v=s?c.width():c.height();if(a.arrowVisibility!==f&&a.arrowPlacement===n){var y=c.children(W+A),S=y.eq(0),b=s?S.width():S.height();v-=2*b}if(this._componentSize=v,!h){var E=Math.max(Math.floor(v/this._itemSize),1);E<l&&(l=E)}var T=h?Math.max(Math.floor(v/this._itemSize),1):l,x=v/T;d.css(g,x+z).css(J,x+z);var O=Math.ceil(d.length/T),D=this._getPages(),w=!1,R=this._pagingModel;if(R.getPageCount()!=O||this._itemsPerPage!=T||!D||D.length<1){if(w=!0,r)for(var L=0;L<d.length;L++)t.Components.subtreeDetached(d[L]);D&&D.length>0&&d.unwrap();for(var L=0;L<d.length;L+=T){var N=d.slice(L,L+T);N.wrapAll("<div class='"+I+" "+P+"' style='"+o+": "+C+";' "+i+"='true'></div>")}if(r)for(var L=0;L<d.length;L++)t.Components.subtreeAttached(d[L])}D=this._getPages(),D.css(g,v+z).css(J,v+z);var k=this._pagesWrapper,U=this._contentWrapper;k.css(this._getCssSizeAttr(),v),U&&U.css(this._getCssSizeAttr(),v);var B=0;if((a.currentItem||0===a.currentItem)&&(B=this._findPage(a.currentItem,T)),R.getPageCount()!=O||this._itemsPerPage!=T||R.getPage()!=B)R.setPage(B,{pageSize:T});else if(w){var F=R.getPage();this._handlePage({previousPage:F,page:F})}},_handlePage:function(t){var n=t.page,i=t.previousPage,r=this._pagesWrapper,o=(this.options,this._getPages()),a=this._pagingModel,s=a.getPageSize(),l=i<0||i==n||this._itemsPerPage!=s;this._itemsPerPage=s;var u=null;l||(u=e(o[i]));var h=this._getCssPositionAttr(),c=e(o[n]),d=c.is(_);d&&this._unhidePage(c);var p=this._bDragInit;if(i>-1&&!l&&(p=!0,r.css(this._getCssSizeAttr(),2*this._componentSize),n<i&&d&&r.css(h,-this._componentSize+z),n>i?(u.addClass(N),c.addClass(L)):(u.addClass(U),c.addClass(k))),p){var g=this,f=this._bDragInit;if(f&&i<0){var m=o.filter($);m.addClass(R)}setTimeout(function(){g._finishHandlePage(n,i,l,f)},25)}else this._finishHandlePage(n,i,l)},_finishHandlePage:function(t,n,i,r){var o=this._pagesWrapper;if(i||(this._bPageChangeTransition=!0,o.on("transitionend"+this.eventNamespace+" webkitTransitionEnd"+this.eventNamespace,this._handleTransitionEndFunc)),i)this._handleTransitionEnd();else{var a=this._getPages();if(r&&nt(a),n>-1){var s=t>n,l=e(a[n]),u=e(a[t]);l.addClass(R),u.addClass(R),s?(l.removeClass(N),u.removeClass(L),l.addClass(F),u.addClass(B)):(l.removeClass(U),u.removeClass(k),l.addClass(j),u.addClass(H))}else if(r){var h=a.filter($);et(h,"translate3d(0, 0, 0)")}}},_handleTransitionEnd:function(){this._bPageChangeTransition=!1;var n=this._pagesWrapper,i=this._getCssPositionAttr();n.off(this.eventNamespace).css(this._getCssSizeAttr(),this._componentSize).css(i,"0px");var r=null;(t.FocusUtils.containsFocus(n[0])||this._nextButton&&t.FocusUtils.containsFocus(this._nextButton[0])||this._prevButton&&t.FocusUtils.containsFocus(this._prevButton[0]))&&(r=document.activeElement);for(var o=this._pagingModel,a=o.getPage(),s=this._getPages(),l=0;l<s.length;l++)l!=a&&this._hidePage(e(s[l]));if(s.removeClass(R+" "+F+" "+B+" "+j+" "+H),nt(s),this._updateNavigationArrowsDisplay(),r&&e(r).is(_)){var u=this.element,h=t.FocusUtils.getFirstTabStop(s[a]);h?t.FocusUtils.focusElement(h):t.FocusUtils.focusElement(u[0])}var c=this.options,d=this._findPage(c.currentItem);if(d!=a){var p=this._getFirstItemOnPage(a);p!==-1&&this.option(y,p,{_context:{writeback:!0}})}},_getItemIndex:function(e){var n=-1,i=this._getItems();if("number"==typeof e)e>=0&&e<i.length&&(n=e);else if("string"==typeof e&&t.DomUtils.isValidIdentifier(e))for(var r=0;r<i.length;r++){var o=i[r],a=o.id;if(a&&a.length>0&&a===e){n=r;break}}return n},_findPage:function(t,e){var n=this._getItemIndex(t),i=-1;return n>-1&&(void 0===e&&(e=this._itemsPerPage),i=Math.floor(n/e)),i},_getFirstItemOnPage:function(t,e,n){var i=this._pagingModel;if(void 0===e&&(e=i.getPageCount()),t>=0&&t<e){var r=this._getItems();void 0===n&&(n=this._itemsPerPage);var o=t*n;if(o<r.length){var a=r[o],s=a.id;return s&&s.length>0?s:o}}return-1},_hidePage:function(e){t.Components.subtreeHidden(e[0]),e.css(o,C).attr(i,"true");var n=e.find(W+M).filter(this._filterNestedFilmStripsFunc);n.css(o,C)},_unhidePage:function(e){e.css(o,u).removeAttr(i);var n=e.find(W+M).filter(this._filterNestedFilmStripsFunc);n.css(o,u),t.Components.subtreeShown(e[0])},_addKeyListeners:function(){var t=this.element;t.on("keydown"+this.keyEventNamespace,this._handleKeyDownFunc)},_removeKeyListeners:function(){var t=this.element;t.off(this.keyEventNamespace)},_addMouseListeners:function(){var t=this.element;t.on("mousedown"+this.mouseEventNamespace,this._handleMouseDownFunc).on("mousemove"+this.mouseEventNamespace,this._handleMouseMoveFunc).on("mouseup"+this.mouseEventNamespace,this._handleMouseUpFunc)},_removeMouseListeners:function(){var t=this.element;t.off(this.mouseEventNamespace)},_addTouchListeners:function(){var t=this.element;t.on("touchstart"+this.touchEventNamespace,this._handleTouchStartFunc).on("touchmove"+this.touchEventNamespace,this._handleTouchMoveFunc).on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)},_removeTouchListeners:function(){var t=this.element;t.off(this.touchEventNamespace)},_handleKeyDown:function(t){var n=this._pagingModel,i=n.getPage(),r=-1;switch(t.keyCode){case e.ui.keyCode.RIGHT:r=this._bRTL?i-1:i+1;break;case e.ui.keyCode.LEFT:r=this._bRTL?i+1:i-1;break;case e.ui.keyCode.DOWN:r=i+1;break;case e.ui.keyCode.UP:r=i-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.END:r=n.getPageCount()-1;break;default:return}r>-1&&r<n.getPageCount()&&n.setPage(r),t.preventDefault()},_handleMouseDown:function(t){var e=t.originalEvent;this._dragScrollStart(e)},_handleMouseMove:function(t){var e=t.originalEvent;this._dragScrollMove(t,e)},_handleMouseUp:function(t){this._dragScrollEnd()},_handleTouchStart:function(t){var e=t.originalEvent,n=e.touches;if(1===n.length){var i=n[0];this._dragScrollStart(i)}},_handleTouchMove:function(t){var e=t.originalEvent,n=e.touches,i=n[0];this._dragScrollMove(t,i),(this._bTouch||this._scrolledForThisTouch)&&t.preventDefault()},_handleTouchEnd:function(t){this._dragScrollEnd()},_dragScrollStart:function(t){var e=this._pagingModel;if(e.getPageCount()>1&&!this._bPageChangeTransition){this._bTouch=!0,this._bDragInit=!1;var n=this._isHorizontal();this._touchStartCoord=n?t.pageX:t.pageY,this._touchStartCoord2=n?t.pageY:t.pageX}},_initDragScroll:function(t){var n=this._isHorizontal();this._touchStartCoord=n?t.pageX:t.pageY,this._touchStartCoord2=n?t.pageY:t.pageX;var i=this._getCssPositionAttr(),r=this._pagesWrapper,o=this._pagingModel,a=this._getPages(),s=1;o.getPage()>0&&(this._unhidePage(e(a[o.getPage()-1])),r.css(i,-this._componentSize+z),s++),o.getPage()<o.getPageCount()-1&&(this._unhidePage(e(a[o.getPage()+1])),s++),s>1&&r.css(this._getCssSizeAttr(),s*this._componentSize),this._touchStartScroll=parseInt(r.css(i),10)},_dragScrollMove:function(t,n){if(this._bTouch){var i=this._isHorizontal(),r=i?n.pageX:n.pageY,o=r-this._touchStartCoord,u=i?n.pageY:n.pageX,h=u-this._touchStartCoord2;if(Math.abs(h)>Math.abs(o)&&(this._bTouch=!1,this._scrolledForThisTouch=!1),!this._bDragInit)return void(Math.abs(o)>a&&(this._initDragScroll(n),this._bDragInit=!0));var c=i&&this._bRTL?o>0:o<0,d=this._pagingModel,p=d.getPage(),g=c&&p<d.getPageCount()-1||!c&&p>0;if(g){var f=this.element[0],_=Math.min(s*(i?f.offsetWidth:f.offsetHeight),l),m=this._getCssPositionAttr(),v=this._pagesWrapper,y=this._getPages();if(Math.abs(o)>=_){var S=c?p+1:p-1,C=(this._getFirstItemOnPage(S),c?p-1:p+1);if(C>-1&&C<d.getPageCount()&&this._hidePage(e(y[C])),c&&C>-1){var b=parseInt(v.css(m),10);v.css(m,b+this._componentSize+z)}v.css(this._getCssSizeAttr(),2*this._componentSize),this._bTouch=!1,d.setPage(S)}else{var E=i&&this._bRTL?-o:o,T=i?"translate3d("+E+"px, 0, 0)":"translate3d(0, "+E+"px, 0)";et(y.filter($),T)}this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(t.preventDefault(),t.stopPropagation())}},_dragScrollEnd:function(){if(this._bTouch&&this._bDragInit){var t=this._pagingModel,e=t.getPage();this._handlePage({previousPage:e,page:e})}this._bTouch=!1,this._bDragInit=!1,this._scrolledForThisTouch=!1},getNodeBySubId:function(t){if(null==t)return this.element?this.element[0]:null;var e=t.subId;return"oj-filmstrip-start-arrow"===e?this.widget().find(W+T+W+V).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-end-arrow"===e?this.widget().find(W+T+W+E).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-top-arrow"===e?this.widget().find(W+T+W+Y).filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-bottom-arrow"===e?this.widget().find(W+T+W+b).filter(this._filterNestedFilmStripsFunc)[0]:null},getSubIdByNode:function(t){for(var e=this.getNodeBySubId({subId:"oj-filmstrip-start-arrow"}),n=this.getNodeBySubId({subId:"oj-filmstrip-end-arrow"}),i=this.getNodeBySubId({subId:"oj-filmstrip-top-arrow"}),r=this.getNodeBySubId({subId:"oj-filmstrip-bottom-arrow"}),o=t,a=this.element[0];o&&o!=a;){if(o===e)return{subId:"oj-filmstrip-start-arrow"};if(o===n)return{subId:"oj-filmstrip-end-arrow"};if(o===i)return{subId:"oj-filmstrip-top-arrow"};if(o===r)return{subId:"oj-filmstrip-bottom-arrow"};o=o.parentElement}return null}});var n="adjacent",i="aria-hidden",r="auto",o="display",a=3,s=.33,l=100,u="",h="JET FilmStrip: Value of 'currentItem' option not found: ",c="JET FilmStrip: Unsupported value set as 'orientation' option: ",d="Unsupported value set as 'arrowPlacement' option: ",p="Unsupported value set as 'arrowVisibility' option: ",g="flex-basis",f="hidden",_=":hidden",m="horizontal",v="hover",y="currentItem",S="-ms-transform",C="none",b="oj-bottom",E="oj-end",T="oj-filmstrip-arrow",A="oj-filmstrip-arrow-container",x="oj-filmstrip-arrow-transition",I="oj-filmstrip-container",O="oj-filmstrip-hover",M="oj-filmstrip-item",D="oj-filmstrip-item-container",P="oj-filmstrip-page",w="oj-filmstrip-pages-container",R="oj-filmstrip-transition",L="oj-filmstrip-transition-next-newpage-from",N="oj-filmstrip-transition-next-oldpage-from",k="oj-filmstrip-transition-prev-newpage-from",U="oj-filmstrip-transition-prev-oldpage-from",B="oj-filmstrip-transition-next-newpage-to",F="oj-filmstrip-transition-next-oldpage-to",H="oj-filmstrip-transition-prev-newpage-to",j="oj-filmstrip-transition-prev-oldpage-to",G="oj-filmstrip-vertical",V="oj-start",Y="oj-top",K="overlay",W=".",z="px",X="transform",q="vertical",Z="visible",$=":visible",J="-webkit-flex-basis",Q="-webkit-transform",tt="JET FilmStrip: 'disabled' option not supported",et=function(t,e){t.css(Q,e).css(S,e).css(X,e)},nt=function(t){t.css(Q,u).css(S,u).css(X,u)},it=function(t){var n=e("<div></div>");return n.text(t),n[0].innerHTML}}(),function(){var e={properties:{arrowPlacement:{type:"string"},arrowVisibility:{type:"string"},currentItem:{type:"string|number"},disabled:{type:"boolean"},maxItemsPerPage:{type:"number"},orientation:{type:"string"}},methods:{getItemsPerPage:{},getPagingModel:{},refresh:{}},extension:{_widgetName:"ojFilmStrip"}};t.Components.registerMetadata("ojFilmStrip","baseComponent",e),t.Components.register("oj-film-strip",t.Components.getMetadata("ojFilmStrip"))}()}),define("views/details",["knockout","ojs/ojcore","settings","ojs/ojmodel","ojs/ojfilmstrip","ojs/ojbutton"],function(t,e,n){function i(e){this.id=e.drillModel.drillId(),this.fetched=t.observable(!1),this.data=t.observable(),this.nameNoWhitespace=t.computed(l,this),this.handleActivated=r.bind(this),this.getItemInitialDisplay=o.bind(this),this.goBack=a.bind(this,e),this.like=s.bind(this)}function r(){var t=this;console.log("self.id: ",t.id);var e=$.getJSON("/mobile/custom/artistapi/acts/"+t.id).then(function(e){return console.log("json: ",e),e.likes=0,console.log("data: ",t.data),t.data(e),t.fetched(!0),e})["catch"](function(t){throw console.error(t),t});Promise.all([e,$.getJSON("https://soaringthroughtheclouds-a513284.apaas.us2.oraclecloud.com/artists/likes")]).then(function(e){var n=e[0],i=e[1].artist_likes;n.likes=i[n.name]||0,t.data(n)})["catch"](function(t){throw console.error(t),t})}function o(t){return t<3?"":"none"}function a(t,e,n){t.drillModel.drillId(void 0),t.drillModel.currentModule("acts")}function s(){this.data().likes++,this.data(this.data()),$.getJSON("https://soaringthroughtheclouds-a513284.apaas.us2.oraclecloud.com/artists/like/"+this.data().name)}function l(){var t=this.data();return t&&t.name&&t.name.replace(/ /g,"_").toLowerCase()}return i}),define("text",["module"],function(t){var e,n,i,r,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,h=u&&location.protocol&&location.protocol.replace(/\:/,""),c=u&&location.hostname,d=u&&(location.port||void 0),p={},g=t.config&&t.config()||{};return e={version:"2.0.12",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=a[e];try{t=new ActiveXObject(n)}catch(i){}if(t){a=[n];break}}return t},parseName:function(t){var e,n,i,r=!1,o=t.indexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return o!==-1&&(!a||o>1)?(e=t.substring(0,o),n=t.substring(o+1,t.length)):e=t,i=n||e,o=i.indexOf("!"),o!==-1&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:e=i),{moduleName:e,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,r){var o,a,s,l=e.xdRegExp.exec(t);return!l||(o=l[2],a=l[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(s||a)&&s!==r))},finishLoad:function(t,n,i,r){i=n?e.strip(i):i,g.isBuild&&(p[t]=i),r(i)},load:function(t,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();g.isBuild=r&&r.isBuild;var o=e.parseName(t),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),l=g.useXhr||e.useXhr;return 0===s.indexOf("empty:")?void i():void(!u||l(s,h,c,d)?e.get(s,function(n){e.finishLoad(t,o.strip,n,i)},function(t){i.error&&i.error(t)}):n([a],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,i)}))},write:function(t,n,i,r){if(p.hasOwnProperty(n)){var o=e.jsEscape(p[n]);i.asModule(t+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,n,i,r,o){var a=e.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,u=i.toUrl(a.moduleName+s)+".js";e.load(l,i,function(n){var i=function(t){return r(u,t)};i.asModule=function(t,e){return r.asModule(t,u,e)},e.write(t,l,i,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,i){try{var r=n.readFileSync(t,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),e(r)}catch(o){i&&i(o)}}):"xhr"===g.env||!g.env&&e.createXhr()?e.get=function(t,n,i,r){var o,a=e.createXhr();if(a.open("GET",t,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);g.onXhr&&g.onXhr(a,t),a.onreadystatechange=function(e){var r,o;4===a.readyState&&(r=a.status||0,r>399&&r<600?(o=new Error(t+" HTTP status: "+r),o.xhr=a,i&&i(o)):n(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,t))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,r="utf-8",o=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{s.close()}e(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,e.get=function(t,e){var n,a,s,l={};o&&(t=t.replace(/\//g,"\\")),s=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(s,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),e(l.value)}catch(u){throw new Error((s&&s.path||"")+": "+u)}}),e});