/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  D.iq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContext",D.iq);D.z.q(D.iq,D.z,"DvtDiagramLayoutContext");
D.iq.prototype.Init=function(a){this.qf=a?a.qf:D.o;this.dn=a?a.dn:D.o;this.Fr=a?a.Fr:0;this.JP=a?a.JP:0;this.ir=a?a.ir:D.p;this.T4=a?a.T4:D.o;this.Ce=a?a.Ce:D.o;this.Mu=a?a.Mu:D.o;this.zg=a?a.zg:D.o;this.nb={};this.Nc={};this.Ny=[];this.dO=[];if(a){for(var b=0;b<this.Fr;b++){var c=new D.lq(a.Ny[b]);this.Ny.push(c);this.nb[c.getId()]=c}for(var d in a.nb)this.nb[d]||(this.nb[d]=new D.lq(a.nb[d]));for(b=0;b<this.JP;b++)c=new D.nq(a.dO[b]),this.dO.push(c),this.Nc[c.getId()]=c;for(var e in a.Nc)this.Nc[e]||
(this.Nc[e]=new D.nq(a.Nc[e]))}};D.iq.prototype.Em=(0,D.v)("qf");D.iq.prototype.ef=(0,D.x)("qf");D.iq.prototype.getLayout=D.iq.prototype.ef;D.iq.prototype.Gn=(0,D.v)("dn");D.iq.prototype.Zi=(0,D.x)("dn");D.iq.prototype.getLayoutAttributes=D.iq.prototype.Zi;D.iq.prototype.jR=function(a){this.fM(a.getId())||(this.Fr++,this.Ny.push(a));this.nb[a.getId()]=a};D.iq.prototype.fM=function(a){return this.nb[a]};D.iq.prototype.getNodeById=D.iq.prototype.fM;D.iq.prototype.pD=function(a){return this.Ny[a]};
D.iq.prototype.getNodeByIndex=D.iq.prototype.pD;D.iq.prototype.ff=(0,D.x)("Fr");D.iq.prototype.getNodeCount=D.iq.prototype.ff;D.cr=function(a,b){a.Wqa(b.getId())||(a.JP++,a.dO.push(b));a.Nc[b.getId()]=b};D.iq.prototype.Wqa=function(a){return this.Nc[a]};D.iq.prototype.getLinkById=D.iq.prototype.Wqa;D.iq.prototype.lD=function(a){return this.dO[a]};D.iq.prototype.getLinkByIndex=D.iq.prototype.lD;D.iq.prototype.yp=(0,D.x)("JP");D.iq.prototype.getLinkCount=D.iq.prototype.yp;
D.iq.prototype.FLa=function(a,b){for(var c=b,d=new D.mr(0,0);c;)if(d.x+=c.hg().x,d.y+=c.hg().y,c=c.Mu){if((c=this.fM(c))&&c.lb()){var e=c.sk();e&&(d.x+=e.left,d.y+=e.top)}}else c=D.o;return new D.mr(a.x+d.x,a.y+d.y)};D.iq.prototype.localToGlobal=D.iq.prototype.FLa;D.iq.prototype.bLa=(0,D.x)("ir");D.iq.prototype.isLocaleR2L=D.iq.prototype.bLa;D.iq.prototype.$Ha=(0,D.x)("T4");D.iq.prototype.getComponentSize=D.iq.prototype.$Ha;D.iq.prototype.SMa=(0,D.v)("Ce");D.iq.prototype.setViewport=D.iq.prototype.SMa;
D.iq.prototype.zD=(0,D.x)("Ce");D.iq.prototype.getViewport=D.iq.prototype.zD;D.iq.prototype.XS=(0,D.v)("Mu");D.iq.prototype.saa=(0,D.x)("Mu");D.iq.prototype.getContainerId=D.iq.prototype.saa;D.iq.prototype.YD=function(a,b,c,d){this.Mu&&(this.zg={},this.zg.top=a,this.zg.right=b,this.zg.bottom=c,this.zg.left=d)};D.iq.prototype.setContainerPadding=D.iq.prototype.YD;D.iq.prototype.sk=(0,D.x)("zg");D.iq.prototype.getContainerPadding=D.iq.prototype.sk;D.iq.prototype.aIa=(0,D.x)("xJ");
D.iq.prototype.getCurrentViewport=D.iq.prototype.aIa;
D.nq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextLink",D.nq);D.z.q(D.nq,D.z,"DvtDiagramLayoutContextLink");D.nq.prototype.Init=function(a){this.ib=a?a.ib:D.o;this.jL=a?a.jL:D.o;this.JJ=a?a.JJ:D.o;this.Th=a?a.Th:D.o;this.OF=a?a.OF:D.o;this.NF=a?a.NF:D.o;this.dn=a?a.dn:D.o;this.O9=a?a.O9:0;this.Q5=a?a.Q5:0;this.XF=a?a.XF:1;this.Le=a?a.Le:D.p;this.rj=a?a.rj:D.o;this.li=a?a.li:D.o;this.Ms=a?a.Ms:D.p};D.nq.prototype.setId=(0,D.v)("ib");D.nq.prototype.getId=(0,D.x)("ib");
D.nq.prototype.getId=D.nq.prototype.getId;D.nq.prototype.XM=(0,D.v)("jL");D.nq.prototype.qd=(0,D.x)("jL");D.nq.prototype.getStartId=D.nq.prototype.qd;D.nq.prototype.PM=(0,D.v)("JJ");D.nq.prototype.pc=(0,D.x)("JJ");D.nq.prototype.getEndId=D.nq.prototype.pc;D.nq.prototype.Bc=(0,D.v)("Th");D.nq.prototype.setPoints=D.nq.prototype.Bc;D.nq.prototype.Ab=(0,D.x)("Th");D.nq.prototype.getPoints=D.nq.prototype.Ab;D.nq.prototype.Td=(0,D.v)("OF");D.nq.prototype.setLabelPosition=D.nq.prototype.Td;
D.nq.prototype.Gd=(0,D.x)("OF");D.nq.prototype.getLabelPosition=D.nq.prototype.Gd;D.nq.prototype.Io=(0,D.v)("NF");D.nq.prototype.Xd=(0,D.x)("NF");D.nq.prototype.getLabelBounds=D.nq.prototype.Xd;D.nq.prototype.XR=(0,D.x)("O9");D.nq.prototype.getStartConnectorOffset=D.nq.prototype.XR;D.nq.prototype.GR=(0,D.x)("Q5");D.nq.prototype.getEndConnectorOffset=D.nq.prototype.GR;D.nq.prototype.cE=(0,D.v)("XF");D.nq.prototype.Kv=(0,D.x)("XF");D.nq.prototype.getLinkWidth=D.nq.prototype.Kv;D.nq.prototype.Gn=(0,D.v)("dn");
D.nq.prototype.Zi=(0,D.x)("dn");D.nq.prototype.getLayoutAttributes=D.nq.prototype.Zi;D.nq.prototype.rb=(0,D.v)("Le");D.nq.prototype.Taa=(0,D.x)("Le");D.nq.prototype.getSelected=D.nq.prototype.Taa;D.nq.prototype.ew=(0,D.v)("rj");D.nq.prototype.setLabelRotationAngle=D.nq.prototype.ew;D.nq.prototype.Iv=(0,D.x)("rj");D.nq.prototype.getLabelRotationAngle=D.nq.prototype.Iv;D.nq.prototype.ls=(0,D.v)("li");D.nq.prototype.setLabelRotationPoint=D.nq.prototype.ls;D.nq.prototype.Jv=(0,D.x)("li");
D.nq.prototype.getLabelRotationPoint=D.nq.prototype.Jv;D.nq.prototype.gE=(0,D.v)("Ms");D.nq.prototype.$x=(0,D.x)("Ms");
D.lq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextNode",D.lq);D.z.q(D.lq,D.z,"DvtDiagramLayoutContextNode");D.lq.prototype.Init=function(a){this.ib=a?a.ib:D.o;this.La=a?a.La:D.o;this.MV=a?a.MV:D.o;this.OC=a?a.OC:D.o;this.OF=a?a.OF:D.o;this.NF=a?a.NF:D.o;this.dn=a?a.dn:D.o;this.j4=a?a.j4:D.p;this.Mu=a?a.Mu:D.o;this.Le=a?a.Le:D.p;this.rj=a?a.rj:D.o;this.li=a?a.li:D.o;this.zg=a?a.zg:D.o;this.Gr=a?a.Gr:D.o;this.Hr=a?a.Hr:D.o;this.Gi=a?a.Gi:D.p};D.lq.prototype.setId=(0,D.v)("ib");
D.lq.prototype.getId=(0,D.x)("ib");D.lq.prototype.getId=D.lq.prototype.getId;D.lq.prototype.Ica=function(a){this.Gr=this.La=a};D.lq.prototype.De=(0,D.x)("La");D.lq.prototype.getBounds=D.lq.prototype.De;D.lq.prototype.Uf=(0,D.x)("MV");D.lq.prototype.getContentBounds=D.lq.prototype.Uf;D.lq.prototype.cj=(0,D.v)("OC");D.lq.prototype.setPosition=D.lq.prototype.cj;D.lq.prototype.hg=(0,D.x)("OC");D.lq.prototype.getPosition=D.lq.prototype.hg;D.lq.prototype.Td=(0,D.v)("OF");
D.lq.prototype.setLabelPosition=D.lq.prototype.Td;D.lq.prototype.Gd=(0,D.x)("OF");D.lq.prototype.getLabelPosition=D.lq.prototype.Gd;D.lq.prototype.Io=(0,D.v)("NF");D.lq.prototype.Xd=(0,D.x)("NF");D.lq.prototype.getLabelBounds=D.lq.prototype.Xd;D.lq.prototype.Gn=(0,D.v)("dn");D.lq.prototype.Zi=(0,D.x)("dn");D.lq.prototype.getLayoutAttributes=D.lq.prototype.Zi;D.lq.prototype.gw=(0,D.v)("j4");D.lq.prototype.DH=(0,D.x)("j4");D.lq.prototype.isReadOnly=D.lq.prototype.DH;D.lq.prototype.XS=(0,D.v)("Mu");
D.lq.prototype.saa=(0,D.x)("Mu");D.lq.prototype.getContainerId=D.lq.prototype.saa;D.lq.prototype.rb=(0,D.v)("Le");D.lq.prototype.Taa=(0,D.x)("Le");D.lq.prototype.getSelected=D.lq.prototype.Taa;D.lq.prototype.ew=(0,D.v)("rj");D.lq.prototype.setLabelRotationAngle=D.lq.prototype.ew;D.lq.prototype.Iv=(0,D.x)("rj");D.lq.prototype.getLabelRotationAngle=D.lq.prototype.Iv;D.lq.prototype.ls=(0,D.v)("li");D.lq.prototype.setLabelRotationPoint=D.lq.prototype.ls;D.lq.prototype.Jv=(0,D.x)("li");
D.lq.prototype.getLabelRotationPoint=D.lq.prototype.Jv;D.lq.prototype.YD=function(a,b,c,d){this.lb()&&(this.zg={},this.zg.top=a,this.zg.right=b,this.zg.bottom=c,this.zg.left=d,this.Gr&&(this.La=new D.jq(this.Gr.x,this.Gr.y,this.Gr.w+d+b,this.Gr.h+a+c)),this.Hr&&(this.MV=new D.jq(this.Hr.x,this.Hr.y,this.Hr.w+d+b,this.Hr.h+a+c)))};D.lq.prototype.setContainerPadding=D.lq.prototype.YD;D.lq.prototype.sk=(0,D.x)("zg");D.lq.prototype.getContainerPadding=D.lq.prototype.sk;D.lq.prototype.mf=(0,D.v)("Gi");
D.lq.prototype.lb=(0,D.x)("Gi");D.lq.prototype.isDisclosed=D.lq.prototype.lb;
D.mr=function(a,b){this.Init(a,b)};(0,D.ca)("DvtDiagramPoint",D.mr);D.z.q(D.mr,D.z,"DvtDiagramPoint");D.mr.prototype.Init=function(a,b){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b};
D.jq=function(a,b,c,d){this.Init(a,b,c,d)};(0,D.ca)("DvtDiagramRectangle",D.jq);D.z.q(D.jq,D.z,"DvtDiagramRectangle");D.jq.prototype.Init=function(a,b,c,d){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b;this.w=c===D.o||(0,window.isNaN)(c)?0:c;this.h=d===D.o||(0,window.isNaN)(d)?0:d};
D.fq=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtBaseDiagram",D.fq);D.z.q(D.fq,D.gq,"DvtBaseDiagram");D.y=D.fq.prototype;D.y.Init=function(a,b,c){D.fq.u.Init.call(this,a,b,c);this.j().Lc.Aa().setAttributeNS(D.o,"text-rendering","geometricPrecision");this.r7;this.oK=this.en=D.o;this.PW;this.e4=D.k;this.Al=new D.D(a);this.ni=new D.D(a);this.Kt=new D.D(a);this.Ly=0.5;this.lfa()};D.y.zN=function(){var a=this.fa;a.fw(this.nD());a.iu(this.Qx());a.cw(this.Ma());a.ja.k(this.Al);a.ja.k(this.ni);a.ja.k(this.Kt)};
D.y.cw=function(a){this.Ly=a;this.fa&&this.fa.cw(a)};D.y.Ma=(0,D.x)("Ly");D.y.iu=function(a){this.cv=a;this.fa&&this.fa.iu(a)};D.y.Qx=(0,D.x)("cv");D.y.fw=function(a){this.wt=a;this.fa&&this.fa.fw(a)};D.y.nD=(0,D.x)("wt");D.y.lfa=function(){this.iu(2);this.fw(0)};D.y.Kj=function(){this.XJ||(D.fq.u.Kj.call(this),this.zN(),this.$p());this.XJ=D.p};D.y.$p=(0,D.t)();D.y.Q=(0,D.ba)(D.o);D.y.Wb=(0,D.ba)(D.o);D.y.pI=function(){return[]};D.y.eB=function(){return[]};D.y.ff=function(){return this.eB().length};
D.fq.prototype.getNodeCount=D.fq.prototype.ff;D.fq.prototype.yp=function(){return this.pI().length};D.fq.prototype.getLinkCount=D.fq.prototype.yp;D.hq=function(a,b){if(b&&a.iD())a.cC?(a.cC.ha(a.Za/2),a.cC.ya(a.ob/2),D.af.Vb(a.cC,a.getWidth()-2*D.af.m1,window.Infinity,a)):a.cC=a.Fda(a.iD());else if(a.cC){var c=a.cC.getParent();c&&c.removeChild(a.cC);a.cC=D.o}};D.y=D.fq.prototype;D.y.Fda=function(a){return D.af.jl(this,a,new D.B(0,0,this.getWidth(),this.getHeight()),this.za())};D.y.iD=(0,D.x)("nz");
D.y.LR=(0,D.x)("PW");D.y.nh=(0,D.x)("Ob");D.y.hw=function(a){this.Ob="single"==a?new D.sl("s"):"multiple"==a?new D.sl("m"):D.o;this.za().ju(this.Ob)};D.y.Ml=function(){return this.Ob?this.Ob.Xa():D.o};D.y.Pq=function(){return this.Ob?D.k:D.p};D.y.za=(0,D.x)("hb");D.kq=function(a){var b=new D.iq,c=(0,D.G)(a.j());b.ir=c;a=new D.jq(0,0,a.getWidth(),a.getHeight());b.T4=a;return b};
D.fq.prototype.mu=function(a,b){var c=new D.lq;c.setId(a.getId?a.getId():a.getData().getId());c.Ica(D.mq.lZ(a.gg()));var d=D.mq.lZ(a.Uf());c.MV=d;c.Hr=d;c.Gn(a.Zi(b));c.Io(D.mq.lZ(a.Xd()));c.Td(D.mq.Hpa(a.Gd()));c.rb(D.k==a.Fa());if(a.lb()&&(c.mf(D.k),d=a.sk(),c.lb()&&(c.zg=d)))c.Gr&&(c.Gr=new D.jq(c.Gr.x,c.Gr.y,c.Gr.w-(d.left+d.right),c.Gr.h-(d.top+d.bottom))),c.Hr&&(c.Hr=new D.jq(c.Hr.x,c.Hr.y,c.Hr.w-(d.left+d.right),c.Hr.h-(d.top+d.bottom)));c.XS(a.getData().JR?a.getData().od:D.o);return c};
D.fq.prototype.nE=function(a,b,c,d){var e=new D.nq;e.setId(a.getId?a.getId():a.getData().getId());e.XM(b?b:a.getData().qd());e.PM(c?c:a.getData().pc());e.Gn(a.Zi(d));e.Io(D.mq.lZ(a.Xd()));e.Td(D.mq.Hpa(a.Gd()));b=a.XR();e.O9=b;b=a.GR();e.Q5=b;e.cE(a.Kv());e.rb(D.k==a.Fa());e.gE(D.k==a.$x());return e};
D.fq.prototype.gI=function(a,b,c){var d=a.sk();if(d){var e=a.Mu;e&&(e=this.Q(e))&&e.YD(d.top,d.right,d.bottom,d.left,b)}for(var e=d=window.Number.MAX_VALUE,f=0;f<a.ff();f++){var g=a.pD(f),h=this.Q(g.getId()),j=g.hg();j&&(d=window.Math.min(d,j.x),e=window.Math.min(e,j.y));h=g.Xd();j=g.Gd();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}for(f=0;f<a.yp();f++){var g=a.lD(f),l=this.Wb(g.getId());if(j=g.Ab()){j=D.oq.w1(j);for(h=0;h<j.length;h++)var m=j[h],d=window.Math.min(d,m.x),e=window.Math.min(e,
m.y)}h=g.Xd();j=g.Gd();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}e=this.Bda(-d,-e);d=e.x;e=e.y;for(f=0;f<a.ff();f++){g=a.pD(f);h=this.Q(g.getId());(j=g.hg())&&h.yw(j.x+d,j.y+e,b);var n=g.Xd(),m=g.Gd();if(n&&m){var j=new D.H(m.x-j.x,m.y-j.y),m=g.rj,q=D.mq.Gpa(g.li);b?((0,D.T)(b,"typeRectangle",h,h.Xd,h.Io,n),h.Gd()?(0,D.T)(b,"typePoint",h,h.Gd,h.Td,j):h.Td(j),m!=D.o&&(0,D.T)(b,"typeNumber",h,h.Iv,h.ew,m),q&&(h.li?(0,D.T)(b,"typePoint",h,h.Jv,h.ls,q):h.ls(q))):(h.Io(n),h.Td(j),
m!=D.o&&h.ew(m),q&&h.ls(q))}h.lb()&&(g=g.sk())&&h.YD(g.top,g.right,g.bottom,g.left,b)}if(!this.Ty)for(f=0;f<a.yp();f++){g=a.lD(f);l=this.Wb(g.getId());if(j=g.Ab()){0<j.length&&!(0,window.isNaN)(j[0])&&(j=D.oq.BT(j));for(var r=[],h=0;h<j.length;)(0,window.isNaN)(j[h])?(r.push(j[h]),h++):(r.push(j[h]+d),r.push(j[h+1]+e),h+=2);b&&l.Ab()?0<r.length&&(0,window.isNaN)(r[0])?(h=D.pq.oqa(l.Ab(),r),l.Bc(h.bda),(0,D.T)(b,"typePath",l,l.Ab,l.Bc,h.ada),(0,D.Al)(b,function(){l.Bc(r)})):(0,D.T)(b,"typePolyline",
l,l.Ab,l.Bc,r):l.Bc(r)}h=D.mq.CGa(g.Xd());j=g.Gd();m=g.rj;q=D.mq.Gpa(g.li);h&&j&&(g=new D.H(j.x+d,j.y+e),b?((0,D.T)(b,"typeRectangle",l,l.Xd,l.Io,h),l.Gd()?(0,D.T)(b,"typePoint",l,l.Gd,l.Td,g):l.Td(g),m!=D.o&&(0,D.T)(b,"typeNumber",l,l.Iv,l.ew,m),q&&(l.li?(0,D.T)(b,"typePoint",l,l.Jv,l.ls,q):l.ls(q))):(l.Io(h),l.Td(g),m!=D.o&&l.ew(m),q&&l.ls(q)))}if(b=a.zD())this.en=new D.B(b.x+d,b.y+e,b.w,b.h),this.oK=a.Mu;c&&(this.r7=new D.H(d,e))};
D.rq=function(a,b){var c;if(a.en&&(c=new D.B(a.en.x,a.en.y,a.en.e,a.en.g),a.oK))for(var d=a.Q(a.oK);d;){var e=d.V(),f=d.R();if(b){var g=(0,D.qq)(b,d,d.V),h=(0,D.qq)(b,d,d.R);if(g||0==g)e=g;if(h||0==h)f=h}c.x+=e;c.y+=f;d=(d=d.getData().JR?d.getData().od:D.o)?a.Q(d):D.o}return c};D.fq.prototype.Bda=function(a,b){return new D.H(a,b)};D.fq.prototype.mw=function(a,b){if(0==this.wt){var c=this.fa,d=b?b:(0,D.sq)(this,a,D.i,D.i),e=(0,D.tq)(this,d);c.fw(0.5*window.Math.min(e,c.Qx()));return d}return D.o};
D.tq=function(a,b){if(!b)return 0;var c=a.fa;return window.Math.min((a.Za-2*c.Bq)/b.e,(a.ob-2*c.Bq)/b.g)};
D.sq=function(a,b,c,d){var e=D.o,f,g,h,j,l=a.fa.ja;c||(c=a.eB());for(var m=0;m<c.length;m++)if(f=c[m],(j=a.Q(f))&&j.ub&&!j.he){var n=j,q=b;f=n.gg();g=new D.B(f.x,f.y,f.e,f.g);h=D.o;q&&(h=(0,D.qq)(q,n,n.Gd));h||(h=n.Gd());var r=D.o,s=D.o;q&&(r=(0,D.qq)(q,n,n.Iv),s=(0,D.qq)(q,n,n.Jv));r==D.o&&(r=n.rj);s||(s=n.li);n=n.Xd();h&&n&&(r!=D.o&&(n=(0,D.uq)(n,r,s)),g.x=window.Math.min(f.x,n.x+h.x),g.y=window.Math.min(f.y,n.y+h.y),g.e=window.Math.max(f.x+f.e,n.x+h.x+n.e)-g.x,g.g=window.Math.max(f.y+f.g,n.y+h.y+
n.g)-g.y);f=g;h=g=D.o;b&&(g=(0,D.qq)(b,j,j.V),h=(0,D.qq)(b,j,j.R));g==D.o&&(g=j.V());h==D.o&&(h=j.R());f.x+=g;f.y+=h;if(g=j.getData().JR?j.getData().od:D.o)g=j.getParent(),j=(0,D.vq)(new D.H(f.x,f.y),g,b),j=(0,D.wq)(j,l,b),g=(0,D.vq)(new D.H(f.x+f.e,f.y+f.g),g,b),g=(0,D.wq)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}d||(d=a.pI());for(m=0;m<
d.length;m++)if(c=d[m],(c=a.Wb(c))&&c.ub){j=c;g=b;f=new D.B(window.Number.MAX_VALUE,window.Number.MAX_VALUE,-window.Number.MAX_VALUE,-window.Number.MAX_VALUE);h=D.o;g&&(h=(0,D.qq)(g,j,j.Ab));h||(h=j.Ab());if(h){h=D.oq.w1(h);for(var u=D.i,u=n=s=r=D.i,q=0;q<h.length;q++)u=h[q],r=window.Math.max(f.x+f.e,u.x),s=window.Math.max(f.y+f.g,u.y),n=window.Math.min(f.x,u.x),u=window.Math.min(f.y,u.y),f.x=n,f.y=u,f.e=r-n,f.g=s-u}h=new D.B(f.x,f.y,f.e,f.g);r=D.o;g&&(r=(0,D.qq)(g,j,j.Gd));r==D.o&&(r=j.Gd());n=s=
D.o;g&&(s=(0,D.qq)(g,j,j.Iv),n=(0,D.qq)(g,j,j.Jv));s==D.o&&(s=j.rj);n||(n=j.li);j=j.Xd();r&&j&&(s!=D.o&&(j=(0,D.uq)(j,s,n)),h.x=window.Math.min(f.x,j.x+r.x),h.y=window.Math.min(f.y,j.y+r.y),h.e=window.Math.max(f.x+f.e,j.x+r.x+j.e)-h.x,h.g=window.Math.max(f.y+f.g,j.y+r.y+j.g)-h.y);f=h;if(g=c.getData().JR?c.getData().od:D.o)c=c.getParent(),j=(0,D.vq)(new D.H(f.x,f.y),c,b),j=(0,D.wq)(j,l,b),g=(0,D.vq)(new D.H(f.x+f.e,f.y+f.g),c,b),g=(0,D.wq)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=
e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}return e};
D.uq=function(a,b,c){if(b==D.o&&!c)return a;var d=new D.H(a.x,a.y),e=new D.H(a.x+a.e,a.y),f=new D.H(a.x,a.y+a.g);a=new D.H(a.x+a.e,a.y+a.g);var g=new D.Ej;b!=D.o&&(c&&g.translate(-c.x,-c.y),g.rotate(b),c&&g.translate(c.x,c.y));b=(0,D.xq)(g,d);e=(0,D.xq)(g,e);f=(0,D.xq)(g,f);d=(0,D.xq)(g,a);a=window.Math.min(window.Math.min(b.x,e.x),window.Math.min(f.x,d.x));g=window.Math.max(window.Math.max(b.x,e.x),window.Math.max(f.x,d.x));c=window.Math.min(window.Math.min(b.y,e.y),window.Math.min(f.y,d.y));b=window.Math.max(window.Math.max(b.y,
e.y),window.Math.max(f.y,d.y));return new D.B(a,c,g-a,b-c)};D.wq=function(a,b,c){for(var d=(0,D.yq)(b),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.Ea().ea();var g=D.o,h=D.o;c&&(g=(0,D.qq)(c,b,b.V),h=(0,D.qq)(c,b,b.R));g!=D.o&&(a.Fc=g);h!=D.o&&(a.zc=h);a.Vx();e=(0,D.xq)(a,e)}return e};D.vq=function(a,b,c){for(var d=(0,D.yq)(b),e=a,f=0;f<d.length;f++){b=d[f];a=b.Ea().ea();var g=D.o,h=D.o;c&&(g=(0,D.qq)(c,b,b.V),h=(0,D.qq)(c,b,b.R));g!=D.o&&(a.Fc=g);h!=D.o&&(a.zc=h);e=(0,D.xq)(a,e)}return e};
D.fq.prototype.dN=function(a,b,c,d,e){var f=this.fa,g=f.$c().e/2,h=f.$c().g/2;c=g-(c+a)*e;d=h-(d+b)*e;a=g-a*e;b=h-b*e;this.en&&(h=(0,D.rq)(this),-h.x*e<c?(g=c+h.x*e,c-=g,a+=g):-h.x*e>a&&(g=-h.x*e-a,c-=g,a+=g),-h.y*e<d?(e=d+h.y*e,d-=e,b+=e):-h.y*e>b&&(e=-h.y*e-b,d-=e,b+=e));f.ut=c;f.vt=d;f.rt=a;f.st=b};
D.zq=function(a,b){this.Init(a,b)};D.z.q(D.zq,D.Aq,"DvtBaseDiagramKeyboardHandler");D.y=D.zq.prototype;D.y.Init=function(a,b){D.zq.u.Init.call(this,a,b);this.v=a};D.y.na=(0,D.x)("v");D.y.BA=function(a){return 9==a.keyCode?D.p:this.Xg(a)&&!a.ctrlKey};D.y.cu=function(a){return 32==a.keyCode&&a.ctrlKey};D.y.KZ=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return D.o;var d=c[0];a=a.Ye();a=a.x+a.e/2;for(var e=0;e<c.length;e++){var f=c[e],g=f.Ye(),g=g.x+g.e/2;if(188==b&&g<=a||190==b&&g>=a){d=f;break}}return d};
D.y.a_=function(a,b,c,d){if(!d)return D.o;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],g=f,h=a,j=f,l=this.sE(j.qd?j.qd():j.getData().qd()),j=this.sE(j.pc?j.pc():j.getData().pc()),l=h==l?j:l,h=(0,D.Bq)(h),l=(0,D.Bq)(l),h=window.Math.atan2(l.y-h.y,l.x-h.x),h=0>h?h+2*window.Math.PI:h;g.v3=h;l=g=f;h=this.sE(l.qd?l.qd():l.getData().qd());l=this.sE(l.pc?l.pc():l.getData().pc());h=(0,D.Bq)(h);l=(0,D.Bq)(l);g.KE=window.Math.sqrt(window.Math.pow(l.x-h.x,2)+window.Math.pow(l.y-h.y,
2));f.ZN=a==this.sE(f.pc?f.pc():f.getData().pc())?1:0}d.sort(function(a,b){var c=a.v3,d=b.v3,e=-1;!(0,D.Cq)(c,d)&&c>d?e=1:(0,D.Cq)(c,d)&&(a.KE>b.KE?e=1:b.KE==a.KE&&a.ZN>b.ZN?e=1:b.KE==a.KE&&a.ZN==b.ZN&&(e=0));return e});for(a=0;a<d.length;a++)e=d[a],e.v3=D.i,e.KE=D.i,e.ZN=D.i;c=40==c.keyCode?D.k:D.p;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};D.y.sE=(0,D.ba)(D.o);D.Bq=function(a){a=a.Ye();return new D.H(a.x+a.e/2,a.y+a.g/2)};
D.Cq=function(a,b){var c=1E-7>=window.Math.abs(a-b);c||(c=1E-7>=window.Math.abs(2*window.Math.PI+window.Math.min(a,b)-window.Math.max(a,b)));return c};
D.Dq=function(a,b,c){this.Init(a,b,c)};D.z.q(D.Dq,D.D,"DvtBaseDiagramLink");D.y=D.Dq.prototype;D.y.Init=function(a,b,c){D.Dq.u.Init.call(this,a,D.o,b);this.v=c;this.Oy;this.Th;this.Bx;this.Va;this.CP;this.rj;this.li;this.Le=D.p;this.GG=D.k;this.I;this.Ag;this.Hg};D.y.na=(0,D.x)("v");D.y.$S=(0,D.t)();D.y.vp=(0,D.ba)(D.o);D.y.hT=(0,D.t)();D.y.BJa=(0,D.x)("Hg");(0,D.ca)("DvtBaseDiagramLink.prototype.getStartConnector",D.Dq.prototype.BJa);D.Dq.prototype.tIa=(0,D.x)("Ag");
(0,D.ca)("DvtBaseDiagramLink.prototype.getEndConnector",D.Dq.prototype.tIa);D.y=D.Dq.prototype;D.y.iw=(0,D.v)("I");D.y.yb=(0,D.x)("I");D.y.ew=function(a){this.rj=a;var b=this.Va,c=this.Gd();this.Xd();b&&(a=(0,D.Eq)(c,a,this.li),b.Ga(a))};D.y.Iv=(0,D.x)("rj");D.y.ls=function(a){this.li=a;var b=this.Va,c=this.Gd();this.Xd();b&&(a=(0,D.Eq)(c,this.rj,a),b.Ga(a))};D.y.Jv=(0,D.x)("li");D.y.Gd=(0,D.x)("CP");D.y.Td=function(a){if(a){this.CP=a;var b=this.Va;this.Xd();b&&(a=(0,D.Eq)(a,this.rj,this.li),b.Ga(a))}};
D.y.Xd=(0,D.ba)(D.o);D.y.Io=(0,D.t)();D.y.XR=(0,D.ba)(0);D.y.GR=(0,D.ba)(0);D.y.Xf=(0,D.v)("GG");D.y.Oa=function(){return this.na().Pq()&&this.GG};D.y.Fa=(0,D.x)("Le");(0,D.ca)("DvtBaseDiagramLink.prototype.isSelected",D.Dq.prototype.Fa);D.y=D.Dq.prototype;D.y.rb=(0,D.v)("Le");D.y.gE=(0,D.t)();D.y.$x=(0,D.ba)(D.p);D.y.cE=(0,D.t)();D.y.Kv=(0,D.ba)(1);(0,D.ca)("DvtBaseDiagramLink.prototype.getLinkWidth",D.Dq.prototype.Kv);D.y=D.Dq.prototype;D.y.TM=(0,D.t)();D.y.nH=(0,D.ba)("solid");D.y.SM=(0,D.t)();
D.y.rA=(0,D.ba)(D.o);D.y.tp=(0,D.ba)(D.o);D.y.nea=function(){return this.nH()};D.y.oE=function(){return this.Kv()};D.y.mea=function(){return this.rA()};D.Gq=function(a,b,c,d,e){if(c||e){var f;e||(f=a.I.dc().ea(),f.Ak(0),f.Qc=D.p);if(c=D.Fq.Eda(a.j(),c,e,f,a))a.I.k(c),D.Fq.OI(c,0,e,b,d);return c}};
D.Dq.prototype.Bc=function(a){this.Oy=a;D.oq.$T(a)?(this.Bx=a,this.Th=D.oq.Dda(a)):(this.Th=a,this.Bx=D.oq.BT(a));this.I&&this.I instanceof D.Vh&&(this.I.Go(this.Bx),this.Ag?D.Fq.OI(this.Ag,this.vp(),this.tp(D.Fq.nI),this.Th,1):this.Ag=(0,D.Gq)(this,this.Th,this.vp(),1,this.tp(D.Fq.nI)),this.Hg?D.Fq.OI(this.Hg,this.Kq(),this.tp(D.Fq.JI),this.Th,0):this.Hg=(0,D.Gq)(this,this.Th,this.Kq(),0,this.tp(D.Fq.JI)));var b=a=D.o;this.oe&&this.oe.$C instanceof D.Vh&&this.oe.$C.Go(this.Bx);this.oe&&(a=this.oe.Mt)&&
D.Fq.OI(a,this.Kq(),this.tp(D.Fq.JI),this.Th,0);this.oe&&(b=this.oe.Lt)&&D.Fq.OI(b,this.vp(),this.tp(D.Fq.nI),this.Th,1);this.vr&&this.vr.$C instanceof D.Vh&&this.vr.$C.Go(this.Bx);this.iL&&this.iL.cj((0,D.Hq)(this));this.IJ&&this.IJ.cj((0,D.Iq)(this))};D.Dq.prototype.Ab=(0,D.x)("Oy");D.Hq=function(a){return!a.Th?D.o:new D.H(a.Th[0],a.Th[1])};D.Iq=function(a){if(!a.Th)return D.o;var b=a.Th.length;return new D.H(a.Th[b-2],a.Th[b-1])};
D.Eq=function(a,b,c){var d=new D.Ej;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.Dq.prototype.lN=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.oE()+c;a=new D.J(a,b,c);return new D.Jq(this.j(),this.Bx,a)};
D.Lq=function(a,b,c,d){b=a.lN(b,c,d);a.Hg&&a.Kq()&&(c=a.Kq(),d=(0,D.Kq)(b,a.Th,c,a.tp(D.Fq.JI),a,0),b.Mt&&b.removeChild(b.Mt),b.Mt=d,b.h$=c,b.k(b.Mt));a.Ag&&a.vp()&&(c=a.vp(),a=(0,D.Kq)(b,a.Th,c,a.tp(D.Fq.nI),a,1),b.Lt&&b.removeChild(b.Lt),b.Lt=a,b.g$=c,b.k(b.Lt));return b};D.Mq=function(a,b,c){a=a.nea();a=D.oq.Cda(a);b.Ak(a,D.oq.Aea(a,c),D.oq.Bea(a,c))};
D.Nq=function(a,b){if(a){var c=D.o;b.zb&&(c=b.zb());if(c){var d=a.dc()?a.dc().ea():D.o,e=a.kc()?a.kc().ea():D.o;d&&d.Xq&&(d.Xq(c),a.ba(d));e&&e.Xq&&(e.Xq(c),a.P(e))}}};D.y=D.Dq.prototype;D.y.Yd=(0,D.ba)(D.o);D.y.Ye=function(a){return this.G(a)};D.y.Vj=function(){return this.Aa()};D.y.Be=(0,D.t)();D.y.qc=(0,D.t)();D.y.Ic=(0,D.t)();D.y.Vc=(0,D.ba)(D.o);
D.Oq=function(a,b,c){this.Init(a,b,c)};D.z.q(D.Oq,D.D,"DvtBaseDiagramNode");D.y=D.Oq.prototype;D.y.Init=function(a,b,c){D.Oq.u.Init.call(this,a,D.o,b);this.v=c;this.Le=this.Gi=D.p;this.GG=D.k;this.Va;this.CP;this.rj;this.li;this.kn;this.Nk};D.y.na=(0,D.x)("v");D.y.getData=(0,D.ba)(D.o);D.y.gg=function(){return this.Uf()};D.y.Uf=function(){return new D.B(0,0,this.getWidth(),this.getHeight())};D.y.Zi=function(){return{}};
D.y.Td=function(a){if(a){this.CP=a;var b=this.Va;this.Xd();b&&(a=(0,D.Pq)(a,this.rj,this.li),b.Ga(a))}};D.y.Gd=(0,D.x)("CP");D.y.Xd=(0,D.ba)(D.o);D.y.Io=(0,D.t)();D.y.sk=(0,D.ba)(D.o);D.y.YD=(0,D.t)();D.y.lb=(0,D.x)("Gi");D.y.mf=(0,D.v)("Gi");D.y.Fa=(0,D.x)("Le");(0,D.ca)("DvtBaseDiagramNode.prototype.isSelected",D.Oq.prototype.Fa);D.y=D.Oq.prototype;D.y.rb=(0,D.v)("Le");D.y.Xf=(0,D.v)("GG");D.y.Oa=function(){return this.na().Pq()&&this.GG};D.y.bT=(0,D.v)("he");D.y.XKa=(0,D.x)("he");
D.y.ew=function(a){this.rj=a;var b=this.Va,c=this.Gd();this.Xd();b&&(a=(0,D.Pq)(c,a,this.li),b.Ga(a))};D.y.Iv=(0,D.x)("rj");D.y.ls=function(a){this.li=a;var b=this.Va,c=this.Gd();this.Xd();b&&(a=(0,D.Pq)(c,this.rj,a),b.Ga(a))};D.y.Jv=(0,D.x)("li");D.Pq=function(a,b,c){var d=new D.Ej;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.y=D.Oq.prototype;
D.y.yw=function(a,b,c){c?((0,D.T)(c,"typeNumber",this,this.V,this.N,a),(0,D.T)(c,"typeNumber",this,this.R,this.W,b)):(0,D.Ik)(this,a,b)};D.y.Yd=(0,D.ba)(D.o);D.y.Ye=function(a){var b=this.Uf(a);a=(0,D.ef)(this,new D.H(b.x,b.y));b=(0,D.ef)(this,new D.H(b.x+b.e,b.y+b.g));return new D.B(a.x,a.y,b.x-a.x,b.y-a.y)};D.y.Vj=function(){return this.Aa()};D.y.Be=(0,D.t)();D.y.qc=(0,D.t)();D.y.Ic=(0,D.t)();D.y.Vc=(0,D.ba)(D.o);D.Qq=function(a,b){a.kn||(a.kn=[]);a.kn.push(b)};
D.Rq=function(a,b){a.Nk||(a.Nk=[]);a.Nk.push(b)};
D.Sq=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtDiagram",D.Sq);D.z.q(D.Sq,D.fq,"DvtDiagram");D.Sq.prototype.Init=function(a,b,c){D.Sq.u.Init.call(this,a,b,c);this.Of=new D.Tq;this.hb=new D.Uq(a,this.Rd,this);this.hb.We(this);(0,D.Mf)()||(0,D.ql)(this.hb,new D.Vq(this,this.hb));this.nb={};this.ml=[];this.Nc={};this.xu=[]};D.Sq.newInstance=function(a,b,c){return new D.Sq(a,b,c)};D.y=D.Sq.prototype;
D.y.GI=function(){!this.yr&&this.$e&&("none"!=this.yJ&&(this.jn={id:this.getId(),getId:(0,D.x)("id"),options:this.A(),getOptions:(0,D.x)("options"),panZoomMatrix:this.fa.ja.Ea(),getPanZoomMatrix:(0,D.x)("panZoomMatrix"),nodes:this.nb?(0,D.Wq)(this):[],links:this.Nc?(0,D.Xq)(this):[],getNodes:(0,D.x)("nodes"),getLinks:(0,D.x)("links")},this.jn.A=this.jn.getOptions,this.jn.aJa=this.jn.getPanZoomMatrix,this.jn.getId=this.jn.getId,this.jn.ora=this.jn.getNodes,this.jn.Zqa=this.jn.getLinks),this.$e=D.p,
this.P2(),this.fQ=this.fa)};D.y.P2=function(){this.Al=new D.D(this.j());this.ni=new D.D(this.j());this.Kt=new D.D(this.j());this.nb={};this.ml=[];this.Nc={};this.xu=[]};D.y.wx=function(){this.yf&&(this.removeChild(this.yf),this.yf.Y());this.yf=D.o;this.jb&&(this.jb=D.o,this.za().We(this))};
D.y.Cf=function(a,b){var c=new D.jo(this.j(),D.o,a.Ma()),d=b.aJa(),e=this.fa.ja.Ea();d.pd(e)||(this.fa.ja.Ga(d),(0,D.T)(c.O,"typeMatrix",this.fa.ja,this.fa.ja.Ea,this.fa.ja.Ga,e));(0,D.Hn)(a,b.ora(),this.nb?(0,D.Wq)(this):[]);(0,D.Hn)(a,b.Zqa(),this.Nc?(0,D.Xq)(this):[]);a.add(c,1)};
D.y.$p=function(a){var b=D.p;if(!this.$e&&!this.yr){var c=this.A().nodes;if(c)for(var d=0;d<c.length;d++){var e=c[d],e=D.Jl.Id(e,this.A().styleDefaults.nodeDefaults),e=new D.Yq(this.j(),this,e),f=e.getId();e.Aba()?this.ml.push(f):(e.U(this.ni),this.ml.push(f),this.nb[f]=e)}if(c=this.A().links)for(d=0;d<c.length;d++){var e=c[d],e=D.Jl.Id(e,this.A().styleDefaults.linkDefaults),g=new D.Zq(this.j(),this,e),e=g.getId();g.Aba()?this.xu.push(e):(g.U(this.Al),this.xu.push(e),this.Nc[e]=g,f=this.Q(g.qd()),
g=this.Q(g.pc()),(0,D.Qq)(f,e),(0,D.Rq)(g,e))}b=0===window.Object.keys(this.nb).length;(0,D.vl)(this.j(),[this])}if(b)(0,D.$q)(this,a,b);else{this.k(this.fQ);var h=this;this.Qq(a).then(function(){(0,D.$q)(h,a,b)},function(){h.removeChild(h.fQ);h.fQ=D.o;h.$e=D.k})}};
D.$q=function(a,b,c){var d;if(!c){a.removeChild(a.fQ);a.Nz();a.Oz();if(d=a.mj==D.o)a.mj=(0,D.sq)(a,b,D.i,D.i);var e=a.fa;if(a.$e){if(a.yr&&!a.en){var f=a.mw(b,a.mj);f||(f=(0,D.sq)(a,D.i,D.i,D.i));!a.Jr||!a.Lx?(e.vO=D.k,e.Ko(D.o,g),e.vO=a.Lx):e.C$(D.o,f)}}else{a.mw(b,a.mj);if(!a.yr){var g=(f=a.en?D.k:D.p)?(0,D.rq)(a):a.mj;f&&(e.Bq=0);e.Ko(D.o,g)}e.Hi=a.Jr;e.To=a.Lx;e.vO=a.Lx}}a.fQ=D.o;a.$e||(a.jb&&a.jb.stop(D.k),(0,D.rl)()&&a.LR()&&!a.jn?a.jb=D.wl.jD(a.j(),a.LR(),a,D.o,a.Ma()):"none"!=a.yJ&&a.jn&&
(a.yf=new D.D(a.j(),"Delete Container"),a.k(a.yf),e=new D.ar(a.j(),a.yf,a.jn,a),(0,D.Hn)(e,[a.jn],[a]),a.jb=e.Ur()),a.jb?(a.za().Mc(),a.za().zk(a),a.jb.le(a.wx,a),a.jb.play()):a.wx());a.$e=D.k;(0,D.hq)(a,c);a.Jr&&(c=a.mj,c!=D.o&&(b=a.fa.fd(b),a.dN(c.x,c.y,c.e,c.g,b)));a.en=D.o;a.oK=D.o;d&&(a.mj=D.o)};D.y=D.Sq.prototype;
D.y.Ud=function(a){D.Sq.u.Ud.call(this,a);(0,D.br)(this,this.J);this.Jr="none"!=this.J.panning;this.Lx="none"!=this.J.zooming;this.GO="hidden";this.yJ=this.J.animationOnDataChange;this.PW="auto"==this.J.animationOnDisplay?D.wl.py:D.o;this.hw(this.J.selectionMode);this.nz=this.J.emptyText?this.J.emptyText:(0,D.Gk)(this.J,"labelNoData","DvtUtilBundle","NO_DATA")};D.y.Qx=function(){var a=this.A().maxZoom,a=(0,window.parseFloat)(a);return 0<a?a:1};
D.y.nD=function(){var a=this.A().minZoom;if(a){var b=(0,window.parseFloat)(a);0<b&&(a=window.Math.min(b,this.Qx()));return a}return D.o};D.y.Ma=function(){return(0,D.Zp)(this.A().styleDefaults.animationDuration)/1E3};D.y.Rd=function(a){var b=a.Xa();("categoryRollOver"==b||"categoryRollOut"==b)&&this.Nz();a&&this.Wa(a)};
D.y.Qq=function(a){for(var b=this.A().layout,c=(0,D.kq)(this),d={},e=0;e<this.ml.length;e++){var f=this.ml[e];this.Q(f)&&(d[f]=D.k,c.jR(this.mu(this.Q(f))))}for(var g in this.Nc)if(e=this.Wb(g)){var f=e.getData().startNode,h=e.getData().endNode;d[f]&&d[h]&&(0,D.cr)(c,this.nE(e,f,h))}if(b&&"function"==typeof b){var j=this;(b=b(c))||(b={then:function(a){a()}});this.s0(0);b.then(function(){j.s0(1);j.gI(c,a,D.k)},(0,D.t)());return b}this.zE("DvtDiagram: Layout function is not defined",1)};
D.y.s0=function(a){this.$e||(this.Al.D(a),this.ni.D(a))};D.y.Q=function(a){return this.nb[a]};D.y.Wb=function(a){return this.Nc[a]};D.y.pI=(0,D.x)("xu");D.Xq=function(a){var b=[],c;for(c in a.Nc)b.push(a.Nc[c]);return b};D.Sq.prototype.eB=(0,D.x)("ml");D.Wq=function(a){var b=[],c;for(c in a.nb)b.push(a.nb[c]);return b};D.y=D.Sq.prototype;
D.y.ph=function(a){D.Sq.u.ph.call(this,a);switch(a.Dj()){case "adjustPanConstraints":if(this.Jr){var b=a.ev,c=this.mj?this.mj:(0,D.sq)(this,a.O,D.i,D.i);this.dN(c.x,c.y,c.e,c.g,b)}break;case "zoomToFitCalcBounds":this.en||(c=this.mj?this.mj:(0,D.sq)(this,a.O,D.i,D.i),a.WG=c);break;case "zoomed":if(this.A().zoomRenderer&&a.EC!==a.ev)for(b in this.nb){var c=this.Q(b),d=a;if(c.v.A().zoomRenderer){var e=c.Ki(d.EC),d=c.Ki(d.ev);(0,D.dr)(c,c.v.A().zoomRenderer,d,e)}}}};D.y.ata=(0,D.t)();
D.y.eM=function(a){var b=[],c;for(c in this.Nc){var d=this.Wb(c),e=d.qd(),f=d.pc();(e==a||f==a)&&d.ub&&b.push(d)}return b};D.y.Yj=function(){return(0,D.O)("DvtUtilBundle","DIAGRAM")};D.y.Oz=function(){if(this.J.selection&&this.Pq()){var a=[],b;for(b in this.nb)a.push(this.Q(b));for(var c in this.Nc)a.push(this.Wb(c));(0,D.om)(this.nh(),this.J.selection,a)}};
D.y.Nz=function(){this.wz&&(this.fR(D.p,this.wz),this.wz=D.o);var a=this.J.highlightedCategories;if(a){var b="any"==this.J.highlightMatch;this.wz={};var c=[],d;for(d in this.nb){var e=this.Q(d),f=b?D.eg.wA(e.Vc(),a):D.eg.dS(e.Vc(),a);f&&(this.wz[e.getId()]=e,c.push(e))}d=this.J.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],g=0;g<c.length;g++)for(var h=c[g],j=f&&h.Nk?h.Nk:[],j=d&&h.kn?j.concat(h.kn):j,h=0;h<
j.length;h++){var l=j[h];this.wz[l]=this.Wb(l);e.push(this.Wb(l))}(0,D.er)(this,e)}var c=[],m;for(m in this.Nc)if(d=this.Wb(m),f=b?D.eg.wA(d.Vc(),a):D.eg.dS(d.Vc(),a))this.wz[d.getId()]=d,c.push(d);"linkAndNodes"==this.J.linkHighlightMode&&(0,D.er)(this,c);this.fR(D.k,this.wz)}};D.er=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.qd(),d=d.pc();a.wz[e]=a.Q(e);a.wz[d]=a.Q(d)}};
D.Sq.prototype.fR=function(a,b){var c=a?this.J.styleDefaults._highlightAlpha:1;this.Al.D(c);this.ni.D(c);for(var d in b)a?this.Kt.k(b[d]):b[d]instanceof D.Zq?this.Al.k(b[d]):b[d]instanceof D.Yq&&this.ni.k(b[d])};D.Sq.prototype.Fe=function(a){this.J.highlightedCategories=D.Jl.ea(a);this.Nz()};D.Sq.prototype.highlight=D.Sq.prototype.Fe;D.Sq.prototype.select=function(a){this.J.selection=D.Jl.ea(a);this.Oz()};D.Sq.prototype.select=D.Sq.prototype.select;
D.Sq.prototype.dg=function(){this.Ck||(this.Ck=new D.fr(this));return this.Ck};D.Sq.prototype.getAutomation=D.Sq.prototype.dg;D.Sq.prototype.zE=function(a,b){var c=this.A()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};D.Sq.prototype.hs=function(a,b){var c=this.Q(a);c&&c.hs(b)};D.Sq.prototype.processDefaultHoverEffect=D.Sq.prototype.hs;D.Sq.prototype.PA=function(a,b){var c=this.Q(a);c&&c.PA(b)};
D.Sq.prototype.processDefaultSelectionEffect=D.Sq.prototype.PA;D.Sq.prototype.$v=function(a,b){var c=this.Q(a);c&&c.$v(b)};D.Sq.prototype.processDefaultFocusEffect=D.Sq.prototype.$v;
D.hr=function(a,b){D.hr.u.constructor.call(this,a,b);this.B6=100;this.v=b};D.z.q(D.hr,D.ir,"DvtDiagramCategoryRolloverHandler");D.hr.prototype.F1=function(a){return D.z.Mf(this,function(){this.iJ=D.k;this.v.Rd(a)})};D.hr.prototype.E1=function(a){return D.z.Mf(this,function(){(0,D.jr)(this);this.v.Rd(a)})};
D.Tq=function(){this.Init({skyros:D.kr,alta:D.lr})};D.z.q(D.Tq,D.fk,"DvtDiagramDefaults");
D.kr={skin:"alta",emptyText:D.o,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,
height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}};D.lr={};
D.ar=function(a,b,c,d){this.Init(a,b,c,d)};D.z.q(D.ar,D.Gn,"DvtDiagramDataAnimationHandler");D.ar.prototype.Init=function(a,b,c,d){D.ar.u.Init.call(this,a,b);this.hDa=c;this.dPa=d};D.ar.prototype.Ma=function(){return(0,D.Zp)(this.hDa.A().styleDefaults.animationDuration)/1E3};
D.Uq=function(a,b,c){this.Init(a,b,c);this.v=c};D.z.q(D.Uq,D.hk,"DvtDiagramEventManager");D.Uq.prototype.Yp=function(a,b,c){var d=this.v.A();"dim"==d.hoverBehavior&&(b=b.Vc?b.Vc():[],d.highlightedCategories=c?b.slice():D.o,c=new D.kn(c?"categoryRollOver":"categoryRollOut",d.highlightedCategories),b=(0,D.Zp)(d.styleDefaults.hoverBehaviorDelay),this.uB.Rd(c,(0,D.Wq)(this.v),b,"any"==d.highlightMatch),a.stopPropagation())};D.Uq.prototype.W0=function(a,b){return new D.hr(a,b)};
D.Uq.prototype.Jh=function(a){var b=D.k,c=a.keyCode,d=this.Od(),e=d instanceof D.Yq?d.Ou:D.o;9!=c&&this.Mw?(e.OL(a),a.preventDefault()):9==c&&e instanceof D.Oj?!a.shiftKey&&d.Ic()?(d.qc(),e.OL(a),a.preventDefault(),this.Mw=D.k):(a.shiftKey&&this.Mw?(this.LI(a,d),a.preventDefault()):(this.Mw&&d.Be(),b=D.Uq.u.Jh.call(this,a)),this.Mw=D.p):b=D.Uq.u.Jh.call(this,a);return b};
D.Vq=function(a,b){this.Init(a,b)};D.z.q(D.Vq,D.zq,"DvtDiagramKeyboardHandler");D.Vq.prototype.Xg=function(a){var b=D.p;switch(a.keyCode){case 188:case 190:b=a.altKey?D.k:D.p;break;default:b=D.Vq.u.Xg.call(this,a)}return b};D.Vq.prototype.Hj=function(a){if(9==a.keyCode){var b=this.ra.Od();if(b)return(0,D.ti)(a),b;b=(0,D.Wq)(this.na());if(0<b.length)return(0,D.ti)(a),this.VL(b)}return D.Vq.u.Hj.call(this,a)};D.Vq.prototype.sE=function(a){return this.na().Q(a)};
D.mq={};D.z.q(D.mq,D.z,"DvtDiagramLayoutUtils");D.mq.dKa=function(a){for(var b=D.mq.KIa(a),c=window.Math.max(b.w,b.h),b=a.ff(),d=a.yp(),e=window.Math.floor(window.Math.sqrt(b)),f=0,f=(f=a.Zi())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(window.Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,g=0;g<b;g++)D.mq.wGa(a.pD(g),d+c*window.Math.floor(g/e),f+c*(g%e))};
D.mq.KIa=function(a){for(var b=a.ff(),c=0,d=0,e=0;e<b;e++){var f=a.pD(e),g=f.De(),c=window.Math.max(g.w,c),d=window.Math.max(g.h,d);if(f=f.Xd())c=window.Math.max(f.w,c),d=window.Math.max(g.h+f.h,d)}return new D.jq(0,0,c,d)};D.mq.wGa=function(a,b,c){var d=a.Uf();a.cj(new D.mr(b-d.x-0.5*d.w,c-d.y-0.5*d.h));D.mq.cMa(a)};D.mq.cMa=function(a){var b=a.De(),c=a.hg(),d=a.Xd();d&&a.Td(new D.mr(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};D.mq.lZ=function(a){return a===D.i||a==D.o?D.o:new D.jq(a.x,a.y,a.e,a.g)};
D.mq.Hpa=function(a){return a===D.i||a==D.o?D.o:new D.mr(a.x,a.y)};D.mq.CGa=function(a){return a?new D.B(a.x,a.y,a.w,a.h):D.o};D.mq.Gpa=function(a){return a?new D.H(a.x,a.y):D.o};
D.Zq=function(a,b,c){this.Init(a,b,c)};D.z.q(D.Zq,D.Dq,"DvtDiagramLink");D.y=D.Zq.prototype;D.y.Init=function(a,b,c){D.Zq.u.Init.call(this,a,c.id,b);this.wa=c;this.v.Pq()&&this.setCursor("pointer")};D.y.getData=(0,D.x)("wa");D.y.getId=function(){return this.getData().id};D.y.qd=function(){return this.getData().startNode};D.y.pc=function(){return this.getData().endNode};D.y.Xd=function(){var a=D.o;this.Va&&(a=this.Va.G());return a};D.y.nH=function(){return this.getData().style};D.y.Kv=function(){return this.getData().width};
D.y.rA=function(){return this.getData().color};D.y.Kq=function(){return this.getData().startConnectorType};D.y.vp=function(){return this.getData().endConnectorType};D.y.XR=function(){if(this.Kq()){var a=this.yb().dc().ea();a.Ak(0);return D.Fq.HT(D.o,this.Kq(),D.o,a,this)}return 0};D.y.GR=function(){if(this.vp()){var a=this.yb().dc().ea();a.Ak(0);return D.Fq.HT(D.o,this.vp(),D.o,a,this)}return 0};
D.y.U=function(a){var b=this.getData(),c=this.Bx;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,g=b.style;this.vr=this.lN("#000000",0,b._hitDetectionOffset);this.k(this.vr);b=new D.J(e,1,f);(0,D.Mf)()&&((0,D.nr)()&&1==(0,D.Ho)())&&(b.Qc=D.k);g=D.oq.Cda(g);b.Ak(g,D.oq.Aea(g),D.oq.Bea(g));c=new D.Vh(this.j(),c,d);c.P(D.o);c.ba(b);this.iw(c);this.k(c);b=this.v;c=this.getData();d=(0,D.G)(b.j())?"right":"left";c.label&&(g=c.labelStyle,b=new D.Nf(b.j(),c.label,0,0),b.Na(new D.I(g)),b.dw(d),b.XA("top"),
c=(0,D.or)((new D.I(c.labelStyle)).getWidth()),0<c&&D.af.Vb(b,c,window.Infinity,this)||this.k(b),this.Va=b);a.k(this);this.ld("img");this.Rm();this.v.za().Da(this,this)};D.y.rb=function(a){D.Zq.u.rb.call(this,a);a?this.tv(this.yl,D.k):this.vz();this.Rm()};D.y.Oa=function(){return this.na().Pq()&&"off"!=this.getData().selectable};
D.y.tv=function(a,b){if(a){this.Uh||(this.Uh=this.yb().dc());var c=this.yb().dc().ea();c.Xq&&c.Xq(this.getData().hoverInnerColor);this.yb().ba(c);(0,D.Nq)(this.Hg,c);(0,D.Nq)(this.Ag,c)}else this.Uh&&(this.yb().ba(this.Uh),(0,D.Nq)(this.Hg,this.Uh),(0,D.Nq)(this.Ag,this.Uh),this.Uh=D.o);this.oe||(this.oe=(0,D.Lq)(this,"#000000",1,0),this.Ua(this.oe,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.oe.dc().ea();d.Xq(c);d.sa(2+this.oE());(0,D.Mq)(this,d,D.k);this.oe.ba(d,
2)};D.y.vz=function(){this.Uh&&(this.yb().ba(this.Uh),(0,D.Nq)(this.Hg,this.Uh),(0,D.Nq)(this.Ag,this.Uh),this.Uh=D.o);this.oe&&(this.removeChild(this.oe),this.oe.Y&&this.oe.Y(),this.oe=D.o)};D.y.Sb=function(){this.yl||(this.yl=D.k,this.tv(D.k,this.Fa()))};D.y.Ib=function(){this.Fa()?this.tv(D.p,D.k):this.vz();this.yl=D.p};D.y.Ne=function(){var a=this.na().A().tooltip;return a?(0,D.$p)(this.na().j().jd(),a,this.Fv()):this.ed()};D.y.ed=function(){return this.getData().shortDesc};
D.y.Fv=function(){return{id:this.getId(),type:"link",label:this.getData().label}};D.y.nc=function(){var a=[];this.Oa()&&a.push((0,D.O)("DvtUtilBundle",this.Fa()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.Hk)(this.ed(),a)};D.y.Rm=function(){if(!(0,D.df)()){var a=this.nc();a&&this.Mb("label",a)}};
D.y.Yd=function(a){if(32==a.keyCode&&a.ctrlKey)return this;if(38==a.keyCode||40==a.keyCode){var b=this.jK;b||(b=this.na().Q((0,D.pr)(this.na(),this)));var c=this,d=this.na().eM(b.getId()),e;(e=this.na().za().yg)&&e.a_&&(c=e.a_(b,this,a,d));c.jK=b;return c}return 39==a.keyCode||37==a.keyCode?(a=this.xX(a.keyCode)?this.qd():this.pc(),this.na().Q(a)):D.o};D.y.xX=function(a){var b=(0,D.Hq)(this),c=(0,D.Iq)(this),b=b.x<c.x?D.k:D.p;return 39==a&&b||37==a&&!b?D.p:D.k};D.y.Be=function(){this.Ub=D.k;this.Sb()};
D.y.qc=function(){this.Ub=D.p;this.Ib()};D.y.Ic=(0,D.x)("Ub");D.y.Vc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.y.Aba=function(){var a=this.na().A().hiddenCategories;return a&&D.eg.wA(a,this.Vc())||!this.na().Q(this.qd())||!this.na().Q(this.pc())?D.k:D.p};
D.y.Cf=function(a,b){var c=b.Ab(),d=this.Ab(),e=new D.jo(this.j(),D.o,a.Ma());D.eg.pd(c,d)||(this.Bc(c),c="typePolyline",0<d.length&&(0,window.isNaN)(d[0])&&(c="typePath"),(0,D.T)(e.O,c,this,this.Ab,this.Bc,d));b.Va&&this.Va&&(d=b.Va.Ea(),c=this.Va.Ea(),d.pd(c)||(this.Va.Ga(d),(0,D.T)(e.O,"typeMatrix",this.Va,this.Va.Ea,this.Va.Ga,c)));if(b.yb()&&this.yb()&&(d=b.yb().dc(),c=this.yb().dc(),d&&c&&d instanceof D.J&&c instanceof D.J&&(d.zb()!=c.zb()||d.getWidth()!=c.getWidth())))this.yb().ba(d),(0,D.T)(e.O,
"typeStroke",this.yb(),this.yb().dc,this.yb().ba,c);a.add(e,1)};D.y.bi=function(a){this.na().Al.k(this);var b=this,c=new D.lo(this.j(),this,a.Ma());(0,D.Al)(c,function(){b.getParent().removeChild(b);b.Y()});a.add(c,0)};D.y.Vg=function(a){this.D(0);a.add(new D.Jn(this.j(),this,a.Ma()),2)};D.y.Zi=function(){return this.getData()};
D.Fq={};D.z.q(D.Fq,D.z,"DvtDiagramLinkConnectorUtils");D.Fq.nI="endConnector";D.Fq.JI="startConnector";D.Fq.vda="arrowOpen";D.Fq.xT="arrow";D.Fq.yT="arrowConcave";D.Fq.xda="rectangle";D.Fq.yda="rectangleRounded";D.Fq.wda="circle";
D.Fq.Eda=function(a,b,c,d,e){if(c)return D.Fq.Yta(c,e);c=e.oE();switch(b){case D.Fq.xT:return D.Fq.Zta(a,c,e.rA());case D.Fq.yT:return D.Fq.$ta(a,c,e.rA());case D.Fq.vda:return D.Fq.bua(a,c,d);case D.Fq.wda:return D.Fq.Xta(a,c,d);case D.Fq.xda:return D.Fq.Jda(a,c,d);case D.Fq.yda:return D.Fq.fua(a,c,d)}return D.o};D.Fq.OI=function(a,b,c,d,e){b=D.Fq.Qta(a,c,d,e);a.Ga(b)};
D.Fq.Qta=function(a,b,c,d){var e=-1,f=0,g=0,h=0;c&&(f=c.length,1===d?(2<=f&&(g=c[f-2],h=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=g-1E-4,f=h)):(2<=f&&(g=c[0],h=c[1]),4<=f?(e=c[2],f=c[3]):(e=g+1E-4,f=h)));c=g;d=h;e=D.Fq.Pta(e,f,g,h);g=a.$za;g||(g=a.Ea().ea(),a.$za=g);h=new D.Ej;b&&(b=D.Fq.$ja(a),f=a.Ac(),a=a.Hc(),h.translate(-0.5*b.e*f,-0.5*b.g*a));h.rotate(e);h.translate(c,d);h.concat(g);return h};D.Fq.$ja=function(a){var b=a.Pza;b||(b=a.G(),a.Pza=b);return b};
D.Fq.Pta=function(a,b,c,d){return window.Math.atan2(d-b,c-a)};D.Fq.$ta=function(a,b,c){b=6*D.Fq.zW(b);var d=0.8*b;a=new D.Mo(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.va(c);return a};D.Fq.Zta=function(a,b,c){b=5*D.Fq.zW(b);var d=0.8*b;a=new D.Mo(a,[0,-0.5*d,b,0,0,0.5*d]);a.va(c);return a};D.Fq.zW=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};
D.Fq.bua=function(a,b,c){b*=3;var d=c.getWidth();a=new D.hp(a,[-b+d*window.Math.sqrt(2)/2,-b,d*window.Math.sqrt(2)/2,0,-b+d*window.Math.sqrt(2)/2,b]);a.ba(c);a.P(D.o);return a};D.Fq.Eqa=function(a){return 2*a};D.Fq.vra=function(a){return 3*a};D.Fq.Xta=function(a,b,c){b=D.Fq.Eqa(b);a=new D.No(a,b,0,b);a.ba(c);a.P(D.o);return a};D.Fq.Jda=function(a,b,c){b=D.Fq.vra(b);a=new D.F(a,0,-b/2,b,b);a.ba(c);a.P(D.o);return a};D.Fq.fua=function(a,b,c){a=D.Fq.Jda(a,b,c);(0,D.qr)(a,b);return a};
D.Fq.Yta=function(a,b){var c=(0,D.zi)(b.na()),d=b.getData().vl;c.pr=d;c.UA(b,b.tR);d=b.nM();c.Ht=d;return D.ye.RH(c,a,b)};D.Fq.HT=function(a,b,c,d,e){if(c)return b=D.Fq.$ja(a),a=a.Ac(),0.5*b.e*a;a=e.oE();d=d.getWidth();switch(b){case D.Fq.vda:return d*window.Math.sqrt(2);case D.Fq.xT:return b=D.Fq.zW(a),5*b;case D.Fq.yT:return b=D.Fq.zW(a),0.78*6*b;case D.Fq.wda:return 2*D.Fq.Eqa(d)+d/2;case D.Fq.xda:case D.Fq.yda:return D.Fq.vra(d)+d/2;default:return 0}};
D.Jq=function(a,b,c){D.Jq.u.Init.call(this,a);this.Init(a,b,c)};D.z.q(D.Jq,D.D,"DvtDiagramLinkUnderlay");D.Jq.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.fo=c;this.fo||(this.fo=new D.J("#ffffff",1,1));this.$C=new D.Vh(a,b);this.$C.ba(c);this.$C.P(D.o);this.k(this.$C);this.g$=this.Lt=this.h$=this.Mt=D.o};D.Kq=function(a,b,c,d,e,f){a=D.Fq.Eda(a.j(),c,d,a.fo,e);D.Fq.OI(a,0,d,b,f);return a};
D.Jq.prototype.ba=function(a,b){this.fo=a;(0,D.Mf)()&&((0,D.nr)()&&1==(0,D.Ho)())&&(a.Qc=D.k);this.$C.ba(a);if(this.Mt){var c=a.ea();c.Ak(0);c.Qc=D.p;if(this.h$==D.Fq.xT||this.h$==D.Fq.yT)c.sa(b),this.Mt.va(a.zb());this.Mt.ba(c)}if(this.Lt){c=a.ea();c.Ak(0);c.Qc=D.p;if(this.g$==D.Fq.xT||this.g$==D.Fq.yT)c.sa(b),this.Lt.va(a.zb());this.Lt.ba(c)}};D.Jq.prototype.dc=(0,D.x)("fo");
D.oq={};D.z.q(D.oq,D.z,"DvtDiagramLinkUtils");D.oq.Cda=function(a){var b=0;switch(a){case "dash":b=1;break;case "dot":b=2;break;case "dashDot":b=3}return b};D.oq.Aea=function(a,b){if(0==a)return D.o;if(1==a)return b?"8,2":"6,4";if(2==a)return b?"4,1":"2,3";if(3==a)return b?"10,1,4,1":"8,3,2,3"};D.oq.Bea=function(a,b){return b&&0!=a?1:D.o};D.oq.BT=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
D.oq.Dda=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)(0,window.isNaN)(a[c])||b.push(a[c]);return b};D.oq.$T=function(a){return a&&0<a.length?(0,window.isNaN)(a[0]):D.p};D.oq.w1=function(a){var b=[];a=D.oq.$T(a)?D.oq.Dda(a):a;for(var c=0;c<a.length;c+=2)b.push(new D.H(a[c],a[c+1]));return b};
D.Yq=function(a,b,c){this.Init(a,b,c)};D.z.q(D.Yq,D.Oq,"DvtDiagramNode");D.y=D.Yq.prototype;D.y.Init=function(a,b,c){D.Yq.u.Init.call(this,a,c.id,b);this.wa=c;this.v.Pq()&&this.setCursor("pointer")};D.y.getData=(0,D.x)("wa");D.y.getId=function(){return this.wa.id};D.y.Uf=(0,D.x)("tJ");D.y.Xd=function(){var a=D.o;this.Va&&(a=this.jx?this.jx:this.Va.G());return a};
D.y.rb=function(a){var b=this.Ki();D.Yq.u.rb.call(this,a);this.v.A().selectionRenderer?(0,D.dr)(this,this.v.A().selectionRenderer,this.Ki(),b):this.PA(a);this.Rm()};D.y.PA=function(a){this.wo()&&this.wo().rb(a)};D.y.Oa=function(){return this.na().Pq()&&"off"!=this.getData().selectable};D.y.sN=(0,D.x)("I");
D.y.U=function(a){if(this.v.A().renderer)(0,D.dr)(this,this.v.A().renderer,this.Ki(),D.o);else{var b=this.getData(),c=this.v,d=new D.I(b.backgroundStyle);if(!(0,D.ag)(d)){var e=(0,D.or)(d.C("width")),f=(0,D.or)(d.C("height")),g=d.C("background-color"),h=d.C("border-color"),j=(0,D.or)(d.C("border-width")),d=(0,D.or)(d.C("border-radius")),c=new D.F(c.j(),0,0,e,f);c.va(g);d&&(c.Ef(d),c.Nf(d));h&&c.ba(new D.J(h,1,j));this.k(c);this.YH(c);this.fb=c}g=this.v;if(h=b.icon){c=h.width;e=h.height;j=h.color;
g=h.source?new D.rr(g.j(),c/2,e/2,c,e,h.source,h.sourceSelected,h.sourceHover,h.sourceHoverSelected):new D.Qn(g.j(),h.shape,"alta",c/2,e/2,c,e);"none"!=h.fillPattern?g.P(new D.nh(h.fillPattern,j,j)):g.va(j);h.borderColor&&g.ba(new D.J(h.borderColor,h.borderWidth));this.k(g);this.I=g;if(this.fb){var h=b.icon,j=this.fb.getWidth(),c=this.fb.getHeight(),e=h.width,f=h.height,d=0.5*(j-e),l=0.5*(c-f);if(h.positionX!==D.i)d=(0,window.parseFloat)(h.positionX),(0,D.G)(this.j())&&(d=j-d-e);else{var m=h.halign;
"start"==m?m=(0,D.G)(this.j())?"right":"left":"end"==m&&(m=(0,D.G)(this.j())?"left":"right");d="left"==m?0:"right"==m?j-e:d}h.positionY!==D.i?l=(0,window.parseFloat)(h.positionY):"top"==h.valign?l=0:"bottom"==h.valign&&(l=c-f);(0,D.Ik)(this.I,d,l)}this.fb||this.YH(g)}j=this.v;g=(0,D.G)(j.j())?"right":"left";b.label&&(h=b.labelStyle,j=new D.Nf(j.j(),b.label,0,0),j.Na(new D.I(h)),j.dw(g),j.XA("top"),g=(0,D.or)((new D.I(b.labelStyle)).getWidth()),0<g&&D.af.Vb(j,g,window.Infinity,this)||this.k(j),this.Va=
j);(0,D.sr)(this.wo(),b)}a.k(this);a=D.o;this.Ou?(b=this.G())&&(a=new D.B(b.x,b.y,b.e-b.x,b.g-b.y)):(a=this.fb?this.fb.pE(this):D.o)&&this.I?a=(0,D.tp)(a,this.I.pE(this)):!a&&this.I&&(a=this.I.pE(this));this.tJ=a;this.ld("img");this.Rm();this.v.za().Da(this,this)};
D.dr=function(a,b,c,d){var e=a.v.A()._contextHandler;if(e){var f=a.getData();c=e(a.Aa(),a.Ou,f,c,d);b=b(c);a.Ou&&b!=a.Ou&&(a.Ou.namespaceURI===D.C.PN?(0,D.tr)(a).removeChild(a.Ou):a.removeChild(b),a.Ou=D.o);b&&b.namespaceURI===D.C.PN?a.Ou||(D.C.Fd((0,D.tr)(a),b),a.Ou=b):b instanceof D.Oj?a.Ou||(a.k(b),a.Ou=b):b&&a.v.zE("DvtDiagram: could not add custom node content for the node "+a.getId()+b,1)}else a.v.zE("DvtDiagram: could not add custom node content - context handler is undefined",1)};
D.sr=function(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new D.J(c,1,4);f.Qc=D.k;d=new D.J(d,1,8);d.Qc=D.k;var g=new D.J(e,1,2);g.Qc=D.k;var h=new D.J(e,1,4);h.Qc=D.k;c=new D.J(c,1,4);c.Qc=D.k;e=new D.J(e,1,8);e.Qc=D.k;a.Ho(f,d).Jo(g,h).Jp(c,e)};D.y=D.Yq.prototype;D.y.YH=(0,D.v)("HG");D.y.wo=function(){if(!this.HG&&this.tJ){var a=new D.F(this.v.j(),this.tJ.x,this.tJ.y,this.tJ.e,this.tJ.g);(0,D.Li)(a);this.YH(a);this.Ua(a,0);(0,D.sr)(a,this.getData());this.HG=a}return this.HG};
D.y.Sb=function(){var a=this.Ki();this.yl=D.k;this.v.A().hoverRenderer?(0,D.dr)(this,this.v.A().hoverRenderer,this.Ki(),a):this.hs(D.k)};D.y.Ib=function(){var a=this.Ki();this.yl=D.p;this.v.A().hoverRenderer?(0,D.dr)(this,this.v.A().hoverRenderer,this.Ki(),a):this.hs(D.p)};D.y.hs=function(a){this.wo()&&(a?this.wo().Sb():this.wo().Ib())};D.y.Ne=function(){var a=this.na().A().tooltip;return a?(0,D.$p)(this.na().j().jd(),a,this.Fv()):this.ed()};D.y.ed=function(){return this.getData().shortDesc};
D.y.Fv=function(){return{id:this.getId(),type:"node",label:this.getData().label}};D.y.nc=function(){var a=[];this.Oa()&&a.push((0,D.O)("DvtUtilBundle",this.Fa()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.Hk)(this.ed(),a)};D.y.Rm=function(){if(!(0,D.df)()){var a=this.nc();a&&this.Mb("label",a)}};
D.y.Yd=function(a){var b=D.o;if(32==a.keyCode&&a.ctrlKey)b=this;else if(a.altKey){var c=this.na().eM(this.getId()),d;(d=this.na().za().yg)&&d.KZ&&(b=d.KZ(this,a,c));b?b.jK=this:b=this}else b=(0,D.Wq)(this.na()),b=(0,D.wn)(this,a,b);return b};D.y.Be=function(){var a=this.Ki();this.Ub=D.k;this.v.A().focusRenderer?(0,D.dr)(this,this.v.A().focusRenderer,this.Ki(),a):this.$v(D.k)};
D.y.qc=function(){this.Ic()&&(this.Ki(),this.Ub=D.p,this.v.A().focusRenderer?(0,D.dr)(this,this.v.A().focusRenderer,this.getData(),this.Ki()):this.$v(D.p))};D.y.$v=function(a){this.hs(a)};D.y.Ic=(0,D.x)("Ub");D.y.Vc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.y.Aba=function(){var a=this.na().A().hiddenCategories;return a&&D.eg.wA(a,this.Vc())?D.k:D.p};
D.y.Cf=function(a,b){var c=new D.jo(this.j(),D.o,a.Ma()),d=b.V(),e=b.R(),f=this.V(),g=this.R();d!=f&&(this.N(d),(0,D.T)(c.O,"typeNumber",this,this.V,this.N,f));e!=g&&(this.W(e),(0,D.T)(c.O,"typeNumber",this,this.R,this.W,g));b.I&&this.I&&((0,D.T)(c.O,"typeRectangle",this.I,this.I.Rt,this.I.TA,this.I.Rt()),this.I.TA(b.I.Rt()));b.Va&&this.Va&&(d=b.Va.Ea(),e=this.Va.Ea(),d.pd(e)||(this.Va.Ga(d),(0,D.T)(c.O,"typeMatrix",this.Va,this.Va.Ea,this.Va.Ga,e)));(0,D.ur)(c,b.fb,this.fb);(0,D.ur)(c,b.I,this.I);
a.add(c,1)};D.ur=function(a,b,c){b&&c&&((0,D.T)(a.O,"typeFill",c,c.kc,c.P,c.kc()),c.P(b.kc()))};D.Yq.prototype.bi=function(a){this.na().ni.k(this);var b=this,c=new D.lo(this.j(),this,a.Ma());(0,D.Al)(c,function(){b.getParent().removeChild(b);b.Y()});a.add(c,0)};D.Yq.prototype.Vg=function(a){this.D(0);a.add(new D.Jn(this.j(),this,a.Ma()),2)};D.Yq.prototype.Zi=function(){return this.getData()};D.Yq.prototype.Ki=function(a){return{hovered:this.yl,selected:this.Fa(),focused:this.Ub,zoom:a?a:this.na().fa.fd()}};
D.fr=function(a){this.Init(a)};(0,D.ca)("DvtDiagramAutomation",D.fr);D.z.q(D.fr,D.Wj,"DvtDiagramAutomation");D.fr.prototype.Init=(0,D.v)("v");D.fr.prototype.Xl=function(a){return(a=(0,D.Xj)(this.v.za(),a))&&a instanceof D.Yq?"node["+this.v.eB().indexOf(a.getId())+"]":a&&a instanceof D.Zq?"link["+this.v.pI().indexOf(a.getId())+"]":D.o};
D.fr.prototype.fg=function(a){if("tooltip"==a)return(0,D.Fm)(this.v);var b=this.yG(a);a=b.component;var b=b.index,c=D.o;"node"==a?c=this.Ph(b):"link"==a&&(c=(0,D.gr)(this,b));return c?c.Aa():D.o};D.fr.prototype.getDomElementForSubId=D.fr.prototype.fg;D.fr.prototype.yG=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:D.o,c=(0,window.parseInt)(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};D.fr.prototype.ff=function(){return this.v.ff()};
D.fr.prototype.getNodeCount=D.fr.prototype.ff;D.fr.prototype.yp=function(){return this.v.yp()};D.fr.prototype.getLinkCount=D.fr.prototype.yp;D.fr.prototype.Zb=function(a){if(a=this.Ph(a)){var b={};b.id=a.getId();b.selected=a.Fa();b.tooltip=a.ed();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.mP(a.sN());return b}return D.o};D.fr.prototype.getNode=D.fr.prototype.Zb;
D.fr.prototype.ZL=function(a){if(a=(0,D.gr)(this,a)){var b={};b.id=a.getId();b.selected=a.Fa();b.tooltip=a.ed();b.label=a.getData().label;b.color=a.rA();b.width=a.Kv();b.style=a.nH();b.startNode=a.qd();b.endNode=a.pc();b.startConnectorType=a.Kq();b.endConnectorType=a.vp();return b}return D.o};D.fr.prototype.getLink=D.fr.prototype.ZL;D.fr.prototype.mP=function(a){if(a){var b={};b.shape=a instanceof D.Qn?a.Xa():"none";a.kc()&&(b.color=a.kc().zb());return b}return D.o};
D.fr.prototype.Ph=function(a){var b=this.v.eB();return 0<=a&&a<b.length?this.v.Q(b[a]):D.o};D.gr=function(a,b){var c=a.v.pI();return 0<=b&&b<c.length?a.v.Wb(c[b]):D.o};
  return D;
});